(this.webpackJsonporussystem=this.webpackJsonporussystem||[]).push([[0],{174:function(e,t,a){"use strict";a.r(t);var s=a(38),n=a(19),c=a(11),r=a(36),i=a(90),o=a(1),l="CHANGE_HOST",d="CHANGE_PAGE",u=localStorage.getItem("OrusSystem"),j=JSON.parse(u||"{}"),b=j.port,m=void 0===b?window.location.protocol.toString().replace(":",""):b,h=j.host,x=void 0===h?window.location.hostname:h,p=j.company,O={port:m,host:x,company:void 0===p?"optica madero":p,namePage:"dashboard",success:void 0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case l:var s=localStorage.getItem("OrusSystem"),n=a.host,c=void 0===n?window.location.hostname:n,r=a.port,i=void 0===r?window.location.protocol.toString().replace(":",""):r,u={ls:JSON.parse(s||"{}")},j=u.ls,b=void 0===j?{}:j;return console.log("[Orus System] cambiando datos de host:",i,c),b.port=i,b.host=c,Object(o.a)(Object(o.a)({},e),{},{port:i,host:c,success:!0});case d:return Object(o.a)(Object(o.a)({},e),{},{namePage:a});default:var m=localStorage.getItem("OrusSystem"),h={ls:JSON.parse(m||"{}")},x=h.ls,p=void 0===x?{}:x;return p.port=e.port,p.host=e.host,p.company=e.company,Object(o.a)(Object(o.a)({},e),{},{success:void 0})}},v={changeHost:function(e){return{type:l,payload:e}},changeNamePage:function(e){return{type:d,payload:e}}},g=f,N=a(12),y="SAGA_TRY_LOGING",w="SAGA_CHECK_LOGING",S="SAGA_GET_NOTIFY",C="SAGA_READ_NOTIFYS",_="SAGA_GET_LIST_USERS",k="SAGA_GET_USER",E="SAGA_DELETE_USER",L="SAGA_SAVE_USER",I="SAGA_CLEAR_TOKEN_USER",T="SET_LOGGIN",D="SET_LOGOUT",A="SET_NOTIFYS",P="SET_MESSAGES",F="SET_LIST_USERS",M="SET_OPTIONS_USERS",B="SET_USER",z=localStorage.getItem("OrusSystem"),U=JSON.parse(z||"{}"),G=U.isLogged,R=void 0!==G&&G,V=U.idUser,Y=void 0===V?0:V,q=U.username,$=void 0===q?null:q,J=U.name,H=void 0===J?null:J,Z=U.rol,X=void 0===Z?null:Z,Q=U.roles,W=void 0===Q?null:Q,K=U.permissions,ee=void 0===K?null:K,te=U.email,ae=void 0===te?null:te,se=U.token,ne=void 0===se?null:se,ce=U.branch,re={dataLoggin:{isLogged:R,idUser:Y,username:$,name:H,rol:X,email:ae,token:ne,branch:void 0===ce?null:ce,roles:W,permissions:ee},options:{page:1,orderby:"created_at",order:"desc",search:"",itemsPage:10},notifications:[],list:[],meta:{total:0},user:{},messages:[],loading:!1,loading_notify:!1},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case y:case w:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case S:case C:return Object(o.a)(Object(o.a)({},e),{},{loading_notify:!0});case _:return Object(o.a)(Object(o.a)({},e),{},{list:[],meta:{},loading:!0});case k:return Object(o.a)(Object(o.a)({},e),{},{user:{},loading:!0});case E:case L:case I:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case T:var s=re.dataLoggin;return s.isLogged=!0,s.idUser=a.idUser,s.username=a.username,s.name=a.name,s.roles=[a.roles],s.permissions=a.permissions,s.email=a.email,s.token=a.token,s.branch=a.branch,e.dataLoggin.isLogged||console.log("[Orus System] Acceso a sistema exitoso",s.username),Object(o.a)(Object(o.a)({},e),{},{dataLoggin:Object(o.a)({},s),loading:!1});case D:var n=localStorage.getItem("OrusSystem"),c={ls:JSON.parse(n||"{}")},r=c.ls,i=void 0===r?{}:r;return delete i.email,delete i.idUser,delete i.isLogged,delete i.name,delete i.rol,delete i.token,delete i.username,delete i.branch,delete i.roles,delete i.permissions,console.log("[Orus System] Cierre de sistema exitoso"),Object(o.a)(Object(o.a)({},e),{},{dataLoggin:{isLogged:!1,idUser:0,username:null,name:null,rol:null,roles:null,permissions:null,email:null,token:null},notifications:[],list:[],meta:{},user:{},messages:[],loading:!1});case A:return Object(o.a)(Object(o.a)({},e),{},{notifications:a,loading_notify:!1,messages:[]});case P:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case F:return Object(o.a)(Object(o.a)({},e),{},{list:a.data,meta:a.meta,loading:!1,messages:[]});case M:var l=a.key,d=a.value;return Object(o.a)(Object(o.a)({},e),{},{options:Object(o.a)(Object(o.a)({},e.options),{},Object(N.a)({},l,d))});case B:return Object(o.a)(Object(o.a)({},e),{},{user:a,list:[],meta:{},loading:!1,messages:[]});default:return Object(o.a)({},e)}},oe={loggin:function(e){return{type:y,payload:e}},getNotifyUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:S,payload:e}},readNotifyUser:function(e){return{type:C,payload:e}},setLoggin:function(e){return{type:T,payload:e}},setLogout:function(){return{type:D,payload:null}},setNotifys:function(e){return{type:A,payload:e}},setMessages:function(e){return{type:P,payload:e}},getListUsers:function(e){return{type:_,payload:e}},setListUsers:function(e){return{type:F,payload:e}},setOptions:function(e){return{type:M,payload:e}},setUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:B,payload:e}},getUser:function(e){return{type:k,payload:e}},deleteUser:function(e){return{type:E,payload:e}},saveUser:function(e){return{type:L,payload:e}},clearTokenUser:function(e){return{type:I,payload:e}}},le=oe,de=a(4),ue=a.n(de),je=a(3),be=a(84),me=a(13);function he(e){return xe.apply(this,arguments)}function xe(){return xe=Object(me.a)(ue.a.mark((function e(t){var a,s,n,c,r,i,o,l,d,u,j,b,m,h,x,p,O=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.length>1&&void 0!==O[1]?O[1]:"GET",s=O.length>2?O[2]:void 0,n=O.length>3&&void 0!==O[3]?O[3]:null,c=sessionStorage.getItem("OrusSystem"),r=JSON.parse(c||"{}"),i=r.token,o=void 0===i?"":i,l=localStorage.getItem("OrusSystem"),d=JSON.parse(l||"{}"),u=d.protocol,j=void 0===u?"http":u,b=d.host,m=void 0===b?window.location.hostname.toString():b,h=d.port,x=void 0===h?"80":h,p={method:a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o}},["POST","PUT"].includes(a.toUpperCase())&&s&&(p.body=JSON.stringify(s)),n&&(p.signal=n.signal),console.log("[DEBUG] API url:","".concat(j,"://").concat(m,":").concat(x,"/api/").concat(t)),e.next=11,fetch("".concat(j,"://").concat(m,":").concat(x,"/api/").concat(t),p).then(function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,s,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=200&&t.status<300)){e.next=27;break}a=Object(be.a)(t.headers.entries()),e.prev=2,a.s();case 4:if((s=a.n()).done){e.next=19;break}if("content-type"!==(n=s.value)[0]){e.next=17;break}e.t0=n[1],e.next="application/json"===e.t0?10:"text/csv; charset=UTF-8"===e.t0?13:16;break;case 10:return e.next=12,t.json();case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,t.blob();case 15:return e.abrupt("return",e.sent);case 16:return e.abrupt("return",null);case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(2),a.e(e.t1);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return e.abrupt("return",t.json());case 28:case"end":return e.stop()}}),e,null,[[2,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error("[Orus System] Query API failer:",t),console.error("[Orus System] Query API message:",e.message),null}));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function pe(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e,n=null,c=Object.keys(a);return t&&(s+="/".concat(t)),"object"!==typeof a||Array.isArray(a)||c&&(c.map((function(e){return null!==a[e]&&""!==a[e]||delete a[e],null})),Object.keys(a).length&&(n=new URLSearchParams(a),s+="?".concat(n))),s}var Oe=ue.a.mark(fe);function fe(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.payload,n.prev=1,console.log("[Orus System] Consultando credenciales en la API"),!t.email||!t.password){n.next=20;break}return n.next=6,Object(je.b)(he,"user/login","POST",t);case 6:if(!(a=n.sent).data){n.next=15;break}return console.log("[Orus System] Servidor:",a.message),n.next=11,Object(je.c)(le.setLoggin(a));case 11:return n.next=13,Object(je.c)(le.setMessages([{type:"success",text:"Bienvenido al sistema: ".concat(a.data.username)}]));case 13:n.next=18;break;case 15:return console.error("[Orus System] Fallo la validacion de credenciales en servidor",a),n.next=18,Object(je.c)(le.setMessages([{type:"error",text:"Credenciales no validas"}]));case 18:n.next=22;break;case 20:return n.next=22,Object(je.c)(le.setMessages([{type:"error",text:"No se enviaron las credenciales del usuario"}]));case 22:n.next=30;break;case 24:return n.prev=24,n.t0=n.catch(1),s=n.t0.message.includes("Failed to fetch"),console.error("[Orus System] Error en handle loggin:",n.t0.message),n.next=30,Object(je.c)(le.setMessages([{type:"error",text:s?"No hay comunicacion con el servidor, revise conexion.":"Desconocido, comuniquese con el administrador del sistema"}]));case 30:case"end":return n.stop()}}),Oe,null,[[1,24]])}var ve=ue.a.mark(ge);function ge(){var e,t;return ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("[Orus System] Consultando notificaciones en la API"),a.next=4,Object(je.b)(he,"user","GET");case 4:if(!(e=a.sent).data||!e.data.id){a.next=13;break}return t=e.data.unreadNotifications,console.log("[Orus System] Notificaciones encontradas:",t.length),console.log("[Orus System] Verificacion de usuario correcta",e.data.username),a.next=11,Object(je.c)(le.setNotifys(t));case 11:a.next=16;break;case 13:if(!e.message||"Unauthenticated."!==e.message){a.next=16;break}return a.next=16,Object(je.c)(le.setLogout());case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(0),console.error("[Orus System] Error en notificaciones/saga handleNotify",a.t0.message);case 21:case"end":return a.stop()}}),ve,null,[[0,18]])}var Ne=ue.a.mark(ye);function ye(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,console.log("[Orus System] Enviando notificaciones a la API"),n.next=5,Object(je.b)(he,"user/readAllNotifications","POST",t);case 5:if(a=n.sent,s=parseInt(t.id)<0?"Todas":1,!a.success){n.next=11;break}return console.log("[Orus System] Notificaciones marcadas leidas:",s),n.next=11,Object(je.c)(le.getNotifyUser());case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.error("[Orus System] Error en saga/Users handleNotifyRead",n.t0.message);case 16:case"end":return n.stop()}}),Ne,null,[[1,13]])}var we=ue.a.mark(Se);function Se(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("users",null,t),n.next=5,Object(je.b)(he,a);case 5:if(!(s=n.sent).data){n.next=11;break}return n.next=9,Object(je.c)(le.setListUsers(s));case 9:n.next=12;break;case 11:s.message&&(console.error("[Orus system] Error en la cosnulta de usuarios",s.message),window.sendPushMessage("Orus System",s.message));case 12:n.next=19;break;case 14:return n.prev=14,n.t0=n.catch(1),console.error("[Orus System] Error en saga/users handleGetList:",n.t0.message),n.next=19,Object(je.c)(le.setMessages([]));case 19:case"end":return n.stop()}}),we,null,[[1,14]])}var Ce=ue.a.mark(_e);function _e(e){var t,a;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(je.b)(he,"users/".concat(t));case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(je.c)(le.setUser(a.data));case 8:s.next=11;break;case 10:console.error("[OrusSystem] Error en saga/users por servidor handleGetUser",a);case 11:s.next=18;break;case 13:return s.prev=13,s.t0=s.catch(1),console.error("[OrusSystem] Error en saga/users handleGetUser:",s.t0.message),s.next=18,Object(je.c)(le.setMessages([]));case 18:case"end":return s.stop()}}),Ce,null,[[1,13]])}var ke=ue.a.mark(Ee);function Ee(e){var t,a,s,n,c;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,n="users/".concat(a),r.next=7,Object(je.b)(he,n,"DELETE");case 7:if(c=r.sent){r.next=16;break}return console.log("[Orus System] Usuario eliminado con exito",a),r.next=12,Object(je.c)(le.setMessages([{type:"success",text:"Usuario eliminado con exito"}]));case 12:return r.next=14,Object(je.c)(le.getListUsers(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar el usuario",c.message),!c.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)(le.setMessages([{type:"error",text:"No se puede eliminar un usuario que tiene actividades",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en saga/users handledDeleteUser",r.t0.message),r.next=27,Object(je.c)(le.setMessages([{type:"error",text:"al eliminar al usuario, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),ke,null,[[1,22]])}var Le=ue.a.mark(Ie);function Ie(e){var t,a,s,n,c,r,i,o,l,d,u,j;return ue.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,b.prev=1,a=t.data,s=void 0===a?{}:a,n=t.id,c=void 0===n?null:n,r=t.options,i=void 0===r?{}:r,o=t.currentUser,l=void 0===o?0:o,d=pe("users",c),u=c?"PUT":"POST",b.next=14,Object(je.b)(he,d,u,s);case 14:if(!(j=b.sent).message){b.next=17;break}throw new Error(j.message);case 17:return c?console.log("[Orus System] Usuario actualizada con exito: "+c):console.log("[Orus system] Usuario creado con exito",j.data.id),b.next=20,Object(je.c)(le.setMessages([{type:"success",text:c?"Usuario actualizado con exito":"Usuario almacenado con exito"}]));case 20:if(!Object.keys(i).length){b.next=27;break}return b.next=23,Object(je.c)(le.getListUsers(i));case 23:return b.next=25,Object(je.c)(le.setUser({}));case 25:case 30:b.next=34;break;case 27:if(c!==l){b.next=32;break}return b.next=30,Object(je.c)(le.setLoggin({data:j.data}));case 32:return b.next=34,Object(je.c)(le.setUser(j.data));case 34:b.next=41;break;case 36:return b.prev=36,b.t0=b.catch(1),console.error("[Orus System] Error en saga/users handleSaveUser",b.t0.message),b.next=41,Object(je.c)(le.setMessages([{type:"error",text:"al almacenar el usuario, intentelo mas tarde"}]));case 41:case"end":return b.stop()}}),Le,null,[[1,36]])}var Te=ue.a.mark(De);function De(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,console.log("[Orus System] Enviando notificaciones a la API"),a=pe("users/clearToken",t),n.next=6,Object(je.b)(he,a,"POST");case 6:if(!(s=n.sent).success){n.next=13;break}return console.log("[Orus System] Se ha eliminado el token del usuario: "+t),n.next=11,Object(je.c)(le.getUser(t));case 11:n.next=14;break;case 13:console.error("[Orus System] No se elimino el token del usuario: "+t,s);case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),console.error("[Orus System] Error en saga/User handleClearToken:",n.t0.message);case 19:case"end":return n.stop()}}),Te,null,[[1,16]])}var Ae=ue.a.mark(Pe);function Pe(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de usuario"),e.next=3,Object(je.d)(y,fe);case 3:return e.next=5,Object(je.d)(S,ge);case 5:return e.next=7,Object(je.d)(C,ye);case 7:return e.next=9,Object(je.d)(_,Se);case 9:return e.next=11,Object(je.d)(k,_e);case 11:return e.next=13,Object(je.d)(E,Ee);case 13:return e.next=15,Object(je.d)(L,Ie);case 15:return e.next=17,Object(je.d)(I,De);case 17:case"end":return e.stop()}}),Ae)}var Fe=ie,Me="SAGA_GET_LIST_ORDER",Be="SAGA_DELETE_ORDER",ze="SAGA_SAVE_ORDER",Ue="SAGA_GET_ORDER",Ge="SET_LIST_ORDER",Re="SET_MESSAGE_ORDER",Ve="SET_ORDER",Ye="SET_OPTIONS_ORDER",qe={list:[],metaList:{},order:{id:0},options:{page:1,orderby:"created_at",order:"desc",search:"",status:"",itemsPage:10},messages:[],loading:!1},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Me:return Object(o.a)(Object(o.a)({},e),{},{list:[],metaList:{},order:{id:0},loading:!0});case Be:case ze:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Ue:return Object(o.a)(Object(o.a)({},e),{},{list:[],metaList:{},order:{id:0},loading:!0});case Ge:return Object(o.a)(Object(o.a)(Object(o.a)({},e),a.result),{},{messages:[],loading:!1});case Re:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case Ve:return Object(o.a)(Object(o.a)({},e),{},{order:a,messages:[],loading:!1});case Ye:var s=a.key,n=a.value;return Object(o.a)(Object(o.a)({},e),{},{options:Object(o.a)(Object(o.a)({},e.options),{},Object(N.a)({page:1},s,n))});default:return Object(o.a)({},e)}},Je={result:{list:[],metaList:{}}},He={getListOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Me,payload:e}},deleteOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Be,payload:e}},saveOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ze,payload:e}},getOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ue,payload:e}},setListOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je;return{type:Ge,payload:e}},setMessageOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Re,payload:e}},setOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ve,payload:e}},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ye,payload:e}}},Ze=He,Xe=ue.a.mark(Qe);function Qe(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("orders",null,t),n.next=5,Object(je.b)(he,a);case 5:return s=n.sent,n.next=8,Object(je.c)(Ze.setListOrder({result:{list:s.data,metaList:s.meta}}));case 8:n.next=15;break;case 10:return n.prev=10,n.t0=n.catch(1),console.error("[Orus System] Error en saga/order handleGetList:",n.t0),n.next=15,Object(je.c)(Ze.setMessageOrder([]));case 15:case"end":return n.stop()}}),Xe,null,[[1,10]])}var We=ue.a.mark(Ke);function Ke(e){var t,a,s,n,c;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,n="orders/".concat(a),r.next=7,Object(je.b)(he,n,"DELETE");case 7:if(c=r.sent){r.next=16;break}return console.log("[Orus System] Pedido eliminado con exito",a),r.next=12,Object(je.c)(Ze.setMessageOrder([{type:"success",text:"Pedido eliminado con exito"}]));case 12:return r.next=14,Object(je.c)(Ze.getListOrder(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar pedido",c.message),!c.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)(Ze.setMessageOrder([{type:"error",text:"No se puede eliminar un pedido que tiene asignada una nota de venta",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en handledDeleteOrder",r.t0),r.next=27,Object(je.c)(Ze.setMessageOrder([{type:"error",text:"al eliminar el pedidos, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),We,null,[[1,22]])}var et=ue.a.mark(tt);function tt(e){var t,a,s,n,c,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,console.log("DEBUG SAVE ORDER payload",t),u.prev=2,a=t.data,s=void 0===a?{}:a,n=t.id,c=void 0===n?null:n,r=t.options,i=void 0===r?{}:r,o=pe("orders",c),l=c?"PUT":"POST",u.next=13,Object(je.b)(he,o,l,s);case 13:if(!(d=u.sent).message){u.next=16;break}throw new Error(d.message);case 16:return c?console.log("[Orus System] Pedido actualizado con exito: "+c):console.log("[Orus system] Pedido creado con exito",d.data.id),u.next=19,Object(je.c)(Ze.setMessageOrder([{type:"success",text:c?"Pedido actualizado con exito":"Pedido almacenado con exito"}]));case 19:return u.next=21,Object(je.c)(Ze.getListOrder(i));case 21:u.next=28;break;case 23:return u.prev=23,u.t0=u.catch(2),console.error("[Orus System] Error in handleSaveOrder",u.t0),u.next=28,Object(je.c)(Ze.setMessageOrder([{type:"error",text:"al almacenar el pedido, intentelo mas tarde"}]));case 28:case"end":return u.stop()}}),et,null,[[2,23]])}var at=ue.a.mark(st);function st(e){var t,a;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(je.b)(he,"orders/".concat(t));case 4:if(!(a=s.sent).data){s.next=11;break}return console.log("[Orus System] Orden:",a.data.id),s.next=9,Object(je.c)(Ze.setOrder(a.data));case 9:s.next=12;break;case 11:console.error("[Orus System] Error en handleGetOrder",a);case 12:s.next=19;break;case 14:return s.prev=14,s.t0=s.catch(1),console.error("[Orus System] Error en saga/order handleGetOrder:",s.t0),s.next=19,Object(je.c)(Ze.setMessageOrder([]));case 19:case"end":return s.stop()}}),at,null,[[1,14]])}var nt=ue.a.mark(ct);function ct(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de ordenes"),e.next=3,Object(je.d)(Me,Qe);case 3:return e.next=5,Object(je.d)(Be,Ke);case 5:return e.next=7,Object(je.d)(ze,tt);case 7:return e.next=9,Object(je.d)(Ue,st);case 9:case"end":return e.stop()}}),nt)}var rt=$e,it="SAGA_GET_LIST_CATEGORIES",ot="SAGE_DELETE_CATEGORY",lt="SAGA_GET_CATEGORY",dt="SAGA_SAVE_CATEGORY",ut="SET_LIST_CATEGORY",jt="SET_MESSAGE_CATEGORY",bt="SET_CATEGORY",mt={list:[],metaList:{},messages:[],category:{id:0},loading:!1},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:case lt:case ot:case dt:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case ut:var a=t.payload;return Object(o.a)(Object(o.a)(Object(o.a)({},e),a.result),{},{messages:[],loading:!1});case jt:var s=t.payload;return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:s});case bt:var n=t.payload;return Object(o.a)(Object(o.a)({},e),{},{loading:!1,category:n});default:return Object(o.a)({},e)}},xt={getListCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:it,payload:e}},getCategory:function(e){return{type:lt,payload:e}},setListCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ut,payload:e}},setCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:bt,payload:e}},setMessageCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:jt,payload:e}},deleteCategory:function(e){return{type:ot,payload:e}},saveCategory:function(e){return{type:dt,payload:e}}},pt=xt,Ot=ue.a.mark(ft);function ft(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("categories",null,t),n.next=5,Object(je.b)(he,a);case 5:return s=n.sent,n.next=8,Object(je.c)(pt.setListCategories({result:{list:s.data,metaList:s.meta}}));case 8:n.next=15;break;case 10:return n.prev=10,n.t0=n.catch(1),console.error("[Orus System] Error en saga/categorias handleGetList:",n.t0.message),n.next=15,Object(je.c)(pt.setMessageCategory([]));case 15:case"end":return n.stop()}}),Ot,null,[[1,10]])}var vt=ue.a.mark(gt);function gt(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=t.id,n.next=5,Object(je.b)(he,"categories/".concat(a),"GET");case 5:if(!(s=n.sent).data){n.next=11;break}return n.next=9,Object(je.c)(pt.setCategory(s.data));case 9:n.next=14;break;case 11:return console.error("[Orus System] Error in handle GET Contact",s),n.next=14,Object(je.c)(pt.setMessageCategory([{type:"error",text:"al traer datos de contacto en la API"}]));case 14:n.next=21;break;case 16:return n.prev=16,n.t0=n.catch(1),console.error("[Orus System] Error in handle GET Contact",n.t0),n.next=21,Object(je.c)(pt.setMessageCategory([{type:"error",text:"al traer datos de contacto, intentelo mas tarde"}]));case 21:case"end":return n.stop()}}),vt,null,[[1,16]])}var Nt=ue.a.mark(yt);function yt(e){var t,a,s,n,c;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,n="categories/".concat(a),r.next=7,Object(je.b)(he,n,"DELETE");case 7:if(c=r.sent){r.next=16;break}return console.log("[Orus System] Categoria eliminada con exito",a),r.next=12,Object(je.c)(pt.setMessageCategory([{type:"success",text:"Marca eliminada con exito"}]));case 12:return r.next=14,Object(je.c)(pt.getListCategories(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar la categoria: "+a,c.message),!c.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)(pt.setMessageCategory([{type:"error",text:"No se puede eliminar una categoria que ya esta relacionado con un producto",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en saga/category handledDeleteCategory",r.t0),r.next=27,Object(je.c)(pt.setMessageCategory([{type:"error",text:"al eliminar la categoria, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),Nt,null,[[1,22]])}var wt=ue.a.mark(St);function St(e){var t,a,s,n,c,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.data,s=void 0===a?{}:a,n=t.id,c=void 0===n?null:n,r=t.options,i=void 0===r?{}:r,o=pe("categories",c),l=c?"PUT":"POST",u.next=12,Object(je.b)(he,o,l,s);case 12:if(!(d=u.sent).message){u.next=15;break}throw new Error(d.message);case 15:return c?console.log("[Orus System] Categoria actualizada con exito: "+c):console.log("[Orus system] Categoria creada con exito",d.data.id),u.next=18,Object(je.c)(pt.setMessageCategory([{type:"success",text:c?"Categoria actualizada con exito":"Categoria almacenada con exito"}]));case 18:return u.next=20,Object(je.c)(pt.getListCategories(i));case 20:u.next=27;break;case 22:return u.prev=22,u.t0=u.catch(1),console.error("[Orus System] Error saga/category handleSaveCategory",u.t0),u.next=27,Object(je.c)(pt.setMessageCategory([{type:"error",text:"al almacenar la categoria, intentelo mas tarde"}]));case 27:case"end":return u.stop()}}),wt,null,[[1,22]])}var Ct=ue.a.mark(_t);function _t(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de categorias"),e.next=3,Object(je.d)(it,ft);case 3:return e.next=5,Object(je.d)(lt,gt);case 5:return e.next=7,Object(je.d)(ot,yt);case 7:return e.next=9,Object(je.d)(dt,St);case 9:case"end":return e.stop()}}),Ct)}var kt=ht,Et="SAGA_GET_LIST_STORE",Lt="SAGA_DELETE_STORE",It="SAGA_GET_ITEM",Tt="SAGA_SAVE_ITEM",Dt="SAGA_GET_LIST_BRANDS",At="SAGA_DELETE_BRAND",Pt="SAGA_SAVE_BRAND",Ft="SAGA_SAVE_INBRANCH",Mt="SET_LIST_STORE",Bt="SET_MESSAGE_STORE",zt="SET_OPTIONS",Ut="SET_ITEM",Gt="SET_LIST_BRANDS",Rt="SET_LOADING",Vt={list:[],metaList:{current_page:1,total:10,per_page:10,last_page:1},item:{},options:{page:1,orderby:"created_at",order:"desc",search:"",itemsPage:10,supplier:"",brand:"",zero:"false"},brands:[],messages:[],loading:!1},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Et:return Object(o.a)(Object(o.a)({},e),{},{list:[],metaList:{},loading:!0});case It:return Object(o.a)(Object(o.a)({},e),{},{item:{},loading:!0});case Lt:case Tt:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Dt:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,brands:[]});case Pt:case At:case Ft:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Mt:var s=a.result;return Object(o.a)(Object(o.a)(Object(o.a)({},e),s),{},{loading:!1});case Ut:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:[],item:a});case Bt:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case zt:var n=a.key,c=a.value;return Object(o.a)(Object(o.a)({},e),{},{options:Object(o.a)(Object(o.a)({},e.options),{},Object(N.a)({page:1},n,c))});case Gt:return Object(o.a)(Object(o.a)({},e),{},{brands:a,messages:[],loading:!1});case Rt:return Object(o.a)(Object(o.a)({},e),{},{loading:a||!1});default:return Object(o.a)({},e)}},qt={getListStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Et,payload:e}},deleteItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Lt,payload:e}},getItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:It,payload:e}},setListStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Mt,payload:e}},setMessagesStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Bt,payload:e}},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:zt,payload:e}},setItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ut,payload:e}},saveItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Tt,payload:e}},getListBrands:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Dt,payload:e}},setListBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Gt,payload:e}},saveBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Pt,payload:e}},deleteBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:At,payload:e}},saveInBranch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ft,payload:e}},setLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:Rt,payload:e}}},$t=qt,Jt=ue.a.mark(Ht);function Ht(e){var t,a,s,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,s=pe("store",null,t),c.next=5,Object(je.b)(he,s);case 5:if(!(n=c.sent).message){c.next=8;break}throw new Error(n.message);case 8:return c.next=10,Object(je.c)($t.setListStore({result:{list:n.data,metaList:n.meta,messages:null!==(a=n.data)&&void 0!==a&&a.length?[]:[{type:"info",text:"El codigo ".concat(t.search," no existe en el almacen")}]}}));case 10:c.next=17;break;case 12:return c.prev=12,c.t0=c.catch(1),console.error("[Orus System] Error en saga/store handleGetList:",c.t0.message),c.next=17,Object(je.c)($t.setMessagesStore([{type:"error",text:"En servidor al traer la lista de productos"}]));case 17:case"end":return c.stop()}}),Jt,null,[[1,12]])}var Zt=ue.a.mark(Xt);function Xt(e){var t,a,s,n,c;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,n="store/".concat(a),r.next=7,Object(je.b)(he,n,"DELETE");case 7:if(c=r.sent){r.next=16;break}return console.log("[Orus System] Item eliminado con exito",a),r.next=12,Object(je.c)($t.setMessagesStore([{type:"success",text:"Producto eliminado con exito"}]));case 12:return r.next=14,Object(je.c)($t.getListStore(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar producto",c.message),!c.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)($t.setMessagesStore([{type:"error",text:"No se puede eliminar un producto que ya esta relacionado con una venta",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en handledDeleteItem",r.t0),r.next=27,Object(je.c)($t.setMessagesStore([{type:"error",text:"al eliminar el producto, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),Zt,null,[[1,22]])}var Qt=ue.a.mark(Wt);function Wt(e){var t,a;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(je.b)(he,"store/".concat(t));case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(je.c)($t.setItem(a.data));case 8:s.next=11;break;case 10:console.error("[OrusSystem] Error en handleGetItem",a);case 11:s.next=18;break;case 13:return s.prev=13,s.t0=s.catch(1),console.error("[OrusSystem] Error en saga/order handleGetItem:",s.t0),s.next=18,Object(je.c)($t.setMessagesStore([]));case 18:case"end":return s.stop()}}),Qt,null,[[1,13]])}var Kt=ue.a.mark(ea);function ea(e){var t,a,s,n,c,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.data,s=void 0===a?{}:a,n=t.id,c=void 0===n?null:n,r=t.options,i=void 0===r?{}:r,o=pe("store",c),l=c?"PUT":"POST",u.next=12,Object(je.b)(he,o,l,s);case 12:if(!(d=u.sent).message){u.next=16;break}throw d.errors&&Object.keys(d.errors).length&&Object.keys(d.errors).forEach((function(e){throw new Error(d.errors[e])})),new Error(d.message);case 16:return c?console.log("[Orus System] Producto actualizado con exito: "+c):console.log("[Orus system] Producto creado con exito",d.data.id),u.next=19,Object(je.c)($t.setMessagesStore([{type:"success",text:c?"Producto actualizado con exito":"Producto almacenado con exito"}]));case 19:if(!i){u.next=24;break}return u.next=22,Object(je.c)($t.getListStore(i));case 22:u.next=27;break;case 24:if(!d.data||!d.data.id){u.next=27;break}return u.next=27,Object(je.c)($t.getItem(d.data.id));case 27:u.next=34;break;case 29:return u.prev=29,u.t0=u.catch(1),console.error("[Orus System] Error en saga handleSaveItem",u.t0.message),u.next=34,Object(je.c)($t.setMessagesStore([{type:"error",text:u.t0.message}]));case 34:case"end":return u.stop()}}),Kt,null,[[1,29]])}var ta=ue.a.mark(aa);function aa(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("brands",null,t),n.next=5,Object(je.b)(he,a);case 5:if(!(s=n.sent).data){n.next=9;break}return n.next=9,Object(je.c)($t.setListBrand(s.data));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(1),console.error("[Orus System] Error en saga handleGetListBrands:",n.t0),n.next=16,Object(je.c)($t.setMessagesStore([]));case 16:case"end":return n.stop()}}),ta,null,[[1,11]])}var sa=ue.a.mark(na);function na(e){var t,a,s,n,c,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.data,s=void 0===a?{}:a,n=t.id,c=void 0===n?null:n,r=t.options,i=void 0===r?{}:r,o=pe("brands",c),l=c?"PUT":"POST",u.next=12,Object(je.b)(he,o,l,s);case 12:if(!(d=u.sent).message){u.next=15;break}throw new Error(d.message);case 15:return c?console.log("[Orus System] Marca actualizada con exito: "+c):console.log("[Orus system] Marca creada con exito",d.data.id),u.next=18,Object(je.c)($t.setMessagesStore([{type:"success",text:c?"Marca actualizada con exito":"Marca almacenada con exito"}]));case 18:return u.next=20,Object(je.c)($t.getListBrands(i));case 20:u.next=27;break;case 22:return u.prev=22,u.t0=u.catch(1),console.error("[Orus System] Error saga handleSaveBrand",u.t0),u.next=27,Object(je.c)($t.setMessagesStore([{type:"error",text:"al almacenar la marca, intentelo mas tarde"}]));case 27:case"end":return u.stop()}}),sa,null,[[1,22]])}var ca=ue.a.mark(ra);function ra(e){var t,a,s,n,c;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,n="brands/".concat(a),r.next=7,Object(je.b)(he,n,"DELETE");case 7:if(c=r.sent){r.next=16;break}return console.log("[Orus System] Marca eliminada con exito",a),r.next=12,Object(je.c)($t.setMessagesStore([{type:"success",text:"Marca eliminada con exito"}]));case 12:return r.next=14,Object(je.c)($t.getListBrands(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar marca",c.message),!c.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)($t.setMessagesStore([{type:"error",text:"No se puede eliminar un marca que ya esta relacionado con un producto",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en saga handledDeleteBrand",r.t0),r.next=27,Object(je.c)($t.setMessagesStore([{type:"error",text:"al eliminar la marca, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),ca,null,[[1,22]])}var ia=ue.a.mark(oa);function oa(e){var t,a,s,n,c,r,i,o;return ue.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,l.prev=1,a=t.data,s=void 0===a?{}:a,n=t.id,r=pe("branches",c=void 0===n?null:n),i=c?"PUT":"POST",l.next=10,Object(je.b)(he,r,i,s);case 10:if(!(o=l.sent).message){l.next=13;break}throw new Error(o.message);case 13:return c?console.log("[Orus System] Productos actualizados con exito "+c):console.log("[Orus system] Productos creados con exito"),l.next=16,Object(je.c)($t.setMessagesStore([{type:"success",text:c?"Productos actualizados con exito":"Productos almacenados con exito"}]));case 16:return l.next=18,Object(je.c)($t.getItem(s.store_item_id));case 18:l.next=25;break;case 20:return l.prev=20,l.t0=l.catch(1),console.error("[Orus System] Error en saga handleSaveItemInBranch",l.t0.message),l.next=25,Object(je.c)($t.setMessagesStore([{type:"error",text:"al almacenar los productos en el almacen correspondiente"}]));case 25:case"end":return l.stop()}}),ia,null,[[1,20]])}var la=ue.a.mark(da);function da(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de store"),e.next=3,Object(je.d)(Et,Ht);case 3:return e.next=5,Object(je.d)(Lt,Xt);case 5:return e.next=7,Object(je.d)(It,Wt);case 7:return e.next=9,Object(je.d)(Tt,ea);case 9:return e.next=11,Object(je.d)(Dt,aa);case 11:return e.next=13,Object(je.d)(Pt,na);case 13:return e.next=15,Object(je.d)(At,ra);case 15:return e.next=17,Object(je.d)(Ft,oa);case 17:case"end":return e.stop()}}),la)}var ua=Yt,ja="SET_LIST_CONTACT",ba="SET_MESSAGE_CONTACT",ma="SET_CONTACT",ha="SET_LIST_SUPPLIERS",xa="SAGA_GET_LIST_CONTACTS",pa="SAGA_DELETE_CONTACT",Oa="SAGA_SAVE_CONTACT",fa="SAGA_GET_CONTACT",va="SAGA_GET_LIST_SUPPLIERS",ga={list:[],metaList:{},contact:{id:0},suppliers:[],supplier:{id:0},messages:[],loading:!1},Na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case xa:return Object(o.a)(Object(o.a)({},e),{},{list:[],metaList:{},loading:!0});case pa:case Oa:return Object(o.a)(Object(o.a)({},e),{},{contact:{id:0},loading:!0});case fa:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,contact:{id:0}});case va:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,supplier:{id:0}});case ja:return Object(o.a)(Object(o.a)(Object(o.a)({},e),{},{contact:{id:0}},a.result),{},{messages:[],loading:!1});case ba:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case ma:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,contact:a,list:[],metaList:{},messages:[]});case ha:return Object(o.a)(Object(o.a)({},e),{},{supplier:{id:0},suppliers:a,messages:[],loading:!1});default:return Object(o.a)({},e)}},ya={getListContacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:xa,payload:e}},deleteContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:pa,payload:e}},saveContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Oa,payload:e}},setListContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ja,payload:e}},setMessageContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ba,payload:e}},getContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:fa,payload:e}},setContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ma,payload:e}},getListSuppliers:function(e){return{type:va,payload:e}},setListSuppliers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ha,payload:e}}},wa=ya,Sa=ue.a.mark(Ca);function Ca(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("contacts",null,t),n.next=5,Object(je.b)(he,a,"GET");case 5:if(!(s=n.sent).data){n.next=11;break}return n.next=9,Object(je.c)(wa.setListContact({result:{list:s.data,metaList:s.meta},options:t}));case 9:n.next=13;break;case 11:return n.next=13,Object(je.c)(wa.setMessageContact([{type:"error",text:"al traer datos de contactos en la API"}]));case 13:n.next=20;break;case 15:return n.prev=15,n.t0=n.catch(1),console.error("[Orus System] Error in handle getListOrder",n.t0),n.next=20,Object(je.c)(wa.setMessageContact([{type:"error",text:"al traer datos de contactos, intentelo mas tarde"}]));case 20:case"end":return n.stop()}}),Sa,null,[[1,15]])}var _a=ue.a.mark(ka);function ka(e){var t,a,s,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=t.id,s=pe("contacts",a),c.next=6,Object(je.b)(he,s,"DELETE");case 6:if(n=c.sent){c.next=13;break}return console.log("[Orus System] Contacto eliminado con exito",a),c.next=11,Object(je.c)(wa.setMessageContact([{type:"success",text:"Contacto eliminado con exito"}]));case 11:case 17:c.next=21;break;case 13:if(console.error("[Orus System] Fallo al eliminar el contacto",n.message),!n.message.indexOf("[SQLSTATE[23000]]")){c.next=19;break}return c.next=17,Object(je.c)(wa.setMessageContact([{type:"error",text:"No se puede eliminar un contacto que tiene registros",errnum:"SQL23000"}]));case 19:return c.next=21,Object(je.c)(wa.setMessageContact([{type:"error",text:"No se puede eliminar el contacto"}]));case 21:c.next=28;break;case 23:return c.prev=23,c.t0=c.catch(1),console.error("[Orus System] Error in handle delete contact",c.t0),c.next=28,Object(je.c)(wa.setMessageContact([{type:"error",text:"al eliminar el contacto, intentelo mas tarde"}]));case 28:case"end":return c.stop()}}),_a,null,[[1,23]])}var Ea=ue.a.mark(La);function La(e){var t,a,s,n,c,r,i,o;return ue.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,l.prev=1,a=t.data,s=void 0===a?{}:a,n=t.id,r=pe("contacts",c=void 0===n?null:n),i=c?"PUT":"POST",l.next=10,Object(je.b)(he,r,i,s);case 10:if(!(o=l.sent).message||!o.errors){l.next=22;break}if(!o.errors.name){l.next=17;break}return l.next=15,Object(je.c)(wa.setMessageContact([{type:"error",text:o.errors.name[0].replace("name","Nombre")}]));case 15:l.next=20;break;case 17:if(!o.errors.email){l.next=20;break}return l.next=20,Object(je.c)(wa.setMessageContact([{type:"error",text:o.errors.email[0]}]));case 20:case 25:l.next=33;break;case 22:if(!o.message){l.next=27;break}return l.next=25,Object(je.c)(wa.setMessageContact([{type:"error",text:"Error en servidor, contacte al administrador: \nResponse [".concat(o.message,"]")}]));case 27:if(!o.data){l.next=33;break}return c?console.log("[Orus System] Contacto actualizado con exito",c):console.log("[Orus system] Contacto creado con exito",o.data.id),l.next=31,Object(je.c)(wa.setMessageContact([{type:"success",text:c?"Contacto actualizado con exito":"Contacto almacenado con exito"}]));case 31:return l.next=33,Object(je.c)(wa.setContact(o.data));case 33:l.next=40;break;case 35:return l.prev=35,l.t0=l.catch(1),console.error("[OrusSystem] Error in handle save contact --",l.t0),l.next=40,Object(je.c)(wa.setMessageContact([{type:"error",text:"En el servidor al almacenar el contacto, intentelo mas tarde"}]));case 40:case"end":return l.stop()}}),Ea,null,[[1,35]])}var Ia=ue.a.mark(Ta);function Ta(e){var t,a;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(je.b)(he,"contacts/".concat(t),"GET");case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(je.c)(wa.setContact(a.data));case 8:s.next=13;break;case 10:return console.error("[Orus System] Error in handle GET Contact",a),s.next=13,Object(je.c)(wa.setMessageContact([{type:"error",text:"al traer datos de contacto en la API"}]));case 13:s.next=20;break;case 15:return s.prev=15,s.t0=s.catch(1),console.error("[Orus System] Error in handle GET Contact",s.t0),s.next=20,Object(je.c)(wa.setMessageContact([{type:"error",text:"al traer datos de contacto, intentelo mas tarde"}]));case 20:case"end":return s.stop()}}),Ia,null,[[1,15]])}var Da=ue.a.mark(Aa);function Aa(e){var t,a,s,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,a=void 0===t?0:t,c.prev=1,s=pe("contacts",null,{type:1,business:null!==a?a:"",orderby:"name",order:"asc"}),c.next=6,Object(je.b)(he,s);case 6:if(!(n=c.sent).data){c.next=10;break}return c.next=10,Object(je.c)(wa.setListSuppliers(n.data));case 10:c.next=17;break;case 12:return c.prev=12,c.t0=c.catch(1),console.error("[Orus System] Error en saga handleGetListSuppliers:",c.t0),c.next=17,Object(je.c)(wa.setMessageContact([]));case 17:case"end":return c.stop()}}),Da,null,[[1,12]])}var Pa=ue.a.mark(Fa);function Fa(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de contacto"),e.next=3,Object(je.d)(xa,Ca);case 3:return e.next=5,Object(je.d)(pa,ka);case 5:return e.next=7,Object(je.d)(Oa,La);case 7:return e.next=9,Object(je.d)(fa,Ta);case 9:return e.next=11,Object(je.d)(va,Aa);case 11:case"end":return e.stop()}}),Pa)}var Ma=Na,Ba="SAGA_GET_LIST_EXAM",za="SAGA_DELETE_EXAM",Ua="SAGA_SAVE_EXAM",Ga="SAGA_GET_EXAM",Ra="SET_LIST_EXAM",Va="SET_EXAM",Ya="SET_MESSAGE_EXAM",qa={list:[],metaList:{},messages:[],exam:{id:0},loading:!1},$a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Ba:case Ga:case za:case Ua:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Ra:return Object(o.a)(Object(o.a)(Object(o.a)({},e),{},{exam:{id:0}},a.result),{},{messages:[],loading:!1});case Ya:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case Va:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,exam:a});default:return Object(o.a)({},e)}},Ja={getListExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ba,payload:e}},setListExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ra,payload:e}},setMessagesExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Ya,payload:e}},deleteExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:za,payload:e}},saveExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ua,payload:e}},getExam:function(e){return{type:Ga,payload:e}},setExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Va,payload:e}}},Ha=Ja,Za=ue.a.mark(Xa);function Xa(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("exams",null,t),n.next=5,Object(je.b)(he,a);case 5:return s=n.sent,n.next=8,Object(je.c)(Ha.setListExam({result:{list:s.data,metaList:s.meta}}));case 8:n.next=15;break;case 10:return n.prev=10,n.t0=n.catch(1),console.error("[Orus System] Error en saga/exam getList:",n.t0),n.next=15,Object(je.c)(Ha.setMessagesExam([]));case 15:case"end":return n.stop()}}),Za,null,[[1,10]])}var Qa=ue.a.mark(Wa);function Wa(e){var t,a,s,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=t.id,s=pe("exams",a),c.next=6,Object(je.b)(he,s,"DELETE");case 6:if(n=c.sent){c.next=13;break}return console.log("[Orus System] Examen eliminado con exito",a),c.next=11,Object(je.c)(Ha.setMessagesExam([{type:"success",text:"Examen eliminado con exito"}]));case 11:case 17:c.next=21;break;case 13:if(console.error("[Orus System] Fallo al eliminar el examen",n.message),!n.message.indexOf("[SQLSTATE[23000]]")){c.next=19;break}return c.next=17,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"No se puede eliminar un examen que esta asignado",errnum:"SQL23000"}]));case 19:return c.next=21,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"No se puede eliminar el examen"}]));case 21:c.next=28;break;case 23:return c.prev=23,c.t0=c.catch(1),console.error("[Orus System] Error in handle deleteOrder",c.t0),c.next=28,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"al eliminar el examen, intentelo mas tarde"}]));case 28:case"end":return c.stop()}}),Qa,null,[[1,23]])}var Ka=ue.a.mark(es);function es(e){var t,a,s,n,c,r,i;return ue.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,a=t.id,s=t.data,n=t.options,c=pe("exams",a),r=a?"PUT":"POST",o.next=9,Object(je.b)(he,c,r,s);case 9:if((i=o.sent).message){o.next=18;break}return console.log("[Orus System] Examen almacenado con exito",i.data.id),o.next=14,Object(je.c)(Ha.setMessagesExam([{type:"success",text:a?"Examen actualizado con exito":"Examen almacenado con exito"}]));case 14:return o.next=16,Object(je.c)(Ha.getListExam(n));case 16:o.next=21;break;case 18:return console.error("[Orus System] Fallo al almacenar el examen",i.message),o.next=21,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"No se puede almacenar el examen"}]));case 21:o.next=28;break;case 23:return o.prev=23,o.t0=o.catch(1),console.error("[Orus System] Error in handle save exam",o.t0),o.next=28,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"al almacenar el examen, intentelo mas tarde"}]));case 28:case"end":return o.stop()}}),Ka,null,[[1,23]])}var ts=ue.a.mark(as);function as(e){var t,a;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(je.b)(he,"exams/".concat(t),"GET");case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(je.c)(Ha.setExam(a.data));case 8:s.next=11;break;case 10:console.error("[OrusSystem] Error en handleGetExam",a);case 11:s.next=18;break;case 13:return s.prev=13,s.t0=s.catch(1),console.error("[OrusSystem] Error en saga/Exam handleGetExam",s.t0),s.next=18,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"al traer datos de contacto, intentelo mas tarde"}]));case 18:case"end":return s.stop()}}),ts,null,[[1,13]])}var ss=ue.a.mark(ns);function ns(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de exam"),e.next=3,Object(je.d)(Ba,Xa);case 3:return e.next=5,Object(je.d)(za,Wa);case 5:return e.next=7,Object(je.d)(Ua,es);case 7:return e.next=9,Object(je.d)(Ga,as);case 9:case"end":return e.stop()}}),ss)}var cs=$a,rs="SAGA_GET_LIST_SALES",is="SAGA_DELETE_SALE",os="SAGA_SAVE_SALE",ls="SAGA_GET_SALE",ds="SAGA_GET_LIST_BANK",us="SAGA_DELETE_PAYMENT",js="SET_LIST_SALES",bs="SET_SALE",ms="SET_MESSAGE_SALE",hs="SET_LIST_BANKS",xs={confirm:function(e,t){window.Swal.fire({title:"Ventas",text:e,icon:"question",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then((function(e){e.dismiss||t&&t()}))},getMethodName:function(e){switch(e){case 1:return"efectivo";case 2:return"tarjeta debito";case 3:return"tarjeta Credito";case 4:return"la marina";case 5:return"cheque";case 6:return"transferencia";default:return"otro"}},getSession:function(){return Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(10)},getForPay:function(e,t,a){var s=0,n=0;return t.forEach((function(e){s+=e.total})),e.forEach((function(e){n+=e.subtotal})),n-s-a},getSubTotal:function(e){var t=0;return e.forEach((function(e){t+=e.subtotal})),console.log("SubTotal:",t),t},getTotal:function(e,t){return console.log("Subtotal:",e),console.log("Descuento:",t),e-t},getPagado:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){t+=e.total})),t}},ps=xs,Os={list:[],metaList:{},messages:[],sale:{id:0,customer:{id:2,nombre:"venta de mostrador",email:"",telefonos:{},f_nacimiento:null,edad:0},contact_id:2,items:[],session:ps.getSession(),descuento:0,subtotal:0,total:0,payments:[],created_at:new Date},listBanks:[],loading:!1,load_save:!1},fs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Os,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case rs:case ls:case is:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case os:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,load_save:!0});case ds:case us:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case js:return Object(o.a)(Object(o.a)(Object(o.a)({},e),a.result),{},{messages:[],loading:!1});case ms:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case bs:return Object(o.a)(Object(o.a)({},e),{},{sale:a,messages:[],loading:!1,load_save:!1});case hs:return Object(o.a)(Object(o.a)({},e),{},{listBanks:a,messages:[],loading:!1});default:return Object(o.a)({},e)}},vs={setListSales:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:js,payload:e}},setMessagesSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ms,payload:e}},saveSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:os,payload:e}},setSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:bs,payload:e}},getListSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:rs,payload:e}},getSale:function(e){return{type:ls,payload:e}},deleteSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:is,payload:e}},getListBanks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ds,payload:e}},setListBanks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:hs,payload:e}},deletePayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:us,payload:e}}},gs=vs,Ns=ue.a.mark(ys);function ys(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("sales",null,t),n.next=5,Object(je.b)(he,a);case 5:return s=n.sent,console.log("SALE RESULT SAGA",s),n.next=9,Object(je.c)(gs.setListSales({result:{list:s.data,metaList:s.meta}}));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(1),console.error("[Orus System] Error en saga/exam getList:",n.t0),n.next=16,Object(je.c)(gs.setMessagesSale([]));case 16:case"end":return n.stop()}}),Ns,null,[[1,11]])}var ws=ue.a.mark(Ss);function Ss(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("config",null,Object(o.a)(Object(o.a)({},t),{},{name:"bank"})),n.next=5,Object(je.b)(he,a);case 5:return s=n.sent,n.next=8,Object(je.c)(gs.setListBanks(s.data));case 8:n.next=15;break;case 10:return n.prev=10,n.t0=n.catch(1),console.error("[Orus System] Error en saga/banks handleGetList:",n.t0),n.next=15,Object(je.c)(gs.setMessagesSale([]));case 15:case"end":return n.stop()}}),ws,null,[[1,10]])}var Cs=ue.a.mark(_s);function _s(e){var t,a,s,n,c,r;return ue.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,a=t.id,s=t.data,n=pe("sales",a),c=a?"PUT":"POST",i.next=8,Object(je.b)(he,n,c,s);case 8:if((r=i.sent).message){i.next=17;break}return console.log("[Orus System] Venta almacenada con exito",r.data.id),i.next=13,Object(je.c)(gs.setMessagesSale([{type:"success",text:a?"Venta actualizada con exito":"Venta almacenada con exito"}]));case 13:return i.next=15,Object(je.c)(gs.setSale(r.data));case 15:i.next=20;break;case 17:return console.error("[Orus System] Fallo al almacenar la venta",r),i.next=20,Object(je.c)(gs.setMessagesSale([{type:"error",text:"No se puede almacenar la venta"}]));case 20:i.next=27;break;case 22:return i.prev=22,i.t0=i.catch(1),console.error("[Orus System] Error in saga/sales handledSaveSale",i.t0.message),i.next=27,Object(je.c)(gs.setMessagesSale([{type:"error",text:"al almacenar venta, intentelo mas tarde"}]));case 27:case"end":return i.stop()}}),Cs,null,[[1,22]])}var ks=ue.a.mark(Es);function Es(e){var t,a,s,n,c;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.sale_id,n=pe("payments",a),r.next=7,Object(je.b)(he,n,"DELETE");case 7:if(c=r.sent){r.next=17;break}return r.next=11,Object(je.c)(gs.setMessagesSale([{type:"success",text:"Pago eliminado con exito"}]));case 11:if(!s){r.next=14;break}return r.next=14,Object(je.c)(gs.getSale(s));case 14:console.log("[Orus System] Pago eliminado con exito",a),r.next=20;break;case 17:return console.error("[Orus System] Fallo al eliminar el pago",c.message),r.next=20,Object(je.c)(gs.setMessagesSale([{type:"error",text:"No se puede eliminar el pago"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en payment/saga handledDeletePayment",r.t0.message),r.next=27,Object(je.c)(gs.setMessagesSale([{type:"error",text:"al eliminar el pago, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),ks,null,[[1,22]])}var Ls=ue.a.mark(Is);function Is(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("sales",t),n.next=5,Object(je.b)(he,a);case 5:if(!(s=n.sent).data){n.next=10;break}return console.log("[Orus System] Estableciendo venta",t),n.next=10,Object(je.c)(gs.setSale(s.data));case 10:n.next=17;break;case 12:return n.prev=12,n.t0=n.catch(1),console.error("[Orus System] Error en saga/sale handleGetSale:",n.t0.message),n.next=17,Object(je.c)(gs.setMessagesSale([]));case 17:case"end":return n.stop()}}),Ls,null,[[1,12]])}var Ts=ue.a.mark(Ds);function Ds(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de ventas"),e.next=3,Object(je.d)(rs,ys);case 3:return e.next=5,Object(je.d)(ds,Ss);case 5:return e.next=7,Object(je.d)(os,_s);case 7:return e.next=9,Object(je.d)(us,Es);case 9:return e.next=11,Object(je.d)(ls,Is);case 11:case"end":return e.stop()}}),Ts)}var As=fs,Ps="SAGA_GET_LIST_CONFIG",Fs="SAGA_GET_CONFIG",Ms="SAGA_DELETE_CONFIG",Bs="SAGA_SAVE_CONFIG",zs="SET_LIST_CONFIG",Us="SET_CONFIG",Gs="SET_MESSAGE_CONFIG",Rs="SAGA_GET_BRANCHES",Vs="SET_BRANCHES",Ys={list:[],meta:{},config:{},messages:[],branches:[],loading:!1},qs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ys,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Ps:return Object(o.a)(Object(o.a)({},e),{},{list:[],meta:{},loading:!0});case Fs:return Object(o.a)(Object(o.a)({},e),{},{config:{},loading:!0});case Ms:case Bs:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Gs:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case zs:return Object(o.a)(Object(o.a)({},e),{},{list:a.data,meta:a.meta,loading:!1,messages:[]});case Us:return Object(o.a)(Object(o.a)({},e),{},{config:a,loading:!1,messages:[]});case Rs:return Object(o.a)({},e);case Vs:return Object(o.a)(Object(o.a)({},e),{},{branches:a});default:return Object(o.a)({},e)}},$s={setMessages:function(e){return{type:Gs,payload:e}},getListConfig:function(e){return{type:Ps,payload:e}},getConfig:function(e){return{type:Fs,payload:e}},deleteConfig:function(e){return{type:Ms,payload:e}},saveConfig:function(e){return{type:Bs,payload:e}},setListConfig:function(e){return{type:zs,payload:e}},setConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Us,payload:e}},getBranches:function(e){return{type:Rs,payload:e}},setBranches:function(e){return{type:Vs,payload:e}}},Js=$s,Hs=ue.a.mark(Zs);function Zs(e){var t,a,s;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=pe("config",null,t),n.next=5,Object(je.b)(he,a);case 5:if(!(s=n.sent).data){n.next=11;break}return n.next=9,Object(je.c)(Js.setListConfig(s));case 9:n.next=12;break;case 11:s.message&&console.error("[Orus system] Error en la consulta de configuraciones",s.message);case 12:n.next=19;break;case 14:return n.prev=14,n.t0=n.catch(1),console.error("[Orus System] Error en saga/config handleGetListConfig:",n.t0.message),n.next=19,Object(je.c)(Js.setMessages([]));case 19:case"end":return n.stop()}}),Hs,null,[[1,14]])}var Xs=ue.a.mark(Qs);function Qs(e){var t,a;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(je.b)(he,"users/".concat(t));case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(je.c)(Js.setConfig(a.data));case 8:s.next=11;break;case 10:console.error("[OrusSystem] Error en saga/users por servidor handleGetUser",a);case 11:s.next=18;break;case 13:return s.prev=13,s.t0=s.catch(1),console.error("[OrusSystem] Error en saga/users handleGetUser:",s.t0.message),s.next=18,Object(je.c)(Js.setMessages([]));case 18:case"end":return s.stop()}}),Xs,null,[[1,13]])}var Ws=ue.a.mark(Ks);function Ks(e){var t,a,s,n,c;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,n="config/".concat(a),r.next=7,Object(je.b)(he,n,"DELETE");case 7:if(c=r.sent){r.next=16;break}return console.log("[Orus System] Configuracion eliminada con exito",a),r.next=12,Object(je.c)(Js.setMessages([{type:"success",text:"Configuracion eliminada con exito"}]));case 12:return r.next=14,Object(je.c)(Js.getListConfig(s));case 14:r.next=17;break;case 16:console.error("[Orus Server] Fallo al eliminar configuracion",c.message);case 17:r.next=24;break;case 19:return r.prev=19,r.t0=r.catch(1),console.error("[Orus Server] Error en saga/configuraciones handledDeleteConfig",r.t0.message),r.next=24,Object(je.c)(Js.setMessages([{type:"error",text:"al eliminar la configuracion, intentelo mas tarde"}]));case 24:case"end":return r.stop()}}),Ws,null,[[1,19]])}var en=ue.a.mark(tn);function tn(e){var t,a,s,n,c,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.data,s=void 0===a?{}:a,n=t.id,c=void 0===n?null:n,r=t.options,i=void 0===r?{}:r,o=pe("config",c),l=c?"PUT":"POST",u.next=12,Object(je.b)(he,o,l,s);case 12:if(!(d=u.sent).message){u.next=15;break}throw new Error(d.message);case 15:return c?console.log("[Orus System] Configuracion actualizada con exito: "+c):console.log("[Orus system] Configuracion creada con exito",d.data.id),u.next=18,Object(je.c)(Js.setMessages([{type:"success",text:c?"Configuracion actualizada con exito":"Configuracion almacenada con exito"}]));case 18:return u.next=20,Object(je.c)(Js.getListConfig(i));case 20:u.next=27;break;case 22:return u.prev=22,u.t0=u.catch(1),console.error("[Orus Server] Error en saga/configuraciones handleSaveConfig",u.t0),u.next=27,Object(je.c)(Js.setMessages([{type:"error",text:"al almacenar la configuracion, intentelo mas tarde"}]));case 27:case"end":return u.stop()}}),en,null,[[1,22]])}var an=ue.a.mark(sn);function sn(e){var t,a;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e.payload,s.prev=1,t=pe("config",null,{page:1,name:"branches",itemsPage:10}),s.next=6,Object(je.b)(he,t);case 6:if(!(a=s.sent).data){s.next=12;break}return s.next=10,Object(je.c)(Js.setBranches(a.data));case 10:s.next=13;break;case 12:a.message&&console.error("[Orus system] Error en la consulta de sucursales",a.message);case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(1),console.error("[Orus System] Error en saga/config handleGetListConfig:",s.t0.message);case 18:case"end":return s.stop()}}),an,null,[[1,15]])}var nn=ue.a.mark(cn);function cn(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de configuracion"),e.next=3,Object(je.d)(Ps,Zs);case 3:return e.next=5,Object(je.d)(Fs,Qs);case 5:return e.next=7,Object(je.d)(Ms,Ks);case 7:return e.next=9,Object(je.d)(Bs,tn);case 9:return e.next=11,Object(je.d)(Rs,sn);case 11:case"end":return e.stop()}}),nn)}var rn=qs,on=Object(r.b)({users:Fe,default:g,order:rt,category:kt,storeItem:ua,contact:Ma,exam:cs,sales:As,config:rn}),ln=ue.a.mark(dn);function dn(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(je.a)([Pe(),ct(),_t(),da(),Fa(),ns(),Ds(),cn()]);case 2:case"end":return e.stop()}}),ln)}var un=Object(i.a)(),jn="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.c,bn=Object(r.d)(on,jn(r.a.apply(void 0,[un])));un.run(dn);var mn=bn,hn=a(7),xn=a(2),pn=a.n(xn),On=a(22),fn=a(85),vn=a.n(fn);function gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(n,c){var r=localStorage.getItem("OrusSystem"),i=sessionStorage.getItem("OrusSystem"),o=JSON.parse(r||"{}"),l=o.protocol,d=void 0===l?window.location.protocol:l,u=o.host,j=void 0===u?window.location.hostname:u,b=o.port,m=void 0===b?window.location.port:b,h=JSON.parse(i||"{}").token,x=void 0===h?"":h,p={method:t,url:"".concat(d,"://").concat(j,":").concat(m,"/api/").concat(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+x}};["POST","PUT"].includes(t.toUpperCase())&&a&&(p.data=JSON.stringify(a)),s&&(p.signal=s.signal),vn()(p).then((function(e){return n(e.data)})).catch((function(t){var a;return console.error("[Orus System] Query API failer:",e),console.error("[Orus System] Query API message:",null===t||void 0===t?void 0:t.message),c(null===(a=t.response)||void 0===a?void 0:a.data)}))}))}function Nn(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e,n=null,c=Object.keys(a);return t&&(s+="/".concat(t)),"object"!==typeof a||Array.isArray(a)||c&&(c.map((function(e){return null!==a[e]&&""!==a[e]||delete a[e],null})),c.length&&(n=new URLSearchParams(a),s+="?".concat(n))),s}var yn=a(0),wn=Object(xn.createContext)(null);function Sn(e){var t=e.children,a=Object(On.f)(),s=sessionStorage.getItem("OrusSystem"),n={isLogged:!1,idUser:0,username:"",name:"",rol:null,email:"",token:"",branch:"",roles:"",permissions:[]},c=Object(xn.useState)((function(){return s&&"undefined"!==s&&(n=JSON.parse(s)),n})),r=Object(hn.a)(c,2),i=r[0],l=r[1],d=function(e){var t,a;if(e){var s={isLogged:null!==(t=e.isLogged)&&void 0!==t?t:i.isLogged,idUser:e.id,username:e.username.toLowerCase(),name:e.name.toLowerCase(),rol:2,email:e.email,token:null!==(a=e.token)&&void 0!==a?a:i.token,branch:Object(o.a)(Object(o.a)({},e.branch.data),{},{id:e.branch.id}),roles:e.roles[0],permissions:e.permissions};l(s),sessionStorage.setItem("OrusSystem",JSON.stringify(s))}},u=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,s;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,s=t.password,a&&s){e.next=3;break}return e.abrupt("return",{status:!1,message:"The fields user or passwors are required"});case 3:return e.next=5,gn("user/login","POST",t).then((function(e){if(!e.status)return{status:!1,data:e};var t=e.data;return d(Object(o.a)(Object(o.a)({},t),{},{token:e.token,isLogged:!0})),{status:!0,message:e.message}})).catch((function(e){return{status:!1,message:"Error en el servidor: "+e.message}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(me.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn("user/logout","POST").then((function(){return l(n),sessionStorage.setItem("OrusSystem","{}"),!0})).catch((function(e){return console.error("[Server] When close session:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(me.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn("user").then((function(e){return"Unauthenticated."===e.message?a.push("/login"):e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(me.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().catch((function(){return null}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",t.unreadNotifications);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(me.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof t){e.next=2;break}return e.abrupt("return",{status:!1,message:"Payload should be object"});case 2:return e.next=4,gn("user/readAllNotifications","POST",t).then((function(e){var a=parseInt(t.id)<0?"Todas":1;return!!e.success&&(console.log("[Orus System] Notificaciones marcadas leidas:",a),!0)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,s;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nn("users",i.idUser),s={branch_id:t,name:i.name,username:i.username},e.next=4,gn(a,"PUT",s).then((function(e){return!(!e.data||e.message)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(xn.useEffect)((function(){b().then((function(e){e&&(console.log("[Orus system] Session was created"),d(Object(o.a)(Object(o.a)({},e),{},{isLogged:!0})))}))}),[i.isLogged]),Object(yn.jsx)(wn.Provider,{value:{auth:i,setSession:u,outSession:j,getNotifications:m,setNotifications:h,setBranch:x},children:t})}var Cn=a(15),_n=a(16),kn=a(17),En=a(18),Ln=a(9),In=a.n(Ln);function Tn(e){var t=e.meta,a=e.color,s=e.handlePagination,n=function(e){s?s(e):console.error("[OrusSystem] Funcion de paginador no definida")};return Object(yn.jsx)("div",{className:"btn-group",children:Object(yn.jsxs)("ul",{className:"pagination pagination-sm m-0 mb-1",children:[Object(yn.jsx)("li",{className:1===t.current_page?"page-item disabled":"page-item test-",children:Object(yn.jsx)("a",{className:1===t.current_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),n(1)},children:"Primero"})}),Object(yn.jsx)("li",{className:1===t.current_page?"page-item disabled":"page-item",children:Object(yn.jsx)("a",{className:1===t.current_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),n(t.current_page-1)},children:Object(yn.jsx)("i",{className:"fas fa-caret-left"})})}),Object(yn.jsx)("li",{className:"page-item",children:Object(yn.jsx)("span",{className:"page-link text-dark",children:t.current_page&&t.last_page?Object(yn.jsxs)(yn.Fragment,{children:[t.current_page," /",t.last_page]}):"..."})}),Object(yn.jsx)("li",{className:t.current_page===t.last_page?"page-item disabled":"page-item",children:Object(yn.jsx)("a",{className:t.current_page===t.last_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),n(t.current_page+1)},children:Object(yn.jsx)("i",{className:"fas fa-caret-right"})})}),Object(yn.jsx)("li",{className:t.current_page===t.last_page?"page-item disabled":"page-item",children:Object(yn.jsx)("a",{className:t.current_page===t.last_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),n(t.last_page)},children:"Ultimo"})})]})})}var Dn=function(e){var t=e.defaultSearch,a=void 0===t?"":t,s=Object(xn.useState)(a),n=Object(hn.a)(s,2),c=n[0],r=n[1],i=Object(xn.useState)(""),o=Object(hn.a)(i,2),l=o[0],d=o[1],u=Object(xn.useRef)();return Object(xn.useEffect)((function(){var t=null;e.handleSearch&&(c.length?(l&&clearTimeout(l),t=setTimeout((function(){e.handleSearch(c)}),1e3),d(t)):e.handleSearch(""))}),[c]),Object(yn.jsxs)("div",{className:"card card-"+e.color+" card-outline",children:[Object(yn.jsxs)("div",{className:"card-header",children:[Object(yn.jsxs)("h3",{className:"card-title text-"+e.color,children:[Object(yn.jsx)("i",{className:e.icon?"mr-1 fas fa-"+e.icon:"mr-1 fas fa-user"}),e.title]}),Object(yn.jsx)("div",{className:"card-tools",children:e.handleSearch&&Object(yn.jsxs)("div",{className:"input-group input-group-sm position-relative",children:[Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Buscar",defaultValue:c,ref:u,onChange:function(e){var t=e.target.value;r(t)},onKeyPress:function(t){"Enter"===t.key&&(l&&clearTimeout(l),e.handleSearch(c))}}),Object(yn.jsx)("div",{className:"position-absolute",style:{top:5,left:-20,color:"#ced4da"},children:Object(yn.jsx)("i",{className:"fas fa-search"})}),c.length>2?Object(yn.jsx)("div",{className:"input-group-append",children:Object(yn.jsx)("div",{className:"btn btn-secondary",onClick:function(e){u.current.value="",r("")},children:Object(yn.jsx)("i",{className:"fas fa-window-close"})})}):null]})})]}),Object(yn.jsxs)("div",{className:"p-0 card-body",children:[e.handleDeleteItem||e.handleEditItem||e.handleStatus||e.handleSync||e.meta||e.handleDownload?Object(yn.jsxs)("div",{className:"mailbox-controls",children:[Object(yn.jsxs)("div",{className:"btn-group",children:[e.handleDeleteItem?Object(yn.jsx)("button",{type:"button",className:"btn btn-default btn-sm text-danger",title:"Eliminar",disabled:!e.itemSelected,onClick:function(t){return e.handleDeleteItem()},children:Object(yn.jsx)("i",{className:"fas fa-trash-alt"})}):null,e.handleEditItem?Object(yn.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Editar",disabled:!e.itemSelected,onClick:function(t){return e.handleEditItem()},children:Object(yn.jsx)("i",{className:"fas fa-edit"})}):null,e.handleStatus?Object(yn.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Estado",disabled:!e.itemSelected,onClick:function(t){return e.handleStatus()},children:Object(yn.jsx)("i",{className:"fas fa-check-circle"})}):null,e.handleSync?Object(yn.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Recargar",onClick:function(t){return e.handleSync()},children:Object(yn.jsx)("i",{className:"fas fa-sync-alt"})}):null,e.handlePrint?Object(yn.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Imprimir",onClick:function(t){return e.handlePrint()},children:Object(yn.jsx)("i",{className:"fas fa-print"})}):null,e.handleDownload?Object(yn.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Exportar",onClick:function(t){return e.handleDownload()},children:Object(yn.jsx)("i",{className:"fas fa-file-csv"})}):null]}),Object(yn.jsx)("div",{className:"float-right",children:e.meta&&Object(yn.jsx)(Tn,{meta:e.meta,color:e.color,handlePagination:e.handlePagination})})]}):null,Object(yn.jsx)("div",{className:"table-responsive mailbox-messages",children:e.children})]}),e.loading?Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})},An={validInputs:function(e){var t=e.email,a=e.password;return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)?/^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$/.test(a)?{isValid:!0}:(console.error("[Orus System] Fallo validacion de password"),{isValid:!1,msg:"Los datos introducidos no son validos",input:"password"}):(console.error("[Orus System] Fallo validacion de email"),{isValid:!1,msg:"Los datos introducidos no son validos",input:"email"})},getNameRoles:function(e){var t=[];return e.forEach((function(e,a){t.push(Object(yn.jsx)("span",{className:"text-capitalize badge badge-dark",children:e},a))})),1===t.length?t:t.length>1?Object(yn.jsx)("span",{className:"text-capitalize badge badge-dark",children:"+1"}):void 0},handleDelete:function(e,t,a,s){if(e.id)return s||(s="\xbfEsta seguro de eliminar el usuario ".concat(e.username,"?")),window.Swal.fire({text:s,icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){if(!s.dismiss&&a)return a({id:e.id,options:t}),!0})),!1},handleSave:function(e,t,a,s,n,c){c||(c=e?"\xbfEsta seguro de actualizar el usuario?":"\xbfEsta seguro de crear un nuevo usuario?"),window.Swal.fire({title:"Almacenamiento",text:c,icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:e?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(c){!c.dismiss&&s&&(s({id:e,data:t,options:a}),n&&n())}))}};var Pn={_getListUsers:le.getListUsers,_setOptions:le.setOptions,_setUser:le.setUser,_getUser:le.getUser,_deleteUser:le.deleteUser},Fn=Object(c.b)((function(e){var t=e.users;return{users:t.list,meta:t.meta,messages:t.messages,loading:t.loading,options:t.options}}),Pn)((function(e){var t=e.loading,a=e.meta,s=e.users,n=e.options,c=e._getListUsers,r=e._setOptions,i=e._deleteUser,o=e._setUser,l=e._getUser,d=Object(xn.useState)({id:0}),u=Object(hn.a)(d,2),j=u[0],b=u[1],m=function(e,t){n[e]!==t&&r({key:e,value:t})},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:0};e&&e.preventDefault(),t.id?o(t):j.id&&l(j.id)};return Object(xn.useEffect)((function(){c(n)}),[n]),Object(yn.jsx)(Dn,{title:"Lista de productos",icon:"id-badge",color:"primary",loading:t,meta:a,itemSelected:j.id,defaultSearch:n.search,handlePagination:function(e){return m("page",e)},handleSearch:function(e){return m("search",e)},handleDeleteItem:function(){An.handleDelete(j,n,i),b({id:0})},handleEditItem:h,handleSync:function(){return c(n)},children:Object(yn.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{}),Object(yn.jsx)("th",{children:"Nombre"}),Object(yn.jsx)("th",{children:"Email/Usuario"}),Object(yn.jsx)("th",{children:"Rol"}),Object(yn.jsx)("th",{children:"Sucursal"}),"created_at"===n.orderby?Object(yn.jsx)("th",{children:"Creado"}):Object(yn.jsx)("th",{children:"Modificado"})]})}),Object(yn.jsx)("tbody",{children:s.length?Object(yn.jsx)(yn.Fragment,{children:s.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(yn.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"item_"+e.id,checked:j.id===e.id,onChange:function(t){var a,s=t.target;return a=e,s.checked||(a={id:0}),void b(a)}}),Object(yn.jsx)("label",{htmlFor:"item_"+e.id,className:"sr-only"})]}),Object(yn.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",children:Object(yn.jsx)("a",{href:"\xb7link",onClick:function(t){return h(t,e)},className:"text-bold",children:e.name})}),Object(yn.jsx)("td",{className:"mailbox-name text-muted text-truncate",children:Object(yn.jsx)("span",{children:e.email})}),Object(yn.jsx)("td",{className:"mailbox-name text-dark text-bold text-truncate",children:An.getNameRoles(e.roles)}),Object(yn.jsx)("td",{className:"text-truncate",children:Object(yn.jsx)("span",{className:"text-capitalize",children:e.branch.data.name})}),"created_at"===n.orderby?Object(yn.jsx)("td",{className:"mailbox-date text-muted text-truncate",children:Object(yn.jsx)("span",{children:In()(e.created_at).format("LL")})}):Object(yn.jsx)("td",{className:"mailbox-date text-muted text-truncate",children:Object(yn.jsx)("span",{children:In()(e.updated_at).fromNow()})})]},e.id)}))}):Object(yn.jsx)("tr",{children:Object(yn.jsx)("th",{className:"text-center text-muted",colSpan:"6",children:"No hay usuarios registrados"})})})]})})}));function Mn(e){var t=Object(xn.useState)({bgColor:"bg-blue",validate:"",text:"Debe de tener al menos 4 caracteres.",searchUser:!1}),a=Object(hn.a)(t,2),s=a[0],n=a[1],c=e.col,r=e.username,i=e.userId,l=e.onChange,d=s.bgColor,u=s.validate,j=s.text,b=s.searchUser;return Object(yn.jsxs)("div",{className:"col-"+c,children:[r.length?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Usuario"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text "+d,children:b?Object(yn.jsx)("i",{className:"fas fa-spinner"}):Object(yn.jsx)("i",{className:"fas fa-user-check"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control"+u,placeholder:"Usuario",name:"username",autoComplete:"off",autoFocus:"autofocus",defaultValue:r,onChange:function(e){return function(e){var t=e.name,a=e.value;l({name:t,value:a.toLowerCase()})}(e.target)},onBlur:function(){var e=r.replace(/\s/g,"");/^[\w]{4,16}$/.test(e)?(n(Object(o.a)(Object(o.a)({},s),{},{searchUser:!0})),Bn(e,i).then((function(e){e?(n(Object(o.a)(Object(o.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"El usuario ya esta registrado.",searchUser:!1})),l({name:"validUserName",value:!1})):(n(Object(o.a)(Object(o.a)({},s),{},{bgColor:"bg-blue",validate:"",text:"",searchUser:!1})),l({name:"validUserName",value:!0}))}))):e.length>4?(n(Object(o.a)(Object(o.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"No tiene el formato de usuario"})),l({name:"validUserName",value:!1})):e.length||(n(Object(o.a)(Object(o.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"Debe de tener de 4 a 16 caracteres alfanumericos."})),l({name:"validUserName",value:!1}))},required:"required",minLength:"4",maxLength:"16",pattern:"^[\\w]{4,16}$"})]}),u?Object(yn.jsx)("small",{className:"text-muted",children:j}):""]})}var Bn=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,s,n,c=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:null,s=pe("users",null,{username:t,userId:a,deleted:0}),e.next=4,he(s);case 4:if(!(n=e.sent).data||!n.data.length){e.next=9;break}if(n.data[0].username.toLowerCase()!==t){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function zn(e){var t=Object(xn.useState)({bgColor:"bg-blue",validate:"",text:"No tiene el formato de un email",searchEmail:!1}),a=Object(hn.a)(t,2),s=a[0],n=a[1],c=e.col,r=e.email,i=e.userId,l=e.onChange,d=s.bgColor,u=s.validate,j=s.text,b=s.searchEmail;return Object(yn.jsxs)("div",{className:"col-"+c,children:[r.length?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Email"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text "+d,children:b?Object(yn.jsx)("i",{className:"fas fa-spinner"}):Object(yn.jsx)("i",{className:"fas fa-at"})})}),Object(yn.jsx)("input",{type:"email",className:"form-control"+u,placeholder:"email",name:"email",autoComplete:"off",defaultValue:r,onChange:function(e){return function(e){var t=e.name,a=e.value;l({name:t,value:a.toLowerCase()})}(e.target)},onBlur:function(){var e=r.replace(/\s/g,"");/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)?(n(Object(o.a)(Object(o.a)({},s),{},{searchUser:!0})),Un(e,i).then((function(e){e?(n({bgColor:"bg-red",validate:" border border-danger",text:"El usuario ya esta registrado.",searchUser:!1}),l({name:"validUserEmail",value:!1})):(n(Object(o.a)(Object(o.a)({},s),{},{bgColor:"bg-blue",validate:"",text:""})),l({name:"validUserEmail",value:!0}))}))):e.length>8?(n(Object(o.a)(Object(o.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"No tiene el formato de un email valido"})),l({name:"validUserEmail",value:!1})):e.length||(n(Object(o.a)(Object(o.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"Escriba un email valido"})),l({name:"validUserEmail",value:!1}))},required:"required"})]}),u?Object(yn.jsx)("small",{className:"text-muted",children:j}):""]})}var Un=function(){var e=Object(me.a)(ue.a.mark((function e(t,a){var s,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=pe("users",null,{email:t,userId:a,deleted:0}),e.next=3,he(s);case 3:if(!(n=e.sent).data||!n.data.length){e.next=8;break}if(n.data[0].email.toLowerCase()!==t){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Gn=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).getBranchs=function(){(0,s.props._getBranchs)({page:1,name:"branches",itemsPage:10})},s.handleCloseSession=function(e){var t=s.props._clearToken;e?window.Swal.fire({title:"Almacenamiento",text:"Esta seguro de eliminar la sesion del usuario",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Si",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(a){!a.dismiss&&t&&t(e)})):console.error("[Orus System] Id is undefinned",e)},s.handleClosePanel=function(){(0,s.props._setUser)()},s.catchInputs=function(e){var t=e.name,a=e.value;"text"===e.type&&(a=a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")),s.setState(Object(N.a)({},t,a))},s.handleSave=function(){var e=s.state,t=e.id,a=e.name,n=e.username,c=e.role,r=e.password,i=e.email,o=e.branch_id,l=e.validUserName,d=e.validUserEmail,u=s.props,j=u._saveUser,b=u.options,m={name:a,username:n,role:c,email:i,branch_id:o};return r.length>=8&&(m.password=r),l?d?(console.log("DEBUG NEW USER",m),void An.handleSave(t,m,b,j)):(window.Swal.fire({icon:"error",title:"El correo ya esta en uso",showConfirmButton:!1,timer:1500}),!1):(window.Swal.fire({icon:"error",title:"El nombre de usuario ya esta en uso",showConfirmButton:!1,timer:1500}),!1)},s.state={id:0,role:"admin",roles:[],permissions:[],username:"",validUserName:!1,name:"",email:"",validUserEmail:!1,password:"",updated_at:"",created_at:"",session:{},branch_id:12,load:!1},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){console.log("Nuevo usuario component montado--------");var e=this.props.user;e&&e.id&&this.setState({id:e.id,role:e.roles[0],roles:e.roles,permissions:e.permissions,username:e.username,name:e.name,email:e.email,updated_at:e.updated_at,created_at:e.created_at,session:e.session,branch_id:e.branch.id,validUserName:!0,validUserEmail:!0}),this.getBranchs()}},{key:"render",value:function(){var e=this,t=this.state,a=t.load,s=t.id,n=t.role,c=t.permissions,r=t.username,i=t.name,o=t.email,l=t.password,d=t.updated_at,u=t.created_at,j=t.session,b=t.branch_id,m=t.validUserName,h=t.validUserEmail,x=!(!a&&m&&i.length&&h),p=this.props.branchs;return Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-".concat(s?8:12),children:[Object(yn.jsxs)("form",{className:"card card-primary card-outline",autoComplete:"off",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h1",{className:"card-title text-primary",children:[Object(yn.jsx)("i",{className:"fas fa-user mr-2"}),s?"Editar usuario":"Registrar nuevo usuario"]})}),Object(yn.jsx)("div",{className:"card-body was-validated",children:a?Object(yn.jsx)("div",{className:"alert alert-light text-center p-4",children:Object(yn.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(yn.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"row mb-3",children:[Object(yn.jsx)(Mn,{username:r,userId:s||"",col:6,onChange:this.catchInputs}),Object(yn.jsxs)("div",{className:"col-6",children:[i.length?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Nombre completo"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text bg-blue",children:Object(yn.jsx)("i",{className:"fas fa-user-tag"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Nombre completo",name:"name",autoComplete:"off",defaultValue:i,onChange:function(t){var a=t.target;return e.catchInputs(a)},required:"required",minLength:"8",pattern:"^[a-zA-Z]{2,20}[\\s]{1}[a-zA-Z]{2,20}.*"})]})]})]}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-md-6",children:[l.length||s?Object(yn.jsxs)("small",{children:[Object(yn.jsx)("label",{children:"Contrase\xf1a"}),!s&&Object(yn.jsx)("span",{className:"ml-2 text-muted",children:"De 8 a 16 caracteres, por lo menos una mayuscula, un numero y un caracter especial"})]}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text bg-blue",children:Object(yn.jsx)("i",{className:"fas fa-lock"})})}),Object(yn.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"password",autoComplete:"off",defaultValue:l,onChange:function(t){var a=t.target;return e.catchInputs(a)},required:!s,minLength:"8",maxLength:"16",pattern:"^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$"})]})]}),Object(yn.jsx)(zn,{email:o,userId:s||"",col:6,onChange:this.catchInputs})]}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-md-6",children:[Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Tipo de usuario"})}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text bg-blue",children:Object(yn.jsx)("i",{className:"fas fa-id-card"})})}),Object(yn.jsxs)("select",{className:"custom-select",name:"role",defaultValue:n,onChange:function(t){var a=t.target;return e.catchInputs(a)},children:[Object(yn.jsx)("option",{value:"admin",children:"Administrador"}),Object(yn.jsx)("option",{value:"ventas",children:"Ventas"}),Object(yn.jsx)("option",{value:"doctor",children:"Optometrista"})]})]})]}),Object(yn.jsxs)("div",{className:"col-md-6",children:[Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Sucursal"})}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text bg-blue",children:Object(yn.jsx)("i",{className:"fas fa-store"})})}),Object(yn.jsx)("select",{className:"custom-select text-uppercase",name:"branch_id",value:b,onChange:function(t){var a=t.target;return e.catchInputs(a)},children:p.map((function(e){return Object(yn.jsx)("option",{value:e.id,children:e.data.name},e.id)}))})]})]})]})]})}),Object(yn.jsx)("div",{className:"card-footer",children:Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col-md-12 text-right",children:Object(yn.jsxs)("div",{className:"btn-group btn-group-lg",role:"group",children:[Object(yn.jsxs)("button",{type:"button",className:"btn btn-dark",onClick:this.handleClosePanel,children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yn.jsxs)("button",{type:"button",className:a?"btn btn-primary disabled":"btn btn-primary",disabled:!!x,onClick:this.handleSave,children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"}),"Guardar"]})]})})})})]}),Object(yn.jsxs)("div",{className:"card card-primary card-outline mt-4",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsx)("h5",{className:"card-title text-primary",children:"Tipo y permisos"})}),Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("span",{className:"badge badge-dark m-1",children:n}),c.map((function(e,t){return Object(yn.jsx)("span",{className:"badge badge-primary m-1",children:e},t)}))]})]})]}),s?Object(yn.jsx)("div",{className:"col-4",children:Object(yn.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h3",{className:"card-title text-primary",children:[Object(yn.jsx)("i",{className:"fas fa-database mr-2"}),"Metadata"]})}),Object(yn.jsx)("div",{className:"card-body",children:j?Object(yn.jsxs)("ul",{className:"list-group",children:[Object(yn.jsxs)("li",{className:"list-group-item",children:[Object(yn.jsx)("h6",{children:"Datos del usuario"}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("span",{className:"text-primary",children:"Registrado"}),Object(yn.jsx)("p",{children:In()(u).fromNow()})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("span",{className:"text-primary",children:"Ultima actualizacion"}),Object(yn.jsx)("p",{children:In()(d).fromNow()})]})]})]}),Object(yn.jsxs)("li",{className:"list-group-item",children:[Object(yn.jsx)("h6",{children:"Actividad"}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("span",{className:"text-primary",children:"IP"}),Object(yn.jsx)("p",{children:j.ip_address})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("span",{className:"text-primary",children:"Ultima actividad"}),Object(yn.jsx)("p",{children:In()(j.last_activity).fromNow()})]})]})]}),Object(yn.jsxs)("li",{className:"list-group-item",children:[Object(yn.jsx)("span",{className:"text-primary",children:"Navegador y OS"}),Object(yn.jsx)("p",{children:j.user_agent})]}),Object(yn.jsxs)("li",{className:"list-group-item",children:[Object(yn.jsx)("span",{className:"text-primary",children:"Token"}),Object(yn.jsx)("p",{children:j.user_data})]})]}):Object(yn.jsx)("p",{children:"Usuario no ha registrado actividad."})}),j&&Object(yn.jsx)("div",{className:"card-footer text-right",children:Object(yn.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return e.handleCloseSession(s)},children:[Object(yn.jsx)("i",{className:"fas fa-sign-out-alt mr-1"}),"Cerrar session"]})})]})}):null]})}}]),a}(xn.Component),Rn={_setUser:le.setUser,_saveUser:le.saveUser,_clearToken:le.clearTokenUser,_getBranchs:Js.getListConfig},Vn=Object(c.b)((function(e){var t=e.users,a=e.config;return{loading:t.loading,user:t.user,options:t.options,branchs:a.list}}),Rn)(Gn),Yn=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).handleShowPanel=function(e){s.setState({panel:e})},s.handleSetSelectOptions=function(e){var t=e.name,a=e.value;(0,s.props._setOptions)({key:t,value:a})},s.state={panel:"inbox"},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){(0,this.props._setPageName)("usuarios")}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.user;e.user!==a&&a.id&&this.setState({panel:"editAndNewUser"}),e.user===a||a.id||this.setState({panel:"inbox"})}},{key:"render",value:function(){var e=this,t=this.state.panel,a=this.props,s=a.options,n=void 0===s?{}:s,c=a.meta,r=void 0===c?{total:0}:c;return Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-md-2 col-sm-12",children:[Object(yn.jsxs)("a",{href:"#new",className:"inbox"!==t?"disabled mb-3 btn btn-secondary btn-block":"mb-3 btn btn-primary btn-block",onClick:function(t){t.preventDefault(),e.handleShowPanel("editAndNewUser")},disabled:"inbox"!==t,children:[Object(yn.jsx)("i",{className:"mr-2 fas fa-plus"}),"Usuario nuevo"]}),"inbox"===t?Object(yn.jsxs)("div",{className:"card",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h5",{className:"card-title text-dark",children:[Object(yn.jsx)("i",{className:"mr-2 fas fa-ellipsis-v"}),"Filtros"]})}),Object(yn.jsx)("div",{className:"p-0 card-body",children:Object(yn.jsxs)("ul",{className:"nav nav-pills flex-column",children:[Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yn.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:n.orderby,onChange:function(t){var a=t.target;return e.handleSetSelectOptions(a)},children:[Object(yn.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yn.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yn.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:n.order,onChange:function(t){var a=t.target;return e.handleSetSelectOptions(a)},children:[Object(yn.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yn.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"itemsPage",children:"Numero de usuarios"}),Object(yn.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:n.itemsPage,onChange:function(t){var a=t.target;return e.handleSetSelectOptions(a)},children:[Object(yn.jsx)("option",{value:"10",children:"ver 10"}),r.total>10&&Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("option",{value:"20",children:"ver 20"}),Object(yn.jsx)("option",{value:"50",children:"ver 50"}),Object(yn.jsx)("option",{value:"100",children:"ver 100"})]})]})]})]})})]}):null]}),Object(yn.jsxs)("div",{className:"col-md-10 col-sm-12",children:["inbox"===t&&Object(yn.jsx)(Fn,{}),"editAndNewUser"===t&&Object(yn.jsx)(Vn,{})]})]})}}]),a}(xn.Component),qn={_setOptions:le.setOptions,_setPageName:v.changeNamePage},$n=Object(c.b)((function(e){var t=e.users;return{loading:t.loading,options:t.options,meta:t.meta,user:t.user}}),qn)(Yn),Jn=function(e){switch(e){case"monofocales":return"MF";case"bifocales":return"BF";case"progresivo basico":case"progresivo-basico":return"PB";case"progresivo digital":case"progresivo-digital":return"PD";case"plastico":return"CR";case"policarbonato":return"PL";case"hi-index":case"hi index":return"HI";case"antirreflejantes":return"AR";case"photo":return"PH";case"ar & photo":case"antirreflejante-photo":return"ARPH";case"blanco":return"BL";case"polarizado":return"PO";case"bifocal invisible":case"bifocal-invisible":return"BI";case"monofocal drivesafe":case"monofocal-drivesafe":case"monofocal digital drivesafe":case"monofocal digital DriveSafe":return"MDSF";case"monofocal superb":case"monofocal-superb":case"monofocal digital superb":return"MDSU";case"monofocal individual":case"monofocal-individual":case"monofocal digital individual":return"MDIN";default:return"XX"}},Hn={verifyItem:function(e){return e.cantidad<=0?(window.Swal.fire({title:"Verificacion",text:"La cantidad debe de ser un valor valido",icon:"warning"}),!1):e.store_items_id?!!e.precio||(window.Swal.fire({title:"Verificacion",text:"El precio no es valido",icon:"warning"}),!1):(window.Swal.fire({title:"Verificacion",text:"No se selecciono un producto valido",icon:"warning"}),!1)},handleDeleteItem:function(e,t,a,s){if(e.id)return s||(s="\xbfEsta seguro de eliminar el producto ".concat(e.code,"?")),window.Swal.fire({text:s,icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){if(!s.dismiss&&a)return a({id:e.id,options:t}),!0})),!1},handleVerifyData:function(e,t){var a=e.category_id,s=e.category_id1,n=e.category_id2,c=e.category_id4,r=e.supplier,i=e.brand_id,o=e.code;if(!a)return window.Swal.fire("Verificaci\xf3n","Selecione una categoria primero","warning"),!1;if(a){if(1===s&&c!==a)return window.Swal.fire("Verificaci\xf3n","Selecione una categoria valida para lentes","warning"),!1;if(2===s&&n!==a)return window.Swal.fire("Verificaci\xf3n","Selecione una categoria valida para armazones","warning"),!1}return 2!==s||r?2!==s||i?!(!o&&!t.current.value)||(window.Swal.fire("Verificaci\xf3n","Escriba una CODIGO para este producto","warning"),!1):(window.Swal.fire("Verificaci\xf3n","Selecione una MARCA valida primero","warning"),!1):(window.Swal.fire("Verificaci\xf3n","Selecione un PROVEEDOR valido primero","warning"),!1)},handleSaveItem:function(e,t,a,s,n,c){c||(c=e?"\xbfEsta seguro de actualizar el producto?":"\xbfEsta seguro de crear un nuevo producto?"),window.Swal.fire({title:"Almacenamiento",text:c,icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:e?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(c){!c.dismiss&&s&&(s({id:e,data:t,options:a}),n&&n())}))},handleCatOne:function(e){return{category_id:e.id,category_id1:e.id,category_id2:0,category_list2:e.hijos,category_id3:0,category_list3:[],category_id4:0,category_list4:[],supplier:0}},handleCatTwo:function(e){return{category_id:e.id,category_id2:e.id,category_id3:0,category_list3:e.hijos,category_id4:0,category_list4:[]}},handleCatTree:function(e){return{category_id:e.id,category_id3:e.id,category_id4:0,category_list4:e.hijos}},handleCodeString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"armazon",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e+=null!==t.current&&t.current.selectedIndex?" "+t.current.options[t.current.selectedIndex].text.trim():"",e+=null!==a.current&&a.current.selectedIndex?" "+a.current.options[a.current.selectedIndex].text.trim().replace(/\s/gim,""):"",s&&(e+=" "+s.replace(/[-\s]+/gm,"")),e.toLowerCase()},handleCodeLent:function(e,t,a,s){if(!t.current||!a.current||!s.current)return"";var n=null!==t.current?Jn(t.current.options[t.current.selectedIndex].text.trim().toLowerCase()):"";return n+=null!==a.current?Jn(a.current.options[a.current.selectedIndex].text.trim().toLowerCase()):"",(n+=null!==s.current?Jn(s.current.options[s.current.selectedIndex].text.trim().toLowerCase()):"")+e.toString().trim().replace(/\s/gim,"")},codeLentString:Jn,handleNameLent:function(e,t,a,s){if(!t.current||!a.current||!s.current)return"";var n="";return n+=null!==t.current?t.current.options[t.current.selectedIndex].text.trim():"",n+=null!==a.current?" "+a.current.options[a.current.selectedIndex].text.trim():"",n+=null!==s.current?" "+s.current.options[s.current.selectedIndex].text.trim():"",(n+=" "+e.toString()).toLowerCase()}},Zn=Hn;var Xn={_getList:$t.getListStore,_setOptions:$t.setOptions,_deleteItem:$t.deleteItem,_setItem:$t.setItem,_getItem:$t.getItem,_setLoading:$t.setLoading},Qn=Object(c.b)((function(e){var t=e.storeItem;return{list:t.list,meta:t.metaList,messages:t.messages,loading:t.loading,options:t.options}}),Xn)((function(e){var t=e.loading,a=e.meta,s=e.list,n=void 0===s?[]:s,c=e.options,r=e._getList,i=e._setOptions,l=e._deleteItem,d=e._getItem,u=e._setLoading,j=Object(xn.useState)({id:0}),b=Object(hn.a)(j,2),m=b[0],h=b[1],x=function(e,t){c[e]!==t&&i({key:e,value:t})},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:0};e&&e.preventDefault(),t.id?d(t.id):m.id&&d(m.id)},O=function(){var e=Object(me.a)(ue.a.mark((function e(){var t,a,s;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),t=Object(o.a)(Object(o.a)({},c),{},{responseType:"csv"}),console.log("[Orus Sytem] Start donwload csv"),a=pe("store",null,t),e.next=6,he(a);case 6:s=e.sent,u(),s?(console.log("[Orus Sytem] Process data csv"),window.open(URL.createObjectURL(s)),console.log("[Orus Sytem] Donwload is ok"),window.Swal.fire({title:"Descargas",text:"El archivo CSV fue generado correctamente",icon:"success",showConfirmButton:!1,timer:1500})):window.Swal.fire({title:"Descargas",text:"El archivo CSV no se genero correctamente",icon:"error",showConfirmButton:!1,timer:3e3});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(xn.useEffect)((function(){r(c)}),[c]),Object(yn.jsx)(Dn,{title:"Lista de productos",icon:"id-badge",color:"primary",loading:t,meta:a,itemSelected:m.id,defaultSearch:c.search,handlePagination:function(e){return x("page",e)},handleSearch:function(e){return x("search",e)},handleDeleteItem:function(){Zn.handleDeleteItem(m,c,l),h({id:0})},handleEditItem:p,handleDownload:O,handleSync:function(){return r(c)},children:Object(yn.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{}),Object(yn.jsx)("th",{children:"Codigo"}),Object(yn.jsx)("th",{children:"Describci\xf3n"}),Object(yn.jsx)("th",{children:"Proveedor"}),Object(yn.jsx)("th",{children:"Marca"}),Object(yn.jsx)("th",{children:"Cant"})]})}),Object(yn.jsx)("tbody",{children:n.length?Object(yn.jsx)(yn.Fragment,{children:n.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(yn.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"item_"+e.id,checked:m.id===e.id,onChange:function(t){return function(e,t){e.checked||(t={id:0}),h(t)}(t.target,e)}}),Object(yn.jsx)("label",{htmlFor:"item_"+e.id,className:"sr-only"})]}),Object(yn.jsx)("td",{className:"icheck-primary",children:Object(yn.jsx)("div",{className:"badge badge-dark text-uppercase",children:e.codigo})}),Object(yn.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",children:Object(yn.jsx)("a",{href:"\xb7link",onClick:function(t){return p(t,e)},className:"text-bold",children:e.producto})}),Object(yn.jsx)("td",{className:"mailbox-attachment text-capitalize text-truncate text-muted",children:Object(yn.jsx)("span",{children:e.proveedor?e.proveedor.nombre:"--"})}),Object(yn.jsx)("td",{className:"mailbox-attachment text-uppercase text-truncate text-muted",children:Object(yn.jsx)("span",{children:e.marca?e.marca.marca:"--"})}),Object(yn.jsx)("td",{className:"mailbox-date text-muted text-truncate text-right",children:Object(yn.jsx)("span",{children:e.cant_total})})]},e.id)}))}):Object(yn.jsx)("tr",{children:Object(yn.jsx)("th",{className:"text-center text-muted",colSpan:"6",children:"No hay productos registrados"})})})]})})})),Wn=function(e){var t;return Object(yn.jsxs)("div",{className:"card",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h5",{className:"card-title",children:[Object(yn.jsx)("i",{className:e.icon?"mr-2 fas fa-"+e.icon:"mr-2 fas fa-ellipsis-v"}),null!==(t=e.title)&&void 0!==t?t:"Menu"]})}),Object(yn.jsx)("div",{className:"card-body p-0",children:Object(yn.jsx)("ul",{className:"list-group nav list-group-flush",children:e.children})})]})};var Kn={_getBrands:$t.getListBrands},ec=Object(c.b)((function(e){return{brands:e.storeItem.brands}}),Kn)((function(e){var t=e.brandsName,a=e.brand,s=e.textSelect,n=void 0===s?"Seleccione una marca":s,c=e.brandRef,r=e.brands,i=e.supplier,o=e.showIcon,l=void 0===o||o,d=e._getBrands,u=e.onBlur,j=e.handleChangeBrand;return Object(xn.useEffect)((function(){i&&d({supplier:i})}),[i]),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Marca"})}),r.length?Object(yn.jsxs)("div",{className:"input-group mb-3",children:[l&&Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:a?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(yn.jsx)("i",{className:"fas fa-copyright"})})}),Object(yn.jsxs)("select",{className:"custom-select text-uppercase",name:t,value:a,ref:c,onChange:function(e){var t=e.target.value;j&&j(parseInt(t))},onBlur:u,children:[Object(yn.jsxs)("option",{value:"0",children:["--",n,"--"]}),r.map((function(e){return Object(yn.jsx)("option",{value:e.id,children:e.nombre},e.id)}))]})]}):Object(yn.jsxs)("p",{className:"text-danger",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"No exiten marcas para este proveedor!"]})]})})}));var tc={_getSuppliers:wa.getListSuppliers},ac=Object(c.b)((function(e){return{suppliers:e.contact.suppliers}}),tc)((function(e){var t=e.supplier,a=e.supplierRef,s=e.suppliers,n=e.showIcon,c=void 0===n||n,r=e.handleChangeSupplier,i=e._getSuppliers;return Object(xn.useEffect)((function(){i(null)}),[]),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Proveedor"})}),s.length&&Object(yn.jsxs)("div",{className:"input-group mb-3",children:[c&&Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:t?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(yn.jsx)("i",{className:"fas fa-address-book"})})}),Object(yn.jsxs)("select",{className:"custom-select text-uppercase",name:"supplier",value:t,ref:a,onChange:function(e){var t=e.target.value;r&&r(parseInt(t))},children:[Object(yn.jsx)("option",{value:"0",children:"--Seleccione un Proveedor--"}),s.map((function(e){return Object(yn.jsx)("option",{value:e.id,children:e.nombre},e.id)}))]})]})]})})}));var sc={_setOptions:$t.setOptions},nc=Object(c.b)((function(e){var t=e.storeItem;e.contact;return{options:t.options}}),sc)((function(e){var t=e.options,a=e.panel,s=e._setOptions,n=e.handleChangePage,c=function(e){var t=e.name,a=e.value,n=e.checked,c=a;console.log("[Orus System] Cambiando filtros"),"itemsPage"===t&&(c=parseInt(a)),"supplier"===t&&a>0&&(c=parseInt(a)),"zero"===t&&(c=n?"true":"false"),s({key:t,value:c})};return Object(yn.jsxs)(Wn,{title:"inbox"===a?"Menu y filtros":"Menu",children:[Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)("a",{href:"#item",className:"inbox"===a?"nav-link text-dark":"nav-link",onClick:function(e){e.preventDefault(),n("inbox")},children:[Object(yn.jsx)("i",{className:"inbox"===a?"fas fa-plus mr-1":"fas fa-minus mr-1"}),"Productos"]})}),Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)("a",{href:"#item",className:"category"===a?"nav-link text-dark":"nav-link",onClick:function(e){e.preventDefault(),n("category")},children:[Object(yn.jsx)("i",{className:"category"===a?"fas fa-plus mr-1":"fas fa-minus mr-1"}),"Categorias"]})}),Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)("a",{href:"#item",className:"brands"===a?"nav-link text-dark":"nav-link",onClick:function(e){e.preventDefault(),n("brands")},children:[Object(yn.jsx)("i",{className:"brands"===a?"fas fa-plus mr-1":"fas fa-minus mr-1"}),"Marcas"]})}),"inbox"===a&&Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("li",{className:"nav-item p-1",children:Object(yn.jsx)(ac,{supplier:t.supplier,showIcon:!1,handleChangeSupplier:function(e){return function(e){console.log("[Orus System] Cambiando filtros"),s({key:"brand",value:""}),s({key:"supplier",value:e})}(e)}})}),t.supplier?Object(yn.jsx)("li",{className:"nav-item p-1",children:Object(yn.jsx)(ec,{supplier:t.supplier,brand:t.brand,showIcon:!1,handleChangeBrand:function(e){return function(e){console.log("[Orus System] Cambiando filtros"),s({key:"brand",value:e})}(e)}})}):null,Object(yn.jsx)("li",{className:"nav-item p-1",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"zero",type:"checkbox",className:"custom-control-input",id:"zero",checked:"true"===t.zero,onChange:function(e){var t=e.target;return c(t)}}),Object(yn.jsx)("label",{className:"custom-control-label font-weight-normal",htmlFor:"zero",children:"Cantidades en cero"})]})}),Object(yn.jsxs)("li",{className:"nav-item p-1",children:[Object(yn.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yn.jsxs)("select",{className:"custom-select text-uppercase",name:"orderby",id:"orderby",value:t.orderby,onChange:function(e){var t=e.target;return c(t)},children:[Object(yn.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yn.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-1",children:[Object(yn.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yn.jsxs)("select",{className:"custom-select text-uppercase",name:"order",id:"order",value:t.order,onChange:function(e){var t=e.target;return c(t)},children:[Object(yn.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yn.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-1",children:[Object(yn.jsx)("label",{htmlFor:"itemsPage",children:"Numero de productos"}),Object(yn.jsxs)("select",{className:"custom-select text-uppercase",name:"itemsPage",id:"itemsPage",value:t.itemsPage,onChange:function(e){var t=e.target;return c(t)},children:[Object(yn.jsx)("option",{value:"10",children:"ver 10"}),Object(yn.jsx)("option",{value:"20",children:"ver 20"}),Object(yn.jsx)("option",{value:"50",children:"ver 50"}),Object(yn.jsx)("option",{value:"100",children:"ver 100"})]})]})]})]})}));function cc(e){var t=e.branch_default,a=void 0===t?"0":t,s=e.showIcon,n=void 0===s||s,r=e.setBranchId,i=Object(c.d)((function(e){return e.config})).list,l=Object(xn.useState)(a),d=Object(hn.a)(l,2),u=d[0],j=d[1],b=Object(c.d)((function(e){return e.config.branches}));return i&&i.length&&i.forEach((function(e){b.push(Object(o.a)({id:e.id},e.values))})),Object(xn.useEffect)((function(){r&&r(u)}),[u]),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[n&&Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text bg-primary",children:Object(yn.jsx)("i",{className:"fas fa-store-alt"})})}),Object(yn.jsxs)("select",{className:"custom-select text-uppercase",name:"branch_id",value:u,onChange:function(e){return function(e){var t=e.value;return j(parseInt(t))}(e.target)},children:[Object(yn.jsx)("option",{value:"0",children:"-- Ninguna --"}),b.map((function(e){return Object(yn.jsxs)("option",{value:e.id,children:[console.log("BRANCH-----",e),e.data.name]},e.id)}))]})]})}function rc(e){var t,a,s,n=e.inBranch,r=void 0===n?{}:n,i=e.branch,l=e.store_item_id,d=Object(xn.useState)({id:null!==(t=r.id)&&void 0!==t?t:0,cant:null!==(a=r.cant)&&void 0!==a?a:0,price:null!==(s=r.price)&&void 0!==s?s:1,store_item_id:l,branch_id:i.id,readyToSave:!1}),u=Object(hn.a)(d,2),j=u[0],b=u[1],m=Object(c.c)(),h=function(e){var t=e.name,a=e.value,s=!1;a="cant"===t?parseInt(a):parseFloat(a),r[t]!==a&&(s=!0),b(Object(o.a)(Object(o.a)({},j),{},Object(N.a)({readyToSave:s},t,a)))};return Object(xn.useEffect)((function(){}),[]),Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Cantidad en existencia"})}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text bg-primary",children:Object(yn.jsx)("i",{className:"fas fa-database"})})}),Object(yn.jsx)("input",{type:"number",className:"form-control text-right",placeholder:"Cantidades en existencia",name:"cant",onChange:function(e){var t=e.target;return h(t)},value:j.cant,min:0})]})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Precio"})}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text bg-primary",children:Object(yn.jsx)("i",{className:"fas fa-money-bill"})})}),Object(yn.jsx)("input",{type:"number",className:"form-control text-right",placeholder:"Precio",name:"price",onChange:function(e){var t=e.target;return h(t)},value:j.price,min:0})]})]})]}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col text-right",children:Object(yn.jsxs)("button",{className:j.readyToSave?"btn btn-success":"btn btn-secondary",type:"button",onClick:function(){m($t.saveInBranch({id:j.id,data:j})),b(Object(o.a)(Object(o.a)({},j),{},{readyToSave:!1}))},disabled:!j.readyToSave,children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"})," Guardar"]})})})]})}function ic(e){var t=e.store_item_id,a=e.branch_default,s=Object(c.d)((function(e){return e.config})).list,n=Object(c.d)((function(e){return e.storeItem})).item,r=Object(c.d)((function(e){return e.config.branches})),i=n&&n.inBranches?n.inBranches:[];if(s&&s.length){var l=s;a&&(l=l.filter((function(e){return e.id===a}))),l.forEach((function(e){r.push(Object(o.a)({id:e.id},e.values))}))}return Object(yn.jsx)("form",{children:r.map((function(e){var a=i.filter((function(t){return t.branch_id===e.id}))[0];return Object(yn.jsxs)("div",{className:"card",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h5",{className:"card-title text-primary text-capitalize",children:[Object(yn.jsx)("i",{className:"fas fa-store-alt mr-1"})," ",e.data.name]})}),Object(yn.jsx)("div",{className:"card-body",children:a?Object(yn.jsx)(rc,{inBranch:a,branch:e,store_item_id:t}):Object(yn.jsx)(rc,{branch:e,store_item_id:t})})]},e.id)}))})}function oc(e){var t=e.categoryData,a=e.category,s=e.textSelect,n=e.index,c=e.references,r=e.handleChangeCategory;return Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:a?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(yn.jsx)("i",{className:"fas fa-sort-amount-down"})})}),Object(yn.jsxs)("select",{className:"custom-select text-uppercase",name:"category"+n,value:null!==a&&void 0!==a?a:"",onChange:function(e){return function(e){var t=e.value;r&&r({index:n,value:parseInt(t)})}(e.target)},ref:c,children:[Object(yn.jsxs)("option",{value:"0",children:["--",s,"--"]}),t.map((function(e){return Object(yn.jsx)("option",{value:e.id,children:e.categoria?e.categoria:e.name},e.id)}))]})]})}function lc(e){var t=e.categories,a=e.category,s=e.references,n=e.setCategoryId,c=a.code.toString().split("|"),r=Object(xn.useState)({id0:parseInt(c[0]),id1:parseInt(c[1]),id2:parseInt(c[2]),id3:parseInt(c[3])}),i=Object(hn.a)(r,2),l=i[0],d=i[1],u=Object(xn.useState)({list0:t,list1:null,list2:null,list3:null}),j=Object(hn.a)(u,2),b=j[0],m=j[1],h=[],x=function(e){var t=function(e,t){var a=e.index,s=e.value,n={};switch(a){case 0:n={id0:s,id1:null,id2:null,id3:null};break;case 1:n={id0:t.id0,id1:s,id2:null,id3:null};break;case 2:n={id0:t.id0,id1:t.id1,id2:s,id3:null};break;case 3:n={id0:t.id0,id1:t.id1,id2:t.id2,id3:s};break;default:n={id0:null,id1:null,id2:null,id3:null}}return n}(e,l);if(d(t),n){var a=Object.values(t).filter((function(e){return null!==e})),s=a[a.length-1];n({id:s,parents:Object.values(t).join("|")})}};return Object(xn.useEffect)((function(){var e=function(e,t){var a=[],s=[],n=[];return Object.keys(e).forEach((function(c){switch(c){case"id0":a=dc({id:e.id0,categories:t.list0});break;case"id1":s=dc({id:e.id1,categories:a});break;case"id2":n=dc({id:e.id2,categories:s})}})),{list1:a,list2:s,list3:n}}(l,b);m(Object(o.a)(Object(o.a)({},b),e))}),[l]),Object.values(b).forEach((function(e,t){if(e&&e.length){var a=Object.values(l)[t];h.push(Object(yn.jsx)(oc,{categoryData:e,category:a||0,index:t,textSelect:"Seleccione una categoria",handleChangeCategory:x,references:s[t]}))}})),Object(yn.jsx)("div",{children:h.map((function(e,t){return Object(yn.jsx)("div",{children:e},t)}))})}function dc(e){if(e.id&&e.categories.length){var t=e.categories.filter((function(t){return t.id===e.id}));return t&&t.length?t[0].sons:[]}return[]}var uc=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).getNameCodeDefault=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=s.state.code;if(1!==parseInt(s.category0.current.value)){var a=null!==s.category0.current&&s.category0.current.selectedIndex?s.category0.current.options[s.category0.current.selectedIndex].text.trim().replace(/\s/gim,"").slice(0,7):"",n=Zn.handleCodeString("varios"===a?"":a,s.category1,s.brandRef,t),c="";return{name:n,code:c}}var r=Zn.handleNameLent(e,s.category1,s.category2,s.category3),i=Zn.handleCodeLent(e,s.category1,s.category2,s.category3);return{name:r,code:i}},s.handleCategoriesChange=function(e){var t=e.parents.split("|").filter((function(e){return""!==e})),a=s.state,n=a.id,c=a.code,r=a.name;if(!n&&(r="",c="",t.includes("1")&&4===t.length)){var i=s.getNameCodeDefault();c=i.code,r=i.name}s.setState({category_id:e.id,supplier:0,brand_id:0,category:Object(o.a)(Object(o.a)({},s.state.category),{},{code:e.parents}),code:c,name:r})},s.handleSetNameNCode=function(){var e=s.state,t=e.id,a=e.code,n=e.name,c=e.grad;if(!t){var r=s.getNameCodeDefault(c);a=r.code?r.code:a,n=r.name}s.setState({code:a,name:n})},s.handleSearchCode=function(){var e=s.props,t=e._getListStore,a=e._setListStore,n=s.state.code;n.length<3?a({result:{list:[],metaList:{}}}):(t({code:n}),s.handleSetNameNCode())},s.handleClose=function(){(0,s.props.handleClose)("inbox")},s.catchInputs=function(e){var t=e.target,a=t.name,n=t.type,c=t.value;"text"===n&&(c=c.toLowerCase()),"number"===n&&(c=parseInt(c)),s.setState(Object(N.a)({},a,c))},s.handleSave=Object(me.a)(ue.a.mark((function e(){var t,a,n,c,r,i,o,l,d,u,j,b,m,h,x,p,O;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.state,a=t.category_id,n=t.supplier,c=t.brand_id,r=t.code,i=t.id,o=t.codebar,l=t.name,d=t.unit,u=t.cant,j=t.price,b=t.grad,m=t.branch_default,h=s.props,x=h.list,p=h._saveItem,Zn.handleVerifyData(s.state,s.codeRef)){e.next=3;break}return e.abrupt("return",!1);case 3:if(i||!x.length){e.next=6;break}return window.Swal.fire("Verificaci\xf3n","El codigo ya esta en uso","warning"),e.abrupt("return",!1);case 6:O={code:r||s.codeRef.current.value,codebar:o||null,name:l||s.nameRef.current.value,unit:d,cant:u,price:j,category_id:a,grad:b||"+000000",brand_id:c||"",contact_id:n||"",branch_default:m||null},Zn.handleSaveItem(i,O,null,p);case 8:case"end":return e.stop()}}),e)}))),s.getItem=function(){var e,t=s.props,a=t.item,n=t.listCategories;s.setState({id:a.id,code:a.codigo,codebar:a.c_barra,grad:a.graduacion,brand_id:a.marca?a.marca.id:0,name:a.producto,unit:a.unidad,cant:a.cantidades,price:a.precio,supplier:a.proveedor?a.proveedor.id:0,category:a.categoria,branch_default:null!==(e=a.branch_default)&&void 0!==e?e:0,created_at:a.created_at,created:a.created,updated_at:a.updated_at,inBranches:a.inBranches,category_id:a.categoria.id,categories:n,load:!1})},s.state={id:0,code:"",codebar:"",grad:"",brand_id:0,name:"",unit:"PZ",cant:1,price:1,supplier:0,category:{code:"|||"},categories:[],created_at:null,created:{},updated_at:null,category_id:0,branch_default:0,inBranches:[]},s.category0=Object(xn.createRef)(),s.category1=Object(xn.createRef)(),s.category2=Object(xn.createRef)(),s.category3=Object(xn.createRef)(),s.supplierRef=Object(xn.createRef)(),s.brandRef=Object(xn.createRef)(),s.codeRef=Object(xn.createRef)(),s.nameRef=Object(xn.createRef)(),s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e._getListCategories,a=e._setListStore;t({categoryid:"raiz"}),a({result:{list:[],metaList:{}}})}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,s=a.category_list1,n=a.category_id,c=a.category_id1,r=a.category_id2,i=a.category_id3,o=this.props,l=o.listCategories,d=o.item;if(e.listCategories!==l&&l.length&&(d.id?this.getItem():this.setState({categories:l})),d&&e.item&&d.id&&e.item.id!==d.id&&this.setState({id:d.id}),t.category_id!==n){if(t.category_id1!==c&&0!==c){var u=s.find((function(e){return e.id===c}));u&&this.setState({category_list2:u.hijos})}if(t.category_id2!==r&&0!==r){var j=s.find((function(e){return e.id===r}));j&&this.setState({category_list3:j.hijos})}if(t.category_id3!==i&&0!==i){var b=s.find((function(e){return e.id===i}));b&&this.setState({category_list4:b.hijos})}}}},{key:"componentWillUnmount",value:function(){(0,this.props._setListStore)({result:{list:[],metaList:{},item:{}}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.id,s=t.supplier,c=t.category_id,r=t.category,i=t.categories,o=t.brand_id,l=t.code,d=t.name,u=t.grad,j=t.unit,b=t.branch_default,m=t.inBranches,h=this.props,x=h.list,p=h.loadStore,O=h.loadCategory,f=h.loadContact,v=p||O||f,g=r.code?r.code.split("|").filter((function(e){return""!==e})):[],N=!1;return N=g.includes("1")?c&&l&&d:c&&l&&d&&s&&o,Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h3",{className:"card-title text-primary text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-database mr-1"}),a?"Editar producto (".concat(l,")"):"Registrar nuevo producto"]})}),Object(yn.jsx)("form",{className:"card-body",autoComplete:"off",children:i&&i.length?Object(yn.jsxs)(xn.Fragment,{children:[Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("fieldset",{children:[Object(yn.jsx)("small",{className:"mr-2",children:Object(yn.jsx)("label",{children:"Categoria"})}),Object(yn.jsx)(lc,{categories:i,category:r,setCategoryId:this.handleCategoriesChange,references:[this.category0,this.category1,this.category2,this.category3]})]})})}),g.length&&!g.includes("1")?Object(yn.jsx)(ac,{supplier:s,supplierRef:this.supplierRef,handleChangeSupplier:function(t){e.setState({supplier:t})}}):null,s?Object(yn.jsx)(ec,{brand:o,supplier:s,textSelect:"Selecione la marca",brandRef:this.brandRef,handleChangeBrand:function(t){e.setState({brand_id:t})}}):null,c?Object(yn.jsxs)(xn.Fragment,{children:[Object(yn.jsxs)("div",{className:"row",children:[g.includes("1")?Object(yn.jsxs)("div",{className:"col-3",children:[Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Graduacion"})}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text bg-primary",children:Object(yn.jsx)("i",{className:"fas fa-glasses"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"+100100",name:"grad",value:u,onChange:this.catchInputs,onBlur:this.handleSetNameNCode,maxLength:"7",autoComplete:"off"})]})]}):null,Object(yn.jsxs)("div",{className:"col",children:[this.state.unit?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Unidad de presentacion"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:j?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(yn.jsx)("i",{className:"fas fa-balance-scale"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Unidad de presentaci\xf3n",name:"unit",value:j,onChange:this.catchInputs,maxLength:"4"})]})]})]}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-5",children:[l?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Codigo"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:l?!a&&x.length?"input-group-text bg-warning":"input-group-text bg-primary":"input-group-text bg-warning",children:Object(yn.jsx)("i",{className:"fas fa-code"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control text-uppercase",placeholder:"Codigo",name:"code",ref:this.codeRef,defaultValue:l,onChange:this.catchInputs,onBlur:this.handleSearchCode,autoComplete:"off",maxLength:"18"}),!a&&x.length?Object(yn.jsx)("span",{className:"text-muted text-xs d-block w-100",children:"El codigo ya esta en uso"}):null]})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Codigo de barras"})}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text bg-primary",children:Object(yn.jsx)("i",{className:"fas fa-barcode"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Codigo de barras",name:"codebar",defaultValue:this.state.codebar,onChange:this.catchInputs,autoComplete:"off",maxLength:"100"})]})]})]}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col",children:[d?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Nombre del producto"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:d?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(yn.jsx)("i",{className:"fas fa-archive"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control text-uppercase",placeholder:"Nombre del producto",name:"name",ref:this.nameRef,defaultValue:d,onChange:this.catchInputs,maxLength:"149"})]})]})})]}):Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("h6",{className:"text-warning",children:"Seleccione primero una categor\xeda."})})})]}):Object(yn.jsx)("div",{className:"text-center",children:Object(yn.jsxs)("h2",{className:"text-primary",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Cargando formulario"]})})}),Object(yn.jsx)("div",{className:"card-footer text-right",children:Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col-md-12",children:Object(yn.jsxs)("div",{className:"btn-group",role:"group",children:[Object(yn.jsxs)(n.b,{to:"/almacen",className:"btn btn-default",onClick:this.handleClose,children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),a?"Cerrar":"Cancelar"]}),Object(yn.jsxs)("button",{type:"button",onClick:this.handleSave,className:N?"btn btn-primary":"btn btn-secondary",disabled:!N,children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"}),"Guardar"]})]})})})}),v&&Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})})]})}),a?Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsx)("h5",{className:"card-title text-primary",children:"Sucursal por defecto"})}),Object(yn.jsx)("div",{className:"card-body",children:Object(yn.jsx)(cc,{branch_default:b,showIcon:!1,setBranchId:function(t){return e.setState({branch_default:t})}})})]})})}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)(ic,{inBranches:m,store_item_id:a,branch_default:b})})})]}):null]})}}]),a}(xn.Component),jc={_deleteItem:$t.deleteItem,_getItem:$t.getItem,_saveItem:$t.saveItem,_getListStore:$t.getListStore,_setListStore:$t.setListStore,_getListCategories:pt.getListCategories},bc=Object(c.b)((function(e){var t=e.storeItem,a=e.category,s=e.contact;e.config;return{list:t.list,item:t.item,messages:t.messages,options:t.options,listCategories:a.list,loadStore:t.loading,loadCategory:a.loading,loadContact:s.loading}}),jc)(uc);function mc(e){var t=e.header,a=e.body,s=e.items;return Object(yn.jsx)("div",{className:"table-responsive",children:Object(yn.jsxs)("table",{className:"table table-sm table-bordered table-hover",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"/"}),t]})}),Object(yn.jsx)("tbody",{children:a.map((function(e,a){var c="label"===e.props.children.type;return Object(yn.jsxs)("tr",{className:c?"table-secondary":"",children:[e,t.map((function(t,a){var r=c?parseFloat(e.props.children.props.children).toFixed(2).replace(".",""):parseFloat(e.props.children).toFixed(2).replace(".","");return parseInt(r)>=0&&(r="+"+r),r+=parseFloat(t.props.children).toFixed(2).replace(/[-.]/g,""),Object(yn.jsx)("td",{className:"text-center",children:s.length?s.map((function(e,t){return r===e.graduacion?Object(yn.jsx)(yn.Fragment,{children:e.cant_total?Object(yn.jsx)("span",{className:e.cant_total>0?"badge badge-success":"badge badge-danger",children:Object(yn.jsx)(n.b,{to:"/almacen/registro/"+e.id,className:"text-light",children:e.cant_total})},e.id+t):null}):null})):Object(yn.jsx)(n.b,{to:"/almacen/registro",children:Object(yn.jsx)("i",{className:"fas fa-plus text-secondary"})})},r+a)}))]},a)}))})]})})}var hc=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).handleToPrice=function(){var e=s.state,t=e.price,a=e.catid_3,n=e.load;if(t&&a){console.log("Send data to API",t,a);var c=JSON.parse(localStorage.getItem("OrusSystem")),r="http://"+c.host+"/api/store/prices?cat="+a+"&price="+t;n||s.setState({load:!0}),fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+c.token}}).then((function(e){return e.json()})).then((function(e){console.log("[Orus System] Item actualizados",e),s.setState({load:!1})}))}},s.handelChangePrice=function(e){var t=e.target.value;s.setState({price:parseInt(t)})},s.getItems=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n,c,r,i;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.state.load,n=pe("store",null,{cat:t,itemsPage:500}),a||s.setState({load:!0}),e.next=6,he(n);case 6:c=e.sent,r=c.data,i=c.message,r?(console.log("[Orus System] Descarga de producto exitosa"),s.setState({items:r&&r.length?r:[],load:!1})):(console.error("[Orus system] Salida por error:",i),s.setState({load:!1}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleClickCat=function(e){var t=e.target,a=t.name,n=t.value,c=s.state,r=c.catData_1,i=c.catData_2,o=[],l={};"catid_1"===a?(r.map((function(e){return e.id===parseInt(n)&&(o=e.hijos,l=e.meta,!0)})),s.setState({catid_1:parseInt(n),catid_2:0,catid_3:0,catData_2:o,catData_3:[],meta:l})):"catid_2"===a&&(i.map((function(e){return e.id===parseInt(n)&&(o=e.hijos,!0)})),s.setState({catid_2:parseInt(n),catid_3:0,catData_3:o}))},s.getCategories=Object(me.a)(ue.a.mark((function e(){var t,a,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pe("categories",1),e.next=3,he(t);case 3:a=e.sent,n=a.data,c=a.message,n?n&&n.hijos.length&&(console.log("Descarga de categoria exitos"),s.setState({catData_1:n.hijos})):(console.log("Error al descargar categor\xedas"),console.error("[Orus system] Salida por error:",c),window.Swal.fire("Fallo de conexion","Verifique la conexion al servidor","error"));case 7:case"end":return e.stop()}}),e)}))),s.state={catData_1:[],catData_2:[],catData_3:[],catid_1:0,catid_2:0,catid_3:0,load:!1,items:[],meta:{},price:0},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){this.getCategories(),console.log("Prueba-------------")}},{key:"componentDidUpdate",value:function(e,t){t.catid_3!==this.state.catid_3&&this.getItems(this.state.catid_3)}},{key:"render",value:function(){var e=this,t=this.state,a=t.catid_1,s=t.catData_1,n=t.catid_2,c=t.catData_2,r=t.catid_3,i=t.catData_3,o=t.load,l=t.items,d=t.meta,u=[],j=[],b=0;do{u.push(Object(yn.jsx)("th",{children:b.toFixed(2)},b)),b-=.25}while(b>parseFloat(d.cil)-.25);b=parseFloat(d.rangoInf);do{0===b?j.push(Object(yn.jsx)("td",{children:Object(yn.jsx)("label",{children:"0.00"})})):j.push(Object(yn.jsx)("td",{children:b.toFixed(2)})),b+=.25}while(b<parseFloat(d.rangoSup)+.25);return Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"card",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("select",{className:"custom-select",name:"catid_1",value:a,onChange:this.handleClickCat,children:[Object(yn.jsx)("option",{value:"0",children:"Seleccione un tipo"}),s.map((function(e){return Object(yn.jsx)("option",{value:e.id,children:e.categoria},e.id)}))]})}),a&&c.length?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("select",{className:"custom-select",name:"catid_2",value:n,onChange:this.handleClickCat,children:[Object(yn.jsx)("option",{value:"0",children:"Seleccione un material"}),c.map((function(e){return Object(yn.jsx)("option",{value:e.id,children:e.categoria},e.id)}))]})}):null,n&&i.length?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:i.map((function(t){return Object(yn.jsx)("button",{className:r===t.id?"btn btn-primary":"btn btn-secondary",onClick:function(a){e.setState({catid_3:t.id,load:!0})},children:t.categoria},t.id)}))})}):null]})}),Object(yn.jsx)("div",{className:"card-body",children:r?Object(yn.jsx)(pn.a.Fragment,{children:o?Object(yn.jsxs)("div",{className:"text-center",children:[Object(yn.jsx)("span",{className:"text-primary",children:"Cargando productos"}),Object(yn.jsx)("div",{className:"spinner-border text-primary ml-4",role:"status",children:Object(yn.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(yn.jsxs)(pn.a.Fragment,{children:[Object(yn.jsxs)("div",{className:"row mb-2",children:[Object(yn.jsxs)("div",{className:"col",children:["Total de productos: ",Object(yn.jsx)("label",{children:l.length})]}),Object(yn.jsx)("div",{className:"col-6",children:Object(yn.jsx)("div",{className:"row"})})]}),Object(yn.jsx)(mc,{header:u,body:j,items:l})]})}):Object(yn.jsxs)("div",{className:"alert alert-warning text-light",role:"alert",children:[Object(yn.jsxs)("h4",{className:"alert-heading",children:[Object(yn.jsx)("i",{className:"fas fa-exclamation"})," Seleccion."]}),Object(yn.jsx)("hr",{}),Object(yn.jsxs)("ul",{children:[a?null:Object(yn.jsx)("li",{children:"Selecciones primero el tipo de lente"}),n?null:Object(yn.jsx)("li",{children:"Despues el material"}),Object(yn.jsx)("li",{children:"Por ultimo el tratamiento"})]})]})})]})})})}}]),a}(xn.Component),xc=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;Object(Cn.a)(this,a),(s=t.call(this,e)).handleSelectCategory=function(e){var t=s.props,a=t.last,n=t.categorySelect,c=s.state.category_raiz;return!a&&(!(!e.sons||e.sons&&!e.sons.length)&&(n({category_id:e.id,category_data:c}),void s.setState({category_id:e.id})))},s.handleClickDelete=function(e,t){if(e){var a=s.props._delete,n={id:e},c="Esta seguro de eliminar la categoria: "+t.toUpperCase()+"?";Zn.handleDeleteItem(n,{categoryid:"raiz"},a,c)}},s.handleClickSave=function(){if(s.state.name.length<4)return window.Swal.fire("Verificaci\xf3n","Debe de escribir el nombre de la categoria","warning"),s.nameInput.focus(),!1;var e=s.state,t=e.id,a=e.category_id,n={name:e.name,category_id:a},c=s.props._save,r=t?"\xbfEsta seguro de actualizar la categoria?":"\xbfEsta seguro de crear una nueva categoria?";Zn.handleSaveItem(t,n,{categoryid:"raiz"},c,(function(){s.setState({name:"",category_id:0,add:!1})}),r)},s.handleClickAdd=function(){s.setState({add:!s.state.add,name:""})},s.catchInputs=function(e){var t=e.target,a=t.name,n=t.value;s.setState(Object(N.a)({},a,n.toLowerCase()))};var n=JSON.parse(localStorage.getItem("OrusSystem"));return s.state={id:0,meta:{},add:!1,name:"",category_raiz:[],category_id:e.category,page:1,host:n.host,token:n.token,load:!1},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.categoryData,t=void 0===e?[]:e;t&&this.setState({category_raiz:t})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.categoryData,s=void 0===a?[]:a,n=t.messages,c=t._setMessage;e.categoryData!==s&&this.setState({category_raiz:s}),e.messages.length!==n.length&&n.length&&(n.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),c([]))}},{key:"render",value:function(){var e=this,t=this.state,a=t.category_raiz,s=t.category_id,n=t.name,c=t.add,r=this.props.loading;return Object(yn.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yn.jsx)("div",{className:"card-body",children:Object(yn.jsxs)("table",{className:"table",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"Nombre"}),Object(yn.jsx)("th",{style:{width:48}})]})}),Object(yn.jsx)("tbody",{children:!r&&a?Object(yn.jsx)(pn.a.Fragment,{children:a.map((function(t){return Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("td",{className:"text-capitalize",children:Object(yn.jsx)("a",{href:"#select!"+t.id,onClick:function(a){a.preventDefault(),e.handleSelectCategory(t)},className:t.sons&&t.sons.length?"text-primary":"text-dark",children:t.categoria})}),Object(yn.jsxs)("td",{className:"btn-group",children:[Object(yn.jsx)("button",{type:"button",className:"btn btn-default",disabled:!0,title:"Proximamente",children:Object(yn.jsx)("i",{className:"fas fa-edit"})}),Object(yn.jsx)("button",{type:"button",title:"Eliminar",className:t.hijos&&t.hijos.length?"btn btn-outline-secondary btn-sm":"btn btn-outline-danger btn-sm",onClick:function(a){e.handleClickDelete(t.id,t.categoria)},disabled:t.hijos&&t.hijos.length,children:Object(yn.jsx)("i",{className:"fas fa-trash"})})]})]},t.id)}))}):Object(yn.jsx)("tr",{children:Object(yn.jsx)("td",{colSpan:"8",className:"text-center",children:Object(yn.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(yn.jsx)("span",{className:"sr-only",children:"Loading..."})})})})}),c&&!r?Object(yn.jsx)("tfoot",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("td",{children:Object(yn.jsx)("input",{type:"text",name:"name",className:"form-control text-uppercase",autoComplete:"off",value:n,onChange:this.catchInputs,ref:function(t){e.nameInput=t}})}),Object(yn.jsx)("td",{children:Object(yn.jsx)("button",{className:"btn btn-dark btn-sm",onClick:this.handleClickSave,disabled:n.length<3,title:"Guardar categoria",children:Object(yn.jsx)("i",{className:"fas fa-save"})})})]})}):null]})}),Object(yn.jsx)("div",{className:"card-footer text-right",children:Object(yn.jsx)("button",{className:c?"btn btn-secondary btn-sm text-bold":"btn btn-primary btn-sm",onClick:this.handleClickAdd,disabled:!s,title:c?"Cancelar":"Crear nueva categoria",children:c?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}):Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar"]})})})]})}}]),a}(xn.Component),pc={_getList:pt.getListCategories,_delete:pt.deleteCategory,_setMessage:pt.setMessageCategory,_save:pt.saveCategory},Oc=Object(c.b)((function(e){var t=e.category;return{categories:t.list,messages:t.messages,loading:t.loading}}),pc)(xc),fc=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).handleClickParent=function(e){var t=s.props.categories,a=void 0===t?[]:t;e&&e.preventDefault(),s.setState({category_data:a,category_id:null})},s.handleLoadCategories=function(){(0,s.props._getListCategories)({categoryid:"raiz"})},s.handleChangeState=function(e){s.setState(e)},s.state={category_id:0,category_data:[]},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){this.handleLoadCategories()}},{key:"componentDidUpdate",value:function(e){var t=this.props.categories,a=void 0===t?[]:t;e.categories!==a&&a.length&&this.setState({category_data:a})}},{key:"render",value:function(){var e,t=this.state,a=t.category_id,s=t.category_data,n=s,c={};if(a){var r=s.filter((function(e){return e.id===a}));r.length&&(c=r[0])&&c.sons&&(n=c.sons)}return Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col-8",children:[Object(yn.jsx)("nav",{children:Object(yn.jsx)("ol",{className:"breadcrumb",children:a?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:Object(yn.jsx)("a",{href:"#link",onClick:this.handleClickParent,children:"Raiz"})}),c.id?Object(yn.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:c.name}):null]}):Object(yn.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Seleccione una categoria para ver su contenido"})})}),Object(yn.jsx)(Oc,{category:a,categoryData:null!==(e=n)&&void 0!==e?e:[],categorySelect:this.handleChangeState})]})})}}]),a}(xn.Component),vc={_getListCategories:pt.getListCategories},gc=Object(c.b)((function(e){var t=e.category;return{categories:t.list,loading:t.loading}}),vc)(fc);function Nc(e){var t=e.brands,a=e.handleEdit,s=void 0===a?null:a,n=e.handleDelete,c=void 0===n?null:n;return Object(yn.jsx)("ul",{className:"card-text list-group",children:t.length?t.map((function(e){return Object(yn.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(yn.jsxs)("span",{className:"text-dark text-uppercase text-truncate",children:[Object(yn.jsx)("i",{className:"fas fa-thumbtack mr-1"}),e.nombre]}),s||c,Object(yn.jsxs)("div",{children:[s&&Object(yn.jsx)("span",{className:"badge badge-dark badge-pill py-1 mr-2",style:{cursor:"pointer"},title:"Editar",onClick:function(){return s(e)},children:Object(yn.jsx)("i",{className:"fas fa-edit"})}),c&&Object(yn.jsx)("span",{className:"badge badge-danger badge-pill py-1",style:{cursor:"pointer"},title:"Eliminar",onClick:function(){return c(e)},children:Object(yn.jsx)("i",{className:"fas fa-trash"})})]})]},e.id)})):Object(yn.jsx)("li",{className:"list-group-item",children:Object(yn.jsxs)("p",{className:"text-danger",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"No exiten marcas para este proveedor!"]})})})}var yc=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).prevEdit=function(e){s.setState({name:e.nombre,id:e.id})},s.handleCancelBtn=function(){s.setState({name:"",id:null})},s.changeInput=function(e){var t=e.name,a=e.value;s.setState(Object(N.a)({},t,a.toLowerCase()))},s.deleteBrand=function(e,t){var a=s.state.supplier,n=s.props._deleteBrand;window.Swal.fire({title:"Eliminar",text:"\xbfEsta seguro de eliminar la marca "+t.toUpperCase()+"?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){t.dismiss||(console.log("[Orus Suystem] Enviando datos para eliminar marca",e),n({id:e,options:{supplier:a,order:"name"}}))}))},s.saveBrand=function(e){e.preventDefault();var t=s.state,a=t.id,n=t.name,c=t.supplier,r=s.props._saveBrand,i={name:n,contact_id:c};return n.length<3?(window.Swal.fire("Error","El nombre de la marca debe de tener por lo menos 3 caracteres","error"),!1):c?void window.Swal.fire({title:"Almacenamiento",text:a?"\xbfEsta seguro de ACTUALIZAR la marca?":"\xbfEsta seguro de CREAR una nueva marca?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:a?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(r({id:a,data:i,options:{supplier:c,order:"name"}}),s.setState({name:"",id:null}))})):(window.Swal.fire("Error","Debe de elegir a un proveedor primero","error"),!1)},s.getBrands=function(){var e=s.state.supplier,t=s.props._getBrands;e&&t({supplier:e,order:"name"})},s.state={id:null,supplier:0,brands:[],name:""},s}return Object(_n.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.supplier;t.supplier!==a&&a&&this.getBrands()}},{key:"render",value:function(){var e=this,t=this.state,a=t.id,s=t.supplier,n=t.name,c=this.props,r=c.brands,i=c.loading;return Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-4",children:Object(yn.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yn.jsx)("h5",{className:"card-title mt-2 ml-2 text-bold",children:"Marcas para productos"}),Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)(ac,{supplier:s,handleChangeSupplier:function(t){e.setState({supplier:t,brands:t?e.state.brands:[]})}}),!r.length&&Object(yn.jsxs)("p",{className:"card-text",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Para iniciar, primero seleccione a un proveedor"]})]})]})}),s?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("h5",{className:"card-title text-dark mb-4 text-bold",children:"Listado de marcas"}),Object(yn.jsx)(Nc,{brands:r,handleEdit:function(t){return e.prevEdit(t)},handleDelete:function(t){e.deleteBrand(t.id,t.nombre)}})]}),Object(yn.jsx)("div",{className:"card-footer",children:Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("input",{type:"text",className:"form-control mr-1",name:"name",value:n,onChange:function(t){var a=t.target;return e.changeInput(a)}}),Object(yn.jsxs)("div",{className:"btn-group",children:[Object(yn.jsx)("button",{type:"button",className:"btn btn-default",disabled:!n,onClick:this.handleCancelBtn,children:Object(yn.jsx)("i",{className:"fas fa-eraser"})}),Object(yn.jsx)("button",{type:"button",className:a?"btn btn-success":"btn btn-primary",onClick:this.saveBrand,disabled:!n,children:Object(yn.jsx)("i",{className:"fas fa-save"})})]})]})}),i?Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})}):null]})}}]),a}(xn.Component),wc={_getBrands:$t.getListBrands,_saveBrand:$t.saveBrand,_deleteBrand:$t.deleteBrand},Sc=Object(c.b)((function(e){var t=e.storeItem;return{brands:t.brands,loading:t.loading}}),wc)(yc),Cc=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).handleChangePanel=function(e){var t=s.props,a=t._setItem,n=t.history;s.state.panel!==e&&(a({}),s.setState({panel:e}),"inbox"===e&&n.push("/almacen"),"inventory"===e&&n.push("/almacen/inventario"),"category"===e&&n.push("/almacen/categorias"),"brands"===e&&n.push("/almacen/marcas"))},s.handleNewItem=function(){s.setState({panel:"neworedit"}),s.props.history.push("/almacen/new")},s.state={panel:"inbox"},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.history,s=e._getItem,n=e._setItem,c=e._setPageName,r=t.params.id;parseInt(r)?s(parseInt(r)):"new"===r&&(this.setState({panel:"neworedit"}),a.push("/almacen/new"),n({})),c("almacen")}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.messages,s=t.item,n=t.history,c=t._setMessage,r=t._setList;e.item.id!==s.id&&s.id&&(this.setState({panel:"neworedit"}),n.push("/almacen/".concat(s.id)),r({result:{list:[],metaList:{}}})),e.messages.length!==a.length&&a.length&&(a.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),c([]))}},{key:"componentWillUnmount",value:function(){(0,this.props._setList)({result:{list:[],metaList:{},item:{},brands:[]}})}},{key:"render",value:function(){var e=this.state.panel;return Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-sm-12 col-md-2",children:[Object(yn.jsxs)("button",{className:"btn bg-primary btn-block mb-3",type:"button",disabled:"inbox"!==e,onClick:this.handleNewItem,children:[Object(yn.jsx)("i",{className:"fas fa-plus mr-1"}),"Nuevo producto"]}),Object(yn.jsx)(nc,{panel:e,handleChangePage:this.handleChangePanel})]}),Object(yn.jsxs)("div",{className:"col-sm-12 col-md-10",children:["inventory"===e&&Object(yn.jsx)(hc,{handleClose:this.handleChangePanel}),"inbox"===e&&Object(yn.jsx)(Qn,{}),"neworedit"===e&&Object(yn.jsx)(bc,{handleClose:this.handleChangePanel}),"category"===e&&Object(yn.jsx)(gc,{}),"brands"===e&&Object(yn.jsx)(Sc,{})]})]})}}]),a}(xn.Component),_c={_getItem:$t.getItem,_setItem:$t.setItem,_setMessage:$t.setMessagesStore,_setList:$t.setListStore,_setPageName:v.changeNamePage},kc=Object(c.b)((function(e){var t=e.storeItem;return{item:t.item,messages:t.messages,loading:t.loading}}),_c)(Cc),Ec=Object(xn.createContext)(null),Lc=function(){return Object(xn.useContext)(Ec)};function Ic(e){var t;return Object(yn.jsxs)("div",{className:"card",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h5",{className:"card-title",children:[Object(yn.jsx)("i",{className:e.icon?"mr-2 fas fa-"+e.icon:"mr-2 fas fa-ellipsis-v"}),null!==(t=e.title)&&void 0!==t?t:"Menu"]})}),Object(yn.jsx)("div",{className:"card-body p-0",children:Object(yn.jsx)("ul",{className:"list-group nav list-group-flush",children:e.children})})]})}function Tc(e){var t,a,s,n,c,r=e.newOrEdit,i=void 0!==r&&r,l=e.handleNewOrEdit,d=Lc(),u=Object(On.f)();return Object(yn.jsxs)("div",{className:"col-sm-12 col-md-2",children:[Object(yn.jsxs)("button",{className:"btn bg-indigo btn-block mb-3",type:"button",disabled:i,onClick:function(){return l()},children:[Object(yn.jsx)("i",{className:"fas fa-plus mr-1"}),"Nuevo contacto"]}),Object(yn.jsx)(Ic,{title:i?"Menu":"Filtros",children:i?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("li",{className:"list-group-item",children:Object(yn.jsxs)("a",{href:"#back",className:"d-flex justify-content-between align-items-center",onClick:function(e){var t;e.preventDefault(),console.log("[DEBUG] Tool bar:",null===(t=d.options)||void 0===t?void 0:t.page),u.push("/contactos")},children:["Ver listado",Object(yn.jsx)("span",{className:"badge badge-primary badge-pill",children:Object(yn.jsx)("i",{className:"fas fa-chevron-left"})})]})}),null!==(c=d.contact)&&void 0!==c&&c.id?Object(yn.jsx)("li",{className:"list-group-item",children:Object(yn.jsxs)("a",{href:"#details",className:"d-flex justify-content-between align-items-center",children:["Detalles",Object(yn.jsx)("span",{className:"badge badge-primary badge-pill",children:Object(yn.jsx)("i",{className:"fas fa-chevron-right"})})]})}):null]}):Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"type",children:"Tipo"}),Object(yn.jsxs)("select",{className:"form-control ",name:"type",id:"type",value:null===(t=d.options)||void 0===t?void 0:t.type,onChange:function(e){var t=e.target,a=parseInt(t.value);d.set(Object(o.a)(Object(o.a)({},d),{},{options:Object(o.a)(Object(o.a)({},d.options),{},{type:isNaN(a)?"":a})}))},children:[Object(yn.jsx)("option",{value:"",children:"-- Todos --"}),Object(yn.jsx)("option",{value:"0",children:"Clientes"}),Object(yn.jsx)("option",{value:"1",children:"Proveedores"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yn.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:null===(a=d.options)||void 0===a?void 0:a.orderby,onChange:function(e){var t=e.target;d.set(Object(o.a)(Object(o.a)({},d),{},{options:Object(o.a)(Object(o.a)({},d.options),{},{orderby:t.value})}))},children:[Object(yn.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yn.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yn.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:null===(s=d.options)||void 0===s?void 0:s.order,onChange:function(e){var t=e.target;d.set(Object(o.a)(Object(o.a)({},d),{},{options:Object(o.a)(Object(o.a)({},d.options),{},{order:t.value})}))},children:[Object(yn.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yn.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"itemsPage",children:"Numero de contactos"}),Object(yn.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:null===(n=d.options)||void 0===n?void 0:n.itemsPage,onChange:function(e){var t=e.target;d.set(Object(o.a)(Object(o.a)({},d),{},{options:Object(o.a)(Object(o.a)({},d.options),{},{itemsPage:parseInt(t.value)})}))},children:[Object(yn.jsx)("option",{value:"25",children:"ver 25"}),Object(yn.jsx)("option",{value:"50",children:"ver 50"}),Object(yn.jsx)("option",{value:"75",children:"ver 75"}),Object(yn.jsx)("option",{value:"100",children:"ver 100"})]})]})]})})]})}function Dc(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return a=Nn("contacts",null,t),e.next=5,gn(a,"GET").then((function(e){return e})).catch((function(e){return console.error("[Orus System] Catch when get contacts list in hook:",e.message),null}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nn("contacts",t),e.next=5,gn(a,"GET").then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when get contact in hook:",e.message),{}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nn("contacts",t),e.next=5,gn(a,"DELETE").then((function(){return!0})).catch((function(e){return console.error("[Orus System] Catch when delete contact in hook:",e.message),!1}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,s,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a=t.id,delete t.id,!a){e.next=11;break}return s=Nn("contacts",a),e.next=8,gn(s,"PUT",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when save contact in hook:",e.message),null}));case 8:case 14:return e.abrupt("return",e.sent);case 11:return n=Nn("contacts"),e.next=14,gn(n,"POST",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when save contact in hook:",e.message),null}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getContacts:e,getContact:t,deleteContact:a,saveContact:s}}function Ac(){var e,t,a=Lc(),s=Dc(),n=Object(On.f)(),c=Object(xn.useState)({contactSelected:"",contacts:[],meta:{},loading:!1}),r=Object(hn.a)(c,2),i=r[0],l=r[1],d=function(){l(Object(o.a)(Object(o.a)({},i),{},{loading:!0})),s.getContacts(Object(o.a)({},a.options)).then((function(e){l(Object(o.a)(Object(o.a)({},i),{},{loading:!1,contacts:e.data,meta:e.meta,contactSelected:""}))}))};return Object(xn.useEffect)((function(){Object.keys(a.options).length&&d()}),[a.options]),Object(yn.jsx)(Dn,{title:"Lista de contactos",icon:"id-badge",color:"indigo",loading:i.loading,meta:i.meta,itemSelected:i.contactSelected,handlePagination:function(e){e&&a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},{page:e})}))},handleSearch:function(e){e?a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},{search:e,page:1})})):a.options.search&&a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},{search:"",page:1})}))},handleDeleteItem:function(e){i.contactSelected?window.Swal.fire({title:"Contactos",text:"\xbfDesea eliminar a este contacto?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss?l(Object(o.a)(Object(o.a)({},i),{},{contactSelected:""})):s.deleteContact(i.contactSelected).then((function(){d()})).catch((function(e){console.log("[Orus System] Catch when delete contact:",e.message)}))})):window.Swal.fire({title:"Error",text:"Lo sentimos no existe un contacto seleccionado",icon:"error"})},handleEditItem:function(){i.contactSelected?n.push("contactos/".concat(i.contactSelected)):window.Swal.fire({title:"Error",text:"Lo sentimos no existe un contacto seleccionado",icon:"error"})},handleSync:function(){a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},{page:1})}))},children:Object(yn.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{}),Object(yn.jsx)("th",{children:"Nombre"}),Object(yn.jsx)("th",{children:"Edad"}),Object(yn.jsx)("th",{children:"E-mail"}),Object(yn.jsx)("th",{children:"Telefono"}),Object(yn.jsx)("th",{children:"Creado por"}),Object(yn.jsx)("th",{children:"created_at"===a.options.orderby?"Registrado":"Actualizado"})]})}),Object(yn.jsxs)("tbody",{children:[null===(e=i.contacts)||void 0===e?void 0:e.map((function(e){var t,s=Object.values(e.phones).filter((function(e){return e}));return Object(yn.jsxs)("tr",{children:[Object(yn.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(yn.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"contact_"+e.id,checked:i.contactSelected===e.id,onChange:function(e){var t=e.target,a=t.value,s=t.checked;l(Object(o.a)(Object(o.a)({},i),{},{contactSelected:s?parseInt(a):""}))}}),Object(yn.jsx)("label",{htmlFor:"contact_"+e.id,className:"sr-only"})]}),Object(yn.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",style:{cursor:"pointer",maxWidth:180},onClick:function(){return n.push("contactos/".concat(e.id))},children:Object(yn.jsxs)("label",{style:{cursor:"pointer"},className:e.enUso?"text-indigo":"",children:[e.type?Object(yn.jsx)("i",{className:"fas fa-store text-sm mr-2"}):Object(yn.jsx)("i",{className:"fas fa-user text-sm mr-2"}),e.name.toLowerCase()]})}),Object(yn.jsx)("th",{children:e.age?e.age:"--"}),Object(yn.jsx)("td",{className:"mailbox-attachment text-lowercase text-truncate",style:{maxWidth:180},children:Object(yn.jsxs)("span",{children:[Object(yn.jsx)("i",{className:"fas fa-envelope text-sm mr-2"}),Object(yn.jsx)("a",{href:"mailto:"+e.email,className:"text-muted",children:null===(t=e.email)||void 0===t?void 0:t.toLowerCase()})]})}),Object(yn.jsx)("td",{className:"mailbox-date text-muted text-truncate text-right",children:Object(yn.jsxs)("span",{children:[Object(yn.jsx)("i",{className:"fas fa-phone text-sm mr-2"}),s.length?s[0]:"--"]})}),Object(yn.jsx)("td",{className:"text-capitalize",children:e.created.name.toLowerCase()}),Object(yn.jsx)("td",{children:In()("created_at"===a.options.orderby?e.created_at:e.updated_at).fromNow()})]},e.id)})),!(null!==(t=i.contacts)&&void 0!==t&&t.length)&&Object(yn.jsx)("tr",{children:Object(yn.jsxs)("th",{className:"text-center text-muted",colSpan:"7",children:[Object(yn.jsx)("i",{className:"fa fa-info mx-2"}),a.options.search?Object(yn.jsxs)("span",{children:["La busqueda",Object(yn.jsxs)("strong",{className:"text-dark mx-1",children:['"',a.options.search,'",']}),"no coincide con ning\xfan contacto."]}):"No hay contactos registrados"]})})]})]})})}var Pc=a(28),Fc=a.n(Pc),Mc=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})$/i,Bc={isEmail:function(e){return!!e&&Mc.test(e)}},zc=a(46);function Uc(e){var t,a,s,n,c,r,i,l,d,u=e.data,j=void 0===u?{}:u,b=e.handleChange,m=e.fn,h=Object(xn.useState)({emailVerification:null,emailColor:"dark",nameVerification:null,nameColor:"dark",birthdayVerification:!1,birthdayColor:"dark",contatcs:[]}),x=Object(hn.a)(h,2),p=x[0],O=x[1],f=function(e,t){e&&t&&("email"===e&&Bc.isEmail(t)&&m.getContacts({page:1,orderby:"created_at",order:"desc",itemsPage:10,email:t,except:j.id}).then((function(e){var t,a,s;O(Object(o.a)(Object(o.a)({},p),{},{emailVerification:Boolean(null===(t=e.data)||void 0===t?void 0:t.length),emailColor:null!==(a=e.data)&&void 0!==a&&a.length?"danger":"dark"})),b("validates",Object(o.a)(Object(o.a)({},j.validates),{},{email:!Boolean(null===(s=e.data)||void 0===s?void 0:s.length)}))})),"name"===e&&m.getContacts({page:1,orderby:"created_at",order:"desc",itemsPage:10,name:t,except:j.id}).then((function(e){var t,a,s,n;O(Object(o.a)(Object(o.a)({},p),{},{contacts:null!==(t=e.data)&&void 0!==t&&t.length?e.data:[],nameVerification:Boolean(null===(a=e.data)||void 0===a?void 0:a.length),nameColor:null!==(s=e.data)&&void 0!==s&&s.length?"danger":"dark"})),b("validates",Object(o.a)(Object(o.a)({},j.validates),{},{name:!Boolean(null===(n=e.data)||void 0===n?void 0:n.length)}))})))};return Object(xn.useEffect)((function(){var e={birthday:Boolean(In()().diff(j.birthday,"days")>0),test:In()().diff(j.birthday,"days")};e.birthday!==p.birthdayVerification&&(O(Object(o.a)(Object(o.a)({},p),{},{birthdayVerification:e.birthday,birthdayColor:e.birthday?"dark":"danger"})),b("validates",Object(o.a)(Object(o.a)({},j.validates),{},{birthday:e.birthday})))}),[j.name,j.email,j.birthday]),Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Tipo de contacto"}),Object(yn.jsxs)("select",{className:"custom-select",name:"type",value:null!==(t=j.type)&&void 0!==t?t:"",onChange:function(e){var t=e.target;return b("type",parseInt(t.value))},children:[Object(yn.jsx)("option",{value:"0",children:"Cliente"}),Object(yn.jsx)("option",{value:"1",children:"Proveedor"})]})]}),j.type?Object(yn.jsxs)("div",{className:"form-group custom-control custom-checkbox",children:[Object(yn.jsx)("input",{type:"checkbox",name:"business",className:"custom-control-input",checked:null!==(a=j.business)&&void 0!==a&&a,onChange:function(e){var t=e.target;return b("business",t.checked)},id:"business_checkbox"}),Object(yn.jsx)("label",{htmlFor:"business_checkbox",className:"custom-control-label cursor-pointer",children:Object(yn.jsx)("small",{children:"\xbfEs un laboratorio?"})})]}):null,Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"RFC"}),Object(yn.jsx)("input",{type:"text",className:"form-control text-uppercase text-truncate",placeholder:"facturas",name:"rfc",defaultValue:null!==(s=j.rfc)&&void 0!==s?s:"",onChange:function(e){var t=e.target;return b("rfc",t.value.toUpperCase())},minLength:"10"})]}),Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"G\xe9nero"}),Object(yn.jsxs)("select",{className:"custom-select",name:"gender",value:null!==(n=j.gender)&&void 0!==n?n:"",onChange:function(e){var t=e.target;return b("gender",t.value)},children:[Object(yn.jsx)("option",{value:"male",children:"Hombre"}),Object(yn.jsx)("option",{value:"female",children:"Mujer"})]})]})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsxs)("div",{className:"form-group position-relative",children:[Object(yn.jsxs)("label",{children:["Nombre completo ",Object(yn.jsx)("span",{className:"text-orange",children:"*"})]}),Object(yn.jsx)("input",{type:"text",className:"form-control text-capitalize text-truncate text-".concat(p.nameColor),placeholder:"Ej: Juan Perez G",name:"name",defaultValue:null!==(c=j.name)&&void 0!==c?c:"",onChange:function(e){var t=e.target;return b("name",t.value.toLowerCase())},onBlur:function(e){var t=e.target;return f("name",t.value.toLowerCase())},onKeyDown:function(e){"Escape"===e.key&&O(Object(o.a)(Object(o.a)({},p),{},{contacts:[]}))}}),!j.name&&Object(yn.jsx)("small",{children:Object(yn.jsx)("span",{className:"text-orange",children:"Este campo es requerido"})}),null!==(r=p.contacts)&&void 0!==r&&r.length&&(null===(i=j.name)||void 0===i?void 0:i.length)>5&&!j.id?(d=p.contacts,Object(yn.jsx)("div",{className:"position-absolute border rounded p-0 bg-white overflow-auto ",style:{zIndex:"50",top:"4.1rem",width:"100%",maxHeight:"8rem"},children:Object(yn.jsx)("ul",{className:"list-group",children:d.map((function(e){var t;return Object(yn.jsxs)("li",{className:"list-group-item text-truncate",children:[Object(yn.jsx)("i",{className:"fas fa-minus mr-1 text-danger"}),Object(yn.jsx)("span",{className:"text-capitalize text-muted text-monospace text-sm",children:null===(t=e.name)||void 0===t?void 0:t.toLowerCase()})]},e.id)}))})})):null]}),Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsxs)("label",{children:["Correo electr\xf3nico ",Object(yn.jsx)("span",{className:"text-orange",children:"*"})]}),Object(yn.jsx)("input",{type:"email",className:"form-control text-lowercase text-truncate text-".concat(p.emailColor),placeholder:"Ej: correo@domain.com",name:"email",defaultValue:null!==(l=j.email)&&void 0!==l?l:"",onChange:function(e){var t=e.target;return b("email",t.value.toLowerCase())},onBlur:function(e){var t=e.target;return f("email",t.value)}}),!j.email&&Object(yn.jsx)("small",{children:Object(yn.jsx)("span",{className:"text-orange",children:"Este campo es requerido"})}),j.email&&!Bc.isEmail(j.email)&&Object(yn.jsx)("small",{children:Object(yn.jsx)("span",{className:"text-orange",children:"Este no es un correo valido"})}),p.emailVerification&&"boolean"===typeof p.emailVerification&&Object(yn.jsx)("small",{children:Object(yn.jsx)("span",{className:"text-orange",children:"Este e-mail ya se encuentra registrado"})})]}),j.type?null:Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsxs)("label",{children:["Fecha de nacimiento ",Object(yn.jsx)("span",{className:"text-orange",children:"*"})]}),Object(yn.jsx)(Fc.a,{className:"form-control text-".concat(p.birthdayColor),locale:"es",selected:new Date(j.birthday.format("YYYY/MM/DD")),dateFormat:"dd/MM/yyyy",maxDate:new Date,placeholderText:"Seleccione una fecha",onSelect:function(e){if(e){e=e.toLocaleDateString("es-MX");var t=In()(e,"DD/MM/YYYY");t.isValid()&&b("birthday",t)}},onChange:function(e){if(e){e=e.toLocaleDateString("es-MX");var t=In()(e,"DD/MM/YYYY");t.isValid()&&b("birthday",t)}}}),!p.birthdayVerification&&Object(yn.jsx)("small",{children:Object(yn.jsx)("span",{className:"text-orange",children:"Este campo es requerido"})})]})]})]})}function Gc(e){var t,a,s,n,c,r=e.data,i=e.handleChange;return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"col",children:[r.address_street?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Calle y numero"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-1",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-road"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Calle y numero",defaultValue:null!==(t=r.address_street)&&void 0!==t?t:"",onChange:function(e){var t=e.target;return i("address_street",t.value.toLowerCase())}})]}),r.address_neighborhood?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Colonia"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-1",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-location-arrow"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Colonia",defaultValue:null!==(a=r.address_neighborhood)&&void 0!==a?a:"",onChange:function(e){var t=e.target;return i("address_neighborhood",t.value.toLowerCase())}})]}),r.address_location?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Municipio"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-1",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-location-arrow"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Municipio",defaultValue:null!==(s=r.address_location)&&void 0!==s?s:"",onChange:function(e){var t=e.target;return i("address_location",t.value.toLowerCase())}})]})]}),Object(yn.jsxs)("div",{className:"col",children:[r.address_state?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Estado"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-1",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-map-marker"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Estado",defaultValue:null!==(n=r.address_state)&&void 0!==n?n:"",onChange:function(e){var t=e.target;return i("address_state",t.value.toLowerCase())}})]}),r.address_zip?Object(yn.jsx)("small",{children:Object(yn.jsx)("label",{children:"Codigo postal"})}):Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"input-group mb-1",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-map-marker"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Codigo Postal",defaultValue:null!==(c=r.address_zip)&&void 0!==c?c:"",onChange:function(e){var t=e.target;return i("address_zip",t.value.toLowerCase())}})]})]})]})}function Rc(e){var t=e.data,a=e.handleChange;return Object(xn.useEffect)((function(){var e,s=Boolean([t.phone_notices,t.phone_cell,t.phone_office].filter((function(e){return 10===e.length})).length);s!==(null===(e=t.validates)||void 0===e?void 0:e.phones)&&a("validates",Object(o.a)(Object(o.a)({},t.validates),{},{phones:s}))}),[t.phone_notices,t.phone_cell,t.phone_office]),Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Telefono para recados"}),Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-phone"})})}),Object(yn.jsx)("input",{type:"tel",className:"form-control",placeholder:"(999) 999 9999",maxLength:"10",value:t.phone_notices,onChange:function(e){var t=e.target;isNaN(t.value)||a("phone_notices",t.value)}})]}),t.phone_notices&&10!==t.phone_notices.length&&Object(yn.jsx)("small",{children:Object(yn.jsx)("span",{className:"text-orange",children:"Telefono a 10 numeros"})})]})}),Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Telefono personal / whatsApp"}),Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-phone"})})}),Object(yn.jsx)("input",{type:"tel",className:"form-control",placeholder:"(999) 999 9999",maxLength:"10",value:t.phone_cell,onChange:function(e){var t=e.target;isNaN(t.value)||a("phone_cell",t.value)}})]})]})}),Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Telefono del trabajo"}),Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-phone"})})}),Object(yn.jsx)("input",{type:"tel",className:"form-control",placeholder:"(999) 999 9999",maxLength:"10",value:t.phone_office,onChange:function(e){var t=e.target;isNaN(t.value)||a("phone_office",t.value)}})]})]})})]})}Object(Pc.registerLocale)("es",zc.a);var Vc=function(e){var t=e.sales;return Object(yn.jsxs)("table",{className:"table m-0",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"ID"}),Object(yn.jsx)("th",{children:"Total"}),Object(yn.jsx)("th",{children:"Orden"}),Object(yn.jsx)("th",{children:"Registrado"})]})}),Object(yn.jsx)("tbody",{children:t.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsxs)("th",{children:["#",e.id]}),Object(yn.jsxs)("td",{children:["$ ",e.total.toFixed(2)]}),Object(yn.jsxs)("td",{children:["#",e.pedido]}),Object(yn.jsxs)("td",{className:"text-truncate",children:[Object(yn.jsx)("i",{className:"fas fa-clock mr-2"}),In()(e.created_at).fromNow()]})]},e.id)}))})]})};function Yc(e){var t=e.analytics,a=e.metadata,s=t.purchases,n=t.exams,c=t.brands,r=t.orders,i=t.suppliers,o=a.created_at,l=a.created,d=a.updated,u=a.updated_at;return Object(yn.jsxs)("div",{className:"row",children:[c?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"small-box bg-orange",children:[Object(yn.jsxs)("div",{className:"inner",children:[Object(yn.jsx)("h5",{children:c}),Object(yn.jsx)("p",{children:"Marcas"})]}),Object(yn.jsx)("div",{className:"icon",children:Object(yn.jsx)("i",{className:"fas fa-shopping-bag"})}),Object(yn.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yn.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,i?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"small-box bg-indigo",children:[Object(yn.jsxs)("div",{className:"inner",children:[Object(yn.jsx)("h5",{children:i}),Object(yn.jsx)("p",{children:"Laboratorio"})]}),Object(yn.jsx)("div",{className:"icon",children:Object(yn.jsx)("i",{className:"fas fa-building"})}),Object(yn.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yn.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,s?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"small-box bg-success",children:[Object(yn.jsxs)("div",{className:"inner",children:[Object(yn.jsx)("h5",{children:s}),Object(yn.jsx)("p",{children:"Compras"})]}),Object(yn.jsx)("div",{className:"icon",children:Object(yn.jsx)("i",{className:"fas fa-money-bill"})}),Object(yn.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yn.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,n?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"small-box bg-info",children:[Object(yn.jsxs)("div",{className:"inner",children:[Object(yn.jsx)("h5",{children:n}),Object(yn.jsx)("p",{children:"Examenes"})]}),Object(yn.jsx)("div",{className:"icon",children:Object(yn.jsx)("i",{className:"fas fa-notes-medical"})}),Object(yn.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yn.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,r?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"small-box bg-warning",children:[Object(yn.jsxs)("div",{className:"inner",children:[Object(yn.jsx)("h5",{children:r}),Object(yn.jsx)("p",{children:"Pedidos"})]}),Object(yn.jsx)("div",{className:"icon",children:Object(yn.jsx)("i",{className:"fas fa-shopping-basket"})}),Object(yn.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yn.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,o&&Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"small-box bg-primary",children:[Object(yn.jsxs)("div",{className:"inner",children:[Object(yn.jsx)("h5",{children:In()().diff(o,"days")>=0?o.format("DD/MMMM/Y"):"--/--/--"}),Object(yn.jsx)("p",{children:"Registrado"})]}),Object(yn.jsx)("div",{className:"icon",children:Object(yn.jsx)("i",{className:"fas fa-calendar"})}),Object(yn.jsx)("a",{href:"#details",className:"small-box-footer text-xs",children:In()().diff(u,"days")>=0?"Modificado: ".concat(u.format("DD/MMMM/Y")):"Modificado --/--/--"})]})}),l&&Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"small-box bg-primary",children:[Object(yn.jsxs)("div",{className:"inner text-capitalize",children:[Object(yn.jsx)("h5",{className:"text-truncate",children:l}),Object(yn.jsx)("p",{children:"Registrado por"})]}),Object(yn.jsx)("div",{className:"icon",children:Object(yn.jsx)("i",{className:"fas fa-user"})}),Object(yn.jsxs)("a",{href:"#details",className:"small-box-footer text-xs text-truncate text-capitalize",children:["Modificado: ",d]})]})})]})}var qc=function(e){var t=e.brands;return Object(yn.jsxs)("table",{className:"table m-0",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"Nombre"}),Object(yn.jsx)("th",{children:"Registrado"})]})}),Object(yn.jsx)("tbody",{children:t.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("td",{className:"text-uppercase",children:e.name}),Object(yn.jsxs)("td",{className:"text-truncate",children:[Object(yn.jsx)("i",{className:"fas fa-clock mr-2"}),In()(e.created_at).fromNow()]})]},e.id)}))})]})},$c=function(e){var t,a=JSON.parse(null!==(t=localStorage.getItem("OrusSystem"))&&void 0!==t?t:"");return a.orders||(a.orders=[]),e?a.orders:a},Jc=function(e,t){t&&t()},Hc={handleStatusString:function(e){switch(e){case 0:return"procesando";case 1:return"laboratorio";case 2:return"bicelacion";case 3:return"terminado";case 4:return"entregado";default:return"garantia"}},handleDeleteOrder:function(e,t,a){if(e.id)return e.estado?(window.Swal.fire({title:"Verificacion",text:"El pedido tiene un proceso avanzado",icon:"warning"}),!1):e.nota?(window.Swal.fire({title:"Verificacion",text:"No se puede eliminar un pedido con una venta activa",icon:"warning"}),!1):(window.Swal.fire({text:"\xbfEsta seguro de eliminar el pedido ".concat(e.id,"?"),icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){if(!s.dismiss&&a)return a({id:e.id,options:t}),console.log("[Orus System] Eliminando pedido: "+e.id),!0})),!1)},handleSaveOrder:function(e,t,a,s,n){window.Swal.fire({title:"Almacenamiento",text:e?"\xbfEsta seguro de actualizar el pedido ".concat(e,"?"):"\xbfEsta seguro de crear un nuevo pedido?",icon:"question",showCancelButton:!0,confirmButtonText:e?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(c){var r=c.dismiss;console.log("[DEBUG HELPER data]",t),!r&&s&&(s({data:t,id:e,options:a}),n&&n(),Jc(t.contact_id))}))},getDataTemporary:$c,addDataTemporary:function(e){var t=$c();Object(o.a)(Object(o.a)({},t),{},{orders:t.orders.filter((function(t){return t.id!==e.id}))}).orders.push(e)},removeDataTemporary:Jc,getDataOneItem:function(e){var t;return null!==(t=$c().orders.filter((function(t){return t.id===e}))[0])&&void 0!==t?t:{}},getStatusType:["procesando","laboratorio","bicelacion","terminado","entregado"]},Zc=function(e){var t=e.orders;return Object(yn.jsxs)("table",{className:"table m-0",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"ID"}),Object(yn.jsx)("th",{children:"Folio LAB"}),Object(yn.jsx)("th",{children:"Nota"}),Object(yn.jsx)("th",{children:"Estado"}),Object(yn.jsx)("th",{children:"Registrado"})]})}),Object(yn.jsx)("tbody",{children:t.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsxs)("th",{children:["#",e.id]}),Object(yn.jsx)("td",{children:e.order_foreing?"#".concat(e.order_foreing):"--"}),Object(yn.jsx)("td",{children:e.nota?"#".concat(e.nota):"--"}),Object(yn.jsx)("td",{className:"text-uppercase",children:Object(yn.jsx)("span",{className:"badge badge-secondary",children:Hc.handleStatusString(e.status)})}),Object(yn.jsxs)("td",{className:"text-truncate",children:[Object(yn.jsx)("i",{className:"fas fa-clock mr-2"}),In()(e.created_at).fromNow()]})]},e.id)}))})]})};function Xc(e){var t=e.exams,a=void 0===t?[]:t,s=e.allSelect,n=void 0!==s&&s,c=e.handleSelectedExam,r=Object(xn.useState)(""),i=Object(hn.a)(r,2),o=i[0],l=i[1];return Object(yn.jsxs)("table",{className:"table m-0",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{scope:"col"}),Object(yn.jsx)("th",{scope:"col",children:"Folio"}),Object(yn.jsx)("th",{scope:"col",children:"Registrado"}),Object(yn.jsx)("th",{scope:"col",children:"Estado"})]})}),Object(yn.jsxs)("tbody",{children:[a.length?null:Object(yn.jsx)("tr",{children:Object(yn.jsxs)("th",{colSpan:"4",className:"text-center",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"No hay registros"]})}),a.map((function(e){return Object(yn.jsxs)("tr",{className:In()(new Date).isSame(In()(e.created_at),"day")?"text-primary":"",children:[Object(yn.jsx)("td",{children:Object(yn.jsx)("div",{className:"icheck-primary",children:c?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("input",{type:"checkbox",name:"exam_"+e.id,id:"exam_"+e.id,defaultValue:e.id,onChange:function(t){t.target.checked?(l(e.id),c(e)):l("")},disabled:!n,checked:o===e.id}),Object(yn.jsx)("label",{htmlFor:"exam_"+e.id})]}):null})}),Object(yn.jsx)("th",{scope:"row",children:Object(yn.jsxs)("span",{className:"text",children:["#",e.id]})}),Object(yn.jsxs)("td",{className:"text-truncate",children:[Object(yn.jsx)("i",{className:"fas fa-clock mr-2"}),In()(e.created_at).fromNow()]}),Object(yn.jsx)("td",{children:e.status?Object(yn.jsxs)("span",{className:"badge badge-success",children:[Object(yn.jsx)("i",{className:"fas fa-check"})," Terminado"]}):Object(yn.jsxs)("span",{className:"badge badge-secondary",children:[Object(yn.jsx)("i",{className:"fas fa-hourglass"})," Activo"]})})]},e.id)}))]})]})}function Qc(e){var t=e.showBottons,a=void 0!==t&&t,s=e.exams,n=void 0===s?[]:s;return Object(yn.jsxs)("div",{className:"card",children:[Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsxs)("h5",{className:"card-title text-indigo text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-notes-medical mr-1"}),"Examenes"]}),n.length?Object(yn.jsx)(Xc,{allSelect:!0,exams:n,handleSelectedExam:function(e){console.log("[DEBUG] examSelect",e)}}):Object(yn.jsx)("div",{className:"alert alert-info mt-5",children:Object(yn.jsxs)("h5",{children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Aun no hay examenes para este contacto"]})})]}),a&&Object(yn.jsx)("div",{className:"card-footer text-right",children:Object(yn.jsx)("div",{className:"btn-group",children:Object(yn.jsx)("button",{className:"btn btn-secondary",children:"Nuevo"})})})]})}var Wc=function(e){var t=e.title,a=void 0===t?"confirmaci\xf3n":t,s=e.body,n=e.handleCancel;return Object(yn.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yn.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(yn.jsxs)("div",{className:"modal-content",children:[Object(yn.jsxs)("div",{className:"modal-header",children:[Object(yn.jsx)("h5",{className:"modal-title text-dark text-bold text-capitalize",children:a}),Object(yn.jsx)("button",{type:"button",className:"close",onClick:function(){n&&n()},children:Object(yn.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yn.jsx)("div",{className:"modal-body",children:s})]})})})},Kc={id:0,name:"",rfc:"",gender:"male",email:"",type:0,business:0,birthday:In()(),phone_notices:"",phone_cell:"",phone_office:"",age:"",address_street:"",address_neighborhood:"",address_location:"Colima",address_state:"Colima",address_zip:"",done:{purchases:[],brands:[],supplier_of:[],orders:[],exams:[]},analytics:{purchases:0,exams:0,brands:0,suppliers:0,orders:0},metadata:{created_at:"",updated_at:"",deleted_at:"",created:"",updated:"--"},validates:{name:!1,email:!1,birthday:!1,phones:!1},loading:!1};function er(e){var t,a,s,c=e.match.params.id,r=e.handleNewOrEdit,i=e.showModal,l=void 0!==i&&i,d=Dc(),u=Object(xn.useState)(Kc),j=Object(hn.a)(u,2),b=j[0],m=j[1],h=b.done,x=h.purchases,p=h.brands,O=h.supplier_of,f=h.orders,v=h.exams,g=b.analytics,y=b.metadata,w=Object(On.f)(),S=4===Object.values(b.validates).filter((function(e){return e})).length,C=function(e,t){e&&b[e]!==t&&m(Object(o.a)(Object(o.a)({},b),{},Object(N.a)({},e,t)))};return Object(xn.useEffect)((function(){c&&d.getContact(parseInt(c)).then((function(e){!function(e,t){var a,s,n,c,r,i,o,l,d,u,j,b,m,h,x,p,O,f,v,g,N,y;e&&t({id:e.id,name:null===(a=e.name)||void 0===a?void 0:a.toLowerCase(),rfc:null===(s=e.rfc)||void 0===s?void 0:s.toUpperCase(),gender:null===(n=e.metadata)||void 0===n?void 0:n.gender,email:null===(c=e.email)||void 0===c?void 0:c.toLowerCase(),type:e.type,business:e.business,birthday:e.age?In()(null===(r=e.metadata)||void 0===r?void 0:r.birthday):In()(),phone_notices:null===(i=e.phones)||void 0===i?void 0:i.notices,phone_cell:null===(o=e.phones)||void 0===o?void 0:o.cell,phone_office:null===(l=e.phones)||void 0===l?void 0:l.office,age:null!==(d=e.age)&&void 0!==d?d:0,address_street:null===(u=e.address)||void 0===u?void 0:u.street.toLowerCase(),address_neighborhood:null===(j=e.address)||void 0===j?void 0:j.neighborhood.toLowerCase(),address_location:null===(b=e.address)||void 0===b?void 0:b.location.toLowerCase(),address_state:null===(m=e.address)||void 0===m?void 0:m.state.toLowerCase(),address_zip:null===(h=e.address)||void 0===h?void 0:h.zip.toLowerCase(),done:{purchases:e.purchases,brands:e.brands,supplier_of:e.supplier_of,orders:e.orders,exams:e.exams},analytics:{purchases:e.purchases_count,exams:e.exams_count,brands:e.brands_count,suppliers:e.suppliers_count,orders:e.orders_count},metadata:{created_at:e.created_at?In()(e.created_at):In()(),updated_at:e.updated_at?In()(e.updated_at):In()(),deleted_at:null!==(x=e.deleted_at)&&void 0!==x?x:"",created:null!==(p=null===(O=e.created)||void 0===O?void 0:O.username.toLowerCase())&&void 0!==p?p:"",updated:null!==(f=null===(v=e.updated)||void 0===v?void 0:v.username.toLowerCase())&&void 0!==f?f:"--"},validates:{name:(null===(g=e.name)||void 0===g?void 0:g.length)>5,email:Bc.isEmail(e.email),birthday:Boolean(In()().diff(null===(N=e.metadata)||void 0===N?void 0:N.birthday,"days")>0),phones:Boolean(Object.values(null!==(y=e.phones)&&void 0!==y?y:{}).filter((function(e){return 10===e.length})).length)},loading:!1})}(e,m)}))}),[c]),Object(yn.jsxs)(yn.Fragment,{children:[b.id?Object(yn.jsx)(Yc,{analytics:g,metadata:y}):null,Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col-md-12",children:[y.deleted_at?Object(yn.jsxs)("div",{className:"alert alert-warning",children:[Object(yn.jsxs)("h4",{className:"alert-heading",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Precaucion!"]}),Object(yn.jsxs)("p",{children:["Este contacto fue eliminado por ",null===(t=b.updated)||void 0===t?void 0:t.name," el"," ",In()(b.deleted_at).format("LLLL")]})]}):null,Object(yn.jsxs)("div",{className:"card card-indigo card-outline",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h3",{className:"card-title text-indigo",children:[Object(yn.jsx)("i",{className:"fas fa-address-book mr-1"}),b.id?Object(yn.jsxs)("label",{children:["Editar contacto",Object(yn.jsx)("span",{className:"badge bg-indigo ml-2",children:b.id})]}):Object(yn.jsx)("label",{children:"Registrar nuevo contacto"})]})}),Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("h6",{className:"card-subtitle text-muted d-block w-100 mb-4 text-center",children:"Datos personales"}),Object(yn.jsx)(Uc,{data:b,handleChange:C,fn:d})]}),Object(yn.jsxs)("div",{className:"row mt-5 border-top pt-5",children:[Object(yn.jsxs)("h6",{className:"card-subtitle text-muted d-block w-100 mb-4 text-center",children:["Medios de contacto ",Object(yn.jsx)("span",{className:"text-orange",children:"*"}),!b.validates.phones&&Object(yn.jsx)("small",{className:"d-block w-100",children:Object(yn.jsx)("span",{className:"text-orange",children:"Ingrese por lo menos un telefono"})})]}),Object(yn.jsx)(Rc,{data:b,handleChange:C})]}),b.type?null:Object(yn.jsxs)("div",{className:"row mt-5 border-top pt-5",children:[Object(yn.jsx)("h6",{className:"card-subtitle text-muted d-block w-100 mb-4 text-center",children:"Domicilios del contacto"}),Object(yn.jsx)(Gc,{data:b,domicilios:null!==(a=b.address)&&void 0!==a?a:{calle:"",colonia:"",municipio:"",estado:"",cp:""},handleChange:C})]})]}),Object(yn.jsx)("div",{className:"card-footer",children:Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col-md-12",children:Object(yn.jsxs)("div",{className:"btn-group float-right",role:"group",children:[Object(yn.jsxs)("button",{className:"btn btn-default",type:"button",onClick:function(){w.push("/contactos"),r()},children:[Object(yn.jsx)("i",{className:b.id?"fas fa-arrow-left mr-2":"fas fa-ban mr-2"}),Object(yn.jsx)("strong",{children:b.id?"Cerrar":"Cancelar"})]}),Object(yn.jsxs)("button",{type:"button",className:"btn bg-indigo",onClick:function(){return function(){var e={id:b.id,name:b.name,rfc:b.rfc,gender:b.gender,email:b.email,type:b.type,business:b.business,birthday:b.birthday.format("YYYY/MM/DD"),telnumbers:{notices:b.phone_notices,cell:b.phone_cell,office:b.phone_office},domicilio:{street:b.address_street,neighborhood:b.address_neighborhood,location:b.address_location,state:b.address_state,zip:b.address_zip}};window.Swal.fire({title:"Contactos",text:e.id?"\xbfDesea actualizar a este contacto?":"\xbfDesea crear un nuevo contacto?",icon:"question",showCancelButton:!0,confirmButtonText:e.id?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){t.dismiss||d.saveContact(e).then((function(e){null!==e&&void 0!==e&&e.id&&(console.log("[Orus System] Create contatc successfully",e.id),r(),w.push("/contactos"))}))}))}()},disabled:!S,children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"}),b.id?"Actualizar":"Guardar"]})]})})})}),b.loading&&Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})})]})]})}),b.id?Object(yn.jsx)("div",{className:"content",id:"details",children:Object(yn.jsxs)("div",{className:"row",children:[!b.type&&Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)(Qc,{exams:v})}),x.length?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("div",{className:"card",children:Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(yn.jsx)("i",{className:"fas fa-money-bill mr-1"}),"Compras"]}),Object(yn.jsx)(Vc,{sales:x})]})})}):null,p.length?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("div",{className:"card",children:Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(yn.jsx)("i",{className:"fas fa-copyright mr-1"}),"Marcas"]}),Object(yn.jsx)(qc,{brands:p})]})})}):null,O.length?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("div",{className:"card",children:Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(yn.jsx)("i",{className:"fas fa-building mr-1"}),"Laboratorio"]}),Object(yn.jsx)(Zc,{orders:null!==O&&void 0!==O?O:[]})]})})}):null,f.length?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("div",{className:"card",children:Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(yn.jsx)("i",{className:"fas fa-shopping-basket mr-1"}),"Pedidos"]}),Object(yn.jsx)(Zc,{orders:null!==f&&void 0!==f?f:[]})]})})}):null]})}):null,l&&Object(yn.jsx)(Wc,{body:(s=10,Object(yn.jsxs)("div",{children:[Object(yn.jsx)("p",{className:"text-center",children:"\xbfRealmente desea ver el examen?"}),Object(yn.jsx)("div",{className:"text-center",children:Object(yn.jsx)(n.b,{to:"/consultorio/".concat(s),className:"btn btn-primary",children:"Confirmar"})})]})),handleCancel:function(){}})]})}var tr={page:1,orderby:"created_at",order:"desc",itemsPage:25};function ar(e){var t=Object(xn.useState)({options:tr,newOrEdit:null}),a=Object(hn.a)(t,2),s=a[0],n=a[1],c=e.match.params.id;return Object(xn.useEffect)((function(){n(Object(o.a)(Object(o.a)({},s),{},{newOrEdit:!!c}))}),[c]),Object(yn.jsx)(Ec.Provider,{value:Object(o.a)(Object(o.a)({},s),{},{set:n}),children:Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)(Tc,{newOrEdit:s.newOrEdit,handleNewOrEdit:function(){return n(Object(o.a)(Object(o.a)({},s),{},{newOrEdit:!s.newOrEdit}))}}),"boolean"===typeof s.newOrEdit?Object(yn.jsx)("div",{className:"col-sm-12 col-md-8 col-lg-10",children:s.newOrEdit?Object(yn.jsx)(er,Object(o.a)(Object(o.a)({},e),{},{handleNewOrEdit:function(){return n(Object(o.a)(Object(o.a)({},s),{},{newOrEdit:!s.newOrEdit}))}})):Object(yn.jsx)(Ac,{})}):Object(yn.jsx)("p",{children:"Loading component"})]})})}var sr={deleteConfig:function(e,t,a,s){window.Swal.fire({title:"Almacenamiento",text:"\xbfEsta seguro de ELIMINAR la sucursal ".concat(a,"?"),icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(a){a.dismiss||s(Js.deleteConfig({id:e,options:t}))}))},saveConfig:function(e,t,a){window.Swal.fire({title:"Almacenamiento",text:e.id?"\xbfEsta seguro de actualizar la sucursal ".concat(e.name,"?"):"\xbfEsta seguro de crear una nueva sucursal?",icon:"question",showCancelButton:!0,confirmButtonText:e.id?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){s.dismiss||a(Js.saveConfig({data:{name:"branches",value:{name:e.name,address:e.address,phone:e.phone}},id:e.id,options:t}))}))},verifyData:function(e){return e.name.length<=3?(window.Swal.fire({title:"Verificacion",text:"Por favor escriba un nombre valido para la sucursal",icon:"warning"}),!1):e.address.length<=3?(window.Swal.fire({title:"Verificacion",text:"Por favor escriba un domicilio valido para la sucursal",icon:"warning"}),!1):10===e.phone.length||(window.Swal.fire({title:"Verificacion",text:"Por favor escriba un numero telefonico a 10 numeros",icon:"warning"}),!1)}};function nr(){var e=Object(c.d)((function(e){return e.config})).list,t=Object(c.c)(),a=Object(xn.useState)({showForm:!1,id:0,name:"",address:"",phone:""}),s=Object(hn.a)(a,2),n=s[0],r=s[1],i={page:1,name:"branches",itemsPage:10},l=function(){return r(Object(o.a)(Object(o.a)({},n),{},{showForm:!1,id:0,name:"",address:"",phone:""}))},d=function(e){var t=e.name,a=e.value;r(Object(o.a)(Object(o.a)({},n),{},Object(N.a)({},t,a.toString().toLowerCase())))};return Object(xn.useEffect)((function(){t(Js.getListConfig(i))}),[]),Object(yn.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsxs)("h5",{className:"card-title d-block mb-2",children:[Object(yn.jsx)("i",{className:"fas fa-store mr-1"}),"Sucursales"]}),n.showForm?Object(yn.jsxs)("form",{className:"card-text m-2 mt-4",onSubmit:function(e){e.preventDefault(),sr.verifyData(n)&&(sr.saveConfig(n,i,t),l())},children:[Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Nombre de la sucursal"}),Object(yn.jsx)("input",{type:"text",placeholder:"Escriba el nombre de la sucursal",className:"form-control",name:"name",defaultValue:n.name,onChange:function(e){var t=e.target;return d(t)}})]}),Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Domicilio"}),Object(yn.jsx)("input",{type:"text",placeholder:"Escriba el domicilio de la sucursal",className:"form-control",name:"address",defaultValue:n.address,onChange:function(e){var t=e.target;return d(t)}})]}),Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Telefono"}),Object(yn.jsx)("input",{type:"phone",placeholder:"Escriba el telefono de la sucursal",className:"form-control",name:"phone",defaultValue:n.phone,onChange:function(e){var t=e.target;return d(t)},maxLength:10})]}),Object(yn.jsxs)("div",{className:"form-group text-right",children:[Object(yn.jsx)("button",{type:"button",className:"btn btn-link",onClick:l,children:"Cancelar"}),Object(yn.jsx)("button",{type:"submit",className:"btn btn-dark ml-2",children:"Guardar"})]})]}):Object(yn.jsx)("div",{className:"table-responsive",children:Object(yn.jsxs)("table",{className:"table table-striped table-sm",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"Nombre"}),Object(yn.jsx)("th",{children:"Domicilio"}),Object(yn.jsx)("td",{children:Object(yn.jsx)("span",{className:"sr-only",children:"Acciones"})})]})}),Object(yn.jsx)("tbody",{children:e.map((function(e){var t;return"bank"!==e.name?Object(yn.jsxs)("tr",{children:[console.log(e),Object(yn.jsx)("td",{className:"text-capitalize",children:e.data.name}),Object(yn.jsx)("td",{className:"text-truncate text-capitalize",children:null!==(t=e.data.address)&&void 0!==t?t:"--"}),Object(yn.jsx)("td",{className:"text-right",children:Object(yn.jsx)("button",{type:"button",className:"btn btn-sm btn-primary ml-1",onClick:function(){return function(e){var t,a,s,n=e.id,c=(e.values,e.data);r(Object(o.a)(Object(o.a)({},c),{},{showForm:!0,id:n,name:null===(t=c.name)||void 0===t?void 0:t.toString().toLowerCase(),address:null===(a=c.address)||void 0===a?void 0:a.toString().toLowerCase(),phone:null===(s=c.phone)||void 0===s?void 0:s.toString().toLowerCase()}))}(e)},children:Object(yn.jsx)("i",{className:"fas fa-edit"})})})]},e.id):null}))})]})})]}),Object(yn.jsx)("div",{className:"card-footer text-right",children:Object(yn.jsx)("button",{className:"btn btn-primary btn-sm",disabled:n.showForm,onClick:function(){return r(Object(o.a)(Object(o.a)({},n),{},{showForm:!0}))},children:Object(yn.jsx)("i",{className:"fas fa-plus"})})})]})}function cr(){var e=Object(c.c)(),t=Object(xn.useContext)(wn).auth,a=JSON.parse(localStorage.getItem("OrusSystem")),s=Object(xn.useState)({server:a.host?a.host:"",company:a.company?a.company:"",email:t.email?t.email:"",name:t.name?t.name:"",username:t.username?t.username:"",password:"",category_list:[]}),n=Object(hn.a)(s,2),r=n[0],i=n[1];console.log(r),Object(xn.useEffect)((function(){e(v.changeNamePage("configuraciones"))}),[]);var o=function(e){var t=e.target,a=t.name,s=t.value;i(Object(N.a)({},a,s.toLowerCase()))};return Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-12",children:Object(yn.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("h5",{className:"card-title",children:"Generales"}),Object(yn.jsx)("p",{children:"\xa0"}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-server"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Servidor",name:"server",value:r.server,onChange:o})]}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-building"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Nombre de la empresa",name:"company",value:r.company,onChange:o})]})]}),Object(yn.jsx)("div",{className:"card-footer text-right",children:Object(yn.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=JSON.parse(localStorage.getItem("OrusSystem"));e.company=r.company,localStorage.setItem("OrusSystem",JSON.stringify(e))},children:"Guardar"})})]})}),Object(yn.jsx)("div",{className:"col-lg-6 col-sm-12",children:Object(yn.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("h5",{className:"card-title",children:"Usuario"}),Object(yn.jsx)("p",{children:"\xa0"}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-at"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",name:"email",value:r.email,onChange:o})]}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-user-tag"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Nombre completo",name:"name",value:r.name,onChange:o})]}),Object(yn.jsx)("hr",{}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-user-check"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Usuario",name:"username",value:r.username,onChange:o})]}),Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:Object(yn.jsx)("i",{className:"fas fa-lock"})})}),Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Contrase\xf1a",name:"password",value:r.password,onChange:o})]})]}),Object(yn.jsx)("div",{className:"card-footer text-right",children:Object(yn.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){},children:"Guardar"})})]})}),Object(yn.jsx)("div",{className:"col-lg-6 col-md-12 col-sm-12",children:Object(yn.jsx)(nr,{})})]})}var rr=Object(xn.createContext)(null),ir=function(){return Object(xn.useContext)(rr)},or=Object(xn.createContext)(null),lr={data:[],meta:{},server:JSON.parse(localStorage.getItem("OrusSystem"))};function dr(e){var t=e.children,a=Object(xn.useState)(lr),s=Object(hn.a)(a,2),n=s[0],c=s[1],r=function(e){if("object"!==typeof e)return!1;var t=Object(o.a)(Object(o.a)({},n.server),e);return c(Object(o.a)(Object(o.a)({},n),{},{server:t})),localStorage.setItem("OrusSystem",JSON.stringify(t)),!0};return Object(xn.useEffect)((function(){gn("config?itemsPage=100","GET").then((function(e){c(Object(o.a)(Object(o.a)({},n),{},{data:e.data,meta:e.meta,setStorage:r}))}))}),[]),Object(yn.jsx)(or.Provider,{value:n,children:t})}function ur(e){var t,a,s,n,c,r,i,l=e.newOrEdit,d=e.handleNewOrEdit,u=ir(),j=null===(t=Object(xn.useContext)(or).data)||void 0===t?void 0:t.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"branches"===e.name})),b=null!==(a=u.options)&&void 0!==a&&a.date?In()(u.options.date):In()();return Object(yn.jsxs)("div",{className:"col-sm-12 col-md-2 d-print-none",children:[Object(yn.jsxs)("button",{className:"btn bg-info btn-block mb-3",type:"button",disabled:l,onClick:d,children:[Object(yn.jsx)("i",{className:"fas fa-plus mr-1"}),"Nuevo examen"]}),Object(yn.jsxs)(Ic,{title:"Filtros",children:[Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yn.jsxs)("select",{className:"form-control",id:"orderby",defaultValue:null===(s=u.options)||void 0===s?void 0:s.orderby,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{orderby:t.value})}))},children:[Object(yn.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yn.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"date",children:"Fecha"}),Object(yn.jsx)(Fc.a,{className:"form-control",locale:"es",selected:new Date(b.format("YYYY/MM/DD")),dateFormat:"dd/MM/yyyy",maxDate:new Date,placeholderText:"Seleccione una fecha",onSelect:function(e){e&&(e=e.toLocaleDateString("es-MX"),(e=In()(e,"DD/MM/YYYY")).isValid()&&u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{date:e.format("YYYY/MM/DD")})})))},onChange:function(e){e&&(e=e.toLocaleDateString("es-MX"),(e=In()(e,"DD/MM/YYYY")).isValid()&&u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{date:e.format("YYYY/MM/DD")})})))}}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-info btn-block text-bold mt-1",onClick:function(e){u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{date:""})}))},children:[Object(yn.jsx)("i",{className:"fas fa-trash mr-1"}),"Borrar fecha"]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yn.jsxs)("select",{className:"form-control",id:"order",value:null===(n=u.options)||void 0===n?void 0:n.order,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{order:t.value})}))},children:[Object(yn.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yn.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"itemsPage",children:"Numero de examenes"}),Object(yn.jsxs)("select",{className:"form-control",id:"itemsPage",value:null===(c=u.options)||void 0===c?void 0:c.itemsPage,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{itemsPage:t.value})}))},children:[Object(yn.jsx)("option",{value:"25",children:"ver 25"}),Object(yn.jsx)("option",{value:"50",children:"ver 50"}),Object(yn.jsx)("option",{value:"75",children:"ver 75"}),Object(yn.jsx)("option",{value:"100",children:"ver 100"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"status",children:"Estado"}),Object(yn.jsxs)("select",{className:"form-control",id:"status",value:null===(r=u.options)||void 0===r?void 0:r.status,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{status:t.value})}))},children:[Object(yn.jsx)("option",{value:"",children:"-- Todos --"}),Object(yn.jsx)("option",{value:"1",children:"Solo terminados"}),Object(yn.jsx)("option",{value:"0",children:"En proceso"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"status",children:"Sucursales"}),Object(yn.jsxs)("select",{className:"form-control text-capitalize",id:"branch",value:null===(i=u.options)||void 0===i?void 0:i.branch,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{branch:t.value})}))},children:[Object(yn.jsx)("option",{value:"all",children:"-- Todas --"}),null===j||void 0===j?void 0:j.map((function(e){var t;return Object(yn.jsx)("option",{value:e.id,children:null===(t=e.data)||void 0===t?void 0:t.name},e.id)}))]})]})]})]})}function jr(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return a=Nn("exams",null,t),e.next=5,gn(a,"GET").then((function(e){return e})).catch((function(e){return console.error("[Orus System] Catch when get contacts list in hook:",e.message),null}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nn("exams",t),e.next=5,gn(a,"GET").then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when get contact in hook:",e.message),{}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nn("exams",t),e.next=5,gn(a,"DELETE").then((function(){return!0})).catch((function(e){return console.error("[Orus System] Catch when delete contact in hook:",e.message),!1}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,s,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a=t.id,delete t.id,!a){e.next=11;break}return s=Nn("exams",a),e.next=8,gn(s,"PUT",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when update exam in hook"),e}));case 8:case 14:return e.abrupt("return",e.sent);case 11:return n=Nn("exams"),e.next=14,gn(n,"POST",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when create exam in hook"),e}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getExams:e,getExam:t,deleteExam:a,saveExam:s}}function br(){var e,t,a,s,n=ir(),c=jr(),r=Object(On.f)(),i=Object(xn.useState)({list:[],meta:{},loading:!1,examSelected:{}}),l=Object(hn.a)(i,2),d=l[0],u=l[1],j=function(){u(Object(o.a)(Object(o.a)({},d),{},{loading:!0})),c.getExams(n.options).then((function(e){e.data&&u(Object(o.a)(Object(o.a)({},d),{},{list:e.data,meta:e.meta,loading:!1,examSelected:{}}))}))},b=function(e){var t,a;if(null!==e&&void 0!==e&&e.id)c.saveExam({id:e.id,status:!e.status,contact_id:null===(a=e.customer)||void 0===a?void 0:a.id}).then((function(e){if(e.id)j();else if(e.hasOwnProperty("errors")){var t=Object.values(e.errors);console.log("[Orus System] Message of server:",e.errors),window.Swal.fire({title:"Consultorio",text:t[0],icon:"error",showConfirmButton:!1,timer:3e3})}}));else if(null!==(t=d.examSelected)&&void 0!==t&&t.id){var s;c.saveExam({id:d.examSelected.id,status:!d.examSelected.status,contact_id:null===(s=d.examSelected.customer)||void 0===s?void 0:s.id}).then((function(e){if(e.id)j();else if(e.hasOwnProperty("errors")){var t=Object.values(e.errors);console.log("[Orus System] Message of server:",e.errors),window.Swal.fire({title:"Consultorio",text:t[0],icon:"error",showConfirmButton:!1,timer:3e3})}}))}else console.error("[Orus System] When get id of exam:",e,d.examSelected),window.Swal.fire({title:"Consultorio",text:"Lo sentimos no existe un examen seleccionado",icon:"warning",showConfirmButton:!1,timer:3e3})};return Object(xn.useEffect)((function(){j()}),[n.options]),Object(yn.jsx)(Dn,{title:"Lista de examenes",icon:"notes-medical",color:"info",loading:d.loading,meta:d.meta,itemSelected:null===(e=d.examSelected)||void 0===e?void 0:e.id,handlePagination:function(e){e&&n.set(Object(o.a)(Object(o.a)({},n),{},{options:Object(o.a)(Object(o.a)({},n.options),{},{page:e})}))},handleSearch:function(e){e?n.set(Object(o.a)(Object(o.a)({},n),{},{options:Object(o.a)(Object(o.a)({},n.options),{},{search:e,page:1})})):n.options.search&&n.set(Object(o.a)(Object(o.a)({},n),{},{options:Object(o.a)(Object(o.a)({},n.options),{},{search:"",page:1})}))},handleDeleteItem:function(){var e;null!==(e=d.examSelected)&&void 0!==e&&e.id?window.Swal.fire({title:"Consultorio",text:"\xbfDesea eliminar el examen?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss?u(Object(o.a)(Object(o.a)({},d),{},{examSelected:{}})):c.deleteExam(d.examSelected.id).then((function(){j()}))})):window.Swal.fire({title:"Error",text:"Lo sentimos no existe un examen seleccionado",icon:"error"})},handleEditItem:function(){var e;null!==(e=d.examSelected)&&void 0!==e&&e.id?r.push("consultorio/".concat(d.examSelected.id)):window.Swal.fire({title:"Error",text:"Lo sentimos no existe un examen seleccionado",icon:"error"})},handleSync:j,handleStatus:b,children:Object(yn.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{}),Object(yn.jsx)("th",{children:"Nombre"}),Object(yn.jsx)("th",{children:"Estado"}),Object(yn.jsx)("th",{children:"ESF"}),Object(yn.jsx)("th",{children:"CIL"}),Object(yn.jsx)("th",{children:"EJE"}),Object(yn.jsx)("th",{children:"ADC"}),Object(yn.jsx)("th",{children:"MED"}),Object(yn.jsx)("th",{children:"DP"}),Object(yn.jsx)("th",{children:"ALT"}),Object(yn.jsx)("th",{children:"created_at"===(null===(t=n.options)||void 0===t?void 0:t.orderby)?"Registrado":"Actualizado"})]})}),Object(yn.jsx)("tbody",{children:null!==(a=d.list)&&void 0!==a&&a.length?Object(yn.jsx)(yn.Fragment,{children:null===(s=d.list)||void 0===s?void 0:s.map((function(e){var t,a,s,c,i;return Object(yn.jsxs)("tr",{children:[Object(yn.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(yn.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",id:"exam_"+e.id,checked:(null===(t=d.examSelected)||void 0===t?void 0:t.id)===e.id,disabled:e.estado||(null===(a=e.orders)||void 0===a?void 0:a.length),onChange:function(t){var a=t.target;u(Object(o.a)(Object(o.a)({},d),{},{examSelected:a.checked?e:""}))}}),Object(yn.jsx)("label",{htmlFor:"exam_"+e.id,className:"sr-only"})]}),Object(yn.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",children:Object(yn.jsx)("a",{href:"#edit",onClick:function(t){t.preventDefault(),r.push("consultorio/".concat(e.id))},children:Object(yn.jsxs)("span",{className:e.status||null!==(s=e.orders)&&void 0!==s&&s.length?"text-muted":"text-dark text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-user text-sm mr-2"}),null===(c=e.customer)||void 0===c?void 0:c.name.toLowerCase()]})})}),Object(yn.jsx)("td",{className:"text-center",style:{cursor:"pointer"},onClick:function(){return b(e)},children:e.status?Object(yn.jsx)("i",{className:"fas fa-clipboard-check text-muted",title:"Terminado"}):Object(yn.jsx)("i",{className:"fas fa-clipboard text-info",title:"En proceso"})}),Object(yn.jsxs)("td",{children:[e.esferaod,"/",e.esferaoi]}),Object(yn.jsxs)("td",{children:[e.cilindrod,"/",e.cilindroi]}),Object(yn.jsxs)("td",{children:[e.ejeod,"/",e.ejeoi]}),Object(yn.jsxs)("td",{children:[e.adiciond,"/",e.adicioni]}),Object(yn.jsxs)("td",{children:[e.adicion_media_od,"/",e.adicion_media_oi]}),Object(yn.jsxs)("td",{children:[e.dpod,"/",e.dpoi]}),Object(yn.jsxs)("td",{children:[e.alturaod,"/",e.alturaoi]}),Object(yn.jsx)("td",{children:In()("created_at"===(null===(i=n.options)||void 0===i?void 0:i.orderby)?e.created_at:e.updated_at).fromNow()})]},e.id)}))}):Object(yn.jsx)("tr",{children:Object(yn.jsx)("th",{className:"text-center text-muted",colSpan:"12",children:"No hay examenes registrados"})})})]})})}function mr(e){var t,a,s,n,c,r,i=function(t){var a=t.target,s=a.name,n=a.type,c=a.checked,r=a.value,i="checkbox"===n?c:r.toLowerCase();e.handleGetData(s,i)};return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"pc",type:"checkbox",className:"custom-control-input",id:"pc",checked:e.pc,onChange:i}),Object(yn.jsxs)("label",{className:"custom-control-label",htmlFor:"pc",children:[Object(yn.jsx)("i",{className:"fas fa-desktop"})," PC"]})]}),Object(yn.jsx)("input",{type:"text",name:"pc_time",className:"form-control input-xs",defaultValue:null!==(t=e.pc_time)&&void 0!==t?t:"",onChange:i,readOnly:e.pc?"":"readonly"})]}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"tablet",type:"checkbox",className:"custom-control-input",id:"tablet",checked:e.tablet,onChange:i}),Object(yn.jsxs)("label",{className:"custom-control-label",htmlFor:"tablet",children:[Object(yn.jsx)("i",{className:"fas fa-tablet-alt"})," Tablet"]})]}),Object(yn.jsx)("input",{type:"text",name:"tablet_time",className:"form-control input-xs",defaultValue:null!==(a=e.tablet_time)&&void 0!==a?a:"",onChange:i,readOnly:e.tablet?"":"readonly"})]}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"movil",type:"checkbox",className:"custom-control-input",id:"movil",checked:e.movil,onChange:i}),Object(yn.jsxs)("label",{className:"custom-control-label",htmlFor:"movil",children:[Object(yn.jsx)("i",{className:"fas fa-mobile-alt"})," Telefono"]})]}),Object(yn.jsx)("input",{type:"text",name:"movil_time",className:"form-control input-xs",defaultValue:null!==(s=e.movil_time)&&void 0!==s?s:"",onChange:i,readOnly:e.movil?"":"readonly"})]}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"lap",type:"checkbox",className:"custom-control-input",id:"lap",checked:e.lap,onChange:i}),Object(yn.jsxs)("label",{className:"custom-control-label",htmlFor:"lap",children:[Object(yn.jsx)("i",{className:"fas fa-laptop"})," Laptop"]})]}),Object(yn.jsx)("input",{type:"text",name:"lap_time",className:"form-control input-xs",defaultValue:null!==(n=e.lap_time)&&void 0!==n?n:"",onChange:i,readOnly:e.lap?"":"readonly"})]})]}),Object(yn.jsxs)("div",{className:"row mt-1",children:[Object(yn.jsx)("div",{className:"col-md-6",children:Object(yn.jsxs)("ul",{className:"list-group",children:[Object(yn.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"frontal",type:"checkbox",className:"custom-control-input",id:"frontal",checked:e.frontal,onChange:i}),Object(yn.jsx)("label",{className:"custom-control-label",htmlFor:"frontal",children:"Frontal"})]})}),Object(yn.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"occipital",type:"checkbox",className:"custom-control-input",id:"occipital",checked:e.occipital,onChange:i}),Object(yn.jsx)("label",{className:"custom-control-label",htmlFor:"occipital",children:"Occipital"})]})}),Object(yn.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"generality",type:"checkbox",className:"custom-control-input",id:"generality",checked:e.generality,onChange:i}),Object(yn.jsx)("label",{className:"custom-control-label",htmlFor:"generality",children:"General"})]})}),Object(yn.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"cefalea",type:"checkbox",className:"custom-control-input",id:"cefalea",checked:e.cefalea,onChange:i}),Object(yn.jsx)("label",{className:"custom-control-label",htmlFor:"cefalea",children:"Cefalea"})]})})]})}),Object(yn.jsx)("div",{className:"col-md-6",children:Object(yn.jsxs)("ul",{className:"list-group",children:[Object(yn.jsxs)("li",{className:"list-group-item",children:["Temporal",Object(yn.jsx)("br",{}),Object(yn.jsxs)("div",{className:"row mt-2",children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"temporaod",type:"checkbox",className:"custom-control-input",id:"temporaod",checked:e.temporaod,onChange:i}),Object(yn.jsxs)("label",{className:"custom-control-label",htmlFor:"temporaod",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," Derecho"]})]})}),Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"temporaoi",type:"checkbox",className:"custom-control-input",id:"temporaoi",checked:e.temporaoi,onChange:i}),Object(yn.jsxs)("label",{className:"custom-control-label",htmlFor:"temporaoi",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," Izquierdo"]})]})})]})]}),Object(yn.jsxs)("li",{className:"list-group-item",children:["Frecuencia",Object(yn.jsx)("span",{className:"badge badge-pill",children:Object(yn.jsx)("input",{type:"text",name:"c_frecuencia",maxLength:"60",className:"form-control input-xs",defaultValue:null!==(c=e.c_frecuencia)&&void 0!==c?c:"",onChange:i})})]}),Object(yn.jsxs)("li",{className:"list-group-item",children:[Object(yn.jsx)("label",{htmlFor:"c_intensidad",children:"Intensidad"}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-11",children:Object(yn.jsx)("input",{type:"range",name:"c_intensidad",className:"custom-range custom-range-info",id:"c_intensidad",min:"0",max:"4",defaultValue:null!==(r=e.c_intensidad)&&void 0!==r?r:"",onChange:i})}),Object(yn.jsx)("div",{className:"col-1",children:Object(yn.jsx)("h6",{children:e.c_intensidad})})]})]})]})})]})]})}Object(Pc.registerLocale)("es",zc.a);var hr=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(){var e;Object(Cn.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(_n.a)(a,[{key:"render",value:function(){var e,t,a,s;return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col-12",children:[Object(yn.jsx)("label",{children:"Interrogatorio inicial"}),Object(yn.jsx)("textarea",{name:"interrogatorio",className:"form-control",defaultValue:null!==(e=this.props.interrogatorio)&&void 0!==e?e:"",onChange:this.catchInputs})]})}),Object(yn.jsx)("div",{className:"row mt-2",children:Object(yn.jsxs)("div",{className:"col-12",children:[Object(yn.jsx)("label",{children:"Cirugias oculares"}),Object(yn.jsx)("textarea",{name:"coa",className:"form-control",defaultValue:null!==(t=this.props.coa)&&void 0!==t?t:"",onChange:this.catchInputs})]})}),Object(yn.jsx)("div",{className:"row mt-2",children:Object(yn.jsxs)("div",{className:"col-12",children:[Object(yn.jsx)("label",{children:"Antecedentes oculares patologicas personales"}),Object(yn.jsx)("textarea",{name:"aopp",className:"form-control",rows:"2",defaultValue:null!==(a=this.props.aopp)&&void 0!==a?a:"",onChange:this.catchInputs})]})}),Object(yn.jsx)("div",{className:"row mt-2",children:Object(yn.jsxs)("div",{className:"col-12",children:[Object(yn.jsx)("label",{children:"Antecedentes oculares patologicas familiares"}),Object(yn.jsx)("textarea",{name:"aopf",className:"form-control",rows:"2",defaultValue:null!==(s=this.props.aopf)&&void 0!==s?s:"",onChange:this.catchInputs})]})})]})}}]),a}(xn.Component),xr=function(e){var t,a,s,n,c=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.onChangeInput(a,s)};return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-6",children:"Keratometria"}),Object(yn.jsx)("div",{className:"col-6",children:"Retinoscopia"})]}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsx)("i",{className:"fas fa-eye"})," ",Object(yn.jsx)("label",{children:"Derecho"}),Object(yn.jsx)("input",{type:"text",name:"keratometriaod",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(t=e.keratometriaod)&&void 0!==t?t:"",onChange:c})]}),Object(yn.jsxs)("div",{className:"col-3",children:[Object(yn.jsx)("i",{className:"fas fa-eye"})," ",Object(yn.jsx)("label",{children:"Izquierdo"}),Object(yn.jsx)("input",{type:"text",name:"keratometriaoi",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(a=e.keratometriaoi)&&void 0!==a?a:"",onChange:c})]}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Derecho"}),Object(yn.jsx)("input",{type:"text",name:"rsod",maxLength:"16",className:"form-control",defaultValue:null!==(s=e.rsod)&&void 0!==s?s:"",onChange:c})]}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Izquierdo"}),Object(yn.jsx)("input",{type:"text",name:"rsoi",maxLength:"16",className:"form-control",defaultValue:null!==(n=e.rsoi)&&void 0!==n?n:"",onChange:c})]})]})]})},pr=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(){var e;Object(Cn.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(_n.a)(a,[{key:"render",value:function(){var e,t,a,s,n,c;return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-md-8",children:Object(yn.jsx)("label",{children:"Diab\xe9tico"})}),Object(yn.jsx)("div",{className:"col-md-4",children:Object(yn.jsx)("label",{children:"Fotocoagulaci\xf3n laser"})})]}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-3",children:"Fecha"}),Object(yn.jsx)("div",{className:"col-2",children:"Rango de glucosa"}),Object(yn.jsx)("div",{className:"col-3",children:"Ultimo examen"}),Object(yn.jsx)("div",{className:"col-2",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"d_fclod",type:"checkbox",className:"custom-control-input",id:"d_fclod",checked:this.props.d_fclod,onChange:this.catchInputs}),Object(yn.jsxs)("label",{className:"custom-control-label",htmlFor:"d_fclod",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," Derecho"]})]})}),Object(yn.jsx)("div",{className:"col-2",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"d_fcloi",type:"checkbox",className:"custom-control-input",id:"d_fcloi",checked:this.props.d_fcloi,onChange:this.catchInputs}),Object(yn.jsxs)("label",{className:"custom-control-label",htmlFor:"d_fcloi",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," Izquierdo"]})]})})]}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-md-3",children:Object(yn.jsx)("input",{type:"date",name:"d_time",className:"form-control",defaultValue:null!==(e=this.props.d_time)&&void 0!==e?e:"",onChange:this.catchInputs})}),Object(yn.jsx)("div",{className:"col-md-2",children:Object(yn.jsx)("input",{type:"text",name:"d_media",className:"form-control",defaultValue:null!==(t=this.props.d_media)&&void 0!==t?t:"",onChange:this.catchInputs})}),Object(yn.jsx)("div",{className:"col-md-3",children:Object(yn.jsx)("input",{type:"date",name:"d_test",className:"form-control",defaultValue:null!==(a=this.props.d_test)&&void 0!==a?a:"",onChange:this.catchInputs})}),Object(yn.jsx)("div",{className:"col-md-2",children:Object(yn.jsx)("input",{type:"text",name:"d_fclod_time",className:"form-control",defaultValue:null!==(s=this.props.d_fclod_time)&&void 0!==s?s:"",onChange:this.catchInputs,readOnly:this.props.d_fclod?"":"readonly"})}),Object(yn.jsx)("div",{className:"col-md-2",children:Object(yn.jsx)("input",{type:"text",name:"d_fcloi_time",className:"form-control",defaultValue:null!==(n=this.props.d_fcloi_time)&&void 0!==n?n:"",onChange:this.catchInputs,readOnly:this.props.d_fcloi?"":"readonly"})})]}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col-12",children:[Object(yn.jsx)("label",{children:"Oftalmoscopia"}),Object(yn.jsx)("textarea",{name:"oftalmoscopia",className:"form-control",defaultValue:null!==(c=this.props.oftalmoscopia)&&void 0!==c?c:"",onChange:this.catchInputs})]})})]})}}]),a}(xn.Component),Or=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(){var e;Object(Cn.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(_n.a)(a,[{key:"render",value:function(){var e,t,a,s,n,c,r,i,o;return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col-md-6",children:"Capacidad visual"})}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Derecho"}),Object(yn.jsx)("input",{type:"text",name:"cvod",maxLength:"12",className:"form-control",defaultValue:null!==(e=this.props.cvod)&&void 0!==e?e:"",onChange:this.catchInputs})]}),Object(yn.jsxs)("div",{className:"col-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Izquierdo"}),Object(yn.jsx)("input",{type:"text",name:"cvoi",maxLength:"12",className:"form-control",defaultValue:null!==(t=this.props.cvoi)&&void 0!==t?t:"",onChange:this.catchInputs})]})]}),Object(yn.jsxs)("div",{className:"row mt-2",children:[Object(yn.jsx)("div",{className:"col-md-6",children:"Agudeza visual (Sin lentes)"}),Object(yn.jsx)("div",{className:"col-md-6",children:"Agudeza visual (con la graduaci\xf3n anterior)"})]}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Derecho"}),Object(yn.jsx)("input",{type:"text",name:"avslod",maxLength:"12",className:"form-control",defaultValue:null!==(a=this.props.avslod)&&void 0!==a?a:"",onChange:this.catchInputs})]}),Object(yn.jsxs)("div",{className:"col-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Izquierdo"}),Object(yn.jsx)("input",{type:"text",name:"avsloi",maxLength:"12",className:"form-control",defaultValue:null!==(s=this.props.avsloi)&&void 0!==s?s:"",onChange:this.catchInputs})]}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Derecho"}),Object(yn.jsx)("input",{type:"text",name:"avcgaod",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(n=this.props.avcgaod)&&void 0!==n?n:"",onChange:this.catchInputs})]}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Izquierdo"}),Object(yn.jsx)("input",{type:"text",name:"avcgaoi",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(c=this.props.avcgaoi)&&void 0!==c?c:"",onChange:this.catchInputs})]})]}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col-md-6",children:"Agudeza visual final"})}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Derecho"}),Object(yn.jsx)("br",{}),Object(yn.jsx)("input",{type:"text",name:"avfod",maxLength:"12",className:"form-control",defaultValue:null!==(r=this.props.avfod)&&void 0!==r?r:"",onChange:this.catchInputs})]}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Izquierdo"}),Object(yn.jsx)("br",{}),Object(yn.jsx)("input",{type:"text",name:"avfoi",maxLength:"12",className:"form-control",defaultValue:null!==(i=this.props.avfoi)&&void 0!==i?i:"",onChange:this.catchInputs})]}),Object(yn.jsxs)("div",{className:"col-md-4",children:[Object(yn.jsx)("i",{className:"fa fa-eye"}),Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Ambos"}),Object(yn.jsx)("br",{}),Object(yn.jsx)("input",{type:"text",name:"avf2o",maxLength:"25",className:"form-control",defaultValue:null!==(o=this.props.avf2o)&&void 0!==o?o:"",onChange:this.catchInputs})]})]})]})}}]),a}(xn.Component),fr=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(){var e;Object(Cn.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(_n.a)(a,[{key:"render",value:function(){var e,t,a,s;return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-md-6"}),Object(yn.jsx)("div",{className:"col-md-6",children:"Tensi\xf3n ocular"})]}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-md-3",children:["Diagnostico",Object(yn.jsxs)("select",{name:"diagnostico",className:"form-control",defaultValue:null!==(e=this.props.diagnostico)&&void 0!==e?e:"",onChange:this.catchInputs,children:[Object(yn.jsx)("option",{value:"Emetrope",children:"Em\xe9trope"}),Object(yn.jsx)("option",{value:"hipermetropia",children:"Hipermetrop\xeda"}),Object(yn.jsx)("option",{value:"hipermetropia-astigmatismo",children:"Hipermetrop\xeda y astigmatismo"}),Object(yn.jsx)("option",{value:"hipermetropia-miopia",children:"Hipermetrop\xeda y miop\xeda"}),Object(yn.jsx)("option",{value:"astigmatismo-regla",children:"Astigmatismo con la regla"}),Object(yn.jsx)("option",{value:"astigmatismo-contra-regla",children:"Astigmatismo contra la regla"}),Object(yn.jsx)("option",{value:"astigmatismo-oblicuo",children:"Astigmatismo oblicuo"}),Object(yn.jsx)("option",{value:"astigmatismo-miopia",children:"Astigmatismo/m\xedopico"}),Object(yn.jsx)("option",{value:"miopia",children:"Miop\xeda"})]})]}),Object(yn.jsx)("div",{className:"col-md-3",children:Object(yn.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yn.jsx)("input",{name:"presbicie",type:"checkbox",className:"custom-control-input",id:"presbicie",checked:this.props.presbicie,onChange:this.catchInputs}),Object(yn.jsx)("label",{className:"custom-control-label",htmlFor:"presbicie",children:"Presbicie"})]})}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Derecho"}),Object(yn.jsx)("input",{type:"number",name:"piod",min:"0",max:"40",step:"1",className:"form-control",defaultValue:null!==(t=this.props.piod)&&void 0!==t?t:"",onChange:this.catchInputs})]}),Object(yn.jsxs)("div",{className:"col-md-3",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Izquierdo"}),Object(yn.jsx)("input",{type:"number",name:"pioi",min:"0",max:"40",step:"1",className:"form-control",defaultValue:null!==(a=this.props.pioi)&&void 0!==a?a:"",onChange:this.catchInputs})]})]}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col-12",children:[Object(yn.jsx)("label",{children:"Tratamiento oftalmico"}),Object(yn.jsx)("textarea",{name:"txoftalmico",className:"form-control",defaultValue:null!==(s=this.props.txoftalmico)&&void 0!==s?s:"",onChange:this.catchInputs})]})})]})}}]),a}(xn.Component),vr=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(){var e;Object(Cn.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).catchInputs=function(t){var a=t.target,s=a.name,n=a.type,c=a.value,r=a.checked,i=e.props.onChangeInput,o=c;"checkbox"===n&&(o=r),"text"===n&&(o=c.toLowerCase()),"number"===n&&("ejeod"===s||"ejeoi"===s?o=parseInt(c):(o=(o=parseFloat(c)).toFixed(2),o=parseFloat(o))),i&&i(s,o)},e}return Object(_n.a)(a,[{key:"render",value:function(){var e=this.props,t=e.readOnly,a=void 0!==t&&t,s=e.cilindrod,n=e.cilindroi,c=e.esferaod,r=e.esferaoi,i=e.ejeod,o=e.ejeoi,l=e.adiciond,d=e.adicioni,u=e.adicion_media_od,j=e.adicion_media_oi,b=e.dpod,m=e.dpoi,h=e.alturaod,x=e.alturaoi,p=e.lcmarca,O=e.lcgod,f=e.lcgoi,v=e.showContactGlasses,g=void 0===v||v;return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("table",{className:"table",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"#"}),Object(yn.jsx)("th",{children:"Esfera"}),Object(yn.jsx)("th",{children:"Cilindro"}),Object(yn.jsx)("th",{children:"Eje"}),Object(yn.jsx)("th",{children:"Adici\xf3n"}),Object(yn.jsx)("th",{children:"Adici\xf3n media"}),Object(yn.jsx)("th",{children:"D/P"}),Object(yn.jsx)("th",{children:"Altura"})]})}),Object(yn.jsxs)("tbody",{children:[Object(yn.jsxs)("tr",{children:[Object(yn.jsxs)("td",{children:[Object(yn.jsx)("i",{className:"fa fa-eye mr-1",title:"Ojo derecho"}),Object(yn.jsx)("span",{className:"text-sm d-block",children:"Derecho"})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"esferaod",min:"-20",max:"20",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==c&&void 0!==c?c:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==c&&void 0!==c?c:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"cilindrod",min:"-20",max:"0",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==s&&void 0!==s?s:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==s&&void 0!==s?s:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"ejeod",min:"0",max:"180",step:"1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,placeholder:"\xb0",defaultValue:i?parseInt(i):"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==i&&void 0!==i?i:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"adiciond",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==l&&void 0!==l?l:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==l&&void 0!==l?l:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"adicion_media_od",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==u&&void 0!==u?u:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==u&&void 0!==u?u:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"dpod",min:"40",max:"80",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==b&&void 0!==b?b:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==b&&void 0!==b?b:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"alturaod",min:"0",max:"35",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==h&&void 0!==h?h:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==h&&void 0!==h?h:""})]})]}),Object(yn.jsxs)("tr",{children:[Object(yn.jsxs)("td",{children:[Object(yn.jsx)("i",{className:"fa fa-eye ml-1",title:"Ojo izquierdo"}),Object(yn.jsx)("span",{className:"text-sm d-block",children:"Izquierdo"})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"esferaoi",min:"-20",max:"20",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==r&&void 0!==r?r:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==r&&void 0!==r?r:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"cilindroi",min:"-20",max:"0",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==n&&void 0!==n?n:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==n&&void 0!==n?n:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"ejeoi",min:"0",max:"180",step:"1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,placeholder:"\xb0",defaultValue:o?parseInt(o):"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==o&&void 0!==o?o:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"adicioni",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==d&&void 0!==d?d:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==d&&void 0!==d?d:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"adicion_media_oi",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==j&&void 0!==j?j:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==j&&void 0!==j?j:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"dpoi",min:"40",max:"80",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==m&&void 0!==m?m:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==m&&void 0!==m?m:""})]}),Object(yn.jsxs)("td",{className:"text-right",children:[Object(yn.jsx)("input",{type:"number",name:"alturaoi",min:"0",max:"35",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==x&&void 0!==x?x:"",onChange:this.catchInputs}),Object(yn.jsx)("h5",{className:"d-none d-print-block",children:null!==x&&void 0!==x?x:""})]})]})]})]}),g&&Object(yn.jsx)("ul",{className:"list-group d-print-none mt-4",children:Object(yn.jsxs)("li",{className:"list-group-item",children:[Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col-md-12",children:["Lente de contacto",Object(yn.jsx)("input",{type:"text",name:"lcmarca",maxLength:"70",className:a?"form-control disabled":"form-control",disabled:!!a,defaultValue:null!==p&&void 0!==p?p:"",onChange:this.catchInputs})]})}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Derecho"}),Object(yn.jsx)("input",{type:"text",name:"lcgod",maxLength:"30",className:a?"form-control disabled":"form-control",disabled:!!a,defaultValue:O||"",onChange:this.catchInputs})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("i",{className:"fa fa-eye"})," ",Object(yn.jsx)("label",{children:"Izquierdo"}),Object(yn.jsx)("input",{type:"text",name:"lcgoi",maxLength:"30",className:a?"form-control disabled":"form-control",disabled:!!a,defaultValue:f||"",onChange:this.catchInputs})]})]})]})})]})}}]),a}(xn.Component),gr=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(){var e;Object(Cn.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(_n.a)(a,[{key:"render",value:function(){var e;return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("label",{htmlFor:"observaciones",children:"Observaciones"}),Object(yn.jsx)("textarea",{name:"observaciones",id:"observaciones",className:"form-control",defaultValue:null!==(e=this.props.observaciones)&&void 0!==e?e:"",onChange:this.catchInputs})]})}}]),a}(xn.Component);var Nr=function(e){var t="";return e.parent?e.parent.parent?(t=e.parent.parent.meta.code,t+=e.parent.meta.code,t+=e.meta.code):(t=e.parent.meta.code,t+=e.meta.code):t=e.meta.code,t},yr={handleTypeInput:function(e){return"pc"===e||"tablet"===e||"movil"===e||"lap"===e||"pc_time"===e||"tablet_time"===e||"movil_time"===e||"lap_time"===e||"frontal"===e||"occipital"===e||"generality"===e||"cefalea"===e||"temporaod"===e||"temporaoi"===e||"c_frecuencia"===e||"c_intensidad"===e?"generales":"interrogatorio"===e||"coa"===e||"aopp"===e||"aopf"===e?"interrogatorios":"keratometriaod"===e||"keratometriaoi"===e||"rsod"===e||"rsoi"===e?"keraRet":"d_time"===e||"d_media"===e||"d_test"===e||"d_fclod"===e||"d_fclod_time"===e||"d_fcloi"===e||"d_fcloi_time"===e?"diabetes":"cvod"===e||"cvoi"===e||"avslod"===e||"avsloi"===e||"avcgaod"===e||"avcgaoi"===e||"avfod"===e||"avfoi"===e||"avf2o"===e?"agudeza":"diagnostico"===e||"presbicie"===e||"piod"===e||"pioi"===e||"txoftalmico"===e?"diagnostico":"esferaod"===e||"esferaoi"===e||"cilindrod"===e||"cilindroi"===e||"ejeod"===e||"ejeoi"===e||"adiciond"===e||"adicioni"===e||"adicion_media_od"===e||"adicion_media_oi"===e||"dpod"===e||"dpoi"===e||"alturaod"===e||"alturaoi"===e||"lcmarca"===e||"lcgod"===e||"lcgoi"===e?"graduacion":"observaciones"===e?"observaciones":null},handleCodeName:Nr,getCodeGrad:function(e,t,a,s,n){var c=Object.keys(e).length?Nr(e):null;if(!c)return{};var r="+000000",i="+000000";return(s||t)&&(r=t>0?"+":"",r+=t.toFixed(2).toString().replace(".","")+s.toFixed(2).toString().replace("-","").replace(".","")),(n||a)&&(i=a>0?"+":"",i+=a.toFixed(2).toString().replace(".","")+n.toFixed(2).toString().replace("-","").replace(".","")),{code:c,od:r,oi:i}},handleSaveExam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,s=e.examenes.filter((function(e){return 0===In()(e.created_at).diff(In()(),"days")||!e.estado}));if(s.length&&!t)return window.Swal.fire({title:"Examenes",text:"Existe un examen activo o del dia",icon:"error"}),console.error("[OrusSystem] Examenes activos:",s.length),!1;window.Swal.fire({title:"Almacenamiento",text:t?"\xbfEsta seguro de actualizar este examen?":"\xbfEsta seguro de crear un nuevo examen?",icon:"question",showCancelButton:!0,confirmButtonText:t?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){!t.dismiss&&a&&a({id:0,data:{edad:e.edad,contact_id:e.id}})}))}},wr=yr;function Sr(e){var t=Object(xn.useState)({category_list:[],category_list_2:[],category_list_3:[],category_id_1:0,category_id_2:0,category_id_3:0,category:{},codesItems:{}}),a=Object(hn.a)(t,2),s=a[0],n=a[1],c=function(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return a=Nn("categories",null,t),e.next=5,gn(a,"GET").then((function(e){return e})).catch((function(e){return console.error("[Orus System] Catch when get categories list in hook:",e.message),null}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nn("categories",t),e.next=5,gn(a,"GET").then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when get category in hook:",e.message),{}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nn("categories",t),e.next=5,gn(a,"DELETE").then((function(){return!0})).catch((function(e){return console.error("[Orus System] Catch when delete category in hook:",e.message),!1}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,s,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a=t.id,delete t.id,!a){e.next=11;break}return s=Nn("categories",a),e.next=8,gn(s,"PUT",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when save category in hook:",e.message),null}));case 8:case 14:return e.abrupt("return",e.sent);case 11:return n=Nn("categories"),e.next=14,gn(n,"POST",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when save category in hook:",e.message),null}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getCategories:e,getCategory:t,deleteCategory:a,saveCategory:s}}(),r=e.category_id,i=e.title,l=e.esferaod,d=e.esferaoi,u=e.cilindrod,j=e.cilindroi,b=e.handleCodesItems,m=s.codesItems,h=s.category_id_1,x=s.category_id_2,p=s.category_id_3,O=s.category_list_2,f=s.category_list_3,v=s.category_list,g=function(t){var a=t.target,c=a.name,r=a.value,i=e.onChangeInput;switch(c){case"category_id_1":for(var l in v)if(v[l].id===parseInt(r)){n(Object(o.a)(Object(o.a)({},s),{},{category_id_1:parseInt(r),category_id_3:0,category_list_2:v[l].sons,category_list_3:[]}));break}break;case"category_id_2":r&&s.category_list_2.map((function(e){return e.id===parseInt(r)&&n(Object(o.a)(Object(o.a)({},s),{},{category_id_2:parseInt(r),category_list_3:e.sons})),null}));break;case"category_id_3":i(parseInt(r));break;default:n(Object(o.a)(Object(o.a)({},s),{},Object(N.a)({},c,parseInt(r))))}},y=function(){var e=Object(me.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&c.getCategory(t).then((function(e){e.id?n(Object(o.a)(Object(o.a)({},s),{},{category:e})):console.error("[DEBUG] NEW ERROR",e)})),e.abrupt("return",{});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(me.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.getCategories({categoryid:"raiz",search:"lentes",order:"id"}).then((function(e){var t=e.data;n(Object(o.a)(Object(o.a)({},s),{},{category_list:t[0].sons}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(xn.useEffect)((function(){r?y(r):w()}),[r]),Object(xn.useEffect)((function(){if(s.category.id){var e=wr.getCodeGrad(s.category,l,d,u,j);n(Object(o.a)(Object(o.a)({},s),{},{codesItems:e}))}}),[s.category]),Object(yn.jsx)("div",{className:"card border border-info rounded d-print-none",children:Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("h3",{className:"card-title text-success m-2",children:i}),!r&&Object(yn.jsxs)(yn.Fragment,{children:[v.length?Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:"Tipo"})}),Object(yn.jsxs)("select",{name:"category_id_1",className:"custom-select",defaultValue:null!==h&&void 0!==h?h:"",onChange:g,children:[Object(yn.jsx)("option",{value:"0",children:"-- Seleccione el tipo --"}),v.map((function(e){return e.meta&&e.meta.rangoInf<=l&&l<=e.meta.rangoSup&&e.meta.rangoInf<=d&&d<=e.meta.rangoSup&&e.meta.cil<=u&&e.meta.cil<=j?Object(yn.jsx)("option",{value:e.id,children:e.name},e.id):null}))]})]}):null,h&&O.length?Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:"Material"})}),Object(yn.jsxs)("select",{name:"category_id_2",className:"custom-select",defaultValue:null!==x&&void 0!==x?x:"",onChange:g,children:[Object(yn.jsx)("option",{value:"0",children:"-- Seleccione el material --"}),O.map((function(e){var t;return!!(e.meta&&e.meta.rangoInf<=l&&l<=e.meta.rangoSup&&e.meta.rangoInf<=d&&d<=e.meta.rangoSup)&&Object(yn.jsx)("option",{value:null!==(t=e.id)&&void 0!==t?t:"",children:e.name},e.id)}))]})]}):null,h&&x&&f.length?Object(yn.jsxs)("div",{className:"input-group mb-3",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsx)("span",{className:"input-group-text",children:"Tratamiento"})}),Object(yn.jsxs)("select",{name:"category_id_3",className:"custom-select",defaultValue:null!==p&&void 0!==p?p:"",onChange:g,children:[Object(yn.jsx)("option",{value:"0",children:"-- Seleccione el tratamiento --"}),f.map((function(e){var t;return Object(yn.jsx)("option",{value:null!==(t=e.id)&&void 0!==t?t:"",children:e.name},e.id)}))]})]}):null]}),Object.values(m).length?Object(yn.jsxs)(yn.Fragment,{children:[m.code+m.od===m.code+m.oi?Object(yn.jsxs)("p",{className:"card-text",children:[Object(yn.jsx)("label",{children:"Lente"}),": ",m.code+m.od]}):Object(yn.jsxs)("div",{className:"row card-text",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Lente Derecho"}),Object(yn.jsx)("br",{})," ",m.code+m.od]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Lente Izquierdo"}),Object(yn.jsx)("br",{})," ",m.code+m.oi]})]}),b&&Object(yn.jsx)("p",{className:"card-text text-right",children:Object(yn.jsxs)("button",{className:"btn btn-info",onClick:function(e){e.preventDefault(),b({code:m.code,od:m.od,oi:m.oi})},children:[Object(yn.jsx)("i",{className:"fas fa-check mr-2"}),"Siguiente"]})}),e.update?Object(yn.jsx)("p",{className:"card-text text-right",children:Object(yn.jsx)("button",{className:"btn btn-outline-info btn-sm card-link mt-2",onClick:function(t){t.preventDefault();var a=e.onChangeInput;n(Object(o.a)(Object(o.a)({},s),{},{category_list_2:[],category_list_3:[],category_id_1:0,category_id_2:0,category_id_3:0,category:{},codesItems:{}})),a(0)},children:"Cambiar"})}):null]}):null]})})}function Cr(e){var t=e.title,a=void 0===t?"contacto":t,s=e.nameDefault,n=e.messages,c=void 0===n?[]:n,r=e._save,i=Object(xn.useState)({name:"",phone:"",birthday:In()(),email:"",gender:"male"}),l=Object(hn.a)(i,2),d=l[0],u=l[1];return Object(xn.useEffect)((function(){console.log("[DEBUG] New contact effec:",s),s&&u(Object(o.a)(Object(o.a)({},d),{},{name:s}))}),[]),Object(yn.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yn.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(yn.jsxs)("div",{className:"modal-content",children:[Object(yn.jsxs)("div",{className:"modal-header",children:[Object(yn.jsxs)("h5",{className:"modal-title text-primary text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-plus mr-1"}),"Crear nuevo ",a]}),Object(yn.jsx)("button",{type:"button",className:"close",onClick:e.handleCancel,children:Object(yn.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yn.jsxs)("div",{className:"modal-body",children:[c.length?Object(yn.jsx)(yn.Fragment,{children:c.map((function(e,t){var a=e.type,s=e.text;return Object(yn.jsxs)("div",{className:"alert alert-".concat("error"===a?"danger":"success"===a?a:"warning"),children:[Object(yn.jsx)("i",{className:"fas fa-info mr-1"}),s]},t)}))}):null,Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsxs)("label",{children:["Nombre del ",a]}),Object(yn.jsx)("input",{type:"text",className:"form-control text-uppercase",placeholder:"Nombre del ".concat(a),autoComplete:"off",required:"required",pattern:"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*",minLength:"8",defaultValue:d.name,onChange:function(e){var t=e.target;u(Object(o.a)(Object(o.a)({},d),{},{name:t.value.toLowerCase()}))}})]}),Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"E-mail"}),Object(yn.jsx)("input",{type:"email",className:"form-control",defaultValue:d.email,onChange:function(e){var t=e.target;u(Object(o.a)(Object(o.a)({},d),{},{email:t.value.toLowerCase()}))}})]}),Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Telefono celular"}),Object(yn.jsx)("input",{type:"tel",placeholder:"Telefono celular",className:"form-control",maxLength:"10",value:d.phone,onChange:function(e){var t=e.target;isNaN(t.value)||u(Object(o.a)(Object(o.a)({},d),{},{phone:t.value}))}})]}),Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Fecha de naciemiento"}),Object(yn.jsx)(Fc.a,{className:"form-control",locale:"es",selected:new Date(d.birthday.format("YYYY/MM/DD")),dateFormat:"dd/MM/yyyy",maxDate:new Date,placeholderText:"Seleccione una fecha",onSelect:function(e){e&&(e=e.toLocaleDateString("es-MX"),(e=In()(e,"DD/MM/YYYY")).isValid()&&u(Object(o.a)(Object(o.a)({},d),{},{birthday:e})))},onChange:function(e){e&&(e=e.toLocaleDateString("es-MX"),(e=In()(e,"DD/MM/YYYY")).isValid()&&u(Object(o.a)(Object(o.a)({},d),{},{birthday:e})))}})]}),Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"G\xe9nero"}),Object(yn.jsxs)("select",{className:"custom-select",onChange:function(e){var t=e.target;u(Object(o.a)(Object(o.a)({},d),{},{gender:t.value}))},defaultValue:d.gender,children:[Object(yn.jsx)("option",{value:"male",children:"Hombre"}),Object(yn.jsx)("option",{value:"female",children:"Mujer"})]})]})]}),Object(yn.jsx)("div",{className:"modal-footer",children:Object(yn.jsxs)("div",{className:"btn-group",children:[e.handleCancel&&Object(yn.jsxs)("button",{type:"button",className:"btn btn-default",onClick:e.handleCancel,children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"cancelar"]}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Bc.handleVerificationData(d,e).result}(!0),t=Object(o.a)(Object(o.a)({},d),{},{telnumbers:JSON.stringify(d.telnumbers)});if(!e)return!1;Bc.saveContact(a,t,r)},disabled:!0,children:[Object(yn.jsx)("i",{className:"fas fa-save"}),"Guardar"]})]})})]})})})}function _r(e){var t,a,s,n,c;return Object(yn.jsx)("div",{className:"position-absolute overflow-auto",style:{left:null!==(t=e.left)&&void 0!==t?t:"0rem",height:e.showNew?"0rem":"12rem",zIndex:"10",width:"100%",maxWidth:null!==(a=e.maxWidth)&&void 0!==a?a:"30rem"},children:Object(yn.jsx)("ul",{className:"list-group",children:e.contacts.length?Object(yn.jsxs)(yn.Fragment,{children:[e.contacts.map((function(t){return 2===t.id?Object(yn.jsxs)("li",{className:"list-group-item text-capitalize",children:[Object(yn.jsx)("i",{className:"fas fa-user mr-1 text-secondary"}),t.name.toLowerCase()]},t.id):Object(yn.jsx)("li",{className:"list-group-item text-capitalize",children:Object(yn.jsxs)("a",{href:"#selecte",className:"text-indigo",onClick:function(a){a.preventDefault(),e.handleSelected(t)},children:[Object(yn.jsx)("i",{className:"fas fa-user mr-1"}),t.name.toLowerCase()]})},t.id)})),(null===(s=e.meta)||void 0===s?void 0:s.total)>(null===(n=e.meta)||void 0===n?void 0:n.per_page)?Object(yn.jsxs)("li",{className:"list-group-item text-muted",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Existen mas registros, sea mas espesifico"]}):null]}):0===(null===(c=e.meta)||void 0===c?void 0:c.total)&&e.handleNew?Object(yn.jsx)("li",{className:"list-group-item",children:Object(yn.jsxs)("a",{href:"\xb7create",onClick:function(t){t.preventDefault(),e.handleNew()},children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1 text-dark"}),Object(yn.jsxs)("label",{children:["El ",e.title,":"]}),Object(yn.jsx)("span",{className:"text-uppercase text-dark font-weight-bold ml-1",children:e.text}),", no existe.",Object(yn.jsx)("span",{className:"badge badge-dark ml-2",children:"Registrar"})]})}):null})})}function kr(e){var t=Object(xn.useState)({search:"",contacts:[],meta:{},new:!1,newName:"",loading:!1,timer:""}),a=Object(hn.a)(t,2),s=a[0],n=a[1],c=Dc(),r=Object(xn.useRef)(),i=function(){n(Object(o.a)(Object(o.a)({},s),{},{timer:"",loading:!0})),c.getContacts({search:s.search,itemsPage:10}).then((function(e){if(e.data)n(Object(o.a)(Object(o.a)({},s),{},{contacts:e.data,meta:e.meta,loading:!1}));else{var t=Object.values(e.errors);console.log("[Orus System] Message of server:",e.errors),window.Swal.fire({title:"Contactos",text:t[0],icon:"error",showConfirmButton:!1,timer:3e3}),n(Object(o.a)(Object(o.a)({},s),{},{contacts:[],meta:{},loading:!1}))}}))};return Object(xn.useEffect)((function(){var e=null;s.search.length>5?(s.timer&&clearTimeout(s.timer),e=setTimeout((function(){return i()}),2e3),n(Object(o.a)(Object(o.a)({},s),{},{timer:e}))):s.search.length||(s.timer&&clearTimeout(s.timer),n(Object(o.a)(Object(o.a)({},s),{},{timer:null,contacts:[],meta:{},loading:!1})))}),[s.search]),Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("input",{type:"text",className:"form-control text-capitalize",defaultValue:s.search,onChange:function(e){var t,a=e.target;n(Object(o.a)(Object(o.a)({},s),{},{search:null===(t=a.value)||void 0===t?void 0:t.toLowerCase()}))},disabled:s.loading,onKeyDown:function(e){var t=e.key;"Escape"===t?(n(Object(o.a)(Object(o.a)({},s),{},{contacts:[],search:""})),r.current.value=""):"Enter"===t&&(s.timer&&clearTimeout(s.timer),i(),n(Object(o.a)(Object(o.a)({},s),{},{timer:null})))},ref:r}),s.loading&&Object(yn.jsx)("div",{className:"float-right px-4",children:Object(yn.jsx)("div",{className:"spinner-border text-indigo"})}),s.new&&Object(yn.jsx)(Cr,{title:e.title,nameDefault:s.newName,handleCancel:function(e){n(Object(o.a)(Object(o.a)({},s),{},{new:!1,newName:""}))}}),s.search.length>2&&!s.loading&&Object(yn.jsx)("div",{className:"w-100 d-block position-static",children:Object(yn.jsx)(_r,{contacts:s.contacts,text:s.search,meta:s.meta,title:e.title,left:"6.6rem",maxWidth:"24rem",handleNew:function(e){n(Object(o.a)(Object(o.a)({},s),{},{contacts:[],search:"",new:!0,newName:s.search})),r.current.value=""},handleSelected:function(t){e.handleSelectContact(t),n(Object(o.a)(Object(o.a)({},s),{},{contacts:[],search:""})),r.current.value=""}})})]})}function Er(e){var t=e.data,a=void 0===t?{}:t,s=e.readOnly,n=void 0!==s&&s,c=e.title,r=void 0===c?"contacto":c,i=e.legend,o=Object(On.f)();return Object(yn.jsxs)("div",{className:"w-100 d-block",children:[i&&!a.id&&Object(yn.jsxs)("span",{className:"text-sm text-muted ml-4 w-100 d-block",children:[Object(yn.jsx)("label",{children:"Primero:"})," ",i]}),Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsxs)("span",{className:"input-group-text text-capitalize",children:[Object(yn.jsx)("i",{className:"fas fa-user mr-2"})," ",r]})}),a.id?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("span",{className:"form-control bg-light",children:[a.name.toUpperCase(),Object(yn.jsxs)("span",{className:"badge badge-secondary mx-1",children:[Object(yn.jsx)("i",{className:"fas fa-envelope mr-1"}),a.email?a.email:"--"]}),Object(yn.jsxs)("span",{className:"badge badge-secondary ml-1",children:[Object(yn.jsx)("i",{className:"fas fa-calendar mr-1"}),a.age?"".concat(a.age," a\xf1os"):"--"]})]}),!n&&Object(yn.jsx)("div",{className:"float-right",children:Object(yn.jsxs)("div",{className:"btn-group btn-sm d-print-none",children:[Object(yn.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(){window.Swal.fire({title:"Contactos",text:"\xbfEsta seguro de cambiar de ".concat(e.title,"?"),icon:"question",showCancelButton:!0,confirmButtonText:"Cambiar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){t.dismiss||e.handleContactSelect({id:0})}))},title:"Cambiar",children:Object(yn.jsx)("i",{className:"fas fa-exchange-alt"})}),Object(yn.jsx)("button",{className:"btn bg-indigo btn-sm",onClick:function(){return o.push("/contactos/".concat(a.id))},title:"Editar",children:Object(yn.jsx)("i",{className:"fas fa-edit"})})]})})]}):Object(yn.jsx)(kr,{title:r,handleSelectContact:function(t){e.handleContactSelect(t)}})]})]})}function Lr(e){var t=e.state,a=e.handle;return Object(yn.jsxs)("div",{className:"nav flex-column nav-tabs",children:[Object(yn.jsxs)("a",{className:t.panel?"nav-link":"nav-link text-bold active",href:"#general",onClick:function(e){e.preventDefault(),a(0)},children:[Object(yn.jsx)("i",{className:t.generales?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Generales"]}),Object(yn.jsxs)("a",{className:1===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(1)},children:[Object(yn.jsx)("i",{className:t.interrogatorios?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Interrogatorio"]}),Object(yn.jsxs)("a",{className:2===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(2)},children:[Object(yn.jsx)("i",{className:t.keraRet?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Keratometria"]}),Object(yn.jsxs)("a",{className:3===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(3)},children:[Object(yn.jsx)("i",{className:t.diabetes?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Diabetes"]}),Object(yn.jsxs)("a",{className:4===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(4)},children:[Object(yn.jsx)("i",{className:t.agudeza?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Agudeza"]}),Object(yn.jsxs)("a",{className:5===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(5)},children:[Object(yn.jsx)("i",{className:t.diagnostico?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Diagnostico"]}),Object(yn.jsxs)("a",{className:6===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(6)},children:[Object(yn.jsx)("i",{className:t.graduacion?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Graduaci\xf3n"]}),Object(yn.jsxs)("a",{className:7===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(7)},children:[Object(yn.jsx)("i",{className:t.observaciones?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Observaciones"]}),Object(yn.jsxs)("a",{className:8===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(8)},children:[Object(yn.jsx)("i",{className:t.recomendaciones?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Recomendaciones"]})]})}function Ir(e){var t,a,s,n,c,r,i,l,d,u,j,b,m,h,x,p,O,f,v,g,y,w,S,C,_,k,E,L,I,T,D,A,P,F,M,B,z,U,G,R,V,Y,q,$,J,H,Z,X,Q,W,K,ee,te,ae,se,ne,ce,re,ie,oe,le,de,ue,je,be,me,he,xe,pe,Oe,fe,ve,ge,Ne,ye,we,Se,Ce,_e=Object(xn.useState)(Object(o.a)(Object(o.a)({},Tr()),{},{loading:!1,panel:0,used:{generales:!1,interrogatorios:!1,keraRet:!1,diabetes:!1,agudeza:!1,diagnostico:!1,graduacion:!1,observaciones:!1,recomendaciones:!1}})),ke=Object(hn.a)(_e,2),Ee=ke[0],Le=ke[1],Ie=e.match.params.id,Te=jr(),De=Object(On.f)();return Object(xn.useEffect)((function(){Ie&&(console.log("[Orus System] Loading exam:",Ie),Le(Object(o.a)(Object(o.a)({},Ee),{},{loading:!1})),Te.getExam(Ie).then((function(e){var t,a;e.category_ii=null===(t=e.category_ii)||void 0===t?void 0:t.id,e.category_id=null===(a=e.category_id)||void 0===a?void 0:a.id,Le(Object(o.a)(Object(o.a)({},Tr(e)),{},{loading:!1,panel:0,used:{generales:!0,interrogatorios:!0,keraRet:!0,diabetes:!0,agudeza:!0,diagnostico:!0,graduacion:!0,observaciones:!0,recomendaciones:!0}}))})))}),[Ie]),Object(yn.jsx)(yn.Fragment,{children:Object(yn.jsxs)("div",{className:"card card-info card-outline d-print-none",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h3",{className:"card-title text-info",children:[Object(yn.jsx)("i",{className:"fas fa-notes-medical mr-1"}),Ee.id?Object(yn.jsxs)("label",{children:["Examen ",Object(yn.jsxs)("span",{className:"badge badge-info",children:["#",Ee.id]})]}):"Nuevo examen"]})}),Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("div",{className:"form-group",children:Object(yn.jsx)(Er,{readOnly:!!Ee.id,title:"paciente",legend:"Busque el paciente por nombre para crear un nuevo examen",left:"6.5rem",data:Ee.contact,handleContactSelect:function(e){Le(Object(o.a)(Object(o.a)({},Ee),{},{contact:e,contact_id:e.id}))}})}),null!==(t=Ee.contact)&&void 0!==t&&t.id?Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-2",children:Object(yn.jsx)(Lr,{state:Object(o.a)({panel:Ee.panel},Ee.used),handle:function(e){isNaN(e)||("string"===typeof e&&(e=parseInt(e)),Le(Object(o.a)(Object(o.a)({},Ee),{},{panel:e})))}})}),Object(yn.jsxs)("div",{className:"col-10",children:[Ee.panel?null:Object(yn.jsx)(mr,{pc:null!==(a=Ee.pc)&&void 0!==a?a:"",tablet:null!==(s=Ee.tablet)&&void 0!==s?s:"",movil:null!==(n=Ee.movil)&&void 0!==n?n:"",lap:null!==(c=Ee.lap)&&void 0!==c?c:"",lap_time:null!==(r=Ee.lap_time)&&void 0!==r?r:"",pc_time:null!==(i=Ee.pc_time)&&void 0!==i?i:"",tablet_time:null!==(l=Ee.tablet_time)&&void 0!==l?l:"",movil_time:null!==(d=Ee.movil_time)&&void 0!==d?d:"",cefalea:null!==(u=Ee.cefalea)&&void 0!==u?u:"",c_frecuencia:null!==(j=Ee.c_frecuencia)&&void 0!==j?j:"",c_intensidad:null!==(b=Ee.c_intensidad)&&void 0!==b?b:"",frontal:null!==(m=Ee.frontal)&&void 0!==m?m:"",temporal:null!==(h=Ee.temporal)&&void 0!==h?h:"",occipital:null!==(x=Ee.occipital)&&void 0!==x?x:"",generality:null!==(p=Ee.generality)&&void 0!==p?p:"",temporaoi:null!==(O=Ee.temporaoi)&&void 0!==O?O:"",temporaod:null!==(f=Ee.temporaod)&&void 0!==f?f:"",handleGetData:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{generales:!0})),a)))}}),1===Ee.panel?Object(yn.jsx)(hr,{interrogatorio:null!==(v=Ee.interrogatorio)&&void 0!==v?v:"",coa:null!==(g=Ee.coa)&&void 0!==g?g:"",aopp:null!==(y=Ee.aopp)&&void 0!==y?y:"",aopf:null!==(w=Ee.aopf)&&void 0!==w?w:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{interrogatorios:!0})),a)))}}):null,2===Ee.panel?Object(yn.jsx)(xr,{keratometriaoi:null!==(S=Ee.keratometriaoi)&&void 0!==S?S:"",keratometriaod:null!==(C=Ee.keratometriaod)&&void 0!==C?C:"",rsoi:null!==(_=Ee.rsoi)&&void 0!==_?_:"",rsod:null!==(k=Ee.rsod)&&void 0!==k?k:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{keraRet:!0})),a)))}}):null,3===Ee.panel?Object(yn.jsx)(pr,{d_time:null!==(E=Ee.d_time)&&void 0!==E?E:"",d_media:null!==(L=Ee.d_media)&&void 0!==L?L:"",d_test:null!==(I=Ee.d_test)&&void 0!==I?I:"",d_fclod:null!==(T=Ee.d_fclod)&&void 0!==T?T:"",d_fclod_time:null!==(D=Ee.d_fclod_time)&&void 0!==D?D:"",d_fcloi:null!==(A=Ee.d_fcloi)&&void 0!==A?A:"",d_fcloi_time:null!==(P=Ee.d_fcloi_time)&&void 0!==P?P:"",oftalmoscopia:null!==(F=Ee.oftalmoscopia)&&void 0!==F?F:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{diabetes:!0})),a)))}}):null,4===Ee.panel?Object(yn.jsx)(Or,{cvod:null!==(M=Ee.cvod)&&void 0!==M?M:"",cvoi:null!==(B=Ee.cvoi)&&void 0!==B?B:"",avslod:null!==(z=Ee.avslod)&&void 0!==z?z:"",avsloi:null!==(U=Ee.avsloi)&&void 0!==U?U:"",avcgaod:null!==(G=Ee.avcgaod)&&void 0!==G?G:"",avcgaoi:null!==(R=Ee.avcgaoi)&&void 0!==R?R:"",avfod:null!==(V=Ee.avfod)&&void 0!==V?V:"",avfoi:null!==(Y=Ee.avfoi)&&void 0!==Y?Y:"",avf2o:null!==(q=Ee.avf2o)&&void 0!==q?q:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{agudeza:!0})),a)))}}):null,5===Ee.panel?Object(yn.jsx)(fr,{diagnostico:null!==($=Ee.diagnostico)&&void 0!==$?$:"",presbicie:null!==(J=Ee.presbicie)&&void 0!==J?J:"",piod:null!==(H=Ee.piod)&&void 0!==H?H:"",pioi:null!==(Z=Ee.pioi)&&void 0!==Z?Z:"",txoftalmico:null!==(X=Ee.txoftalmico)&&void 0!==X?X:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{diagnostico:!0})),a)))}}):null,6===Ee.panel?Object(yn.jsx)(vr,{esferaod:null!==(Q=Ee.esferaod)&&void 0!==Q?Q:0,esferaoi:null!==(W=Ee.esferaoi)&&void 0!==W?W:0,cilindrod:null!==(K=Ee.cilindrod)&&void 0!==K?K:0,cilindroi:null!==(ee=Ee.cilindroi)&&void 0!==ee?ee:0,ejeod:null!==(te=Ee.ejeod)&&void 0!==te?te:0,ejeoi:null!==(ae=Ee.ejeoi)&&void 0!==ae?ae:0,adiciond:null!==(se=Ee.adiciond)&&void 0!==se?se:0,adicioni:null!==(ne=Ee.adicioni)&&void 0!==ne?ne:0,adicion_media_od:null!==(ce=Ee.adicion_media_od)&&void 0!==ce?ce:0,adicion_media_oi:null!==(re=Ee.adicion_media_oi)&&void 0!==re?re:0,dpod:null!==(ie=Ee.dpod)&&void 0!==ie?ie:0,dpoi:null!==(oe=Ee.dpoi)&&void 0!==oe?oe:0,alturaod:null!==(le=Ee.alturaod)&&void 0!==le?le:0,alturaoi:null!==(de=Ee.alturaoi)&&void 0!==de?de:0,lcmarca:null!==(ue=Ee.lcmarca)&&void 0!==ue?ue:0,lcgod:null!==(je=Ee.lcgod)&&void 0!==je?je:0,lcgoi:null!==(be=Ee.lcgoi)&&void 0!==be?be:0,onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{graduacion:!0})),a)))}}):null,7===Ee.panel?Object(yn.jsx)(gr,{observaciones:null!==(me=Ee.observaciones)&&void 0!==me?me:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{observaciones:!0})),a)))}}):null,8===Ee.panel?Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)(Sr,{category_id:null!==(he=Ee.category_id)&&void 0!==he?he:null,esferaod:null!==(xe=Ee.esferaod)&&void 0!==xe?xe:"",esferaoi:null!==(pe=Ee.esferaoi)&&void 0!==pe?pe:"",cilindrod:null!==(Oe=Ee.cilindrod)&&void 0!==Oe?Oe:"",cilindroi:null!==(fe=Ee.cilindroi)&&void 0!==fe?fe:"",nameItem:"item1",title:"Recomendacion principal",onChangeInput:function(e){Le(Object(o.a)(Object(o.a)({},Ee),{},{category_id:e,category_ii:0,used:Object(o.a)(Object(o.a)({},Ee.used),{},{recomendaciones:!0})}))},update:!0})}),Ee.category_id?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)(Sr,{category_id:null!==(ve=Ee.category_ii)&&void 0!==ve?ve:null,esferaod:null!==(ge=Ee.esferaod)&&void 0!==ge?ge:"",esferaoi:null!==(Ne=Ee.esferaoi)&&void 0!==Ne?Ne:"",cilindrod:null!==(ye=Ee.cilindrod)&&void 0!==ye?ye:"",cilindroi:null!==(we=Ee.cilindroi)&&void 0!==we?we:"",nameItem:"item2",title:"Recomendacion adicional",onChangeInput:function(e){Le(Object(o.a)(Object(o.a)({},Ee),{},{category_ii:e,used:Object(o.a)(Object(o.a)({},Ee.used),{},{recomendaciones:!0})}))},update:!0})}):null]}):null]})]}):null]}),Object(yn.jsx)("div",{className:"card-footer text-right",children:Object(yn.jsxs)("div",{className:"btn-group",role:"group",children:[Object(yn.jsxs)("a",{href:"#close",className:"btn btn-default",onClick:function(t){t.preventDefault(),De.push("/consultorio"),e.handleNewOrEdit()},children:[Object(yn.jsx)("i",{className:Ee.id?"fas fa-arrow-left mr-2":"fas fa-ban mr-2"}),Object(yn.jsx)("strong",{children:Ee.id?"Cancelar":"Cerrar"})]}),Ee.id?Object(yn.jsxs)("button",{className:"btn btn-default",onClick:function(e){e.preventDefault()},children:[Object(yn.jsx)("i",{className:"fas fa-print mr-2"}),"Imprimir"]}):null,Object(yn.jsxs)("button",{type:"button",className:null!==(Se=Ee.contact)&&void 0!==Se&&Se.id?"btn btn-info":"btn btn-info disabled",onClick:function(){var t=Object(o.a)({},Ee),a=t.contact;if(delete t.loading,delete t.panel,delete t.used,delete t.contact,t.category_ii||delete t.category_ii,t.category_id||delete t.category_id,t.cilindrod<0&&!t.ejeod||t.cilindroi<0&&!t.ejeoi)return window.Swal.fire("Consultorio","El campo CILINDRO esta vacio","warning"),!1;window.Swal.fire({title:"Consultorio",text:t.id?"\xbfDesea actualizar el examen de ".concat(a.name.toUpperCase(),"?"):"\xbfDesea crear un nuevo examen para ".concat(a.name.toUpperCase(),"?"),icon:"question",showCancelButton:!0,confirmButtonText:t.id?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(a){a.dismiss||Te.saveExam(t).then((function(t){if(null!==t&&void 0!==t&&t.id)console.log("[Orus System] Save exam successfully",t.id),e.handleNewOrEdit(),De.push("/consultorio");else if(t.hasOwnProperty("errors")){var a=Object.values(t.errors);console.log("[Orus System] Message of server:",t.errors),window.Swal.fire({title:"Consultorio",text:a[0],icon:"error",showConfirmButton:!1,timer:3e3})}}))}))},disabled:null===(Ce=Ee.contact)||void 0===Ce||!Ce.id,children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"}),Object(yn.jsx)("strong",{children:Ee.id?"Actualizar":"Guardar"})]})]})})]})})}function Tr(){var e,t,a,s,n,c,r,i,o,l,d,u,j,b,m,h,x,p,O,f,v,g,N,y,w,S,C,_,k,E,L,I,T,D,A,P,F,M,B,z,U,G,R,V,Y,q,$,J,H,Z,X,Q,W,K,ee,te,ae,se,ne,ce,re,ie,oe,le,de,ue,je,be,me,he,xe,pe,Oe,fe,ve,ge,Ne=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:null!==(e=Ne.id)&&void 0!==e?e:0,age:null!==(t=null===(a=Ne.customer)||void 0===a?void 0:a.age)&&void 0!==t?t:0,keratometriaoi:null!==(s=Ne.keratometriaoi)&&void 0!==s?s:"",keratometriaod:null!==(n=Ne.keratometriaod)&&void 0!==n?n:"",pantalleooi:null!==(c=Ne.pantalleooi)&&void 0!==c?c:"",pantalleood:null!==(r=Ne.pantalleood)&&void 0!==r?r:"",interrogatorio:null!==(i=Ne.interrogatorio)&&void 0!==i?i:"",cefalea:null!==(o=Ne.cefalea)&&void 0!==o?o:0,c_frecuencia:null!==(l=Ne.c_frecuencia)&&void 0!==l?l:"",c_intensidad:null!==(d=Ne.c_intensidad)&&void 0!==d?d:0,frontal:null!==(u=Ne.frontal)&&void 0!==u?u:0,temporal:null!==(j=Ne.temporal)&&void 0!==j?j:0,occipital:null!==(b=Ne.occipital)&&void 0!==b?b:0,generality:null!==(m=Ne.generality)&&void 0!==m?m:0,temporaoi:null!==(h=Ne.temporaoi)&&void 0!==h?h:0,temporaod:null!==(x=Ne.temporaod)&&void 0!==x?x:0,coa:null!==(p=Ne.coa)&&void 0!==p?p:"",aopp:null!==(O=Ne.aopp)&&void 0!==O?O:"",aopf:null!==(f=Ne.aopf)&&void 0!==f?f:"",avsloi:null!==(v=Ne.avsloi)&&void 0!==v?v:"",avslod:null!==(g=Ne.avslod)&&void 0!==g?g:"",avcgaoi:null!==(N=Ne.avcgaoi)&&void 0!==N?N:"",avcgaod:null!==(y=Ne.avcgaod)&&void 0!==y?y:"",cvoi:null!==(w=Ne.cvoi)&&void 0!==w?w:"",cvod:null!==(S=Ne.cvod)&&void 0!==S?S:"",oftalmoscopia:null!==(C=Ne.oftalmoscopia)&&void 0!==C?C:"",rsoi:null!==(_=Ne.rsoi)&&void 0!==_?_:"",rsod:null!==(k=Ne.rsod)&&void 0!==k?k:"",diagnostico:null!==(E=Ne.diagnostico)&&void 0!==E?E:"",presbicie:null!==(L=Ne.presbicie)&&void 0!==L?L:0,txoftalmico:null!==(I=Ne.txoftalmico)&&void 0!==I?I:"",esferaoi:null!==(T=Ne.esferaoi)&&void 0!==T?T:0,esferaod:null!==(D=Ne.esferaod)&&void 0!==D?D:0,cilindroi:null!==(A=Ne.cilindroi)&&void 0!==A?A:0,cilindrod:null!==(P=Ne.cilindrod)&&void 0!==P?P:0,ejeoi:null!==(F=Ne.ejeoi)&&void 0!==F?F:0,ejeod:null!==(M=Ne.ejeod)&&void 0!==M?M:0,adicioni:null!==(B=Ne.adicioni)&&void 0!==B?B:0,adiciond:null!==(z=Ne.adiciond)&&void 0!==z?z:0,adicion_media_oi:null!==(U=Ne.adicion_media_oi)&&void 0!==U?U:0,adicion_media_od:null!==(G=Ne.adicion_media_od)&&void 0!==G?G:0,dpoi:null!==(R=Ne.dpoi)&&void 0!==R?R:0,dpod:null!==(V=Ne.dpod)&&void 0!==V?V:0,avfod:null!==(Y=Ne.avfod)&&void 0!==Y?Y:"",avfoi:null!==(q=Ne.avfoi)&&void 0!==q?q:"",avf2o:null!==($=Ne.avf2o)&&void 0!==$?$:"",lcmarca:null!==(J=Ne.lcmarca)&&void 0!==J?J:"",lcgoi:null!==(H=Ne.lcgoi)&&void 0!==H?H:"",lcgod:null!==(Z=Ne.lcgod)&&void 0!==Z?Z:"",txoptico:null!==(X=Ne.txoptico)&&void 0!==X?X:"",alturaod:null!==(Q=Ne.alturaod)&&void 0!==Q?Q:0,alturaoi:null!==(W=Ne.alturaoi)&&void 0!==W?W:0,pioi:null!==(K=Ne.pioi)&&void 0!==K?K:0,piod:null!==(ee=Ne.piod)&&void 0!==ee?ee:0,observaciones:null!==(te=Ne.observaciones)&&void 0!==te?te:"",pc:null!==(ae=Ne.pc)&&void 0!==ae?ae:0,tablet:null!==(se=Ne.tablet)&&void 0!==se?se:0,movil:null!==(ne=Ne.movil)&&void 0!==ne?ne:0,lap:null!==(ce=Ne.lap)&&void 0!==ce?ce:0,lap_time:null!==(re=Ne.lap_time)&&void 0!==re?re:"00:00",pc_time:null!==(ie=Ne.pc_time)&&void 0!==ie?ie:"00:00",tablet_time:null!==(oe=Ne.tablet_time)&&void 0!==oe?oe:"00:00",movil_time:null!==(le=Ne.movil_time)&&void 0!==le?le:"00:00",d_time:null!==(de=Ne.d_time)&&void 0!==de?de:"",d_media:null!==(ue=Ne.d_media)&&void 0!==ue?ue:"",d_test:null!==(je=Ne.d_test)&&void 0!==je?je:"",d_fclod:null!==(be=Ne.d_fclod)&&void 0!==be?be:0,d_fcloi:null!==(me=Ne.d_fcloi)&&void 0!==me?me:0,d_fclod_time:null!==(he=Ne.d_fclod_time)&&void 0!==he?he:"00:00",d_fcloi_time:null!==(xe=Ne.d_fcloi_time)&&void 0!==xe?xe:"00:00",contact:null!==(pe=Ne.customer)&&void 0!==pe?pe:{},status:null!==(Oe=Ne.status)&&void 0!==Oe?Oe:1,contact_id:null===(fe=Ne.customer)||void 0===fe?void 0:fe.id,category_id:null!==(ve=Ne.category_id)&&void 0!==ve?ve:0,category_ii:null!==(ge=Ne.category_ii)&&void 0!==ge?ge:0}}Object(Pc.registerLocale)("es",zc.a);var Dr={page:1,orderby:"created_at",order:"desc",search:"",status:"",itemsPage:25,date:"",branch:"all"};function Ar(e){var t=Object(xn.useState)({options:Dr,newOrEdit:null}),a=Object(hn.a)(t,2),s=a[0],n=a[1],c=e.match.params.id;return Object(xn.useEffect)((function(){n(Object(o.a)(Object(o.a)({},s),{},{newOrEdit:!!c}))}),[c]),Object(yn.jsx)(rr.Provider,{value:Object(o.a)(Object(o.a)({},s),{},{set:n}),children:Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)(ur,{newOrEdit:s.newOrEdit,handleNewOrEdit:function(){return n(Object(o.a)(Object(o.a)({},s),{},{newOrEdit:!(null!==s&&void 0!==s&&s.newOrEdit)}))}}),"boolean"===typeof s.newOrEdit?Object(yn.jsx)("div",{className:"col-sm-12 col-md-10",children:s.newOrEdit?Object(yn.jsx)(Ir,Object(o.a)(Object(o.a)({},e),{},{handleNewOrEdit:function(){return n(Object(o.a)(Object(o.a)({},s),{},{newOrEdit:!s.newOrEdit}))}})):Object(yn.jsx)(br,{})}):Object(yn.jsx)("p",{children:"Loading component"})]})})}var Pr={_getList:Ze.getListOrder,_getOrder:Ze.getOrder,_setOrder:Ze.setOrder,_setOptions:Ze.setOptions,_deleteOrder:Ze.deleteOrder,_saveOrder:Ze.saveOrder},Fr=Object(c.b)((function(e){var t=e.order;return{orders:t.list,options:t.options,meta:t.metaList,loading:t.loading}}),Pr)((function(e){var t=e.orders,a=void 0===t?[]:t,s=e.meta,c=e.options,r=e.loading,i=e._getList,o=e._getOrder,l=e._setOrder,d=e._setOptions,u=e._deleteOrder,j=e._saveOrder,b=Object(xn.useState)({id:0}),m=Object(hn.a)(b,2),h=m[0],x=m[1],p=function(e,t){d({key:e,value:t})},O=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:0};t&&t.preventDefault(),a.id?l(a):h.id&&o(h.id),e.handleChangePanel(null,3)};return Object(xn.useEffect)((function(){i(c)}),[c]),Object(yn.jsx)(Dn,{title:"Listado de pedidos",icon:"clipboard-list",color:"warning",meta:s,itemSelected:h.id,loading:r,defaultSearch:c.search,handlePagination:function(e){return p("page",e)},handleSearch:function(e){return p("search",e)},handleEditItem:O,handleDeleteItem:function(){Hc.handleDeleteOrder(h,c,u),x({id:0})},handleSync:function(){return i(c)},handleStatus:function(){h.id&&h.estado<3&&Hc.handleSaveOrder(h.id,{status:3},c,j),x({id:0})},children:Object(yn.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{}),Object(yn.jsx)("th",{children:"Folio"}),Object(yn.jsx)("th",{children:"Cliente"}),Object(yn.jsx)("th",{children:"Estado"}),Object(yn.jsx)("th",{children:"Nota"}),Object(yn.jsx)("th",{children:"created_at"===c.orderby?"Registrado":"Modificado"})]})}),Object(yn.jsx)("tbody",{children:a.length?a.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("td",{children:Object(yn.jsxs)("div",{className:"icheck-primary",children:[Object(yn.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"order_"+e.id,checked:h.id===e.id,disabled:e.estado>2,onChange:function(t){return function(e,t){e.checked||(t={id:0}),x(t)}(t.target,e)}}),Object(yn.jsx)("label",{htmlFor:"order_"+e.id,className:"sr-only"})]})}),Object(yn.jsxs)("td",{children:["#",e.id]}),Object(yn.jsx)("td",{className:"mailbox-name text-truncate text-capitalize text-bold",style:{cursor:"pointer"},children:Object(yn.jsx)("a",{href:"#edit",onClick:function(t){return O(t,e)},children:Object(yn.jsxs)("span",{className:e.status>2?"text-muted":"text-dark text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-user text-sm mr-2"}),e.paciente.nombre]})})}),Object(yn.jsxs)("td",{className:"mailbox-subject",children:[Object(yn.jsx)("span",{className:"badge badge-".concat(e.status<3?"primary":"secondary"," mr-2 text-uppercase"),children:Hc.handleStatusString(e.status)}),1===e.status?Object(yn.jsxs)("div",{children:[Object(yn.jsx)("span",{className:"mr-1 text-dark",children:e.laboratorio?e.laboratorio.nombre:"Sin asignar"}),e.laboratorio?"/ "+e.npedidolab:""]}):2===e.status?Object(yn.jsx)("small",{children:e.ncaja?"CAJA: "+e.ncaja:"Caja no asignada"}):e.status?3===e.status?Object(yn.jsx)("small",{className:"text-dark",children:"Sin entregar"}):null:Object(yn.jsx)("small",{children:e.exam?1===e.exam.status?"Examen completado":"Examen no realizado":"Examen no asignado"})]}),Object(yn.jsx)("td",{className:"mailbox-attachment",children:e.nota?Object(yn.jsx)(n.b,{to:"/notas/registro/"+e.nota.id,children:Object(yn.jsx)("span",{className:"badge badge-success",children:e.nota.id})}):"--"}),Object(yn.jsx)("td",{className:"mailbox-date",children:"created_at"===c.orderby?In()(e.created_at).format("ll"):In()(e.updated_at).fromNow()})]},e.id)})):Object(yn.jsx)("tr",{children:Object(yn.jsx)("th",{colSpan:"10",className:"text-center",children:"No hay datos para mostrar"})})})]})})})),Mr={_saveExam:Ha.saveExam},Br=Object(c.b)((function(e){return{messages:e.exam.messages}}),Mr)((function(e){var t,a,s,n,c,r,i,l,d,u,j,b,m,h,x,p=e.exam,O=void 0===p?{}:p,f=e.examEdit,v=void 0!==f&&f,g=e.ChangeInput,y=e._saveExam,w=Object(xn.useState)({esferaod:O.esferaod,esferaoi:O.esferaoi,cilindrod:O.cilindrod,cilindroi:O.cilindroi,ejeod:O.ejeod,ejeoi:O.ejeoi,adiciond:O.adiciond,adicioni:O.adicioni,adicion_media_od:O.adicion_media_od,adicion_media_oi:O.adicion_media_oi,dpod:O.dpod,dpoi:O.dpoi,alturaod:O.alturaod,alturaoi:O.alturaoi,lcmarca:O.lcmarca,lcgod:O.lcgod,lcgoi:O.lcgoi}),S=Object(hn.a)(w,2),C=S[0],_=S[1],k=function(){g("examEdit",!1)};return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("b",{children:["Folio ",Object(yn.jsx)("br",{}),"#",O.id]})}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("b",{children:"Fecha:"}),Object(yn.jsx)("br",{}),Object(yn.jsx)("i",{className:"fas fa-calendar mr-2"}),In()(O.created_at).format("L")]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("b",{children:"Estado:"}),Object(yn.jsx)("br",{}),O.estado?Object(yn.jsxs)("span",{className:"badge badge-success",children:[Object(yn.jsx)("i",{className:"fas fa-check"})," Terminado"]}):Object(yn.jsxs)("span",{className:"badge badge-secondary",children:[Object(yn.jsx)("i",{className:"fas fa-hourglass"})," Activo"]})]})]}),O.observaciones?Object(yn.jsx)("div",{className:"form-group mt-2",children:Object(yn.jsxs)("div",{className:"callout callout-info",children:[Object(yn.jsxs)("h5",{className:"text-info text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-info"})," Observaciones:"]}),O.observaciones]})}):null,Object(yn.jsx)("div",{className:"row mt-2",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)(vr,{esferaod:null!==(t=C.esferaod)&&void 0!==t?t:0,esferaoi:null!==(a=C.esferaoi)&&void 0!==a?a:0,cilindrod:null!==(s=C.cilindrod)&&void 0!==s?s:0,cilindroi:null!==(n=C.cilindroi)&&void 0!==n?n:0,ejeod:null!==(c=C.ejeod)&&void 0!==c?c:0,ejeoi:null!==(r=C.ejeoi)&&void 0!==r?r:0,adiciond:null!==(i=C.adiciond)&&void 0!==i?i:0,adicioni:null!==(l=C.adicioni)&&void 0!==l?l:0,adicion_media_od:C.adicion_media_od,adicion_media_oi:C.adicion_media_oi,dpod:null!==(d=C.dpod)&&void 0!==d?d:0,dpoi:null!==(u=C.dpoi)&&void 0!==u?u:0,alturaod:null!==(j=C.alturaod)&&void 0!==j?j:0,alturaoi:null!==(b=C.alturaoi)&&void 0!==b?b:0,lcmarca:null!==(m=C.lcmarca)&&void 0!==m?m:0,lcgod:null!==(h=C.lcgod)&&void 0!==h?h:0,lcgoi:null!==(x=C.lcgoi)&&void 0!==x?x:0,readOnly:!v,onChangeInput:function(e,t){var a=Object(o.a)(Object(o.a)({},C),{},Object(N.a)({},e,parseFloat(t)));_(a),g("codes",{})}})})}),v?Object(yn.jsx)("div",{className:"text-right mt-2",children:Object(yn.jsxs)("div",{className:"btn-group",children:[Object(yn.jsxs)("button",{className:"btn btn-default",onClick:k,children:[Object(yn.jsx)("i",{className:"fas fa-times mr-1"})," Cerrar"]}),Object(yn.jsxs)("button",{className:"btn btn-info",onClick:function(){window.Swal.fire({title:"Almacenamiento",text:"\xbfEsta seguro de actualizar el examen?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Actualizar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(y({id:O.id,data:C}),k())}))},children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"})," Guardar"]})]})}):null]})}));var zr={_getList:$t.getListStore,_setList:$t.setListStore},Ur=Object(c.b)((function(e){var t=e.storeItem;return{items:t.list,meta:t.metaList,loading:t.loading}}),zr)((function(e){var t=e.items,a=e.meta,s=e.item,n=void 0===s?{producto:""}:s,c=e._getList,r=e._setList,i=e.handleItemSelect,o=Object(xn.useState)(n.producto),l=Object(hn.a)(o,2),d=l[0],u=l[1],j=Object(xn.useState)(""),b=Object(hn.a)(j,2),m=b[0],h=b[1],x=Object(xn.useState)(!1),p=Object(hn.a)(x,2),O=p[0],f=p[1],v=function(e){r({result:{list:[],metaList:{}}}),i(e),u(e.producto.toUpperCase())};return Object(xn.useEffect)((function(){var e=null;d.length>2&&!n.store_items_id&&(m&&clearTimeout(m),e=setTimeout((function(){c({search:d,itemsPage:10}),h(""),f(!1)}),1e3),h(e)),!d.length&&t.length&&(m&&clearTimeout(m),r({result:{list:[],metaList:{}}}),f(!1))}),[d]),Object(xn.useEffect)((function(){return function(){r({result:{list:[],metaList:{}}})}}),[]),Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("label",{children:["Producto",O?Object(yn.jsx)("small",{className:"position-absolute text-primary ml-2",style:{zIndex:"101",top:"0"},children:"Buscando..."}):null]}),Object(yn.jsx)("input",{className:"form-control text-uppercase text-truncate",type:"text",placeholder:"Buscar producto",autoComplete:"off",value:d,onChange:function(e){var t=e.target.value;u(t.toLowerCase()),f(!0)}}),t.length&&d.length>2?Object(yn.jsx)("div",{className:"position-absolute shadow p-0 pt-2 pl-1 bg-white rounded w-100 mh-50 overflow-auto",style:{maxHeight:"18rem",zIndex:"100"},children:Object(yn.jsxs)("div",{className:"list-group m-0 list-group-flush",children:[t.sort((function(e,t){return e.cant>t.cant?-1:e.cant<t.cant?1:0})).map((function(e){return function(e,t){if(e.cant!==e.cant_total)return!e.cant&&e.cant_total?Object(yn.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(yn.jsxs)("span",{className:"text-truncate text-uppercase text-muted",children:["[S]-",e.producto]}),Object(yn.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant_total})]},e.id):Object(yn.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(yn.jsx)("span",{className:"text-truncate text-uppercase text-primary",children:e.producto}),Object(yn.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant_total})]},e.id);if(!e.cant_total&&!e.cant)return Object(yn.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(yn.jsxs)("span",{className:"text-truncate text-uppercase text-danger",children:["[X]-",e.producto]}),Object(yn.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant_total})]},e.id);return Object(yn.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(yn.jsx)("span",{className:"text-truncate text-uppercase text-primary",children:e.producto}),Object(yn.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant})]},e.id)}(e,v)})),a.total>10&&Object(yn.jsxs)("a",{href:"#more",className:"list-group-item text-center text-dark text-bold",onClick:function(e){return e.preventDefault()},children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Existen mas registros, sea m\xe1s espesifico"]})]})}):null]})}));var Gr=function(e){var t=Object(c.d)((function(e){return e.users.dataLoggin})),a=e.codeDefault,s=void 0===a?"":a,n=e.cantDefault,r=void 0===n?1:n,i=e.handleAddItem,l=e.handleCloseModal,d=Object(xn.useState)({id:0,producto:s,cantidad:r,precio:0,out:0,inStorage:0,subtotal:0,store_items_id:0,descripcion:"",category:0}),u=Object(hn.a)(d,2),j=u[0],b=u[1],m=Object(xn.useState)(!1),h=Object(hn.a)(m,2),x=h[0],p=h[1],O=function(){b({id:0,producto:"",precio:0,out:0,cantidad:1,inStorage:0,subtotal:0,store_items_id:0,descripcion:"",category:0}),l()},f=function(e,t){b(Object(o.a)(Object(o.a)({},j),{},Object(N.a)({},e,"descripcion"===e?t:parseInt(t))))};return Object(yn.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yn.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(yn.jsxs)("div",{className:"modal-content",children:[Object(yn.jsxs)("div",{className:"modal-header",children:[Object(yn.jsxs)("h5",{className:"modal-title text-primary text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar producto"]}),Object(yn.jsx)("button",{type:"button",className:"close",onClick:function(){return O()},children:Object(yn.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yn.jsx)("div",{className:"modal-body",children:Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col position-relative",children:Object(yn.jsx)(Ur,{item:j,handleItemSelect:function(e){b({id:0,producto:e.producto.toLowerCase(),precio:parseFloat(e.precio),out:e.cantidades,cantidad:1,inStorage:0,subtotal:0,store_items_id:e.id,descripcion:"",category:e.categoria?e.categoria.id:0})}})}),j.store_items_id?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"col-2",children:[Object(yn.jsx)("label",{children:"Cantidad"}),Object(yn.jsx)("input",{type:"number",className:"form-control",placeholder:"Cantidad",value:j.cantidad,min:"0",max:"100",onChange:function(e){var t=e.target;return f("cantidad",t.value)}})]}),Object(yn.jsxs)("div",{className:"col-3",children:[Object(yn.jsx)("label",{children:"Precio"}),Object(yn.jsx)("input",{type:"number",className:"form-control text-right",placeholder:"Precio",min:"0",value:j.precio,onChange:function(e){var t=e.target;return f("precio",t.value)}})]}),x?Object(yn.jsx)("div",{className:"col-12 mt-2",children:Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Agregue una descripcion",value:j.descripcion,onChange:function(e){var t=e.target;return f("descripcion",t.value)}})}):null]}):null]})}),Object(yn.jsx)("div",{className:"modal-footer",children:Object(yn.jsxs)("div",{className:"btn-group",children:[Object(yn.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return O()},children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return p(!x)},disabled:!j.store_items_id,children:[Object(yn.jsx)("i",{className:"fas fa-sticky-note mr-1"}),x?"Cerrar nota":"Abrir nota"]}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm text-bold",disabled:!(j.store_items_id&&j.cantidad&&j.precio),onClick:function(){return function(){if(!Zn.verifyItem(j))return!1;j.inStorage=j.out>=j.cantidad,j.out=j.out>=j.cantidad?0:j.cantidad-j.out,j.subtotal=parseFloat(j.cantidad*j.precio),j.branch_id=t.branch.id,i(j),O()}()},children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"}),"Agregar"]})]})})]})})})},Rr=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).handleSetCantItem=function(e,t){var a=s.props,n=a.items;(0,a.ChangeInput)("items",n.map((function(a){return a.store_items_id===e&&(a.cantidad=a.cantidad+t,a.subtotal=a.cantidad*a.precio),a})).filter((function(e){return e.cantidad>0})))},s.handleSetCode=function(e){var t=e.code,a=e.oi,n=e.od;s.setState({itemNew:!0,code:t,cant:a===n?2:1})},s.deleteItem=function(e){var t=s.props,a=t.items,n=t.status,c=void 0===n||n,r=t.ChangeInput,i=a.filter((function(t){return t.store_items_id!==e}));if(!c)return console.error("[Orus System] No se puede eliminar el producto, por estatus",e),!1;r("items",i)},s.handleAddItem=function(e){if(e){var t=s.props,a=t.items,n=t.ChangeInput,c=a.findIndex((function(t){return t.store_items_id===e.store_items_id}));if(-1!==c){var r=a[c].cantidad+e.cantidad,i=e.precio,o=a[c].precio*r;a[c].precio===i?(a[c].cantidad=r,a[c].subtotal=o):a.push(e)}else a.push(e);n("items",a)}},s.state={itemNew:!1,code:"",cant:1},s.total=0,s}return Object(_n.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.itemNew,s=t.code,n=t.cant,c=this.props,r=c.items,i=c.codes,o=c.session,l=c.status,d=void 0===l||l,u=!c.noPrice;return this.total=0,Object(yn.jsxs)("div",{className:"card ",children:[Object(yn.jsxs)("div",{className:"card-header",children:[Object(yn.jsxs)("h3",{className:"card-title",children:[Object(yn.jsx)("i",{className:"fas fa-shopping-cart"})," Pedido"]}),Object(yn.jsx)("div",{className:"card-tools",children:o&&!a?Object(yn.jsxs)("button",{className:d?"btn btn-too btn-primary text-bold":"btn btn-too btn-outline-secondary disabled",disabled:!d,onClick:function(t){e.setState({itemNew:!e.state.itemNew,code:"",cant:1})},children:[Object(yn.jsx)("i",{className:"fas fa-plus mr-1"})," Agregar"]}):null})]}),Object(yn.jsx)("div",{className:"card-body table-responsive p-0",children:Object(yn.jsxs)("table",{className:"table table-sm m-0",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[d?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("th",{style:{width:16}}),Object(yn.jsx)("th",{style:{width:16}})]}):null,Object(yn.jsx)("th",{scope:"col",style:{width:32},children:"cant"}),Object(yn.jsx)("th",{scope:"col",children:"Descripcion"}),u?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("th",{scope:"col",className:"text-right",style:{width:120},children:"Precio"}),Object(yn.jsx)("th",{scope:"col",className:"text-right",style:{width:120},children:"Subtotal"})]}):null,d?Object(yn.jsx)("th",{scope:"col",style:{minWidth:"4rem",maxWidth:"8rem"},children:Object(yn.jsx)("span",{className:"sr-only",children:"acciones"})}):null]})}),Object(yn.jsx)("tbody",{children:r.length?r.map((function(t){return e.total+=1*t.subtotal,Object(yn.jsxs)("tr",{children:[d?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("td",{children:t.cantidad>1?Object(yn.jsx)("i",{className:"fas fa-minus mr-2 text-primary",title:"Quitar",style:{cursor:"pointer"},onClick:function(){return e.handleSetCantItem(t.store_items_id,-1)}}):Object(yn.jsx)("i",{className:"fas fa-minus mr-2 text-muted"})}),Object(yn.jsx)("td",{children:Object(yn.jsx)("i",{className:"fas fa-plus mr-2 text-primary",title:"Agregar",style:{cursor:"pointer"},onClick:function(){return e.handleSetCantItem(t.store_items_id,1)}})})]}):null,Object(yn.jsx)("th",{scope:"row",className:"text-right",children:t.cantidad}),Object(yn.jsxs)("td",{children:[t.inStorage?null:Object(yn.jsx)("i",{className:"text-warning fas fa-circle mr-1"}),Object(yn.jsx)("span",{className:"text-capitalize",children:t.producto}),t.descripcion?Object(yn.jsxs)("span",{className:"text-muted ml-2",children:["(",t.descripcion,")"]}):null]}),u?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("td",{className:"text-right",children:["$ ",parseFloat(t.precio).toFixed(2)]}),Object(yn.jsxs)("td",{className:"text-right",children:["$ ",t.subtotal.toFixed(2)]})]}):null,d?Object(yn.jsx)("td",{className:"d-print-none text-right",children:Object(yn.jsx)("button",{type:"button",className:"btn btn-sm btn-muted",disabled:!d,onClick:function(){return e.deleteItem(t.store_items_id)},children:Object(yn.jsx)("i",{className:"fas fa-trash"})})}):null]},t.store_items_id)})):Object(yn.jsx)("tr",{children:Object(yn.jsxs)("td",{className:"text-center",colSpan:d?7:4,children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Seleccione articulos primero"]})})}),r.length&&u?Object(yn.jsx)("tfoot",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("td",{className:"text-right",colSpan:d?4:2}),Object(yn.jsx)("th",{scope:"row",className:"text-right text-lg",children:"Total"}),Object(yn.jsx)("td",{className:"text-right text-primary text-lg pr-3",children:Object(yn.jsxs)("label",{children:["$ ",this.total.toFixed(2)]})}),d?Object(yn.jsx)("td",{}):null]})}):null]})}),i&&i.code?Object(yn.jsx)("div",{className:"card-footer",children:i.od===i.oi?Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsxs)("label",{className:"m-2",children:[Object(yn.jsx)("i",{className:"fas fa-eye"})," Graduacion"]}),Object(yn.jsx)("span",{className:"text",style:{cursor:"pointer"},onClick:function(){return e.handleSetCode(i)},children:i.code+i.od})]})}):Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsxs)("label",{className:"m-2",children:[Object(yn.jsx)("i",{className:"fas fa-eye"})," Graduacion ojo derecho"]}),Object(yn.jsx)("span",{className:"text",style:{cursor:"pointer"},onClick:function(){return e.handleSetCode(i)},children:i.code+i.od})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsxs)("label",{className:"m-2",children:[Object(yn.jsx)("i",{className:"fas fa-eye"})," Graduacion ojo izquierdo"]}),Object(yn.jsx)("span",{className:"text",style:{cursor:"pointer"},onClick:function(){return e.handleSetCode(i)},children:i.code+i.oi})]})]})}):null,a?Object(yn.jsx)(Gr,{codeDefault:s,cantDefault:n,handleAddItem:this.handleAddItem,handleCloseModal:function(){return e.setState({itemNew:!1})}}):null]})}}]),a}(xn.Component),Vr=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).handleSaveStorage=function(){var e=s.state,t=e.contact_id,a=e.exam_id,n=e.items,c=e.session,r=s.props.contact,i={id:t,contact:{id:r.id,name:r.nombre},exam_id:a,items:n,session:c,created_at:new Date};Hc.addDataTemporary(i),s.handleCancel()},s.handleCancel=function(){var e=s.props,t=e.handleClose,a=e._setContact;s.setState({contact_id:0,items:[],codes:{},exam_id:null,exam:{},examEdit:!1}),t(),a()},s.handleGetCategories=function(e){(0,s.props._getCategory)({id:e})},s.handleChangeInput=function(e,t){"exam"===e&&(t.category_id&&s.handleGetCategories(t.category_id),t.id?s.setState({exam_id:t.id,exam:t,codes:{}}):s.setState({exam_id:0,exam:{},codes:{}})),"codes"===e?s.setState({codes:t}):s.setState(Object(N.a)({},e,t))},s.handleCodeName=function(e){var t="";return e.depende_de?e.depende_de.depende_de?(t=e.depende_de.depende_de.meta.code,t+=e.depende_de.meta.code,t+=e.meta.code):(t=e.depende_de.meta.code,t+=e.meta.code):t=e.meta.code,t},s.getCategories=function(e,t){var a=t.category_id,n=t.esferaod,c=t.esferaoi,r=t.cilindrod,i=t.cilindroi,o=t.id,l=a&&e.id?s.handleCodeName(e):"XX",d="+000000",u="+000000";(r||n)&&(d=n>0?"+":"",d+=n.toFixed(2).toString().replace(".","")+r.toFixed(2).toString().replace("-","").replace(".","")),(i||c)&&(u=c>0?"+":"",u+=c.toFixed(2).toString().replace(".","")+i.toFixed(2).toString().replace("-","").replace(".","")),s.setState({exam_id:o,exam:t,codes:{code:l,od:d,oi:u}})},s.handleSave=function(e){var t=0,a=s.props,n=a.options,c=a._saveOrder,r=a._setContact,i=s.state,o=i.items,l=i.exam_id,d=i.session,u=i.contact_id,j=o.map((function(e){return 4===e.category&&t++,{cant:e.cantidad,price:e.precio,subtotal:e.subtotal,inStorage:e.inStorage,session:e.session,out:e.out,descripcion:e.descripcion,store_items_id:e.store_items_id}}));if(j.length===t)return window.Swal.fire({title:"Verificacion",text:"No hay productos para procesar en un pedido",icon:"warning"}),!1;var b={session:d,contact_id:u,items:JSON.stringify(j),status:0};console.log("[DEBUG ORDER data]",b),l&&(b.exam_id=parseInt(l)),Hc.handleSaveOrder(null,b,n,c,(function(){return r({})}))},s.state={session:ps.getSession(),contact_id:0,items:[],codes:{},exam_id:null,exam:{},examEdit:!1,load:!0},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.contact,a=e.exam;if(t.id){var s,n,c,r=Hc.getDataOneItem(t.id);if(r)this.setState({contact:t,contact_id:t.id,items:null!==(s=r.items)&&void 0!==s?s:[],session:null!==(n=r.session)&&void 0!==n?n:this.state.session,exam:null!==a&&void 0!==a?a:this.state.exam,exam_id:null!==(c=a.id)&&void 0!==c?c:this.state.exam_id})}}},{key:"componentDidUpdate",value:function(e){var t,a,s=this.props,n=s.category,c=s.contact,r=s.exam,i=s.msg_exams,o=s._setMsgExam,l=s._getContact,d=Hc.getDataOneItem(c.id);(e.category.id!==n.id&&this.getCategories(n,this.state.exam),e.msg_exams.length!==i.length&&i.length&&(i.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),o(),l(c.id),this.setState({load:!0})),e.contact.id!==c.id&&c.id)&&this.setState({contact:c,contact_id:c.id,items:null!==(t=d.items)&&void 0!==t?t:[],session:null!==(a=d.session)&&void 0!==a?a:this.state.session});e.exam.id!==r.id&&r.id&&this.setState({exam:r,exam_id:r.id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.contact_id,s=t.items,n=t.exam,c=t.exam_id,r=t.examEdit,i=t.codes,o=t.session,l=this.props,d=l.contact,u=l.load_order,j=l._saveExam;return Object(yn.jsxs)("div",{className:"card card-warning card-outline",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h3",{className:"card-title",children:[Object(yn.jsx)("i",{className:"fas fa-clipboard-list mr-1"}),"Nuevo pedido"]})}),Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("div",{className:"form-group d-print-none",children:Object(yn.jsx)(Er,{title:"cliente",legend:d.id?null:"Busque el paciente por nombre para crearun nuevo pedido",readOnly:null!==c})}),d.id?Object(yn.jsx)(pn.a.Fragment,{children:null!==c?Object(yn.jsx)(pn.a.Fragment,{children:r?Object(yn.jsx)("div",{className:"form-group",children:Object(yn.jsx)(Br,{id:c,examEdit:!0,exam:n,ChangeInput:this.handleChangeInput})}):Object(yn.jsxs)(pn.a.Fragment,{children:[Object(yn.jsx)("div",{className:"form-group",children:Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("div",{className:"input-group-prepend",children:Object(yn.jsxs)("span",{className:"input-group-text",children:[Object(yn.jsx)("i",{className:"fas fa-notes-medical mr-1"})," ","Examen:"]})}),Object(yn.jsx)("input",{type:"text",className:c?n.observaciones?"form-control text-right pr-2 bg-info text-bold":"form-control text-right pr-2":"form-control text-center",value:c?n.observaciones?c+" [Revise las observaciones]":c:"Sin examen",readOnly:!0}),Object(yn.jsx)("div",{className:"float-right",children:Object(yn.jsxs)("div",{className:"btn-group btn-sm",children:[Object(yn.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(t){return e.handleChangeInput("exam_id",null)},children:Object(yn.jsx)("i",{className:"fas fa-exchange-alt"})}),n.id?Object(yn.jsx)("button",{type:"button",className:"btn btn-info btn-sm",onClick:function(t){return e.handleChangeInput("examEdit",!0)},disabled:r,children:Object(yn.jsx)("i",{className:"fas fa-edit"})}):null]})})]})}),n.id>0&&n.status||!n.id?Object(yn.jsx)(Rr,{items:s,session:o,codes:i,ChangeInput:this.handleChangeInput}):Object(yn.jsx)("span",{className:"alert",children:Object(yn.jsxs)("h5",{className:"w-100 text-center",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),Object(yn.jsx)("span",{className:"text-muted",children:"Es necesario que el examen este terminado para continuar con el pedido"})]})})]})}):Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)(Xc,{exams:d.examenes,allSelect:!0,handleSelectedExam:function(t){return e.handleChangeInput("exam",t)}}),Object(yn.jsxs)("div",{className:"btn-group",children:[Object(yn.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.handleChangeInput("exam",{id:0})},children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Sin examen"]}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return wr.handleSaveExam(d,null,j)},children:[Object(yn.jsx)("i",{className:"fas fa-notes-medical mr-1"}),"Nuevo examen"]})]})]})}):null]}),r?null:Object(yn.jsx)("div",{className:"card-footer",children:Object(yn.jsx)("div",{className:"mailbox-controls text-right",children:Object(yn.jsxs)("div",{className:"btn-group",children:[Object(yn.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:this.handleCancel,children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),a?"Cancelar":"Cerrar"]}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:this.handleSaveStorage,disabled:!a,children:[Object(yn.jsx)("i",{className:"fas fa-clock mr-1"}),"Temporal"]}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-warning btn-sm text-bold",onClick:this.handleSave,disabled:!a||null===c||!s.length,children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"})," Guardar"]})]})})}),u?Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})}}]),a}(xn.Component),Yr={_setContact:wa.setContact,_getContact:wa.getContact,_saveExam:Ha.saveExam,_setMsgExam:Ha.setMessagesExam,_saveOrder:Ze.saveOrder,_getCategory:pt.getCategory},qr=Object(c.b)((function(e){var t=e.contact,a=e.exam,s=e.order,n=e.category;return{load_contact:t.loading,contact:t.contact,exam:a.exam,msg_exams:a.messages,options:s.options,load_order:s.loading,category:n.category}}),Yr)(Vr);function $r(e){var t=e.status,a=void 0!==t&&t,s=e.lab_id,n=void 0===s?"":s,r=e.npedidolab,i=void 0===r?"":r,o=e.handleChange,l=Object(c.d)((function(e){return e.contact})).suppliers,d=Object(c.c)(),u=function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value,n=s;"lab_id"===a&&(n=parseInt(s)),o&&o(a,n)};return Object(xn.useEffect)((function(){d(wa.getListSuppliers(1))}),[]),Object(yn.jsxs)("div",{className:"row m-2",children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(yn.jsx)("label",{children:"Laboratorio"}),Object(yn.jsx)("select",{className:a>1?"form-control disabled":"form-control",disabled:a>1,name:"lab_id",defaultValue:n,onChange:u,children:l&&l.length?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("option",{value:"0",children:"Seleccione un proveedor"}),l.map((function(e){return Object(yn.jsx)("option",{value:e.id,children:e.nombre},e.id)}))]}):Object(yn.jsx)("option",{value:"0",children:"Configure primero los proveedores"})})]})}),Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(yn.jsx)("label",{children:"Folio"}),Object(yn.jsx)("input",{type:"text",className:a>1?"form-control disabled":"form-control",disabled:a>1,name:"npedidolab",defaultValue:i,onChange:u})]})})]})}function Jr(e){var t=e.status,a=void 0!==t&&t,s=e.ncaja,n=void 0===s?"":s,c=e.observaciones,r=void 0===c?"":c,i=e.handleChange,o=function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value,n=s;"caja"===a&&(n=parseInt(s)),i&&i(a,n)};return Object(yn.jsxs)("div",{className:"row m-2",children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(yn.jsx)("label",{htmlFor:"lab",children:"Caja"}),Object(yn.jsx)("input",{type:"number",className:a>2?"form-control disabled":"form-control",disabled:a>2,name:"ncaja",min:"1",defaultValue:n,onChange:o})]})}),Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(yn.jsx)("label",{children:"Observaciones"}),Object(yn.jsx)("textarea",{name:"observaciones",className:a>2?"form-control disabled":"form-control",disabled:a>2,defaultValue:r,onChange:o})]})})]})}var Hr=a(89),Zr=Object(xn.createContext)(null),Xr=function(){return Object(xn.useContext)(Zr)};var Qr=function(e){var t=e.forPaid,a=e.handleClose,s=Object(xn.useContext)(or).data,n=Xr(),c=Object(xn.useState)({id:0,metodopago:1,metodoname:"efectivo",total:0,bank_id:null,details:null,auth:null}),r=Object(hn.a)(c,2),i=r[0],l=r[1],d=function(e){var t=e.name,a=e.value,s=e.type,n=a;"number"!==s&&"select-one"!==s||(n=parseFloat(a)),l(Object(o.a)(Object(o.a)({},i),{},Object(N.a)({},t,n)))},u=function(){var e=Object(Hr.a)(n.payments),s=0;if(!i.total)return window.Swal.fire({icon:"warning",title:"El total del abono debe ser mayor a 0",showConfirmButton:!1,timer:1500}),!1;if(1!==i.metodopago&&4!==i.metodopago&&0!==i.metodopago){if(!i.bank_id)return window.Swal.fire({icon:"warning",title:"Seleccione un banco",showConfirmButton:!1,timer:1500}),!1;if(i.auth.toString().length<4)return window.Swal.fire({icon:"warning",title:"Espesifique los ultimos 4 numeros de la tarjeta",showConfirmButton:!1,timer:1500}),!1;if(i.auth.toString().length>4)return window.Swal.fire({icon:"warning",title:"Espesifique solamente 4 numeros",showConfirmButton:!1,timer:1500}),!1}if(4===i.metodopago&&(console.log("Metodo Pago",i.metodoname),!i.auth))return window.Swal.fire({icon:"warning",title:"Espesifique el numero de autorizaci\xf3n",showConfirmButton:!1,timer:1500}),!1;e.push(Object(o.a)(Object(o.a)({},i),{},{id:"new".concat(Date.now().toString()),metodoname:ps.getMethodName(i.metodopago),total:t<i.total?t:i.total})),e.forEach((function(e){return s+=e.total})),a(),n.set(Object(o.a)(Object(o.a)({},n),{},{payments:e}))};return Object(yn.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yn.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yn.jsxs)("div",{className:"modal-content",children:[Object(yn.jsxs)("div",{className:"modal-header",children:[Object(yn.jsx)("h5",{className:"modal-title",children:"Capture el pago"}),Object(yn.jsx)("button",{type:"button",className:"close",onClick:function(){return a()},children:Object(yn.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yn.jsx)("div",{className:"modal-body p-2",children:Object(yn.jsxs)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),u()},children:[Object(yn.jsx)("div",{className:"row mb-2 bg-gray-light",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("h4",{className:"text-center",children:["Por pagar: ",Object(yn.jsxs)("span",{className:"text-success",children:["$ ",t]})]})})}),Object(yn.jsxs)("div",{className:"row my-2",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Metodo de pago"}),Object(yn.jsxs)("select",{name:"metodopago",className:"custom-select text-uppercase",onChange:function(e){var t=e.target;return d(t)},defaultValue:i.metodopago,children:[Object(yn.jsx)("option",{value:"1",children:"Efectivo"}),Object(yn.jsx)("option",{value:"2",children:"Tarjeta de debito"}),Object(yn.jsx)("option",{value:"3",children:"Tarjeta de credito"}),Object(yn.jsx)("option",{value:"4",children:"La marina"}),Object(yn.jsx)("option",{value:"5",children:"Cheque"}),Object(yn.jsx)("option",{value:"6",children:"Transferencia"}),Object(yn.jsx)("option",{value:"0",children:"Otro"})]})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Cantidad"}),Object(yn.jsx)("input",{type:"number",min:"0",className:"form-control text-right",name:"total",onChange:function(e){var t=e.target;return d(t)},autoFocus:!0})]})]}),1!==i.metodopago?Object(yn.jsxs)("div",{className:"row mb-2",children:[Object(yn.jsx)("div",{className:"col",children:4!==i.metodopago&&0!==i.metodopago?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("label",{children:"Banco"}),Object(yn.jsxs)("select",{name:"bank_id",className:"custom-select text-uppercase",onChange:function(e){var t=e.target;return d(t)},children:[Object(yn.jsx)("option",{value:"",children:"--Seleccione un banco--"}),s.map((function(e){return"bank"===e.name?Object(yn.jsx)("option",{value:e.id,children:e.data},e.id):null}))]})]}):i.metodopago?Object(yn.jsx)("h4",{className:"d-bloc text-center mt-4 text-success",children:"LA MARINA"}):Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("label",{children:"Espesifique"}),Object(yn.jsx)("input",{type:"text",name:"details",className:"form-control",onChange:function(e){var t=e.target;return d(t)}})]})}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:4!==i.metodopago?"Ultimos 4 digitos":"N. Autorizaci\xf3n"}),Object(yn.jsx)("input",{type:"number",name:"auth",className:"form-control",onChange:function(e){var t=e.target;return d(t)}})]})]}):null,t<i.total?Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("h4",{className:"text-center mt-4",children:1===i.metodopago?Object(yn.jsxs)(yn.Fragment,{children:["Cambio:",Object(yn.jsxs)("span",{className:"ml-2",children:["$ ",i.total-t]})]}):Object(yn.jsxs)("span",{className:"text-danger",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-2"}),"La cantidad cobrada es mayor al total"]})})})}):null]})}),Object(yn.jsxs)("div",{className:"modal-footer",children:[Object(yn.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return a()},children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return u()},disabled:!i.total,children:[Object(yn.jsx)("i",{className:"fas fa-money-bill mr-1"}),"Abonar"]})]})]})})})};function Wr(e){var t=function(){var e=Object(me.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Nn("sales",null,{orderBy:"created_at",order:"desc",itemsPage:100}),e.next=4,gn(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nn("sales",null,{orderBy:"created_at",order:"desc",itemsPage:25,search:t}),e.next=4,gn(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,s,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payments.forEach((function(e){"string"===typeof e.id&&(e.id=0)})),delete(a=Object(o.a)({},t)).id,delete a.created_at,delete a.customer,e.prev=5,console.log("DATA A GUARDAR------",a),s=t.id,n=Nn("sales",s),c=s?"PUT":"POST",console.log(n),e.next=11,gn(n,c,a);case 11:return e.abrupt("return",e.sent);case 14:e.prev=14,e.t0=e.catch(5),console.error("[Orus System] Error in saga/sales handledSaveSale",e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}();return{getSaleList:t,getSaleById:a,saveSale:s}}function Kr(e){var t=e.payed,a=void 0===t?0:t,s=e.order,n=e.text,c=e.btn,r=void 0===c?"primary":c,i=Xr(),l=Wr(),d=Object(xn.useContext)(wn).auth,u={id:0,customer:{id:0,name:"venta de mostrador"},contact_id:2,items:[],session:ps.getSession(),discount:0,subtotal:0,total:0,payments:[],branch_id:d.branch.id},j=i.items,b=i.discount,m=i.total,h=void 0===m?0:m,x=i.created_at,p=i.id,O=i.customer,f=i.payments,v=h-a,g=d.branch,N=0===i.discount?ps.getPagado(i.payments):ps.getPagado(i.payments)+i.discount,y=i.total<=N,w=0,S=function(){l.saveSale(i).then((function(e){e.data?(i.set(Object(o.a)(Object(o.a)({},i),{},{id:e.data.id})),window.Swal.fire({title:"Venta Guardada",text:"\xbfQuieres imprimir el ticket de la venta?",icon:"question",showCancelButton:!0,confirmButtonText:"Imprimir",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss?ps.confirm("Cerrar la venta actual",(function(){i.set(u)})):setTimeout(C,1e3)}))):console.error("")}))},C=function(){if("/notas"!==window.location.pathname)return!1;window.print()},_=function(){i.set(u)};return Object(xn.useEffect)((function(){return y&&i.subtotal?i.id?null:void S():null}),[y,i.total]),Object(xn.useEffect)((function(){return window.addEventListener("afterprint",(function(){_()})),function(){window.removeEventListener("afterprint",(function(){_()}))}}),[]),Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("button",{className:"btn btn-".concat(r," ml-2 d-print-none"),disabled:!f.length,onClick:S,children:[Object(yn.jsx)("i",{className:n?"fas fa-print mr-1":"fas fa-print"}),n]}),Object(yn.jsxs)("div",{className:"d-none d-print-block fixed-top bg-white",style:{maxWidth:380},id:"print_sale_"+p,children:[Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("div",{className:"card m-0",children:Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("h4",{className:"text-right",style:{fontSize:28,fontFamily:"sans-serif"},children:Object(yn.jsxs)("i",{children:[s?"Pedido":"Nota",":"," ",Object(yn.jsx)("strong",{children:s||p})]})}),Object(yn.jsx)("h6",{className:"text-right mb-2",style:{fontSize:18,fontFamily:"sans-serif"},children:Object(yn.jsx)("strong",{children:In()(x).format("LL")})}),Object(yn.jsx)("h2",{className:"text-center",style:{fontSize:54,fontFamily:"sans-serif"},children:Object(yn.jsx)("center",{children:Object(yn.jsx)("strong",{children:"\xd3ptica Madero"})})}),Object(yn.jsx)("h4",{className:"text-center mb-4",style:{fontSize:22,fontFamily:"sans-serif"},children:Object(yn.jsxs)("em",{children:["Julio Cesar Cardenas Martinez",Object(yn.jsx)("br",{}),Object(yn.jsxs)("span",{className:"text-capitalize",children:["sucursal: ",g.name]}),Object(yn.jsx)("br",{}),Object(yn.jsxs)("span",{children:["Tel: ",g.phone]}),Object(yn.jsx)("br",{}),Object(yn.jsx)("span",{className:"text-capitalize",children:g.address})]})}),Object(yn.jsxs)("h4",{className:"text-uppercase text-center mb-1",style:{fontSize:20,fontFamily:"sans-serif"},children:[O&&O.name?O.name:"Venta de mostrador",Object(yn.jsx)("br",{}),Object(yn.jsx)("strong",{children:Object(yn.jsx)("em",{style:{fontSize:24},children:O&&O.telefonos?O.telefonos.t_movil?O.telefonos.t_movil:O.telefonos.t_casa?O.telefonos.t_casa:O.telefonos.t_oficina:"--"})})]})]})})})}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col text-center",children:Object(yn.jsx)("h2",{style:{fontSize:36,fontFamily:"sans-serif"},children:Object(yn.jsx)("strong",{children:"Pedido"})})})}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("table",{className:"table",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{style:{fontSize:26,fontFamily:"sans-serif"},children:"Cant"}),Object(yn.jsx)("th",{style:{fontSize:26,fontFamily:"sans-serif"},children:"Descripcion"}),Object(yn.jsx)("th",{style:{fontSize:26,fontFamily:"sans-serif"},children:"Total"})]})}),Object(yn.jsx)("tbody",{children:j.map((function(e,t){var a=parseFloat(e.cant*e.price);return w+=a,Object(yn.jsxs)("tr",{className:"text-capitalize",children:[Object(yn.jsx)("td",{style:{fontSize:22,fontFamily:"sans-serif"},children:e.cant}),Object(yn.jsx)("td",{style:{fontSize:22,fontFamily:"sans-serif"},children:e.producto}),Object(yn.jsx)("td",{className:"text-right",style:{fontSize:24,fontFamily:"sans-serif"},children:a})]},t)}))}),Object(yn.jsx)("tfoot",{children:Object(yn.jsx)("tr",{children:Object(yn.jsxs)("td",{className:"text-right",colSpan:"3",children:[b?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Subtotal: ",Object(yn.jsxs)("label",{children:["$ ",w]})]}),Object(yn.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Descuento: ",Object(yn.jsxs)("label",{children:["$ ",b]})]})]}):null,Object(yn.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Total: ",Object(yn.jsxs)("label",{children:["$ ",h]})]}),a?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Abonado: ",Object(yn.jsxs)("label",{children:["$ ",a]})]}),v?Object(yn.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Saldo: ",Object(yn.jsxs)("label",{children:["$ ",v]})]}):Object(yn.jsx)("div",{className:"text-center d-block w-100 my-3",children:Object(yn.jsx)("h3",{className:"text-muted text-bold",children:"::: Cuenta Pagada :::"})})]}):null]})})})]})})}),Object(yn.jsx)("div",{className:"text-justify text-lg",children:Object(yn.jsxs)("ul",{className:"d-block",style:{fontFamily:"sans-serif"},children:[Object(yn.jsx)("li",{children:"Armazones usados, viejos y/o resecos son responsabilidad del cliente"}),Object(yn.jsx)("li",{children:"Armazones reparados por el cliente pierden garantia de proovedor"})]})})]})]})}function ei(e){var t=e.nota,a=e.orderId,s=Object(xn.useState)({showPayment:!1,totalPayments:0,toPaid:0}),n=Object(hn.a)(s,2),r=n[0],i=n[1],l=Object(c.c)(),d=Object(c.d)((function(e){return e.sales})).sale;return Object(xn.useEffect)((function(){if(d.id){var e=0;d.payments.forEach((function(t){return e+=parseInt(t.total)})),i(Object(o.a)(Object(o.a)({},r),{},{totalPayments:e,toPaid:parseInt(d.total)-e}))}else(a=t.id)&&l(gs.getSale(a));var a}),[d]),Object(xn.useEffect)((function(){return function(){l(gs.setSale())}}),[]),d&&d.id?Object(yn.jsx)("div",{className:"card",children:Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsxs)("div",{className:"row d-print-none",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Nota:"})," ",d.id]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Total:"})," $",d.subtotal]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Abonado:"})," $",r.totalPayments]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Por pagar:"})," ",Object(yn.jsxs)("span",{className:"text-success text-bold",children:["$",r.toPaid>=0?r.toPaid:0]})]})]}),Object(yn.jsx)("div",{className:"row d-print-none",children:Object(yn.jsx)("div",{className:"col table-responsive",children:Object(yn.jsxs)("table",{className:"table table-sm",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"Folio"}),Object(yn.jsx)("th",{children:"Metodo"}),Object(yn.jsx)("th",{children:"Total"}),Object(yn.jsx)("th",{children:"Fecha"}),Object(yn.jsx)("th",{children:"Recibio"}),Object(yn.jsx)("th",{style:{width:16},children:Object(yn.jsx)("span",{className:"sr-only",children:"DELETE"})})]})}),Object(yn.jsx)("tbody",{children:d.payments.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:e.id}),Object(yn.jsx)("td",{className:"text-uppercase",children:e.metodoname}),Object(yn.jsxs)("td",{children:["$",e.total]}),Object(yn.jsx)("td",{children:e.created_at}),Object(yn.jsx)("td",{children:e.created.name}),Object(yn.jsx)("td",{children:Object(yn.jsx)("button",{type:"button",className:"btn btn-default",onClick:function(){return function(e){var t=e.id,a=e.total,s=e.metodoname;ps.confirm("Realmente desea eliminar el pago ".concat(s,", de ").concat(a),(function(){l(gs.deletePayment({id:t,sale_id:d.id}))}))}(e)},children:Object(yn.jsx)("i",{className:"fas fa-trash"})})})]},e.id)}))})]})})}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col text-right",children:Object(yn.jsxs)("div",{className:"btn-group",children:[Object(yn.jsx)(Kr,{sale:d,order:a,payed:r.totalPayments,text:"Imprimir",btn:"default"}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-primary d-print-none",disabled:!r.toPaid,onClick:function(){i(Object(o.a)(Object(o.a)({},r),{},{showPayment:!0}))},children:[Object(yn.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar"]})]})})}),r.showPayment&&Object(yn.jsx)(Qr,{handleClose:function(){i(Object(o.a)(Object(o.a)({},r),{},{showPayment:!1}))},sale:Object(o.a)(Object(o.a)({},d),{},{contact_id:d.customer.id}),forPaid:r.toPaid})]})}):Object(yn.jsxs)("span",{className:"d-block text-center text-dark my-4",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Sin datos de ventas"]})}var ti=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).getOrderData=function(){var e,t=s.props.order;s.setState(Object(o.a)(Object(o.a)({},t),{},{lab_id:null!==(e=t.laboratorio&&t.laboratorio.id)&&void 0!==e?e:0}))},s.handleDeleteOrder=function(){var e=s.props,t=e.order,a=e.options,n=e._deleteOrder;Hc.handleDeleteOrder(t,a,n)},s.handleClose=function(e){var t=s.props._setOrder;e&&e.preventDefault(),t(),s.props.handleChangePanel(null,0)},s.handleChangeInput=function(e,t){s.setState(Object(N.a)({},e,t))},s.handleSave=function(){var e=s.state,t=e.id,a=e.npedidolab,n=e.ncaja,c=e.status,r=e.lab_id,i=e.observaciones,l=e.items,d=s.props,u=d.options,j=d._saveOrder,b=d.currentUser,m=l.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{cant:e.cantidad,price:e.precio})})),h={npedidolab:a,ncaja:n,status:c,observaciones:i,items:JSON.stringify(m),branch_id:b.branch.id};return r&&(h.lab_id=r),1===c&&!r&&toString(a).length?(window.Swal.fire("Verificaci\xf3n","Los campos de laboratorio estan vacios","error"),!1):2!==c||n?void Hc.handleSaveOrder(t,h,u,j):(window.Swal.fire("Verificaci\xf3n","El numero de caja esta vacio","error"),!1)},s.state={id:0,paciente:{},session:null,lab_id:0,npedidolab:"",observaciones:"",ncaja:0,items:[],exam:{},codes:{},status:0,created:{},created_at:null,updated:{},updated_at:null},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){this.getOrderData()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.order;e.order.id!==a.id&&a.id&&this.getOrderData()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e._setOrder,a=e._setSale;t(qe.order),a(Os.sale)}},{key:"render",value:function(){var e,t,a=this,s=this.state,n=s.id,c=s.paciente,r=s.session,i=s.lab_id,o=s.npedidolab,l=s.ncaja,d=s.observaciones,u=s.items,j=s.exam,b=void 0===j?{}:j,m=s.codes,h=s.status,x=s.created,p=s.created_at,O=s.updated,f=s.updated_at,v=this.props,g=v.order,N=v.loading,y=new Date(null!==(e=c.f_nacimiento)&&void 0!==e?e:"")<new Date?In()(c.f_nacimiento):null,w=Object.values(null!==(t=c.telefonos)&&void 0!==t?t:{}).filter((function(e){return""!==e}));return Object(yn.jsx)(yn.Fragment,{children:!N&&g?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("div",{className:"card card-warning card-outline d-print-none",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h3",{className:"card-title",children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-clipboard-list"}),"Pedido",Object(yn.jsx)("span",{className:"ml-1 badge badge-pill badge-warning",children:n})]})}),Object(yn.jsx)("div",{className:"p-0 card-body",children:Object(yn.jsxs)("div",{className:"mailbox-read-info",children:[Object(yn.jsxs)("h5",{children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-user"}),Object(yn.jsx)("span",{className:"text-capitalize",children:c.nombre}),"admin"===this.props.role?Object(yn.jsxs)("span",{className:"float-right mailbox-read-time",children:["Fecha de nacimiento:"," ",y?Object(yn.jsxs)(yn.Fragment,{children:[y.format("LL"),Object(yn.jsxs)("label",{className:"ml-1",children:["(",In()().diff(y,"years")," a\xf1os)"]})]}):"NO REGISTRADO"]}):null]}),Object(yn.jsxs)("h6",{children:[c.email?Object(yn.jsxs)("span",{children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-envelope"}),c.email]}):null,Object(yn.jsxs)("span",{className:"float-right mailbox-read-time",children:["Pedido registrado ",In()(p).fromNow()]})]}),w.length?Object(yn.jsxs)("h6",{children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-phone"}),Object(yn.jsx)("span",{className:"mx-1",children:w.map((function(e,t){return t?", ".concat(e):"".concat(e)}))})]}):null]})}),Object(yn.jsx)("div",{className:"card-footer",children:Object(yn.jsx)("div",{className:"text-right mailbox-controls",children:Object(yn.jsxs)("div",{className:"btn-group",children:[Object(yn.jsxs)("a",{href:"#close",className:"btn btn-secondary btn-sm",onClick:function(e){return a.handleClose(e)},children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-ban"}),"Cerrar"]}),Object(yn.jsxs)("button",{className:"btn btn-warning btn-sm",onClick:this.handleSave,children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-save"})," Guardar"]})]})})}),N?Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]}),Object(yn.jsxs)("div",{className:"row mt-4",children:[Object(yn.jsxs)("div",{className:"col-lg-4 col-md-6 col-sm-12 d-print-none",children:[Object(yn.jsx)("h6",{className:"w-100 d-block",children:"Acciones"}),Object(yn.jsxs)("div",{className:"card",children:[Object(yn.jsx)("div",{className:"text-center mailbox-controls with-border",children:Object(yn.jsxs)("div",{className:"btn-group",children:[g.nota&&!g.nota.id?Object(yn.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Eliminar",onClick:this.handleDeleteOrder,children:Object(yn.jsx)("i",{className:"far fa-trash-alt"})}):null,c.telefonos&&c.telefonos.t_movil?Object(yn.jsx)("a",{href:"https://wa.me/52"+c.telefonos.t_movil.replace(" ",""),className:"btn btn-default btn-sm",title:"Abrir WhatsApp",target:"_blank",rel:"noopener noreferrer",children:Object(yn.jsx)("i",{className:"fas fa-mobile-alt"})}):null,c.email&&Object(yn.jsx)("a",{href:"mailto:"+c.email,className:"btn btn-default btn-sm",title:"Enviar e-mail",target:"_blank",rel:"noopener noreferrer",children:Object(yn.jsx)("i",{className:"fas fa-at"})})]})}),N?Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]}),Object(yn.jsx)("h6",{className:"w-100 d-block",children:"Estado"}),Object(yn.jsxs)("div",{className:"card mt-2",children:[Object(yn.jsx)("div",{className:"btn-group-vertical",children:Hc.getStatusType.map((function(e,t){return Object(yn.jsx)("button",{type:"button",className:h===t?"btn btn-primary btn-sm text-capitalize text-bold":"btn btn-default btn-sm text-capitalize",onClick:function(e){a.setState({status:t})},children:e},t)}))}),N?Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})]}),Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"card h-100 m-0",children:[Object(yn.jsx)("div",{className:"card-header d-print-none",children:Object(yn.jsxs)("h5",{className:"card-title w-100 d-block mb-2 text-capitalize text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-shield-alt mr-1"}),Hc.handleStatusString(h)]})}),Object(yn.jsx)("div",{className:"card-body p-0",children:Object(yn.jsxs)("div",{className:"p-0 mailbox-read-message m-0",children:[0===h?Object(yn.jsx)(Rr,{items:u,codes:m,session:r,noPrice:!0,ChangeInput:this.handleChangeInput}):null,1===h?Object(yn.jsx)($r,{lab_id:i,npedidolab:o,status:h,handleChange:this.handleChangeInput}):null,2===h?Object(yn.jsx)(Jr,{ncaja:l,observaciones:d,status:h,handleChange:this.handleChangeInput}):null,h>=3?Object(yn.jsxs)("div",{className:"px-2",children:[Object(yn.jsx)("div",{className:"my-2 border rounded card border-warning d-print-none",children:Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("h5",{className:"card-title",children:"Estado de la entrega"}),Object(yn.jsxs)("div",{className:"ml-1 icheck-success d-inline",children:[Object(yn.jsx)("input",{type:"checkbox",checked:3!==h,id:"checkboxSuccess1",onChange:function(e){return a.handleChangeInput("status",3===h?4:3)}}),Object(yn.jsx)("label",{htmlFor:"checkboxSuccess1"})]})]})}),g&&g.id?Object(yn.jsx)(ei,{nota:g.nota,orderId:g.id}):null]}):null]})}),N?Object(yn.jsx)("div",{className:"overlay dark d-print-none",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})})]}),Object(yn.jsxs)("div",{className:"row mt-4 d-print-none",children:[b&&b.id?Object(yn.jsxs)("div",{className:"col pt-6",children:[Object(yn.jsx)("h6",{className:"w-100 d-block",children:"Examen"}),Object(yn.jsx)("div",{className:"card mt-2",children:Object(yn.jsx)("div",{className:"card-body",children:Object(yn.jsx)("div",{className:"p-0 mailbox-read-message",children:Object(yn.jsx)(Br,{id:b.id,examEdit:!1,exam:b})})})})]}):null,Object(yn.jsxs)("div",{className:"col-".concat(b&&b.id?3:12," pt-6"),children:[Object(yn.jsx)("h6",{className:"w-100 d-block",children:"Meta data"}),Object(yn.jsx)(Yc,{register:null!==p&&void 0!==p?p:"",created:x?x.name:"",updated:O?O.name:"",updated_at:null!==f&&void 0!==f?f:""})]})]})]}):null})}}]),a}(xn.Component),ai={_saveOrder:Ze.saveOrder,_deleteOrder:Ze.deleteOrder,_setOrder:Ze.setOrder,_setSale:gs.setSale},si=Object(c.b)((function(e){var t=e.order,a=e.users;return{order:t.order,role:a.dataLoggin.roles[0],currentUser:a.dataLoggin,options:t.options,loading:t.loading}}),ai)(ti),ni=(a(172),function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;Object(Cn.a)(this,a),(s=t.call(this,e)).handleMessege=function(e){var t=e.target,a=t.value,n=t.name;s.setState(Object(N.a)({},n,a.toLowerCase()))},s.sendMessenger=Object(me.a)(ue.a.mark((function e(){var t,a,n,c,r,i,o;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props,a=t.table,n=t.idRow,c=s.state,r=c.message,c.load||s.setState({load:!0}),i=pe("messengers",null),o={table:a,idRow:n,message:r},e.next=7,he(i,"POST",o,null);case 7:e.sent?s.getMessengers():(window.alert("Ups!\n Algo salio mal, intentelo mas tarde."),s.setState({load:!1}));case 9:case"end":return e.stop()}}),e)}))),s.getMessengers=Object(me.a)(ue.a.mark((function e(){var t,a,n,c,r,i,o,l;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.state.load,a=s.props,n=a.table,c=a.idRow,r=pe("messengers",null,{table:n,idRow:c,page:1}),t||s.setState({load:!0}),e.next=7,he(r);case 7:i=e.sent,o=i.data,l=i.message,o?s.setState({messages:o,message:"",load:!1}):l&&(window.alert("Ups!\n Algo salio mal, intentelo mas tarde."),s.setState({load:!1}));case 11:case"end":return e.stop()}}),e)})));var n=JSON.parse(localStorage.getItem("OrusSystem"));return s.state={messages:[],message:"",load:!0,host:n.host,token:n.token,user:n.idUser},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){this.getMessengers()}},{key:"componentDidUpdate",value:function(e,t){e.pagado!==this.props.pagado&&this.getMessengers()}},{key:"render",value:function(){var e=this.state,t=e.messages,a=e.load,s=e.message,n=e.user,c=this.props.idRow;return Object(yn.jsxs)("div",{className:"card direct-chat direct-chat-primary d-print-none",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h3",{className:"card-title",children:[Object(yn.jsx)("i",{className:"fas fa-comments mr-1"}),"Chat",Object(yn.jsx)("span",{className:"badge badge-pill badge-secondary ml-1",children:c})]})}),a?Object(yn.jsx)("div",{className:"card-body",children:Object(yn.jsx)("div",{className:"card-text text-center p-4",children:Object(yn.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(yn.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):t.length?Object(yn.jsx)(pn.a.Fragment,{children:Object(yn.jsx)("div",{className:"card-body",children:Object(yn.jsx)("div",{className:"direct-chat-messages",id:"boxchat",children:t.map((function(e){var t="/img/avatars/avatar5.png";return 1===e.created_user.rol&&(t="/img/avatars/avatar2.png"),e.created_user.rol||(t="/img/avatars/avatar3.png"),2===e.created_user.id&&(t="/img/avatars/avatar4.png"),Object(yn.jsxs)("div",{className:e.created_user.id===n?"direct-chat-msg right":"direct-chat-msg",children:[Object(yn.jsxs)("div",{className:"direct-chat-infos clearfix",children:[Object(yn.jsx)("span",{className:e.created_user.id===n?"direct-chat-name float-right":"direct-chat-name float-left",children:e.created_user.name}),Object(yn.jsx)("span",{className:e.created_user.id===n?"direct-chat-timestamp float-left":"direct-chat-timestamp float-right",children:In()(e.updated_at).format("lll")})]}),Object(yn.jsx)("img",{className:"direct-chat-img",src:1===e.created_user.id?"/img/avatars/OrusBot.png":t,alt:"message user image1"}),Object(yn.jsx)("div",{className:"direct-chat-text",children:e.mensaje})]},e.id)}))})})}):Object(yn.jsx)("div",{className:"card-body",children:Object(yn.jsx)("div",{className:"card-text text-center p-4",children:Object(yn.jsxs)("h5",{children:[Object(yn.jsx)("i",{className:"fas fa-comment-slash mr-1"}),"No hay mensajes aun"]})})}),Object(yn.jsx)("div",{className:"card-footer",children:Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("input",{type:"text",name:"message",placeholder:"Escriba un mensaje ...",className:"form-control",value:s,onChange:this.handleMessege}),Object(yn.jsx)("span",{className:"input-group-append",children:Object(yn.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.sendMessenger,disabled:!(s.length>5),children:"Enviar"})})]})})]})}}]),a}(xn.Component)),ci=Object(c.b)((function(e){return{mainRole:e.users.dataLoggin.roles[0]}}),{})(ni);var ri={_getContact:wa.getContact,_setContact:wa.setContact,_getExam:Ha.getExam,_setExam:Ha.setExam},ii=Object(c.b)((function(e){var t=e.contact,a=e.exam;return{contact:t.contact,exam:a.exam}}),ri)((function(e){var t=e._getContact,a=e._getExam,s=e._setContact,n=e._setExam,c=e.handleChangePanel,r=Object(xn.useState)([]),i=Object(hn.a)(r,2),o=i[0],l=i[1],d=Object(xn.useState)(!0),u=Object(hn.a)(d,2),j=u[0],b=u[1],m=Object(xn.useState)(0),h=Object(hn.a)(m,2),x=h[0],p=h[1];return Object(xn.useEffect)((function(){j&&(l(Hc.getDataTemporary(!0)),b(!1),s(),n())}),[j]),Object(yn.jsx)(Dn,{title:"Examenes sin orden",icon:"notes-medical",color:"info",itemSelected:x,handleDeleteItem:function(){Hc.removeDataTemporary(x.id,(function(){return b(!0)})),p(0)},handleEditItem:function(){x.contact.id&&t(x.contact.id),x.exam_id&&a(x.exam_id),p(0),c(null,2)},children:Object(yn.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{}),Object(yn.jsx)("th",{children:"Paciente"}),Object(yn.jsx)("th",{children:"Examen"}),Object(yn.jsx)("th",{children:"Productos"}),Object(yn.jsx)("th",{children:"Session"}),Object(yn.jsx)("th",{children:"Creado"})]})}),Object(yn.jsx)("tbody",{children:o.map((function(e,s){return Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("td",{children:Object(yn.jsxs)("div",{className:"icheck-primary",children:[Object(yn.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",id:"exam_"+e.id,checked:e.id===x.id,onChange:function(t){return function(e,t){e.checked||(t={id:0}),p(t)}(t.target,e)}}),Object(yn.jsx)("label",{htmlFor:"exam_"+e.id,className:"sr-only"})]})}),Object(yn.jsx)("th",{className:"text-truncate",children:Object(yn.jsx)("a",{href:"#select",onClick:function(s){return function(e,s){e.preventDefault(),s.contact.id&&t(s.contact.id),s.exam_id&&a(s.exam_id),p(0),c(null,2)}(s,e)},children:Object(yn.jsx)("span",{className:"text-capitalize",children:e.contact.name})})}),Object(yn.jsxs)("td",{children:["# ",e.exam_id]}),Object(yn.jsx)("td",{className:"text-right",children:Object(yn.jsx)("span",{className:"badge badge-dark",children:e.items.length})}),Object(yn.jsx)("td",{style:{maxWidth:"250px"},children:Object(yn.jsx)("p",{className:"text-truncate",children:Object(yn.jsx)("span",{children:e.session})})}),Object(yn.jsx)("td",{children:In()(e.created_at).fromNow()})]},s)}))})]})})}));function oi(e){e.handleChangePanel;var t=Object(c.d)((function(e){return e.order})),a=t.list,s=t.metaList,n=t.loading,r=Object(c.c)(),i=Object(xn.useState)({page:1,orderby:"created_at",order:"desc",status:0,itemsPage:1}),l=Object(hn.a)(i,2),d=l[0],u=l[1],j=Object(xn.useState)({lab_id:null,npedidolab:null,ncaja:null,observaciones:null,status:0}),b=Object(hn.a)(j,2),m=b[0],h=b[1],x=function(e){u(Object(o.a)(Object(o.a)({},d),{},{page:e}))},p=function(e,t){e&&h(Object(o.a)(Object(o.a)({},m),{},Object(N.a)({},e,t)))};return Object(xn.useEffect)((function(){return r(Ze.getListOrder(d)),function(){r(Ze.setListOrder())}}),[d]),Object(yn.jsxs)("div",{className:"card",children:[Object(yn.jsxs)("div",{className:"card-header",children:[Object(yn.jsx)("i",{className:"fas fa-folder-open mr-1"}),Object(yn.jsx)("label",{children:"Reporte de pedidos"})]}),Object(yn.jsx)("div",{className:"card-body",children:Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col table-responsive",children:a.map((function(e){var t,a,n,c,i,o,l,u,j,b,h,O,f,v,g,N,y;return Object(yn.jsxs)("div",{children:[Object(yn.jsxs)("table",{className:"table table-striped",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"Order"}),Object(yn.jsx)("th",{children:"Paciente"}),Object(yn.jsx)("th",{children:"Creado"}),Object(yn.jsx)("th",{children:"Realizo"})]})}),Object(yn.jsx)("tbody",{children:Object(yn.jsxs)("tr",{className:"text-capitalize",children:[Object(yn.jsx)("th",{children:e.id}),Object(yn.jsx)("td",{children:e.paciente.nombre.toLowerCase()}),Object(yn.jsx)("td",{children:In()(e.created_at).fromNow()}),Object(yn.jsx)("td",{children:e.created.name.toLowerCase()})]})}),Object(yn.jsx)("tfoot",{children:Object(yn.jsx)("tr",{children:Object(yn.jsx)("td",{colSpan:"5",className:"text-center",children:Object(yn.jsx)(Tn,{meta:s,handlePagination:x})})})})]}),e.exam&&Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsxs)("h5",{className:"my-4",children:[Object(yn.jsx)("i",{className:"fas fa-notes-medical mr-1"}),"Examen"]}),Object(yn.jsx)(vr,{esferaod:null!==(t=e.exam.esferaod)&&void 0!==t?t:0,esferaoi:null!==(a=e.exam.esferaoi)&&void 0!==a?a:0,cilindrod:null!==(n=e.exam.cilindrod)&&void 0!==n?n:0,cilindroi:null!==(c=e.exam.cilindroi)&&void 0!==c?c:0,ejeod:null!==(i=e.exam.ejeod)&&void 0!==i?i:0,ejeoi:null!==(o=e.exam.ejeoi)&&void 0!==o?o:0,adiciond:null!==(l=e.exam.adiciond)&&void 0!==l?l:0,adicioni:null!==(u=e.exam.adicioni)&&void 0!==u?u:0,adicion_media_od:null!==(j=e.exam.adicion_media_od)&&void 0!==j?j:0,adicion_media_oi:null!==(b=e.exam.adicion_media_oi)&&void 0!==b?b:0,dpod:null!==(h=e.exam.dpod)&&void 0!==h?h:0,dpoi:null!==(O=e.exam.dpoi)&&void 0!==O?O:0,alturaod:null!==(f=e.exam.alturaod)&&void 0!==f?f:0,alturaoi:null!==(v=e.exam.alturaoi)&&void 0!==v?v:0,lcmarca:null!==(g=e.exam.lcmarca)&&void 0!==g?g:0,lcgod:null!==(N=e.exam.lcgod)&&void 0!==N?N:0,lcgoi:null!==(y=e.exam.lcgoi)&&void 0!==y?y:0,showContactGlasses:!1,readOnly:!0})]}),Object(yn.jsxs)("h5",{className:"my-4",children:[Object(yn.jsx)("i",{className:"fas fa-clipboard-list mr-1"}),"Productos"]}),Object(yn.jsxs)("table",{className:"table table-striped",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"Producto"}),Object(yn.jsx)("th",{children:"Cantidad"})]})}),Object(yn.jsx)("tbody",{children:e.items.map((function(e){return Object(yn.jsxs)("tr",{className:"text-capitalize",children:[Object(yn.jsx)("td",{children:e.producto.toLowerCase()}),Object(yn.jsx)("td",{children:e.cantidad})]},e.id)}))})]}),Object(yn.jsxs)("h5",{className:"my-4",children:[Object(yn.jsx)("i",{className:"fas fa-cog mr-1"}),"Proceso"]}),Object(yn.jsxs)("div",{className:"my-4 py-4",children:[Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{htmlFor:"status",children:"\xbfCual es la siguiente accion de este pedido?"}),Object(yn.jsxs)("select",{id:"status",className:"form-control",defaultValue:e.status,onChange:function(e){var t=e.target.value;p("status",parseInt(t))},children:[Object(yn.jsx)("option",{children:"-- Seleccione primero una accion --"}),Object(yn.jsx)("option",{value:"1",children:"Laboratorio"}),Object(yn.jsx)("option",{value:"2",children:"Bicelaci\xf3n"})]})]})})}),Object(yn.jsxs)("div",{className:"row",children:[1===m.status?Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("h5",{children:"Laboratorio"}),Object(yn.jsx)($r,{lab_id:m.lab_id,npedidolab:m.npedidolab,handleChange:p})]}):null,2===m.status?Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("h5",{children:"Bicelaci\xf3n"}),Object(yn.jsx)(Jr,{ncaja:m.ncaja,observaciones:m.observaciones,handleChange:p})]}):null]})]}),Object(yn.jsx)("div",{className:"text-center mt-4",children:Object(yn.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return function(e){if(!m.status)return window.Swal.fire({title:"Verificacion",text:"Seleccione una accion, antes de guardar",icon:"warning"}),!1;if(1===m.status){if(!m.lab_id)return window.Swal.fire({title:"Verificacion",text:"Seleccione un laboratorio",icon:"warning"}),!1;if(!m.npedidolab)return window.Swal.fire({title:"Verificacion",text:"Escriba el folio del laboratorio",icon:"warning"}),!1}if(2===m.status&&!m.ncaja)return window.Swal.fire({title:"Verificacion",text:"Escriba el numero de la caja de bicelaci\xf3n",icon:"warning"}),!1;e.id?Hc.handleSaveOrder(e.id,m,d,(function(e){return r(Ze.saveOrder(e))})):console.error("[error] Se perdio el identificador del pedido",e.id)}(e)},children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"}),"Actualizar pedido"]})})]},e.id)}))})})}),n&&Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})})]})}var li=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(e){var s;return Object(Cn.a)(this,a),(s=t.call(this,e)).handleShowReport=function(e){(0,s.props._setList)(),s.handleShowPanel(e,4)},s.showPanel=function(e){switch(e){case 1:return Object(yn.jsx)(ii,{handleChangePanel:s.handleShowPanel});case 2:return Object(yn.jsx)(qr,{handleClose:function(){return s.handleChangeInput("panel",0)}});case 3:return Object(yn.jsx)(si,{handleChangePanel:s.handleShowPanel});case 4:return Object(yn.jsx)(oi,{handleChangePanel:s.handleShowPanel});default:return Object(yn.jsx)(Fr,{handleChangePanel:s.handleShowPanel})}},s.handleSetSelectOptions=function(e){var t=e.target,a=s.props._setOptions,n=t.value,c=t.name,r=n;"itemsPage"===c&&(r=parseInt(r)),"status"===c&&""!==r&&(r=parseInt(r)),a({key:c,value:r})},s.handleChangeInput=function(e,t){s.setState(Object(N.a)({},e,t))},s.handleShowPanel=function(e,t){e&&e.preventDefault(),s.handleChangeInput("panel",t)},s.state={panel:null,idOrder:0},s}return Object(_n.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e._getOrder,s=e._setPageName,n=t.params.id;n&&!isNaN(n)?(console.log("[OrusSystem] cargando orden al inicio: ",n),a(n),this.setState({panel:3})):"reporte"===n&&this.setState({panel:4,idOrder:n}),s("pedidos")}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,s=a.order,n=a.history,c=a.messages,r=a._setContact,i=this.state.panel;if(t.panel!==i)switch(i){case 1:n.push("/pedidos/pending");break;case 2:n.push("/pedidos/new");break;case 3:r(),s.id&&n.push("/pedidos/".concat(s.id));break;case 4:n.push("/pedidos/reporte");break;default:n.push("/pedidos")}e.messages.length!==c.length&&c.length&&(c.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),i&&4!==i&&this.setState({panel:0}))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e._setList,a=e._setSales,s=e._setOrder;console.log("[Orus Systme] Cerrando pedido"),t(),a({result:Os}),s()}},{key:"render",value:function(){var e=this,t=this.state.panel,a=this.props,s=a.order,n=a.options,c=a.mainRole,r=this.showPanel(t);return Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-md-2 col-sm-12 d-print-none",children:[Object(yn.jsxs)("a",{href:"#new",className:2===t?"disabled mb-3 btn btn-secondary btn-block":"mb-3 btn btn-warning btn-block",onClick:function(t){t.preventDefault(),e.handleShowPanel(t,2)},disabled:2===t,children:[Object(yn.jsx)("i",{className:"mr-2 fas fa-plus"}),"Pedido nuevo"]}),Object(yn.jsxs)("div",{className:"card",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsxs)("h5",{className:"card-title text-dark",children:[Object(yn.jsx)("i",{className:"mr-2 fas fa-ellipsis-v"}),"Menu y filtros"]})}),Object(yn.jsx)("div",{className:"p-0 card-body",children:Object(yn.jsxs)("ul",{className:"nav nav-pills flex-column",children:[Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)("a",{href:"#item",className:1===t?"nav-link active":"nav-link",onClick:function(t){t.preventDefault(),e.handleShowPanel(t,1)},children:[Object(yn.jsx)("i",{className:"mr-2 fas fa-notes-medical"})," Pendientes"]})}),Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)("a",{href:"#item",className:t?"nav-link":"nav-link active",onClick:function(t){return e.handleShowPanel(t,0)},children:[Object(yn.jsx)("i",{className:"mr-2 fas fa-clipboard-list"})," Pedidos"]})}),"admin"===c?Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)("a",{href:"#item",className:4===t?"nav-link active":"nav-link",onClick:this.handleShowReport,children:[Object(yn.jsx)("i",{className:"mr-2 fas fa-folder-open"})," Reporte"]})}):null,t?null:Object(yn.jsxs)(xn.Fragment,{children:[Object(yn.jsx)("li",{className:"nav-item",children:"\xa0"}),Object(yn.jsxs)("li",{className:"p-2 nav-item",children:[Object(yn.jsx)("label",{htmlFor:"status",children:"Estado del pedido"}),Object(yn.jsxs)("select",{className:"form-control ",name:"status",id:"status",value:n.status,onChange:this.handleSetSelectOptions,children:[Object(yn.jsx)("option",{value:"",children:"-- Todos --"}),Object(yn.jsx)("option",{value:"0",children:"En proceso"}),Object(yn.jsx)("option",{value:"1",children:"Laboratorio"}),Object(yn.jsx)("option",{value:"2",children:"Bicelaci\xf3n"}),Object(yn.jsx)("option",{value:"3",children:"Terminado"}),Object(yn.jsx)("option",{value:"4",children:"Entregado"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yn.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:n.orderby,onChange:this.handleSetSelectOptions,children:[Object(yn.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yn.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yn.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:n.order,onChange:this.handleSetSelectOptions,children:[Object(yn.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yn.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yn.jsxs)("li",{className:"nav-item p-2",children:[Object(yn.jsx)("label",{htmlFor:"itemsPage",children:"Numero de pedidos"}),Object(yn.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:n.itemsPage,onChange:this.handleSetSelectOptions,children:[Object(yn.jsx)("option",{value:"10",children:"ver 10"}),Object(yn.jsx)("option",{value:"20",children:"ver 20"}),Object(yn.jsx)("option",{value:"50",children:"ver 50"}),Object(yn.jsx)("option",{value:"100",children:"ver 100"})]})]})]})]})})]}),3===t?Object(yn.jsx)(ci,{table:"orders",idRow:s.id}):null]}),Object(yn.jsx)("div",{className:"col-md-10 col-sm-12",children:r})]})}}]),a}(xn.Component),di={_getOrder:Ze.getOrder,_setOptions:Ze.setOptions,_setList:Ze.setListOrder,_setContact:wa.setContact,_setSales:gs.setListSales,_setPageName:v.changeNamePage,_setOrder:Ze.setOrder},ui=Object(c.b)((function(e){var t=e.order,a=e.users;return{order:t.order,options:t.options,messages:t.messages,user:a.dataLoggin,mainRole:a.dataLoggin.roles[0]}}),di)(li);var ji=function(e){var t=e.items,a=e.cantDefault,s=void 0===a?1:a,n=e.handleClose,c=e.handleSelect,r=Object(xn.useState)({item:null,cant:s,precio:0}),i=Object(hn.a)(r,2),l=i[0],d=i[1],u=l.precio<=0,j=function(){n&&n()},b=function(e){var t=e.name,a=e.value;d(Object(o.a)(Object(o.a)({},l),{},Object(N.a)({},t,parseInt(a))))};return Object(yn.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yn.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yn.jsxs)("div",{className:"modal-content",children:[Object(yn.jsxs)("div",{className:"modal-header",children:[Object(yn.jsx)("h5",{className:"modal-title",children:"Seleccione un producto"}),Object(yn.jsx)("button",{type:"button",className:"close",onClick:j,children:Object(yn.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yn.jsx)("div",{className:"modal-body p-2",children:Object(yn.jsx)("div",{className:"table-responsive overflow-auto",style:{height:"12rem"},children:l.item&&l.item.id?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("div",{className:"text-uppercase mb-4",children:l.item.producto}),Object(yn.jsxs)("div",{className:"form-group row",children:[Object(yn.jsx)("label",{className:"col-2 col-form-label",children:"Cantidad"}),s<2?Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("input",{type:"number",placeholder:"Cantidad",name:"cant",className:"form-control",defaultValue:l.cant,onChange:function(e){var t=e.target;return b(t)}})}):Object(yn.jsx)("span",{className:"col text-lg",children:l.cant}),Object(yn.jsx)("label",{className:"col-2 col-form-label",children:"Precio"}),l.item.precio?Object(yn.jsxs)("span",{className:"col text-lg",children:["$",l.precio]}):Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("input",{type:"number",placeholder:"Precio",name:"precio",className:"form-control",defaultValue:l.precio,onChange:function(e){var t=e.target;return b(t)}})})]})]}):Object(yn.jsx)("table",{className:"table table-sm",children:Object(yn.jsx)("tbody",{children:t?Object(yn.jsx)(yn.Fragment,{children:t.length?Object(yn.jsx)(yn.Fragment,{children:t.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("td",{className:"text-right",children:Object(yn.jsx)("span",{className:"badge badge-dark",children:e.codigo})}),Object(yn.jsx)("td",{className:"text-capitalize text-left",children:Object(yn.jsx)("a",{href:"#select",onClick:function(t){return function(e,t){e.preventDefault(),d(Object(o.a)(Object(o.a)({},l),{},{precio:t.precio,item:t}))}(t,e)},children:e.producto})}),Object(yn.jsxs)("td",{children:["$",e.precio]})]},e.id)}))}):Object(yn.jsx)("tr",{children:Object(yn.jsx)("td",{children:"No existen productos para esta coincidencia"})})}):Object(yn.jsx)("tr",{children:Object(yn.jsxs)("td",{children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"})," No se recibieron los productos"]})})})})})}),Object(yn.jsxs)("div",{className:"modal-footer",children:[Object(yn.jsxs)("button",{type:"button",className:"btn btn-default",onClick:j,children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=Object(o.a)(Object(o.a)({},l),{},{item:Object(o.a)(Object(o.a)({},l.item),{},{precio:l.precio})});console.log("ITEM SELECCIONADO",l.item.precio),c(e),d({item:null,cant:1,precio:0}),j()},disabled:u,children:[Object(yn.jsx)("i",{className:"fas fa-check mr-1"}),"Seleccionar"]})]})]})})})};var bi=Object(c.b)((function(e){var t=e.storeItem;return{loading:t.loading,messages:t.messages}}))((function(e){var t=e.messages,a=e.loading,s=Object(xn.useState)(""),n=Object(hn.a)(s,2),c=n[0],r=n[1],i=Object(xn.useState)(!1),l=Object(hn.a)(i,2),d=l[0],u=l[1],j=Object(xn.useState)(1),b=Object(hn.a)(j,2),m=b[0],h=b[1],x=Xr(),p=x.session,O=function(){var e=Object(xn.useState)({productList:[],getProducts:function(e){gn(Nn("store",null,{search:e})).then((function(e){0!==e.data.length?s(Object(o.a)(Object(o.a)({},a),{},{productList:e.data})):(window.Swal.fire("Producto no encontrado","Verifica el nombre del producto","warning"),console.error("Error al obtener los productos"))}))}}),t=Object(hn.a)(e,2),a=t[0],s=t[1];return a}(),f=O.getProducts,v=O.productList,g=function(){if(c.length>2){var e=c.split("*");console.log("CODES----",e);var t=c;2===e.length&&(t=e[1],h(parseInt(e[0]))),f(t),r("")}},N=function(e){return{id:0,cant:e.cant,price:parseFloat(e.item.precio),subtotal:parseInt(e.cant)*parseFloat(e.item.precio),inStorage:parseInt(e.item.cantidades)>=parseInt(e.cant),out:parseInt(e.item.cantidades)-parseInt(e.cant),cantInStore:parseInt(e.item.cantidades),session:p,store_items_id:e.item.id,descripcion:e.item.descripcion,producto:e.item.producto.toLowerCase(),category:e.item.categoria?e.item.categoria.id:0}},y=function(e){var t=x.items.filter((function(t){return t.store_items_id===e.store_items_id})),a=x.items.filter((function(t){return t.store_items_id!==e.store_items_id}));if(t.length){var s=parseInt(e.cant)+parseInt(t[0].cant),n=Object(o.a)(Object(o.a)({},t[0]),{},{cant:s,subtotal:parseFloat(e.price)*s,inStorage:s>=parseInt(e.cantInStore),out:parseInt(e.cantInStore)-s});a.push(n)}else a.push(e);var c=ps.getSubTotal(a);x.set(Object(o.a)(Object(o.a)({},x),{},{items:a,total:ps.getTotal(c,x.discount),subtotal:c}))};return Object(xn.useEffect)((function(){if(v.length)if(1===v.length){var e=N({item:v[0],cant:m||1});e.price<=0?window.Swal.fire({title:"Verificar",text:"El item que intentas agregar tiene un precio de $0, revisa el precio en el almacen",icon:"warning",showCancelButton:!1,confirmButtonText:"Ok",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}):(y(e),h(1))}else u(!0);else!v.length&&t.length&&t.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})}))}),[v]),Object(yn.jsxs)("div",{className:"btn-group text-center d-print-none",children:[Object(yn.jsx)("input",{className:"form-control",placeholder:"Codigo",onChange:function(e){return function(e){var t=e.value;r(t)}(e.target)},onKeyPress:function(e){return function(e){"Enter"===e&&g()}(e.key)},value:c}),a?Object(yn.jsx)("i",{className:"fas fa-2x fa-spinner fa-spin"}):Object(yn.jsx)("button",{type:"button",className:"btn btn-primary",onClick:g,disabled:!(c.length>2),children:Object(yn.jsx)("i",{className:"fas fa-barcode"})}),d&&v.length?Object(yn.jsx)(ji,{items:v,cantDefault:m,handleClose:function(){u(!1)},handleSelect:function(e){var t=N(e);y(t),h(1)}}):null]})}));function mi(){var e=Xr(),t=ps.getPagado(e.payments),a=!(e.subtotal-t>0&&0===e.discount&&0===t);return Object(yn.jsx)("button",{className:"btn btn-primary mx-1",title:"Agregar descuento",onClick:function(){var t=window.prompt("Agregue el descuento a aplicar");if(null===t)return null;var a=0;if(e.items.forEach((function(e){return a+=e.subtotal})),t.match(/^[0-9]+$/gm)){var s=parseInt(t);ps.getSubTotal(e.items);e.set(Object(o.a)(Object(o.a)({},e),{},{discount:s})),console.log("Aplicando descuento")}else if(t.match(/^[0-9]{2,3}%$/gm)){var n=parseInt(t.replace("%",""))/100,c=parseInt(a*n);ps.getSubTotal(e.items);e.set(Object(o.a)(Object(o.a)({},e),{},{discount:c})),console.log("Aplicando descuento")}},disabled:a,children:Object(yn.jsx)("i",{className:"fas fa-percent"})})}var hi=function(e){var t=e.handleClose,a=e.handleSelect,s=Wr(),n=Object(xn.useState)(""),c=Object(hn.a)(n,2),r=c[0],i=c[1],o=Object(xn.useState)([]),l=Object(hn.a)(o,2),d=l[0],u=l[1],j=Xr(),b=0!==d.length?d:0!==j.length?j:[],m=function(e){"Enter"===e&&h(r)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.length,s.getSaleById(e).then((function(e){e?u(e.data):console.error("Error al obtener la venta individual")}))};return Object(xn.useEffect)((function(){s.getSaleList().then((function(e){e?u(e.data):console.error("Error al obtener las ventas")}))}),[r]),Object(yn.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yn.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yn.jsxs)("div",{className:"modal-content",children:[Object(yn.jsxs)("div",{className:"modal-header",children:[Object(yn.jsx)("h5",{className:"modal-title",children:"Seleccione una venta"}),Object(yn.jsx)("button",{type:"button",className:"close",onClick:function(){return t()},children:Object(yn.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yn.jsxs)("div",{className:"modal-body p-2",children:[Object(yn.jsx)("div",{className:"w-full d-block mb-4",children:Object(yn.jsxs)("div",{className:"input-group",children:[Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Buscar por folio o nombre",onChange:function(e){return function(e){var t=e.value;i(t)}(e.target)},onKeyPress:function(e){var t=e.key;return m(t)}}),Object(yn.jsx)("button",{type:"button",className:"btn btn-default ml-1",onClick:function(){return m("Enter")},children:Object(yn.jsx)("i",{className:"fas fa-search"})})]})}),Object(yn.jsx)("div",{className:"table-responsive overflow-auto",style:{height:"12rem"},children:Object(yn.jsx)("table",{className:"table table-sm",children:Object(yn.jsx)("tbody",{children:b?Object(yn.jsx)(yn.Fragment,{children:b.length?Object(yn.jsx)(yn.Fragment,{children:b.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("td",{className:"text-right",children:Object(yn.jsx)("span",{className:"badge badge-dark",children:e.id})}),Object(yn.jsx)("td",{className:"text-capitalize text-left",children:Object(yn.jsx)("a",{href:"#select",onClick:function(t){return function(e,t){e&&e.preventDefault(),j.items.length?window.Swal.fire({title:"Ventas",text:"Si cargas una venta, se cerrar\xe1 la venta actual",icon:"question",showCancelButton:!0,confirmButtonText:"Cargar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){if(e.dismiss)return null;a(t)})):a(t)}(t,e)},children:e.customer?e.customer.name:"--"})}),Object(yn.jsx)("td",{className:"text-right",children:In()(e.created_at).fromNow()})]},e.id)}))}):Object(yn.jsx)("tr",{children:Object(yn.jsx)("td",{children:"No existen ventas para esta coincidencia"})})}):Object(yn.jsx)("tr",{children:Object(yn.jsxs)("td",{children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"})," Escriba el folio o nombre para cargar una venta"]})})})})})]}),Object(yn.jsx)("div",{className:"modal-footer",children:Object(yn.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return t()},children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]})})]})})})};function xi(){var e=Xr(),t=Object(xn.useState)(!1),a=Object(hn.a)(t,2),s=a[0],n=a[1],c=!!e.items.length;return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("button",{className:"btn btn-primary mr-1",title:"Cargar una venta",onClick:function(){n(!0)},disabled:c,children:Object(yn.jsx)("i",{className:"fas fa-list"})}),s&&Object(yn.jsx)(hi,{handleClose:function(){n(!1)},handleSelect:function(t){t.payments.forEach((function(e){return e.total})),n(!1),e.set({id:t.id,contact_id:t.customer.id,customer:t.customer,items:t.items,session:t.session,discount:t.discount,subtotal:t.subtotal,total:t.total,payments:t.payments,branch_id:t.branch.id,created_at:t.created_at})}})]})}function pi(){var e=Object(xn.useState)({showPayment:!1}),t=Object(hn.a)(e,2),a=t[0],s=t[1],n=Xr(),c=ps.getForPay(n.items,n.payments,n.discount),r=0===n.discount?ps.getPagado(n.payments):ps.getPagado(n.payments)+n.discount,i=n.subtotal<=r;return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("button",{className:"btn btn-success ml-2 d-print-none",onClick:function(){s(Object(o.a)(Object(o.a)({},a),{},{showPayment:!0}))},disabled:!n.items.length||n.subtotal&&i,children:Object(yn.jsx)("i",{className:"fas fa-money-bill-alt"})}),a.showPayment&&Object(yn.jsx)(Qr,{handleClose:function(){s(Object(o.a)(Object(o.a)({},a),{},{showPayment:!1}))},sale:Object(o.a)(Object(o.a)({},n),{},{contact_id:n.customer.id}),forPaid:c})]})}function Oi(){var e=Xr(),t=!e.customer.id&&!e.items.length,a=Object(xn.useContext)(wn).auth,s=function(){console.log("Borrar venta con boton"),e.set({id:0,customer:{id:0,name:"venta de mostrador"},contact_id:2,items:[],session:ps.getSession(),discount:0,subtotal:0,total:0,payments:[],branch_id:a.branch.id})};return Object(yn.jsx)("button",{className:"btn btn-warning ml-1",title:"Nueva venta",onClick:function(){ps.confirm("\xbfDesea terminar esta venta y crear una nueva?",s)},disabled:t,children:Object(yn.jsx)("i",{className:"fas fa-window-close"})})}var fi=function(e){var t=e.handleClose,a=Object(xn.useState)({textSearch:""}),s=Object(hn.a)(a,2),n=s[0],c=s[1],r=Object(xn.useState)([]),i=Object(hn.a)(r,2),l=i[0],d=i[1],u=Xr(),j=Object(xn.useContext)(wn).auth,b=Dc(),m=function(){t&&t()},h=function(){var e={search:n.textSearch,itemsPage:"25",orderBy:"id",order:"desc"};b.getContacts(e).then((function(e){e?d(e.data):console.error("Error al obtener usuario")}))};return Object(yn.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yn.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yn.jsxs)("div",{className:"modal-content",children:[Object(yn.jsxs)("div",{className:"modal-header",children:[Object(yn.jsx)("h5",{className:"modal-title",children:"Seleccione un cliente"}),Object(yn.jsx)("button",{type:"button",className:"close",onClick:m,children:Object(yn.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yn.jsxs)("div",{className:"modal-body p-2",children:[Object(yn.jsxs)("div",{className:"form-inline mb-3",children:[Object(yn.jsx)("div",{className:"form-group",children:Object(yn.jsx)("input",{className:"form-control",placeholder:"Buscar cliente",onChange:function(e){return function(e){var t=e.value;c({textSearch:t})}(e.target)},onKeyPress:function(e){return function(e){if("Enter"===e){if(n.textSearch.length>4)return h();window.Swal.fire({title:"Verificacion",text:"Escriba un nombre valido, al menos 5 caracteres",icon:"warning"})}}(e.key)},onBlur:function(){return n.textSearch.length>4&&h()},autoFocus:!0})}),Object(yn.jsx)("div",{className:"form-group pl-2",children:Object(yn.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:h,disabled:n.textSearch.length<5,children:Object(yn.jsx)("i",{className:"fas fa-search"})})})]}),Object(yn.jsx)("div",{className:"table-responsive overflow-auto",style:{height:"12rem"},children:Object(yn.jsx)("table",{className:"table table-sm",children:Object(yn.jsxs)("tbody",{children:[l.map((function(e){return Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("td",{className:"text-right",children:Object(yn.jsx)("span",{className:"badge badge-dark",children:e.id})}),Object(yn.jsx)("td",{className:"text-left",children:Object(yn.jsx)("a",{href:"#select",onClick:function(a){return function(e,a){e.preventDefault(),console.log("ID customer venta:",u.customer.id,"ID customer seleccionado:",a.id),u.customer.id!==a.id?(console.log(![0,2].includes(u.customer.id)),[0,2].includes(u.customer.id)?(u.set(Object(o.a)(Object(o.a)({},u),{},{customer:{id:a.id,name:a.name?a.name:"Venta de mostrador"},contact_id:a.id})),t()):window.Swal.fire({title:"Ventas",text:"Esta accion creara una nueva venta \xbfEsta seguro que desea crear una nueva venta?",icon:"question",showCancelButton:!0,confirmButtonText:"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(console.log("Entrando al Dissmiss"),console.log(a),u.set({id:0,customer:{id:a.id,name:a.name},contact_id:a.id,items:[],session:ps.getSession(),discount:0,subtotal:0,total:0,payments:[],branch_id:j.branch.id}),t())}))):t()}(a,e)},className:"text-capitalize",children:e.name.toLowerCase()})})]},e.id)})),!l.length&&Object(yn.jsx)(yn.Fragment,{children:[0,2].includes(u.customer.id)?Object(yn.jsx)("tr",{children:Object(yn.jsx)("td",{children:"No existen pacientes con esta coincidencia"})}):Object(yn.jsx)("tr",{children:Object(yn.jsx)("td",{children:Object(yn.jsxs)("span",{className:"alert alert-warning text-center",children:["Cambiar de usuario, provocara cerrar la"," ",Object(yn.jsx)("strong",{children:"venta"})," actual."]})})})})]})})})]}),Object(yn.jsx)("div",{className:"modal-footer",children:Object(yn.jsxs)("button",{type:"button",className:"btn btn-default",onClick:m,children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]})})]})})})};function vi(){var e=Object(xn.useState)(!1),t=Object(hn.a)(e,2),a=t[0],s=t[1],n=function(){s(!a)},c=Xr();return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("i",{className:"fas fa-user mr-1 text-indigo"}),"Cliente:",Object(yn.jsx)("label",{className:"text-capitalize ml-1",children:c.customer?c.customer.name:"XXX - vuelva a cargar"}),Object(yn.jsx)("button",{type:"button",className:"btn bg-indigo btn-sm ml-2",title:"Buscar cliente",onClick:n,children:Object(yn.jsx)("i",{className:"fas fa-exchange-alt"})}),a&&Object(yn.jsx)(fi,{handleClose:n})]})}var gi=function(e){var t,a=e.payment,s=void 0===a?{}:a,n=e.handleClose;return Object(yn.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yn.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yn.jsxs)("div",{className:"modal-content",children:[Object(yn.jsxs)("div",{className:"modal-header",children:[Object(yn.jsx)("h5",{className:"modal-title",children:"Detalles del abono"}),Object(yn.jsx)("button",{type:"button",className:"close",onClick:function(){return n()},children:Object(yn.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yn.jsxs)("div",{className:"modal-body p-2",children:[Object(yn.jsxs)("div",{className:"row mb-2",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{className:"mr-2",children:"Metodo de pago"}),Object(yn.jsx)("span",{children:s.metodoname})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{className:"mr-2",children:"Cantidad abonada"}),Object(yn.jsxs)("span",{children:["$",s.total]})]})]}),s.banco&&s.banco.id?Object(yn.jsxs)("div",{className:"row mb-2",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{className:"mr-2",children:"Banco"}),Object(yn.jsx)("span",{children:s.banco.value})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{className:"mr-2",children:"Auth"}),Object(yn.jsx)("span",{children:null!==(t=s.auth)&&void 0!==t?t:"--"})]})]}):null,s.id?Object(yn.jsxs)("div",{className:"row mb-2",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{className:"mr-2 d-block",children:"Folio"}),Object(yn.jsx)("span",{children:s.id})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{className:"mr-2 d-block",children:"Fecha"}),s.created_at?Object(yn.jsx)("span",{children:In()(s.created_at).format("LL")}):Object(yn.jsx)("span",{children:"--"})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{className:"mr-2 d-block text-uppercase",children:"Recibio"}),Object(yn.jsx)("span",{children:s.created&&s.created.name?s.created.name:"--"})]})]}):Object(yn.jsx)("div",{className:"row mb-2",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("span",{className:"alert alert-warning d-block text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Pago no acreditado!"]})})})]}),Object(yn.jsx)("div",{className:"modal-footer",children:Object(yn.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return n()},children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]})})]})})})};function Ni(e){var t,a,s=e.item,n=e.close,c=e.handleUpdate,r=Object(xn.useState)({cant:null!==(t=s.cant)&&void 0!==t?t:0,price:null!==(a=s.price)&&void 0!==a?a:0}),i=Object(hn.a)(r,2),l=i[0],d=i[1],u=function(e){var t=e.name,a=e.value;d(Object(o.a)(Object(o.a)({},l),{},Object(N.a)({},t,parseInt(a))))},j=function(){c(Object(o.a)(Object(o.a)(Object(o.a)({},s),l),{},{subtotal:l.cant*l.price}))};return console.log("[DEBUG] Item:",s),Object(yn.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yn.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yn.jsxs)("div",{className:"modal-content",children:[Object(yn.jsxs)("div",{className:"modal-header",children:[Object(yn.jsx)("h5",{className:"modal-title",children:Object(yn.jsx)("span",{className:"text-capitalize text-truncate",children:s.producto})}),Object(yn.jsx)("button",{type:"button",className:"close",onClick:function(){return n()},children:Object(yn.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yn.jsx)("div",{className:"modal-body p-2",children:Object(yn.jsxs)("div",{className:"row my-2",children:[Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Cantidad"}),Object(yn.jsx)("input",{type:"number",min:"0",className:"form-control text-right",name:"cant",defaultValue:l.cant,onChange:function(e){var t=e.target;return u(t)}})]}),Object(yn.jsxs)("div",{className:"col",children:[Object(yn.jsx)("label",{children:"Precio"}),Object(yn.jsx)("input",{type:"number",min:"0",className:"form-control text-right",name:"price",defaultValue:l.price,onChange:function(e){var t=e.target;return u(t)},onKeyPress:function(e){return function(e){"Enter"===e&&j()}(e.key)}})]})]})}),Object(yn.jsxs)("div",{className:"modal-footer",children:[Object(yn.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return n()},children:[Object(yn.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yn.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:j,children:[Object(yn.jsx)("i",{className:"fas fa-save mr-1"}),"Guardar"]})]})]})})})}function yi(){var e=Xr(),t=(Wr(),0===e.discount?ps.getPagado(e.payments):ps.getPagado(e.payments)+e.discount),a=e.subtotal<=t,s=Object(xn.useContext)(wn).auth,n=(s.rol,s.roles),c=Object(xn.useState)({showUpdateItem:!1,showPaymentDetails:!1,item:{},payment:{}}),r=Object(hn.a)(c,2),i=r[0],l=r[1],d=function(t){var a=e.items.filter((function(e){return e.store_items_id!==t.store_items_id})),s=ps.getSubTotal(a);e.set(Object(o.a)(Object(o.a)({},e),{},{items:a,total:ps.getTotal(s,e.discount),subtotal:s}))},u=function(t){var a=t.id,s=t.total,n=t.metodoname;console.log("DEBUG",a,s,n);var c=e.payments.filter((function(e){return e.id!==a}));ps.confirm("Realmente desea eliminar el pago de  $".concat(s),(function(){e.set(Object(o.a)(Object(o.a)({},e),{},{payments:c}))}))},j=function(e,t){console.log("Funcion ejecutada"),e&&e.preventDefault(),l(Object(o.a)(Object(o.a)({},i),{},{showUpdateItem:!0,item:t}))},b=function(){l(Object(o.a)(Object(o.a)({},i),{},{showUpdateItem:!1,item:{}}))};return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("table",{className:"table table-striped",children:Object(yn.jsxs)("tbody",{children:[e.items&&e.items.length?Object(yn.jsx)(yn.Fragment,{children:e.items.map((function(t,s){var c=e.subtotal&&a||e.payments.length||e.discount,r=In()(Date.now()).diff(In()(e.created_at),"days");return console.log("DIFERENCIA DE DIAS DE LA VENTA:",r),t.store_items_id?Object(yn.jsxs)("tr",{children:[wi(d,t,c),Object(yn.jsxs)("td",{onClick:function(e){"ventas"===n&&0!==r?alert("No puedes editar esta venta!"):j(null,t)},children:[Object(yn.jsx)("a",{href:"#details",className:"text-muted w-full d-block text-uppercase",onClick:function(e){if("ventas"===n)return null;j(e,t)},children:t.producto}),Object(yn.jsxs)("label",{className:"w-full d-block",children:[Object(yn.jsx)("span",{className:"badge badge-dark mr-1",children:t.cant}),"*",Object(yn.jsxs)("span",{className:t.price?"mx-1":"mx-1 text-danger",children:["$",t.price]}),"=",Object(yn.jsxs)("span",{className:t.subtotal?"ml-1":"ml-1 text-danger",children:["$",t.subtotal]})]})]})]},s):null}))}):null,e.discount?Object(yn.jsxs)("tr",{children:[wi((function(){ps.confirm("Realmente desea eliminar el descuento",(function(){e.set(Object(o.a)(Object(o.a)({},e),{},{discount:0}))}))}),null,a),Object(yn.jsxs)("td",{children:[Object(yn.jsx)("span",{className:"text-danger w-full d-block text-uppercase",children:"Descuento"}),Object(yn.jsx)("label",{className:"w-full d-block",children:Object(yn.jsxs)("span",{className:"ml-1 text-danger",children:["- $",e.discount]})})]})]}):null,e.payments.length?Object(yn.jsx)(yn.Fragment,{children:e.payments.map((function(e,t){var a=In()(Date.now()).diff(In()(e.created_at),"days");console.log("Diferencia de dias",a),console.log(e.created_at);var s="admin"!==n&&("ventas"===n&&0!==a);return Object(yn.jsxs)("tr",{children:[wi(u,e,s),console.log(e),Object(yn.jsxs)("td",{children:[Object(yn.jsxs)("a",{href:"#link",className:" w-full d-block text-uppercase",onClick:function(t){return function(e,t){e&&e.preventDefault(),l(Object(o.a)(Object(o.a)({},i),{},{showPaymentDetails:!0,payment:t}))}(t,e)},children:[Object(yn.jsx)("span",{className:e.id?"text-success":"text-warning text-bold",children:"Abono"}),Object(yn.jsx)("span",{className:"ml-1 text-muted",children:e.metodoname})]}),Object(yn.jsxs)("label",{className:"w-full d-block",children:[Object(yn.jsxs)("span",{className:"ml-1 text-muted",children:[In()(e.created_at).format("LL"),","]}),Object(yn.jsxs)("span",{className:"ml-1",children:["$",e.total]})]})]})]},t)}))}):null,a&&e.subtotal?Object(yn.jsx)("tr",{className:"table-info",children:Object(yn.jsx)("td",{colSpan:"2",children:Object(yn.jsxs)("span",{className:" w-full d-block text-uppercase text-center text-bold",children:[Object(yn.jsx)("i",{className:"fas fa-info-circle mr-1 text-primary"}),"Cuenta pagada"]})})}):null]})}),i.showPaymentDetails&&Object(yn.jsx)(gi,{handleClose:function(){l(Object(o.a)(Object(o.a)({},i),{},{showPaymentDetails:!1,payment:{}}))},payment:i.payment}),i.showUpdateItem&&Object(yn.jsx)(Ni,{item:i.item,handleUpdate:function(t){var a=e.items.filter((function(e){return e.store_items_id!==t.store_items_id}));a.push(t);var s=ps.getSubTotal(a);e.set(Object(o.a)(Object(o.a)({},e),{},{items:a,total:ps.getTotal(s,e.discount),subtotal:s})),b()},close:b})]})}function wi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(yn.jsx)("td",{style:{width:32},children:Object(yn.jsx)("button",{type:"button",className:a?"btn btn-default disabled":"btn btn-default",onClick:function(){e&&(t?e(t):e())},disabled:a,children:Object(yn.jsx)("i",{className:"fas fa-trash text-muted"})})})}function Si(){var e=Xr();return Object(yn.jsxs)("div",{children:[Object(yn.jsx)("label",{className:"mx-1",children:"Folio:"}),Object(yn.jsx)("span",{className:"mx-1",children:e.id?e.id:"Nuevo"}),Object(yn.jsx)("label",{className:"mx-1",children:"Fecha:"}),Object(yn.jsx)("span",{className:"mx-1",children:In()(e.created_at).format("L")}),e.pedido?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("label",{className:"mx-1",children:"Pedido:"}),Object(yn.jsx)("span",{className:"mx-1",children:e.pedido})]}):null]})}function Ci(){var e=Xr();return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("span",{className:"text-lg",children:"Por pagar:"}),Object(yn.jsxs)("label",{className:"text-lg ml-1",children:["$",ps.getForPay(e.items,e.payments,e.discount)]})]})}function _i(){var e=Xr();return Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("span",{className:"text-lg",children:"Total:"}),Object(yn.jsxs)("label",{className:"text-lg ml-1",children:["$",e.subtotal]})]})}function ki(){var e=Object(xn.useContext)(wn).auth,t=Object(c.d)((function(e){return e})),a=t.sales.loading,s=Object(c.c)(),n=Object(xn.useState)({id:0,customer:{id:0,name:"venta de mostrador"},contact_id:2,items:[],session:ps.getSession(),discount:0,subtotal:0,total:0,payments:[],branch_id:e.branch.id}),r=Object(hn.a)(n,2),i=r[0],l=r[1],d=Object(xn.useState)({pagado:0}),u=Object(hn.a)(d,2),j=u[0],b=u[1];return Object(xn.useEffect)((function(){var e=0,t=0;i.items.forEach((function(t){return e+=t.subtotal})),i.payments.forEach((function(e){return t+=e.total})),e===i.subtotal&&j.pagado===t||(i.subtotal=e,i.total=e-i.discount,i.pagado=t,b({pagado:t}))}),[]),Object(xn.useEffect)((function(){return s(v.changeNamePage("punto de venta")),function(){console.log("[Orus Systme] Cerrando venta"),localStorage.setItem("OrusSales","{}")}}),[]),Object(yn.jsx)(Zr.Provider,{value:Object(o.a)(Object(o.a)({},i),{},{set:l}),children:Object(yn.jsxs)("div",{className:"card border border-gray mb-4",style:{height:"36rem"},children:[Object(yn.jsxs)("div",{className:"card-body pb-2 d-print-none",children:[Object(yn.jsxs)("nav",{className:"row mb-2",children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)(vi,{})}),Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)(Si,{})}),Object(yn.jsx)("div",{className:"col-3",children:Object(yn.jsxs)("div",{className:"card-tools text-right",children:[Object(yn.jsx)(xi,{}),Object(yn.jsx)(mi,{}),Object(yn.jsx)(Oi,{})]})})]}),Object(yn.jsx)("div",{className:"overflow-auto text-right p-0 border border-gray",style:{height:"27rem"},children:Object(yn.jsx)(yi,{})})]}),Object(yn.jsx)("div",{className:"card-footer",children:Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col d-print-none",children:Object(yn.jsx)(_i,{})}),Object(yn.jsx)("div",{className:"col d-print-none",children:Object(yn.jsx)(Ci,{})}),Object(yn.jsxs)("div",{className:"col-6 text-right",children:[Object(yn.jsx)(bi,{}),Object(yn.jsx)(pi,{}),Object(yn.jsx)(Kr,{})]})]})}),a?Object(yn.jsx)("div",{className:"overlay dark",children:Object(yn.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})})}var Ei=a(35);function Li(e){var t=e.filters,a=Object(xn.useState)({payments:[],meta:{},page:1,load:!1}),s=Object(hn.a)(a,2),n=s[0],c=s[1],r=function(){var e=Object(me.a)(ue.a.mark((function e(){var a,s,r,i,l,d;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(o.a)({},t)).itemsPage=12,a.page=n.page,s=Nn("payments",null,a),console.log("REPORT PAYMENTS DETAILS URL",s),e.next=7,gn(s);case 7:r=e.sent,i=r.data,l=r.message,d=r.meta,i?c(Object(o.a)(Object(o.a)({},n),{},{payments:i,meta:d,load:!1})):l&&(console.log(l),c(Object(o.a)(Object(o.a)({},n),{},{load:!1})),console.error("[Orus system] Error in report payments details:",l),window.Swal.fire("Fallo de conexion",l,"error"));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(xn.useEffect)((function(){r()}),[t,n.page]),Object(yn.jsxs)("div",{className:"card card-success card-outline",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsx)("h3",{className:"card-title text-success",children:"Detallado"})}),Object(yn.jsx)("div",{className:"card-body",children:Object(yn.jsxs)("table",{className:"table table-sm",children:[Object(yn.jsx)("thead",{children:Object(yn.jsxs)("tr",{children:[Object(yn.jsx)("th",{children:"Metodo"}),Object(yn.jsx)("th",{children:"Cliente"}),Object(yn.jsx)("th",{children:"Pedido"}),Object(yn.jsx)("th",{children:"Total"})]})}),Object(yn.jsx)("tbody",{children:n.load?Object(yn.jsx)("tr",{children:Object(yn.jsxs)("td",{colSpan:"4",className:"text-center p-4",children:[Object(yn.jsx)("div",{className:"spinner-border text-primary mr-4",role:"status",children:Object(yn.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(yn.jsx)("span",{className:"font-weight-light font-italic",children:"Espere cargando datos de pagos"})]})}):n.payments.length?n.payments.map((function(e){return Object(yn.jsxs)("tr",{className:1===e.metodo?"text-success":"",children:[Object(yn.jsx)("th",{className:"text-uppercase",children:e.metodoname}),Object(yn.jsx)("td",{className:"text-capitalize",children:e.sale&&e.sale.customer?e.sale.customer.nombre:"--"}),Object(yn.jsx)("td",{children:Object(yn.jsx)("span",{className:"badge badge-primary",alt:"Cobrado por: "+e.created_user,title:"Cobrado por: "+e.created_user,children:e.sale&&e.sale.pedido?e.sale.pedido:"--"})}),Object(yn.jsx)("td",{className:"text-right",children:Ei.dollarUS.format(e.total)})]},e.id)})):Object(yn.jsx)("tr",{children:Object(yn.jsx)("th",{colSpan:"4",className:"text-center",children:Object(yn.jsxs)("h6",{className:"text-warning",children:[Object(yn.jsx)("i",{className:"fas fa-info mr-2"}),"No hay datos para este dia"]})})})})]})}),n.meta.total?Object(yn.jsxs)("div",{className:"card-footer",children:[1===n.meta.current_page?Object(yn.jsx)("a",{href:"#next",onClick:function(e){return e.preventDefault()},children:Object(yn.jsx)("i",{className:"fas fa-step-backward text-dark"})}):Object(yn.jsx)("a",{href:"#next",onClick:function(e){e.preventDefault(),c(Object(o.a)(Object(o.a)({},n),{},{page:n.page-1}))},children:Object(yn.jsx)("i",{className:"fas fa-step-backward"})})," "+n.page+" / "+n.meta.last_page+" ",n.meta.current_page===n.meta.last_page?Object(yn.jsx)("a",{href:"#next",onClick:function(e){return e.preventDefault()},children:Object(yn.jsx)("i",{className:"fas fa-step-forward text-dark"})}):Object(yn.jsx)("a",{href:"#next",onClick:function(e){e.preventDefault(),c(Object(o.a)(Object(o.a)({},n),{},{page:n.page+1}))},children:Object(yn.jsx)("i",{className:"fas fa-step-forward"})})]}):null]})}function Ii(e){var t=e.filters,a=e.changeState,s=t.user,n=t.date_end,c=t.date_start,r=Object(xn.useState)({rol:s.roles,total:0,efectivo:0,page:1,char:null}),i=Object(hn.a)(r,2),l=i[0],d=i[1],u=function(){var e=Object(me.a)(ue.a.mark((function e(){var s,r,i,u,j,b,m,h,x,p,O,f;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=Object(o.a)({},t)).itemsPage=12,s.page=l.page,s.type="methods",r=Nn("payments",null,s),console.log("REPORT PAYS URL",r),e.next=8,gn("payments?date_start=".concat(c,"&date_end=").concat(n,"&itemsPage=12&page=1&type=methods"));case 8:if(i=e.sent,u=i.data,j=i.message,!u){e.next=32;break}if(b=window.$("#donutChart").get(0).getContext("2d"),m={maintainAspectRatio:!0,responsive:!0},h=[],x=[],p=0,O=0,f={},l.char&&l.char.destroy(),u.message){e.next=25;break}if(!u||!u.length){e.next=20;break}return e.next=18,u.map((function(e){return h.push(e.method),x.push(e.total.toFixed(2)),"efectivo"===e.method&&(a("ventas",e.total),O=e.total),p+=e.total,null}));case 18:e.next=22;break;case 20:h=["No hay datos"],x=[0];case 22:d(Object(o.a)(Object(o.a)({},l),{},{total:p,efectivo:O})),e.next=28;break;case 25:console.error("[ORUS] Error al cargar la venta del dia",u.message),h=["No hay datos"],x=[100];case 28:f={labels:h,datasets:[{data:x,backgroundColor:["#f56954","#00a65a","#f39c12","#00c0ef","#3c8dbc","#d2d6de","#000"]}]},l.char=new window.Chart(b,{type:"pie",data:f,options:m}),e.next=34;break;case 32:return window.Swal.fire({title:"Error!",text:"Ups!\n Hubo un error al descargar las ventas",icon:"error",confirmButtonText:"Ok"}),e.abrupt("return",j);case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(xn.useEffect)((function(){u()}),[t]),Object(yn.jsxs)("div",{className:"card card-success card-outline",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsx)("h3",{className:"card-title text-success",children:l.rol?"Mis ventas del dia por metodo de pago":"Ventas del dia por metodo de pago"})}),Object(yn.jsxs)("div",{className:"card-body",children:[Object(yn.jsx)("canvas",{id:"donutChart"}),Object(yn.jsxs)("p",{children:[l.rol?null:Object(yn.jsxs)(pn.a.Fragment,{children:["Venta: ",Object(yn.jsx)("strong",{children:Ei.dollarUS.format(l.total)}),Object(yn.jsx)("br",{})]}),"Efectivo: ",Object(yn.jsx)("strong",{children:Ei.dollarUS.format(l.efectivo)})]})]})]})}function Ti(e){var t=e.filters,a=Object(xn.useState)({listBank:[],page:1,data:[],load:!1}),s=Object(hn.a)(a,2),n=s[0],c=s[1],r=function(){var e=Object(me.a)(ue.a.mark((function e(){var a,s,r,i,l;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(o.a)({},t)).itemsPage=12,a.page=n.page,a.type="banks",s=Nn("payments",null,a),console.log("REPORT BANK URL",s),e.next=8,gn(s);case 8:r=e.sent,i=r.data,l=r.message,i?c(Object(o.a)(Object(o.a)({},n),{},{data:i,load:!1})):l&&(c(Object(o.a)(Object(o.a)({},n),{},{load:!1})),console.error("[Orus system] Error in report payments details:",l),window.Swal.fire("Fallo de conexion",l,"error"));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(xn.useEffect)((function(){r()}),[t]),Object(yn.jsxs)("div",{className:"card card-success card-outline",children:[Object(yn.jsx)("div",{className:"card-header",children:Object(yn.jsx)("h3",{className:"card-title text-success",children:"Detallado de pagos bancarios"})}),Object(yn.jsx)("div",{className:"card-body",children:n.load?Object(yn.jsxs)("div",{children:[Object(yn.jsx)("div",{className:"spinner-border text-primary mr-4",role:"status",children:Object(yn.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(yn.jsx)("span",{className:"font-weight-light font-italic",children:"Espere cargando datos de banco"})]}):Object(yn.jsx)("ul",{className:"list-group",children:n.data.length?n.data.map((function(e,t){return Object(yn.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(yn.jsx)("label",{className:"text-uppercase",children:e.name}),Object(yn.jsx)("span",{className:"badge badge-primary",children:Ei.dollarUS.format(e.total)})]},t)})):Object(yn.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yn.jsxs)("h6",{className:"text-warning",children:[Object(yn.jsx)("i",{className:"fas fa-info mr-2"}),"No hay datos para este dia"]})})})})]})}a(173);function Di(e){var t=e.filters,a=e.changeState,s=t.user,n=t.branch_id,c=t.date_end,r=t.date_start,i=Object(xn.useState)({branch_id:n,user:s,date_start:r,date_end:c}),l=Object(hn.a)(i,2),d=l[0],u=l[1],j=Object(xn.useContext)(or),b=function(){var e=Object(xn.useState)({listUsers:[],user:{}}),t=Object(hn.a)(e,2),a=t[0],s=t[1],n={orderby:"username",order:"asc",rol:10,page:1};return Object(xn.useEffect)((function(){gn(Nn("users",null,n)).then((function(e){e?s(Object(o.a)(Object(o.a)({},a),{},{listUsers:e.data})):console.error("ERROR")}))}),[]),a}(),m=j.data.filter((function(e){return"branches"===e.name})),h=function(e,t){u(Object(o.a)(Object(o.a)({},d),{},Object(N.a)({},e,In()(t).format("YYYY-MM-DD"))))};return Object(yn.jsx)("div",{className:"border-bottom pb-3 mb-4",children:Object(yn.jsx)("div",{className:"card-body p-0 bg-light",children:Object(yn.jsxs)("div",{className:"form-group row col-lg-12 m-0",children:[Object(yn.jsx)("div",{className:"col-lg-1 mt-sm-3 ml-sm-3",children:Object(yn.jsx)("p",{className:"mt-2 font-weight-bold text-secondary h5",children:"Filtros"})}),Object(yn.jsx)("div",{className:"col-lg-2 mt-sm-3",children:Object(yn.jsx)("div",{className:"col-lg-12",children:Object(yn.jsxs)("select",{className:"form-control text-capitalize",defaultValue:n,onChange:function(e){var t=e.target;return u(Object(o.a)(Object(o.a)({},d),{},{branch_id:t.value}))},children:[Object(yn.jsx)("option",{value:"",children:""===n?"Sucursal":"Todas"}),m.map((function(e){return Object(yn.jsx)("option",{value:e.id,children:e.data.name},e.id)}))]})})}),Object(yn.jsx)("div",{className:"col-lg-2 mt-sm-3",children:Object(yn.jsx)("div",{className:"col-lg-12",children:Object(yn.jsxs)("select",{className:"form-control text-capitalize",defaultValue:s,onChange:function(e){var t=e.target;return u(Object(o.a)(Object(o.a)({},d),{},{user:t.value}))},children:[Object(yn.jsx)("option",{value:"",children:""===s?"Usuarios":"Todos"}),b.listUsers.map((function(e){return n?"doctor"!==e.roles[0]?Object(yn.jsx)("option",{value:e.id,children:e.name},e.id):null:Object(yn.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),Object(yn.jsxs)("div",{className:"row mt-sm-3 m-0 ml-sm-2",children:[Object(yn.jsx)("label",{className:"col-lg-1 col-form-label p-0 ml-5 mt-2 ml-sm-3",children:"De:"}),Object(yn.jsx)("div",{className:"col-lg-10",children:Object(yn.jsx)(Fc.a,{className:"form-control",selected:new Date(In()(d.date_start).format("MM-DD-YYYY")),onSelect:function(e){return h("date_start",e)},onChange:function(e){return h("date_start",e)}})})]}),Object(yn.jsxs)("div",{className:"row mt-sm-3 m-0",children:[Object(yn.jsx)("label",{className:"col-lg-1 col-form-label p-0 mt-2 ml-sm-3",children:"a:"}),Object(yn.jsx)("div",{className:"col-lg-10",children:Object(yn.jsx)(Fc.a,{className:"form-control",selected:new Date(In()(d.date_end).format("MM-DD-YYYY")),onSelect:function(e){return h("date_end",e)},onChange:function(e){return h("date_end",e)}})})]}),Object(yn.jsx)("div",{className:"col-lg-2 row mt-sm-3 d-flex justify-content-center m-0 h-50",children:Object(yn.jsx)("button",{type:"button",className:"btn w-50 btn-success font-weight-bold",onClick:function(){var e=d.user,t=d.branch_id,s=d.date_end,n=d.date_start;a({branch_id:t,user:e,date_start:n,date_end:s})},children:"Filtrar"})})]})})})}var Ai=function(e){Object(kn.a)(a,e);var t=Object(En.a)(a);function a(){return Object(Cn.a)(this,a),t.apply(this,arguments)}return Object(_n.a)(a,[{key:"render",value:function(){var e=this.props.ventas;return Object(yn.jsx)("div",{className:"card border border-info rounded",children:Object(yn.jsxs)("div",{className:"card-body bg-light",children:[Object(yn.jsx)("h2",{className:"card-title text-secondary",children:"Efectivo de caja"}),Object(yn.jsx)("br",{}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col",children:Object(yn.jsx)("h5",{className:"text-success",children:Ei.dollarUS.format(e)})})})]})})}}]),a}(xn.Component);function Pi(){var e=Object(xn.useContext)(wn).auth,t=Object(xn.useState)({user:0,date_start:In()().startOf("week").format("YYYY-MM-DD"),date_end:In()().format("YYYY-MM-DD"),branch_id:e.branch.id,ventas:0,filterData:{}}),a=Object(hn.a)(t,2),s=a[0],n=a[1],c={user:s.user,date_start:s.date_start,date_end:s.date_end,branch_id:s.branch_id},r=function(e){console.log("Filters Seted up",e),"object"===typeof e?n(Object(o.a)(Object(o.a)({},s),e)):console.error("[Orus system] The filters data not is a object:",e)};return Object(yn.jsxs)("div",{className:"content",children:[Object(yn.jsxs)("p",{className:"h4 border-bottom mb-4",children:["Bienvenido",Object(yn.jsx)("span",{className:"font-weight-bold mx-2 text-capitalize",children:e.name.toLowerCase()}),"este es el resumen."]}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col col-md-12 col-lg-12",children:Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(yn.jsx)(Di,{filters:c,changeState:r})})})})}),Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsxs)("div",{className:"col-lg-4 col-md-12",children:[Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(yn.jsx)(Ai,{ventas:s.ventas})})}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(yn.jsx)(Ii,{filters:c,changeState:r})})})]}),Object(yn.jsx)("div",{className:"col-lg-8 col-md-12",children:Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col-lg-4 col-md-12",children:Object(yn.jsx)(Ti,{filters:c,changeState:r})}),Object(yn.jsx)("div",{className:"col-lg-8 col-md-12",children:Object(yn.jsx)(Li,{filters:c,changeState:r})})]})})]})]})}function Fi(){var e,t=Object(xn.useContext)(wn),a=t.auth,s=t.getNotifications,c=t.setNotifications,r=Object(xn.useState)({notifications:[],loading:!0,mainRole:a.roles}),i=Object(hn.a)(r,2),l=i[0],d=i[1],u=l.notifications,j=l.loading,b=l.mainRole,m=u?u.length:0,h=u.slice(0,10),x=function(){s().then((function(e){d(Object(o.a)(Object(o.a)({},l),{},{notifications:e,loading:!1}))})).catch((function(){d(Object(o.a)(Object(o.a)({},l),{},{loading:!1}))}))},p=function(e,t){-1===t&&e.preventDefault(),c({id:t})};return Object(xn.useEffect)((function(){return x(),e=setInterval((function(){console.log("[Orus system] check notifications"),d(Object(o.a)(Object(o.a)({},l),{},{loading:!0})),x()}),6e4),function(){clearInterval(e)}}),[]),Object(yn.jsxs)("li",{className:"nav-item dropdown",children:[Object(yn.jsx)("a",{className:"nav-link","data-toggle":"dropdown",href:"#end",children:j?Object(yn.jsx)("i",{className:"fas fa-spinner fa-spin"}):Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("i",{className:"far fa-bell"}),m?Object(yn.jsx)("span",{className:"badge badge-warning navbar-badge",children:m}):null]})}),Object(yn.jsxs)("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[Object(yn.jsxs)("span",{className:"dropdown-header",children:[m," Notificaciones"]}),Object(yn.jsx)("div",{className:"dropdown-divider"}),h.map((function(e){var t=e.type.split("\\",3),a="general",s="fa-file",c=In()(e.created_at).fromNow(),r="#end";return"ExamNotification"===t[2]&&("doctor"===b?(a="Examen creado",r="/consultorio/registro/"+e.data.id):(a="Examen actualizado",r="/pedidos/registro"),s="fa-file-alt"),Object(yn.jsxs)(n.b,{to:r,className:"dropdown-item",onClick:function(t){p(t,e.id)},children:[Object(yn.jsx)("i",{className:"fas "+s+" mr-1"})," ",a,Object(yn.jsx)("span",{className:"float-right text-sm text-muted",children:c})]},e.id)})),m?Object(yn.jsxs)(xn.Fragment,{children:[Object(yn.jsx)("div",{className:"dropdown-divider"}),Object(yn.jsx)("a",{href:"#end",className:"dropdown-item dropdown-footer",onClick:function(e){e.preventDefault(),p(e,-1)},children:"Marcar todas."})]}):null]})]})}function Mi(){return Object(yn.jsxs)("nav",{className:"main-header navbar navbar-expand navbar-dark navbar-lightblue",children:[Object(yn.jsx)("ul",{className:"navbar-nav",children:Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsx)("a",{className:"nav-link","data-widget":"pushmenu",href:"#navbar",role:"button",onClick:function(e){e.preventDefault(),window.$("#body").toggleClass("sidebar-open"),window.$("#body").toggleClass("sidebar-collapse")},children:Object(yn.jsx)("i",{className:"fas fa-bars"})})})}),Object(yn.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(yn.jsxs)("li",{className:"nav-item dropdown",children:[Object(yn.jsx)("a",{href:"#end",className:"nav-link","data-toggle":"dropdown",children:Object(yn.jsx)("i",{className:"far fa-comments"})}),Object(yn.jsxs)("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[Object(yn.jsx)("span",{className:"dropdown-header",children:"Sin comentarios"}),Object(yn.jsx)("div",{className:"dropdown-divider"})]})]}),Object(yn.jsx)(Fi,{})]})]})}function Bi(){var e,t,a,s,n,r,i,l=Object(xn.useContext)(wn),d=l.auth,u=l.setBranch,j=Object(xn.useContext)(or),b=Object(On.g)().pathname.split("/"),m=(b&&b.length?b:["dashboard"]).filter((function(e){return![""].includes(e)}))[0],h=d.branch,x=Object(xn.useState)({showChangeBranchs:!1,date:In()().format("LLLL"),branchSelect:h.id}),p=Object(hn.a)(x,2),O=p[0],f=p[1],v=null!==(e=null===(t=j.data)||void 0===t?void 0:t.filter((function(e){return"branches"===e.name})))&&void 0!==e?e:[],g=Object(c.c)();g(le.setLoggin(d)),g(Js.setBranches(v));var N=function(){f(Object(o.a)(Object(o.a)({},O),{},{showChangeBranchs:!1}))},y=function(){var e=O.branchSelect;if(N(),!e)return console.error("[Orus System][ERROR] branch id is empty"),void window.location.reload();window.Swal.fire({text:"\xbfRealmente desea cambiarse de sucursal?",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){t.dismiss||u(e).then((function(e){e?window.location.reload():window.Swal.fire({icon:"error",text:"Lo sentimos, hay un problema de comunicacion con el servidor. Comfirme el IP.",showConfirmButton:!1,timer:3e3,position:"top center"})}))}))};return Object(yn.jsxs)("div",{className:"content-header",children:[Object(yn.jsx)("div",{className:"container-fluid",children:Object(yn.jsxs)("div",{className:"row",children:[Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("h1",{className:"m-0 text-dark text-capitalize",children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-file"})," ",m]})}),Object(yn.jsxs)("div",{className:"text-center col",children:[Object(yn.jsxs)("small",{className:"p-2 badge badge-secondary text-capitalize",alt:"conectado a",title:"conectado a",children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-wifi text-success"}),null===(a=j.server)||void 0===a?void 0:a.host,null!==(s=j.server)&&void 0!==s&&s.port&&"80"!==(null===(n=j.server)||void 0===n?void 0:n.port)?":".concat(null===(r=j.server)||void 0===r?void 0:r.port):null]}),Object(yn.jsxs)("small",{className:"p-2 mt-1 ml-1 badge badge-secondary text-capitalize",alt:"Almacenando en",title:"Almacenando en",children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-server text-success"}),null!==(i=d.permissions)&&void 0!==i&&i.includes("auth.changeBranch")?Object(yn.jsx)("a",{href:"#link",className:"text-white",onClick:function(e){e.preventDefault(),f(Object(o.a)(Object(o.a)({},O),{},{showChangeBranchs:!0}))},children:h.name}):h.name]}),Object(yn.jsxs)("small",{className:"p-2 mt-1 ml-2 badge badge-secondary text-capitalize",alt:"Usuario conectado",title:"Usuario conectado",children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-user text-info"})," ",d.username]}),O.showChangeBranchs?Object(yn.jsx)(Wc,{title:"Cambiar de sucursal",body:function(){var e=O.branchSelect;return Object(yn.jsxs)("div",{className:"form-group",children:[Object(yn.jsx)("label",{children:"Seleccione la sucursal"}),Object(yn.jsx)("select",{className:"form-control text-capitalize",onChange:function(e){var t=e.target;return f(Object(o.a)(Object(o.a)({},O),{},{branchSelect:parseInt(t.value)}))},defaultValue:null===h||void 0===h?void 0:h.id,children:v.map((function(e){return Object(yn.jsx)("option",{value:e.id,children:e.data.name},e.id)}))}),Object(yn.jsx)("div",{className:"mt-2 text-right",children:Object(yn.jsx)("button",{className:"btn btn-default",type:"button",onClick:y,disabled:e===(null===h||void 0===h?void 0:h.id),children:"Cambiar"})})]})}(),handleCancel:N}):null]}),Object(yn.jsx)("div",{className:"col",children:Object(yn.jsxs)("h6",{className:"text-right text-muted",children:[Object(yn.jsx)("i",{className:"mr-1 fas fa-calendar"})," ",O.date]})})]})}),Object(yn.jsx)("hr",{})]})}function zi(){var e=Object(xn.useContext)(wn),t=e.auth,a=e.outSession,s="Optica Madero",c=Object(On.g)().pathname.replace("/",""),r="/img/avatars/avatar5.png";return"ventas"===t.roles&&(r="/img/avatars/avatar2.png"),"admin"===t.roles&&(r="/img/avatars/avatar3.png"),2===t.idUser&&(r="/img/avatars/avatar4.png"),Object(yn.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary",children:[Object(yn.jsxs)(n.b,{to:"/",className:"brand-link",children:[Object(yn.jsx)("img",{src:"/img/logo.png",alt:s+" logo ",className:"brand-image img-circle elevation-2",style:{opacity:.8,maxHeight:16}}),Object(yn.jsx)("span",{className:"brand-text font-weight-light text-uppercase",children:s})]}),Object(yn.jsxs)("div",{className:"sidebar",children:[Object(yn.jsxs)("div",{className:"pb-3 mt-3 mb-3 user-panel d-flex",children:[Object(yn.jsx)("div",{className:"image",children:Object(yn.jsx)("img",{src:r,className:"img-circle elevation-2",alt:t.name})}),Object(yn.jsx)("div",{className:"info",children:Object(yn.jsxs)("a",{href:"#end",className:"d-block text-capitalize",children:[t.name,Object(yn.jsxs)("small",{className:"text-lowercase",children:["(",t.username,")"]}),Object(yn.jsx)("br",{}),Object(yn.jsx)("span",{className:"badge badge-light",children:"admin"!==t.roles?"ventas"===t.roles?"Ventas":"Optometrista":"Administrador"})]})})]}),Object(yn.jsx)("nav",{className:"mt-2",children:Object(yn.jsxs)("ul",{className:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:["admin"===t.roles?Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)(n.b,{to:"/",className:""===c?"nav-link active":"nav-link",children:[Object(yn.jsx)("i",{className:"nav-icon fas fa-tachometer-alt"}),Object(yn.jsxs)("p",{children:["Dashboard",Object(yn.jsx)("i",{className:"right fas fa-angle-left"})]})]})}):null,Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)(n.b,{to:"/contactos",className:"contactos"===c?"nav-link active":"nav-link",children:[Object(yn.jsx)("i",{className:"nav-icon fas fa-address-book"}),Object(yn.jsxs)("p",{children:["Contactos",Object(yn.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)(n.b,{to:"/consultorio",className:"consultorio"===c||""===c&&"doctor"===t.roles?"nav-link active":"nav-link",children:[Object(yn.jsx)("i",{className:"nav-icon fas fa-notes-medical"}),Object(yn.jsxs)("p",{children:["Examenes",Object(yn.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),"doctor"!==t.roles?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)(n.b,{to:"/pedidos",className:"pedidos"===c||""===c&&"ventas"===t.roles?"nav-link active":"nav-link",children:[Object(yn.jsx)("i",{className:"nav-icon fas fa-clipboard-list"}),Object(yn.jsxs)("p",{children:["Pedidos",Object(yn.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)(n.b,{to:"/notas",className:"notas"===c?"nav-link active":"nav-link",children:[Object(yn.jsx)("i",{className:"nav-icon fas fa-cash-register"}),Object(yn.jsxs)("p",{children:["Ventas",Object(yn.jsx)("i",{className:"right fas fa-angle-left"})]})]})})]}):null,"admin"===t.roles?Object(yn.jsxs)(yn.Fragment,{children:[Object(yn.jsx)("li",{className:"almacen"===c?"nav-item has-treeview menu-open":"nav-item has-treeview ",children:Object(yn.jsxs)(n.b,{to:"/almacen",className:"almacen"===c?"nav-link active":"nav-link",children:[Object(yn.jsx)("i",{className:"nav-icon fas fa-database"}),Object(yn.jsxs)("p",{children:["Almacen",Object(yn.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)(n.b,{to:"/usuarios",className:"usuarios"===c?"nav-link active":"nav-link",children:[Object(yn.jsx)("i",{className:"nav-icon fas fa-user"}),Object(yn.jsxs)("p",{children:["Usuarios",Object(yn.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)(n.b,{to:"/configuraciones",className:"configuraciones"===c?"nav-link active":"nav-link",children:[Object(yn.jsx)("i",{className:"nav-icon fas fa-tools"}),Object(yn.jsxs)("p",{children:["Configuraciones",Object(yn.jsx)("i",{className:"right fas fa-angle-left"})]})]})})]}):null,Object(yn.jsx)("li",{className:"nav-item",children:Object(yn.jsxs)(n.b,{to:"/",className:"nav-link",onClick:function(e){e.preventDefault(),window.Swal.fire({title:"Session",text:"\xbfEsta seguro de cerrar la sesion?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Si",cancelButtonText:"Cancelar"}).then((function(e){e.dismiss||(a(),setTimeout((function(){window.location.reload()}),2e3))}))},children:[Object(yn.jsx)("i",{className:"nav-icon fas fa-sign-out-alt"}),Object(yn.jsx)("p",{children:"Cerrar sesion"})]})})]})})]})]})}function Ui(e){var t=e.children,a={};return Object(yn.jsxs)("div",{className:"wrapper",children:[Object(yn.jsx)(Mi,{logOut:function(){},data:a,page:function(){}}),Object(yn.jsx)(zi,{companyName:"company",user:a,page:function(){},logOut:function(){},active:"active"}),Object(yn.jsxs)("div",{className:"content-wrapper",children:[Object(yn.jsx)(Bi,{}),Object(yn.jsx)("div",{className:"content",children:Object(yn.jsx)("div",{className:"container-fluid",children:Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"col-lg-12",children:t})})})})]})]})}function Gi(e){var t=e.auth;return Object(yn.jsx)(dr,{children:Object(yn.jsxs)(Ui,{children:[Object(yn.jsx)(On.a,{exact:!0,path:"/",render:function(e){switch(t.roles){case"doctor":return Object(yn.jsx)(Ar,Object(o.a)({},e));case"ventas":return Object(yn.jsx)(ui,Object(o.a)({},e));default:return Object(yn.jsx)(Pi,Object(o.a)({},e))}}}),Object(yn.jsx)(On.a,{path:"/usuarios/registro/:id?",render:function(e){return Object(yn.jsx)(Vn,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yn.jsx)(On.a,{path:"/usuarios",render:function(e){return Object(yn.jsx)($n,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yn.jsx)(On.a,{path:"/almacen/:id?",render:function(e){return Object(yn.jsx)(kc,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yn.jsx)(On.a,{path:"/contactos/:id?",render:function(e){return Object(yn.jsx)(ar,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yn.jsx)(On.a,{path:"/consultorio/:id?",render:function(e){return Object(yn.jsx)(Ar,Object(o.a)({},e))}}),Object(yn.jsx)(On.a,{path:"/configuraciones",render:function(e){return Object(yn.jsx)(cr,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yn.jsx)(On.a,{path:"/pedidos/:id?",render:function(e){return Object(yn.jsx)(ui,Object(o.a)({},e))}}),Object(yn.jsx)(On.a,{path:"/notas/:id?",render:function(e){return Object(yn.jsx)(ki,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}})]})})}function Ri(){return Object(yn.jsxs)("div",{children:[Object(yn.jsx)("h1",{children:"Portal Optica Madero"}),Object(yn.jsx)("p",{children:"Para accesar al portal inicia session aqui: "})]})}function Vi(){return Object(yn.jsx)(yn.Fragment,{children:Object(yn.jsx)(On.a,{exact:!0,path:"/",render:function(e){return Object(yn.jsx)(Ri,{})}})})}function Yi(){var e=Object(c.c)();return Object(xn.useEffect)((function(){e(v.changeNamePage(""))}),[]),Object(yn.jsx)("div",{className:"container text-center font-weight-bold d-flex justify-content-center mt-5",children:Object(yn.jsx)("h1",{children:"404 Not Found"})})}function qi(){var e,t,a,s=Object(On.f)(),n=Object(xn.useContext)(wn),c=localStorage.getItem("OrusSystem"),r={protocol:window.location.protocol.replace(":",""),host:window.location.hostname,port:window.location.port},i=c?JSON.parse(c):r,l="".concat(null!==(e=i.protocol+"://")&&void 0!==e?e:"").concat(null!==(t=i.host)&&void 0!==t?t:"").concat(null!==(a=":"+i.port)&&void 0!==a?a:""),d=Object(xn.useState)({load:!1,email:"",password:"",txtHost:l,hostShow:!l}),u=Object(hn.a)(d,2),j=u[0],b=u[1],m=Object(xn.useRef)(),h=Object(xn.useRef)(),x=function(){return j.email?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(j.email)?["domain.com","opticamadero.com"].includes(j.email.split("@")[1])?j.password?j.password.length<8?window.Swal.fire({icon:"error",text:"El password debe de tener al menos 8 caracteres",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){h.current.focus()})):(b(Object(o.a)(Object(o.a)({},j),{},{load:!0})),void n.setSession({email:j.email,password:j.password}).then((function(e){if(b(Object(o.a)(Object(o.a)({},j),{},{load:!1})),!e.status){var t,a,n=e.message;if(null!==(t=e.data)&&void 0!==t&&t.errors)n=null===(a=e.data)||void 0===a?void 0:a.errors[Object.keys(e.data.errors)[0]][0];return!n&&e.data&&(n=e.data.message),window.Swal.fire({icon:"error",text:n,showConfirmButton:!1,timer:2500,position:"top center"})}s.push("/")}))):window.Swal.fire({icon:"error",text:"El campo de constrase\xf1a es requerido",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){h.current.focus()})):window.Swal.fire({icon:"error",text:"El dominio de este correo no es aceptado",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){b(Object(o.a)(Object(o.a)({},j),{},{email:""}))})):window.Swal.fire({icon:"error",text:"El usuario debe de ser un correo valido",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){m.current.focus()})):window.Swal.fire({icon:"error",text:"El campo de correo electronico es requerido",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){m.current.focus()}))},p=function(e,t){"Enter"===e&&t()},O=function(){var e=j.txtHost;if(!e)return window.Swal.fire({icon:"error",text:"El campo de servidor no puede estar vacio",showConfirmButton:!1,timer:2500,position:"top center"});var t,a,s,n=e.split(":");2===n.length?(s=window.location.protocol.replace(":",""),t=n[0].replace("//",""),a=n[1]):3===n.length?(s=n[0],t=n[1].replace("//",""),a=n[2]):(s=window.location.protocol.replace(":",""),t=window.location.hostname,a=window.location.port),localStorage.setItem("OrusSystem",JSON.stringify(Object(o.a)(Object(o.a)({},i),{},{protocol:s,host:t,port:a,token:""}))),b(Object(o.a)(Object(o.a)({},j),{},{hostShow:!1})),window.Swal.fire({icon:"success",text:"Cambio de servidor exitoso",showConfirmButton:!1,timer:2500,position:"top center"})},f=function(){j.email&&h.current.focus()};return Object(xn.useEffect)((function(){var e;null!==(e=n.auth)&&void 0!==e&&e.isLogged&&s.push("/")}),[]),Object(yn.jsx)("div",{className:"login-page",children:Object(yn.jsxs)("div",{className:"login-box",children:[Object(yn.jsx)("div",{className:"login-logo",children:Object(yn.jsxs)("a",{href:"#logo",onClick:function(e){return e.preventDefault()},children:[Object(yn.jsx)("b",{className:"text-primary",children:"Orus"})," LTE"]})}),Object(yn.jsx)("div",{className:"rounded shadow-lg card",children:Object(yn.jsxs)("div",{className:"card-body login-card-body",children:[Object(yn.jsxs)("p",{className:"login-box-msg text-uppercase",children:[Object(yn.jsx)("span",{className:"p-2 badge badge-secondary",children:"Optica Madero"}),Object(yn.jsx)("br",{}),Object(yn.jsx)("small",{className:"text-muted text-lowercase",children:"<".concat(j.txtHost,">")})]}),Object(yn.jsxs)("form",{autoComplete:"off",children:[Object(yn.jsxs)("div",{className:"mb-0 input-group",children:[Object(yn.jsx)("input",{type:"email",className:"form-control text-lowercase",placeholder:"Correo electonico",onChange:function(e){var t=e.target;return b(Object(o.a)(Object(o.a)({},j),{},{email:t.value.toLowerCase()}))},onKeyPress:function(e){var t=e.key;return p(t,f)},defaultValue:j.email,autoComplete:"false",ref:m,autoFocus:!j.email}),Object(yn.jsx)("div",{className:"input-group-append",children:Object(yn.jsx)("div",{className:"input-group-text",children:Object(yn.jsx)("span",{className:"fas fa-user"})})})]}),Object(yn.jsxs)("div",{className:"mt-3 input-group",children:[Object(yn.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",onChange:function(e){var t=e.target;return b(Object(o.a)(Object(o.a)({},j),{},{password:t.value}))},onKeyPress:function(e){var t=e.key;return p(t,x)},defaultValue:j.password,autoComplete:"false",ref:h,autoFocus:!!j.email&&!j.password}),Object(yn.jsx)("div",{className:"input-group-append",children:Object(yn.jsx)("div",{className:"input-group-text",children:Object(yn.jsx)("span",{className:"fas fa-lock"})})})]}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsxs)("div",{className:"my-3 col-12",children:[Object(yn.jsxs)("a",{href:"#tools",onClick:function(e){e.preventDefault(),b(Object(o.a)(Object(o.a)({},j),{},{hostShow:!j.hostShow}))},className:"text-muted",children:[Object(yn.jsx)("i",{className:"mx-1 fas fa-wifi"})," Servidor"]}),j.hostShow?Object(yn.jsxs)("div",{className:"mb-3 input-group",children:[Object(yn.jsx)("input",{type:"text",className:"form-control",placeholder:"Servidor",autoComplete:"off",onChange:function(e){var t=e.target;return b(Object(o.a)(Object(o.a)({},j),{},{txtHost:t.value.toLowerCase()}))},defaultValue:j.txtHost,onKeyPress:function(e){var t=e.key;return p(t,O)}}),Object(yn.jsx)("div",{className:"input-group-append",children:Object(yn.jsx)("div",{className:"input-group-text",children:Object(yn.jsx)("span",{className:"fas fa-server"})})})]}):null]})}),Object(yn.jsx)("div",{className:"row",children:Object(yn.jsx)("div",{className:"text-center col-12",children:Object(yn.jsx)("button",{type:"button",className:j.load?"btn btn-outline-secondary btn-block":"btn btn-primary btn-block",onClick:x,disabled:!!j.load,children:j.load?Object(yn.jsx)("div",{className:"spinner-border text-secondary",children:Object(yn.jsx)("span",{className:"sr-only",children:"Loading..."})}):"Iniciar session"})})})]})]})})]})})}function $i(){var e=Object(xn.useContext)(wn).auth;return Object(yn.jsxs)(On.c,{children:[Object(yn.jsx)(On.a,{path:"/login",render:function(e){return Object(yn.jsx)(qi,{})}}),null!==e&&void 0!==e&&e.isLogged?Object(yn.jsx)(Gi,{auth:e}):Object(yn.jsx)(Vi,{}),Object(yn.jsx)(On.a,{component:Yi})]})}function Ji(){var e=localStorage.getItem("OrusSystem"),t={protocol:window.location.protocol.replace(":",""),host:window.location.hostname,port:window.location.port},a=e?JSON.parse(e):t;return Object(xn.useEffect)((function(){localStorage.setItem("OrusSystem",JSON.stringify(a))}),[]),Object(yn.jsx)(n.a,{children:Object(yn.jsx)(Sn,{children:Object(yn.jsx)(c.a,{store:mn,children:Object(yn.jsx)($i,{})})})})}Object(s.render)(Object(yn.jsx)(Ji,{}),document.getElementById("root"))},35:function(e,t){e.exports={dollarUS:Intl.NumberFormat("en-US",{style:"currency",currency:"USD"})}}},[[174,1,2]]]);
//# sourceMappingURL=main.913430b7.chunk.js.map