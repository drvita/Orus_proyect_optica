(this.webpackJsonporussystem=this.webpackJsonporussystem||[]).push([[0],{132:function(e,t,a){"use strict";a.r(t);var s=a(33),c=a(21),n=a(6),r=a(32),i=a(70),l=a(1),o="CHANGE_HOST",d="CHANGE_PAGE",j=localStorage.getItem("OrusSystem"),u=JSON.parse(j||"{}"),m=u.port,b=void 0===m?window.location.protocol.toString().replace(":",""):m,h=u.host,x=void 0===h?window.location.hostname:h,p=u.company,O={port:b,host:x,company:void 0===p?"optica madero":p,namePage:"dashboard",success:void 0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case o:var s=localStorage.getItem("OrusSystem"),c=a.host,n=void 0===c?window.location.hostname:c,r=a.port,i=void 0===r?window.location.protocol.toString().replace(":",""):r,j={ls:JSON.parse(s||"{}")},u=j.ls,m=void 0===u?{}:u;return console.log("[Orus System] cambiando datos de host:",i,n),m.port=i,m.host=n,Object(l.a)(Object(l.a)({},e),{},{port:i,host:n,success:!0});case d:return Object(l.a)(Object(l.a)({},e),{},{namePage:a});default:var b=localStorage.getItem("OrusSystem"),h={ls:JSON.parse(b||"{}")},x=h.ls,p=void 0===x?{}:x;return p.port=e.port,p.host=e.host,p.company=e.company,Object(l.a)(Object(l.a)({},e),{},{success:void 0})}},g={changeHost:function(e){return{type:o,payload:e}},changeNamePage:function(e){return{type:d,payload:e}}},v=f,N=a(12),y="SAGA_TRY_LOGING",S="SAGA_CHECK_LOGING",C="SAGA_GET_NOTIFY",_="SAGA_READ_NOTIFYS",w="SAGA_GET_LIST_USERS",k="SAGA_GET_USER",E="SAGA_DELETE_USER",L="SAGA_SAVE_USER",I="SAGA_CLEAR_TOKEN_USER",D="SET_LOGGIN",T="SET_LOGOUT",A="SET_NOTIFYS",P="SET_MESSAGES",F="SET_LIST_USERS",M="SET_OPTIONS_USERS",B="SET_USER",U=localStorage.getItem("OrusSystem"),z=JSON.parse(U||"{}"),R=z.isLogged,G=void 0!==R&&R,V=z.idUser,q=void 0===V?0:V,J=z.username,$=void 0===J?null:J,Y=z.name,H=void 0===Y?null:Y,Z=z.rol,Q=void 0===Z?null:Z,X=z.roles,W=void 0===X?null:X,K=z.permissions,ee=void 0===K?null:K,te=z.email,ae=void 0===te?null:te,se=z.token,ce=void 0===se?null:se,ne=z.branch,re={dataLoggin:{isLogged:G,idUser:q,username:$,name:H,rol:Q,email:ae,token:ce,branch:void 0===ne?null:ne,roles:W,permissions:ee},options:{page:1,orderby:"created_at",order:"desc",search:"",itemsPage:10},notifications:[],list:[],meta:{total:0},user:{},messages:[],loading:!1,loading_notify:!1},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case y:case S:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case C:case _:return Object(l.a)(Object(l.a)({},e),{},{loading_notify:!0});case w:return Object(l.a)(Object(l.a)({},e),{},{list:[],meta:{},loading:!0});case k:return Object(l.a)(Object(l.a)({},e),{},{user:{},loading:!0});case E:case L:case I:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case D:var s=re.dataLoggin;return s.isLogged=!0,s.idUser=a.idUser,s.username=a.username,s.name=a.name,s.roles=[a.roles],s.permissions=a.permissions,s.email=a.email,s.token=a.token,s.branch=a.branch,e.dataLoggin.isLogged||console.log("[Orus System] Acceso a sistema exitoso",s.username),Object(l.a)(Object(l.a)({},e),{},{dataLoggin:Object(l.a)({},s),loading:!1});case T:var c=localStorage.getItem("OrusSystem"),n={ls:JSON.parse(c||"{}")},r=n.ls,i=void 0===r?{}:r;return delete i.email,delete i.idUser,delete i.isLogged,delete i.name,delete i.rol,delete i.token,delete i.username,delete i.branch,delete i.roles,delete i.permissions,console.log("[Orus System] Cierre de sistema exitoso"),Object(l.a)(Object(l.a)({},e),{},{dataLoggin:{isLogged:!1,idUser:0,username:null,name:null,rol:null,roles:null,permissions:null,email:null,token:null},notifications:[],list:[],meta:{},user:{},messages:[],loading:!1});case A:return Object(l.a)(Object(l.a)({},e),{},{notifications:a,loading_notify:!1,messages:[]});case P:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,messages:a});case F:return Object(l.a)(Object(l.a)({},e),{},{list:a.data,meta:a.meta,loading:!1,messages:[]});case M:var o=a.key,d=a.value;return Object(l.a)(Object(l.a)({},e),{},{options:Object(l.a)(Object(l.a)({},e.options),{},Object(N.a)({},o,d))});case B:return Object(l.a)(Object(l.a)({},e),{},{user:a,list:[],meta:{},loading:!1,messages:[]});default:return Object(l.a)({},e)}},le={loggin:function(e){return{type:y,payload:e}},getNotifyUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:C,payload:e}},readNotifyUser:function(e){return{type:_,payload:e}},setLoggin:function(e){return{type:D,payload:e}},setLogout:function(){return{type:T,payload:null}},setNotifys:function(e){return{type:A,payload:e}},setMessages:function(e){return{type:P,payload:e}},getListUsers:function(e){return{type:w,payload:e}},setListUsers:function(e){return{type:F,payload:e}},setOptions:function(e){return{type:M,payload:e}},setUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:B,payload:e}},getUser:function(e){return{type:k,payload:e}},deleteUser:function(e){return{type:E,payload:e}},saveUser:function(e){return{type:L,payload:e}},clearTokenUser:function(e){return{type:I,payload:e}}},oe=le,de=a(4),je=a.n(de),ue=a(3),me=a(45),be=a(19);function he(e){return xe.apply(this,arguments)}function xe(){return xe=Object(be.a)(je.a.mark((function e(t){var a,s,c,n,r,i,l,o,d,j,u,m,b,h,x,p,O=arguments;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.length>1&&void 0!==O[1]?O[1]:"GET",s=O.length>2?O[2]:void 0,c=O.length>3&&void 0!==O[3]?O[3]:null,n=sessionStorage.getItem("OrusSystem"),r=JSON.parse(n||"{}"),i=r.token,l=void 0===i?"":i,o=localStorage.getItem("OrusSystem"),d=JSON.parse(o||"{}"),j=d.protocol,u=void 0===j?"http":j,m=d.host,b=void 0===m?window.location.hostname.toString():m,h=d.port,x=void 0===h?"80":h,p={method:a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+l}},["POST","PUT"].includes(a.toUpperCase())&&s&&(p.body=JSON.stringify(s)),c&&(p.signal=c.signal),console.log("[DEBUG] API url:","".concat(u,"://").concat(b,":").concat(x,"/api/").concat(t)),e.next=11,fetch("".concat(u,"://").concat(b,":").concat(x,"/api/").concat(t),p).then(function(){var e=Object(be.a)(je.a.mark((function e(t){var a,s,c;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=200&&t.status<300)){e.next=27;break}a=Object(me.a)(t.headers.entries()),e.prev=2,a.s();case 4:if((s=a.n()).done){e.next=19;break}if("content-type"!==(c=s.value)[0]){e.next=17;break}e.t0=c[1],e.next="application/json"===e.t0?10:"text/csv; charset=UTF-8"===e.t0?13:16;break;case 10:return e.next=12,t.json();case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,t.blob();case 15:return e.abrupt("return",e.sent);case 16:return e.abrupt("return",null);case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(2),a.e(e.t1);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return e.abrupt("return",t.json());case 28:case"end":return e.stop()}}),e,null,[[2,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error("[Orus System] Query API failer:",t),console.error("[Orus System] Query API message:",e.message),null}));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function pe(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e,c=null,n=Object.keys(a);return t&&(s+="/".concat(t)),"object"!==typeof a||Array.isArray(a)||n&&(n.map((function(e){return null!==a[e]&&""!==a[e]||delete a[e],null})),Object.keys(a).length&&(c=new URLSearchParams(a),s+="?".concat(c))),s}var Oe=je.a.mark(fe);function fe(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload,c.prev=1,console.log("[Orus System] Consultando credenciales en la API"),!t.email||!t.password){c.next=20;break}return c.next=6,Object(ue.b)(he,"users/login","POST",t);case 6:if(!(a=c.sent).data){c.next=15;break}return console.log("[Orus System] Servidor:",a.message),c.next=11,Object(ue.c)(oe.setLoggin(a));case 11:return c.next=13,Object(ue.c)(oe.setMessages([{type:"success",text:"Bienvenido al sistema: ".concat(a.data.username)}]));case 13:c.next=18;break;case 15:return console.error("[Orus System] Fallo la validacion de credenciales en servidor",a),c.next=18,Object(ue.c)(oe.setMessages([{type:"error",text:"Credenciales no validas"}]));case 18:c.next=22;break;case 20:return c.next=22,Object(ue.c)(oe.setMessages([{type:"error",text:"No se enviaron las credenciales del usuario"}]));case 22:c.next=30;break;case 24:return c.prev=24,c.t0=c.catch(1),s=c.t0.message.includes("Failed to fetch"),console.error("[Orus System] Error en handle loggin:",c.t0.message),c.next=30,Object(ue.c)(oe.setMessages([{type:"error",text:s?"No hay comunicacion con el servidor, revise conexion.":"Desconocido, comuniquese con el administrador del sistema"}]));case 30:case"end":return c.stop()}}),Oe,null,[[1,24]])}var ge=je.a.mark(ve);function ve(){var e,t;return je.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("[Orus System] Consultando notificaciones en la API"),a.next=4,Object(ue.b)(he,"user","GET");case 4:if(!(e=a.sent).data||!e.data.id){a.next=13;break}return t=e.data.unreadNotifications,console.log("[Orus System] Notificaciones encontradas:",t.length),console.log("[Orus System] Verificacion de usuario correcta",e.data.username),a.next=11,Object(ue.c)(oe.setNotifys(t));case 11:a.next=16;break;case 13:if(!e.message||"Unauthenticated."!==e.message){a.next=16;break}return a.next=16,Object(ue.c)(oe.setLogout());case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(0),console.error("[Orus System] Error en notificaciones/saga handleNotify",a.t0.message);case 21:case"end":return a.stop()}}),ge,null,[[0,18]])}var Ne=je.a.mark(ye);function ye(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,console.log("[Orus System] Enviando notificaciones a la API"),c.next=5,Object(ue.b)(he,"user/readAllNotifications","POST",t);case 5:if(a=c.sent,s=parseInt(t.id)<0?"Todas":1,!a.success){c.next=11;break}return console.log("[Orus System] Notificaciones marcadas leidas:",s),c.next=11,Object(ue.c)(oe.getNotifyUser());case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(1),console.error("[Orus System] Error en saga/Users handleNotifyRead",c.t0.message);case 16:case"end":return c.stop()}}),Ne,null,[[1,13]])}var Se=je.a.mark(Ce);function Ce(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("users",null,t),c.next=5,Object(ue.b)(he,a);case 5:if(!(s=c.sent).data){c.next=11;break}return c.next=9,Object(ue.c)(oe.setListUsers(s));case 9:c.next=12;break;case 11:s.message&&(console.error("[Orus system] Error en la cosnulta de usuarios",s.message),window.sendPushMessage("Orus System",s.message));case 12:c.next=19;break;case 14:return c.prev=14,c.t0=c.catch(1),console.error("[Orus System] Error en saga/users handleGetList:",c.t0.message),c.next=19,Object(ue.c)(oe.setMessages([]));case 19:case"end":return c.stop()}}),Se,null,[[1,14]])}var _e=je.a.mark(we);function we(e){var t,a;return je.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(ue.b)(he,"users/".concat(t));case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(ue.c)(oe.setUser(a.data));case 8:s.next=11;break;case 10:console.error("[OrusSystem] Error en saga/users por servidor handleGetUser",a);case 11:s.next=18;break;case 13:return s.prev=13,s.t0=s.catch(1),console.error("[OrusSystem] Error en saga/users handleGetUser:",s.t0.message),s.next=18,Object(ue.c)(oe.setMessages([]));case 18:case"end":return s.stop()}}),_e,null,[[1,13]])}var ke=je.a.mark(Ee);function Ee(e){var t,a,s,c,n;return je.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,c="users/".concat(a),r.next=7,Object(ue.b)(he,c,"DELETE");case 7:if(n=r.sent){r.next=16;break}return console.log("[Orus System] Usuario eliminado con exito",a),r.next=12,Object(ue.c)(oe.setMessages([{type:"success",text:"Usuario eliminado con exito"}]));case 12:return r.next=14,Object(ue.c)(oe.getListUsers(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar el usuario",n.message),!n.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(ue.c)(oe.setMessages([{type:"error",text:"No se puede eliminar un usuario que tiene actividades",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en saga/users handledDeleteUser",r.t0.message),r.next=27,Object(ue.c)(oe.setMessages([{type:"error",text:"al eliminar al usuario, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),ke,null,[[1,22]])}var Le=je.a.mark(Ie);function Ie(e){var t,a,s,c,n,r,i,l,o,d,j,u;return je.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,m.prev=1,a=t.data,s=void 0===a?{}:a,c=t.id,n=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,l=t.currentUser,o=void 0===l?0:l,d=pe("users",n),j=n?"PUT":"POST",m.next=14,Object(ue.b)(he,d,j,s);case 14:if(!(u=m.sent).message){m.next=17;break}throw new Error(u.message);case 17:return n?console.log("[Orus System] Usuario actualizada con exito: "+n):console.log("[Orus system] Usuario creado con exito",u.data.id),m.next=20,Object(ue.c)(oe.setMessages([{type:"success",text:n?"Usuario actualizado con exito":"Usuario almacenado con exito"}]));case 20:if(!Object.keys(i).length){m.next=27;break}return m.next=23,Object(ue.c)(oe.getListUsers(i));case 23:return m.next=25,Object(ue.c)(oe.setUser({}));case 25:case 30:m.next=34;break;case 27:if(n!==o){m.next=32;break}return m.next=30,Object(ue.c)(oe.setLoggin({data:u.data}));case 32:return m.next=34,Object(ue.c)(oe.setUser(u.data));case 34:m.next=41;break;case 36:return m.prev=36,m.t0=m.catch(1),console.error("[Orus System] Error en saga/users handleSaveUser",m.t0.message),m.next=41,Object(ue.c)(oe.setMessages([{type:"error",text:"al almacenar el usuario, intentelo mas tarde"}]));case 41:case"end":return m.stop()}}),Le,null,[[1,36]])}var De=je.a.mark(Te);function Te(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,console.log("[Orus System] Enviando notificaciones a la API"),a=pe("users/clearToken",t),c.next=6,Object(ue.b)(he,a,"POST");case 6:if(!(s=c.sent).success){c.next=13;break}return console.log("[Orus System] Se ha eliminado el token del usuario: "+t),c.next=11,Object(ue.c)(oe.getUser(t));case 11:c.next=14;break;case 13:console.error("[Orus System] No se elimino el token del usuario: "+t,s);case 14:c.next=19;break;case 16:c.prev=16,c.t0=c.catch(1),console.error("[Orus System] Error en saga/User handleClearToken:",c.t0.message);case 19:case"end":return c.stop()}}),De,null,[[1,16]])}var Ae=je.a.mark(Pe);function Pe(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de usuario"),e.next=3,Object(ue.d)(y,fe);case 3:return e.next=5,Object(ue.d)(C,ve);case 5:return e.next=7,Object(ue.d)(_,ye);case 7:return e.next=9,Object(ue.d)(w,Ce);case 9:return e.next=11,Object(ue.d)(k,we);case 11:return e.next=13,Object(ue.d)(E,Ee);case 13:return e.next=15,Object(ue.d)(L,Ie);case 15:return e.next=17,Object(ue.d)(I,Te);case 17:case"end":return e.stop()}}),Ae)}var Fe=ie,Me="SAGA_GET_LIST_ORDER",Be="SAGA_DELETE_ORDER",Ue="SAGA_SAVE_ORDER",ze="SAGA_GET_ORDER",Re="SET_LIST_ORDER",Ge="SET_MESSAGE_ORDER",Ve="SET_ORDER",qe="SET_OPTIONS_ORDER",Je={list:[],metaList:{},order:{id:0},options:{page:1,orderby:"created_at",order:"desc",search:"",status:"",itemsPage:10},messages:[],loading:!1},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Me:return Object(l.a)(Object(l.a)({},e),{},{list:[],metaList:{},order:{id:0},loading:!0});case Be:case Ue:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case ze:return Object(l.a)(Object(l.a)({},e),{},{list:[],metaList:{},order:{id:0},loading:!0});case Re:return Object(l.a)(Object(l.a)(Object(l.a)({},e),a.result),{},{messages:[],loading:!1});case Ge:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,messages:a});case Ve:return Object(l.a)(Object(l.a)({},e),{},{order:a,messages:[],loading:!1});case qe:var s=a.key,c=a.value;return Object(l.a)(Object(l.a)({},e),{},{options:Object(l.a)(Object(l.a)({},e.options),{},Object(N.a)({page:1},s,c))});default:return Object(l.a)({},e)}},Ye={result:{list:[],metaList:{}}},He={getListOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Me,payload:e}},deleteOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Be,payload:e}},saveOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ue,payload:e}},getOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ze,payload:e}},setListOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return{type:Re,payload:e}},setMessageOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Ge,payload:e}},setOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ve,payload:e}},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:qe,payload:e}}},Ze=He,Qe=je.a.mark(Xe);function Xe(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("orders",null,t),c.next=5,Object(ue.b)(he,a);case 5:return s=c.sent,c.next=8,Object(ue.c)(Ze.setListOrder({result:{list:s.data,metaList:s.meta}}));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.error("[Orus System] Error en saga/order handleGetList:",c.t0),c.next=15,Object(ue.c)(Ze.setMessageOrder([]));case 15:case"end":return c.stop()}}),Qe,null,[[1,10]])}var We=je.a.mark(Ke);function Ke(e){var t,a,s,c,n;return je.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,c="orders/".concat(a),r.next=7,Object(ue.b)(he,c,"DELETE");case 7:if(n=r.sent){r.next=16;break}return console.log("[Orus System] Pedido eliminado con exito",a),r.next=12,Object(ue.c)(Ze.setMessageOrder([{type:"success",text:"Pedido eliminado con exito"}]));case 12:return r.next=14,Object(ue.c)(Ze.getListOrder(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar pedido",n.message),!n.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(ue.c)(Ze.setMessageOrder([{type:"error",text:"No se puede eliminar un pedido que tiene asignada una nota de venta",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en handledDeleteOrder",r.t0),r.next=27,Object(ue.c)(Ze.setMessageOrder([{type:"error",text:"al eliminar el pedidos, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),We,null,[[1,22]])}var et=je.a.mark(tt);function tt(e){var t,a,s,c,n,r,i,l,o,d;return je.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return t=e.payload,console.log("DEBUG SAVE ORDER payload",t),j.prev=2,a=t.data,s=void 0===a?{}:a,c=t.id,n=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,l=pe("orders",n),o=n?"PUT":"POST",j.next=13,Object(ue.b)(he,l,o,s);case 13:if(!(d=j.sent).message){j.next=16;break}throw new Error(d.message);case 16:return n?console.log("[Orus System] Pedido actualizado con exito: "+n):console.log("[Orus system] Pedido creado con exito",d.data.id),j.next=19,Object(ue.c)(Ze.setMessageOrder([{type:"success",text:n?"Pedido actualizado con exito":"Pedido almacenado con exito"}]));case 19:return j.next=21,Object(ue.c)(Ze.getListOrder(i));case 21:j.next=28;break;case 23:return j.prev=23,j.t0=j.catch(2),console.error("[Orus System] Error in handleSaveOrder",j.t0),j.next=28,Object(ue.c)(Ze.setMessageOrder([{type:"error",text:"al almacenar el pedido, intentelo mas tarde"}]));case 28:case"end":return j.stop()}}),et,null,[[2,23]])}var at=je.a.mark(st);function st(e){var t,a;return je.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(ue.b)(he,"orders/".concat(t));case 4:if(!(a=s.sent).data){s.next=11;break}return console.log("[Orus System] Orden:",a.data.id),s.next=9,Object(ue.c)(Ze.setOrder(a.data));case 9:s.next=12;break;case 11:console.error("[Orus System] Error en handleGetOrder",a);case 12:s.next=19;break;case 14:return s.prev=14,s.t0=s.catch(1),console.error("[Orus System] Error en saga/order handleGetOrder:",s.t0),s.next=19,Object(ue.c)(Ze.setMessageOrder([]));case 19:case"end":return s.stop()}}),at,null,[[1,14]])}var ct=je.a.mark(nt);function nt(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de ordenes"),e.next=3,Object(ue.d)(Me,Xe);case 3:return e.next=5,Object(ue.d)(Be,Ke);case 5:return e.next=7,Object(ue.d)(Ue,tt);case 7:return e.next=9,Object(ue.d)(ze,st);case 9:case"end":return e.stop()}}),ct)}var rt=$e,it="SAGA_GET_LIST_CATEGORIES",lt="SAGE_DELETE_CATEGORY",ot="SAGA_GET_CATEGORY",dt="SAGA_SAVE_CATEGORY",jt="SET_LIST_CATEGORY",ut="SET_MESSAGE_CATEGORY",mt="SET_CATEGORY",bt={list:[],metaList:{},messages:[],category:{id:0},loading:!1},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:case ot:case lt:case dt:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case jt:var a=t.payload;return Object(l.a)(Object(l.a)(Object(l.a)({},e),a.result),{},{messages:[],loading:!1});case ut:var s=t.payload;return Object(l.a)(Object(l.a)({},e),{},{loading:!1,messages:s});case mt:var c=t.payload;return Object(l.a)(Object(l.a)({},e),{},{loading:!1,category:c});default:return Object(l.a)({},e)}},xt={getListCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:it,payload:e}},getCategory:function(e){return{type:ot,payload:e}},setListCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:jt,payload:e}},setCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:mt,payload:e}},setMessageCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ut,payload:e}},deleteCategory:function(e){return{type:lt,payload:e}},saveCategory:function(e){return{type:dt,payload:e}}},pt=xt,Ot=je.a.mark(ft);function ft(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("categories",null,t),c.next=5,Object(ue.b)(he,a);case 5:return s=c.sent,c.next=8,Object(ue.c)(pt.setListCategories({result:{list:s.data,metaList:s.meta}}));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.error("[Orus System] Error en saga/categorias handleGetList:",c.t0.message),c.next=15,Object(ue.c)(pt.setMessageCategory([]));case 15:case"end":return c.stop()}}),Ot,null,[[1,10]])}var gt=je.a.mark(vt);function vt(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=t.id,c.next=5,Object(ue.b)(he,"categories/".concat(a),"GET");case 5:if(!(s=c.sent).data){c.next=11;break}return c.next=9,Object(ue.c)(pt.setCategory(s.data));case 9:c.next=14;break;case 11:return console.error("[Orus System] Error in handle GET Contact",s),c.next=14,Object(ue.c)(pt.setMessageCategory([{type:"error",text:"al traer datos de contacto en la API"}]));case 14:c.next=21;break;case 16:return c.prev=16,c.t0=c.catch(1),console.error("[Orus System] Error in handle GET Contact",c.t0),c.next=21,Object(ue.c)(pt.setMessageCategory([{type:"error",text:"al traer datos de contacto, intentelo mas tarde"}]));case 21:case"end":return c.stop()}}),gt,null,[[1,16]])}var Nt=je.a.mark(yt);function yt(e){var t,a,s,c,n;return je.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,c="categories/".concat(a),r.next=7,Object(ue.b)(he,c,"DELETE");case 7:if(n=r.sent){r.next=16;break}return console.log("[Orus System] Categoria eliminada con exito",a),r.next=12,Object(ue.c)(pt.setMessageCategory([{type:"success",text:"Marca eliminada con exito"}]));case 12:return r.next=14,Object(ue.c)(pt.getListCategories(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar la categoria: "+a,n.message),!n.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(ue.c)(pt.setMessageCategory([{type:"error",text:"No se puede eliminar una categoria que ya esta relacionado con un producto",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en saga/category handledDeleteCategory",r.t0),r.next=27,Object(ue.c)(pt.setMessageCategory([{type:"error",text:"al eliminar la categoria, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),Nt,null,[[1,22]])}var St=je.a.mark(Ct);function Ct(e){var t,a,s,c,n,r,i,l,o,d;return je.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return t=e.payload,j.prev=1,a=t.data,s=void 0===a?{}:a,c=t.id,n=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,l=pe("categories",n),o=n?"PUT":"POST",j.next=12,Object(ue.b)(he,l,o,s);case 12:if(!(d=j.sent).message){j.next=15;break}throw new Error(d.message);case 15:return n?console.log("[Orus System] Categoria actualizada con exito: "+n):console.log("[Orus system] Categoria creada con exito",d.data.id),j.next=18,Object(ue.c)(pt.setMessageCategory([{type:"success",text:n?"Categoria actualizada con exito":"Categoria almacenada con exito"}]));case 18:return j.next=20,Object(ue.c)(pt.getListCategories(i));case 20:j.next=27;break;case 22:return j.prev=22,j.t0=j.catch(1),console.error("[Orus System] Error saga/category handleSaveCategory",j.t0),j.next=27,Object(ue.c)(pt.setMessageCategory([{type:"error",text:"al almacenar la categoria, intentelo mas tarde"}]));case 27:case"end":return j.stop()}}),St,null,[[1,22]])}var _t=je.a.mark(wt);function wt(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de categorias"),e.next=3,Object(ue.d)(it,ft);case 3:return e.next=5,Object(ue.d)(ot,vt);case 5:return e.next=7,Object(ue.d)(lt,yt);case 7:return e.next=9,Object(ue.d)(dt,Ct);case 9:case"end":return e.stop()}}),_t)}var kt=ht,Et="SAGA_GET_LIST_STORE",Lt="SAGA_DELETE_STORE",It="SAGA_GET_ITEM",Dt="SAGA_SAVE_ITEM",Tt="SAGA_GET_LIST_BRANDS",At="SAGA_DELETE_BRAND",Pt="SAGA_SAVE_BRAND",Ft="SAGA_SAVE_INBRANCH",Mt="SET_LIST_STORE",Bt="SET_MESSAGE_STORE",Ut="SET_OPTIONS",zt="SET_ITEM",Rt="SET_LIST_BRANDS",Gt="SET_LOADING",Vt={list:[],metaList:{current_page:1,total:10,per_page:10,last_page:1},item:{},options:{page:1,orderby:"created_at",order:"desc",search:"",itemsPage:10,supplier:"",brand:"",zero:"false"},brands:[],messages:[],loading:!1},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Et:return Object(l.a)(Object(l.a)({},e),{},{list:[],metaList:{},loading:!0});case It:return Object(l.a)(Object(l.a)({},e),{},{item:{},loading:!0});case Lt:case Dt:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case Tt:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,brands:[]});case Pt:case At:case Ft:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case Mt:var s=a.result;return Object(l.a)(Object(l.a)(Object(l.a)({},e),s),{},{loading:!1});case zt:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,messages:[],item:a});case Bt:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,messages:a});case Ut:var c=a.key,n=a.value;return Object(l.a)(Object(l.a)({},e),{},{options:Object(l.a)(Object(l.a)({},e.options),{},Object(N.a)({page:1},c,n))});case Rt:return Object(l.a)(Object(l.a)({},e),{},{brands:a,messages:[],loading:!1});case Gt:return Object(l.a)(Object(l.a)({},e),{},{loading:a||!1});default:return Object(l.a)({},e)}},Jt={getListStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Et,payload:e}},deleteItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Lt,payload:e}},getItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:It,payload:e}},setListStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Mt,payload:e}},setMessagesStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Bt,payload:e}},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ut,payload:e}},setItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:zt,payload:e}},saveItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Dt,payload:e}},getListBrands:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Tt,payload:e}},setListBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Rt,payload:e}},saveBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Pt,payload:e}},deleteBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:At,payload:e}},saveInBranch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ft,payload:e}},setLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:Gt,payload:e}}},$t=Jt,Yt=je.a.mark(Ht);function Ht(e){var t,a,s,c;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,s=pe("store",null,t),n.next=5,Object(ue.b)(he,s);case 5:if(!(c=n.sent).message){n.next=8;break}throw new Error(c.message);case 8:return n.next=10,Object(ue.c)($t.setListStore({result:{list:c.data,metaList:c.meta,messages:null!==(a=c.data)&&void 0!==a&&a.length?[]:[{type:"info",text:"El codigo ".concat(t.search," no existe en el almacen")}]}}));case 10:n.next=17;break;case 12:return n.prev=12,n.t0=n.catch(1),console.error("[Orus System] Error en saga/store handleGetList:",n.t0.message),n.next=17,Object(ue.c)($t.setMessagesStore([{type:"error",text:"En servidor al traer la lista de productos"}]));case 17:case"end":return n.stop()}}),Yt,null,[[1,12]])}var Zt=je.a.mark(Qt);function Qt(e){var t,a,s,c,n;return je.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,c="store/".concat(a),r.next=7,Object(ue.b)(he,c,"DELETE");case 7:if(n=r.sent){r.next=16;break}return console.log("[Orus System] Item eliminado con exito",a),r.next=12,Object(ue.c)($t.setMessagesStore([{type:"success",text:"Producto eliminado con exito"}]));case 12:return r.next=14,Object(ue.c)($t.getListStore(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar producto",n.message),!n.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(ue.c)($t.setMessagesStore([{type:"error",text:"No se puede eliminar un producto que ya esta relacionado con una venta",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en handledDeleteItem",r.t0),r.next=27,Object(ue.c)($t.setMessagesStore([{type:"error",text:"al eliminar el producto, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),Zt,null,[[1,22]])}var Xt=je.a.mark(Wt);function Wt(e){var t,a;return je.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(ue.b)(he,"store/".concat(t));case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(ue.c)($t.setItem(a.data));case 8:s.next=11;break;case 10:console.error("[OrusSystem] Error en handleGetItem",a);case 11:s.next=18;break;case 13:return s.prev=13,s.t0=s.catch(1),console.error("[OrusSystem] Error en saga/order handleGetItem:",s.t0),s.next=18,Object(ue.c)($t.setMessagesStore([]));case 18:case"end":return s.stop()}}),Xt,null,[[1,13]])}var Kt=je.a.mark(ea);function ea(e){var t,a,s,c,n,r,i,l,o,d;return je.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return t=e.payload,j.prev=1,a=t.data,s=void 0===a?{}:a,c=t.id,n=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,l=pe("store",n),o=n?"PUT":"POST",j.next=12,Object(ue.b)(he,l,o,s);case 12:if(!(d=j.sent).message){j.next=16;break}throw d.errors&&Object.keys(d.errors).length&&Object.keys(d.errors).forEach((function(e){throw new Error(d.errors[e])})),new Error(d.message);case 16:return n?console.log("[Orus System] Producto actualizado con exito: "+n):console.log("[Orus system] Producto creado con exito",d.data.id),j.next=19,Object(ue.c)($t.setMessagesStore([{type:"success",text:n?"Producto actualizado con exito":"Producto almacenado con exito"}]));case 19:if(!i){j.next=24;break}return j.next=22,Object(ue.c)($t.getListStore(i));case 22:j.next=27;break;case 24:if(!d.data||!d.data.id){j.next=27;break}return j.next=27,Object(ue.c)($t.getItem(d.data.id));case 27:j.next=34;break;case 29:return j.prev=29,j.t0=j.catch(1),console.error("[Orus System] Error en saga handleSaveItem",j.t0.message),j.next=34,Object(ue.c)($t.setMessagesStore([{type:"error",text:j.t0.message}]));case 34:case"end":return j.stop()}}),Kt,null,[[1,29]])}var ta=je.a.mark(aa);function aa(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("brands",null,t),c.next=5,Object(ue.b)(he,a);case 5:if(!(s=c.sent).data){c.next=9;break}return c.next=9,Object(ue.c)($t.setListBrand(s.data));case 9:c.next=16;break;case 11:return c.prev=11,c.t0=c.catch(1),console.error("[Orus System] Error en saga handleGetListBrands:",c.t0),c.next=16,Object(ue.c)($t.setMessagesStore([]));case 16:case"end":return c.stop()}}),ta,null,[[1,11]])}var sa=je.a.mark(ca);function ca(e){var t,a,s,c,n,r,i,l,o,d;return je.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return t=e.payload,j.prev=1,a=t.data,s=void 0===a?{}:a,c=t.id,n=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,l=pe("brands",n),o=n?"PUT":"POST",j.next=12,Object(ue.b)(he,l,o,s);case 12:if(!(d=j.sent).message){j.next=15;break}throw new Error(d.message);case 15:return n?console.log("[Orus System] Marca actualizada con exito: "+n):console.log("[Orus system] Marca creada con exito",d.data.id),j.next=18,Object(ue.c)($t.setMessagesStore([{type:"success",text:n?"Marca actualizada con exito":"Marca almacenada con exito"}]));case 18:return j.next=20,Object(ue.c)($t.getListBrands(i));case 20:j.next=27;break;case 22:return j.prev=22,j.t0=j.catch(1),console.error("[Orus System] Error saga handleSaveBrand",j.t0),j.next=27,Object(ue.c)($t.setMessagesStore([{type:"error",text:"al almacenar la marca, intentelo mas tarde"}]));case 27:case"end":return j.stop()}}),sa,null,[[1,22]])}var na=je.a.mark(ra);function ra(e){var t,a,s,c,n;return je.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,c="brands/".concat(a),r.next=7,Object(ue.b)(he,c,"DELETE");case 7:if(n=r.sent){r.next=16;break}return console.log("[Orus System] Marca eliminada con exito",a),r.next=12,Object(ue.c)($t.setMessagesStore([{type:"success",text:"Marca eliminada con exito"}]));case 12:return r.next=14,Object(ue.c)($t.getListBrands(s));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar marca",n.message),!n.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(ue.c)($t.setMessagesStore([{type:"error",text:"No se puede eliminar un marca que ya esta relacionado con un producto",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en saga handledDeleteBrand",r.t0),r.next=27,Object(ue.c)($t.setMessagesStore([{type:"error",text:"al eliminar la marca, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),na,null,[[1,22]])}var ia=je.a.mark(la);function la(e){var t,a,s,c,n,r,i,l;return je.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,a=t.data,s=void 0===a?{}:a,c=t.id,r=pe("branches",n=void 0===c?null:c),i=n?"PUT":"POST",o.next=10,Object(ue.b)(he,r,i,s);case 10:if(!(l=o.sent).message){o.next=13;break}throw new Error(l.message);case 13:return n?console.log("[Orus System] Productos actualizados con exito "+n):console.log("[Orus system] Productos creados con exito"),o.next=16,Object(ue.c)($t.setMessagesStore([{type:"success",text:n?"Productos actualizados con exito":"Productos almacenados con exito"}]));case 16:return o.next=18,Object(ue.c)($t.getItem(s.store_item_id));case 18:o.next=25;break;case 20:return o.prev=20,o.t0=o.catch(1),console.error("[Orus System] Error en saga handleSaveItemInBranch",o.t0.message),o.next=25,Object(ue.c)($t.setMessagesStore([{type:"error",text:"al almacenar los productos en el almacen correspondiente"}]));case 25:case"end":return o.stop()}}),ia,null,[[1,20]])}var oa=je.a.mark(da);function da(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de store"),e.next=3,Object(ue.d)(Et,Ht);case 3:return e.next=5,Object(ue.d)(Lt,Qt);case 5:return e.next=7,Object(ue.d)(It,Wt);case 7:return e.next=9,Object(ue.d)(Dt,ea);case 9:return e.next=11,Object(ue.d)(Tt,aa);case 11:return e.next=13,Object(ue.d)(Pt,ca);case 13:return e.next=15,Object(ue.d)(At,ra);case 15:return e.next=17,Object(ue.d)(Ft,la);case 17:case"end":return e.stop()}}),oa)}var ja=qt,ua="SET_LIST_CONTACT",ma="SET_MESSAGE_CONTACT",ba="SET_CONTACT",ha="SET_LIST_SUPPLIERS",xa="SAGA_GET_LIST_CONTACTS",pa="SAGA_DELETE_CONTACT",Oa="SAGA_SAVE_CONTACT",fa="SAGA_GET_CONTACT",ga="SAGA_GET_LIST_SUPPLIERS",va={list:[],metaList:{},contact:{id:0},suppliers:[],supplier:{id:0},messages:[],loading:!1},Na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case xa:return Object(l.a)(Object(l.a)({},e),{},{list:[],metaList:{},loading:!0});case pa:case Oa:return Object(l.a)(Object(l.a)({},e),{},{contact:{id:0},loading:!0});case fa:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,contact:{id:0}});case ga:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,supplier:{id:0}});case ua:return Object(l.a)(Object(l.a)(Object(l.a)({},e),{},{contact:{id:0}},a.result),{},{messages:[],loading:!1});case ma:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,messages:a});case ba:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,contact:a,list:[],metaList:{},messages:[]});case ha:return Object(l.a)(Object(l.a)({},e),{},{supplier:{id:0},suppliers:a,messages:[],loading:!1});default:return Object(l.a)({},e)}},ya={getListContacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:xa,payload:e}},deleteContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:pa,payload:e}},saveContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Oa,payload:e}},setListContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ua,payload:e}},setMessageContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ma,payload:e}},getContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:fa,payload:e}},setContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ba,payload:e}},getListSuppliers:function(e){return{type:ga,payload:e}},setListSuppliers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ha,payload:e}}},Sa=ya,Ca=je.a.mark(_a);function _a(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("contacts",null,t),c.next=5,Object(ue.b)(he,a,"GET");case 5:if(!(s=c.sent).data){c.next=11;break}return c.next=9,Object(ue.c)(Sa.setListContact({result:{list:s.data,metaList:s.meta},options:t}));case 9:c.next=13;break;case 11:return c.next=13,Object(ue.c)(Sa.setMessageContact([{type:"error",text:"al traer datos de contactos en la API"}]));case 13:c.next=20;break;case 15:return c.prev=15,c.t0=c.catch(1),console.error("[Orus System] Error in handle getListOrder",c.t0),c.next=20,Object(ue.c)(Sa.setMessageContact([{type:"error",text:"al traer datos de contactos, intentelo mas tarde"}]));case 20:case"end":return c.stop()}}),Ca,null,[[1,15]])}var wa=je.a.mark(ka);function ka(e){var t,a,s,c;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=t.id,s=pe("contacts",a),n.next=6,Object(ue.b)(he,s,"DELETE");case 6:if(c=n.sent){n.next=13;break}return console.log("[Orus System] Contacto eliminado con exito",a),n.next=11,Object(ue.c)(Sa.setMessageContact([{type:"success",text:"Contacto eliminado con exito"}]));case 11:case 17:n.next=21;break;case 13:if(console.error("[Orus System] Fallo al eliminar el contacto",c.message),!c.message.indexOf("[SQLSTATE[23000]]")){n.next=19;break}return n.next=17,Object(ue.c)(Sa.setMessageContact([{type:"error",text:"No se puede eliminar un contacto que tiene registros",errnum:"SQL23000"}]));case 19:return n.next=21,Object(ue.c)(Sa.setMessageContact([{type:"error",text:"No se puede eliminar el contacto"}]));case 21:n.next=28;break;case 23:return n.prev=23,n.t0=n.catch(1),console.error("[Orus System] Error in handle delete contact",n.t0),n.next=28,Object(ue.c)(Sa.setMessageContact([{type:"error",text:"al eliminar el contacto, intentelo mas tarde"}]));case 28:case"end":return n.stop()}}),wa,null,[[1,23]])}var Ea=je.a.mark(La);function La(e){var t,a,s,c,n,r,i,l;return je.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,a=t.data,s=void 0===a?{}:a,c=t.id,r=pe("contacts",n=void 0===c?null:c),i=n?"PUT":"POST",o.next=10,Object(ue.b)(he,r,i,s);case 10:if(!(l=o.sent).message||!l.errors){o.next=22;break}if(!l.errors.name){o.next=17;break}return o.next=15,Object(ue.c)(Sa.setMessageContact([{type:"error",text:l.errors.name[0].replace("name","Nombre")}]));case 15:o.next=20;break;case 17:if(!l.errors.email){o.next=20;break}return o.next=20,Object(ue.c)(Sa.setMessageContact([{type:"error",text:l.errors.email[0]}]));case 20:case 25:o.next=33;break;case 22:if(!l.message){o.next=27;break}return o.next=25,Object(ue.c)(Sa.setMessageContact([{type:"error",text:"Error en servidor, contacte al administrador: \nResponse [".concat(l.message,"]")}]));case 27:if(!l.data){o.next=33;break}return n?console.log("[Orus System] Contacto actualizado con exito",n):console.log("[Orus system] Contacto creado con exito",l.data.id),o.next=31,Object(ue.c)(Sa.setMessageContact([{type:"success",text:n?"Contacto actualizado con exito":"Contacto almacenado con exito"}]));case 31:return o.next=33,Object(ue.c)(Sa.setContact(l.data));case 33:o.next=40;break;case 35:return o.prev=35,o.t0=o.catch(1),console.error("[OrusSystem] Error in handle save contact --",o.t0),o.next=40,Object(ue.c)(Sa.setMessageContact([{type:"error",text:"En el servidor al almacenar el contacto, intentelo mas tarde"}]));case 40:case"end":return o.stop()}}),Ea,null,[[1,35]])}var Ia=je.a.mark(Da);function Da(e){var t,a;return je.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(ue.b)(he,"contacts/".concat(t),"GET");case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(ue.c)(Sa.setContact(a.data));case 8:s.next=13;break;case 10:return console.error("[Orus System] Error in handle GET Contact",a),s.next=13,Object(ue.c)(Sa.setMessageContact([{type:"error",text:"al traer datos de contacto en la API"}]));case 13:s.next=20;break;case 15:return s.prev=15,s.t0=s.catch(1),console.error("[Orus System] Error in handle GET Contact",s.t0),s.next=20,Object(ue.c)(Sa.setMessageContact([{type:"error",text:"al traer datos de contacto, intentelo mas tarde"}]));case 20:case"end":return s.stop()}}),Ia,null,[[1,15]])}var Ta=je.a.mark(Aa);function Aa(e){var t,a,s,c;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,a=void 0===t?0:t,n.prev=1,s=pe("contacts",null,{type:1,business:null!==a?a:"",orderby:"name",order:"asc"}),n.next=6,Object(ue.b)(he,s);case 6:if(!(c=n.sent).data){n.next=10;break}return n.next=10,Object(ue.c)(Sa.setListSuppliers(c.data));case 10:n.next=17;break;case 12:return n.prev=12,n.t0=n.catch(1),console.error("[Orus System] Error en saga handleGetListSuppliers:",n.t0),n.next=17,Object(ue.c)(Sa.setMessageContact([]));case 17:case"end":return n.stop()}}),Ta,null,[[1,12]])}var Pa=je.a.mark(Fa);function Fa(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de contacto"),e.next=3,Object(ue.d)(xa,_a);case 3:return e.next=5,Object(ue.d)(pa,ka);case 5:return e.next=7,Object(ue.d)(Oa,La);case 7:return e.next=9,Object(ue.d)(fa,Da);case 9:return e.next=11,Object(ue.d)(ga,Aa);case 11:case"end":return e.stop()}}),Pa)}var Ma=Na,Ba="SAGA_GET_LIST_EXAM",Ua="SAGA_DELETE_EXAM",za="SAGA_SAVE_EXAM",Ra="SAGA_GET_EXAM",Ga="SET_LIST_EXAM",Va="SET_EXAM",qa="SET_MESSAGE_EXAM",Ja={list:[],metaList:{},messages:[],exam:{id:0},loading:!1},$a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ja,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Ba:case Ra:case Ua:case za:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case Ga:return Object(l.a)(Object(l.a)(Object(l.a)({},e),{},{exam:{id:0}},a.result),{},{messages:[],loading:!1});case qa:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,messages:a});case Va:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,exam:a});default:return Object(l.a)({},e)}},Ya={getListExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ba,payload:e}},setListExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ga,payload:e}},setMessagesExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:qa,payload:e}},deleteExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ua,payload:e}},saveExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:za,payload:e}},getExam:function(e){return{type:Ra,payload:e}},setExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Va,payload:e}}},Ha=Ya,Za=je.a.mark(Qa);function Qa(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("exams",null,t),c.next=5,Object(ue.b)(he,a);case 5:return s=c.sent,c.next=8,Object(ue.c)(Ha.setListExam({result:{list:s.data,metaList:s.meta}}));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.error("[Orus System] Error en saga/exam getList:",c.t0),c.next=15,Object(ue.c)(Ha.setMessagesExam([]));case 15:case"end":return c.stop()}}),Za,null,[[1,10]])}var Xa=je.a.mark(Wa);function Wa(e){var t,a,s,c;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=t.id,s=pe("exams",a),n.next=6,Object(ue.b)(he,s,"DELETE");case 6:if(c=n.sent){n.next=13;break}return console.log("[Orus System] Examen eliminado con exito",a),n.next=11,Object(ue.c)(Ha.setMessagesExam([{type:"success",text:"Examen eliminado con exito"}]));case 11:case 17:n.next=21;break;case 13:if(console.error("[Orus System] Fallo al eliminar el examen",c.message),!c.message.indexOf("[SQLSTATE[23000]]")){n.next=19;break}return n.next=17,Object(ue.c)(Ha.setMessagesExam([{type:"error",text:"No se puede eliminar un examen que esta asignado",errnum:"SQL23000"}]));case 19:return n.next=21,Object(ue.c)(Ha.setMessagesExam([{type:"error",text:"No se puede eliminar el examen"}]));case 21:n.next=28;break;case 23:return n.prev=23,n.t0=n.catch(1),console.error("[Orus System] Error in handle deleteOrder",n.t0),n.next=28,Object(ue.c)(Ha.setMessagesExam([{type:"error",text:"al eliminar el examen, intentelo mas tarde"}]));case 28:case"end":return n.stop()}}),Xa,null,[[1,23]])}var Ka=je.a.mark(es);function es(e){var t,a,s,c,n,r,i;return je.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,l.prev=1,a=t.id,s=t.data,c=t.options,n=pe("exams",a),r=a?"PUT":"POST",l.next=9,Object(ue.b)(he,n,r,s);case 9:if((i=l.sent).message){l.next=18;break}return console.log("[Orus System] Examen almacenado con exito",i.data.id),l.next=14,Object(ue.c)(Ha.setMessagesExam([{type:"success",text:a?"Examen actualizado con exito":"Examen almacenado con exito"}]));case 14:return l.next=16,Object(ue.c)(Ha.getListExam(c));case 16:l.next=21;break;case 18:return console.error("[Orus System] Fallo al almacenar el examen",i.message),l.next=21,Object(ue.c)(Ha.setMessagesExam([{type:"error",text:"No se puede almacenar el examen"}]));case 21:l.next=28;break;case 23:return l.prev=23,l.t0=l.catch(1),console.error("[Orus System] Error in handle save exam",l.t0),l.next=28,Object(ue.c)(Ha.setMessagesExam([{type:"error",text:"al almacenar el examen, intentelo mas tarde"}]));case 28:case"end":return l.stop()}}),Ka,null,[[1,23]])}var ts=je.a.mark(as);function as(e){var t,a;return je.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(ue.b)(he,"exams/".concat(t),"GET");case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(ue.c)(Ha.setExam(a.data));case 8:s.next=11;break;case 10:console.error("[OrusSystem] Error en handleGetExam",a);case 11:s.next=18;break;case 13:return s.prev=13,s.t0=s.catch(1),console.error("[OrusSystem] Error en saga/Exam handleGetExam",s.t0),s.next=18,Object(ue.c)(Ha.setMessagesExam([{type:"error",text:"al traer datos de contacto, intentelo mas tarde"}]));case 18:case"end":return s.stop()}}),ts,null,[[1,13]])}var ss=je.a.mark(cs);function cs(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de exam"),e.next=3,Object(ue.d)(Ba,Qa);case 3:return e.next=5,Object(ue.d)(Ua,Wa);case 5:return e.next=7,Object(ue.d)(za,es);case 7:return e.next=9,Object(ue.d)(Ra,as);case 9:case"end":return e.stop()}}),ss)}var ns=$a,rs="SAGA_GET_LIST_SALES",is="SAGA_DELETE_SALE",ls="SAGA_SAVE_SALE",os="SAGA_GET_SALE",ds="SAGA_GET_LIST_BANK",js="SAGA_DELETE_PAYMENT",us="SET_LIST_SALES",ms="SET_SALE",bs="SET_MESSAGE_SALE",hs="SET_LIST_BANKS",xs={confirm:function(e,t){window.Swal.fire({title:"Ventas",text:e,icon:"question",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then((function(e){e.dismiss||t&&t()}))},getMethodName:function(e){switch(e){case 1:return"efectivo";case 2:return"tarjeta debito";case 3:return"tarjeta Credito";case 4:return"la marina";case 5:return"cheque";case 6:return"transferencia";default:return"otro"}},getSession:function(){return Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(10)}},ps={list:[],metaList:{},messages:[],sale:{id:0,customer:{id:2,nombre:"venta de mostrador",email:"",telefonos:{},f_nacimiento:null,edad:0},contact_id:2,items:[],session:xs.getSession(),descuento:0,subtotal:0,total:0,payments:[],created_at:new Date},listBanks:[],loading:!1,load_save:!1},Os=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ps,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case rs:case os:case is:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case ls:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,load_save:!0});case ds:case js:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case us:return Object(l.a)(Object(l.a)(Object(l.a)({},e),a.result),{},{messages:[],loading:!1});case bs:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,messages:a});case ms:return Object(l.a)(Object(l.a)({},e),{},{sale:a,messages:[],loading:!1,load_save:!1});case hs:return Object(l.a)(Object(l.a)({},e),{},{listBanks:a,messages:[],loading:!1});default:return Object(l.a)({},e)}},fs={setListSales:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:us,payload:e}},setMessagesSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:bs,payload:e}},saveSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ls,payload:e}},setSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ms,payload:e}},getListSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:rs,payload:e}},getSale:function(e){return{type:os,payload:e}},deleteSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:is,payload:e}},getListBanks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ds,payload:e}},setListBanks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:hs,payload:e}},deletePayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:js,payload:e}}},gs=fs,vs=je.a.mark(Ns);function Ns(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("sales",null,t),c.next=5,Object(ue.b)(he,a);case 5:return s=c.sent,c.next=8,Object(ue.c)(gs.setListSales({result:{list:s.data,metaList:s.meta}}));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.error("[Orus System] Error en saga/exam getList:",c.t0),c.next=15,Object(ue.c)(gs.setMessagesSale([]));case 15:case"end":return c.stop()}}),vs,null,[[1,10]])}var ys=je.a.mark(Ss);function Ss(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("config",null,Object(l.a)(Object(l.a)({},t),{},{name:"bank"})),c.next=5,Object(ue.b)(he,a);case 5:return s=c.sent,c.next=8,Object(ue.c)(gs.setListBanks(s.data));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.error("[Orus System] Error en saga/banks handleGetList:",c.t0),c.next=15,Object(ue.c)(gs.setMessagesSale([]));case 15:case"end":return c.stop()}}),ys,null,[[1,10]])}var Cs=je.a.mark(_s);function _s(e){var t,a,s,c,n,r;return je.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,a=t.id,s=t.data,c=pe("sales",a),n=a?"PUT":"POST",i.next=8,Object(ue.b)(he,c,n,s);case 8:if((r=i.sent).message){i.next=17;break}return console.log("[Orus System] Venta almacenada con exito",r.data.id),i.next=13,Object(ue.c)(gs.setMessagesSale([{type:"success",text:a?"Venta actualizada con exito":"Venta almacenada con exito"}]));case 13:return i.next=15,Object(ue.c)(gs.setSale(r.data));case 15:i.next=20;break;case 17:return console.error("[Orus System] Fallo al almacenar la venta",r),i.next=20,Object(ue.c)(gs.setMessagesSale([{type:"error",text:"No se puede almacenar la venta"}]));case 20:i.next=27;break;case 22:return i.prev=22,i.t0=i.catch(1),console.error("[Orus System] Error in saga/sales handledSaveSale",i.t0.message),i.next=27,Object(ue.c)(gs.setMessagesSale([{type:"error",text:"al almacenar venta, intentelo mas tarde"}]));case 27:case"end":return i.stop()}}),Cs,null,[[1,22]])}var ws=je.a.mark(ks);function ks(e){var t,a,s,c,n;return je.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.sale_id,c=pe("payments",a),r.next=7,Object(ue.b)(he,c,"DELETE");case 7:if(n=r.sent){r.next=17;break}return r.next=11,Object(ue.c)(gs.setMessagesSale([{type:"success",text:"Pago eliminado con exito"}]));case 11:if(!s){r.next=14;break}return r.next=14,Object(ue.c)(gs.getSale(s));case 14:console.log("[Orus System] Pago eliminado con exito",a),r.next=20;break;case 17:return console.error("[Orus System] Fallo al eliminar el pago",n.message),r.next=20,Object(ue.c)(gs.setMessagesSale([{type:"error",text:"No se puede eliminar el pago"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en payment/saga handledDeletePayment",r.t0.message),r.next=27,Object(ue.c)(gs.setMessagesSale([{type:"error",text:"al eliminar el pago, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),ws,null,[[1,22]])}var Es=je.a.mark(Ls);function Ls(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("sales",t),c.next=5,Object(ue.b)(he,a);case 5:if(!(s=c.sent).data){c.next=10;break}return console.log("[Orus System] Estableciendo venta",t),c.next=10,Object(ue.c)(gs.setSale(s.data));case 10:c.next=17;break;case 12:return c.prev=12,c.t0=c.catch(1),console.error("[Orus System] Error en saga/sale handleGetSale:",c.t0.message),c.next=17,Object(ue.c)(gs.setMessagesSale([]));case 17:case"end":return c.stop()}}),Es,null,[[1,12]])}var Is=je.a.mark(Ds);function Ds(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de ventas"),e.next=3,Object(ue.d)(rs,Ns);case 3:return e.next=5,Object(ue.d)(ds,Ss);case 5:return e.next=7,Object(ue.d)(ls,_s);case 7:return e.next=9,Object(ue.d)(js,ks);case 9:return e.next=11,Object(ue.d)(os,Ls);case 11:case"end":return e.stop()}}),Is)}var Ts=Os,As="SAGA_GET_LIST_CONFIG",Ps="SAGA_GET_CONFIG",Fs="SAGA_DELETE_CONFIG",Ms="SAGA_SAVE_CONFIG",Bs="SET_LIST_CONFIG",Us="SET_CONFIG",zs="SET_MESSAGE_CONFIG",Rs="SAGA_GET_BRANCHES",Gs="SET_BRANCHES",Vs={list:[],meta:{},config:{},messages:[],branches:[],loading:!1},qs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vs,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case As:return Object(l.a)(Object(l.a)({},e),{},{list:[],meta:{},loading:!0});case Ps:return Object(l.a)(Object(l.a)({},e),{},{config:{},loading:!0});case Fs:case Ms:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case zs:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,messages:a});case Bs:return Object(l.a)(Object(l.a)({},e),{},{list:a.data,meta:a.meta,loading:!1,messages:[]});case Us:return Object(l.a)(Object(l.a)({},e),{},{config:a,loading:!1,messages:[]});case Rs:return Object(l.a)({},e);case Gs:return Object(l.a)(Object(l.a)({},e),{},{branches:a});default:return Object(l.a)({},e)}},Js={setMessages:function(e){return{type:zs,payload:e}},getListConfig:function(e){return{type:As,payload:e}},getConfig:function(e){return{type:Ps,payload:e}},deleteConfig:function(e){return{type:Fs,payload:e}},saveConfig:function(e){return{type:Ms,payload:e}},setListConfig:function(e){return{type:Bs,payload:e}},setConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Us,payload:e}},getBranches:function(e){return{type:Rs,payload:e}},setBranches:function(e){return{type:Gs,payload:e}}},$s=Js,Ys=je.a.mark(Hs);function Hs(e){var t,a,s;return je.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=pe("config",null,t),c.next=5,Object(ue.b)(he,a);case 5:if(!(s=c.sent).data){c.next=11;break}return c.next=9,Object(ue.c)($s.setListConfig(s));case 9:c.next=12;break;case 11:s.message&&console.error("[Orus system] Error en la consulta de configuraciones",s.message);case 12:c.next=19;break;case 14:return c.prev=14,c.t0=c.catch(1),console.error("[Orus System] Error en saga/config handleGetListConfig:",c.t0.message),c.next=19,Object(ue.c)($s.setMessages([]));case 19:case"end":return c.stop()}}),Ys,null,[[1,14]])}var Zs=je.a.mark(Qs);function Qs(e){var t,a;return je.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,s.next=4,Object(ue.b)(he,"users/".concat(t));case 4:if(!(a=s.sent).data){s.next=10;break}return s.next=8,Object(ue.c)($s.setConfig(a.data));case 8:s.next=11;break;case 10:console.error("[OrusSystem] Error en saga/users por servidor handleGetUser",a);case 11:s.next=18;break;case 13:return s.prev=13,s.t0=s.catch(1),console.error("[OrusSystem] Error en saga/users handleGetUser:",s.t0.message),s.next=18,Object(ue.c)($s.setMessages([]));case 18:case"end":return s.stop()}}),Zs,null,[[1,13]])}var Xs=je.a.mark(Ws);function Ws(e){var t,a,s,c,n;return je.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,s=t.options,c="config/".concat(a),r.next=7,Object(ue.b)(he,c,"DELETE");case 7:if(n=r.sent){r.next=16;break}return console.log("[Orus System] Configuracion eliminada con exito",a),r.next=12,Object(ue.c)($s.setMessages([{type:"success",text:"Configuracion eliminada con exito"}]));case 12:return r.next=14,Object(ue.c)($s.getListConfig(s));case 14:r.next=17;break;case 16:console.error("[Orus Server] Fallo al eliminar configuracion",n.message);case 17:r.next=24;break;case 19:return r.prev=19,r.t0=r.catch(1),console.error("[Orus Server] Error en saga/configuraciones handledDeleteConfig",r.t0.message),r.next=24,Object(ue.c)($s.setMessages([{type:"error",text:"al eliminar la configuracion, intentelo mas tarde"}]));case 24:case"end":return r.stop()}}),Xs,null,[[1,19]])}var Ks=je.a.mark(ec);function ec(e){var t,a,s,c,n,r,i,l,o,d;return je.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return t=e.payload,j.prev=1,a=t.data,s=void 0===a?{}:a,c=t.id,n=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,l=pe("config",n),o=n?"PUT":"POST",j.next=12,Object(ue.b)(he,l,o,s);case 12:if(!(d=j.sent).message){j.next=15;break}throw new Error(d.message);case 15:return n?console.log("[Orus System] Configuracion actualizada con exito: "+n):console.log("[Orus system] Configuracion creada con exito",d.data.id),j.next=18,Object(ue.c)($s.setMessages([{type:"success",text:n?"Configuracion actualizada con exito":"Configuracion almacenada con exito"}]));case 18:return j.next=20,Object(ue.c)($s.getListConfig(i));case 20:j.next=27;break;case 22:return j.prev=22,j.t0=j.catch(1),console.error("[Orus Server] Error en saga/configuraciones handleSaveConfig",j.t0),j.next=27,Object(ue.c)($s.setMessages([{type:"error",text:"al almacenar la configuracion, intentelo mas tarde"}]));case 27:case"end":return j.stop()}}),Ks,null,[[1,22]])}var tc=je.a.mark(ac);function ac(e){var t,a;return je.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e.payload,s.prev=1,t=pe("config",null,{page:1,name:"branches",itemsPage:10}),s.next=6,Object(ue.b)(he,t);case 6:if(!(a=s.sent).data){s.next=12;break}return s.next=10,Object(ue.c)($s.setBranches(a.data));case 10:s.next=13;break;case 12:a.message&&console.error("[Orus system] Error en la consulta de sucursales",a.message);case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(1),console.error("[Orus System] Error en saga/config handleGetListConfig:",s.t0.message);case 18:case"end":return s.stop()}}),tc,null,[[1,15]])}var sc=je.a.mark(cc);function cc(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de configuracion"),e.next=3,Object(ue.d)(As,Hs);case 3:return e.next=5,Object(ue.d)(Ps,Qs);case 5:return e.next=7,Object(ue.d)(Fs,Ws);case 7:return e.next=9,Object(ue.d)(Ms,ec);case 9:return e.next=11,Object(ue.d)(Rs,ac);case 11:case"end":return e.stop()}}),sc)}var nc=qs,rc=Object(r.b)({users:Fe,default:v,order:rt,category:kt,storeItem:ja,contact:Ma,exam:ns,sales:Ts,config:nc}),ic=je.a.mark(lc);function lc(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.a)([Pe(),nt(),wt(),da(),Fa(),cs(),Ds(),cc()]);case 2:case"end":return e.stop()}}),ic)}var oc=Object(i.a)(),dc="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.c,jc=Object(r.d)(rc,dc(r.a.apply(void 0,[oc])));oc.run(lc);var uc=jc,mc=a(9),bc=a(2),hc=a.n(bc),xc=a(22);function pc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(c,n){var r=localStorage.getItem("OrusSystem"),i=sessionStorage.getItem("OrusSystem"),l=JSON.parse(r||"{}"),o=l.protocol,d=void 0===o?"http":o,j=l.host,u=void 0===j?window.location.hostname.toString():j,m=l.port,b=void 0===m?"80":m,h=JSON.parse(i||"{}").token,x={method:t,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+(void 0===h?"":h)}};["POST","PUT"].includes(t.toUpperCase())&&a&&(x.body=JSON.stringify(a)),s&&(x.signal=s.signal),fetch("".concat(d,"://").concat(u,":").concat(b,"/api/").concat(e),x).then(function(){var e=Object(be.a)(je.a.mark((function e(t){var a,s,r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=200&&t.status<300)){e.next=23;break}a=Object(me.a)(t.headers.entries()),e.prev=2,a.s();case 4:if((s=a.n()).done){e.next=15;break}if("content-type"!==(r=s.value)[0]){e.next=13;break}e.t0=r[1],e.next="application/json"===e.t0?10:"text/csv; charset=UTF-8"===e.t0?11:12;break;case 10:return e.abrupt("return",c(t.json()));case 11:return e.abrupt("return",c(t.blob()));case 12:return e.abrupt("return",n());case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),a.e(e.t1);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.abrupt("return",c(t.json()));case 24:case"end":return e.stop()}}),e,null,[[2,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return console.error("[Orus System] Query API failer:",e),console.error("[Orus System] Query API message:",t.message),n()}))}))}function Oc(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e,c=null,n=Object.keys(a);return t&&(s+="/".concat(t)),"object"!==typeof a||Array.isArray(a)||n&&(n.map((function(e){return null!==a[e]&&""!==a[e]||delete a[e],null})),n.length&&(c=new URLSearchParams(a),s+="?".concat(c))),s}var fc=a(0),gc=Object(bc.createContext)(null);function vc(e){var t=e.children,a=Object(xc.f)(),s=sessionStorage.getItem("OrusSystem"),c={isLogged:!1,idUser:0,username:"",name:"",rol:null,email:"",token:"",branch:"",roles:"",permissions:[]},n=Object(bc.useState)((function(){return s&&"undefined"!==s&&(c=JSON.parse(s)),c})),r=Object(mc.a)(n,2),i=r[0],o=r[1],d=function(e){var t,a;if(e){var s={isLogged:null!==(t=e.isLogged)&&void 0!==t?t:i.isLogged,idUser:e.id,username:e.username.toLowerCase(),name:e.name.toLowerCase(),rol:2,email:e.email,token:null!==(a=e.token)&&void 0!==a?a:i.token,branch:Object(l.a)(Object(l.a)({},e.branch.data),{},{id:e.branch.id}),roles:e.roles[0],permissions:e.permissions};o(s),sessionStorage.setItem("OrusSystem",JSON.stringify(s))}},j=function(){var e=Object(be.a)(je.a.mark((function e(t){var a,s;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,s=t.password,a&&s){e.next=3;break}return e.abrupt("return",{status:!1,message:"The fields user or passwors are required"});case 3:return e.next=5,pc("user/login","POST",t).then((function(e){if(!e.status)return{status:!1,data:e};var t=e.data;return d(Object(l.a)(Object(l.a)({},t),{},{token:e.token,isLogged:!0})),{status:!0,message:e.message}})).catch((function(e){return{status:!1,message:"Error en el servidor: "+e.message}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(be.a)(je.a.mark((function e(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pc("user/logout","POST").then((function(){return o(c),sessionStorage.setItem("OrusSystem","{}"),!0})).catch((function(e){return console.error("[Server] When close session:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(be.a)(je.a.mark((function e(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pc("user").then((function(e){return"Unauthenticated."===e.message?a.push("/login"):e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(be.a)(je.a.mark((function e(){var t;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().catch((function(){return null}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",t.unreadNotifications);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(be.a)(je.a.mark((function e(t){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof t){e.next=2;break}return e.abrupt("return",{status:!1,message:"Payload should be object"});case 2:return e.next=4,pc("user/readAllNotifications","POST",t).then((function(e){var a=parseInt(t.id)<0?"Todas":1;return!!e.success&&(console.log("[Orus System] Notificaciones marcadas leidas:",a),!0)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(be.a)(je.a.mark((function e(t){var a,s;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oc("users",i.idUser),s={branch_id:t,name:i.name,username:i.username},e.next=4,pc(a,"PUT",s).then((function(e){return!(!e.data||e.message)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(bc.useEffect)((function(){m().then((function(e){e&&(console.log("[Orus system] Session was created"),d(Object(l.a)(Object(l.a)({},e),{},{isLogged:!0})))}))}),[i.isLogged]),Object(fc.jsx)(gc.Provider,{value:{auth:i,setSession:j,outSession:u,getNotifications:b,setNotifications:h,setBranch:x},children:t})}var Nc=a(13),yc=a(14),Sc=a(15),Cc=a(16),_c=a(11),wc=a.n(_c);function kc(e){var t=e.meta,a=e.color,s=e.handlePagination,c=function(e){s?s(e):console.error("[OrusSystem] Funcion de paginador no definida")};return Object(fc.jsx)("div",{className:"btn-group",children:Object(fc.jsxs)("ul",{className:"pagination pagination-sm m-0 mb-1",children:[Object(fc.jsx)("li",{className:1===t.current_page?"page-item disabled":"page-item test-",children:Object(fc.jsx)("a",{className:1===t.current_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),c(1)},children:"Primero"})}),Object(fc.jsx)("li",{className:1===t.current_page?"page-item disabled":"page-item",children:Object(fc.jsx)("a",{className:1===t.current_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),c(t.current_page-1)},children:Object(fc.jsx)("i",{className:"fas fa-caret-left"})})}),Object(fc.jsx)("li",{className:"page-item",children:Object(fc.jsx)("span",{className:"page-link text-dark",children:t.current_page&&t.last_page?Object(fc.jsxs)(fc.Fragment,{children:[t.current_page," /",t.last_page]}):"..."})}),Object(fc.jsx)("li",{className:t.current_page===t.last_page?"page-item disabled":"page-item",children:Object(fc.jsx)("a",{className:t.current_page===t.last_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),c(t.current_page+1)},children:Object(fc.jsx)("i",{className:"fas fa-caret-right"})})}),Object(fc.jsx)("li",{className:t.current_page===t.last_page?"page-item disabled":"page-item",children:Object(fc.jsx)("a",{className:t.current_page===t.last_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),c(t.last_page)},children:"Ultimo"})})]})})}var Ec=function(e){var t=e.defaultSearch,a=void 0===t?"":t,s=Object(bc.useState)(a),c=Object(mc.a)(s,2),n=c[0],r=c[1],i=Object(bc.useState)(""),l=Object(mc.a)(i,2),o=l[0],d=l[1];return Object(bc.useEffect)((function(){var t=null;e.handleSearch&&(n.length?(o&&clearTimeout(o),t=setTimeout((function(){e.handleSearch(n)}),1e3),d(t)):e.handleSearch(""))}),[n]),Object(fc.jsxs)("div",{className:"card card-"+e.color+" card-outline",children:[Object(fc.jsxs)("div",{className:"card-header",children:[Object(fc.jsxs)("h3",{className:"card-title text-"+e.color,children:[Object(fc.jsx)("i",{className:e.icon?"mr-1 fas fa-"+e.icon:"mr-1 fas fa-user"}),e.title]}),Object(fc.jsx)("div",{className:"card-tools",children:e.handleSearch&&Object(fc.jsxs)("div",{className:"input-group input-group-sm position-relative",children:[Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Buscar",defaultValue:n,onChange:function(e){var t=e.target.value;r(t)},onKeyPress:function(t){"Enter"===t.key&&(o&&clearTimeout(o),e.handleSearch(n))}}),Object(fc.jsx)("div",{className:"position-absolute",style:{top:5,left:-20,color:"#ced4da"},children:Object(fc.jsx)("i",{className:"fas fa-search"})}),n.length>2?Object(fc.jsx)("div",{className:"input-group-append",children:Object(fc.jsx)("div",{className:"btn btn-secondary",onClick:function(e){return r("")},children:Object(fc.jsx)("i",{className:"fas fa-window-close"})})}):null]})})]}),Object(fc.jsxs)("div",{className:"p-0 card-body",children:[e.handleDeleteItem||e.handleEditItem||e.handleStatus||e.handleSync||e.meta||e.handleDownload?Object(fc.jsxs)("div",{className:"mailbox-controls",children:[Object(fc.jsxs)("div",{className:"btn-group",children:[e.handleDeleteItem?Object(fc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Eliminar",disabled:!e.itemSelected,onClick:function(t){return e.handleDeleteItem()},children:Object(fc.jsx)("i",{className:"fas fa-trash-alt"})}):null,e.handleEditItem?Object(fc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Editar",disabled:!e.itemSelected,onClick:function(t){return e.handleEditItem()},children:Object(fc.jsx)("i",{className:"fas fa-edit"})}):null,e.handleStatus?Object(fc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Estado",disabled:!e.itemSelected,onClick:function(t){return e.handleStatus()},children:Object(fc.jsx)("i",{className:"fas fa-check-circle"})}):null,e.handleSync?Object(fc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Recargar",onClick:function(t){return e.handleSync()},children:Object(fc.jsx)("i",{className:"fas fa-sync-alt"})}):null,e.handlePrint?Object(fc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Imprimir",onClick:function(t){return e.handlePrint()},children:Object(fc.jsx)("i",{className:"fas fa-print"})}):null,e.handleDownload?Object(fc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Exportar",onClick:function(t){return e.handleDownload()},children:Object(fc.jsx)("i",{className:"fas fa-file-csv"})}):null]}),Object(fc.jsx)("div",{className:"float-right",children:e.meta&&Object(fc.jsx)(kc,{meta:e.meta,color:e.color,handlePagination:e.handlePagination})})]}):null,Object(fc.jsx)("div",{className:"table-responsive mailbox-messages",children:e.children})]}),e.loading?Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})},Lc={validInputs:function(e){var t=e.email,a=e.password;return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)?/^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$/.test(a)?{isValid:!0}:(console.error("[Orus System] Fallo validacion de password"),{isValid:!1,msg:"Los datos introducidos no son validos",input:"password"}):(console.error("[Orus System] Fallo validacion de email"),{isValid:!1,msg:"Los datos introducidos no son validos",input:"email"})},getNameRoles:function(e){var t=[];return e.forEach((function(e,a){t.push(Object(fc.jsx)("span",{className:"text-capitalize badge badge-dark",children:e},a))})),1===t.length?t:t.length>1?Object(fc.jsx)("span",{className:"text-capitalize badge badge-dark",children:"+1"}):void 0},handleDelete:function(e,t,a,s){if(e.id)return s||(s="\xbfEsta seguro de eliminar el usuario ".concat(e.username,"?")),window.Swal.fire({text:s,icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){if(!s.dismiss&&a)return a({id:e.id,options:t}),!0})),!1},handleSave:function(e,t,a,s,c,n){n||(n=e?"\xbfEsta seguro de actualizar el usuario?":"\xbfEsta seguro de crear un nuevo usuario?"),window.Swal.fire({title:"Almacenamiento",text:n,icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:e?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(n){!n.dismiss&&s&&(s({id:e,data:t,options:a}),c&&c())}))}};var Ic={_getListUsers:oe.getListUsers,_setOptions:oe.setOptions,_setUser:oe.setUser,_getUser:oe.getUser,_deleteUser:oe.deleteUser},Dc=Object(n.b)((function(e){var t=e.users;return{users:t.list,meta:t.meta,messages:t.messages,loading:t.loading,options:t.options}}),Ic)((function(e){var t=e.loading,a=e.meta,s=e.users,c=e.options,n=e._getListUsers,r=e._setOptions,i=e._deleteUser,l=e._setUser,o=e._getUser,d=Object(bc.useState)({id:0}),j=Object(mc.a)(d,2),u=j[0],m=j[1],b=function(e,t){c[e]!==t&&r({key:e,value:t})},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:0};e&&e.preventDefault(),t.id?l(t):u.id&&o(u.id)};return Object(bc.useEffect)((function(){n(c)}),[c]),Object(fc.jsx)(Ec,{title:"Lista de productos",icon:"id-badge",color:"primary",loading:t,meta:a,itemSelected:u.id,defaultSearch:c.search,handlePagination:function(e){return b("page",e)},handleSearch:function(e){return b("search",e)},handleDeleteItem:function(){Lc.handleDelete(u,c,i),m({id:0})},handleEditItem:h,handleSync:function(){return n(c)},children:Object(fc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{}),Object(fc.jsx)("th",{children:"Nombre"}),Object(fc.jsx)("th",{children:"Email/Usuario"}),Object(fc.jsx)("th",{children:"Rol"}),Object(fc.jsx)("th",{children:"Sucursal"}),"created_at"===c.orderby?Object(fc.jsx)("th",{children:"Creado"}):Object(fc.jsx)("th",{children:"Modificado"})]})}),Object(fc.jsx)("tbody",{children:s.length?Object(fc.jsx)(fc.Fragment,{children:s.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(fc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"item_"+e.id,checked:u.id===e.id,onChange:function(t){var a,s=t.target;return a=e,s.checked||(a={id:0}),void m(a)}}),Object(fc.jsx)("label",{htmlFor:"item_"+e.id,className:"sr-only"})]}),Object(fc.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",children:Object(fc.jsx)("a",{href:"\xb7link",onClick:function(t){return h(t,e)},className:"text-bold",children:e.name})}),Object(fc.jsx)("td",{className:"mailbox-name text-muted text-truncate",children:Object(fc.jsx)("span",{children:e.email})}),Object(fc.jsx)("td",{className:"mailbox-name text-dark text-bold text-truncate",children:Lc.getNameRoles(e.roles)}),Object(fc.jsx)("td",{className:"text-truncate",children:Object(fc.jsx)("span",{className:"text-capitalize",children:e.branch.data.name})}),"created_at"===c.orderby?Object(fc.jsx)("td",{className:"mailbox-date text-muted text-truncate",children:Object(fc.jsx)("span",{children:wc()(e.created_at).format("LL")})}):Object(fc.jsx)("td",{className:"mailbox-date text-muted text-truncate",children:Object(fc.jsx)("span",{children:wc()(e.updated_at).fromNow()})})]},e.id)}))}):Object(fc.jsx)("tr",{children:Object(fc.jsx)("th",{className:"text-center text-muted",colSpan:"6",children:"No hay usuarios registrados"})})})]})})}));function Tc(e){var t=Object(bc.useState)({bgColor:"bg-blue",validate:"",text:"Debe de tener al menos 4 caracteres.",searchUser:!1}),a=Object(mc.a)(t,2),s=a[0],c=a[1],n=e.col,r=e.username,i=e.userId,o=e.onChange,d=s.bgColor,j=s.validate,u=s.text,m=s.searchUser;return Object(fc.jsxs)("div",{className:"col-"+n,children:[r.length?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Usuario"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text "+d,children:m?Object(fc.jsx)("i",{className:"fas fa-spinner"}):Object(fc.jsx)("i",{className:"fas fa-user-check"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control"+j,placeholder:"Usuario",name:"username",autoComplete:"off",autoFocus:"autofocus",defaultValue:r,onChange:function(e){return function(e){var t=e.name,a=e.value;o({name:t,value:a.toLowerCase()})}(e.target)},onBlur:function(){var e=r.replace(/\s/g,"");/^[\w]{4,16}$/.test(e)?(c(Object(l.a)(Object(l.a)({},s),{},{searchUser:!0})),Ac(e,i).then((function(e){e?(c(Object(l.a)(Object(l.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"El usuario ya esta registrado.",searchUser:!1})),o({name:"validUserName",value:!1})):(c(Object(l.a)(Object(l.a)({},s),{},{bgColor:"bg-blue",validate:"",text:"",searchUser:!1})),o({name:"validUserName",value:!0}))}))):e.length>4?(c(Object(l.a)(Object(l.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"No tiene el formato de usuario"})),o({name:"validUserName",value:!1})):e.length||(c(Object(l.a)(Object(l.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"Debe de tener de 4 a 16 caracteres alfanumericos."})),o({name:"validUserName",value:!1}))},required:"required",minLength:"4",maxLength:"16",pattern:"^[\\w]{4,16}$"})]}),j?Object(fc.jsx)("small",{className:"text-muted",children:u}):""]})}var Ac=function(){var e=Object(be.a)(je.a.mark((function e(t){var a,s,c,n=arguments;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:null,s=pe("users",null,{username:t,userId:a,deleted:0}),e.next=4,he(s);case 4:if(!(c=e.sent).data||!c.data.length){e.next=9;break}if(c.data[0].username.toLowerCase()!==t){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Pc(e){var t=Object(bc.useState)({bgColor:"bg-blue",validate:"",text:"No tiene el formato de un email",searchEmail:!1}),a=Object(mc.a)(t,2),s=a[0],c=a[1],n=e.col,r=e.email,i=e.userId,o=e.onChange,d=s.bgColor,j=s.validate,u=s.text,m=s.searchEmail;return Object(fc.jsxs)("div",{className:"col-"+n,children:[r.length?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Email"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text "+d,children:m?Object(fc.jsx)("i",{className:"fas fa-spinner"}):Object(fc.jsx)("i",{className:"fas fa-at"})})}),Object(fc.jsx)("input",{type:"email",className:"form-control"+j,placeholder:"email",name:"email",autoComplete:"off",defaultValue:r,onChange:function(e){return function(e){var t=e.name,a=e.value;o({name:t,value:a.toLowerCase()})}(e.target)},onBlur:function(){var e=r.replace(/\s/g,"");/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)?(c(Object(l.a)(Object(l.a)({},s),{},{searchUser:!0})),Fc(e,i).then((function(e){e?(c({bgColor:"bg-red",validate:" border border-danger",text:"El usuario ya esta registrado.",searchUser:!1}),o({name:"validUserEmail",value:!1})):(c(Object(l.a)(Object(l.a)({},s),{},{bgColor:"bg-blue",validate:"",text:""})),o({name:"validUserEmail",value:!0}))}))):e.length>8?(c(Object(l.a)(Object(l.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"No tiene el formato de un email valido"})),o({name:"validUserEmail",value:!1})):e.length||(c(Object(l.a)(Object(l.a)({},s),{},{bgColor:"bg-red",validate:" border border-danger",text:"Escriba un email valido"})),o({name:"validUserEmail",value:!1}))},required:"required"})]}),j?Object(fc.jsx)("small",{className:"text-muted",children:u}):""]})}var Fc=function(){var e=Object(be.a)(je.a.mark((function e(t,a){var s,c;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=pe("users",null,{email:t,userId:a,deleted:0}),e.next=3,he(s);case 3:if(!(c=e.sent).data||!c.data.length){e.next=8;break}if(c.data[0].email.toLowerCase()!==t){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Mc=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).getBranchs=function(){(0,s.props._getBranchs)({page:1,name:"branches",itemsPage:10})},s.handleCloseSession=function(e){var t=s.props._clearToken;e?window.Swal.fire({title:"Almacenamiento",text:"Esta seguro de eliminar la sesion del usuario",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Si",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(a){!a.dismiss&&t&&t(e)})):console.error("[Orus System] Id is undefinned",e)},s.handleClosePanel=function(){(0,s.props._setUser)()},s.catchInputs=function(e){var t=e.name,a=e.value;"text"===e.type&&(a=a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")),s.setState(Object(N.a)({},t,a))},s.handleSave=function(){var e=s.state,t=e.id,a=e.name,c=e.username,n=e.role,r=e.password,i=e.email,l=e.branch_id,o=e.validUserName,d=e.validUserEmail,j=s.props,u=j._saveUser,m=j.options,b={name:a,username:c,role:n,email:i,branch_id:l};return r.length>=8&&(b.password=r),o?d?(console.log("DEBUG NEW USER",b),void Lc.handleSave(t,b,m,u)):(window.Swal.fire({icon:"error",title:"El correo ya esta en uso",showConfirmButton:!1,timer:1500}),!1):(window.Swal.fire({icon:"error",title:"El nombre de usuario ya esta en uso",showConfirmButton:!1,timer:1500}),!1)},s.state={id:0,role:"admin",roles:[],permissions:[],username:"",validUserName:!1,name:"",email:"",validUserEmail:!1,password:"",updated_at:"",created_at:"",session:{},branch_id:12,load:!1},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){console.log("Nuevo usuario component montado--------");var e=this.props.user;e&&e.id&&this.setState({id:e.id,role:e.roles[0],roles:e.roles,permissions:e.permissions,username:e.username,name:e.name,email:e.email,updated_at:e.updated_at,created_at:e.created_at,session:e.session,branch_id:e.branch.id,validUserName:!0,validUserEmail:!0}),this.getBranchs()}},{key:"render",value:function(){var e=this,t=this.state,a=t.load,s=t.id,c=t.role,n=t.permissions,r=t.username,i=t.name,l=t.email,o=t.password,d=t.updated_at,j=t.created_at,u=t.session,m=t.branch_id,b=t.validUserName,h=t.validUserEmail,x=!(!a&&b&&i.length&&h),p=this.props.branchs;return Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-".concat(s?8:12),children:[Object(fc.jsxs)("form",{className:"card card-primary card-outline",autoComplete:"off",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h1",{className:"card-title text-primary",children:[Object(fc.jsx)("i",{className:"fas fa-user mr-2"}),s?"Editar usuario":"Registrar nuevo usuario"]})}),Object(fc.jsx)("div",{className:"card-body was-validated",children:a?Object(fc.jsx)("div",{className:"alert alert-light text-center p-4",children:Object(fc.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(fc.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"row mb-3",children:[Object(fc.jsx)(Tc,{username:r,userId:s||"",col:6,onChange:this.catchInputs}),Object(fc.jsxs)("div",{className:"col-6",children:[i.length?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Nombre completo"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text bg-blue",children:Object(fc.jsx)("i",{className:"fas fa-user-tag"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Nombre completo",name:"name",autoComplete:"off",defaultValue:i,onChange:function(t){var a=t.target;return e.catchInputs(a)},required:"required",minLength:"8",pattern:"^[a-zA-Z]{2,20}[\\s]{1}[a-zA-Z]{2,20}.*"})]})]})]}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-md-6",children:[o.length||s?Object(fc.jsxs)("small",{children:[Object(fc.jsx)("label",{children:"Contrase\xf1a"}),!s&&Object(fc.jsx)("span",{className:"ml-2 text-muted",children:"De 8 a 16 caracteres, por lo menos una mayuscula, un numero y un caracter especial"})]}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text bg-blue",children:Object(fc.jsx)("i",{className:"fas fa-lock"})})}),Object(fc.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"password",autoComplete:"off",defaultValue:o,onChange:function(t){var a=t.target;return e.catchInputs(a)},required:!s,minLength:"8",maxLength:"16",pattern:"^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$"})]})]}),Object(fc.jsx)(Pc,{email:l,userId:s||"",col:6,onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-md-6",children:[Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Tipo de usuario"})}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text bg-blue",children:Object(fc.jsx)("i",{className:"fas fa-id-card"})})}),Object(fc.jsxs)("select",{className:"custom-select",name:"role",defaultValue:c,onChange:function(t){var a=t.target;return e.catchInputs(a)},children:[Object(fc.jsx)("option",{value:"admin",children:"Administrador"}),Object(fc.jsx)("option",{value:"ventas",children:"Ventas"}),Object(fc.jsx)("option",{value:"doctor",children:"Optometrista"})]})]})]}),Object(fc.jsxs)("div",{className:"col-md-6",children:[Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Sucursal"})}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text bg-blue",children:Object(fc.jsx)("i",{className:"fas fa-store"})})}),Object(fc.jsx)("select",{className:"custom-select text-uppercase",name:"branch_id",value:m,onChange:function(t){var a=t.target;return e.catchInputs(a)},children:p.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.data.name},e.id)}))})]})]})]})]})}),Object(fc.jsx)("div",{className:"card-footer",children:Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col-md-12 text-right",children:Object(fc.jsxs)("div",{className:"btn-group btn-group-lg",role:"group",children:[Object(fc.jsxs)("button",{type:"button",className:"btn btn-dark",onClick:this.handleClosePanel,children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(fc.jsxs)("button",{type:"button",className:a?"btn btn-primary disabled":"btn btn-primary",disabled:!!x,onClick:this.handleSave,children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"}),"Guardar"]})]})})})})]}),Object(fc.jsxs)("div",{className:"card card-primary card-outline mt-4",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsx)("h5",{className:"card-title text-primary",children:"Tipo y permisos"})}),Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)("span",{className:"badge badge-dark m-1",children:c}),n.map((function(e,t){return Object(fc.jsx)("span",{className:"badge badge-primary m-1",children:e},t)}))]})]})]}),s?Object(fc.jsx)("div",{className:"col-4",children:Object(fc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h3",{className:"card-title text-primary",children:[Object(fc.jsx)("i",{className:"fas fa-database mr-2"}),"Metadata"]})}),Object(fc.jsx)("div",{className:"card-body",children:u?Object(fc.jsxs)("ul",{className:"list-group",children:[Object(fc.jsxs)("li",{className:"list-group-item",children:[Object(fc.jsx)("h6",{children:"Datos del usuario"}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("span",{className:"text-primary",children:"Registrado"}),Object(fc.jsx)("p",{children:wc()(j).fromNow()})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("span",{className:"text-primary",children:"Ultima actualizacion"}),Object(fc.jsx)("p",{children:wc()(d).fromNow()})]})]})]}),Object(fc.jsxs)("li",{className:"list-group-item",children:[Object(fc.jsx)("h6",{children:"Actividad"}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("span",{className:"text-primary",children:"IP"}),Object(fc.jsx)("p",{children:u.ip_address})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("span",{className:"text-primary",children:"Ultima actividad"}),Object(fc.jsx)("p",{children:wc()(u.last_activity).fromNow()})]})]})]}),Object(fc.jsxs)("li",{className:"list-group-item",children:[Object(fc.jsx)("span",{className:"text-primary",children:"Navegador y OS"}),Object(fc.jsx)("p",{children:u.user_agent})]}),Object(fc.jsxs)("li",{className:"list-group-item",children:[Object(fc.jsx)("span",{className:"text-primary",children:"Token"}),Object(fc.jsx)("p",{children:u.user_data})]})]}):Object(fc.jsx)("p",{children:"Usuario no ha registrado actividad."})}),u&&Object(fc.jsx)("div",{className:"card-footer text-right",children:Object(fc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return e.handleCloseSession(s)},children:[Object(fc.jsx)("i",{className:"fas fa-sign-out-alt mr-1"}),"Cerrar session"]})})]})}):null]})}}]),a}(bc.Component),Bc={_setUser:oe.setUser,_saveUser:oe.saveUser,_clearToken:oe.clearTokenUser,_getBranchs:$s.getListConfig},Uc=Object(n.b)((function(e){var t=e.users,a=e.config;return{loading:t.loading,user:t.user,options:t.options,branchs:a.list}}),Bc)(Mc),zc=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).handleShowPanel=function(e){s.setState({panel:e})},s.handleSetSelectOptions=function(e){var t=e.name,a=e.value;(0,s.props._setOptions)({key:t,value:a})},s.state={panel:"inbox"},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){(0,this.props._setPageName)("usuarios")}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.user;e.user!==a&&a.id&&this.setState({panel:"editAndNewUser"}),e.user===a||a.id||this.setState({panel:"inbox"})}},{key:"render",value:function(){var e=this,t=this.state.panel,a=this.props,s=a.options,c=void 0===s?{}:s,n=a.meta,r=void 0===n?{total:0}:n;return Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-md-2 col-sm-12",children:[Object(fc.jsxs)("a",{href:"#new",className:"inbox"!==t?"disabled mb-3 btn btn-secondary btn-block":"mb-3 btn btn-primary btn-block",onClick:function(t){t.preventDefault(),e.handleShowPanel("editAndNewUser")},disabled:"inbox"!==t,children:[Object(fc.jsx)("i",{className:"mr-2 fas fa-plus"}),"Usuario nuevo"]}),"inbox"===t?Object(fc.jsxs)("div",{className:"card",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h5",{className:"card-title text-dark",children:[Object(fc.jsx)("i",{className:"mr-2 fas fa-ellipsis-v"}),"Filtros"]})}),Object(fc.jsx)("div",{className:"p-0 card-body",children:Object(fc.jsxs)("ul",{className:"nav nav-pills flex-column",children:[Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(fc.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:c.orderby,onChange:function(t){var a=t.target;return e.handleSetSelectOptions(a)},children:[Object(fc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(fc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(fc.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:c.order,onChange:function(t){var a=t.target;return e.handleSetSelectOptions(a)},children:[Object(fc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(fc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de usuarios"}),Object(fc.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:c.itemsPage,onChange:function(t){var a=t.target;return e.handleSetSelectOptions(a)},children:[Object(fc.jsx)("option",{value:"10",children:"ver 10"}),r.total>10&&Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("option",{value:"20",children:"ver 20"}),Object(fc.jsx)("option",{value:"50",children:"ver 50"}),Object(fc.jsx)("option",{value:"100",children:"ver 100"})]})]})]})]})})]}):null]}),Object(fc.jsxs)("div",{className:"col-md-10 col-sm-12",children:["inbox"===t&&Object(fc.jsx)(Dc,{}),"editAndNewUser"===t&&Object(fc.jsx)(Uc,{})]})]})}}]),a}(bc.Component),Rc={_setOptions:oe.setOptions,_setPageName:g.changeNamePage},Gc=Object(n.b)((function(e){var t=e.users;return{loading:t.loading,options:t.options,meta:t.meta,user:t.user}}),Rc)(zc),Vc=function(e){switch(e){case"monofocales":return"MF";case"bifocales":return"BF";case"progresivo basico":case"progresivo-basico":return"PB";case"progresivo digital":case"progresivo-digital":return"PD";case"plastico":return"CR";case"policarbonato":return"PL";case"hi-index":case"hi index":return"HI";case"antirreflejantes":return"AR";case"photo":return"PH";case"ar & photo":case"antirreflejante-photo":return"ARPH";case"blanco":return"BL";case"polarizado":return"PO";case"bifocal invisible":case"bifocal-invisible":return"BI";case"monofocal drivesafe":case"monofocal-drivesafe":case"monofocal digital drivesafe":case"monofocal digital DriveSafe":return"MDSF";case"monofocal superb":case"monofocal-superb":case"monofocal digital superb":return"MDSU";case"monofocal individual":case"monofocal-individual":case"monofocal digital individual":return"MDIN";default:return"XX"}},qc={verifyItem:function(e){return e.cantidad<=0?(window.Swal.fire({title:"Verificacion",text:"La cantidad debe de ser un valor valido",icon:"warning"}),!1):e.store_items_id?!!e.precio||(window.Swal.fire({title:"Verificacion",text:"El precio no es valido",icon:"warning"}),!1):(window.Swal.fire({title:"Verificacion",text:"No se selecciono un producto valido",icon:"warning"}),!1)},handleDeleteItem:function(e,t,a,s){if(e.id)return s||(s="\xbfEsta seguro de eliminar el producto ".concat(e.code,"?")),window.Swal.fire({text:s,icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){if(!s.dismiss&&a)return a({id:e.id,options:t}),!0})),!1},handleVerifyData:function(e,t){var a=e.category_id,s=e.category_id1,c=e.category_id2,n=e.category_id4,r=e.supplier,i=e.brand_id,l=e.code;if(!a)return window.Swal.fire("Verificaci\xf3n","Selecione una categoria primero","warning"),!1;if(a){if(1===s&&n!==a)return window.Swal.fire("Verificaci\xf3n","Selecione una categoria valida para lentes","warning"),!1;if(2===s&&c!==a)return window.Swal.fire("Verificaci\xf3n","Selecione una categoria valida para armazones","warning"),!1}return 2!==s||r?2!==s||i?!(!l&&!t.current.value)||(window.Swal.fire("Verificaci\xf3n","Escriba una CODIGO para este producto","warning"),!1):(window.Swal.fire("Verificaci\xf3n","Selecione una MARCA valida primero","warning"),!1):(window.Swal.fire("Verificaci\xf3n","Selecione un PROVEEDOR valido primero","warning"),!1)},handleSaveItem:function(e,t,a,s,c,n){n||(n=e?"\xbfEsta seguro de actualizar el producto?":"\xbfEsta seguro de crear un nuevo producto?"),window.Swal.fire({title:"Almacenamiento",text:n,icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:e?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(n){!n.dismiss&&s&&(s({id:e,data:t,options:a}),c&&c())}))},handleCatOne:function(e){return{category_id:e.id,category_id1:e.id,category_id2:0,category_list2:e.hijos,category_id3:0,category_list3:[],category_id4:0,category_list4:[],supplier:0}},handleCatTwo:function(e){return{category_id:e.id,category_id2:e.id,category_id3:0,category_list3:e.hijos,category_id4:0,category_list4:[]}},handleCatTree:function(e){return{category_id:e.id,category_id3:e.id,category_id4:0,category_list4:e.hijos}},handleCodeString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"armazon",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e+=null!==t.current&&t.current.selectedIndex?" "+t.current.options[t.current.selectedIndex].text.trim():"",e+=null!==a.current&&a.current.selectedIndex?" "+a.current.options[a.current.selectedIndex].text.trim().replace(/\s/gim,""):"",s&&(e+=" "+s.replace(/[-\s]+/gm,"")),e.toLowerCase()},handleCodeLent:function(e,t,a,s){if(!t.current||!a.current||!s.current)return"";var c=null!==t.current?Vc(t.current.options[t.current.selectedIndex].text.trim().toLowerCase()):"";return c+=null!==a.current?Vc(a.current.options[a.current.selectedIndex].text.trim().toLowerCase()):"",(c+=null!==s.current?Vc(s.current.options[s.current.selectedIndex].text.trim().toLowerCase()):"")+e.toString().trim().replace(/\s/gim,"")},codeLentString:Vc,handleNameLent:function(e,t,a,s){if(!t.current||!a.current||!s.current)return"";var c="";return c+=null!==t.current?t.current.options[t.current.selectedIndex].text.trim():"",c+=null!==a.current?" "+a.current.options[a.current.selectedIndex].text.trim():"",c+=null!==s.current?" "+s.current.options[s.current.selectedIndex].text.trim():"",(c+=" "+e.toString()).toLowerCase()}},Jc=qc;var $c={_getList:$t.getListStore,_setOptions:$t.setOptions,_deleteItem:$t.deleteItem,_setItem:$t.setItem,_getItem:$t.getItem,_setLoading:$t.setLoading},Yc=Object(n.b)((function(e){var t=e.storeItem;return{list:t.list,meta:t.metaList,messages:t.messages,loading:t.loading,options:t.options}}),$c)((function(e){var t=e.loading,a=e.meta,s=e.list,c=void 0===s?[]:s,n=e.options,r=e._getList,i=e._setOptions,o=e._deleteItem,d=e._getItem,j=e._setLoading,u=Object(bc.useState)({id:0}),m=Object(mc.a)(u,2),b=m[0],h=m[1],x=function(e,t){n[e]!==t&&i({key:e,value:t})},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:0};e&&e.preventDefault(),t.id?d(t.id):b.id&&d(b.id)},O=function(){var e=Object(be.a)(je.a.mark((function e(){var t,a,s;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),t=Object(l.a)(Object(l.a)({},n),{},{responseType:"csv"}),console.log("[Orus Sytem] Start donwload csv"),a=pe("store",null,t),e.next=6,he(a);case 6:s=e.sent,j(),s?(console.log("[Orus Sytem] Process data csv"),window.open(URL.createObjectURL(s)),console.log("[Orus Sytem] Donwload is ok"),window.Swal.fire({title:"Descargas",text:"El archivo CSV fue generado correctamente",icon:"success",showConfirmButton:!1,timer:1500})):window.Swal.fire({title:"Descargas",text:"El archivo CSV no se genero correctamente",icon:"error",showConfirmButton:!1,timer:3e3});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(bc.useEffect)((function(){r(n)}),[n]),Object(fc.jsx)(Ec,{title:"Lista de productos",icon:"id-badge",color:"primary",loading:t,meta:a,itemSelected:b.id,defaultSearch:n.search,handlePagination:function(e){return x("page",e)},handleSearch:function(e){return x("search",e)},handleDeleteItem:function(){Jc.handleDeleteItem(b,n,o),h({id:0})},handleEditItem:p,handleDownload:O,handleSync:function(){return r(n)},children:Object(fc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{}),Object(fc.jsx)("th",{children:"Codigo"}),Object(fc.jsx)("th",{children:"Describci\xf3n"}),Object(fc.jsx)("th",{children:"Proveedor"}),Object(fc.jsx)("th",{children:"Marca"}),Object(fc.jsx)("th",{children:"Cant"})]})}),Object(fc.jsx)("tbody",{children:c.length?Object(fc.jsx)(fc.Fragment,{children:c.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(fc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"item_"+e.id,checked:b.id===e.id,onChange:function(t){return function(e,t){e.checked||(t={id:0}),h(t)}(t.target,e)}}),Object(fc.jsx)("label",{htmlFor:"item_"+e.id,className:"sr-only"})]}),Object(fc.jsx)("td",{className:"icheck-primary",children:Object(fc.jsx)("div",{className:"badge badge-dark text-uppercase",children:e.codigo})}),Object(fc.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",children:Object(fc.jsx)("a",{href:"\xb7link",onClick:function(t){return p(t,e)},className:"text-bold",children:e.producto})}),Object(fc.jsx)("td",{className:"mailbox-attachment text-capitalize text-truncate text-muted",children:Object(fc.jsx)("span",{children:e.proveedor?e.proveedor.nombre:"--"})}),Object(fc.jsx)("td",{className:"mailbox-attachment text-uppercase text-truncate text-muted",children:Object(fc.jsx)("span",{children:e.marca?e.marca.marca:"--"})}),Object(fc.jsx)("td",{className:"mailbox-date text-muted text-truncate text-right",children:Object(fc.jsx)("span",{children:e.cant_total})})]},e.id)}))}):Object(fc.jsx)("tr",{children:Object(fc.jsx)("th",{className:"text-center text-muted",colSpan:"6",children:"No hay productos registrados"})})})]})})})),Hc=function(e){var t;return Object(fc.jsxs)("div",{className:"card",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h5",{className:"card-title",children:[Object(fc.jsx)("i",{className:e.icon?"mr-2 fas fa-"+e.icon:"mr-2 fas fa-ellipsis-v"}),null!==(t=e.title)&&void 0!==t?t:"Menu"]})}),Object(fc.jsx)("div",{className:"card-body p-0",children:Object(fc.jsx)("ul",{className:"list-group nav list-group-flush",children:e.children})})]})};var Zc={_getBrands:$t.getListBrands},Qc=Object(n.b)((function(e){return{brands:e.storeItem.brands}}),Zc)((function(e){var t=e.brandsName,a=e.brand,s=e.textSelect,c=void 0===s?"Seleccione una marca":s,n=e.brandRef,r=e.brands,i=e.supplier,l=e.showIcon,o=void 0===l||l,d=e._getBrands,j=e.onBlur,u=e.handleChangeBrand;return Object(bc.useEffect)((function(){i&&d({supplier:i})}),[i]),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Marca"})}),r.length?Object(fc.jsxs)("div",{className:"input-group mb-3",children:[o&&Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:a?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(fc.jsx)("i",{className:"fas fa-copyright"})})}),Object(fc.jsxs)("select",{className:"custom-select text-uppercase",name:t,value:a,ref:n,onChange:function(e){var t=e.target.value;u&&u(parseInt(t))},onBlur:j,children:[Object(fc.jsxs)("option",{value:"0",children:["--",c,"--"]}),r.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.nombre},e.id)}))]})]}):Object(fc.jsxs)("p",{className:"text-danger",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"No exiten marcas para este proveedor!"]})]})})}));var Xc={_getSuppliers:Sa.getListSuppliers},Wc=Object(n.b)((function(e){return{suppliers:e.contact.suppliers}}),Xc)((function(e){var t=e.supplier,a=e.supplierRef,s=e.suppliers,c=e.showIcon,n=void 0===c||c,r=e.handleChangeSupplier,i=e._getSuppliers;return Object(bc.useEffect)((function(){i(null)}),[]),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Proveedor"})}),s.length&&Object(fc.jsxs)("div",{className:"input-group mb-3",children:[n&&Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:t?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(fc.jsx)("i",{className:"fas fa-address-book"})})}),Object(fc.jsxs)("select",{className:"custom-select text-uppercase",name:"supplier",value:t,ref:a,onChange:function(e){var t=e.target.value;r&&r(parseInt(t))},children:[Object(fc.jsx)("option",{value:"0",children:"--Seleccione un Proveedor--"}),s.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.nombre},e.id)}))]})]})]})})}));var Kc={_setOptions:$t.setOptions},en=Object(n.b)((function(e){var t=e.storeItem;e.contact;return{options:t.options}}),Kc)((function(e){var t=e.options,a=e.panel,s=e._setOptions,c=e.handleChangePage,n=function(e){var t=e.name,a=e.value,c=e.checked,n=a;console.log("[Orus System] Cambiando filtros"),"itemsPage"===t&&(n=parseInt(a)),"supplier"===t&&a>0&&(n=parseInt(a)),"zero"===t&&(n=c?"true":"false"),s({key:t,value:n})};return Object(fc.jsxs)(Hc,{title:"inbox"===a?"Menu y filtros":"Menu",children:[Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)("a",{href:"#item",className:"inbox"===a?"nav-link text-dark":"nav-link",onClick:function(e){e.preventDefault(),c("inbox")},children:[Object(fc.jsx)("i",{className:"inbox"===a?"fas fa-plus mr-1":"fas fa-minus mr-1"}),"Productos"]})}),Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)("a",{href:"#item",className:"category"===a?"nav-link text-dark":"nav-link",onClick:function(e){e.preventDefault(),c("category")},children:[Object(fc.jsx)("i",{className:"category"===a?"fas fa-plus mr-1":"fas fa-minus mr-1"}),"Categorias"]})}),Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)("a",{href:"#item",className:"brands"===a?"nav-link text-dark":"nav-link",onClick:function(e){e.preventDefault(),c("brands")},children:[Object(fc.jsx)("i",{className:"brands"===a?"fas fa-plus mr-1":"fas fa-minus mr-1"}),"Marcas"]})}),"inbox"===a&&Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("li",{className:"nav-item p-1",children:Object(fc.jsx)(Wc,{supplier:t.supplier,showIcon:!1,handleChangeSupplier:function(e){return function(e){console.log("[Orus System] Cambiando filtros"),s({key:"brand",value:""}),s({key:"supplier",value:e})}(e)}})}),t.supplier?Object(fc.jsx)("li",{className:"nav-item p-1",children:Object(fc.jsx)(Qc,{supplier:t.supplier,brand:t.brand,showIcon:!1,handleChangeBrand:function(e){return function(e){console.log("[Orus System] Cambiando filtros"),s({key:"brand",value:e})}(e)}})}):null,Object(fc.jsx)("li",{className:"nav-item p-1",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"zero",type:"checkbox",className:"custom-control-input",id:"zero",checked:"true"===t.zero,onChange:function(e){var t=e.target;return n(t)}}),Object(fc.jsx)("label",{className:"custom-control-label font-weight-normal",htmlFor:"zero",children:"Cantidades en cero"})]})}),Object(fc.jsxs)("li",{className:"nav-item p-1",children:[Object(fc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(fc.jsxs)("select",{className:"custom-select text-uppercase",name:"orderby",id:"orderby",value:t.orderby,onChange:function(e){var t=e.target;return n(t)},children:[Object(fc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(fc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-1",children:[Object(fc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(fc.jsxs)("select",{className:"custom-select text-uppercase",name:"order",id:"order",value:t.order,onChange:function(e){var t=e.target;return n(t)},children:[Object(fc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(fc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-1",children:[Object(fc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de productos"}),Object(fc.jsxs)("select",{className:"custom-select text-uppercase",name:"itemsPage",id:"itemsPage",value:t.itemsPage,onChange:function(e){var t=e.target;return n(t)},children:[Object(fc.jsx)("option",{value:"10",children:"ver 10"}),Object(fc.jsx)("option",{value:"20",children:"ver 20"}),Object(fc.jsx)("option",{value:"50",children:"ver 50"}),Object(fc.jsx)("option",{value:"100",children:"ver 100"})]})]})]})]})}));function tn(e){var t=e.branch_default,a=void 0===t?"0":t,s=e.showIcon,c=void 0===s||s,r=e.setBranchId,i=Object(n.d)((function(e){return e.config})).list,o=Object(bc.useState)(a),d=Object(mc.a)(o,2),j=d[0],u=d[1],m=Object(n.d)((function(e){return e.config.branches}));return i&&i.length&&i.forEach((function(e){m.push(Object(l.a)({id:e.id},e.values))})),Object(bc.useEffect)((function(){r&&r(j)}),[j]),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[c&&Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text bg-primary",children:Object(fc.jsx)("i",{className:"fas fa-store-alt"})})}),Object(fc.jsxs)("select",{className:"custom-select text-uppercase",name:"branch_id",value:j,onChange:function(e){return function(e){var t=e.value;return u(parseInt(t))}(e.target)},children:[Object(fc.jsx)("option",{value:"0",children:"-- Ninguna --"}),m.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.data.name},e.id)}))]})]})}function an(e){var t,a,s,c=e.inBranch,r=void 0===c?{}:c,i=e.branch,o=e.store_item_id,d=Object(bc.useState)({id:null!==(t=r.id)&&void 0!==t?t:0,cant:null!==(a=r.cant)&&void 0!==a?a:0,price:null!==(s=r.price)&&void 0!==s?s:1,store_item_id:o,branch_id:i.id,readyToSave:!1}),j=Object(mc.a)(d,2),u=j[0],m=j[1],b=Object(n.c)(),h=function(e){var t=e.name,a=e.value,s=!1;a="cant"===t?parseInt(a):parseFloat(a),r[t]!==a&&(s=!0),m(Object(l.a)(Object(l.a)({},u),{},Object(N.a)({readyToSave:s},t,a)))};return Object(bc.useEffect)((function(){}),[]),Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Cantidad en existencia"})}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text bg-primary",children:Object(fc.jsx)("i",{className:"fas fa-database"})})}),Object(fc.jsx)("input",{type:"number",className:"form-control text-right",placeholder:"Cantidades en existencia",name:"cant",onChange:function(e){var t=e.target;return h(t)},value:u.cant,min:0})]})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Precio"})}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text bg-primary",children:Object(fc.jsx)("i",{className:"fas fa-money-bill"})})}),Object(fc.jsx)("input",{type:"number",className:"form-control text-right",placeholder:"Precio",name:"price",onChange:function(e){var t=e.target;return h(t)},value:u.price,min:0})]})]})]}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col text-right",children:Object(fc.jsxs)("button",{className:u.readyToSave?"btn btn-success":"btn btn-secondary",type:"button",onClick:function(){b($t.saveInBranch({id:u.id,data:u})),m(Object(l.a)(Object(l.a)({},u),{},{readyToSave:!1}))},disabled:!u.readyToSave,children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"})," Guardar"]})})})]})}function sn(e){var t=e.store_item_id,a=e.branch_default,s=Object(n.d)((function(e){return e.config})).list,c=Object(n.d)((function(e){return e.storeItem})).item,r=Object(n.d)((function(e){return e.config.branches})),i=c&&c.inBranches?c.inBranches:[];if(s&&s.length){var o=s;a&&(o=o.filter((function(e){return e.id===a}))),o.forEach((function(e){r.push(Object(l.a)({id:e.id},e.values))}))}return Object(fc.jsx)("form",{children:r.map((function(e){var a=i.filter((function(t){return t.branch_id===e.id}))[0];return Object(fc.jsxs)("div",{className:"card",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h5",{className:"card-title text-primary text-capitalize",children:[Object(fc.jsx)("i",{className:"fas fa-store-alt mr-1"})," ",e.data.name]})}),Object(fc.jsx)("div",{className:"card-body",children:a?Object(fc.jsx)(an,{inBranch:a,branch:e,store_item_id:t}):Object(fc.jsx)(an,{branch:e,store_item_id:t})})]},e.id)}))})}function cn(e){var t=e.categoryData,a=e.category,s=e.textSelect,c=e.index,n=e.references,r=e.handleChangeCategory;return Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:a?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(fc.jsx)("i",{className:"fas fa-sort-amount-down"})})}),Object(fc.jsxs)("select",{className:"custom-select text-uppercase",name:"category"+c,value:null!==a&&void 0!==a?a:"",onChange:function(e){return function(e){var t=e.value;r&&r({index:c,value:parseInt(t)})}(e.target)},ref:n,children:[Object(fc.jsxs)("option",{value:"0",children:["--",s,"--"]}),t.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.categoria?e.categoria:e.name},e.id)}))]})]})}function nn(e){var t=e.categories,a=e.category,s=e.references,c=e.setCategoryId,n=a.code.toString().split("|"),r=Object(bc.useState)({id0:parseInt(n[0]),id1:parseInt(n[1]),id2:parseInt(n[2]),id3:parseInt(n[3])}),i=Object(mc.a)(r,2),o=i[0],d=i[1],j=Object(bc.useState)({list0:t,list1:null,list2:null,list3:null}),u=Object(mc.a)(j,2),m=u[0],b=u[1],h=[],x=function(e){var t=function(e,t){var a=e.index,s=e.value,c={};switch(a){case 0:c={id0:s,id1:null,id2:null,id3:null};break;case 1:c={id0:t.id0,id1:s,id2:null,id3:null};break;case 2:c={id0:t.id0,id1:t.id1,id2:s,id3:null};break;case 3:c={id0:t.id0,id1:t.id1,id2:t.id2,id3:s};break;default:c={id0:null,id1:null,id2:null,id3:null}}return c}(e,o);if(d(t),c){var a=Object.values(t).filter((function(e){return null!==e})),s=a[a.length-1];c({id:s,parents:Object.values(t).join("|")})}};return Object(bc.useEffect)((function(){var e=function(e,t){var a=[],s=[],c=[];return Object.keys(e).forEach((function(n){switch(n){case"id0":a=rn({id:e.id0,categories:t.list0});break;case"id1":s=rn({id:e.id1,categories:a});break;case"id2":c=rn({id:e.id2,categories:s})}})),{list1:a,list2:s,list3:c}}(o,m);b(Object(l.a)(Object(l.a)({},m),e))}),[o]),Object.values(m).forEach((function(e,t){if(e&&e.length){var a=Object.values(o)[t];h.push(Object(fc.jsx)(cn,{categoryData:e,category:a||0,index:t,textSelect:"Seleccione una categoria",handleChangeCategory:x,references:s[t]}))}})),Object(fc.jsx)("div",{children:h.map((function(e,t){return Object(fc.jsx)("div",{children:e},t)}))})}function rn(e){if(e.id&&e.categories.length){var t=e.categories.filter((function(t){return t.id===e.id}));return t&&t.length?t[0].sons:[]}return[]}var ln=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).getNameCodeDefault=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=s.state.code;if(1!==parseInt(s.category0.current.value)){var a=null!==s.category0.current&&s.category0.current.selectedIndex?s.category0.current.options[s.category0.current.selectedIndex].text.trim().replace(/\s/gim,"").slice(0,7):"",c=Jc.handleCodeString("varios"===a?"":a,s.category1,s.brandRef,t),n="";return{name:c,code:n}}var r=Jc.handleNameLent(e,s.category1,s.category2,s.category3),i=Jc.handleCodeLent(e,s.category1,s.category2,s.category3);return{name:r,code:i}},s.handleCategoriesChange=function(e){var t=e.parents.split("|").filter((function(e){return""!==e})),a=s.state,c=a.id,n=a.code,r=a.name;if(!c&&(r="",n="",t.includes("1")&&4===t.length)){var i=s.getNameCodeDefault();n=i.code,r=i.name}s.setState({category_id:e.id,supplier:0,brand_id:0,category:Object(l.a)(Object(l.a)({},s.state.category),{},{code:e.parents}),code:n,name:r})},s.handleSetNameNCode=function(){var e=s.state,t=e.id,a=e.code,c=e.name,n=e.grad;if(!t){var r=s.getNameCodeDefault(n);a=r.code?r.code:a,c=r.name}s.setState({code:a,name:c})},s.handleSearchCode=function(){var e=s.props,t=e._getListStore,a=e._setListStore,c=s.state.code;c.length<3?a({result:{list:[],metaList:{}}}):(t({code:c}),s.handleSetNameNCode())},s.handleClose=function(){(0,s.props.handleClose)("inbox")},s.catchInputs=function(e){var t=e.target,a=t.name,c=t.type,n=t.value;"text"===c&&(n=n.toLowerCase()),"number"===c&&(n=parseInt(n)),s.setState(Object(N.a)({},a,n))},s.handleSave=Object(be.a)(je.a.mark((function e(){var t,a,c,n,r,i,l,o,d,j,u,m,b,h,x,p,O;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.state,a=t.category_id,c=t.supplier,n=t.brand_id,r=t.code,i=t.id,l=t.codebar,o=t.name,d=t.unit,j=t.cant,u=t.price,m=t.grad,b=t.branch_default,h=s.props,x=h.list,p=h._saveItem,Jc.handleVerifyData(s.state,s.codeRef)){e.next=3;break}return e.abrupt("return",!1);case 3:if(i||!x.length){e.next=6;break}return window.Swal.fire("Verificaci\xf3n","El codigo ya esta en uso","warning"),e.abrupt("return",!1);case 6:O={code:r||s.codeRef.current.value,codebar:l||null,name:o||s.nameRef.current.value,unit:d,cant:j,price:u,category_id:a,grad:m||"+000000",brand_id:n||"",contact_id:c||"",branch_default:b||null},Jc.handleSaveItem(i,O,null,p);case 8:case"end":return e.stop()}}),e)}))),s.getItem=function(){var e,t=s.props,a=t.item,c=t.listCategories;s.setState({id:a.id,code:a.codigo,codebar:a.c_barra,grad:a.graduacion,brand_id:a.marca?a.marca.id:0,name:a.producto,unit:a.unidad,cant:a.cantidades,price:a.precio,supplier:a.proveedor?a.proveedor.id:0,category:a.categoria,branch_default:null!==(e=a.branch_default)&&void 0!==e?e:0,created_at:a.created_at,created:a.created,updated_at:a.updated_at,inBranches:a.inBranches,category_id:a.categoria.id,categories:c,load:!1})},s.state={id:0,code:"",codebar:"",grad:"",brand_id:0,name:"",unit:"PZ",cant:1,price:1,supplier:0,category:{code:"|||"},categories:[],created_at:null,created:{},updated_at:null,category_id:0,branch_default:0,inBranches:[]},s.category0=Object(bc.createRef)(),s.category1=Object(bc.createRef)(),s.category2=Object(bc.createRef)(),s.category3=Object(bc.createRef)(),s.supplierRef=Object(bc.createRef)(),s.brandRef=Object(bc.createRef)(),s.codeRef=Object(bc.createRef)(),s.nameRef=Object(bc.createRef)(),s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e._getListCategories,a=e._setListStore;t({categoryid:"raiz"}),a({result:{list:[],metaList:{}}})}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,s=a.category_list1,c=a.category_id,n=a.category_id1,r=a.category_id2,i=a.category_id3,l=this.props,o=l.listCategories,d=l.item;if(e.listCategories!==o&&o.length&&(d.id?this.getItem():this.setState({categories:o})),d&&e.item&&d.id&&e.item.id!==d.id&&this.setState({id:d.id}),t.category_id!==c){if(t.category_id1!==n&&0!==n){var j=s.find((function(e){return e.id===n}));j&&this.setState({category_list2:j.hijos})}if(t.category_id2!==r&&0!==r){var u=s.find((function(e){return e.id===r}));u&&this.setState({category_list3:u.hijos})}if(t.category_id3!==i&&0!==i){var m=s.find((function(e){return e.id===i}));m&&this.setState({category_list4:m.hijos})}}}},{key:"componentWillUnmount",value:function(){(0,this.props._setListStore)({result:{list:[],metaList:{},item:{}}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.id,s=t.supplier,n=t.category_id,r=t.category,i=t.categories,l=t.brand_id,o=t.code,d=t.name,j=t.grad,u=t.unit,m=t.branch_default,b=t.inBranches;console.log("DEBUG BRANCH DEFAULT",m);var h=this.props,x=h.list,p=h.loadStore,O=h.loadCategory,f=h.loadContact,g=p||O||f,v=r.code?r.code.split("|").filter((function(e){return""!==e})):[],N=!1;return N=v.includes("1")?n&&o&&d:n&&o&&d&&s&&l,Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h3",{className:"card-title text-primary text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-database mr-1"}),a?"Editar producto (".concat(o,")"):"Registrar nuevo producto"]})}),Object(fc.jsx)("form",{className:"card-body",autoComplete:"off",children:i&&i.length?Object(fc.jsxs)(bc.Fragment,{children:[Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("fieldset",{children:[Object(fc.jsx)("small",{className:"mr-2",children:Object(fc.jsx)("label",{children:"Categoria"})}),Object(fc.jsx)(nn,{categories:i,category:r,setCategoryId:this.handleCategoriesChange,references:[this.category0,this.category1,this.category2,this.category3]})]})})}),v.length&&!v.includes("1")?Object(fc.jsx)(Wc,{supplier:s,supplierRef:this.supplierRef,handleChangeSupplier:function(t){e.setState({supplier:t})}}):null,s?Object(fc.jsx)(Qc,{brand:l,supplier:s,textSelect:"Selecione la marca",brandRef:this.brandRef,handleChangeBrand:function(t){e.setState({brand_id:t})}}):null,n?Object(fc.jsxs)(bc.Fragment,{children:[Object(fc.jsxs)("div",{className:"row",children:[v.includes("1")?Object(fc.jsxs)("div",{className:"col-3",children:[Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Graduacion"})}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text bg-primary",children:Object(fc.jsx)("i",{className:"fas fa-glasses"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"+100100",name:"grad",value:j,onChange:this.catchInputs,onBlur:this.handleSetNameNCode,maxLength:"7",autoComplete:"off"})]})]}):null,Object(fc.jsxs)("div",{className:"col",children:[this.state.unit?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Unidad de presentacion"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:u?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(fc.jsx)("i",{className:"fas fa-balance-scale"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Unidad de presentaci\xf3n",name:"unit",value:u,onChange:this.catchInputs,maxLength:"4"})]})]})]}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-5",children:[o?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Codigo"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:o?!a&&x.length?"input-group-text bg-warning":"input-group-text bg-primary":"input-group-text bg-warning",children:Object(fc.jsx)("i",{className:"fas fa-code"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control text-uppercase",placeholder:"Codigo",name:"code",ref:this.codeRef,defaultValue:o,onChange:this.catchInputs,onBlur:this.handleSearchCode,autoComplete:"off",maxLength:"18"}),!a&&x.length?Object(fc.jsx)("span",{className:"text-muted text-xs d-block w-100",children:"El codigo ya esta en uso"}):null]})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Codigo de barras"})}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text bg-primary",children:Object(fc.jsx)("i",{className:"fas fa-barcode"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Codigo de barras",name:"codebar",defaultValue:this.state.codebar,onChange:this.catchInputs,autoComplete:"off",maxLength:"100"})]})]})]}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col",children:[d?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Nombre del producto"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:d?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(fc.jsx)("i",{className:"fas fa-archive"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control text-uppercase",placeholder:"Nombre del producto",name:"name",ref:this.nameRef,defaultValue:d,onChange:this.catchInputs,maxLength:"149"})]})]})})]}):Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("h6",{className:"text-warning",children:"Seleccione primero una categor\xeda."})})})]}):Object(fc.jsx)("div",{className:"text-center",children:Object(fc.jsxs)("h2",{className:"text-primary",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Cargando formulario"]})})}),Object(fc.jsx)("div",{className:"card-footer text-right",children:Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col-md-12",children:Object(fc.jsxs)("div",{className:"btn-group",role:"group",children:[Object(fc.jsxs)(c.b,{to:"/almacen",className:"btn btn-default",onClick:this.handleClose,children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),a?"Cerrar":"Cancelar"]}),Object(fc.jsxs)("button",{type:"button",onClick:this.handleSave,className:N?"btn btn-primary":"btn btn-secondary",disabled:!N,children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"}),"Guardar"]})]})})})}),g&&Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})})]})}),a?Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsx)("h5",{className:"card-title text-primary",children:"Sucursal por defecto"})}),Object(fc.jsx)("div",{className:"card-body",children:Object(fc.jsx)(tn,{branch_default:m,showIcon:!1,setBranchId:function(t){return e.setState({branch_default:t})}})})]})})}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)(sn,{inBranches:b,store_item_id:a,branch_default:m})})})]}):null]})}}]),a}(bc.Component),on={_deleteItem:$t.deleteItem,_getItem:$t.getItem,_saveItem:$t.saveItem,_getListStore:$t.getListStore,_setListStore:$t.setListStore,_getListCategories:pt.getListCategories},dn=Object(n.b)((function(e){var t=e.storeItem,a=e.category,s=e.contact;e.config;return{list:t.list,item:t.item,messages:t.messages,options:t.options,listCategories:a.list,loadStore:t.loading,loadCategory:a.loading,loadContact:s.loading}}),on)(ln);function jn(e){var t=e.header,a=e.body,s=e.items;return Object(fc.jsx)("div",{className:"table-responsive",children:Object(fc.jsxs)("table",{className:"table table-sm table-bordered table-hover",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"/"}),t]})}),Object(fc.jsx)("tbody",{children:a.map((function(e,a){var n="label"===e.props.children.type;return Object(fc.jsxs)("tr",{className:n?"table-secondary":"",children:[e,t.map((function(t,a){var r=n?parseFloat(e.props.children.props.children).toFixed(2).replace(".",""):parseFloat(e.props.children).toFixed(2).replace(".","");return parseInt(r)>=0&&(r="+"+r),r+=parseFloat(t.props.children).toFixed(2).replace(/[-.]/g,""),Object(fc.jsx)("td",{className:"text-center",children:s.length?s.map((function(e,t){return r===e.graduacion?Object(fc.jsx)(fc.Fragment,{children:e.cant_total?Object(fc.jsx)("span",{className:e.cant_total>0?"badge badge-success":"badge badge-danger",children:Object(fc.jsx)(c.b,{to:"/almacen/registro/"+e.id,className:"text-light",children:e.cant_total})},e.id+t):null}):null})):Object(fc.jsx)(c.b,{to:"/almacen/registro",children:Object(fc.jsx)("i",{className:"fas fa-plus text-secondary"})})},r+a)}))]},a)}))})]})})}var un=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).handleToPrice=function(){var e=s.state,t=e.price,a=e.catid_3,c=e.load;if(t&&a){console.log("Send data to API",t,a);var n=JSON.parse(localStorage.getItem("OrusSystem")),r="http://"+n.host+"/api/store/prices?cat="+a+"&price="+t;c||s.setState({load:!0}),fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.token}}).then((function(e){return e.json()})).then((function(e){console.log("[Orus System] Item actualizados",e),s.setState({load:!1})}))}},s.handelChangePrice=function(e){var t=e.target.value;s.setState({price:parseInt(t)})},s.getItems=function(){var e=Object(be.a)(je.a.mark((function e(t){var a,c,n,r,i;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.state.load,c=pe("store",null,{cat:t,itemsPage:500}),a||s.setState({load:!0}),e.next=6,he(c);case 6:n=e.sent,r=n.data,i=n.message,r?(console.log("[Orus System] Descarga de producto exitosa"),s.setState({items:r&&r.length?r:[],load:!1})):(console.error("[Orus system] Salida por error:",i),s.setState({load:!1}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleClickCat=function(e){var t=e.target,a=t.name,c=t.value,n=s.state,r=n.catData_1,i=n.catData_2,l=[],o={};"catid_1"===a?(r.map((function(e){return e.id===parseInt(c)&&(l=e.hijos,o=e.meta,!0)})),s.setState({catid_1:parseInt(c),catid_2:0,catid_3:0,catData_2:l,catData_3:[],meta:o})):"catid_2"===a&&(i.map((function(e){return e.id===parseInt(c)&&(l=e.hijos,!0)})),s.setState({catid_2:parseInt(c),catid_3:0,catData_3:l}))},s.getCategories=Object(be.a)(je.a.mark((function e(){var t,a,c,n;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pe("categories",1),e.next=3,he(t);case 3:a=e.sent,c=a.data,n=a.message,c?c&&c.hijos.length&&(console.log("Descarga de categoria exitos"),s.setState({catData_1:c.hijos})):(console.log("Error al descargar categor\xedas"),console.error("[Orus system] Salida por error:",n),window.Swal.fire("Fallo de conexion","Verifique la conexion al servidor","error"));case 7:case"end":return e.stop()}}),e)}))),s.state={catData_1:[],catData_2:[],catData_3:[],catid_1:0,catid_2:0,catid_3:0,load:!1,items:[],meta:{},price:0},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){this.getCategories(),console.log("Prueba-------------")}},{key:"componentDidUpdate",value:function(e,t){t.catid_3!==this.state.catid_3&&this.getItems(this.state.catid_3)}},{key:"render",value:function(){var e=this,t=this.state,a=t.catid_1,s=t.catData_1,c=t.catid_2,n=t.catData_2,r=t.catid_3,i=t.catData_3,l=t.load,o=t.items,d=t.meta,j=[],u=[],m=0;do{j.push(Object(fc.jsx)("th",{children:m.toFixed(2)},m)),m-=.25}while(m>parseFloat(d.cil)-.25);m=parseFloat(d.rangoInf);do{0===m?u.push(Object(fc.jsx)("td",{children:Object(fc.jsx)("label",{children:"0.00"})})):u.push(Object(fc.jsx)("td",{children:m.toFixed(2)})),m+=.25}while(m<parseFloat(d.rangoSup)+.25);return Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"card",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("select",{className:"custom-select",name:"catid_1",value:a,onChange:this.handleClickCat,children:[Object(fc.jsx)("option",{value:"0",children:"Seleccione un tipo"}),s.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.categoria},e.id)}))]})}),a&&n.length?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("select",{className:"custom-select",name:"catid_2",value:c,onChange:this.handleClickCat,children:[Object(fc.jsx)("option",{value:"0",children:"Seleccione un material"}),n.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.categoria},e.id)}))]})}):null,c&&i.length?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:i.map((function(t){return Object(fc.jsx)("button",{className:r===t.id?"btn btn-primary":"btn btn-secondary",onClick:function(a){e.setState({catid_3:t.id,load:!0})},children:t.categoria},t.id)}))})}):null]})}),Object(fc.jsx)("div",{className:"card-body",children:r?Object(fc.jsx)(hc.a.Fragment,{children:l?Object(fc.jsxs)("div",{className:"text-center",children:[Object(fc.jsx)("span",{className:"text-primary",children:"Cargando productos"}),Object(fc.jsx)("div",{className:"spinner-border text-primary ml-4",role:"status",children:Object(fc.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(fc.jsxs)(hc.a.Fragment,{children:[Object(fc.jsxs)("div",{className:"row mb-2",children:[Object(fc.jsxs)("div",{className:"col",children:["Total de productos: ",Object(fc.jsx)("label",{children:o.length})]}),Object(fc.jsx)("div",{className:"col-6",children:Object(fc.jsx)("div",{className:"row"})})]}),Object(fc.jsx)(jn,{header:j,body:u,items:o})]})}):Object(fc.jsxs)("div",{className:"alert alert-warning text-light",role:"alert",children:[Object(fc.jsxs)("h4",{className:"alert-heading",children:[Object(fc.jsx)("i",{className:"fas fa-exclamation"})," Seleccion."]}),Object(fc.jsx)("hr",{}),Object(fc.jsxs)("ul",{children:[a?null:Object(fc.jsx)("li",{children:"Selecciones primero el tipo de lente"}),c?null:Object(fc.jsx)("li",{children:"Despues el material"}),Object(fc.jsx)("li",{children:"Por ultimo el tratamiento"})]})]})})]})})})}}]),a}(bc.Component),mn=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;Object(Nc.a)(this,a),(s=t.call(this,e)).handleSelectCategory=function(e){var t=s.props,a=t.last,c=t.categorySelect,n=s.state.category_raiz;return!a&&(!(!e.sons||e.sons&&!e.sons.length)&&(c({category_id:e.id,category_data:n}),void s.setState({category_id:e.id})))},s.handleClickDelete=function(e,t){if(e){var a=s.props._delete,c={id:e},n="Esta seguro de eliminar la categoria: "+t.toUpperCase()+"?";Jc.handleDeleteItem(c,{categoryid:"raiz"},a,n)}},s.handleClickSave=function(){if(s.state.name.length<4)return window.Swal.fire("Verificaci\xf3n","Debe de escribir el nombre de la categoria","warning"),s.nameInput.focus(),!1;var e=s.state,t=e.id,a=e.category_id,c={name:e.name,category_id:a},n=s.props._save,r=t?"\xbfEsta seguro de actualizar la categoria?":"\xbfEsta seguro de crear una nueva categoria?";Jc.handleSaveItem(t,c,{categoryid:"raiz"},n,(function(){s.setState({name:"",category_id:0,add:!1})}),r)},s.handleClickAdd=function(){s.setState({add:!s.state.add,name:""})},s.catchInputs=function(e){var t=e.target,a=t.name,c=t.value;s.setState(Object(N.a)({},a,c.toLowerCase()))};var c=JSON.parse(localStorage.getItem("OrusSystem"));return s.state={id:0,meta:{},add:!1,name:"",category_raiz:[],category_id:e.category,page:1,host:c.host,token:c.token,load:!1},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.categoryData,t=void 0===e?[]:e;t&&this.setState({category_raiz:t})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.categoryData,s=void 0===a?[]:a,c=t.messages,n=t._setMessage;e.categoryData!==s&&this.setState({category_raiz:s}),e.messages.length!==c.length&&c.length&&(c.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),n([]))}},{key:"render",value:function(){var e=this,t=this.state,a=t.category_raiz,s=t.category_id,c=t.name,n=t.add,r=this.props.loading;return Object(fc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(fc.jsx)("div",{className:"card-body",children:Object(fc.jsxs)("table",{className:"table",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"Nombre"}),Object(fc.jsx)("th",{style:{width:48}})]})}),Object(fc.jsx)("tbody",{children:!r&&a?Object(fc.jsx)(hc.a.Fragment,{children:a.map((function(t){return Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{className:"text-capitalize",children:Object(fc.jsx)("a",{href:"#select!"+t.id,onClick:function(a){a.preventDefault(),e.handleSelectCategory(t)},className:t.sons&&t.sons.length?"text-primary":"text-dark",children:t.categoria})}),Object(fc.jsxs)("td",{className:"btn-group",children:[Object(fc.jsx)("button",{type:"button",className:"btn btn-default",disabled:!0,title:"Proximamente",children:Object(fc.jsx)("i",{className:"fas fa-edit"})}),Object(fc.jsx)("button",{type:"button",title:"Eliminar",className:t.hijos&&t.hijos.length?"btn btn-outline-secondary btn-sm":"btn btn-outline-danger btn-sm",onClick:function(a){e.handleClickDelete(t.id,t.categoria)},disabled:t.hijos&&t.hijos.length,children:Object(fc.jsx)("i",{className:"fas fa-trash"})})]})]},t.id)}))}):Object(fc.jsx)("tr",{children:Object(fc.jsx)("td",{colSpan:"8",className:"text-center",children:Object(fc.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(fc.jsx)("span",{className:"sr-only",children:"Loading..."})})})})}),n&&!r?Object(fc.jsx)("tfoot",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{children:Object(fc.jsx)("input",{type:"text",name:"name",className:"form-control text-uppercase",autoComplete:"off",value:c,onChange:this.catchInputs,ref:function(t){e.nameInput=t}})}),Object(fc.jsx)("td",{children:Object(fc.jsx)("button",{className:"btn btn-dark btn-sm",onClick:this.handleClickSave,disabled:c.length<3,title:"Guardar categoria",children:Object(fc.jsx)("i",{className:"fas fa-save"})})})]})}):null]})}),Object(fc.jsx)("div",{className:"card-footer text-right",children:Object(fc.jsx)("button",{className:n?"btn btn-secondary btn-sm text-bold":"btn btn-primary btn-sm",onClick:this.handleClickAdd,disabled:!s,title:n?"Cancelar":"Crear nueva categoria",children:n?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}):Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar"]})})})]})}}]),a}(bc.Component),bn={_getList:pt.getListCategories,_delete:pt.deleteCategory,_setMessage:pt.setMessageCategory,_save:pt.saveCategory},hn=Object(n.b)((function(e){var t=e.category;return{categories:t.list,messages:t.messages,loading:t.loading}}),bn)(mn),xn=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).handleClickParent=function(e){var t=s.props.categories,a=void 0===t?[]:t;e&&e.preventDefault(),s.setState({category_data:a,category_id:null})},s.handleLoadCategories=function(){(0,s.props._getListCategories)({categoryid:"raiz"})},s.handleChangeState=function(e){s.setState(e)},s.state={category_id:0,category_data:[]},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){this.handleLoadCategories()}},{key:"componentDidUpdate",value:function(e){var t=this.props.categories,a=void 0===t?[]:t;e.categories!==a&&a.length&&this.setState({category_data:a})}},{key:"render",value:function(){var e,t=this.state,a=t.category_id,s=t.category_data,c=s,n={};if(a){var r=s.filter((function(e){return e.id===a}));r.length&&(n=r[0])&&n.sons&&(c=n.sons)}return Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col-8",children:[Object(fc.jsx)("nav",{children:Object(fc.jsx)("ol",{className:"breadcrumb",children:a?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:Object(fc.jsx)("a",{href:"#link",onClick:this.handleClickParent,children:"Raiz"})}),n.id?Object(fc.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:n.name}):null]}):Object(fc.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Seleccione una categoria para ver su contenido"})})}),Object(fc.jsx)(hn,{category:a,categoryData:null!==(e=c)&&void 0!==e?e:[],categorySelect:this.handleChangeState})]})})}}]),a}(bc.Component),pn={_getListCategories:pt.getListCategories},On=Object(n.b)((function(e){var t=e.category;return{categories:t.list,loading:t.loading}}),pn)(xn);function fn(e){var t=e.brands,a=e.handleEdit,s=void 0===a?null:a,c=e.handleDelete,n=void 0===c?null:c;return Object(fc.jsx)("ul",{className:"card-text list-group",children:t.length?t.map((function(e){return Object(fc.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(fc.jsxs)("span",{className:"text-dark text-uppercase text-truncate",children:[Object(fc.jsx)("i",{className:"fas fa-thumbtack mr-1"}),e.nombre]}),s||n,Object(fc.jsxs)("div",{children:[s&&Object(fc.jsx)("span",{className:"badge badge-dark badge-pill py-1 mr-2",style:{cursor:"pointer"},title:"Editar",onClick:function(){return s(e)},children:Object(fc.jsx)("i",{className:"fas fa-edit"})}),n&&Object(fc.jsx)("span",{className:"badge badge-danger badge-pill py-1",style:{cursor:"pointer"},title:"Eliminar",onClick:function(){return n(e)},children:Object(fc.jsx)("i",{className:"fas fa-trash"})})]})]},e.id)})):Object(fc.jsx)("li",{className:"list-group-item",children:Object(fc.jsxs)("p",{className:"text-danger",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"No exiten marcas para este proveedor!"]})})})}var gn=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).prevEdit=function(e){s.setState({name:e.nombre,id:e.id})},s.handleCancelBtn=function(){s.setState({name:"",id:null})},s.changeInput=function(e){var t=e.name,a=e.value;s.setState(Object(N.a)({},t,a.toLowerCase()))},s.deleteBrand=function(e,t){var a=s.state.supplier,c=s.props._deleteBrand;window.Swal.fire({title:"Eliminar",text:"\xbfEsta seguro de eliminar la marca "+t.toUpperCase()+"?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){t.dismiss||(console.log("[Orus Suystem] Enviando datos para eliminar marca",e),c({id:e,options:{supplier:a,order:"name"}}))}))},s.saveBrand=function(e){e.preventDefault();var t=s.state,a=t.id,c=t.name,n=t.supplier,r=s.props._saveBrand,i={name:c,contact_id:n};return c.length<3?(window.Swal.fire("Error","El nombre de la marca debe de tener por lo menos 3 caracteres","error"),!1):n?void window.Swal.fire({title:"Almacenamiento",text:a?"\xbfEsta seguro de ACTUALIZAR la marca?":"\xbfEsta seguro de CREAR una nueva marca?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:a?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(r({id:a,data:i,options:{supplier:n,order:"name"}}),s.setState({name:"",id:null}))})):(window.Swal.fire("Error","Debe de elegir a un proveedor primero","error"),!1)},s.getBrands=function(){var e=s.state.supplier,t=s.props._getBrands;e&&t({supplier:e,order:"name"})},s.state={id:null,supplier:0,brands:[],name:""},s}return Object(yc.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.supplier;t.supplier!==a&&a&&this.getBrands()}},{key:"render",value:function(){var e=this,t=this.state,a=t.id,s=t.supplier,c=t.name,n=this.props,r=n.brands,i=n.loading;return Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-4",children:Object(fc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(fc.jsx)("h5",{className:"card-title mt-2 ml-2 text-bold",children:"Marcas para productos"}),Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)(Wc,{supplier:s,handleChangeSupplier:function(t){e.setState({supplier:t,brands:t?e.state.brands:[]})}}),!r.length&&Object(fc.jsxs)("p",{className:"card-text",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Para iniciar, primero seleccione a un proveedor"]})]})]})}),s?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)("h5",{className:"card-title text-dark mb-4 text-bold",children:"Listado de marcas"}),Object(fc.jsx)(fn,{brands:r,handleEdit:function(t){return e.prevEdit(t)},handleDelete:function(t){e.deleteBrand(t.id,t.nombre)}})]}),Object(fc.jsx)("div",{className:"card-footer",children:Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("input",{type:"text",className:"form-control mr-1",name:"name",value:c,onChange:function(t){var a=t.target;return e.changeInput(a)}}),Object(fc.jsxs)("div",{className:"btn-group",children:[Object(fc.jsx)("button",{type:"button",className:"btn btn-default",disabled:!c,onClick:this.handleCancelBtn,children:Object(fc.jsx)("i",{className:"fas fa-eraser"})}),Object(fc.jsx)("button",{type:"button",className:a?"btn btn-success":"btn btn-primary",onClick:this.saveBrand,disabled:!c,children:Object(fc.jsx)("i",{className:"fas fa-save"})})]})]})}),i?Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})}):null]})}}]),a}(bc.Component),vn={_getBrands:$t.getListBrands,_saveBrand:$t.saveBrand,_deleteBrand:$t.deleteBrand},Nn=Object(n.b)((function(e){var t=e.storeItem;return{brands:t.brands,loading:t.loading}}),vn)(gn),yn=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).handleChangePanel=function(e){var t=s.props,a=t._setItem,c=t.history;s.state.panel!==e&&(a({}),s.setState({panel:e}),"inbox"===e&&c.push("/almacen"),"inventory"===e&&c.push("/almacen/inventario"),"category"===e&&c.push("/almacen/categorias"),"brands"===e&&c.push("/almacen/marcas"))},s.handleNewItem=function(){s.setState({panel:"neworedit"}),s.props.history.push("/almacen/new")},s.state={panel:"inbox"},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.history,s=e._getItem,c=e._setItem,n=e._setPageName,r=t.params.id;parseInt(r)?s(parseInt(r)):"new"===r&&(this.setState({panel:"neworedit"}),a.push("/almacen/new"),c({})),n("almacen")}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.messages,s=t.item,c=t.history,n=t._setMessage,r=t._setList;e.item.id!==s.id&&s.id&&(this.setState({panel:"neworedit"}),c.push("/almacen/".concat(s.id)),r({result:{list:[],metaList:{}}})),e.messages.length!==a.length&&a.length&&(a.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),n([]))}},{key:"componentWillUnmount",value:function(){(0,this.props._setList)({result:{list:[],metaList:{},item:{},brands:[]}})}},{key:"render",value:function(){var e=this.state.panel;return Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-sm-12 col-md-2",children:[Object(fc.jsxs)("button",{className:"btn bg-primary btn-block mb-3",type:"button",disabled:"inbox"!==e,onClick:this.handleNewItem,children:[Object(fc.jsx)("i",{className:"fas fa-plus mr-1"}),"Nuevo producto"]}),Object(fc.jsx)(en,{panel:e,handleChangePage:this.handleChangePanel})]}),Object(fc.jsxs)("div",{className:"col-sm-12 col-md-10",children:["inventory"===e&&Object(fc.jsx)(un,{handleClose:this.handleChangePanel}),"inbox"===e&&Object(fc.jsx)(Yc,{}),"neworedit"===e&&Object(fc.jsx)(dn,{handleClose:this.handleChangePanel}),"category"===e&&Object(fc.jsx)(On,{}),"brands"===e&&Object(fc.jsx)(Nn,{})]})]})}}]),a}(bc.Component),Sn={_getItem:$t.getItem,_setItem:$t.setItem,_setMessage:$t.setMessagesStore,_setList:$t.setListStore,_setPageName:g.changeNamePage},Cn=Object(n.b)((function(e){var t=e.storeItem;return{item:t.item,messages:t.messages,loading:t.loading}}),Sn)(yn),_n={_getList:Sa.getListContacts,_setList:Sa.setListContact},wn=Object(n.b)((function(e){return{contacts:e.contact.list}}),_n)((function(e){var t=e.id,a=e.type,s=e.gender,c=e.business,n=e.name,r=e.rfc,i=e.email,l=e.birthday,o=e.handleChangeData,d=e.verification,j=e.contacts,u=e._getList,m=e._setList,b=function(e){var t=e.target,a=t.name,s=t.value,c=t.checked,n=s;"type"===a&&(n=parseInt(s)),"business"===a&&(n=c),"name"!==a&&j.length&&m({result:{list:[],metaList:{}}}),o(a,n)},h=Object(bc.useState)(null),x=Object(mc.a)(h,2),p=x[0],O=x[1];return Object(bc.useEffect)((function(){if(!t){var e=null;n.length>2?(p&&clearTimeout(p),e=setTimeout((function(){u({search:n})}),1e3),O(e)):1===n.length&&m({result:{list:[],metaList:{}}})}}),[n]),Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Tipo de contacto"}),Object(fc.jsxs)("select",{className:"custom-select",name:"type",value:null!==a&&void 0!==a?a:"",onChange:b,children:[Object(fc.jsx)("option",{value:"0",children:"Cliente"}),Object(fc.jsx)("option",{value:"1",children:"Proveedor"})]})]}),a?Object(fc.jsxs)("div",{className:"form-group custom-control custom-checkbox",children:[Object(fc.jsx)("input",{type:"checkbox",name:"business",className:"custom-control-input",checked:null!==c&&void 0!==c?c:"",onChange:b,id:"business_checkbox"}),Object(fc.jsx)("label",{htmlFor:"business_checkbox",className:"custom-control-label cursor-pointer",children:Object(fc.jsx)("small",{children:"\xbfEs un laboratorio?"})})]}):null,Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"RFC"}),Object(fc.jsx)("input",{type:"text",className:"form-control text-uppercase text-truncate",placeholder:"facturas",name:"rfc",value:null!==r&&void 0!==r?r:"",onChange:b,minLength:"10"})]}),Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"G\xe9nero"}),Object(fc.jsxs)("select",{className:"custom-select",name:"gender",value:null!==s&&void 0!==s?s:"",onChange:b,children:[Object(fc.jsx)("option",{value:"male",children:"Hombre"}),Object(fc.jsx)("option",{value:"female",children:"Mujer"})]})]})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsxs)("div",{className:"form-group position-relative",children:[Object(fc.jsxs)("label",{children:["Nombre completo ",Object(fc.jsx)("span",{className:"text-orange",children:"*"})]}),Object(fc.jsx)("input",{type:"text",className:j.length&&!t?"form-control text-capitalize text-truncate text-danger":"form-control text-capitalize text-truncate",placeholder:"Ej: Juan Perez G",name:"name",value:null!==n&&void 0!==n?n:"",onChange:b}),!n|!d.name?Object(fc.jsx)("small",{children:Object(fc.jsx)("span",{className:"text-orange",children:"Este campo es requerido"})}):null,j.length&&n.length>2&&!t?Object(fc.jsx)("div",{className:"position-absolute border rounded p-0 bg-white overflow-auto ",style:{zIndex:"50",top:"4.1rem",width:"100%",maxHeight:"8rem"},children:Object(fc.jsx)("ul",{className:"list-group",children:j.map((function(e){return Object(fc.jsxs)("li",{className:"list-group-item text-truncate",children:[Object(fc.jsx)("i",{className:"fas fa-minus mr-1 text-danger"}),Object(fc.jsx)("span",{className:"text-capitalize text-muted text-monospace text-sm",children:e.nombre})]},e.id)}))})}):null]}),Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsxs)("label",{children:["Correo electr\xf3nico ",Object(fc.jsx)("span",{className:"text-orange",children:"*"})]}),Object(fc.jsx)("input",{type:"email",className:"form-control text-lowercase text-truncate",placeholder:"Ej: correo@domain.com",name:"email",value:null!==i&&void 0!==i?i:"",onChange:b}),!i|!d.email?Object(fc.jsx)("small",{children:Object(fc.jsx)("span",{className:"text-orange",children:"Este campo es requerido"})}):null]}),a?null:Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsxs)("label",{children:["Fecha de nacimiento ",Object(fc.jsx)("span",{className:"text-orange",children:"*"})]}),Object(fc.jsx)("input",{type:"date",className:"form-control text-truncate",placeholder:"","data-inputmask-alias":"datetime","data-inputmask-inputformat":"dd/mm/yyyy","data-mask":"","im-insert":"false",name:"birthday",value:null!==l&&void 0!==l?l:"",onChange:b}),!l|!d.birthday?Object(fc.jsx)("small",{children:Object(fc.jsx)("span",{className:"text-orange",children:"Este campo es requerido"})}):null]})]})]})})),kn=function(e){var t=e.domicilios,a=e.handleChangeData,s=t.calle,c=t.colonia,n=t.municipio,r=t.estado,i=t.cp,l=function(e){var s=e.target,c=s.name,n=s.value,r=t;"calle"===c&&(r.calle=n),"colonia"===c&&(r.colonia=n),"municipio"===c&&(r.municipio=n),"estado"===c&&(r.estado=n),"cp"===c&&(r.cp=n),a("domicilios",r)};return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"col",children:[s?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Calle y numero"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-1",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-road"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Calle y numero",name:"calle",value:s,onChange:l})]}),c?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Colonia"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-1",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-location-arrow"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Colonia",name:"colonia",value:c,onChange:l})]}),n?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Municipio"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-1",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-location-arrow"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Municipio",name:"municipio",value:n,onChange:l})]})]}),Object(fc.jsxs)("div",{className:"col",children:[r?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Estado"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-1",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-map-marker"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Estado",name:"estado",value:r,onChange:l})]}),i?Object(fc.jsx)("small",{children:Object(fc.jsx)("label",{children:"Codigo postal"})}):Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"input-group mb-1",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-map-marker"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Codigo Postal",name:"cp",value:i,onChange:l})]})]})]})},En=function(e){var t=e.telefonos,a=e.handleChangeData,s=t.t_casa,c=void 0===s?"":s,n=t.t_oficina,r=void 0===n?"":n,i=t.t_movil,l=void 0===i?"":i,o=function(e){var s=e.target,c=s.name,n=s.value,r=/^\d+$/gim,i=t;"t_casa"===c&&r.test(n)&&(i.t_casa=n,i.t_movil.length<10&&(i.t_movil=n)),"t_oficina"===c&&r.test(n)&&(i.t_oficina=n),"t_movil"===c&&r.test(n)&&(i.t_movil=n),a("telefonos",i)};return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Telefono personal"}),Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-phone"})})}),Object(fc.jsx)("input",{type:"tel",className:"form-control",placeholder:"(999) 999 9999",maxLength:"10",name:"t_casa",value:c,onChange:o})]})]})}),Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Telefono para recados"}),Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-phone"})})}),Object(fc.jsx)("input",{type:"tel",className:"form-control",placeholder:"(999) 999 9999",maxLength:"10",name:"t_oficina",value:r,onChange:o})]})]})}),Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Numero de whatsApp"}),Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-phone"})})}),Object(fc.jsx)("input",{type:"tel",className:"form-control",placeholder:"(999) 999 9999",maxLength:"10",name:"t_movil",value:l,onChange:o})]})]})})]})},Ln=function(e){var t=e.sales;return Object(fc.jsxs)("table",{className:"table m-0",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"ID"}),Object(fc.jsx)("th",{children:"Total"}),Object(fc.jsx)("th",{children:"Orden"}),Object(fc.jsx)("th",{children:"Registrado"})]})}),Object(fc.jsx)("tbody",{children:t.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsxs)("th",{children:["#",e.id]}),Object(fc.jsxs)("td",{children:["$ ",e.total.toFixed(2)]}),Object(fc.jsxs)("td",{children:["#",e.pedido]}),Object(fc.jsxs)("td",{className:"text-truncate",children:[Object(fc.jsx)("i",{className:"fas fa-clock mr-2"}),wc()(e.created_at).fromNow()]})]},e.id)}))})]})},In=function(e){var t=e.purchases,a=e.exams,s=e.register,c=e.created,n=e.updated,r=e.updated_at,i=e.brands,l=e.orders,o=e.suppliers;return Object(fc.jsxs)("div",{className:"row",children:[i?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"small-box bg-orange",children:[Object(fc.jsxs)("div",{className:"inner",children:[Object(fc.jsx)("h5",{children:i}),Object(fc.jsx)("p",{children:"Marcas"})]}),Object(fc.jsx)("div",{className:"icon",children:Object(fc.jsx)("i",{className:"fas fa-shopping-bag"})}),Object(fc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(fc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,o?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"small-box bg-indigo",children:[Object(fc.jsxs)("div",{className:"inner",children:[Object(fc.jsx)("h5",{children:o}),Object(fc.jsx)("p",{children:"Laboratorio"})]}),Object(fc.jsx)("div",{className:"icon",children:Object(fc.jsx)("i",{className:"fas fa-building"})}),Object(fc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(fc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,t?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"small-box bg-success",children:[Object(fc.jsxs)("div",{className:"inner",children:[Object(fc.jsx)("h5",{children:t}),Object(fc.jsx)("p",{children:"Compras"})]}),Object(fc.jsx)("div",{className:"icon",children:Object(fc.jsx)("i",{className:"fas fa-money-bill"})}),Object(fc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(fc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,a?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"small-box bg-info",children:[Object(fc.jsxs)("div",{className:"inner",children:[Object(fc.jsx)("h5",{children:a}),Object(fc.jsx)("p",{children:"Examenes"})]}),Object(fc.jsx)("div",{className:"icon",children:Object(fc.jsx)("i",{className:"fas fa-notes-medical"})}),Object(fc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(fc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,l?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"small-box bg-warning",children:[Object(fc.jsxs)("div",{className:"inner",children:[Object(fc.jsx)("h5",{children:l}),Object(fc.jsx)("p",{children:"Pedidos"})]}),Object(fc.jsx)("div",{className:"icon",children:Object(fc.jsx)("i",{className:"fas fa-shopping-basket"})}),Object(fc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(fc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,s?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"small-box bg-primary",children:[Object(fc.jsxs)("div",{className:"inner",children:[Object(fc.jsx)("h5",{children:wc()(s).format("L")}),Object(fc.jsx)("p",{children:"Registrado"})]}),Object(fc.jsx)("div",{className:"icon",children:Object(fc.jsx)("i",{className:"fas fa-calendar"})}),Object(fc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Modificado: ",r?wc()(r).format("L"):"--"]})]})}):null,c?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"small-box bg-primary",children:[Object(fc.jsxs)("div",{className:"inner",children:[Object(fc.jsx)("h5",{className:"text-truncate",children:c}),Object(fc.jsx)("p",{children:"Registrado por"})]}),Object(fc.jsx)("div",{className:"icon",children:Object(fc.jsx)("i",{className:"fas fa-user"})}),Object(fc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs text-truncate",children:["Modificado: ",n||"--"]})]})}):null]})},Dn=function(e){var t=e.brands;return Object(fc.jsxs)("table",{className:"table m-0",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"Nombre"}),Object(fc.jsx)("th",{children:"Registrado"})]})}),Object(fc.jsx)("tbody",{children:t.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{className:"text-uppercase",children:e.name}),Object(fc.jsxs)("td",{className:"text-truncate",children:[Object(fc.jsx)("i",{className:"fas fa-clock mr-2"}),wc()(e.created_at).fromNow()]})]},e.id)}))})]})},Tn=function(e){var t,a=JSON.parse(null!==(t=localStorage.getItem("OrusSystem"))&&void 0!==t?t:"");return a.orders||(a.orders=[]),e?a.orders:a},An=function(e,t){t&&t()},Pn={handleStatusString:function(e){switch(e){case 0:return"procesando";case 1:return"laboratorio";case 2:return"bicelacion";case 3:return"terminado";case 4:return"entregado";default:return"garantia"}},handleDeleteOrder:function(e,t,a){if(e.id)return e.estado?(window.Swal.fire({title:"Verificacion",text:"El pedido tiene un proceso avanzado",icon:"warning"}),!1):e.nota?(window.Swal.fire({title:"Verificacion",text:"No se puede eliminar un pedido con una venta activa",icon:"warning"}),!1):(window.Swal.fire({text:"\xbfEsta seguro de eliminar el pedido ".concat(e.id,"?"),icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){if(!s.dismiss&&a)return a({id:e.id,options:t}),console.log("[Orus System] Eliminando pedido: "+e.id),!0})),!1)},handleSaveOrder:function(e,t,a,s,c){window.Swal.fire({title:"Almacenamiento",text:e?"\xbfEsta seguro de actualizar el pedido ".concat(e,"?"):"\xbfEsta seguro de crear un nuevo pedido?",icon:"question",showCancelButton:!0,confirmButtonText:e?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(n){var r=n.dismiss;console.log("[DEBUG HELPER data]",t),!r&&s&&(s({data:t,id:e,options:a}),c&&c(),An(t.contact_id))}))},getDataTemporary:Tn,addDataTemporary:function(e){var t=Tn();Object(l.a)(Object(l.a)({},t),{},{orders:t.orders.filter((function(t){return t.id!==e.id}))}).orders.push(e)},removeDataTemporary:An,getDataOneItem:function(e){var t;return null!==(t=Tn().orders.filter((function(t){return t.id===e}))[0])&&void 0!==t?t:{}},getStatusType:["procesando","laboratorio","bicelacion","terminado","entregado"]},Fn=function(e){var t=e.orders;return Object(fc.jsxs)("table",{className:"table m-0",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"ID"}),Object(fc.jsx)("th",{children:"Folio LAB"}),Object(fc.jsx)("th",{children:"Nota"}),Object(fc.jsx)("th",{children:"Estado"}),Object(fc.jsx)("th",{children:"Registrado"})]})}),Object(fc.jsx)("tbody",{children:t.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsxs)("th",{children:["#",e.id]}),Object(fc.jsx)("td",{children:e.order_foreing?"#".concat(e.order_foreing):"--"}),Object(fc.jsx)("td",{children:e.nota?"#".concat(e.nota):"--"}),Object(fc.jsx)("td",{className:"text-uppercase",children:Object(fc.jsx)("span",{className:"badge badge-secondary",children:Pn.handleStatusString(e.status)})}),Object(fc.jsxs)("td",{className:"text-truncate",children:[Object(fc.jsx)("i",{className:"fas fa-clock mr-2"}),wc()(e.created_at).fromNow()]})]},e.id)}))})]})},Mn=function(e){var t=e.exams,a=void 0===t?[]:t,s=e.allSelect,c=void 0!==s&&s,n=e.handleSelectedExam,r=Object(bc.useState)(""),i=Object(mc.a)(r,2),l=i[0],o=i[1];return Object(fc.jsxs)("table",{className:"table m-0",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{scope:"col"}),Object(fc.jsx)("th",{scope:"col",children:"Folio"}),Object(fc.jsx)("th",{scope:"col",children:"Registrado"}),Object(fc.jsx)("th",{scope:"col",children:"Estado"})]})}),Object(fc.jsxs)("tbody",{children:[a.length?null:Object(fc.jsx)("tr",{children:Object(fc.jsxs)("th",{colSpan:"4",className:"text-center",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"No hay registros"]})}),a.map((function(e){return Object(fc.jsxs)("tr",{className:wc()(new Date).isSame(wc()(e.created_at),"day")?"text-primary":"",children:[Object(fc.jsx)("td",{children:Object(fc.jsx)("div",{className:"icheck-primary",children:n?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("input",{type:"checkbox",name:"exam_"+e.id,id:"exam_"+e.id,value:l,onChange:function(t){return o((a=e).id),void n(a);var a},disabled:!c&&!e.status,checked:l===e.id}),Object(fc.jsx)("label",{htmlFor:"exam_"+e.id})]}):null})}),Object(fc.jsx)("th",{scope:"row",children:Object(fc.jsxs)("span",{className:"text",children:["#",e.id]})}),Object(fc.jsxs)("td",{className:"text-truncate",children:[Object(fc.jsx)("i",{className:"fas fa-clock mr-2"}),wc()(e.created_at).fromNow()]}),Object(fc.jsx)("td",{children:e.status?Object(fc.jsxs)("span",{className:"badge badge-success",children:[Object(fc.jsx)("i",{className:"fas fa-check"})," Terminado"]}):Object(fc.jsxs)("span",{className:"badge badge-secondary",children:[Object(fc.jsx)("i",{className:"fas fa-hourglass"})," Activo"]})})]},e.id)}))]})]})},Bn=function(e){var t="";return e.parent?e.parent.parent?(t=e.parent.parent.meta.code,t+=e.parent.meta.code,t+=e.meta.code):(t=e.parent.meta.code,t+=e.meta.code):t=e.meta.code,t},Un={handleTypeInput:function(e){return"pc"===e||"tablet"===e||"movil"===e||"lap"===e||"pc_time"===e||"tablet_time"===e||"movil_time"===e||"lap_time"===e||"frontal"===e||"occipital"===e||"generality"===e||"cefalea"===e||"temporaod"===e||"temporaoi"===e||"c_frecuencia"===e||"c_intensidad"===e?"generales":"interrogatorio"===e||"coa"===e||"aopp"===e||"aopf"===e?"interrogatorios":"keratometriaod"===e||"keratometriaoi"===e||"rsod"===e||"rsoi"===e?"keraRet":"d_time"===e||"d_media"===e||"d_test"===e||"d_fclod"===e||"d_fclod_time"===e||"d_fcloi"===e||"d_fcloi_time"===e?"diabetes":"cvod"===e||"cvoi"===e||"avslod"===e||"avsloi"===e||"avcgaod"===e||"avcgaoi"===e||"avfod"===e||"avfoi"===e||"avf2o"===e?"agudeza":"diagnostico"===e||"presbicie"===e||"piod"===e||"pioi"===e||"txoftalmico"===e?"diagnostico":"esferaod"===e||"esferaoi"===e||"cilindrod"===e||"cilindroi"===e||"ejeod"===e||"ejeoi"===e||"adiciond"===e||"adicioni"===e||"adicion_media_od"===e||"adicion_media_oi"===e||"dpod"===e||"dpoi"===e||"alturaod"===e||"alturaoi"===e||"lcmarca"===e||"lcgod"===e||"lcgoi"===e?"graduacion":"observaciones"===e?"observaciones":null},handleCodeName:Bn,getCodeGrad:function(e,t,a,s,c){var n=Object.keys(e).length?Bn(e):null;if(!n)return{};var r="+000000",i="+000000";return(s||t)&&(r=t>0?"+":"",r+=t.toFixed(2).toString().replace(".","")+s.toFixed(2).toString().replace("-","").replace(".","")),(c||a)&&(i=a>0?"+":"",i+=a.toFixed(2).toString().replace(".","")+c.toFixed(2).toString().replace("-","").replace(".","")),{code:n,od:r,oi:i}},handleSaveExam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,s=e.examenes.filter((function(e){return 0===wc()(e.created_at).diff(wc()(),"days")||!e.estado}));if(s.length&&!t)return window.Swal.fire({title:"Examenes",text:"Existe un examen activo o del dia",icon:"error"}),console.error("[OrusSystem] Examenes activos:",s.length),!1;window.Swal.fire({title:"Almacenamiento",text:t?"\xbfEsta seguro de actualizar este examen?":"\xbfEsta seguro de crear un nuevo examen?",icon:"question",showCancelButton:!0,confirmButtonText:t?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){!t.dismiss&&a&&a({id:0,data:{edad:e.edad,contact_id:e.id}})}))}},zn=Un,Rn={_saveExam:Ha.saveExam,_setMsgExam:Ha.setMessagesExam},Gn=Object(n.b)((function(e){var t=e.contact;return{msg_exams:e.exam.messages,contact:t.contact}}),Rn)((function(e){var t=e.contact,a=void 0===t?{}:t,s=e.showBottons,c=void 0===s||s,n=e.showNew,r=void 0===n||n,i=e.handeleChangePage,l=a.examenes,o=void 0===l?[]:l;return Object(fc.jsxs)("div",{className:"card",children:[Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsxs)("h5",{className:"card-title text-indigo text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-notes-medical mr-1"}),"Examenes"]}),o.length?Object(fc.jsx)(Mn,{allSelect:!0,exams:o,handleSelectedExam:function(e){i(e)}}):Object(fc.jsx)("div",{className:"alert alert-info mt-5",children:Object(fc.jsxs)("h5",{children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Aun no hay examenes para este contacto"]})})]}),!a.deleted_at&&c?Object(fc.jsx)("div",{className:"card-footer text-right",children:Object(fc.jsx)("div",{className:"btn-group",children:r?Object(fc.jsx)("button",{className:"btn btn-secondary",onClick:function(t){return zn.handleSaveExam(e.contact,0,e._saveExam)},children:"Nuevo"}):null})}):null]})}));var Vn=function(e){var t=e.title,a=void 0===t?"confirmaci\xf3n":t,s=e.body,c=e.handleCancel;return Object(fc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(fc.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(fc.jsxs)("div",{className:"modal-content",children:[Object(fc.jsxs)("div",{className:"modal-header",children:[Object(fc.jsx)("h5",{className:"modal-title text-dark text-bold text-capitalize",children:a}),Object(fc.jsx)("button",{type:"button",className:"close",onClick:function(){c&&c()},children:Object(fc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(fc.jsx)("div",{className:"modal-body",children:s})]})})})},qn={dataPrimary:{name:"",telnumbers:{t_casa:"",t_oficina:"",t_movil:""},email:"",birthday:"",type:0,business:0,gender:"female"},handleVerificationData:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.name,s=e.email,c=e.birthday,n=e.telnumbers,r=e.type,i=/^[A-Z\xc1\xc9\xcd\xd3\xda\xf1\xe1\xe9\xed\xf3\xfa\xd1]+\s[A-Z\xc1\xc9\xcd\xd3\xda\xf1\xe1\xe9\xed\xf3\xfa\xd1]{2,}(\s?[A-Z\xc1\xc9\xcd\xd3\xda\xf1\xe1\xe9\xed\xf3\xfa\xd1]+){1,}/gim,l=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/gim,o=/^\d{10}$/gim;if(!r&&!i.test(a))return t&&window.Swal.fire({title:"Verificacion",text:"El nombre del contacto es erroneo",icon:"warning"}),{result:!1,name:"name"};if(!l.test(s))return t&&window.Swal.fire({title:"Verificacion",text:"El correo electr\xf3nico del contacto es erroneo",icon:"warning"}),{result:!1,name:"email"};var d=Object.values(n),j=!0;if(d.every((function(e){return!o.test(e)||(j=!1,!1)})),!r&&j)return t&&window.Swal.fire({title:"Verificacion",text:"El numero de contacto es erroneo",icon:"warning"}),{result:!1,name:"telnumbers"};var u=new Date(c),m=new Date,b=m.getFullYear()-u.getFullYear();return r||c&&!(b<1)?{result:!0}:(t&&window.Swal.fire({title:"Verificacion",text:"La fecha de nacimiento es erronea",icon:"warning"}),{result:!1,name:"bithday"})},saveContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contacto",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;window.Swal.fire({title:"Almacenamiento",text:s?"\xbfEsta seguro de actualizar al ".concat(e,"?"):"\xbfEsta seguro de crear un nuevo ".concat(e,"?"),icon:"question",showCancelButton:!0,confirmButtonText:s?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){!e.dismiss&&a&&a({id:s,data:t})}))},changeDataInput:function(e,t,a){var s=e.name,c=e.value,n=c;"telnumbers"===s&&(n=Object(l.a)(Object(l.a)({},t.telnumbers),{},{t_movil:c})),a(Object(l.a)(Object(l.a)({},t),{},Object(N.a)({},s,n)))},handleGetDataObject:function(e,t,a){switch(e){case"name":return{name:t,verification:Object(l.a)(Object(l.a)({},a),{},{name:!0})};case"email":return{email:t,verification:Object(l.a)(Object(l.a)({},a),{},{email:!0})};case"birthday":return{birthday:t,verification:Object(l.a)(Object(l.a)({},a),{},{birthday:!0})};case"telefonos":return{telefonos:t,verification:Object(l.a)(Object(l.a)({},a),{},{telefonos:!0})};default:return Object(N.a)({},e,t)}}},Jn=qn,$n=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).dataBodyConfirm=function(e){return Object(fc.jsxs)("div",{children:[Object(fc.jsx)("p",{className:"text-center",children:"\xbfRealmente desea ver el examen?"}),Object(fc.jsx)("div",{className:"text-center",children:Object(fc.jsx)(c.b,{to:"/consultorio/".concat(e),className:"btn btn-primary",children:"Confirmar"})})]})},s.handleCloseModal=function(){s.setState({showModal:!1})},s.handleSelectExam=function(e){var t=e.id;s.setState({showModal:!0,idExamSelect:t})},s.handleChangeData=function(e,t){var a=s.state.verification,c=Jn.handleGetDataObject(e,t,a);s.setState(c)},s.handleSave=function(e){e.preventDefault();var t=s.state,a=t.id,c=t.name,n=t.rfc,r=t.email,i=t.type,l=t.gender,o=t.birthday,d=t.domicilios,j=t.telnumbers,u=t.business,m=s.props._saveContact;if(!Jn.handleVerificationData(s.state))return!1;var b={calle:d.calle.trim(),colonia:d.colonia.trim(),municipio:d.municipio.trim(),estado:d.estado.trim(),cp:d.cp.trim()},h={name:c.trim().toLocaleLowerCase(),rfc:n.trim().toLocaleLowerCase(),email:r.trim().toLocaleLowerCase(),type:i,gender:l,birthday:new Date(o),domicilio:JSON.stringify(b),telnumbers:JSON.stringify(j),business:u?1:0};Jn.saveContact("contacto",h,m,a)},s.getUser=function(){var e,t,a,c=s.props.contact,n=c.id,r=c.domicilio,i=c.telefonos;n?s.setState({id:n,name:c.nombre,rfc:null!==(e=c.rfc)&&void 0!==e?e:"",email:null!==(t=c.email)&&void 0!==t?t:"",type:c.tipo,gender:c.metadata.gender,business:c.empresa,birthday:null!==(a=c.metadata.birthday)&&void 0!==a?a:"",domicilios:r||{calle:"",colonia:"",municipio:"",estado:"",cp:""},telnumbers:i||{t_casa:"",t_oficina:"",t_movil:""},load:!1}):s.setState({load:!1})},s.state={id:0,name:"",rfc:"",email:"",type:0,gender:"female",birthday:"",domicilios:{calle:"",colonia:"",municipio:"",estado:"",cp:""},telnumbers:{t_casa:"",t_oficina:"",t_movil:""},business:!1,verification:{name:!0,email:!0,birthday:!0,telefonos:!0},load:!1,showModal:!1,idExamSelect:0},s.timeSave=null,s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){this.setState({load:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.msg_exams,s=t.msg_contact,c=t.contact,n=t._setMsgExam,r=t._getContact,i=this.state.load;e.msg_exams.length!==a.length&&a.length&&(a.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),n(),r(c.id),this.setState({load:!0})),e.msg_contact.length!==s.length&&s.length&&a.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),e.contact.id!==c.id&&c.id&&this.setState({load:!0}),e.load!==i&&i&&this.getUser()}},{key:"componentWillUnmount",value:function(){(0,this.props._setList)({result:{list:[],metaList:{},contact:{}}})}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.name,s=e.rfc,c=e.email,n=e.type,r=e.gender,i=e.birthday,l=e.domicilios,o=e.telnumbers,d=e.business,j=e.load,u=e.verification,m=e.showModal,b=e.idExamSelect,h=this.props,x=h.handleClose,p=h.contact,O=p.compras,f=void 0===O?[]:O,g=p.purchases_count,v=p.exams_count,N=p.marcas,y=void 0===N?[]:N,S=p.brands_count,C=p.proveedor_de,_=void 0===C?[]:C,w=p.suppliers_count,k=p.orders,E=void 0===k?[]:k,L=p.orders_count,I=p.created_at,D=p.created,T=p.updated_at,A=p.updated,P=Object.values(o).filter((function(e){return 10===e.length}));return Object(fc.jsxs)(fc.Fragment,{children:[p.id?Object(fc.jsx)(In,{purchases:g,exams:v,brands:S,suppliers:w,orders:L,register:null!==I&&void 0!==I?I:"",created:D?D.name:"",updated:A?A.name:"",updated_at:null!==T&&void 0!==T?T:""}):null,Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col-md-12",children:[p.deleted_at?Object(fc.jsxs)("div",{className:"alert alert-warning",children:[Object(fc.jsxs)("h4",{class:"alert-heading",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Precaucion!"]}),Object(fc.jsxs)("p",{children:["Este contacto fue eliminado por ",p.updated.name," el"," ",wc()(p.deleted_at).format("LLLL")]})]}):null,Object(fc.jsxs)("div",{className:"card card-indigo card-outline",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h3",{className:"card-title text-indigo",children:[Object(fc.jsx)("i",{className:"fas fa-address-book mr-1"}),t?Object(fc.jsxs)("label",{children:["Editar contacto",Object(fc.jsx)("span",{className:"badge bg-indigo ml-2",children:t})]}):Object(fc.jsx)("label",{children:"Registrar nuevo contacto"})]})}),Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("h6",{className:"card-subtitle text-muted d-block w-100 mb-4 text-center",children:"Datos personales"}),Object(fc.jsx)(wn,{id:t,name:a,rfc:s,email:c,type:n,gender:r,birthday:i,business:d,verification:u,handleChangeData:this.handleChangeData})]}),Object(fc.jsxs)("div",{className:"row mt-5 border-top pt-5",children:[Object(fc.jsxs)("h6",{className:"card-subtitle text-muted d-block w-100 mb-4 text-center",children:["Medios de contacto ",Object(fc.jsx)("span",{className:"text-orange",children:"*"}),(!o.t_casa&&!o.t_oficina&&!o.t_movil)|!u.telefonos?Object(fc.jsx)("small",{className:"d-block w-100",children:Object(fc.jsx)("span",{className:"text-orange",children:"Ingrese por lo menos un telefono"})}):null]}),Object(fc.jsx)(En,{telefonos:o,handleChangeData:this.handleChangeData})]}),n?null:Object(fc.jsxs)("div",{className:"row mt-5 border-top pt-5",children:[Object(fc.jsx)("h6",{className:"card-subtitle text-muted d-block w-100 mb-4 text-center",children:"Domicilios del contacto"}),Object(fc.jsx)(kn,{domicilios:l,handleChangeData:this.handleChangeData})]})]}),Object(fc.jsx)("div",{className:"card-footer",children:Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col-md-12",children:Object(fc.jsxs)("div",{className:"btn-group float-right",role:"group",children:[Object(fc.jsxs)("button",{className:"btn btn-default",type:"button",onClick:function(e){return x()},children:[Object(fc.jsx)("i",{className:t?"fas fa-arrow-left mr-2":"fas fa-ban mr-2"}),Object(fc.jsx)("strong",{children:t?"Cerrar":"Cancelar"})]}),Object(fc.jsxs)("button",{type:"button",className:"btn bg-indigo",onClick:this.handleSave,disabled:p.deleted_at||!a.length||!c.length||!i.length&&!n||!P.length,children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"}),t?"Actualizar":"Guardar"]})]})})})}),j?Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})]})}),t?Object(fc.jsx)("div",{className:"content",id:"details",children:Object(fc.jsxs)("div",{className:"row",children:[n?Object(fc.jsxs)("div",{children:["Type: ",n]}):Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)(Gn,{handeleChangePage:this.handleSelectExam})}),f.length?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("div",{className:"card",children:Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(fc.jsx)("i",{className:"fas fa-money-bill mr-1"}),"Compras"]}),Object(fc.jsx)(Ln,{sales:f})]})})}):null,y.length?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("div",{className:"card",children:Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(fc.jsx)("i",{className:"fas fa-copyright mr-1"}),"Marcas"]}),Object(fc.jsx)(Dn,{brands:y})]})})}):null,_.length?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("div",{className:"card",children:Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(fc.jsx)("i",{className:"fas fa-building mr-1"}),"Laboratorio"]}),Object(fc.jsx)(Fn,{orders:null!==_&&void 0!==_?_:[]})]})})}):null,E.length?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("div",{className:"card",children:Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(fc.jsx)("i",{className:"fas fa-shopping-basket mr-1"}),"Pedidos"]}),Object(fc.jsx)(Fn,{orders:null!==E&&void 0!==E?E:[]})]})})}):null]})}):null,m&&Object(fc.jsx)(Vn,{body:this.dataBodyConfirm(b),handleCancel:this.handleCloseModal})]})}}]),a}(bc.Component),Yn={_getContact:Sa.getContact,_saveContact:Sa.saveContact,_setList:Sa.setListContact,_saveExam:Ha.saveExam,_setMsgExam:Ha.setMessagesExam},Hn=Object(n.b)((function(e){var t=e.contact,a=e.exam;return{loading:t.loading,contact:t.contact,msg_contact:t.messages,msg_exams:a.messages}}),Yn)($n),Zn=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).openNew=function(){(0,s.props._setContact)(),s.setState({newOrEdit:!0})},s.handleSync=function(){s.getContacts()},s.handleCloseEdit=function(){s.setState({contact:{},contactSelected:"",newOrEdit:!1,load:!0}),s.props.history.push("/contactos")},s.handleEditItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=s.state.contactSelected,a=s.props._getContact,c=null!==e&&void 0!==e?e:t;c&&a(c)},s.handleChangeCheckbox=function(e){var t=e.target,a=t.value;t.checked?s.setState({contactSelected:parseInt(a)}):s.setState({contactSelected:""})},s.handleSetSelectOptions=function(e){var t=e.target,a=t.name,c=t.value,n=s.state.options,r=c;"itemsPage"===a&&(r=parseInt(c)),s.setState({options:Object(l.a)(Object(l.a)({},n),{},Object(N.a)({page:1},a,r)),load:!0})},s.handleSearch=function(e){var t=s.state.options;s.setState({options:Object(l.a)(Object(l.a)({},t),{},{search:e}),load:!0})},s.handleChangePage=function(e){var t=s.state.options;s.setState({options:Object(l.a)(Object(l.a)({},t),{},{page:e}),load:!0})},s.handleDelete=function(){var e=s.state,t=e.contactSelected,a=e.options,c=s.props._deleteContact;if(!t)return window.Swal.fire({title:"Verificacion",text:"Debe de selecionar al menos un contacto para eliminar",icon:"warning"}),!1;window.Swal.fire({title:"Eliminar",text:"\xbfEsta seguro de eliminar el contacto?",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){"cancel"!==e.dismiss&&(console.log("[Orus System] Enviando datos para eliminar",t),c({id:t,options:a})),s.setState({contactSelected:"",load:!0})}))},s.state={load:!1,contact:{},newOrEdit:!1,contactSelected:"",options:{page:1,orderby:"created_at",order:"desc",search:"",type:"",itemsPage:10}},s.timeInterval=0,s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e._getContact,s=e._setPageName,c=t.params.id;c?("new"===c&&this.setState({newOrEdit:!0}),parseInt(c)&&a(c)):this.setState({load:!0}),s("Contactos")}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.load,s=this.props,c=s.messages,n=s.contact,r=s._setMessage;t.load!==a&&a&&(console.log("[Orus System] Recargando contactos"),this.getContacts()),e.contact.id!==n.id&&n.id&&(console.log("[Orus System] Cargando nuevo contacto",n.id),this.setState({contact:n,newOrEdit:!0}),this.props.history.push("/contactos/".concat(n.id))),e.messages.length!==c.length&&c.length&&(c.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),r())}},{key:"render",value:function(){var e=this,t=this.props,a=t.contacts,s=t.loading,c=t.meta,n=this.state,r=n.contact,i=n.newOrEdit,l=n.contactSelected,o=n.options;return Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-sm-12 col-md-2",children:[Object(fc.jsxs)("button",{className:"btn bg-indigo btn-block mb-3",type:"button",disabled:i,onClick:this.openNew,children:[Object(fc.jsx)("i",{className:"fas fa-plus mr-1"}),"Nuevo contacto"]}),Object(fc.jsx)(Hc,{title:i?"Menu":"Filtros",children:i?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("li",{className:"list-group-item",children:Object(fc.jsxs)("a",{href:"#back",className:"d-flex justify-content-between align-items-center",onClick:function(t){t.preventDefault(),e.handleCloseEdit()},children:["Ver listado",Object(fc.jsx)("span",{className:"badge badge-primary badge-pill",children:Object(fc.jsx)("i",{className:"fas fa-chevron-left"})})]})}),r.id?Object(fc.jsx)("li",{className:"list-group-item",children:Object(fc.jsxs)("a",{href:"#details",className:"d-flex justify-content-between align-items-center",children:["Detalles",Object(fc.jsx)("span",{className:"badge badge-primary badge-pill",children:Object(fc.jsx)("i",{className:"fas fa-chevron-right"})})]})}):null]}):Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"type",children:"Tipo"}),Object(fc.jsxs)("select",{className:"form-control ",name:"type",id:"type",value:o.type,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"",children:"-- Todos --"}),Object(fc.jsx)("option",{value:"0",children:"Clientes"}),Object(fc.jsx)("option",{value:"1",children:"Proveedores"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(fc.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:o.orderby,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(fc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(fc.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:o.order,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(fc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de contactos"}),Object(fc.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:o.itemsPage,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"10",children:"ver 10"}),Object(fc.jsx)("option",{value:"20",children:"ver 20"}),Object(fc.jsx)("option",{value:"50",children:"ver 50"}),Object(fc.jsx)("option",{value:"100",children:"ver 100"})]})]})]})})]}),Object(fc.jsx)("div",{className:"col-sm-12 col-md-10",children:i?Object(fc.jsx)(Hn,{handleClose:this.handleCloseEdit}):Object(fc.jsx)(Ec,{title:"Lista de contactos",icon:"id-badge",color:"indigo",loading:s,meta:c,itemSelected:l,handlePagination:this.handleChangePage,handleSearch:this.handleSearch,handleDeleteItem:this.handleDelete,handleEditItem:this.handleEditItem,handleSync:this.handleSync,children:Object(fc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{}),Object(fc.jsx)("th",{children:"Nombre"}),Object(fc.jsx)("th",{children:"Edad"}),Object(fc.jsx)("th",{children:"E-mail"}),Object(fc.jsx)("th",{children:"Telefono"}),Object(fc.jsx)("th",{children:"Creado por"}),Object(fc.jsx)("th",{children:"created_at"===o.orderby?"Registrado":"Actualizado"})]})}),Object(fc.jsx)("tbody",{children:a.length?Object(fc.jsx)(fc.Fragment,{children:a.map((function(t){return Object(fc.jsxs)("tr",{children:[Object(fc.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(fc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:t.id,id:"contact_"+t.id,checked:l===t.id,onChange:e.handleChangeCheckbox}),Object(fc.jsx)("label",{htmlFor:"contact_"+t.id,className:"sr-only"})]}),Object(fc.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",style:{cursor:"pointer",maxWidth:180},onClick:function(a){return e.handleEditItem(t.id)},children:Object(fc.jsxs)("label",{style:{cursor:"pointer"},className:t.enUso?"text-indigo":"",children:[t.tipo?Object(fc.jsx)("i",{className:"fas fa-store text-sm mr-2"}):Object(fc.jsx)("i",{className:"fas fa-user text-sm mr-2"}),t.nombre]})}),Object(fc.jsx)("th",{children:t.edad?t.edad:"--"}),Object(fc.jsx)("td",{className:"mailbox-attachment text-lowercase text-truncate",style:{maxWidth:180},children:Object(fc.jsxs)("span",{children:[Object(fc.jsx)("i",{className:"fas fa-envelope text-sm mr-2"}),Object(fc.jsx)("a",{href:"mailto:"+t.email,className:"text-muted",children:t.email})]})}),Object(fc.jsx)("td",{className:"mailbox-date text-muted text-truncate text-right",children:Object(fc.jsxs)("span",{children:[Object(fc.jsx)("i",{className:"fas fa-phone text-sm mr-2"}),t.telefonos.t_movil?t.telefonos.t_movil:t.telefonos.t_casa?t.telefonos.t_casa:t.telefonos.t_oficina?t.telefonos.t_oficina:"--"]})}),Object(fc.jsx)("td",{children:t.created.name}),Object(fc.jsx)("td",{children:wc()("created_at"===o.orderby?t.created_at:t.updated_at).fromNow()})]},t.id)}))}):Object(fc.jsx)("tr",{children:Object(fc.jsx)("th",{className:"text-center text-muted",colSpan:"7",children:"No hay contactos registrados"})})})]})})})]})}},{key:"getContacts",value:function(){var e=this.props,t=e.loading,a=e._getListContacts,s=this.state.options;t||a(Object(l.a)({},s)),this.setState({load:!1})}}]),a}(bc.Component),Qn={_getListContacts:Sa.getListContacts,_deleteContact:Sa.deleteContact,_saveContact:Sa.saveContact,_getContact:Sa.getContact,_setMessage:Sa.setMessageContact,_setContact:Sa.setContact,_setPageName:g.changeNamePage},Xn=Object(n.b)((function(e){var t=e.contact;return{contacts:t.list,messages:t.messages,meta:t.metaList,loading:t.loading,contact:t.contact}}),Qn)(Zn);var Wn={deleteConfig:function(e,t,a,s){window.Swal.fire({title:"Almacenamiento",text:"\xbfEsta seguro de ELIMINAR la sucursal ".concat(a,"?"),icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(a){a.dismiss||s($s.deleteConfig({id:e,options:t}))}))},saveConfig:function(e,t,a){window.Swal.fire({title:"Almacenamiento",text:e.id?"\xbfEsta seguro de actualizar la sucursal ".concat(e.name,"?"):"\xbfEsta seguro de crear una nueva sucursal?",icon:"question",showCancelButton:!0,confirmButtonText:e.id?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){s.dismiss||a($s.saveConfig({data:{name:"branches",value:{name:e.name,address:e.address,phone:e.phone}},id:e.id,options:t}))}))},verifyData:function(e){return e.name.length<=3?(window.Swal.fire({title:"Verificacion",text:"Por favor escriba un nombre valido para la sucursal",icon:"warning"}),!1):e.address.length<=3?(window.Swal.fire({title:"Verificacion",text:"Por favor escriba un domicilio valido para la sucursal",icon:"warning"}),!1):10===e.phone.length||(window.Swal.fire({title:"Verificacion",text:"Por favor escriba un numero telefonico a 10 numeros",icon:"warning"}),!1)}};function Kn(){var e=Object(n.d)((function(e){return e.config})).list,t=Object(n.c)(),a=Object(bc.useState)({showForm:!1,id:0,name:"",address:"",phone:""}),s=Object(mc.a)(a,2),c=s[0],r=s[1],i={page:1,name:"branches",itemsPage:10},o=function(){return r(Object(l.a)(Object(l.a)({},c),{},{showForm:!1,id:0,name:"",address:"",phone:""}))},d=function(e){var t=e.name,a=e.value;r(Object(l.a)(Object(l.a)({},c),{},Object(N.a)({},t,a.toString().toLowerCase())))};return Object(bc.useEffect)((function(){t($s.getListConfig(i))}),[]),Object(fc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsxs)("h5",{className:"card-title d-block mb-2",children:[Object(fc.jsx)("i",{className:"fas fa-store mr-1"}),"Sucursales"]}),c.showForm?Object(fc.jsxs)("form",{className:"card-text m-2 mt-4",onSubmit:function(e){e.preventDefault(),Wn.verifyData(c)&&(Wn.saveConfig(c,i,t),o())},children:[Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Nombre de la sucursal"}),Object(fc.jsx)("input",{type:"text",placeholder:"Escriba el nombre de la sucursal",className:"form-control",name:"name",defaultValue:c.name,onChange:function(e){var t=e.target;return d(t)}})]}),Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Domicilio"}),Object(fc.jsx)("input",{type:"text",placeholder:"Escriba el domicilio de la sucursal",className:"form-control",name:"address",defaultValue:c.address,onChange:function(e){var t=e.target;return d(t)}})]}),Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Telefono"}),Object(fc.jsx)("input",{type:"phone",placeholder:"Escriba el telefono de la sucursal",className:"form-control",name:"phone",defaultValue:c.phone,onChange:function(e){var t=e.target;return d(t)},maxLength:10})]}),Object(fc.jsxs)("div",{className:"form-group text-right",children:[Object(fc.jsx)("button",{type:"button",className:"btn btn-link",onClick:o,children:"Cancelar"}),Object(fc.jsx)("button",{type:"submit",className:"btn btn-dark ml-2",children:"Guardar"})]})]}):Object(fc.jsx)("div",{className:"table-responsive",children:Object(fc.jsxs)("table",{className:"table table-striped table-sm",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"Nombre"}),Object(fc.jsx)("th",{children:"Domicilio"}),Object(fc.jsx)("td",{children:Object(fc.jsx)("span",{className:"sr-only",children:"Acciones"})})]})}),Object(fc.jsx)("tbody",{children:e.map((function(e){var t;return Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{className:"text-capitalize",children:e.data.name}),Object(fc.jsx)("td",{className:"text-truncate text-capitalize",children:null!==(t=e.data.address)&&void 0!==t?t:"--"}),Object(fc.jsx)("td",{className:"text-right",children:Object(fc.jsx)("button",{type:"button",className:"btn btn-sm btn-primary ml-1",onClick:function(){return function(e){var t,a,s,c=e.id,n=(e.values,e.data);r(Object(l.a)(Object(l.a)({},n),{},{showForm:!0,id:c,name:null===(t=n.name)||void 0===t?void 0:t.toString().toLowerCase(),address:null===(a=n.address)||void 0===a?void 0:a.toString().toLowerCase(),phone:null===(s=n.phone)||void 0===s?void 0:s.toString().toLowerCase()}))}(e)},children:Object(fc.jsx)("i",{className:"fas fa-edit"})})})]},e.id)}))})]})})]}),Object(fc.jsx)("div",{className:"card-footer text-right",children:Object(fc.jsx)("button",{className:"btn btn-primary btn-sm",disabled:c.showForm,onClick:function(){return r(Object(l.a)(Object(l.a)({},c),{},{showForm:!0}))},children:Object(fc.jsx)("i",{className:"fas fa-plus"})})})]})}var er=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).clickSave=function(){var e=JSON.parse(localStorage.getItem("OrusSystem"));e.company=s.state.company,e.host=s.state.server},s.clickSaveUser=function(){var e=JSON.parse(localStorage.getItem("OrusSystem"));e.email=s.state.email,e.name=s.state.name,e.username=s.state.username},s.catchInputs=function(e){var t=e.target,a=t.name,c=t.value;s.setState(Object(N.a)({},a,c.toLowerCase()))},s.state={server:"",company:"",email:"",name:"",username:"",password:"",category_list:[]},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("OrusSystem")),t=this.props._setPageName;this.setState({server:e.host?e.host:window.location.host.split(":")[0],company:e.company?e.company:"",email:e.email?e.email:"",name:e.name?e.name:"",username:e.username?e.username:""}),t("configuraciones")}},{key:"render",value:function(){return Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-6",children:Object(fc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)("h5",{className:"card-title",children:"Generales"}),Object(fc.jsx)("p",{children:"\xa0"}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-server"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Servidor",name:"server",value:this.state.server,onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-building"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Nombre de la empresa",name:"company",value:this.state.company,onChange:this.catchInputs})]})]}),Object(fc.jsx)("div",{className:"card-footer text-right",children:Object(fc.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.clickSave,children:"Guardar"})})]})}),Object(fc.jsxs)("div",{className:"col-6",children:[Object(fc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)("h5",{className:"card-title",children:"Usuario"}),Object(fc.jsx)("p",{children:"\xa0"}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-at"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",name:"email",value:this.state.email,onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-user-tag"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Nombre completo",name:"name",value:this.state.name,onChange:this.catchInputs})]}),Object(fc.jsx)("hr",{}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-user-check"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Usuario",name:"username",value:this.state.username,onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:Object(fc.jsx)("i",{className:"fas fa-lock"})})}),Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Contrase\xf1a",name:"password",value:this.state.password,onChange:this.catchInputs})]})]}),Object(fc.jsx)("div",{className:"card-footer text-right",children:Object(fc.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.clickSaveUser,children:"Guardar"})})]}),Object(fc.jsx)(Kn,{})]})]})}}]),a}(bc.Component),tr={_setPageName:g.changeNamePage},ar=Object(n.b)((function(e){e.default;return{}}),tr)(er),sr=function(e){var t,a,s,c,n,r,i=function(t){var a=t.target,s=a.name,c=a.type,n=a.checked,r=a.value,i="checkbox"===c?n:r.toLowerCase();e.handleGetData(s,i)};return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"pc",type:"checkbox",className:"custom-control-input",id:"pc",checked:e.pc,onChange:i}),Object(fc.jsxs)("label",{className:"custom-control-label",htmlFor:"pc",children:[Object(fc.jsx)("i",{className:"fas fa-desktop"})," PC"]})]}),Object(fc.jsx)("input",{type:"text",name:"pc_time",className:"form-control input-xs",defaultValue:null!==(t=e.pc_time)&&void 0!==t?t:"",onChange:i,readOnly:e.pc?"":"readonly"})]}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"tablet",type:"checkbox",className:"custom-control-input",id:"tablet",checked:e.tablet,onChange:i}),Object(fc.jsxs)("label",{className:"custom-control-label",htmlFor:"tablet",children:[Object(fc.jsx)("i",{className:"fas fa-tablet-alt"})," Tablet"]})]}),Object(fc.jsx)("input",{type:"text",name:"tablet_time",className:"form-control input-xs",defaultValue:null!==(a=e.tablet_time)&&void 0!==a?a:"",onChange:i,readOnly:e.tablet?"":"readonly"})]}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"movil",type:"checkbox",className:"custom-control-input",id:"movil",checked:e.movil,onChange:i}),Object(fc.jsxs)("label",{className:"custom-control-label",htmlFor:"movil",children:[Object(fc.jsx)("i",{className:"fas fa-mobile-alt"})," Telefono"]})]}),Object(fc.jsx)("input",{type:"text",name:"movil_time",className:"form-control input-xs",defaultValue:null!==(s=e.movil_time)&&void 0!==s?s:"",onChange:i,readOnly:e.movil?"":"readonly"})]}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"lap",type:"checkbox",className:"custom-control-input",id:"lap",checked:e.lap,onChange:i}),Object(fc.jsxs)("label",{className:"custom-control-label",htmlFor:"lap",children:[Object(fc.jsx)("i",{className:"fas fa-laptop"})," Laptop"]})]}),Object(fc.jsx)("input",{type:"text",name:"lap_time",className:"form-control input-xs",defaultValue:null!==(c=e.lap_time)&&void 0!==c?c:"",onChange:i,readOnly:e.lap?"":"readonly"})]})]}),Object(fc.jsxs)("div",{className:"row mt-1",children:[Object(fc.jsx)("div",{className:"col-md-6",children:Object(fc.jsxs)("ul",{className:"list-group",children:[Object(fc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"frontal",type:"checkbox",className:"custom-control-input",id:"frontal",checked:e.frontal,onChange:i}),Object(fc.jsx)("label",{className:"custom-control-label",htmlFor:"frontal",children:"Frontal"})]})}),Object(fc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"occipital",type:"checkbox",className:"custom-control-input",id:"occipital",checked:e.occipital,onChange:i}),Object(fc.jsx)("label",{className:"custom-control-label",htmlFor:"occipital",children:"Occipital"})]})}),Object(fc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"generality",type:"checkbox",className:"custom-control-input",id:"generality",checked:e.generality,onChange:i}),Object(fc.jsx)("label",{className:"custom-control-label",htmlFor:"generality",children:"General"})]})}),Object(fc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"cefalea",type:"checkbox",className:"custom-control-input",id:"cefalea",checked:e.cefalea,onChange:i}),Object(fc.jsx)("label",{className:"custom-control-label",htmlFor:"cefalea",children:"Cefalea"})]})})]})}),Object(fc.jsx)("div",{className:"col-md-6",children:Object(fc.jsxs)("ul",{className:"list-group",children:[Object(fc.jsxs)("li",{className:"list-group-item",children:["Temporal",Object(fc.jsx)("br",{}),Object(fc.jsxs)("div",{className:"row mt-2",children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"temporaod",type:"checkbox",className:"custom-control-input",id:"temporaod",checked:e.temporaod,onChange:i}),Object(fc.jsxs)("label",{className:"custom-control-label",htmlFor:"temporaod",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," Derecho"]})]})}),Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"temporaoi",type:"checkbox",className:"custom-control-input",id:"temporaoi",checked:e.temporaoi,onChange:i}),Object(fc.jsxs)("label",{className:"custom-control-label",htmlFor:"temporaoi",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," Izquierdo"]})]})})]})]}),Object(fc.jsxs)("li",{className:"list-group-item",children:["Frecuencia",Object(fc.jsx)("span",{className:"badge badge-pill",children:Object(fc.jsx)("input",{type:"text",name:"c_frecuencia",maxLength:"60",className:"form-control input-xs",defaultValue:null!==(n=e.c_frecuencia)&&void 0!==n?n:"",onChange:i})})]}),Object(fc.jsxs)("li",{className:"list-group-item",children:[Object(fc.jsx)("label",{htmlFor:"c_intensidad",children:"Intensidad"}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-11",children:Object(fc.jsx)("input",{type:"range",name:"c_intensidad",className:"custom-range custom-range-info",id:"c_intensidad",min:"0",max:"4",defaultValue:null!==(r=e.c_intensidad)&&void 0!==r?r:"",onChange:i})}),Object(fc.jsx)("div",{className:"col-1",children:Object(fc.jsx)("h6",{children:e.c_intensidad})})]})]})]})})]})]})},cr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(){var e;Object(Nc.a)(this,a);for(var s=arguments.length,c=new Array(s),n=0;n<s;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(yc.a)(a,[{key:"render",value:function(){var e,t,a,s;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col-12",children:[Object(fc.jsx)("label",{children:"Interrogatorio inicial"}),Object(fc.jsx)("textarea",{name:"interrogatorio",className:"form-control",defaultValue:null!==(e=this.props.interrogatorio)&&void 0!==e?e:"",onChange:this.catchInputs})]})}),Object(fc.jsx)("div",{className:"row mt-2",children:Object(fc.jsxs)("div",{className:"col-12",children:[Object(fc.jsx)("label",{children:"Cirugias oculares"}),Object(fc.jsx)("textarea",{name:"coa",className:"form-control",defaultValue:null!==(t=this.props.coa)&&void 0!==t?t:"",onChange:this.catchInputs})]})}),Object(fc.jsx)("div",{className:"row mt-2",children:Object(fc.jsxs)("div",{className:"col-12",children:[Object(fc.jsx)("label",{children:"Antecedentes oculares patologicas personales"}),Object(fc.jsx)("textarea",{name:"aopp",className:"form-control",rows:"2",defaultValue:null!==(a=this.props.aopp)&&void 0!==a?a:"",onChange:this.catchInputs})]})}),Object(fc.jsx)("div",{className:"row mt-2",children:Object(fc.jsxs)("div",{className:"col-12",children:[Object(fc.jsx)("label",{children:"Antecedentes oculares patologicas familiares"}),Object(fc.jsx)("textarea",{name:"aopf",className:"form-control",rows:"2",defaultValue:null!==(s=this.props.aopf)&&void 0!==s?s:"",onChange:this.catchInputs})]})})]})}}]),a}(bc.Component),nr=function(e){var t,a,s,c,n=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.onChangeInput(a,s)};return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-6",children:"Keratometria"}),Object(fc.jsx)("div",{className:"col-6",children:"Retinoscopia"})]}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsx)("i",{className:"fas fa-eye"})," ",Object(fc.jsx)("label",{children:"Derecho"}),Object(fc.jsx)("input",{type:"text",name:"keratometriaod",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(t=e.keratometriaod)&&void 0!==t?t:"",onChange:n})]}),Object(fc.jsxs)("div",{className:"col-3",children:[Object(fc.jsx)("i",{className:"fas fa-eye"})," ",Object(fc.jsx)("label",{children:"Izquierdo"}),Object(fc.jsx)("input",{type:"text",name:"keratometriaoi",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(a=e.keratometriaoi)&&void 0!==a?a:"",onChange:n})]}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Derecho"}),Object(fc.jsx)("input",{type:"text",name:"rsod",maxLength:"16",className:"form-control",defaultValue:null!==(s=e.rsod)&&void 0!==s?s:"",onChange:n})]}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Izquierdo"}),Object(fc.jsx)("input",{type:"text",name:"rsoi",maxLength:"16",className:"form-control",defaultValue:null!==(c=e.rsoi)&&void 0!==c?c:"",onChange:n})]})]})]})},rr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(){var e;Object(Nc.a)(this,a);for(var s=arguments.length,c=new Array(s),n=0;n<s;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(yc.a)(a,[{key:"render",value:function(){var e,t,a,s,c,n;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-md-8",children:Object(fc.jsx)("label",{children:"Diab\xe9tico"})}),Object(fc.jsx)("div",{className:"col-md-4",children:Object(fc.jsx)("label",{children:"Fotocoagulaci\xf3n laser"})})]}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-3",children:"Fecha"}),Object(fc.jsx)("div",{className:"col-2",children:"Rango de glucosa"}),Object(fc.jsx)("div",{className:"col-3",children:"Ultimo examen"}),Object(fc.jsx)("div",{className:"col-2",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"d_fclod",type:"checkbox",className:"custom-control-input",id:"d_fclod",checked:this.props.d_fclod,onChange:this.catchInputs}),Object(fc.jsxs)("label",{className:"custom-control-label",htmlFor:"d_fclod",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," Derecho"]})]})}),Object(fc.jsx)("div",{className:"col-2",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"d_fcloi",type:"checkbox",className:"custom-control-input",id:"d_fcloi",checked:this.props.d_fcloi,onChange:this.catchInputs}),Object(fc.jsxs)("label",{className:"custom-control-label",htmlFor:"d_fcloi",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," Izquierdo"]})]})})]}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-md-3",children:Object(fc.jsx)("input",{type:"date",name:"d_time",className:"form-control",defaultValue:null!==(e=this.props.d_time)&&void 0!==e?e:"",onChange:this.catchInputs})}),Object(fc.jsx)("div",{className:"col-md-2",children:Object(fc.jsx)("input",{type:"text",name:"d_media",className:"form-control",defaultValue:null!==(t=this.props.d_media)&&void 0!==t?t:"",onChange:this.catchInputs})}),Object(fc.jsx)("div",{className:"col-md-3",children:Object(fc.jsx)("input",{type:"date",name:"d_test",className:"form-control",defaultValue:null!==(a=this.props.d_test)&&void 0!==a?a:"",onChange:this.catchInputs})}),Object(fc.jsx)("div",{className:"col-md-2",children:Object(fc.jsx)("input",{type:"text",name:"d_fclod_time",className:"form-control",defaultValue:null!==(s=this.props.d_fclod_time)&&void 0!==s?s:"",onChange:this.catchInputs,readOnly:this.props.d_fclod?"":"readonly"})}),Object(fc.jsx)("div",{className:"col-md-2",children:Object(fc.jsx)("input",{type:"text",name:"d_fcloi_time",className:"form-control",defaultValue:null!==(c=this.props.d_fcloi_time)&&void 0!==c?c:"",onChange:this.catchInputs,readOnly:this.props.d_fcloi?"":"readonly"})})]}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col-12",children:[Object(fc.jsx)("label",{children:"Oftalmoscopia"}),Object(fc.jsx)("textarea",{name:"oftalmoscopia",className:"form-control",defaultValue:null!==(n=this.props.oftalmoscopia)&&void 0!==n?n:"",onChange:this.catchInputs})]})})]})}}]),a}(bc.Component),ir=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(){var e;Object(Nc.a)(this,a);for(var s=arguments.length,c=new Array(s),n=0;n<s;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(yc.a)(a,[{key:"render",value:function(){var e,t,a,s,c,n,r,i,l;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col-md-6",children:"Capacidad visual"})}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Derecho"}),Object(fc.jsx)("input",{type:"text",name:"cvod",maxLength:"12",className:"form-control",defaultValue:null!==(e=this.props.cvod)&&void 0!==e?e:"",onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"col-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Izquierdo"}),Object(fc.jsx)("input",{type:"text",name:"cvoi",maxLength:"12",className:"form-control",defaultValue:null!==(t=this.props.cvoi)&&void 0!==t?t:"",onChange:this.catchInputs})]})]}),Object(fc.jsxs)("div",{className:"row mt-2",children:[Object(fc.jsx)("div",{className:"col-md-6",children:"Agudeza visual (Sin lentes)"}),Object(fc.jsx)("div",{className:"col-md-6",children:"Agudeza visual (con la graduaci\xf3n anterior)"})]}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Derecho"}),Object(fc.jsx)("input",{type:"text",name:"avslod",maxLength:"12",className:"form-control",defaultValue:null!==(a=this.props.avslod)&&void 0!==a?a:"",onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"col-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Izquierdo"}),Object(fc.jsx)("input",{type:"text",name:"avsloi",maxLength:"12",className:"form-control",defaultValue:null!==(s=this.props.avsloi)&&void 0!==s?s:"",onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Derecho"}),Object(fc.jsx)("input",{type:"text",name:"avcgaod",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(c=this.props.avcgaod)&&void 0!==c?c:"",onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Izquierdo"}),Object(fc.jsx)("input",{type:"text",name:"avcgaoi",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(n=this.props.avcgaoi)&&void 0!==n?n:"",onChange:this.catchInputs})]})]}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col-md-6",children:"Agudeza visual final"})}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Derecho"}),Object(fc.jsx)("br",{}),Object(fc.jsx)("input",{type:"text",name:"avfod",maxLength:"12",className:"form-control",defaultValue:null!==(r=this.props.avfod)&&void 0!==r?r:"",onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Izquierdo"}),Object(fc.jsx)("br",{}),Object(fc.jsx)("input",{type:"text",name:"avfoi",maxLength:"12",className:"form-control",defaultValue:null!==(i=this.props.avfoi)&&void 0!==i?i:"",onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"col-md-4",children:[Object(fc.jsx)("i",{className:"fa fa-eye"}),Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Ambos"}),Object(fc.jsx)("br",{}),Object(fc.jsx)("input",{type:"text",name:"avf2o",maxLength:"25",className:"form-control",defaultValue:null!==(l=this.props.avf2o)&&void 0!==l?l:"",onChange:this.catchInputs})]})]})]})}}]),a}(bc.Component),lr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(){var e;Object(Nc.a)(this,a);for(var s=arguments.length,c=new Array(s),n=0;n<s;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(yc.a)(a,[{key:"render",value:function(){var e,t,a,s;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-md-6"}),Object(fc.jsx)("div",{className:"col-md-6",children:"Tensi\xf3n ocular"})]}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-md-3",children:["Diagnostico",Object(fc.jsxs)("select",{name:"diagnostico",className:"form-control",defaultValue:null!==(e=this.props.diagnostico)&&void 0!==e?e:"",onChange:this.catchInputs,children:[Object(fc.jsx)("option",{value:"Emetrope",children:"Em\xe9trope"}),Object(fc.jsx)("option",{value:"hipermetropia",children:"Hipermetrop\xeda"}),Object(fc.jsx)("option",{value:"hipermetropia-astigmatismo",children:"Hipermetrop\xeda y astigmatismo"}),Object(fc.jsx)("option",{value:"hipermetropia-miopia",children:"Hipermetrop\xeda y miop\xeda"}),Object(fc.jsx)("option",{value:"astigmatismo-regla",children:"Astigmatismo con la regla"}),Object(fc.jsx)("option",{value:"astigmatismo-contra-regla",children:"Astigmatismo contra la regla"}),Object(fc.jsx)("option",{value:"astigmatismo-oblicuo",children:"Astigmatismo oblicuo"}),Object(fc.jsx)("option",{value:"astigmatismo-miopia",children:"Astigmatismo/m\xedopico"}),Object(fc.jsx)("option",{value:"miopia",children:"Miop\xeda"})]})]}),Object(fc.jsx)("div",{className:"col-md-3",children:Object(fc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(fc.jsx)("input",{name:"presbicie",type:"checkbox",className:"custom-control-input",id:"presbicie",checked:this.props.presbicie,onChange:this.catchInputs}),Object(fc.jsx)("label",{className:"custom-control-label",htmlFor:"presbicie",children:"Presbicie"})]})}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Derecho"}),Object(fc.jsx)("input",{type:"number",name:"piod",min:"0",max:"40",step:"1",className:"form-control",defaultValue:null!==(t=this.props.piod)&&void 0!==t?t:"",onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"col-md-3",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Izquierdo"}),Object(fc.jsx)("input",{type:"number",name:"pioi",min:"0",max:"40",step:"1",className:"form-control",defaultValue:null!==(a=this.props.pioi)&&void 0!==a?a:"",onChange:this.catchInputs})]})]}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col-12",children:[Object(fc.jsx)("label",{children:"Tratamiento oftalmico"}),Object(fc.jsx)("textarea",{name:"txoftalmico",className:"form-control",defaultValue:null!==(s=this.props.txoftalmico)&&void 0!==s?s:"",onChange:this.catchInputs})]})})]})}}]),a}(bc.Component),or=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(){var e;Object(Nc.a)(this,a);for(var s=arguments.length,c=new Array(s),n=0;n<s;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target,s=a.name,c=a.type,n=a.value,r=a.checked,i=e.props.onChangeInput,l=n;"checkbox"===c&&(l=r),"text"===c&&(l=n.toLowerCase()),"number"===c&&("ejeod"===s||"ejeoi"===s?l=parseInt(n):(l=(l=parseFloat(n)).toFixed(2),l=parseFloat(l))),i&&i(s,l)},e}return Object(yc.a)(a,[{key:"render",value:function(){var e=this.props,t=e.readOnly,a=void 0!==t&&t,s=e.cilindrod,c=e.cilindroi,n=e.esferaod,r=e.esferaoi,i=e.ejeod,l=e.ejeoi,o=e.adiciond,d=e.adicioni,j=e.adicion_media_od,u=e.adicion_media_oi,m=e.dpod,b=e.dpoi,h=e.alturaod,x=e.alturaoi,p=e.lcmarca,O=e.lcgod,f=e.lcgoi,g=e.showContactGlasses,v=void 0===g||g;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("table",{className:"table",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"#"}),Object(fc.jsx)("th",{children:"Esfera"}),Object(fc.jsx)("th",{children:"Cilindro"}),Object(fc.jsx)("th",{children:"Eje"}),Object(fc.jsx)("th",{children:"Adici\xf3n"}),Object(fc.jsx)("th",{children:"Adici\xf3n media"}),Object(fc.jsx)("th",{children:"D/P"}),Object(fc.jsx)("th",{children:"Altura"})]})}),Object(fc.jsxs)("tbody",{children:[Object(fc.jsxs)("tr",{children:[Object(fc.jsxs)("td",{children:[Object(fc.jsx)("i",{className:"fa fa-eye mr-1",title:"Ojo derecho"}),Object(fc.jsx)("span",{className:"text-sm d-block",children:"Derecho"})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"esferaod",min:"-20",max:"20",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==n&&void 0!==n?n:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==n&&void 0!==n?n:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"cilindrod",min:"-20",max:"0",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==s&&void 0!==s?s:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==s&&void 0!==s?s:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"ejeod",min:"0",max:"180",step:"1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,placeholder:"\xb0",defaultValue:i?parseInt(i):"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==i&&void 0!==i?i:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"adiciond",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==o&&void 0!==o?o:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==o&&void 0!==o?o:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"adicion_media_od",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==j&&void 0!==j?j:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==j&&void 0!==j?j:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"dpod",min:"40",max:"80",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==m&&void 0!==m?m:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==m&&void 0!==m?m:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"alturaod",min:"0",max:"35",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==h&&void 0!==h?h:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==h&&void 0!==h?h:""})]})]}),Object(fc.jsxs)("tr",{children:[Object(fc.jsxs)("td",{children:[Object(fc.jsx)("i",{className:"fa fa-eye ml-1",title:"Ojo izquierdo"}),Object(fc.jsx)("span",{className:"text-sm d-block",children:"Izquierdo"})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"esferaoi",min:"-20",max:"20",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==r&&void 0!==r?r:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==r&&void 0!==r?r:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"cilindroi",min:"-20",max:"0",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==c&&void 0!==c?c:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==c&&void 0!==c?c:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"ejeoi",min:"0",max:"180",step:"1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,placeholder:"\xb0",defaultValue:l?parseInt(l):"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==l&&void 0!==l?l:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"adicioni",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==d&&void 0!==d?d:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==d&&void 0!==d?d:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"adicion_media_oi",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==u&&void 0!==u?u:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==u&&void 0!==u?u:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"dpoi",min:"40",max:"80",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==b&&void 0!==b?b:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==b&&void 0!==b?b:""})]}),Object(fc.jsxs)("td",{className:"text-right",children:[Object(fc.jsx)("input",{type:"number",name:"alturaoi",min:"0",max:"35",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==x&&void 0!==x?x:"",onChange:this.catchInputs}),Object(fc.jsx)("h5",{className:"d-none d-print-block",children:null!==x&&void 0!==x?x:""})]})]})]})]}),v&&Object(fc.jsx)("ul",{className:"list-group d-print-none mt-4",children:Object(fc.jsxs)("li",{className:"list-group-item",children:[Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col-md-12",children:["Lente de contacto",Object(fc.jsx)("input",{type:"text",name:"lcmarca",maxLength:"70",className:a?"form-control disabled":"form-control",disabled:!!a,defaultValue:null!==p&&void 0!==p?p:"",onChange:this.catchInputs})]})}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Derecho"}),Object(fc.jsx)("input",{type:"text",name:"lcgod",maxLength:"30",className:a?"form-control disabled":"form-control",disabled:!!a,defaultValue:O||"",onChange:this.catchInputs})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("i",{className:"fa fa-eye"})," ",Object(fc.jsx)("label",{children:"Izquierdo"}),Object(fc.jsx)("input",{type:"text",name:"lcgoi",maxLength:"30",className:a?"form-control disabled":"form-control",disabled:!!a,defaultValue:f||"",onChange:this.catchInputs})]})]})]})})]})}}]),a}(bc.Component),dr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(){var e;Object(Nc.a)(this,a);for(var s=arguments.length,c=new Array(s),n=0;n<s;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,s)},e}return Object(yc.a)(a,[{key:"render",value:function(){var e;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("label",{htmlFor:"observaciones",children:"Observaciones"}),Object(fc.jsx)("textarea",{name:"observaciones",id:"observaciones",className:"form-control",defaultValue:null!==(e=this.props.observaciones)&&void 0!==e?e:"",onChange:this.catchInputs})]})}}]),a}(bc.Component),jr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).getCategory=function(){var e=Object(be.a)(je.a.mark((function e(t){var a,c,n,r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return a=pe("categories",t),e.next=4,he(a);case 4:c=e.sent,n=c.data,r=c.message,n?s.setState({category:n}):console.log("NEW ERROR",r);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleClickCategory=function(e){e.preventDefault();var t=s.props,a=t.onChangeInput,c=t.nameCategory;s.setState({category_id_1:0,category_id_2:0,category_id_3:0,category_list_2:[],category_list_3:[],codesItems:{},category:{}}),a(Object(N.a)({},c,null))},s.handleCategoryChange=function(e){var t=e.target,a=t.name,c=t.value,n=s.props,r=n.onChangeInput,i=n.nameCategory,l=s.state.category_list;switch(a){case"category_id_1":for(var o in l)if(l[o].id===parseInt(c)){s.setState({category_id_1:parseInt(c),category_id_3:0,category_list_2:l[o].sons,category_list_3:[]});break}break;case"category_id_2":c&&s.state.category_list_2.map((function(e){return e.id===1*c&&s.setState({category_id_2:parseInt(c),category_list_3:e.sons}),null}));break;case"category_id_3":r(Object(N.a)({},i,parseInt(c)));break;default:s.setState(Object(N.a)({},a,parseInt(c)))}},s.state={category_list:[],category_list_2:[],category_list_3:[],category_id_1:0,category_id_2:0,category_id_3:0,category:{},codesItems:{}},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.category_id,a=e.categories,s=e._getList;a.length?this.setState({category_list:a[0].sons}):s({categoryid:"raiz",search:"lentes",order:"id"}),t&&this.getCategory(t)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,s=a.category_id,c=a.esferaod,n=a.esferaoi,r=a.cilindrod,i=a.cilindroi,l=a.categories,o=this.state.category;if(e.categories!==l&&l.length&&this.setState({category_list:l[0].sons}),e.category_id!==s&&s&&this.getCategory(s),t.category.id!==o.id&&o.id){var d=zn.getCodeGrad(o,c,n,r,i);this.setState({category:o,codesItems:d})}}},{key:"render",value:function(){var e=this.props,t=e.category_id,a=e.title,s=e.esferaod,c=e.esferaoi,n=e.cilindrod,r=e.cilindroi,i=e.handleCodesItems,l=this.state,o=l.codesItems,d=l.category_id_1,j=l.category_id_2,u=l.category_id_3,m=l.category_list_2,b=l.category_list_3,h=l.category_list;return Object(fc.jsx)("div",{className:"card border border-info rounded d-print-none",children:Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)("h3",{className:"card-title text-success m-2",children:a}),t?Object(fc.jsxs)(bc.Fragment,{children:[o.code+o.od===o.code+o.oi?Object(fc.jsxs)("p",{className:"card-text",children:[Object(fc.jsx)("label",{children:"Lente"}),": ",o.code+o.od]}):Object(fc.jsxs)("div",{className:"row card-text",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Lente Derecho"}),Object(fc.jsx)("br",{})," ",o.code+o.od]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Lente Izquierdo"}),Object(fc.jsx)("br",{})," ",o.code+o.oi]})]}),i?Object(fc.jsx)("p",{className:"card-text text-right",children:Object(fc.jsxs)("button",{className:"btn btn-info",onClick:function(e){e.preventDefault(),i({code:o.code,od:o.od,oi:o.oi})},children:[Object(fc.jsx)("i",{className:"fas fa-check mr-2"}),"Siguiente"]})}):null,this.props.update?Object(fc.jsx)("p",{className:"card-text text-right",children:Object(fc.jsx)("button",{className:"btn btn-outline-info btn-sm card-link mt-2",onClick:this.handleClickCategory,children:"Cambiar"})}):null]}):Object(fc.jsxs)(bc.Fragment,{children:[h.length?Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:"Tipo"})}),Object(fc.jsxs)("select",{name:"category_id_1",className:"custom-select",defaultValue:null!==d&&void 0!==d?d:"",onChange:this.handleCategoryChange,children:[Object(fc.jsx)("option",{value:"0",children:"-- Seleccione el tipo --"}),h.map((function(e){return e.meta&&e.meta.rangoInf<=s&&s<=e.meta.rangoSup&&e.meta.rangoInf<=c&&c<=e.meta.rangoSup&&e.meta.cil<=n&&e.meta.cil<=r?Object(fc.jsx)("option",{value:e.id,children:e.name},e.id):null}))]})]}):null,d&&m.length?Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:"Material"})}),Object(fc.jsxs)("select",{name:"category_id_2",className:"custom-select",defaultValue:null!==j&&void 0!==j?j:"",onChange:this.handleCategoryChange,children:[Object(fc.jsx)("option",{value:"0",children:"-- Seleccione el material --"}),m.map((function(e){var t;return!!(e.meta&&e.meta.rangoInf<=s&&s<=e.meta.rangoSup&&e.meta.rangoInf<=c&&c<=e.meta.rangoSup)&&Object(fc.jsx)("option",{value:null!==(t=e.id)&&void 0!==t?t:"",children:e.name},e.id)}))]})]}):null,d&&j&&b.length?Object(fc.jsxs)("div",{className:"input-group mb-3",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsx)("span",{className:"input-group-text",children:"Tratamiento"})}),Object(fc.jsxs)("select",{name:"category_id_3",className:"custom-select",defaultValue:null!==u&&void 0!==u?u:"",onChange:this.handleCategoryChange,children:[Object(fc.jsx)("option",{value:"0",children:"-- Seleccione el tratamiento --"}),b.map((function(e){var t;return Object(fc.jsx)("option",{value:null!==(t=e.id)&&void 0!==t?t:"",children:e.name},e.id)}))]})]}):null]})]})})}}]),a}(bc.Component),ur={_getList:pt.getListCategories},mr=Object(n.b)((function(e){return{categories:e.category.list}}),ur)(jr),br={_save:Sa.saveContact},hr=Object(n.b)((function(e){return{messages:e.contact.messages}}),br)((function(e){var t,a=e.title,s=void 0===a?"contacto":a,c=e.name,n=e.messages,r=e.handleCancel,i=e._save,o=Object(bc.useState)(Jn.dataPrimary),d=Object(mc.a)(o,2),j=d[0],u=d[1],m=j.name,b=j.telnumbers,h=j.birthday,x=j.email,p=j.gender,O=function(e){Jn.changeDataInput(e.target,j,u)};return Object(bc.useEffect)((function(){u(Object(l.a)(Object(l.a)({},j),{},{name:c}))}),[c]),Object(fc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(fc.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(fc.jsxs)("div",{className:"modal-content",children:[Object(fc.jsxs)("div",{className:"modal-header",children:[Object(fc.jsxs)("h5",{className:"modal-title text-primary text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-plus mr-1"}),"Crear nuevo ",s]}),Object(fc.jsx)("button",{type:"button",className:"close",onClick:r,children:Object(fc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(fc.jsxs)("div",{className:"modal-body",children:[n.length?Object(fc.jsx)(fc.Fragment,{children:n.map((function(e,t){var a=e.type,s=e.text;return Object(fc.jsxs)("div",{className:"alert alert-".concat("error"===a?"danger":"success"===a?a:"warning"),children:[Object(fc.jsx)("i",{className:"fas fa-info mr-1"}),s]},t)}))}):null,Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsxs)("label",{children:["Nombre del ",s]}),Object(fc.jsx)("input",{type:"text",className:"form-control text-uppercase",placeholder:"Nombre del paciente",name:"name",autoComplete:"off",required:"required",pattern:"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*",minLength:"8",defaultValue:null!==m&&void 0!==m?m:"",onChange:O})]}),Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"E-mail"}),Object(fc.jsx)("input",{type:"email",className:"form-control",name:"email",defaultValue:null!==x&&void 0!==x?x:"",onChange:O})]}),Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Telefono celular"}),Object(fc.jsx)("input",{type:"tel",placeholder:"Telefono celular",className:"form-control",name:"telnumbers",pattern:"^[\\d]{10}$",maxLength:"10",defaultValue:null!==(t=null===b||void 0===b?void 0:b.t_movil)&&void 0!==t?t:"",onChange:O})]}),Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Fecha de naciemiento"}),Object(fc.jsx)("input",{type:"date",className:"form-control",name:"birthday",defaultValue:null!==h&&void 0!==h?h:"",onChange:O})]}),Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"G\xe9nero"}),Object(fc.jsxs)("select",{className:"custom-select",name:"gender",onChange:O,defaultValue:null!==p&&void 0!==p?p:"",children:[Object(fc.jsx)("option",{value:"male",children:"Hombre"}),Object(fc.jsx)("option",{value:"female",children:"Mujer"})]})]})]}),Object(fc.jsx)("div",{className:"modal-footer",children:Object(fc.jsxs)("div",{className:"btn-group",children:[r?Object(fc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:r,children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"cancelar"]}):null,Object(fc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Jn.handleVerificationData(j,e).result}(!0),t=Object(l.a)(Object(l.a)({},j),{},{telnumbers:JSON.stringify(j.telnumbers)});if(!e)return!1;Jn.saveContact(s,t,i)},disabled:!m||!b||!h||!x,children:[Object(fc.jsx)("i",{className:"fas fa-save"}),"Guardar"]})]})})]})})})})),xr=function(e){var t=e.contacts,a=void 0===t?[]:t,s=e.title,c=e.text,n=e.left,r=void 0===n?"5.9rem":n,i=e.showNew,l=void 0!==i&&i,o=e.meta,d=e.perPage,j=void 0===d?10:d,u=e.handleSelected,m=e.handleNew;return Object(fc.jsx)("div",{className:"position-absolute overflow-auto",style:{left:r,height:l?"0rem":"12rem",zIndex:"10",width:"100%",maxWidth:"30rem"},children:Object(fc.jsx)("ul",{className:"list-group",children:a.length?Object(fc.jsxs)(fc.Fragment,{children:[a.map((function(e){return 2===e.id?Object(fc.jsxs)("li",{className:"list-group-item text-capitalize",children:[Object(fc.jsx)("i",{className:"fas fa-user mr-1 text-secondary"}),e.nombre]},e.id):Object(fc.jsx)("li",{className:"list-group-item text-capitalize",children:Object(fc.jsxs)("a",{href:"#selecte",className:"text-indigo",onClick:function(t){return function(e,t){e.preventDefault(),u(t)}(t,e)},children:[Object(fc.jsx)("i",{className:"fas fa-user mr-1"}),e.nombre]})},e.id)})),o.total>j?Object(fc.jsxs)("li",{className:"list-group-item text-muted",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Existen mas registros, sea mas espesifico"]}):null]}):!l&&m?Object(fc.jsx)("li",{className:"list-group-item",children:Object(fc.jsxs)("a",{href:"\xb7create",onClick:function(e){return function(e){e.preventDefault(),m()}(e)},children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1 text-dark"}),Object(fc.jsxs)("label",{children:["El ",s,":"]}),Object(fc.jsx)("span",{className:"text-uppercase text-dark font-weight-bold ml-1",children:c}),", no existe.",Object(fc.jsx)("span",{className:"badge badge-dark ml-2",children:"Registrar"})]})}):null})})},pr={_getListContacts:Sa.getListContacts,_setListContact:Sa.setListContact,_getContact:Sa.getContact},Or=Object(n.b)((function(e){var t=e.contact;return{contacts:t.list,contact:t.contact,meta:t.metaList}}),pr)((function(e){var t=e.contact,a=e.readOnly,s=void 0!==a&&a,n=e.title,r=void 0===n?"contacto":n,i=e.contacts,l=e.left,o=e.legend,d=e.meta,j=e._getListContacts,u=e._setListContact,m=e._getContact,b=Object(bc.useState)(""),h=Object(mc.a)(b,2),x=h[0],p=h[1],O=Object(bc.useState)(!1),f=Object(mc.a)(O,2),g=f[0],v=f[1],N=Object(bc.useState)(""),y=Object(mc.a)(N,2),S=y[0],C=y[1],_=function(e){u({result:{list:[],metaList:{}}}),m(e.id),p(""),v(!1)};return Object(bc.useEffect)((function(){var e=null;x.length>2&&(S&&clearTimeout(S),e=setTimeout((function(){j({type:0,search:x,itemsPage:10}),C("")}),1e3),C(e))}),[x]),Object(bc.useEffect)((function(){return function(){u({result:{list:[],metaList:{},contact:{}}})}}),[]),Object(fc.jsxs)("div",{className:"w-100 d-block",children:[o&&!t.id?Object(fc.jsxs)("span",{className:"text-sm text-muted ml-4 w-100 d-block",children:[Object(fc.jsx)("label",{children:"Primero:"})," ",o]}):null,Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsxs)("span",{className:"input-group-text text-capitalize",children:[Object(fc.jsx)("i",{className:"fas fa-user mr-2"})," ",r]})}),t.id?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("span",{className:"form-control bg-light",children:[t.nombre.toUpperCase(),t.email&&!/.*@domain(.com)?/gim.exec(t.email)?Object(fc.jsxs)("span",{className:"badge badge-secondary mx-1",children:[Object(fc.jsx)("i",{className:"fas fa-envelope mr-1"}),t.email]}):null,t.edad?Object(fc.jsxs)("span",{className:"badge badge-secondary ml-1",children:[Object(fc.jsx)("i",{className:"fas fa-calendar mr-1"}),t.edad," a\xf1os"]}):null]}),s?null:Object(fc.jsx)("div",{className:"float-right",children:Object(fc.jsxs)("div",{className:"btn-group btn-sm d-print-none",children:[Object(fc.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(){return _({})},title:"Cambiar",children:Object(fc.jsx)("i",{className:"fas fa-exchange-alt"})}),Object(fc.jsx)(c.b,{to:"/contactos/"+t.id,className:"btn bg-indigo btn-sm",title:"Editar",children:Object(fc.jsx)("i",{className:"fas fa-edit"})})]})})]}):Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("input",{type:"text",className:"form-control text-capitalize",value:x,disabled:!!t.id,onChange:function(e){var t=e.target.value;p(t),v(!1)}}),S?Object(fc.jsx)("div",{className:"float-right px-4",children:Object(fc.jsx)("div",{className:"spinner-border text-indigo"})}):null,x&&!i.length&&g?Object(fc.jsx)("div",{className:"w-100 mt-4",children:Object(fc.jsx)("div",{className:"row justify-content-center",children:Object(fc.jsxs)("div",{className:"col-12 col-md-8 col-lg-5",children:[Object(fc.jsxs)("h4",{className:"mb-4 text-center",children:[Object(fc.jsx)("i",{className:"fas fa-user mr-1"}),"Registrar nuevo",r]}),Object(fc.jsx)(hr,{title:r,name:x,handleCancel:function(e){return _({})}})]})})}):x.length>2&&!S?Object(fc.jsx)("div",{className:"w-100 d-block position-static",children:Object(fc.jsx)(xr,{contacts:i,title:r,text:x,showNew:g,left:l,meta:d,perPage:10,handleNew:function(e){return v(!0)},handleSelected:_})}):null]})]})]})}));function fr(e){var t=e.esferaod,a=e.esferaoi,s=e.cilindrod,c=e.cilindroi,r=e.ejeod,i=e.ejeoi,l=e.adiciond,o=e.adicioni,d=e.adicion_media_od,j=e.adicion_media_oi,u=e.dpod,m=e.dpoi,b=e.alturaod,h=e.alturaoi,x=e.diagnostico,p=e.presbicie,O=e.paciente,f=Object(n.d)((function(e){return e.config})).list;return Object(fc.jsxs)("div",{className:"d-none d-print-block fixed-top",children:[Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-2",children:Object(fc.jsx)("img",{src:"/img/logo_430.jpg",className:"img-thumbnail rounded",width:"120px",alt:"logo"})}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("h1",{className:"text-center display-3",children:"\xd3ptica Madero"}),Object(fc.jsx)("div",{className:"row",children:f.map((function(e){return Object(fc.jsxs)("div",{className:"col",children:[console.log(e),Object(fc.jsx)("h5",{className:"text-capitalize",children:e.data.name}),Object(fc.jsx)("label",{className:"text-capitalize mx-2",children:e.data.address}),Object(fc.jsxs)("span",{children:["TEL: ",e.data.phone]})]},e.id)}))})]})]}),Object(fc.jsxs)("div",{className:"row py-3",children:[Object(fc.jsxs)("div",{className:"col text-left",children:[Object(fc.jsx)("label",{className:"mr-2",children:"Paciente"}),Object(fc.jsx)("span",{className:"text-uppercase",children:O.nombre})]}),Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("div",{className:"text-right",children:wc()().format("LLL")})})]}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)(or,{esferaod:null!==t&&void 0!==t?t:"",esferaoi:null!==a&&void 0!==a?a:"",cilindrod:null!==s&&void 0!==s?s:"",cilindroi:null!==c&&void 0!==c?c:"",ejeod:null!==r&&void 0!==r?r:"",ejeoi:null!==i&&void 0!==i?i:"",adiciond:null!==l&&void 0!==l?l:"",adicioni:null!==o&&void 0!==o?o:"",adicion_media_od:null!==d&&void 0!==d?d:"",adicion_media_oi:null!==j&&void 0!==j?j:"",dpod:null!==u&&void 0!==u?u:"",dpoi:null!==m&&void 0!==m?m:"",alturaod:null!==b&&void 0!==b?b:"",alturaoi:null!==h&&void 0!==h?h:"",showContactGlasses:!1})})}),Object(fc.jsxs)("div",{className:"row pt-2",children:[Object(fc.jsxs)("div",{className:"col-6 left",children:[Object(fc.jsx)("label",{className:"mr-2",children:"Diagnostico:"}),x]}),Object(fc.jsxs)("div",{className:"col-3 text-right",children:[Object(fc.jsx)("label",{className:"mr-2",children:"Presbicie:"}),p?"SI":"NO"]})]}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"card-text text-center mt-4 pt-4",children:[Object(fc.jsx)("h4",{children:"Julio C\xe1rdenas Martinez"}),"Optometrista contactologo",Object(fc.jsx)("br",{}),"UAG",Object(fc.jsx)("br",{}),"CED PROF. 2413419"]})})})]})}var gr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).handleChangeRecomendations=function(e){var t=s.state,a=t.exam,c=t.used,n=Object.keys(e);"object"===typeof e&&s.setState({exam:Object(l.a)(Object(l.a)({},a),{},{category_ii:"category_id"===n[0]?null:a.category_ii},e),used:Object(l.a)(Object(l.a)({},c),{},{recomendaciones:!0})})},s.changeStatus=function(e){var t=e.target.checked;s.handleChangeInput("estado",t)},s.handleChangeInput=function(e,t){var a=s.state,c=a.exam,n=a.used,r=zn.handleTypeInput(e);s.setState({exam:Object(l.a)(Object(l.a)({},c),{},Object(N.a)({},e,t)),used:r?Object(l.a)(Object(l.a)({},n),{},Object(N.a)({},r,!0)):n})},s.handleStatus=function(){s.setState({status:!s.state.status})},s.handleSave=function(e){e.preventDefault();var t=s.state.exam,a=t.id,c=t.cilindrod,n=t.cilindroi,r=t.ejeod,i=t.ejeoi,l=s.props,o=l.contact,d=l.options,j=l.handleClose,u=l._saveExam;if(c<0&&!r||n<0&&!i)return window.Swal.fire("Verificaci\xf3n","El campo CILINDRO esta vacio","warning"),!1;window.Swal.fire({title:"Almacenamiento",text:a?"\xbfEsta seguro de actualizar el examen?":"\xbfEsta seguro de crear un nuevo examen?",icon:"question",showCancelButton:!0,confirmButtonText:a?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){if(!e.dismiss){var t=s.state.exam,c=o.f_nacimiento?wc()().diff(o.f_nacimiento,"years"):0,n=c<1||!c?0:c;t.contact_id=o.id,t.edad=t.edad?t.edad:n,t.status=t.estado,delete t.estado,t.category_id||(t.category_id=null),t.category_ii||(t.category_ii=null),u({id:a,data:t,options:d}),j(!0)}}))},s.getExam=function(){var e,t=s.props,a=t.exam,c=t._setContact;a.id&&(console.log("[Orus System] Procesando examen",a.id),s.setState({exam:Object(l.a)(Object(l.a)({},a),{},{category_id:a.category_primary?a.category_primary.id:null,category_ii:a.category_secondary?a.category_secondary.id:null}),load:!1,panel:0,used:{generales:!0,interrogatorios:!0,keraRet:!0,diabetes:!0,agudeza:!0,diagnostico:!0,graduacion:!0,observaciones:!0,recomendaciones:!0}}),c(null!==(e=a.paciente)&&void 0!==e?e:{id:0}))},s.state={exam:{id:0,edad:20},panel:0,used:{generales:!1,interrogatorios:!1,keraRet:!1,diabetes:!1,agudeza:!1,diagnostico:!1,graduacion:!1,observaciones:!1,recomendaciones:!1}},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){this.getExam()}},{key:"componentDidUpdate",value:function(e){var t=this.props.contact,a=this.state.exam;e.contact.id===t.id||a.id||this.setState({exam:Object(l.a)(Object(l.a)({},a),{},{edad:t.edad})})}},{key:"render",value:function(){var e,t,a,s,c,n,r,i,l,o,d,j,u,m,b,h,x,p,O,f,g,v,N,y,S,C,_,w,k,E,L,I,D,T,A,P,F,M,B,U,z,R,G,V,q,J,$,Y,H,Z,Q,X,W,K,ee,te,ae,se,ce,ne,re,ie,le,oe,de,je,ue,me,be,he,xe,pe,Oe,fe,ge,ve,Ne,ye,Se,Ce,_e,we,ke,Ee,Le,Ie,De,Te,Ae,Pe,Fe,Me,Be,Ue,ze=this,Re=this.state,Ge=Re.exam,Ve=Re.panel,qe=Re.used,Je=this.props,$e=Je.contact,Ye=Je.handleClose;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"card card-info card-outline d-print-none",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h3",{className:"card-title text-info",children:[Object(fc.jsx)("i",{className:"fas fa-notes-medical mr-1"}),Ge.id?Object(fc.jsxs)("label",{children:["Examen ",Object(fc.jsxs)("span",{className:"badge badge-info",children:["#",Ge.id]})]}):"Nuevo examen"]})}),Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)(Or,{readOnly:!!Ge.id,title:"paciente",legend:"Busque el paciente por nombre para crear un nuevo examen",left:"6.5rem",edad:Ge.edad,handleChangeContact:function(e){return ze.setState({paciente:e})}}),$e.id?Object(fc.jsxs)("div",{className:"row my-4",children:[Object(fc.jsx)("div",{className:"col",children:Ge.id?Object(fc.jsxs)("div",{className:"custom-control custom-switch ",children:[Object(fc.jsx)("input",{name:"estado",type:"checkbox",className:"custom-control-input",id:"estado",checked:Ge.estado,onChange:this.changeStatus}),Object(fc.jsxs)("label",{className:Ge.estado?"custom-control-label text-muted":"custom-control-label text-info",htmlFor:"estado",children:[Object(fc.jsx)("i",{className:Ge.estado?"fas fa-folder mr-1":"fas fa-folder-open mr-1"}),Ge.estado?"Examen terminado":"Examen en proceso"]})]}):null}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsxs)("label",{children:[Object(fc.jsx)("i",{className:"fas fa-calendar mr-1"}),"Creado:"]}),Object(fc.jsx)("span",{className:"ml-1",children:wc()(Ge.created_at).format("LL")})]}),Ge.edad!==$e.edad||!$e.edad&&!Ge.id?Object(fc.jsxs)("div",{className:"col col-sm-12 input-group",children:[Object(fc.jsx)("label",{className:"input-group-prepend mr-2",children:"Edad"}),Object(fc.jsx)("input",{type:"number",className:Ge.edad?"form-control text-right mr-2":"form-control text-right mr-2 bg-info",defaultValue:Ge.edad,placeholder:"Escriba la edad actual",onChange:function(e){var t=e.target.value,a=parseInt(t);a&&ze.handleChangeInput("edad",a)},min:"1",max:"120"})]}):null]}):null]}),$e.id?Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-2",children:Object(fc.jsxs)("div",{className:"nav flex-column nav-tabs",children:[Object(fc.jsxs)("a",{className:Ve?"nav-link":"nav-link text-bold active",href:"#general",onClick:function(e){e.preventDefault(),ze.setState({panel:0})},children:[Object(fc.jsx)("i",{className:qe.generales?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Generales ",qe.generales?"T":"F"]}),Object(fc.jsxs)("a",{className:1===Ve?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),ze.setState({panel:1})},children:[Object(fc.jsx)("i",{className:qe.interrogatorios?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Interrogatorio"]}),Object(fc.jsxs)("a",{className:2===Ve?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),ze.setState({panel:2})},children:[Object(fc.jsx)("i",{className:qe.keraRet?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Keratometria"]}),Object(fc.jsxs)("a",{className:3===Ve?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),ze.setState({panel:3})},children:[Object(fc.jsx)("i",{className:qe.diabetes?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Diabetes"]}),Object(fc.jsxs)("a",{className:4===Ve?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),ze.setState({panel:4})},children:[Object(fc.jsx)("i",{className:qe.agudeza?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Agudeza"]}),Object(fc.jsxs)("a",{className:5===Ve?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),ze.setState({panel:5})},children:[Object(fc.jsx)("i",{className:qe.diagnostico?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Diagnostico"]}),Object(fc.jsxs)("a",{className:6===Ve?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),ze.setState({panel:6})},children:[Object(fc.jsx)("i",{className:qe.graduacion?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Graduaci\xf3n"]}),Object(fc.jsxs)("a",{className:7===Ve?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),ze.setState({panel:7})},children:[Object(fc.jsx)("i",{className:qe.observaciones?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Observaciones"]}),Object(fc.jsxs)("a",{className:8===Ve?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),ze.setState({panel:8})},children:[Object(fc.jsx)("i",{className:qe.recomendaciones?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Recomendaciones"]})]})}),Object(fc.jsxs)("div",{className:"col-10",children:[Ve?null:Object(fc.jsx)(sr,{pc:null!==(e=Ge.pc)&&void 0!==e?e:"",tablet:null!==(t=Ge.tablet)&&void 0!==t?t:"",movil:null!==(a=Ge.movil)&&void 0!==a?a:"",lap:null!==(s=Ge.lap)&&void 0!==s?s:"",lap_time:null!==(c=Ge.lap_time)&&void 0!==c?c:"",pc_time:null!==(n=Ge.pc_time)&&void 0!==n?n:"",tablet_time:null!==(r=Ge.tablet_time)&&void 0!==r?r:"",movil_time:null!==(i=Ge.movil_time)&&void 0!==i?i:"",cefalea:null!==(l=Ge.cefalea)&&void 0!==l?l:"",c_frecuencia:null!==(o=Ge.c_frecuencia)&&void 0!==o?o:"",c_intensidad:null!==(d=Ge.c_intensidad)&&void 0!==d?d:"",frontal:null!==(j=Ge.frontal)&&void 0!==j?j:"",temporal:null!==(u=Ge.temporal)&&void 0!==u?u:"",occipital:null!==(m=Ge.occipital)&&void 0!==m?m:"",generality:null!==(b=Ge.generality)&&void 0!==b?b:"",temporaoi:null!==(h=Ge.temporaoi)&&void 0!==h?h:"",temporaod:null!==(x=Ge.temporaod)&&void 0!==x?x:"",handleGetData:this.handleChangeInput}),1===Ve?Object(fc.jsx)(cr,{interrogatorio:null!==(p=Ge.interrogatorio)&&void 0!==p?p:"",coa:null!==(O=Ge.coa)&&void 0!==O?O:"",aopp:null!==(f=Ge.aopp)&&void 0!==f?f:"",aopf:null!==(g=Ge.aopf)&&void 0!==g?g:"",onChangeInput:this.handleChangeInput}):null,2===Ve?Object(fc.jsx)(nr,{keratometriaoi:null!==(v=Ge.keratometriaoi)&&void 0!==v?v:"",keratometriaod:null!==(N=Ge.keratometriaod)&&void 0!==N?N:"",rsoi:null!==(y=Ge.rsoi)&&void 0!==y?y:"",rsod:null!==(S=Ge.rsod)&&void 0!==S?S:"",onChangeInput:this.handleChangeInput}):null,3===Ve?Object(fc.jsx)(rr,{d_time:null!==(C=Ge.d_time)&&void 0!==C?C:"",d_media:null!==(_=Ge.d_media)&&void 0!==_?_:"",d_test:null!==(w=Ge.d_test)&&void 0!==w?w:"",d_fclod:null!==(k=Ge.d_fclod)&&void 0!==k?k:"",d_fclod_time:null!==(E=Ge.d_fclod_time)&&void 0!==E?E:"",d_fcloi:null!==(L=Ge.d_fcloi)&&void 0!==L?L:"",d_fcloi_time:null!==(I=Ge.d_fcloi_time)&&void 0!==I?I:"",oftalmoscopia:null!==(D=Ge.oftalmoscopia)&&void 0!==D?D:"",onChangeInput:this.handleChangeInput}):null,4===Ve?Object(fc.jsx)(ir,{cvod:null!==(T=Ge.cvod)&&void 0!==T?T:"",cvoi:null!==(A=Ge.cvoi)&&void 0!==A?A:"",avslod:null!==(P=Ge.avslod)&&void 0!==P?P:"",avsloi:null!==(F=Ge.avsloi)&&void 0!==F?F:"",avcgaod:null!==(M=Ge.avcgaod)&&void 0!==M?M:"",avcgaoi:null!==(B=Ge.avcgaoi)&&void 0!==B?B:"",avfod:null!==(U=Ge.avfod)&&void 0!==U?U:"",avfoi:null!==(z=Ge.avfoi)&&void 0!==z?z:"",avf2o:null!==(R=Ge.avf2o)&&void 0!==R?R:"",onChangeInput:this.handleChangeInput}):null,5===Ve?Object(fc.jsx)(lr,{diagnostico:null!==(G=Ge.diagnostico)&&void 0!==G?G:"",presbicie:null!==(V=Ge.presbicie)&&void 0!==V?V:"",piod:null!==(q=Ge.piod)&&void 0!==q?q:"",pioi:null!==(J=Ge.pioi)&&void 0!==J?J:"",txoftalmico:null!==($=Ge.txoftalmico)&&void 0!==$?$:"",onChangeInput:this.handleChangeInput}):null,6===Ve?Object(fc.jsx)(or,{esferaod:null!==(Y=Ge.esferaod)&&void 0!==Y?Y:0,esferaoi:null!==(H=Ge.esferaoi)&&void 0!==H?H:0,cilindrod:null!==(Z=Ge.cilindrod)&&void 0!==Z?Z:0,cilindroi:null!==(Q=Ge.cilindroi)&&void 0!==Q?Q:0,ejeod:null!==(X=Ge.ejeod)&&void 0!==X?X:0,ejeoi:null!==(W=Ge.ejeoi)&&void 0!==W?W:0,adiciond:null!==(K=Ge.adiciond)&&void 0!==K?K:0,adicioni:null!==(ee=Ge.adicioni)&&void 0!==ee?ee:0,adicion_media_od:null!==(te=Ge.adicion_media_od)&&void 0!==te?te:0,adicion_media_oi:null!==(ae=Ge.adicion_media_oi)&&void 0!==ae?ae:0,dpod:null!==(se=Ge.dpod)&&void 0!==se?se:0,dpoi:null!==(ce=Ge.dpoi)&&void 0!==ce?ce:0,alturaod:null!==(ne=Ge.alturaod)&&void 0!==ne?ne:0,alturaoi:null!==(re=Ge.alturaoi)&&void 0!==re?re:0,lcmarca:null!==(ie=Ge.lcmarca)&&void 0!==ie?ie:0,lcgod:null!==(le=Ge.lcgod)&&void 0!==le?le:0,lcgoi:null!==(oe=Ge.lcgoi)&&void 0!==oe?oe:0,onChangeInput:this.handleChangeInput}):null,7===Ve?Object(fc.jsx)(dr,{observaciones:null!==(de=Ge.observaciones)&&void 0!==de?de:"",onChangeInput:this.handleChangeInput}):null,8===Ve?Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)(mr,{category_id:null!==(je=Ge.category_id)&&void 0!==je?je:null,esferaod:null!==(ue=Ge.esferaod)&&void 0!==ue?ue:"",esferaoi:null!==(me=Ge.esferaoi)&&void 0!==me?me:"",cilindrod:null!==(be=Ge.cilindrod)&&void 0!==be?be:"",cilindroi:null!==(he=Ge.cilindroi)&&void 0!==he?he:"",nameCategory:"category_id",nameItem:"item1",title:"Recomendacion principal",onChangeInput:this.handleChangeRecomendations,update:!0})}),Ge.category_id?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)(mr,{category_id:null!==(xe=Ge.category_ii)&&void 0!==xe?xe:null,esferaod:null!==(pe=Ge.esferaod)&&void 0!==pe?pe:"",esferaoi:null!==(Oe=Ge.esferaoi)&&void 0!==Oe?Oe:"",cilindrod:null!==(fe=Ge.cilindrod)&&void 0!==fe?fe:"",cilindroi:null!==(ge=Ge.cilindroi)&&void 0!==ge?ge:"",nameCategory:"category_ii",nameItem:"item2",title:"Recomendacion adicional",onChangeInput:this.handleChangeRecomendations,update:!0})}):null]}):null]})]}):null]}),Object(fc.jsx)("div",{className:"card-footer text-right",children:Object(fc.jsxs)("div",{className:"btn-group",role:"group",children:[Object(fc.jsxs)("a",{href:"#close",className:"btn btn-default",onClick:function(e){e.preventDefault(),Ye()},children:[Object(fc.jsx)("i",{className:Ge.id?"fas fa-arrow-left mr-2":"fas fa-ban mr-2"}),Object(fc.jsx)("strong",{children:Ge.id?"Cancelar":"Cerrar"})]}),Ge.id?Object(fc.jsxs)("button",{className:"btn btn-default",onClick:function(e){e.preventDefault(),window.print()},children:[Object(fc.jsx)("i",{className:"fas fa-print mr-2"}),"Imprimir"]}):null,Object(fc.jsxs)("button",{type:"button",className:$e.id?"btn btn-info":"btn btn-info disabled",onClick:this.handleSave,disabled:!$e.id,children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"}),Object(fc.jsx)("strong",{children:Ge.id?"Actualizar":"Guardar"})]})]})})]}),Object(fc.jsx)(fr,{esferaod:null!==(ve=Ge.esferaod)&&void 0!==ve?ve:"",esferaoi:null!==(Ne=Ge.esferaoi)&&void 0!==Ne?Ne:"",cilindrod:null!==(ye=Ge.cilindrod)&&void 0!==ye?ye:"",cilindroi:null!==(Se=Ge.cilindroi)&&void 0!==Se?Se:"",ejeod:null!==(Ce=Ge.ejeod)&&void 0!==Ce?Ce:"",ejeoi:null!==(_e=Ge.ejeoi)&&void 0!==_e?_e:"",adiciond:null!==(we=Ge.adiciond)&&void 0!==we?we:"",adicioni:null!==(ke=Ge.adicioni)&&void 0!==ke?ke:"",adicion_media_od:null!==(Ee=Ge.adicion_media_od)&&void 0!==Ee?Ee:"",adicion_media_oi:null!==(Le=Ge.adicion_media_oi)&&void 0!==Le?Le:"",dpod:null!==(Ie=Ge.dpod)&&void 0!==Ie?Ie:"",dpoi:null!==(De=Ge.dpoi)&&void 0!==De?De:"",alturaod:null!==(Te=Ge.alturaod)&&void 0!==Te?Te:"",alturaoi:null!==(Ae=Ge.alturaoi)&&void 0!==Ae?Ae:"",lcmarca:null!==(Pe=Ge.lcmarca)&&void 0!==Pe?Pe:"",lcgod:null!==(Fe=Ge.lcgod)&&void 0!==Fe?Fe:"",lcgoi:null!==(Me=Ge.lcgoi)&&void 0!==Me?Me:"",diagnostico:null!==(Be=Ge.diagnostico)&&void 0!==Be?Be:"",paciente:null!==$e&&void 0!==$e?$e:"",presbicie:null!==(Ue=Ge.presbicie)&&void 0!==Ue?Ue:""})]})}}]),a}(bc.Component),vr={_deleteExam:Ha.deleteExam,_saveExam:Ha.saveExam,_setContact:Sa.setContact},Nr=Object(n.b)((function(e){var t=e.exam,a=e.contact;return{messages:t.messages,contact:a.contact}}),vr)(gr),yr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).newExam=function(){var e=s.props,t=e._setListContact,a=e._setContact,c=e.history;s.setState({newOrEdit:!0}),t({result:{list:[],metaList:{}}}),a(),c.push("/consultorio/new")},s.changeStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.id)s.handleSaveExam(e.id,{status:e.estado?0:1});else{var t=s.state,a=t.examSelected,c=t.exam;a&&(s.handleSaveExam(c.id,{status:c.estado?0:1}),s.setState({examSelected:"",exam:{}}))}},s.handleSaveExam=function(e,t){(0,s.props._saveExam)({id:e,data:t,options:s.state.options}),s.setState({load:!0})},s.handleCloseEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=s.state.options,a=Object(l.a)(Object(l.a)({},t),{},{page:1}),c=s.props,n=c.history,r=c._setContact;s.setState({newOrEdit:!1,exam:{},examSelected:"",options:e?a:t,load:!0}),r(),n.push("/consultorio")},s.handleEditItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=s.state.examSelected,a=s.props,c=a.exams,n=a.history,r=null!==e&&void 0!==e?e:t,i=c.filter((function(e){return e.id===r}));i.length?(console.log("[Orus System] Editar usuario",r),s.setState({exam:i[0],newOrEdit:!0,examSelected:r,load:!1}),n.push("/consultorio/".concat(r))):(s.setState({newOrEdit:!1,exam:{},examSelected:"",load:!0}),n.push("/consultorio"))},s.handleSetSelectOptions=function(e){var t,a=e.target,c=a.name,n=a.value,r=s.state.options,i=n;"itemsPage"===c&&(i=parseInt(n)),"date"===c&&(i=n||""),s.setState({options:Object(l.a)(Object(l.a)({},r),{},(t={},Object(N.a)(t,c,i),Object(N.a)(t,"page",1),t)),load:!0})},s.handleChangeCheckbox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.target,c=a.value,n=a.checked;n?s.setState({examSelected:parseInt(c),exam:t}):s.setState({examSelected:"",exam:{}})},s.handleSearch=function(e){var t=s.state.options;s.setState({options:Object(l.a)(Object(l.a)({},t),{},{search:e}),load:!0})},s.handleChangePage=function(e){var t=s.state.options;s.setState({options:Object(l.a)(Object(l.a)({},t),{},{page:e}),load:!0})},s.handleSync=function(){var e=s.state.load;e&&s.getExams(),s.setState({load:!e})},s.handleDelete=function(e,t){var a=s.state.examSelected,c=s.props._deleteExam;if(!a)return window.Swal.fire({title:"Verificacion",text:"Debe de selecionar al menos un examen para eliminar",icon:"warning"}),!1;window.Swal.fire({title:"Eliminar",text:"\xbfEsta seguro de eliminar el examen?",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){"cancel"!==e.dismiss&&(console.log("[Orus System] Enviando datos para eliminar",a),c({id:a})),s.setState({examSelected:"",exam:{}})}))},s.state={newOrEdit:!1,load:!1,options:{page:1,orderby:"created_at",order:"desc",search:"",status:"",itemsPage:10,date:"",branch:"all"},examSelected:"",exam:{}},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e._getExam,s=e._setPageName,c=t.params.id;c?a(c):this.setState({load:!0}),s("consultorio"),this.getBranchs()}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.load,s=this.props,c=s.messages,n=s.exam,r=s._setMessages;t.load!==a&&!0===a&&(console.log("[Orus System] Cargando examenes"),this.getExams(),this.setState({load:!1})),e.exam.id!==n.id&&n.id&&(console.log("[Orus System] Exam en URL",n.id),this.setState({newOrEdit:!0,exam:n,examSelected:n.id,load:!1})),e.messages.length!==c.length&&c.length&&(c.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),r(),this.setState({load:!1}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.meta,s=t.loading,c=t.exams,n=t.branches.filter((function(e){return"branches"===e.name})),r=this.state,i=r.newOrEdit,o=r.options,d=r.examSelected,j=r.exam;return Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-sm-12 col-md-4 col-lg-2 d-print-none",children:[Object(fc.jsxs)("button",{className:"btn bg-info btn-block mb-3",type:"button",disabled:i,onClick:this.newExam,children:[Object(fc.jsx)("i",{className:"fas fa-plus mr-1"}),"Nuevo examen"]}),i?null:Object(fc.jsxs)(Hc,{title:"Filtros",children:[Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(fc.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",defaultValue:o.orderby,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(fc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"date",children:"Fecha"}),Object(fc.jsx)("input",{type:"date",id:"date",name:"date",value:o.date?wc()(o.date).format("YYYY-MM-DD"):"",className:"form-control",onChange:this.handleSetSelectOptions}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-info btn-block text-bold",onClick:function(t){var a=e.state.options;e.setState({options:Object(l.a)(Object(l.a)({},a),{},{date:""}),load:!0})},children:[Object(fc.jsx)("i",{className:"fas fa-trash mr-1"}),"Borrar fecha"]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(fc.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:o.order,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(fc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de examenes"}),Object(fc.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:o.itemsPage,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"10",children:"ver 10"}),Object(fc.jsx)("option",{value:"20",children:"ver 20"}),Object(fc.jsx)("option",{value:"50",children:"ver 50"}),Object(fc.jsx)("option",{value:"100",children:"ver 100"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"status",children:"Estado"}),Object(fc.jsxs)("select",{className:"form-control ",name:"status",id:"status",value:o.status,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"",children:"-- Todos --"}),Object(fc.jsx)("option",{value:"1",children:"Solo terminados"}),Object(fc.jsx)("option",{value:"0",children:"En proceso"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"status",children:"Sucursales"}),Object(fc.jsxs)("select",{className:"form-control text-capitalize",name:"branch",id:"branch",value:o.branch,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"all",children:"-- Todas --"}),n.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.data.name},e.id)}))]})]})]})]}),Object(fc.jsx)("div",{className:"col-sm-12 col-md-8 col-lg-10",children:i?Object(fc.jsx)(Nr,{exam:j,handleClose:this.handleCloseEdit,options:o}):Object(fc.jsx)(Ec,{title:"Lista de examenes",icon:"notes-medical",color:"info",loading:s,meta:a,itemSelected:d,handlePagination:this.handleChangePage,handleSearch:this.handleSearch,handleDeleteItem:this.handleDelete,handleEditItem:this.handleEditItem,handleSync:this.handleSync,handleStatus:this.changeStatus,children:Object(fc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{}),Object(fc.jsx)("th",{children:"Nombre"}),Object(fc.jsx)("th",{children:"Estado"}),Object(fc.jsx)("th",{children:"ESF"}),Object(fc.jsx)("th",{children:"CIL"}),Object(fc.jsx)("th",{children:"EJE"}),Object(fc.jsx)("th",{children:"ADC"}),Object(fc.jsx)("th",{children:"MED"}),Object(fc.jsx)("th",{children:"DP"}),Object(fc.jsx)("th",{children:"ALT"}),Object(fc.jsx)("th",{children:"created_at"===o.orderby?"Registrado":"Actualizado"})]})}),Object(fc.jsx)("tbody",{children:c.length?Object(fc.jsx)(fc.Fragment,{children:c.map((function(t){return Object(fc.jsxs)("tr",{children:[Object(fc.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(fc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:t.id,id:"exam_"+t.id,checked:d===t.id,onChange:function(a){return e.handleChangeCheckbox(a,t)},disabled:t.estado||t.orders.length}),Object(fc.jsx)("label",{htmlFor:"exam_"+t.id,className:"sr-only"})]}),Object(fc.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",children:Object(fc.jsx)("a",{href:"#edit",onClick:function(a){a.preventDefault(),e.handleEditItem(t.id)},children:Object(fc.jsxs)("span",{className:t.estado||t.orders.length?"text-muted":"text-dark text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-user text-sm mr-2"}),t.paciente.nombre.toLowerCase()]})})}),Object(fc.jsx)("td",{className:"text-center",style:{cursor:"pointer"},onClick:function(a){return e.changeStatus(t)},children:t.estado?Object(fc.jsx)("i",{className:"fas fa-clipboard-check text-muted",title:"Terminado"}):Object(fc.jsx)("i",{className:"fas fa-clipboard text-info",title:"En proceso"})}),Object(fc.jsxs)("td",{children:[t.esferaod,"/",t.esferaoi]}),Object(fc.jsxs)("td",{children:[t.cilindrod,"/",t.cilindroi]}),Object(fc.jsxs)("td",{children:[t.ejeod,"/",t.ejeoi]}),Object(fc.jsxs)("td",{children:[t.adiciond,"/",t.adicioni]}),Object(fc.jsxs)("td",{children:[t.adicion_media_od,"/",t.adicion_media_oi]}),Object(fc.jsxs)("td",{children:[t.dpod,"/",t.dpoi]}),Object(fc.jsxs)("td",{children:[t.alturaod,"/",t.alturaoi]}),Object(fc.jsx)("td",{children:wc()("created_at"===o.orderby?t.created_at:t.updated_at).fromNow()})]},t.id)}))}):Object(fc.jsx)("tr",{children:Object(fc.jsx)("th",{className:"text-center text-muted",colSpan:"12",children:"No hay examenes registrados"})})})]})})})]})}},{key:"getExams",value:function(){(0,this.props._getListExams)(this.state.options)}},{key:"getBranchs",value:function(){(0,this.props._getListBranches)({page:1,name:"branches",itemsPage:10})}}]),a}(bc.Component),Sr={_getListExams:Ha.getListExam,_deleteExam:Ha.deleteExam,_setListContact:Sa.setListContact,_saveExam:Ha.saveExam,_getExam:Ha.getExam,_setContact:Sa.setContact,_setMessages:Ha.setMessagesExam,_setPageName:g.changeNamePage,_getListBranches:$s.getListConfig},Cr=Object(n.b)((function(e){var t=e.exam,a=e.config;return{exams:t.list,messages:t.messages,meta:t.metaList,loading:t.loading,exam:t.exam,branches:a.list}}),Sr)(yr),_r={_getList:Ze.getListOrder,_getOrder:Ze.getOrder,_setOrder:Ze.setOrder,_setOptions:Ze.setOptions,_deleteOrder:Ze.deleteOrder,_saveOrder:Ze.saveOrder},wr=Object(n.b)((function(e){var t=e.order;return{orders:t.list,options:t.options,meta:t.metaList,loading:t.loading}}),_r)((function(e){var t=e.orders,a=void 0===t?[]:t,s=e.meta,n=e.options,r=e.loading,i=e._getList,l=e._getOrder,o=e._setOrder,d=e._setOptions,j=e._deleteOrder,u=e._saveOrder,m=Object(bc.useState)({id:0}),b=Object(mc.a)(m,2),h=b[0],x=b[1],p=function(e,t){d({key:e,value:t})},O=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:0};t&&t.preventDefault(),a.id?o(a):h.id&&l(h.id),e.handleChangePanel(null,3)};return Object(bc.useEffect)((function(){i(n)}),[n]),Object(fc.jsx)(Ec,{title:"Listado de pedidos",icon:"clipboard-list",color:"warning",meta:s,itemSelected:h.id,loading:r,defaultSearch:n.search,handlePagination:function(e){return p("page",e)},handleSearch:function(e){return p("search",e)},handleEditItem:O,handleDeleteItem:function(){Pn.handleDeleteOrder(h,n,j),x({id:0})},handleSync:function(){return i(n)},handleStatus:function(){h.id&&h.estado<3&&Pn.handleSaveOrder(h.id,{status:3},n,u),x({id:0})},children:Object(fc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{}),Object(fc.jsx)("th",{children:"Folio"}),Object(fc.jsx)("th",{children:"Cliente"}),Object(fc.jsx)("th",{children:"Estado"}),Object(fc.jsx)("th",{children:"Nota"}),Object(fc.jsx)("th",{children:"created_at"===n.orderby?"Registrado":"Modificado"})]})}),Object(fc.jsx)("tbody",{children:a.length?a.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{children:Object(fc.jsxs)("div",{className:"icheck-primary",children:[Object(fc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"order_"+e.id,checked:h.id===e.id,disabled:e.estado>2,onChange:function(t){return function(e,t){e.checked||(t={id:0}),x(t)}(t.target,e)}}),Object(fc.jsx)("label",{htmlFor:"order_"+e.id,className:"sr-only"})]})}),Object(fc.jsxs)("td",{children:["#",e.id]}),Object(fc.jsx)("td",{className:"mailbox-name text-truncate text-capitalize text-bold",style:{cursor:"pointer"},children:Object(fc.jsx)("a",{href:"#edit",onClick:function(t){return O(t,e)},children:Object(fc.jsxs)("span",{className:e.status>2?"text-muted":"text-dark text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-user text-sm mr-2"}),e.paciente.nombre]})})}),Object(fc.jsxs)("td",{className:"mailbox-subject",children:[Object(fc.jsx)("span",{className:"badge badge-".concat(e.status<3?"primary":"secondary"," mr-2 text-uppercase"),children:Pn.handleStatusString(e.status)}),1===e.status?Object(fc.jsxs)("div",{children:[Object(fc.jsx)("span",{className:"mr-1 text-dark",children:e.laboratorio?e.laboratorio.nombre:"Sin asignar"}),e.laboratorio?"/ "+e.npedidolab:""]}):2===e.status?Object(fc.jsx)("small",{children:e.ncaja?"CAJA: "+e.ncaja:"Caja no asignada"}):e.status?3===e.status?Object(fc.jsx)("small",{className:"text-dark",children:"Sin entregar"}):null:Object(fc.jsx)("small",{children:e.exam?1===e.exam.status?"Examen completado":"Examen no realizado":"Examen no asignado"})]}),Object(fc.jsx)("td",{className:"mailbox-attachment",children:e.nota?Object(fc.jsx)(c.b,{to:"/notas/registro/"+e.nota.id,children:Object(fc.jsx)("span",{className:"badge badge-success",children:e.nota.id})}):"--"}),Object(fc.jsx)("td",{className:"mailbox-date",children:"created_at"===n.orderby?wc()(e.created_at).format("ll"):wc()(e.updated_at).fromNow()})]},e.id)})):Object(fc.jsx)("tr",{children:Object(fc.jsx)("th",{colSpan:"10",className:"text-center",children:"No hay datos para mostrar"})})})]})})})),kr={_saveExam:Ha.saveExam},Er=Object(n.b)((function(e){return{messages:e.exam.messages}}),kr)((function(e){var t,a,s,c,n,r,i,o,d,j,u,m,b,h,x,p=e.exam,O=void 0===p?{}:p,f=e.examEdit,g=void 0!==f&&f,v=e.ChangeInput,y=e._saveExam,S=Object(bc.useState)({esferaod:O.esferaod,esferaoi:O.esferaoi,cilindrod:O.cilindrod,cilindroi:O.cilindroi,ejeod:O.ejeod,ejeoi:O.ejeoi,adiciond:O.adiciond,adicioni:O.adicioni,adicion_media_od:O.adicion_media_od,adicion_media_oi:O.adicion_media_oi,dpod:O.dpod,dpoi:O.dpoi,alturaod:O.alturaod,alturaoi:O.alturaoi,lcmarca:O.lcmarca,lcgod:O.lcgod,lcgoi:O.lcgoi}),C=Object(mc.a)(S,2),_=C[0],w=C[1],k=function(){v("examEdit",!1)};return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("b",{children:["Folio ",Object(fc.jsx)("br",{}),"#",O.id]})}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("b",{children:"Fecha:"}),Object(fc.jsx)("br",{}),Object(fc.jsx)("i",{className:"fas fa-calendar mr-2"}),wc()(O.created_at).format("L")]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("b",{children:"Estado:"}),Object(fc.jsx)("br",{}),O.estado?Object(fc.jsxs)("span",{className:"badge badge-success",children:[Object(fc.jsx)("i",{className:"fas fa-check"})," Terminado"]}):Object(fc.jsxs)("span",{className:"badge badge-secondary",children:[Object(fc.jsx)("i",{className:"fas fa-hourglass"})," Activo"]})]})]}),O.observaciones?Object(fc.jsx)("div",{className:"form-group mt-2",children:Object(fc.jsxs)("div",{className:"callout callout-info",children:[Object(fc.jsxs)("h5",{className:"text-info text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-info"})," Observaciones:"]}),O.observaciones]})}):null,Object(fc.jsx)("div",{className:"row mt-2",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)(or,{esferaod:null!==(t=_.esferaod)&&void 0!==t?t:0,esferaoi:null!==(a=_.esferaoi)&&void 0!==a?a:0,cilindrod:null!==(s=_.cilindrod)&&void 0!==s?s:0,cilindroi:null!==(c=_.cilindroi)&&void 0!==c?c:0,ejeod:null!==(n=_.ejeod)&&void 0!==n?n:0,ejeoi:null!==(r=_.ejeoi)&&void 0!==r?r:0,adiciond:null!==(i=_.adiciond)&&void 0!==i?i:0,adicioni:null!==(o=_.adicioni)&&void 0!==o?o:0,adicion_media_od:_.adicion_media_od,adicion_media_oi:_.adicion_media_oi,dpod:null!==(d=_.dpod)&&void 0!==d?d:0,dpoi:null!==(j=_.dpoi)&&void 0!==j?j:0,alturaod:null!==(u=_.alturaod)&&void 0!==u?u:0,alturaoi:null!==(m=_.alturaoi)&&void 0!==m?m:0,lcmarca:null!==(b=_.lcmarca)&&void 0!==b?b:0,lcgod:null!==(h=_.lcgod)&&void 0!==h?h:0,lcgoi:null!==(x=_.lcgoi)&&void 0!==x?x:0,readOnly:!g,onChangeInput:function(e,t){var a=Object(l.a)(Object(l.a)({},_),{},Object(N.a)({},e,parseFloat(t)));w(a),v("codes",{})}})})}),g?Object(fc.jsx)("div",{className:"text-right mt-2",children:Object(fc.jsxs)("div",{className:"btn-group",children:[Object(fc.jsxs)("button",{className:"btn btn-default",onClick:k,children:[Object(fc.jsx)("i",{className:"fas fa-times mr-1"})," Cerrar"]}),Object(fc.jsxs)("button",{className:"btn btn-info",onClick:function(){window.Swal.fire({title:"Almacenamiento",text:"\xbfEsta seguro de actualizar el examen?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Actualizar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(y({id:O.id,data:_}),k())}))},children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"})," Guardar"]})]})}):null]})}));var Lr={_getList:$t.getListStore,_setList:$t.setListStore},Ir=Object(n.b)((function(e){var t=e.storeItem;return{items:t.list,meta:t.metaList,loading:t.loading}}),Lr)((function(e){var t=e.items,a=e.meta,s=e.item,c=void 0===s?{producto:""}:s,n=e._getList,r=e._setList,i=e.handleItemSelect,l=Object(bc.useState)(c.producto),o=Object(mc.a)(l,2),d=o[0],j=o[1],u=Object(bc.useState)(""),m=Object(mc.a)(u,2),b=m[0],h=m[1],x=Object(bc.useState)(!1),p=Object(mc.a)(x,2),O=p[0],f=p[1],g=function(e){r({result:{list:[],metaList:{}}}),i(e),j(e.producto.toUpperCase())};return Object(bc.useEffect)((function(){var e=null;d.length>2&&!c.store_items_id&&(b&&clearTimeout(b),e=setTimeout((function(){n({search:d,itemsPage:10}),h(""),f(!1)}),1e3),h(e)),!d.length&&t.length&&(b&&clearTimeout(b),r({result:{list:[],metaList:{}}}),f(!1))}),[d]),Object(bc.useEffect)((function(){return function(){r({result:{list:[],metaList:{}}})}}),[]),Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("label",{children:["Producto",O?Object(fc.jsx)("small",{className:"position-absolute text-primary ml-2",style:{zIndex:"101",top:"0"},children:"Buscando..."}):null]}),Object(fc.jsx)("input",{className:"form-control text-uppercase text-truncate",type:"text",placeholder:"Buscar producto",autoComplete:"off",value:d,onChange:function(e){var t=e.target.value;j(t.toLowerCase()),f(!0)}}),t.length&&d.length>2?Object(fc.jsx)("div",{className:"position-absolute shadow p-0 pt-2 pl-1 bg-white rounded w-100 mh-50 overflow-auto",style:{maxHeight:"18rem",zIndex:"100"},children:Object(fc.jsxs)("div",{className:"list-group m-0 list-group-flush",children:[t.sort((function(e,t){return e.cant>t.cant?-1:e.cant<t.cant?1:0})).map((function(e){return function(e,t){if(e.cant!==e.cant_total)return!e.cant&&e.cant_total?Object(fc.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(fc.jsxs)("span",{className:"text-truncate text-uppercase text-muted",children:["[S]-",e.producto]}),Object(fc.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant_total})]},e.id):Object(fc.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(fc.jsx)("span",{className:"text-truncate text-uppercase text-primary",children:e.producto}),Object(fc.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant_total})]},e.id);if(!e.cant_total&&!e.cant)return Object(fc.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(fc.jsxs)("span",{className:"text-truncate text-uppercase text-danger",children:["[X]-",e.producto]}),Object(fc.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant_total})]},e.id);return Object(fc.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(fc.jsx)("span",{className:"text-truncate text-uppercase text-primary",children:e.producto}),Object(fc.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant})]},e.id)}(e,g)})),a.total>10&&Object(fc.jsxs)("a",{href:"#more",className:"list-group-item text-center text-dark text-bold",onClick:function(e){return e.preventDefault()},children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Existen mas registros, sea m\xe1s espesifico"]})]})}):null]})}));var Dr=function(e){var t=Object(n.d)((function(e){return e.users.dataLoggin})),a=e.codeDefault,s=void 0===a?"":a,c=e.cantDefault,r=void 0===c?1:c,i=e.handleAddItem,o=e.handleCloseModal,d=Object(bc.useState)({id:0,producto:s,cantidad:r,precio:0,out:0,inStorage:0,subtotal:0,store_items_id:0,descripcion:"",category:0}),j=Object(mc.a)(d,2),u=j[0],m=j[1],b=Object(bc.useState)(!1),h=Object(mc.a)(b,2),x=h[0],p=h[1],O=function(){m({id:0,producto:"",precio:0,out:0,cantidad:1,inStorage:0,subtotal:0,store_items_id:0,descripcion:"",category:0}),o()},f=function(e,t){m(Object(l.a)(Object(l.a)({},u),{},Object(N.a)({},e,"descripcion"===e?t:parseInt(t))))};return Object(fc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(fc.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(fc.jsxs)("div",{className:"modal-content",children:[Object(fc.jsxs)("div",{className:"modal-header",children:[Object(fc.jsxs)("h5",{className:"modal-title text-primary text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar producto"]}),Object(fc.jsx)("button",{type:"button",className:"close",onClick:function(){return O()},children:Object(fc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(fc.jsx)("div",{className:"modal-body",children:Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col position-relative",children:Object(fc.jsx)(Ir,{item:u,handleItemSelect:function(e){m({id:0,producto:e.producto.toLowerCase(),precio:parseFloat(e.precio),out:e.cantidades,cantidad:1,inStorage:0,subtotal:0,store_items_id:e.id,descripcion:"",category:e.categoria?e.categoria.id:0})}})}),u.store_items_id?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"col-2",children:[Object(fc.jsx)("label",{children:"Cantidad"}),Object(fc.jsx)("input",{type:"number",className:"form-control",placeholder:"Cantidad",value:u.cantidad,min:"0",max:"100",onChange:function(e){var t=e.target;return f("cantidad",t.value)}})]}),Object(fc.jsxs)("div",{className:"col-3",children:[Object(fc.jsx)("label",{children:"Precio"}),Object(fc.jsx)("input",{type:"number",className:"form-control text-right",placeholder:"Precio",min:"0",value:u.precio,onChange:function(e){var t=e.target;return f("precio",t.value)}})]}),x?Object(fc.jsx)("div",{className:"col-12 mt-2",children:Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Agregue una descripcion",value:u.descripcion,onChange:function(e){var t=e.target;return f("descripcion",t.value)}})}):null]}):null]})}),Object(fc.jsx)("div",{className:"modal-footer",children:Object(fc.jsxs)("div",{className:"btn-group",children:[Object(fc.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return O()},children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return p(!x)},disabled:!u.store_items_id,children:[Object(fc.jsx)("i",{className:"fas fa-sticky-note mr-1"}),x?"Cerrar nota":"Abrir nota"]}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm text-bold",disabled:!(u.store_items_id&&u.cantidad&&u.precio),onClick:function(){return function(){if(!Jc.verifyItem(u))return!1;u.inStorage=u.out>=u.cantidad,u.out=u.out>=u.cantidad?0:u.cantidad-u.out,u.subtotal=parseFloat(u.cantidad*u.precio),u.branch_id=t.branch.id,i(u),O()}()},children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"}),"Agregar"]})]})})]})})})},Tr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).handleSetCantItem=function(e,t){var a=s.props,c=a.items;(0,a.ChangeInput)("items",c.map((function(a){return a.store_items_id===e&&(a.cantidad=a.cantidad+t,a.subtotal=a.cantidad*a.precio),a})).filter((function(e){return e.cantidad>0})))},s.handleSetCode=function(e){var t=e.code,a=e.oi,c=e.od;s.setState({itemNew:!0,code:t,cant:a===c?2:1})},s.deleteItem=function(e){var t=s.props,a=t.items,c=t.status,n=void 0===c||c,r=t.ChangeInput,i=a.filter((function(t){return t.store_items_id!==e}));if(!n)return console.error("[Orus System] No se puede eliminar el producto, por estatus",e),!1;r("items",i)},s.handleAddItem=function(e){if(e){var t=s.props,a=t.items,c=t.ChangeInput,n=a.findIndex((function(t){return t.store_items_id===e.store_items_id}));if(-1!==n){var r=a[n].cantidad+e.cantidad,i=e.precio,l=a[n].precio*r;a[n].precio===i?(a[n].cantidad=r,a[n].subtotal=l):a.push(e)}else a.push(e);c("items",a)}},s.state={itemNew:!1,code:"",cant:1},s.total=0,s}return Object(yc.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.itemNew,s=t.code,c=t.cant,n=this.props,r=n.items,i=n.codes,l=n.session,o=n.status,d=void 0===o||o,j=!n.noPrice;return this.total=0,Object(fc.jsxs)("div",{className:"card ",children:[Object(fc.jsxs)("div",{className:"card-header",children:[Object(fc.jsxs)("h3",{className:"card-title",children:[Object(fc.jsx)("i",{className:"fas fa-shopping-cart"})," Pedido"]}),Object(fc.jsx)("div",{className:"card-tools",children:l&&!a?Object(fc.jsxs)("button",{className:d?"btn btn-too btn-primary text-bold":"btn btn-too btn-outline-secondary disabled",disabled:!d,onClick:function(t){e.setState({itemNew:!e.state.itemNew,code:"",cant:1})},children:[Object(fc.jsx)("i",{className:"fas fa-plus mr-1"})," Agregar"]}):null})]}),Object(fc.jsx)("div",{className:"card-body table-responsive p-0",children:Object(fc.jsxs)("table",{className:"table table-sm m-0",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[d?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("th",{style:{width:16}}),Object(fc.jsx)("th",{style:{width:16}})]}):null,Object(fc.jsx)("th",{scope:"col",style:{width:32},children:"cant"}),Object(fc.jsx)("th",{scope:"col",children:"Descripcion"}),j?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("th",{scope:"col",className:"text-right",style:{width:120},children:"Precio"}),Object(fc.jsx)("th",{scope:"col",className:"text-right",style:{width:120},children:"Subtotal"})]}):null,d?Object(fc.jsx)("th",{scope:"col",style:{minWidth:"4rem",maxWidth:"8rem"},children:Object(fc.jsx)("span",{className:"sr-only",children:"acciones"})}):null]})}),Object(fc.jsx)("tbody",{children:r.length?r.map((function(t){return e.total+=1*t.subtotal,Object(fc.jsxs)("tr",{children:[d?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("td",{children:t.cantidad>1?Object(fc.jsx)("i",{className:"fas fa-minus mr-2 text-primary",title:"Quitar",style:{cursor:"pointer"},onClick:function(){return e.handleSetCantItem(t.store_items_id,-1)}}):Object(fc.jsx)("i",{className:"fas fa-minus mr-2 text-muted"})}),Object(fc.jsx)("td",{children:Object(fc.jsx)("i",{className:"fas fa-plus mr-2 text-primary",title:"Agregar",style:{cursor:"pointer"},onClick:function(){return e.handleSetCantItem(t.store_items_id,1)}})})]}):null,Object(fc.jsx)("th",{scope:"row",className:"text-right",children:t.cantidad}),Object(fc.jsxs)("td",{children:[t.inStorage?null:Object(fc.jsx)("i",{className:"text-warning fas fa-circle mr-1"}),Object(fc.jsx)("span",{className:"text-capitalize",children:t.producto}),t.descripcion?Object(fc.jsxs)("span",{className:"text-muted ml-2",children:["(",t.descripcion,")"]}):null]}),j?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("td",{className:"text-right",children:["$ ",parseFloat(t.precio).toFixed(2)]}),Object(fc.jsxs)("td",{className:"text-right",children:["$ ",t.subtotal.toFixed(2)]})]}):null,d?Object(fc.jsx)("td",{className:"d-print-none text-right",children:Object(fc.jsx)("button",{type:"button",className:"btn btn-sm btn-muted",disabled:!d,onClick:function(){return e.deleteItem(t.store_items_id)},children:Object(fc.jsx)("i",{className:"fas fa-trash"})})}):null]},t.store_items_id)})):Object(fc.jsx)("tr",{children:Object(fc.jsxs)("td",{className:"text-center",colSpan:d?7:4,children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Seleccione articulos primero"]})})}),r.length&&j?Object(fc.jsx)("tfoot",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{className:"text-right",colSpan:d?4:2}),Object(fc.jsx)("th",{scope:"row",className:"text-right text-lg",children:"Total"}),Object(fc.jsx)("td",{className:"text-right text-primary text-lg pr-3",children:Object(fc.jsxs)("label",{children:["$ ",this.total.toFixed(2)]})}),d?Object(fc.jsx)("td",{}):null]})}):null]})}),i&&i.code?Object(fc.jsx)("div",{className:"card-footer",children:i.od===i.oi?Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsxs)("label",{className:"m-2",children:[Object(fc.jsx)("i",{className:"fas fa-eye"})," Graduacion"]}),Object(fc.jsx)("span",{className:"text",style:{cursor:"pointer"},onClick:function(){return e.handleSetCode(i)},children:i.code+i.od})]})}):Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsxs)("label",{className:"m-2",children:[Object(fc.jsx)("i",{className:"fas fa-eye"})," Graduacion ojo derecho"]}),Object(fc.jsx)("span",{className:"text",style:{cursor:"pointer"},onClick:function(){return e.handleSetCode(i)},children:i.code+i.od})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsxs)("label",{className:"m-2",children:[Object(fc.jsx)("i",{className:"fas fa-eye"})," Graduacion ojo izquierdo"]}),Object(fc.jsx)("span",{className:"text",style:{cursor:"pointer"},onClick:function(){return e.handleSetCode(i)},children:i.code+i.oi})]})]})}):null,a?Object(fc.jsx)(Dr,{codeDefault:s,cantDefault:c,handleAddItem:this.handleAddItem,handleCloseModal:function(){return e.setState({itemNew:!1})}}):null]})}}]),a}(bc.Component),Ar=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).handleSaveStorage=function(){var e=s.state,t=e.contact_id,a=e.exam_id,c=e.items,n=e.session,r=s.props.contact,i={id:t,contact:{id:r.id,name:r.nombre},exam_id:a,items:c,session:n,created_at:new Date};Pn.addDataTemporary(i),s.handleCancel()},s.handleCancel=function(){var e=s.props,t=e.handleClose,a=e._setContact;s.setState({contact_id:0,items:[],codes:{},exam_id:null,exam:{},examEdit:!1}),t(),a()},s.handleGetCategories=function(e){(0,s.props._getCategory)({id:e})},s.handleChangeInput=function(e,t){"exam"===e&&(t.category_id&&s.handleGetCategories(t.category_id),t.id?s.setState({exam_id:t.id,exam:t,codes:{}}):s.setState({exam_id:0,exam:{},codes:{}})),"codes"===e?s.setState({codes:t}):s.setState(Object(N.a)({},e,t))},s.handleCodeName=function(e){var t="";return e.depende_de?e.depende_de.depende_de?(t=e.depende_de.depende_de.meta.code,t+=e.depende_de.meta.code,t+=e.meta.code):(t=e.depende_de.meta.code,t+=e.meta.code):t=e.meta.code,t},s.getCategories=function(e,t){var a=t.category_id,c=t.esferaod,n=t.esferaoi,r=t.cilindrod,i=t.cilindroi,l=t.id,o=a&&e.id?s.handleCodeName(e):"XX",d="+000000",j="+000000";(r||c)&&(d=c>0?"+":"",d+=c.toFixed(2).toString().replace(".","")+r.toFixed(2).toString().replace("-","").replace(".","")),(i||n)&&(j=n>0?"+":"",j+=n.toFixed(2).toString().replace(".","")+i.toFixed(2).toString().replace("-","").replace(".","")),s.setState({exam_id:l,exam:t,codes:{code:o,od:d,oi:j}})},s.handleSave=function(e){var t=0,a=s.props,c=a.options,n=a._saveOrder,r=a._setContact,i=s.state,l=i.items,o=i.exam_id,d=i.session,j=i.contact_id,u=l.map((function(e){return 4===e.category&&t++,{cant:e.cantidad,price:e.precio,subtotal:e.subtotal,inStorage:e.inStorage,session:e.session,out:e.out,descripcion:e.descripcion,store_items_id:e.store_items_id}}));if(u.length===t)return window.Swal.fire({title:"Verificacion",text:"No hay productos para procesar en un pedido",icon:"warning"}),!1;var m={session:d,contact_id:j,items:JSON.stringify(u),status:0};console.log("[DEBUG ORDER data]",m),o&&(m.exam_id=parseInt(o)),Pn.handleSaveOrder(null,m,c,n,(function(){return r({})}))},s.state={session:xs.getSession(),contact_id:0,items:[],codes:{},exam_id:null,exam:{},examEdit:!1,load:!0},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.contact,a=e.exam;if(t.id){var s,c,n,r=Pn.getDataOneItem(t.id);if(r)this.setState({contact:t,contact_id:t.id,items:null!==(s=r.items)&&void 0!==s?s:[],session:null!==(c=r.session)&&void 0!==c?c:this.state.session,exam:null!==a&&void 0!==a?a:this.state.exam,exam_id:null!==(n=a.id)&&void 0!==n?n:this.state.exam_id})}}},{key:"componentDidUpdate",value:function(e){var t,a,s=this.props,c=s.category,n=s.contact,r=s.exam,i=s.msg_exams,l=s._setMsgExam,o=s._getContact,d=Pn.getDataOneItem(n.id);(e.category.id!==c.id&&this.getCategories(c,this.state.exam),e.msg_exams.length!==i.length&&i.length&&(i.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),l(),o(n.id),this.setState({load:!0})),e.contact.id!==n.id&&n.id)&&this.setState({contact:n,contact_id:n.id,items:null!==(t=d.items)&&void 0!==t?t:[],session:null!==(a=d.session)&&void 0!==a?a:this.state.session});e.exam.id!==r.id&&r.id&&this.setState({exam:r,exam_id:r.id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.contact_id,s=t.items,c=t.exam,n=t.exam_id,r=t.examEdit,i=t.codes,l=t.session,o=this.props,d=o.contact,j=o.load_order,u=o._saveExam;return Object(fc.jsxs)("div",{className:"card card-warning card-outline",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h3",{className:"card-title",children:[Object(fc.jsx)("i",{className:"fas fa-clipboard-list mr-1"}),"Nuevo pedido"]})}),Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)("div",{className:"form-group d-print-none",children:Object(fc.jsx)(Or,{title:"cliente",legend:d.id?null:"Busque el paciente por nombre para crearun nuevo pedido",readOnly:null!==n})}),d.id?Object(fc.jsx)(hc.a.Fragment,{children:null!==n?Object(fc.jsx)(hc.a.Fragment,{children:r?Object(fc.jsx)("div",{className:"form-group",children:Object(fc.jsx)(Er,{id:n,examEdit:!0,exam:c,ChangeInput:this.handleChangeInput})}):Object(fc.jsxs)(hc.a.Fragment,{children:[Object(fc.jsx)("div",{className:"form-group",children:Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("div",{className:"input-group-prepend",children:Object(fc.jsxs)("span",{className:"input-group-text",children:[Object(fc.jsx)("i",{className:"fas fa-notes-medical mr-1"})," ","Examen:"]})}),Object(fc.jsx)("input",{type:"text",className:n?c.observaciones?"form-control text-right pr-2 bg-info text-bold":"form-control text-right pr-2":"form-control text-center",value:n?c.observaciones?n+" [Revise las observaciones]":n:"Sin examen",readOnly:!0}),Object(fc.jsx)("div",{className:"float-right",children:Object(fc.jsxs)("div",{className:"btn-group btn-sm",children:[Object(fc.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(t){return e.handleChangeInput("exam_id",null)},children:Object(fc.jsx)("i",{className:"fas fa-exchange-alt"})}),c.id?Object(fc.jsx)("button",{type:"button",className:"btn btn-info btn-sm",onClick:function(t){return e.handleChangeInput("examEdit",!0)},disabled:r,children:Object(fc.jsx)("i",{className:"fas fa-edit"})}):null]})})]})}),c.id>0&&c.status||!c.id?Object(fc.jsx)(Tr,{items:s,session:l,codes:i,ChangeInput:this.handleChangeInput}):Object(fc.jsx)("span",{className:"alert",children:Object(fc.jsxs)("h5",{className:"w-100 text-center",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),Object(fc.jsx)("span",{className:"text-muted",children:"Es necesario que el examen este terminado para continuar con el pedido"})]})})]})}):Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)(Mn,{exams:d.examenes,allSelect:!0,handleSelectedExam:function(t){return e.handleChangeInput("exam",t)}}),Object(fc.jsxs)("div",{className:"btn-group",children:[Object(fc.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.handleChangeInput("exam",{id:0})},children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Sin examen"]}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return zn.handleSaveExam(d,null,u)},children:[Object(fc.jsx)("i",{className:"fas fa-notes-medical mr-1"}),"Nuevo examen"]})]})]})}):null]}),r?null:Object(fc.jsx)("div",{className:"card-footer",children:Object(fc.jsx)("div",{className:"mailbox-controls text-right",children:Object(fc.jsxs)("div",{className:"btn-group",children:[Object(fc.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:this.handleCancel,children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),a?"Cancelar":"Cerrar"]}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:this.handleSaveStorage,disabled:!a,children:[Object(fc.jsx)("i",{className:"fas fa-clock mr-1"}),"Temporal"]}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-warning btn-sm text-bold",onClick:this.handleSave,disabled:!a||null===n||!s.length,children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"})," Guardar"]})]})})}),j?Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})}}]),a}(bc.Component),Pr={_setContact:Sa.setContact,_getContact:Sa.getContact,_saveExam:Ha.saveExam,_setMsgExam:Ha.setMessagesExam,_saveOrder:Ze.saveOrder,_getCategory:pt.getCategory},Fr=Object(n.b)((function(e){var t=e.contact,a=e.exam,s=e.order,c=e.category;return{load_contact:t.loading,contact:t.contact,exam:a.exam,msg_exams:a.messages,options:s.options,load_order:s.loading,category:c.category}}),Pr)(Ar);function Mr(e){var t=e.status,a=void 0!==t&&t,s=e.lab_id,c=void 0===s?"":s,r=e.npedidolab,i=void 0===r?"":r,l=e.handleChange,o=Object(n.d)((function(e){return e.contact})).suppliers,d=Object(n.c)(),j=function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value,c=s;"lab_id"===a&&(c=parseInt(s)),l&&l(a,c)};return Object(bc.useEffect)((function(){d(Sa.getListSuppliers(1))}),[]),Object(fc.jsxs)("div",{className:"row m-2",children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(fc.jsx)("label",{children:"Laboratorio"}),Object(fc.jsx)("select",{className:a>1?"form-control disabled":"form-control",disabled:a>1,name:"lab_id",defaultValue:c,onChange:j,children:o&&o.length?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("option",{value:"0",children:"Seleccione un proveedor"}),o.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.nombre},e.id)}))]}):Object(fc.jsx)("option",{value:"0",children:"Configure primero los proveedores"})})]})}),Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(fc.jsx)("label",{children:"Folio"}),Object(fc.jsx)("input",{type:"text",className:a>1?"form-control disabled":"form-control",disabled:a>1,name:"npedidolab",defaultValue:i,onChange:j})]})})]})}function Br(e){var t=e.status,a=void 0!==t&&t,s=e.ncaja,c=void 0===s?"":s,n=e.observaciones,r=void 0===n?"":n,i=e.handleChange,l=function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value,c=s;"caja"===a&&(c=parseInt(s)),i&&i(a,c)};return Object(fc.jsxs)("div",{className:"row m-2",children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(fc.jsx)("label",{htmlFor:"lab",children:"Caja"}),Object(fc.jsx)("input",{type:"number",className:a>2?"form-control disabled":"form-control",disabled:a>2,name:"ncaja",min:"1",defaultValue:c,onChange:l})]})}),Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(fc.jsx)("label",{children:"Observaciones"}),Object(fc.jsx)("textarea",{name:"observaciones",className:a>2?"form-control disabled":"form-control",disabled:a>2,defaultValue:r,onChange:l})]})})]})}var Ur=a(69);var zr=function(e){var t=e.sale,a=e.forPaid,s=e.handleClose,c=Object(n.d)((function(e){return e.sales})).listBanks,r=Object(n.c)(),i=Object(bc.useState)({id:0,metodopago:1,metodoname:"efectivo",total:0,bank_id:null,details:null,auth:null}),o=Object(mc.a)(i,2),d=o[0],j=o[1],u=function(e){var t=e.name,a=e.value,s=e.type,c=a;"number"!==s&&"select-one"!==s||(c=parseFloat(a)),j(Object(l.a)(Object(l.a)({},d),{},Object(N.a)({},t,c)))},m=function(){var e=Object(Ur.a)(t.payments),c=0;if(!d.total)return window.Swal.fire({icon:"warning",title:"El total del abono debe ser mayor a 0",showConfirmButton:!1,timer:1500}),!1;if(1!==d.metodopago&&4!==d.metodopago&&0!==d.metodopago){if(!d.bank_id)return window.Swal.fire({icon:"warning",title:"Seleccione un banco",showConfirmButton:!1,timer:1500}),!1;if(d.auth.toString().length<4)return window.Swal.fire({icon:"warning",title:"Espesifique los ultimos 4 numeros de la tarjeta",showConfirmButton:!1,timer:1500}),!1}if(4===d.metodopago&&!d.auth)return window.Swal.fire({icon:"warning",title:"Espesifique el numero de autorizaci\xf3n",showConfirmButton:!1,timer:1500}),!1;e.push(Object(l.a)(Object(l.a)({},d),{},{metodoname:xs.getMethodName(d.metodopago),total:a<d.total?a:d.total})),e.forEach((function(e){return c+=e.total})),s(),r(gs.saveSale({id:t.id,data:Object(l.a)(Object(l.a)({},t),{},{pagado:c,items:JSON.stringify(t.items),payments:JSON.stringify(e)})}))};return Object(bc.useEffect)((function(){r(gs.getListBanks())}),[]),Object(fc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(fc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(fc.jsxs)("div",{className:"modal-content",children:[Object(fc.jsxs)("div",{className:"modal-header",children:[Object(fc.jsx)("h5",{className:"modal-title",children:"Capture el pago"}),Object(fc.jsx)("button",{type:"button",className:"close",onClick:function(){return s()},children:Object(fc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(fc.jsx)("div",{className:"modal-body p-2",children:Object(fc.jsxs)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),m()},children:[Object(fc.jsx)("div",{className:"row mb-2 bg-gray-light",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("h4",{className:"text-center",children:["Por pagar: ",Object(fc.jsxs)("span",{className:"text-success",children:["$ ",a]})]})})}),Object(fc.jsxs)("div",{className:"row my-2",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Metodo de pago"}),Object(fc.jsxs)("select",{name:"metodopago",className:"custom-select text-uppercase",onChange:function(e){var t=e.target;return u(t)},defaultValue:d.metodopago,children:[Object(fc.jsx)("option",{value:"1",children:"Efectivo"}),Object(fc.jsx)("option",{value:"2",children:"Tarjeta de debito"}),Object(fc.jsx)("option",{value:"3",children:"Tarjeta de credito"}),Object(fc.jsx)("option",{value:"4",children:"La marina"}),Object(fc.jsx)("option",{value:"5",children:"Cheque"}),Object(fc.jsx)("option",{value:"6",children:"Transferencia"}),Object(fc.jsx)("option",{value:"0",children:"Otro"})]})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Cantidad"}),Object(fc.jsx)("input",{type:"number",min:"0",className:"form-control text-right",name:"total",onChange:function(e){var t=e.target;return u(t)},autoFocus:!0})]})]}),1!==d.metodopago?Object(fc.jsxs)("div",{className:"row mb-2",children:[Object(fc.jsx)("div",{className:"col",children:4!==d.metodopago&&0!==d.metodopago?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("label",{children:"Banco"}),Object(fc.jsxs)("select",{name:"bank_id",className:"custom-select text-uppercase",onChange:function(e){var t=e.target;return u(t)},children:[Object(fc.jsx)("option",{value:"",children:"--Seleccione un banco--"}),c.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}):d.metodopago?Object(fc.jsx)("h4",{className:"d-bloc text-center mt-4 text-success",children:"LA MARINA"}):Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("label",{children:"Espesifique"}),Object(fc.jsx)("input",{type:"text",name:"details",className:"form-control",onChange:function(e){var t=e.target;return u(t)}})]})}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:4!==d.metodopago?"Ultimos 4 digitos":"N. Autorizaci\xf3n"}),Object(fc.jsx)("input",{type:"text",name:"auth",className:"form-control",onChange:function(e){var t=e.target;return u(t)}})]})]}):null,a<d.total?Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("h4",{className:"text-center mt-4",children:1===d.metodopago?Object(fc.jsxs)(fc.Fragment,{children:["Cambio:",Object(fc.jsxs)("span",{className:"ml-2",children:["$ ",d.total-a]})]}):Object(fc.jsxs)("span",{className:"text-danger",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-2"}),"La cantidad cobrada es mayor al total"]})})})}):null]})}),Object(fc.jsxs)("div",{className:"modal-footer",children:[Object(fc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return s()},children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return m()},disabled:!d.total,children:[Object(fc.jsx)("i",{className:"fas fa-money-bill mr-1"}),"Abonar"]})]})]})})})};function Rr(e){var t=e.sale,a=void 0===t?{}:t,s=e.payed,c=void 0===s?0:s,r=e.order,i=e.text,o=e.btn,d=void 0===o?"primary":o,j=a.items,u=a.descuento,m=a.total,b=void 0===m?0:m,h=a.created_at,x=a.id,p=a.customer,O=a.payments,f=b-c,g=Object(n.d)((function(e){return e.users.dataLoggin})).branch,v=Object(n.c)(),N=0;return Object(fc.jsxs)(fc.Fragment,{children:[console.log("------------",g),Object(fc.jsxs)("button",{className:"btn btn-".concat(d," ml-2 d-print-none"),disabled:!O.length,onClick:function(){v(gs.saveSale({id:a.id,data:Object(l.a)(Object(l.a)({},a),{},{items:JSON.stringify(a.items),payments:null})})),window.print()},children:[Object(fc.jsx)("i",{className:i?"fas fa-print mr-1":"fas fa-print"}),i]}),Object(fc.jsxs)("div",{className:"d-none d-print-block fixed-top bg-white",style:{maxWidth:380},id:"print_sale_"+x,children:[Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("div",{className:"card m-0",children:Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)("h4",{className:"text-right",style:{fontSize:28,fontFamily:"sans-serif"},children:Object(fc.jsxs)("i",{children:[r?"Pedido":"Nota",":"," ",Object(fc.jsx)("strong",{children:r||x})]})}),Object(fc.jsx)("h6",{className:"text-right mb-2",style:{fontSize:18,fontFamily:"sans-serif"},children:Object(fc.jsx)("strong",{children:wc()(h).format("LL")})}),Object(fc.jsx)("h2",{className:"text-center",style:{fontSize:54,fontFamily:"sans-serif"},children:Object(fc.jsx)("center",{children:Object(fc.jsx)("strong",{children:"\xd3ptica Madero"})})}),Object(fc.jsx)("h4",{className:"text-center mb-4",style:{fontSize:22,fontFamily:"sans-serif"},children:Object(fc.jsxs)("em",{children:["Julio Cesar Cardenas Martinez",Object(fc.jsx)("br",{}),Object(fc.jsxs)("span",{className:"text-capitalize",children:["sucursal: ",g.name]}),Object(fc.jsx)("br",{}),Object(fc.jsxs)("span",{children:["Tel: ",g.phone]}),Object(fc.jsx)("br",{}),Object(fc.jsx)("span",{className:"text-capitalize",children:g.address})]})}),Object(fc.jsxs)("h4",{className:"text-uppercase text-center mb-1",style:{fontSize:20,fontFamily:"sans-serif"},children:[p&&p.nombre?p.nombre:"Venta de mostrador",Object(fc.jsx)("br",{}),Object(fc.jsx)("strong",{children:Object(fc.jsx)("em",{style:{fontSize:24},children:p&&p.telefonos?p.telefonos.t_movil?p.telefonos.t_movil:p.telefonos.t_casa?p.telefonos.t_casa:p.telefonos.t_oficina:"--"})})]})]})})})}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col text-center",children:Object(fc.jsx)("h2",{style:{fontSize:36,fontFamily:"sans-serif"},children:Object(fc.jsx)("strong",{children:"Pedido"})})})}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("table",{className:"table",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{style:{fontSize:26,fontFamily:"sans-serif"},children:"Cant"}),Object(fc.jsx)("th",{style:{fontSize:26,fontFamily:"sans-serif"},children:"Descripcion"}),Object(fc.jsx)("th",{style:{fontSize:26,fontFamily:"sans-serif"},children:"Total"})]})}),Object(fc.jsx)("tbody",{children:j.map((function(e,t){var a=parseFloat(e.cant*e.price);return N+=a,Object(fc.jsxs)("tr",{className:"text-capitalize",children:[Object(fc.jsx)("td",{style:{fontSize:22,fontFamily:"sans-serif"},children:e.cant}),Object(fc.jsx)("td",{style:{fontSize:22,fontFamily:"sans-serif"},children:e.producto}),Object(fc.jsx)("td",{className:"text-right",style:{fontSize:24,fontFamily:"sans-serif"},children:a})]},t)}))}),Object(fc.jsx)("tfoot",{children:Object(fc.jsx)("tr",{children:Object(fc.jsxs)("td",{className:"text-right",colSpan:"3",children:[u?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Subtotal: ",Object(fc.jsxs)("label",{children:["$ ",N]})]}),Object(fc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Descuento: ",Object(fc.jsxs)("label",{children:["$ ",u]})]})]}):null,Object(fc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Total: ",Object(fc.jsxs)("label",{children:["$ ",b]})]}),c?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Abonado: ",Object(fc.jsxs)("label",{children:["$ ",c]})]}),f?Object(fc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Saldo: ",Object(fc.jsxs)("label",{children:["$ ",f]})]}):Object(fc.jsx)("div",{className:"text-center d-block w-100 my-3",children:Object(fc.jsx)("h3",{className:"text-muted text-bold",children:"::: Cuenta Pagada :::"})})]}):null]})})})]})})}),Object(fc.jsx)("div",{className:"text-justify text-lg",children:Object(fc.jsxs)("ul",{className:"d-block",style:{fontFamily:"sans-serif"},children:[Object(fc.jsx)("li",{children:"Armazones usados, viejos y/o resecos son responsabilidad del cliente"}),Object(fc.jsx)("li",{children:"Armazones reparados por el cliente pierden garantia de proovedor"})]})})]})]})}function Gr(e){var t=e.nota,a=e.orderId,s=Object(bc.useState)({showPayment:!1,totalPayments:0,toPaid:0}),c=Object(mc.a)(s,2),r=c[0],i=c[1],o=Object(n.c)(),d=Object(n.d)((function(e){return e.sales})).sale;return Object(bc.useEffect)((function(){if(d.id){var e=0;d.payments.forEach((function(t){return e+=parseInt(t.total)})),i(Object(l.a)(Object(l.a)({},r),{},{totalPayments:e,toPaid:parseInt(d.total)-e}))}else(a=t.id)&&o(gs.getSale(a));var a}),[d]),Object(bc.useEffect)((function(){return function(){o(gs.setSale())}}),[]),d&&d.id?Object(fc.jsx)("div",{className:"card",children:Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsxs)("div",{className:"row d-print-none",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Nota:"})," ",d.id]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Total:"})," $",d.total]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Abonado:"})," $",r.totalPayments]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Por pagar:"})," ",Object(fc.jsxs)("span",{className:"text-success text-bold",children:["$",r.toPaid>=0?r.toPaid:0]})]})]}),Object(fc.jsx)("div",{className:"row d-print-none",children:Object(fc.jsx)("div",{className:"col table-responsive",children:Object(fc.jsxs)("table",{className:"table table-sm",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"Folio"}),Object(fc.jsx)("th",{children:"Metodo"}),Object(fc.jsx)("th",{children:"Total"}),Object(fc.jsx)("th",{children:"Fecha"}),Object(fc.jsx)("th",{children:"Recibio"}),Object(fc.jsx)("th",{style:{width:16},children:Object(fc.jsx)("span",{className:"sr-only",children:"DELETE"})})]})}),Object(fc.jsx)("tbody",{children:d.payments.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:e.id}),Object(fc.jsx)("td",{className:"text-uppercase",children:e.metodoname}),Object(fc.jsxs)("td",{children:["$",e.total]}),Object(fc.jsx)("td",{children:e.created_at}),Object(fc.jsx)("td",{children:e.created.name}),Object(fc.jsx)("td",{children:Object(fc.jsx)("button",{type:"button",className:"btn btn-default",onClick:function(){return function(e){var t=e.id,a=e.total,s=e.metodoname;xs.confirm("Realmente desea eliminar el pago ".concat(s,", de ").concat(a),(function(){o(gs.deletePayment({id:t,sale_id:d.id}))}))}(e)},children:Object(fc.jsx)("i",{className:"fas fa-trash"})})})]},e.id)}))})]})})}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col text-right",children:Object(fc.jsxs)("div",{className:"btn-group",children:[Object(fc.jsx)(Rr,{sale:d,order:a,payed:r.totalPayments,text:"Imprimir",btn:"default"}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-primary d-print-none",disabled:!r.toPaid,onClick:function(){i(Object(l.a)(Object(l.a)({},r),{},{showPayment:!0}))},children:[Object(fc.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar"]})]})})}),r.showPayment&&Object(fc.jsx)(zr,{handleClose:function(){i(Object(l.a)(Object(l.a)({},r),{},{showPayment:!1}))},sale:Object(l.a)(Object(l.a)({},d),{},{contact_id:d.customer.id}),forPaid:r.toPaid})]})}):Object(fc.jsxs)("span",{className:"d-block text-center text-dark my-4",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Sin datos de ventas"]})}var Vr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).getOrderData=function(){var e,t=s.props.order;s.setState(Object(l.a)(Object(l.a)({},t),{},{lab_id:null!==(e=t.laboratorio&&t.laboratorio.id)&&void 0!==e?e:0}))},s.handleDeleteOrder=function(){var e=s.props,t=e.order,a=e.options,c=e._deleteOrder;Pn.handleDeleteOrder(t,a,c)},s.handleClose=function(e){var t=s.props._setOrder;e&&e.preventDefault(),t(),s.props.handleChangePanel(null,0)},s.handleChangeInput=function(e,t){s.setState(Object(N.a)({},e,t))},s.handleSave=function(){var e=s.state,t=e.id,a=e.npedidolab,c=e.ncaja,n=e.status,r=e.lab_id,i=e.observaciones,o=e.items,d=s.props,j=d.options,u=d._saveOrder,m=d.currentUser,b=o.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{cant:e.cantidad,price:e.precio})})),h={npedidolab:a,ncaja:c,status:n,observaciones:i,items:JSON.stringify(b),branch_id:m.branch.id};return r&&(h.lab_id=r),1===n&&!r&&toString(a).length?(window.Swal.fire("Verificaci\xf3n","Los campos de laboratorio estan vacios","error"),!1):2!==n||c?void Pn.handleSaveOrder(t,h,j,u):(window.Swal.fire("Verificaci\xf3n","El numero de caja esta vacio","error"),!1)},s.state={id:0,paciente:{},session:null,lab_id:0,npedidolab:"",observaciones:"",ncaja:0,items:[],exam:{},codes:{},status:0,created:{},created_at:null,updated:{},updated_at:null},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){this.getOrderData()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.order;e.order.id!==a.id&&a.id&&this.getOrderData()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e._setOrder,a=e._setSale;t(Je.order),a(ps.sale)}},{key:"render",value:function(){var e,t,a=this,s=this.state,c=s.id,n=s.paciente,r=s.session,i=s.lab_id,l=s.npedidolab,o=s.ncaja,d=s.observaciones,j=s.items,u=s.exam,m=void 0===u?{}:u,b=s.codes,h=s.status,x=s.created,p=s.created_at,O=s.updated,f=s.updated_at,g=this.props,v=g.order,N=g.loading,y=new Date(null!==(e=n.f_nacimiento)&&void 0!==e?e:"")<new Date?wc()(n.f_nacimiento):null,S=Object.values(null!==(t=n.telefonos)&&void 0!==t?t:{}).filter((function(e){return""!==e}));return Object(fc.jsx)(fc.Fragment,{children:!N&&v?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("div",{className:"card card-warning card-outline d-print-none",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h3",{className:"card-title",children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-clipboard-list"}),"Pedido",Object(fc.jsx)("span",{className:"ml-1 badge badge-pill badge-warning",children:c})]})}),Object(fc.jsx)("div",{className:"p-0 card-body",children:Object(fc.jsxs)("div",{className:"mailbox-read-info",children:[Object(fc.jsxs)("h5",{children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-user"}),Object(fc.jsx)("span",{className:"text-capitalize",children:n.nombre}),"admin"===this.props.role?Object(fc.jsxs)("span",{className:"float-right mailbox-read-time",children:["Fecha de nacimiento:"," ",y?Object(fc.jsxs)(fc.Fragment,{children:[y.format("LL"),Object(fc.jsxs)("label",{className:"ml-1",children:["(",wc()().diff(y,"years")," a\xf1os)"]})]}):"NO REGISTRADO"]}):null]}),Object(fc.jsxs)("h6",{children:[n.email?Object(fc.jsxs)("span",{children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-envelope"}),n.email]}):null,Object(fc.jsxs)("span",{className:"float-right mailbox-read-time",children:["Pedido registrado ",wc()(p).fromNow()]})]}),S.length?Object(fc.jsxs)("h6",{children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-phone"}),Object(fc.jsx)("span",{className:"mx-1",children:S.map((function(e,t){return t?", ".concat(e):"".concat(e)}))})]}):null]})}),Object(fc.jsx)("div",{className:"card-footer",children:Object(fc.jsx)("div",{className:"text-right mailbox-controls",children:Object(fc.jsxs)("div",{className:"btn-group",children:[Object(fc.jsxs)("a",{href:"#close",className:"btn btn-secondary btn-sm",onClick:function(e){return a.handleClose(e)},children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-ban"}),"Cerrar"]}),Object(fc.jsxs)("button",{className:"btn btn-warning btn-sm",onClick:this.handleSave,children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-save"})," Guardar"]})]})})}),N?Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]}),Object(fc.jsxs)("div",{className:"row mt-4",children:[Object(fc.jsxs)("div",{className:"col-lg-4 col-md-6 col-sm-12 d-print-none",children:[Object(fc.jsx)("h6",{className:"w-100 d-block",children:"Acciones"}),Object(fc.jsxs)("div",{className:"card",children:[Object(fc.jsx)("div",{className:"text-center mailbox-controls with-border",children:Object(fc.jsxs)("div",{className:"btn-group",children:[v.nota&&!v.nota.id?Object(fc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Eliminar",onClick:this.handleDeleteOrder,children:Object(fc.jsx)("i",{className:"far fa-trash-alt"})}):null,n.telefonos&&n.telefonos.t_movil?Object(fc.jsx)("a",{href:"https://wa.me/52"+n.telefonos.t_movil.replace(" ",""),className:"btn btn-default btn-sm",title:"Abrir WhatsApp",target:"_blank",rel:"noopener noreferrer",children:Object(fc.jsx)("i",{className:"fas fa-mobile-alt"})}):null,n.email&&Object(fc.jsx)("a",{href:"mailto:"+n.email,className:"btn btn-default btn-sm",title:"Enviar e-mail",target:"_blank",rel:"noopener noreferrer",children:Object(fc.jsx)("i",{className:"fas fa-at"})})]})}),N?Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]}),Object(fc.jsx)("h6",{className:"w-100 d-block",children:"Estado"}),Object(fc.jsxs)("div",{className:"card mt-2",children:[Object(fc.jsx)("div",{className:"btn-group-vertical",children:Pn.getStatusType.map((function(e,t){return Object(fc.jsx)("button",{type:"button",className:h===t?"btn btn-primary btn-sm text-capitalize text-bold":"btn btn-default btn-sm text-capitalize",onClick:function(e){a.setState({status:t})},children:e},t)}))}),N?Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})]}),Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"card h-100 m-0",children:[Object(fc.jsx)("div",{className:"card-header d-print-none",children:Object(fc.jsxs)("h5",{className:"card-title w-100 d-block mb-2 text-capitalize text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-shield-alt mr-1"}),Pn.handleStatusString(h)]})}),Object(fc.jsx)("div",{className:"card-body p-0",children:Object(fc.jsxs)("div",{className:"p-0 mailbox-read-message m-0",children:[0===h?Object(fc.jsx)(Tr,{items:j,codes:b,session:r,noPrice:!0,ChangeInput:this.handleChangeInput}):null,1===h?Object(fc.jsx)(Mr,{lab_id:i,npedidolab:l,status:h,handleChange:this.handleChangeInput}):null,2===h?Object(fc.jsx)(Br,{ncaja:o,observaciones:d,status:h,handleChange:this.handleChangeInput}):null,h>=3?Object(fc.jsxs)("div",{className:"px-2",children:[Object(fc.jsx)("div",{className:"my-2 border rounded card border-warning d-print-none",children:Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)("h5",{className:"card-title",children:"Estado de la entrega"}),Object(fc.jsxs)("div",{className:"ml-1 icheck-success d-inline",children:[Object(fc.jsx)("input",{type:"checkbox",checked:3!==h,id:"checkboxSuccess1",onChange:function(e){return a.handleChangeInput("status",3===h?4:3)}}),Object(fc.jsx)("label",{htmlFor:"checkboxSuccess1"})]})]})}),v&&v.id?Object(fc.jsx)(Gr,{nota:v.nota,orderId:v.id}):null]}):null]})}),N?Object(fc.jsx)("div",{className:"overlay dark d-print-none",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})})]}),Object(fc.jsxs)("div",{className:"row mt-4 d-print-none",children:[m&&m.id?Object(fc.jsxs)("div",{className:"col pt-6",children:[Object(fc.jsx)("h6",{className:"w-100 d-block",children:"Examen"}),Object(fc.jsx)("div",{className:"card mt-2",children:Object(fc.jsx)("div",{className:"card-body",children:Object(fc.jsx)("div",{className:"p-0 mailbox-read-message",children:Object(fc.jsx)(Er,{id:m.id,examEdit:!1,exam:m})})})})]}):null,Object(fc.jsxs)("div",{className:"col-".concat(m&&m.id?3:12," pt-6"),children:[Object(fc.jsx)("h6",{className:"w-100 d-block",children:"Meta data"}),Object(fc.jsx)(In,{register:null!==p&&void 0!==p?p:"",created:x?x.name:"",updated:O?O.name:"",updated_at:null!==f&&void 0!==f?f:""})]})]})]}):null})}}]),a}(bc.Component),qr={_saveOrder:Ze.saveOrder,_deleteOrder:Ze.deleteOrder,_setOrder:Ze.setOrder,_setSale:gs.setSale},Jr=Object(n.b)((function(e){var t=e.order,a=e.users;return{order:t.order,role:a.dataLoggin.roles[0],currentUser:a.dataLoggin,options:t.options,loading:t.loading}}),qr)(Vr),$r=(a(89),function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;Object(Nc.a)(this,a),(s=t.call(this,e)).handleMessege=function(e){var t=e.target,a=t.value,c=t.name;s.setState(Object(N.a)({},c,a.toLowerCase()))},s.sendMessenger=Object(be.a)(je.a.mark((function e(){var t,a,c,n,r,i,l;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props,a=t.table,c=t.idRow,n=s.state,r=n.message,n.load||s.setState({load:!0}),i=pe("messengers",null),l={table:a,idRow:c,message:r},e.next=7,he(i,"POST",l,null);case 7:e.sent?s.getMessengers():(window.alert("Ups!\n Algo salio mal, intentelo mas tarde."),s.setState({load:!1}));case 9:case"end":return e.stop()}}),e)}))),s.getMessengers=Object(be.a)(je.a.mark((function e(){var t,a,c,n,r,i,l,o;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.state.load,a=s.props,c=a.table,n=a.idRow,r=pe("messengers",null,{table:c,idRow:n,page:1}),t||s.setState({load:!0}),e.next=7,he(r);case 7:i=e.sent,l=i.data,o=i.message,l?s.setState({messages:l,message:"",load:!1}):o&&(window.alert("Ups!\n Algo salio mal, intentelo mas tarde."),s.setState({load:!1}));case 11:case"end":return e.stop()}}),e)})));var c=JSON.parse(localStorage.getItem("OrusSystem"));return s.state={messages:[],message:"",load:!0,host:c.host,token:c.token,user:c.idUser},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){this.getMessengers()}},{key:"componentDidUpdate",value:function(e,t){e.pagado!==this.props.pagado&&this.getMessengers()}},{key:"render",value:function(){var e=this.state,t=e.messages,a=e.load,s=e.message,c=e.user,n=this.props.idRow;return Object(fc.jsxs)("div",{className:"card direct-chat direct-chat-primary d-print-none",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h3",{className:"card-title",children:[Object(fc.jsx)("i",{className:"fas fa-comments mr-1"}),"Chat",Object(fc.jsx)("span",{className:"badge badge-pill badge-secondary ml-1",children:n})]})}),a?Object(fc.jsx)("div",{className:"card-body",children:Object(fc.jsx)("div",{className:"card-text text-center p-4",children:Object(fc.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(fc.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):t.length?Object(fc.jsx)(hc.a.Fragment,{children:Object(fc.jsx)("div",{className:"card-body",children:Object(fc.jsx)("div",{className:"direct-chat-messages",id:"boxchat",children:t.map((function(e){var t="/img/avatars/avatar5.png";return 1===e.created_user.rol&&(t="/img/avatars/avatar2.png"),e.created_user.rol||(t="/img/avatars/avatar3.png"),2===e.created_user.id&&(t="/img/avatars/avatar4.png"),Object(fc.jsxs)("div",{className:e.created_user.id===c?"direct-chat-msg right":"direct-chat-msg",children:[Object(fc.jsxs)("div",{className:"direct-chat-infos clearfix",children:[Object(fc.jsx)("span",{className:e.created_user.id===c?"direct-chat-name float-right":"direct-chat-name float-left",children:e.created_user.name}),Object(fc.jsx)("span",{className:e.created_user.id===c?"direct-chat-timestamp float-left":"direct-chat-timestamp float-right",children:wc()(e.updated_at).format("lll")})]}),Object(fc.jsx)("img",{className:"direct-chat-img",src:1===e.created_user.id?"/img/avatars/OrusBot.png":t,alt:"message user image1"}),Object(fc.jsx)("div",{className:"direct-chat-text",children:e.mensaje})]},e.id)}))})})}):Object(fc.jsx)("div",{className:"card-body",children:Object(fc.jsx)("div",{className:"card-text text-center p-4",children:Object(fc.jsxs)("h5",{children:[Object(fc.jsx)("i",{className:"fas fa-comment-slash mr-1"}),"No hay mensajes aun"]})})}),Object(fc.jsx)("div",{className:"card-footer",children:Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("input",{type:"text",name:"message",placeholder:"Escriba un mensaje ...",className:"form-control",value:s,onChange:this.handleMessege}),Object(fc.jsx)("span",{className:"input-group-append",children:Object(fc.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.sendMessenger,disabled:!(s.length>5),children:"Enviar"})})]})})]})}}]),a}(bc.Component)),Yr=Object(n.b)((function(e){return{mainRole:e.users.dataLoggin.roles[0]}}),{})($r);var Hr={_getContact:Sa.getContact,_setContact:Sa.setContact,_getExam:Ha.getExam,_setExam:Ha.setExam},Zr=Object(n.b)((function(e){var t=e.contact,a=e.exam;return{contact:t.contact,exam:a.exam}}),Hr)((function(e){var t=e._getContact,a=e._getExam,s=e._setContact,c=e._setExam,n=e.handleChangePanel,r=Object(bc.useState)([]),i=Object(mc.a)(r,2),l=i[0],o=i[1],d=Object(bc.useState)(!0),j=Object(mc.a)(d,2),u=j[0],m=j[1],b=Object(bc.useState)(0),h=Object(mc.a)(b,2),x=h[0],p=h[1];return Object(bc.useEffect)((function(){u&&(o(Pn.getDataTemporary(!0)),m(!1),s(),c())}),[u]),Object(fc.jsx)(Ec,{title:"Examenes sin orden",icon:"notes-medical",color:"info",itemSelected:x,handleDeleteItem:function(){Pn.removeDataTemporary(x.id,(function(){return m(!0)})),p(0)},handleEditItem:function(){x.contact.id&&t(x.contact.id),x.exam_id&&a(x.exam_id),p(0),n(null,2)},children:Object(fc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{}),Object(fc.jsx)("th",{children:"Paciente"}),Object(fc.jsx)("th",{children:"Examen"}),Object(fc.jsx)("th",{children:"Productos"}),Object(fc.jsx)("th",{children:"Session"}),Object(fc.jsx)("th",{children:"Creado"})]})}),Object(fc.jsx)("tbody",{children:l.map((function(e,s){return Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{children:Object(fc.jsxs)("div",{className:"icheck-primary",children:[Object(fc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",id:"exam_"+e.id,checked:e.id===x.id,onChange:function(t){return function(e,t){e.checked||(t={id:0}),p(t)}(t.target,e)}}),Object(fc.jsx)("label",{htmlFor:"exam_"+e.id,className:"sr-only"})]})}),Object(fc.jsx)("th",{className:"text-truncate",children:Object(fc.jsx)("a",{href:"#select",onClick:function(s){return function(e,s){e.preventDefault(),s.contact.id&&t(s.contact.id),s.exam_id&&a(s.exam_id),p(0),n(null,2)}(s,e)},children:Object(fc.jsx)("span",{className:"text-capitalize",children:e.contact.name})})}),Object(fc.jsxs)("td",{children:["# ",e.exam_id]}),Object(fc.jsx)("td",{className:"text-right",children:Object(fc.jsx)("span",{className:"badge badge-dark",children:e.items.length})}),Object(fc.jsx)("td",{style:{maxWidth:"250px"},children:Object(fc.jsx)("p",{className:"text-truncate",children:Object(fc.jsx)("span",{children:e.session})})}),Object(fc.jsx)("td",{children:wc()(e.created_at).fromNow()})]},s)}))})]})})}));function Qr(e){e.handleChangePanel;var t=Object(n.d)((function(e){return e.order})),a=t.list,s=t.metaList,c=t.loading,r=Object(n.c)(),i=Object(bc.useState)({page:1,orderby:"created_at",order:"desc",status:0,itemsPage:1}),o=Object(mc.a)(i,2),d=o[0],j=o[1],u=Object(bc.useState)({lab_id:null,npedidolab:null,ncaja:null,observaciones:null,status:0}),m=Object(mc.a)(u,2),b=m[0],h=m[1],x=function(e){j(Object(l.a)(Object(l.a)({},d),{},{page:e}))},p=function(e,t){e&&h(Object(l.a)(Object(l.a)({},b),{},Object(N.a)({},e,t)))};return Object(bc.useEffect)((function(){return r(Ze.getListOrder(d)),function(){r(Ze.setListOrder())}}),[d]),Object(fc.jsxs)("div",{className:"card",children:[Object(fc.jsxs)("div",{className:"card-header",children:[Object(fc.jsx)("i",{className:"fas fa-folder-open mr-1"}),Object(fc.jsx)("label",{children:"Reporte de pedidos"})]}),Object(fc.jsx)("div",{className:"card-body",children:Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col table-responsive",children:a.map((function(e){var t,a,c,n,i,l,o,j,u,m,h,O,f,g,v,N,y;return Object(fc.jsxs)("div",{children:[Object(fc.jsxs)("table",{className:"table table-striped",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"Order"}),Object(fc.jsx)("th",{children:"Paciente"}),Object(fc.jsx)("th",{children:"Creado"}),Object(fc.jsx)("th",{children:"Realizo"})]})}),Object(fc.jsx)("tbody",{children:Object(fc.jsxs)("tr",{className:"text-capitalize",children:[Object(fc.jsx)("th",{children:e.id}),Object(fc.jsx)("td",{children:e.paciente.nombre.toLowerCase()}),Object(fc.jsx)("td",{children:wc()(e.created_at).fromNow()}),Object(fc.jsx)("td",{children:e.created.name.toLowerCase()})]})}),Object(fc.jsx)("tfoot",{children:Object(fc.jsx)("tr",{children:Object(fc.jsx)("td",{colSpan:"5",className:"text-center",children:Object(fc.jsx)(kc,{meta:s,handlePagination:x})})})})]}),e.exam&&Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)("h5",{className:"my-4",children:[Object(fc.jsx)("i",{className:"fas fa-notes-medical mr-1"}),"Examen"]}),Object(fc.jsx)(or,{esferaod:null!==(t=e.exam.esferaod)&&void 0!==t?t:0,esferaoi:null!==(a=e.exam.esferaoi)&&void 0!==a?a:0,cilindrod:null!==(c=e.exam.cilindrod)&&void 0!==c?c:0,cilindroi:null!==(n=e.exam.cilindroi)&&void 0!==n?n:0,ejeod:null!==(i=e.exam.ejeod)&&void 0!==i?i:0,ejeoi:null!==(l=e.exam.ejeoi)&&void 0!==l?l:0,adiciond:null!==(o=e.exam.adiciond)&&void 0!==o?o:0,adicioni:null!==(j=e.exam.adicioni)&&void 0!==j?j:0,adicion_media_od:null!==(u=e.exam.adicion_media_od)&&void 0!==u?u:0,adicion_media_oi:null!==(m=e.exam.adicion_media_oi)&&void 0!==m?m:0,dpod:null!==(h=e.exam.dpod)&&void 0!==h?h:0,dpoi:null!==(O=e.exam.dpoi)&&void 0!==O?O:0,alturaod:null!==(f=e.exam.alturaod)&&void 0!==f?f:0,alturaoi:null!==(g=e.exam.alturaoi)&&void 0!==g?g:0,lcmarca:null!==(v=e.exam.lcmarca)&&void 0!==v?v:0,lcgod:null!==(N=e.exam.lcgod)&&void 0!==N?N:0,lcgoi:null!==(y=e.exam.lcgoi)&&void 0!==y?y:0,showContactGlasses:!1,readOnly:!0})]}),Object(fc.jsxs)("h5",{className:"my-4",children:[Object(fc.jsx)("i",{className:"fas fa-clipboard-list mr-1"}),"Productos"]}),Object(fc.jsxs)("table",{className:"table table-striped",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"Producto"}),Object(fc.jsx)("th",{children:"Cantidad"})]})}),Object(fc.jsx)("tbody",{children:e.items.map((function(e){return Object(fc.jsxs)("tr",{className:"text-capitalize",children:[Object(fc.jsx)("td",{children:e.producto.toLowerCase()}),Object(fc.jsx)("td",{children:e.cantidad})]},e.id)}))})]}),Object(fc.jsxs)("h5",{className:"my-4",children:[Object(fc.jsx)("i",{className:"fas fa-cog mr-1"}),"Proceso"]}),Object(fc.jsxs)("div",{className:"my-4 py-4",children:[Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{htmlFor:"status",children:"\xbfCual es la siguiente accion de este pedido?"}),Object(fc.jsxs)("select",{id:"status",className:"form-control",defaultValue:e.status,onChange:function(e){var t=e.target.value;p("status",parseInt(t))},children:[Object(fc.jsx)("option",{children:"-- Seleccione primero una accion --"}),Object(fc.jsx)("option",{value:"1",children:"Laboratorio"}),Object(fc.jsx)("option",{value:"2",children:"Bicelaci\xf3n"})]})]})})}),Object(fc.jsxs)("div",{className:"row",children:[1===b.status?Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("h5",{children:"Laboratorio"}),Object(fc.jsx)(Mr,{lab_id:b.lab_id,npedidolab:b.npedidolab,handleChange:p})]}):null,2===b.status?Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("h5",{children:"Bicelaci\xf3n"}),Object(fc.jsx)(Br,{ncaja:b.ncaja,observaciones:b.observaciones,handleChange:p})]}):null]})]}),Object(fc.jsx)("div",{className:"text-center mt-4",children:Object(fc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return function(e){if(!b.status)return window.Swal.fire({title:"Verificacion",text:"Seleccione una accion, antes de guardar",icon:"warning"}),!1;if(1===b.status){if(!b.lab_id)return window.Swal.fire({title:"Verificacion",text:"Seleccione un laboratorio",icon:"warning"}),!1;if(!b.npedidolab)return window.Swal.fire({title:"Verificacion",text:"Escriba el folio del laboratorio",icon:"warning"}),!1}if(2===b.status&&!b.ncaja)return window.Swal.fire({title:"Verificacion",text:"Escriba el numero de la caja de bicelaci\xf3n",icon:"warning"}),!1;e.id?Pn.handleSaveOrder(e.id,b,d,(function(e){return r(Ze.saveOrder(e))})):console.error("[error] Se perdio el identificador del pedido",e.id)}(e)},children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"}),"Actualizar pedido"]})})]},e.id)}))})})}),c&&Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})})]})}var Xr=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(e){var s;return Object(Nc.a)(this,a),(s=t.call(this,e)).handleShowReport=function(e){(0,s.props._setList)(),s.handleShowPanel(e,4)},s.showPanel=function(e){switch(e){case 1:return Object(fc.jsx)(Zr,{handleChangePanel:s.handleShowPanel});case 2:return Object(fc.jsx)(Fr,{handleClose:function(){return s.handleChangeInput("panel",0)}});case 3:return Object(fc.jsx)(Jr,{handleChangePanel:s.handleShowPanel});case 4:return Object(fc.jsx)(Qr,{handleChangePanel:s.handleShowPanel});default:return Object(fc.jsx)(wr,{handleChangePanel:s.handleShowPanel})}},s.handleSetSelectOptions=function(e){var t=e.target,a=s.props._setOptions,c=t.value,n=t.name,r=c;"itemsPage"===n&&(r=parseInt(r)),"status"===n&&""!==r&&(r=parseInt(r)),a({key:n,value:r})},s.handleChangeInput=function(e,t){s.setState(Object(N.a)({},e,t))},s.handleShowPanel=function(e,t){e&&e.preventDefault(),s.handleChangeInput("panel",t)},s.state={panel:null,idOrder:0},s}return Object(yc.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e._getOrder,s=e._setPageName,c=t.params.id;c&&!isNaN(c)?(console.log("[OrusSystem] cargando orden al inicio: ",c),a(c),this.setState({panel:3})):"reporte"===c&&this.setState({panel:4,idOrder:c}),s("pedidos")}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,s=a.order,c=a.history,n=a.messages,r=a._setContact,i=this.state.panel;if(t.panel!==i)switch(i){case 1:c.push("/pedidos/pending");break;case 2:c.push("/pedidos/new");break;case 3:r(),s.id&&c.push("/pedidos/".concat(s.id));break;case 4:c.push("/pedidos/reporte");break;default:c.push("/pedidos")}e.messages.length!==n.length&&n.length&&(n.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),i&&4!==i&&this.setState({panel:0}))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e._setList,a=e._setSales,s=e._setOrder;console.log("[Orus Systme] Cerrando pedido"),t(),a({result:ps}),s()}},{key:"render",value:function(){var e=this,t=this.state.panel,a=this.props,s=a.order,c=a.options,n=a.mainRole,r=this.showPanel(t);return Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-md-2 col-sm-12 d-print-none",children:[Object(fc.jsxs)("a",{href:"#new",className:2===t?"disabled mb-3 btn btn-secondary btn-block":"mb-3 btn btn-warning btn-block",onClick:function(t){t.preventDefault(),e.handleShowPanel(t,2)},disabled:2===t,children:[Object(fc.jsx)("i",{className:"mr-2 fas fa-plus"}),"Pedido nuevo"]}),Object(fc.jsxs)("div",{className:"card",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsxs)("h5",{className:"card-title text-dark",children:[Object(fc.jsx)("i",{className:"mr-2 fas fa-ellipsis-v"}),"Menu y filtros"]})}),Object(fc.jsx)("div",{className:"p-0 card-body",children:Object(fc.jsxs)("ul",{className:"nav nav-pills flex-column",children:[Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)("a",{href:"#item",className:1===t?"nav-link active":"nav-link",onClick:function(t){t.preventDefault(),e.handleShowPanel(t,1)},children:[Object(fc.jsx)("i",{className:"mr-2 fas fa-notes-medical"})," Pendientes"]})}),Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)("a",{href:"#item",className:t?"nav-link":"nav-link active",onClick:function(t){return e.handleShowPanel(t,0)},children:[Object(fc.jsx)("i",{className:"mr-2 fas fa-clipboard-list"})," Pedidos"]})}),"admin"===n?Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)("a",{href:"#item",className:4===t?"nav-link active":"nav-link",onClick:this.handleShowReport,children:[Object(fc.jsx)("i",{className:"mr-2 fas fa-folder-open"})," Reporte"]})}):null,t?null:Object(fc.jsxs)(bc.Fragment,{children:[Object(fc.jsx)("li",{className:"nav-item",children:"\xa0"}),Object(fc.jsxs)("li",{className:"p-2 nav-item",children:[Object(fc.jsx)("label",{htmlFor:"status",children:"Estado del pedido"}),Object(fc.jsxs)("select",{className:"form-control ",name:"status",id:"status",value:c.status,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"",children:"-- Todos --"}),Object(fc.jsx)("option",{value:"0",children:"En proceso"}),Object(fc.jsx)("option",{value:"1",children:"Laboratorio"}),Object(fc.jsx)("option",{value:"2",children:"Bicelaci\xf3n"}),Object(fc.jsx)("option",{value:"3",children:"Terminado"}),Object(fc.jsx)("option",{value:"4",children:"Entregado"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(fc.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:c.orderby,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(fc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(fc.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:c.order,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(fc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(fc.jsxs)("li",{className:"nav-item p-2",children:[Object(fc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de pedidos"}),Object(fc.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:c.itemsPage,onChange:this.handleSetSelectOptions,children:[Object(fc.jsx)("option",{value:"10",children:"ver 10"}),Object(fc.jsx)("option",{value:"20",children:"ver 20"}),Object(fc.jsx)("option",{value:"50",children:"ver 50"}),Object(fc.jsx)("option",{value:"100",children:"ver 100"})]})]})]})]})})]}),3===t?Object(fc.jsx)(Yr,{table:"orders",idRow:s.id}):null]}),Object(fc.jsx)("div",{className:"col-md-10 col-sm-12",children:r})]})}}]),a}(bc.Component),Wr={_getOrder:Ze.getOrder,_setOptions:Ze.setOptions,_setList:Ze.setListOrder,_setContact:Sa.setContact,_setSales:gs.setListSales,_setPageName:g.changeNamePage,_setOrder:Ze.setOrder},Kr=Object(n.b)((function(e){var t=e.order,a=e.users;return{order:t.order,options:t.options,messages:t.messages,user:a.dataLoggin,mainRole:a.dataLoggin.roles[0]}}),Wr)(Xr);var ei=function(e){var t=e.items,a=e.cantDefault,s=void 0===a?1:a,c=e.handleClose,n=e.handleSelect,r=Object(bc.useState)({item:null,cant:s,precio:0}),i=Object(mc.a)(r,2),o=i[0],d=i[1],j=function(){c&&c()},u=function(e){var t=e.name,a=e.value;d(Object(l.a)(Object(l.a)({},o),{},Object(N.a)({},t,parseInt(a))))};return Object(fc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(fc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(fc.jsxs)("div",{className:"modal-content",children:[Object(fc.jsxs)("div",{className:"modal-header",children:[Object(fc.jsx)("h5",{className:"modal-title",children:"Seleccione un producto"}),Object(fc.jsx)("button",{type:"button",className:"close",onClick:j,children:Object(fc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(fc.jsx)("div",{className:"modal-body p-2",children:Object(fc.jsx)("div",{className:"table-responsive overflow-auto",style:{height:"12rem"},children:o.item&&o.item.id?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("div",{className:"text-uppercase mb-4",children:o.item.producto}),Object(fc.jsxs)("div",{className:"form-group row",children:[Object(fc.jsx)("label",{className:"col-2 col-form-label",children:"Cantidad"}),s<2?Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("input",{type:"number",placeholder:"Cantidad",name:"cant",className:"form-control",defaultValue:o.cant,onChange:function(e){var t=e.target;return u(t)}})}):Object(fc.jsx)("span",{className:"col text-lg",children:o.cant}),Object(fc.jsx)("label",{className:"col-2 col-form-label",children:"Precio"}),o.item.precio?Object(fc.jsxs)("span",{className:"col text-lg",children:["$",o.precio]}):Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("input",{type:"number",placeholder:"Precio",name:"precio",className:"form-control",defaultValue:o.precio,onChange:function(e){var t=e.target;return u(t)}})})]})]}):Object(fc.jsx)("table",{className:"table table-sm",children:Object(fc.jsx)("tbody",{children:t?Object(fc.jsx)(fc.Fragment,{children:t.length?Object(fc.jsx)(fc.Fragment,{children:t.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{className:"text-right",children:Object(fc.jsx)("span",{className:"badge badge-dark",children:e.codigo})}),Object(fc.jsx)("td",{className:"text-capitalize text-left",children:Object(fc.jsx)("a",{href:"#select",onClick:function(t){return function(e,t){e.preventDefault(),d(Object(l.a)(Object(l.a)({},o),{},{precio:t.precio,item:t}))}(t,e)},children:e.producto})}),Object(fc.jsxs)("td",{children:["$",e.precio]})]},e.id)}))}):Object(fc.jsx)("tr",{children:Object(fc.jsx)("td",{children:"No existen productos para esta coincidencia"})})}):Object(fc.jsx)("tr",{children:Object(fc.jsxs)("td",{children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"})," No se recibieron los productos"]})})})})})}),Object(fc.jsxs)("div",{className:"modal-footer",children:[Object(fc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:j,children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=Object(l.a)(Object(l.a)({},o),{},{item:Object(l.a)(Object(l.a)({},o.item),{},{precio:o.precio})});n(e),d({item:null,cant:1,precio:0}),j()},children:[Object(fc.jsx)("i",{className:"fas fa-check mr-1"}),"Seleccionar"]})]})]})})})};var ti={_getList:$t.getListStore,_setList:$t.setListStore,_setSale:gs.setSale,_setMessage:$t.setMessagesStore},ai=Object(n.b)((function(e){var t=e.storeItem;return{loading:t.loading,list:t.list,messages:t.messages,meta:t.metaList}}),ti)((function(e){var t=e.sale,a=e.list,s=e.messages,c=e.loading,n=e._getList,r=e._setList,i=e._setSale,o=e._setMessage,d=Object(bc.useState)(""),j=Object(mc.a)(d,2),u=j[0],m=j[1],b=Object(bc.useState)(!1),h=Object(mc.a)(b,2),x=h[0],p=h[1],O=Object(bc.useState)(1),f=Object(mc.a)(O,2),g=f[0],v=f[1],N=t.session,y=function(){if(u.length>2){var e=u.split("*"),t=u;2===e.length&&(t=e[1],v(parseInt(e[0]))),n({search:t}),m("")}},S=function(e){return{id:0,cant:e.cant,price:parseFloat(e.item.precio),subtotal:parseInt(e.cant)*parseFloat(e.item.precio),inStorage:parseInt(e.item.cantidades)>=parseInt(e.cant),out:parseInt(e.item.cantidades)-parseInt(e.cant),cantInStore:parseInt(e.item.cantidades),session:N,store_items_id:e.item.id,descripcion:e.item.descripcion,producto:e.item.producto.toLowerCase(),category:e.item.categoria?e.item.categoria.id:0}},C=function(e){var a=t.items.filter((function(t){return t.store_items_id===e.store_items_id})),s=t.items.filter((function(t){return t.store_items_id!==e.store_items_id}));if(a.length){var c=parseInt(e.cant)+parseInt(a[0].cant),n=Object(l.a)(Object(l.a)({},a[0]),{},{cant:c,subtotal:parseFloat(e.price)*c,inStorage:c>=parseInt(e.cantInStore),out:parseInt(e.cantInStore)-c});s.push(n)}else s.push(e);i(Object(l.a)(Object(l.a)({},t),{},{items:s}))};return Object(bc.useEffect)((function(){if(a.length)if(1===a.length){var e=S({item:a[0],cant:g||1});C(e),v(1)}else p(!0);else!a.length&&s.length&&(s.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),o())}),[a]),Object(fc.jsxs)("div",{className:"btn-group text-center d-print-none",children:[Object(fc.jsx)("input",{className:"form-control",placeholder:"Codigo",onChange:function(e){return function(e){var t=e.value;m(t)}(e.target)},onKeyPress:function(e){return function(e){"Enter"===e&&y()}(e.key)},value:u}),c?Object(fc.jsx)("i",{className:"fas fa-2x fa-spinner fa-spin"}):Object(fc.jsx)("button",{type:"button",className:"btn btn-primary",onClick:y,disabled:!(u.length>2),children:Object(fc.jsx)("i",{className:"fas fa-barcode"})}),x&&a.length?Object(fc.jsx)(ei,{items:a,cantDefault:g,handleClose:function(){p(!1)},handleSelect:function(e){var t=S(e);r({result:{list:[],metaList:{}}}),C(t),v(1)}}):null]})}));function si(e){var t=e.sale,a=(e.paid,e.btnDisabled),s=Object(n.c)();return Object(fc.jsx)("button",{className:"btn btn-primary mx-1",title:"Agregar descuento",onClick:function(){var e=window.prompt("Agregue el descuento a aplicar"),a=0;if(t.items.forEach((function(e){return a+=e.subtotal})),e.match(/^[0-9]+$/gm)){var c=parseInt(e);s(gs.saveSale({id:t.id,data:Object(l.a)(Object(l.a)({},t),{},{descuento:c,total:a-c,items:JSON.stringify(t.items),payments:null})}))}else if(e.match(/^[0-9]{2,3}%$/gm)){var n=parseInt(e.replace("%",""))/100,r=parseInt(a*n);s(gs.saveSale({id:t.id,data:Object(l.a)(Object(l.a)({},t),{},{descuento:r,total:a-r,items:JSON.stringify(t.items),payments:null})}))}},disabled:a,children:Object(fc.jsx)("i",{className:"fas fa-percent"})})}var ci=function(e){var t=e.handleClose,a=e.handleSelect,s=Object(n.d)((function(e){return e.sales})),c=s.list,r=s.loading,i=Object(n.c)(),l=Object(bc.useState)(""),o=Object(mc.a)(l,2),d=o[0],j=o[1],u=function(e){"Enter"===e&&m(d)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(gs.getListSale({orderBy:"created_at",order:"desc",itemsPage:25,search:e}))};return Object(bc.useEffect)((function(){return m(),function(){i(gs.setListSales({result:{list:[],metaList:{}}}))}}),[]),Object(fc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(fc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(fc.jsxs)("div",{className:"modal-content",children:[Object(fc.jsxs)("div",{className:"modal-header",children:[Object(fc.jsx)("h5",{className:"modal-title",children:"Seleccione una venta"}),Object(fc.jsx)("button",{type:"button",className:"close",onClick:function(){return t()},children:Object(fc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(fc.jsxs)("div",{className:"modal-body p-2",children:[Object(fc.jsx)("div",{className:"w-full d-block mb-4",children:Object(fc.jsxs)("div",{className:"input-group",children:[Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Buscar por folio o nombre",onChange:function(e){return function(e){var t=e.value;j(t)}(e.target)},onKeyPress:function(e){var t=e.key;return u(t)}}),Object(fc.jsx)("button",{type:"button",className:"btn btn-default ml-1",onClick:function(){return u("Enter")},children:Object(fc.jsx)("i",{className:"fas fa-search"})})]})}),Object(fc.jsx)("div",{className:"table-responsive overflow-auto",style:{height:"12rem"},children:Object(fc.jsx)("table",{className:"table table-sm",children:Object(fc.jsx)("tbody",{children:c?Object(fc.jsx)(fc.Fragment,{children:c.length?Object(fc.jsx)(fc.Fragment,{children:c.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{className:"text-right",children:Object(fc.jsx)("span",{className:"badge badge-dark",children:e.id})}),Object(fc.jsx)("td",{className:"text-capitalize text-left",children:Object(fc.jsx)("a",{href:"#select",onClick:function(t){return function(e,t){e&&e.preventDefault(),a(t)}(t,e)},children:e.customer?e.customer.nombre:"--"})}),Object(fc.jsx)("td",{className:"text-right",children:wc()(e.created_at).fromNow()})]},e.id)}))}):Object(fc.jsx)("tr",{children:Object(fc.jsx)("td",{children:"No existen ventas para esta coincidencia"})})}):Object(fc.jsx)("tr",{children:Object(fc.jsxs)("td",{children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"})," Escriba el folio o nombre para cargar una venta"]})})})})})]}),Object(fc.jsx)("div",{className:"modal-footer",children:Object(fc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return t()},children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]})}),r?Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})})})};function ni(e){var t=e.setSale,a=Object(bc.useState)(!1),s=Object(mc.a)(a,2),c=s[0],r=s[1],i=Object(n.c)();return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("button",{className:"btn btn-primary mr-1",title:"Cargar una venta",onClick:function(){r(!0)},children:Object(fc.jsx)("i",{className:"fas fa-list"})}),c&&Object(fc.jsx)(ci,{handleClose:function(){r(!1)},handleSelect:function(e){var a=0;e.payments.forEach((function(e){return a=e.total})),r(!1),t({pagado:a,order_id:e.pedido}),i(gs.setSale({id:e.id,customer:e.customer,contact_id:e.customer.id,items:e.items,session:e.session,descuento:e.descuento,subtotal:e.subtotal,total:e.total,payments:e.payments,pedido:e.pedido,created_at:e.created_at}))}})]})}function ri(e){var t=e.sale,a=e.paid,s=e.forPaid,c=Object(bc.useState)({showPayment:!1}),n=Object(mc.a)(c,2),r=n[0],i=n[1];return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("button",{className:"btn btn-success ml-2 d-print-none",onClick:function(){i(Object(l.a)(Object(l.a)({},r),{},{showPayment:!0}))},disabled:!t.items.length||t.total&&a,children:Object(fc.jsx)("i",{className:"fas fa-money-bill-alt"})}),r.showPayment&&Object(fc.jsx)(zr,{handleClose:function(){i(Object(l.a)(Object(l.a)({},r),{},{showPayment:!1}))},sale:Object(l.a)(Object(l.a)({},t),{},{contact_id:t.customer.id}),forPaid:s})]})}function ii(e){var t=e.sale,a=e.defaultState,s=e.erase,c=Object(n.c)(),r=function(){c(gs.setSale(Object(l.a)(Object(l.a)({},a.sale),{},{session:xs.getSession(),created_at:new Date}))),s()};return Object(fc.jsx)("button",{className:"btn btn-warning ml-1",title:"Nueva venta",onClick:function(){xs.confirm("\xbfDesea terminar esta venta y crear una nueva?",r)},disabled:!t.customer.id||!t.items.length,children:Object(fc.jsx)("i",{className:"fas fa-window-close"})})}var li={_getListContacts:Sa.getListContacts,_setListContacts:Sa.setListContact},oi=Object(n.b)((function(e){var t=e.contact;return{loading:t.loading,customers:t.list,meta:t.metaList}}),li)((function(e){var t=e.customers,a=e.loading,s=e._getListContacts,c=e._setListContacts,n=e.handleClose,r=e.handleSelect,i=Object(bc.useState)({textSearch:""}),o=Object(mc.a)(i,2),d=o[0],j=o[1],u=function(){n&&n()},m=function(){d.textSearch.length>2&&(s({search:d.textSearch,itemsPage:25,orderBy:"id",order:"desc"}),j(Object(l.a)(Object(l.a)({},d),{},{textSearch:""})))};return Object(bc.useEffect)((function(){return function(){c({result:{list:[],metaList:{}}})}}),[]),Object(fc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(fc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(fc.jsxs)("div",{className:"modal-content",children:[Object(fc.jsxs)("div",{className:"modal-header",children:[Object(fc.jsx)("h5",{className:"modal-title",children:"Seleccione un cliente"}),Object(fc.jsx)("button",{type:"button",className:"close",onClick:u,children:Object(fc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(fc.jsxs)("div",{className:"modal-body p-2",children:[Object(fc.jsxs)("div",{className:"form-inline mb-3",children:[Object(fc.jsx)("div",{className:"form-group",children:Object(fc.jsx)("input",{className:"form-control",placeholder:"Buscar cliente",onChange:function(e){return function(e){var t=e.value;j(Object(l.a)(Object(l.a)({},d),{},{textSearch:t}))}(e.target)},onKeyPress:function(e){return function(e){"Enter"===e&&d.textSearch.length&&m()}(e.key)},autoFocus:!0})}),Object(fc.jsx)("div",{className:"form-group pl-2",children:Object(fc.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:m,children:Object(fc.jsx)("i",{className:"fas fa-search"})})}),a&&Object(fc.jsx)("div",{className:"form-group pl-2",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-spinner fa-spin"})})]}),Object(fc.jsx)("div",{className:"table-responsive overflow-auto",style:{height:"12rem"},children:Object(fc.jsx)("table",{className:"table table-sm",children:Object(fc.jsx)("tbody",{children:t?Object(fc.jsx)(fc.Fragment,{children:t.length?Object(fc.jsx)(fc.Fragment,{children:t.map((function(e){return Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("td",{className:"text-right",children:Object(fc.jsx)("span",{className:"badge badge-dark",children:e.id})}),Object(fc.jsx)("td",{className:"text-capitalize text-left",children:Object(fc.jsx)("a",{href:"#select",onClick:function(t){return function(e,t){e.preventDefault(),r(t)}(t,e)},children:e.nombre})})]},e.id)}))}):Object(fc.jsx)("tr",{children:Object(fc.jsx)("td",{children:"No existen pacientes con esta coincidencia"})})}):Object(fc.jsx)("tr",{children:Object(fc.jsxs)("td",{children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"})," Escriba el nombre del cliente a buscar"]})})})})})]}),Object(fc.jsx)("div",{className:"modal-footer",children:Object(fc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:u,children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]})})]})})})}));function di(e){var t=e.sale,a=e.setSale,s=Object(bc.useState)(!1),c=Object(mc.a)(s,2),r=c[0],i=c[1],o=Object(n.c)(),d={id:0,customer:{},contact_id:2,items:[],session:xs.getSession(),descuento:0,subtotal:0,total:0,pagado:0,payments:[],payment:{},created_at:new Date};return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("i",{className:"fas fa-user mr-1 text-indigo"}),"Cliente:",Object(fc.jsx)("label",{className:"text-capitalize ml-1",children:t.customer?t.customer.nombre:"XXX"}),Object(fc.jsx)("button",{type:"button",className:"btn bg-indigo btn-sm ml-2",title:"Buscar cliente",onClick:function(){i(!0)},children:Object(fc.jsx)("i",{className:"fas fa-exchange-alt"})}),r&&Object(fc.jsx)(oi,{handleClose:function(){i(!1)},handleSelect:function(e){a({pagado:0}),i(!1),o(gs.setSale(Object(l.a)(Object(l.a)({},d),{},{customer:e,contact_id:e.id})))}})]})}var ji=function(e){var t,a=e.payment,s=void 0===a?{}:a,c=e.handleClose;return Object(fc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(fc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(fc.jsxs)("div",{className:"modal-content",children:[Object(fc.jsxs)("div",{className:"modal-header",children:[Object(fc.jsx)("h5",{className:"modal-title",children:"Detalles del abono"}),Object(fc.jsx)("button",{type:"button",className:"close",onClick:function(){return c()},children:Object(fc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(fc.jsxs)("div",{className:"modal-body p-2",children:[Object(fc.jsxs)("div",{className:"row mb-2",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{className:"mr-2",children:"Metodo de pago"}),Object(fc.jsx)("span",{children:s.metodoname})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{className:"mr-2",children:"Cantidad abonada"}),Object(fc.jsxs)("span",{children:["$",s.total]})]})]}),s.banco&&s.banco.id?Object(fc.jsxs)("div",{className:"row mb-2",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{className:"mr-2",children:"Banco"}),Object(fc.jsx)("span",{children:s.banco.value})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{className:"mr-2",children:"Auth"}),Object(fc.jsx)("span",{children:null!==(t=s.auth)&&void 0!==t?t:"--"})]})]}):null,s.id?Object(fc.jsxs)("div",{className:"row mb-2",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{className:"mr-2 d-block",children:"Folio"}),Object(fc.jsx)("span",{children:s.id})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{className:"mr-2 d-block",children:"Fecha"}),s.created_at?Object(fc.jsx)("span",{children:wc()(s.created_at).format("LL")}):Object(fc.jsx)("span",{children:"--"})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{className:"mr-2 d-block text-uppercase",children:"Recibio"}),Object(fc.jsx)("span",{children:s.created&&s.created.name?s.created.name:"--"})]})]}):Object(fc.jsx)("div",{className:"row mb-2",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("span",{className:"alert alert-warning d-block text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Pago no acreditado!"]})})})]}),Object(fc.jsx)("div",{className:"modal-footer",children:Object(fc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return c()},children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]})})]})})})};function ui(e){var t,a,s=e.item,c=e.close,n=e.handleUpdate,r=Object(bc.useState)({cant:null!==(t=s.cant)&&void 0!==t?t:0,price:null!==(a=s.price)&&void 0!==a?a:0}),i=Object(mc.a)(r,2),o=i[0],d=i[1],j=function(e){var t=e.name,a=e.value;d(Object(l.a)(Object(l.a)({},o),{},Object(N.a)({},t,parseInt(a))))},u=function(){n(Object(l.a)(Object(l.a)(Object(l.a)({},s),o),{},{subtotal:o.cant*o.price}))};return console.log("[DEBUG] Item:",s),Object(fc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(fc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(fc.jsxs)("div",{className:"modal-content",children:[Object(fc.jsxs)("div",{className:"modal-header",children:[Object(fc.jsx)("h5",{className:"modal-title",children:Object(fc.jsx)("span",{className:"text-capitalize text-truncate",children:s.producto})}),Object(fc.jsx)("button",{type:"button",className:"close",onClick:function(){return c()},children:Object(fc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(fc.jsx)("div",{className:"modal-body p-2",children:Object(fc.jsxs)("div",{className:"row my-2",children:[Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Cantidad"}),Object(fc.jsx)("input",{type:"number",min:"0",className:"form-control text-right",name:"cant",defaultValue:o.cant,onChange:function(e){var t=e.target;return j(t)}})]}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{children:"Precio"}),Object(fc.jsx)("input",{type:"number",min:"0",className:"form-control text-right",name:"price",defaultValue:o.price,onChange:function(e){var t=e.target;return j(t)},onKeyPress:function(e){return function(e){"Enter"===e&&u()}(e.key)}})]})]})}),Object(fc.jsxs)("div",{className:"modal-footer",children:[Object(fc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return c()},children:[Object(fc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(fc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:u,children:[Object(fc.jsx)("i",{className:"fas fa-save mr-1"}),"Guardar"]})]})]})})})}function mi(e){var t=e.paid,a=Object(n.d)((function(e){return e})),s=a.sales,c=a.users,r=s.sale,i=c.dataLoggin,o=Object(n.c)(),d=Object(bc.useState)({showUpdateItem:!1,showPaymentDetails:!1,item:{},payment:{}}),j=Object(mc.a)(d,2),u=j[0],m=j[1],b=function(e){var t=r.items.filter((function(t){return t.store_items_id!==e.store_items_id}));r.id?o(gs.saveSale({id:r.id,data:Object(l.a)(Object(l.a)({},r),{},{items:JSON.stringify(t),payments:null})})):o(gs.setSale(Object(l.a)(Object(l.a)({},r),{},{items:t})))},h=function(e){var t=e.id,a=e.total,s=e.metodoname;xs.confirm("Realmente desea eliminar el pago ".concat(s,", de ").concat(a),(function(){o(gs.deletePayment({id:t,sale_id:r.id}))}))},x=function(e,t){e&&e.preventDefault(),m(Object(l.a)(Object(l.a)({},u),{},{showUpdateItem:!0,item:t}))},p=function(){m(Object(l.a)(Object(l.a)({},u),{},{showUpdateItem:!1,item:{}}))};return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("table",{className:"table table-striped",children:Object(fc.jsxs)("tbody",{children:[r.items&&r.items.length?Object(fc.jsx)(fc.Fragment,{children:r.items.map((function(e,a){var s=r.total&&t||r.payments.length||r.descuento;return e.store_items_id?Object(fc.jsxs)("tr",{children:[bi(b,e,s),Object(fc.jsxs)("td",{onClick:function(t){return x(null,e)},children:[Object(fc.jsx)("a",{href:"#details",className:"text-muted w-full d-block text-uppercase",onClick:function(t){return x(t,e)},children:e.producto}),Object(fc.jsxs)("label",{className:"w-full d-block",children:[Object(fc.jsx)("span",{className:"badge badge-dark mr-1",children:e.cant}),"*",Object(fc.jsxs)("span",{className:e.price?"mx-1":"mx-1 text-danger",children:["$",e.price]}),"=",Object(fc.jsxs)("span",{className:e.subtotal?"ml-1":"ml-1 text-danger",children:["$",e.subtotal]})]})]})]},a):null}))}):null,r.descuento?Object(fc.jsxs)("tr",{children:[bi((function(){xs.confirm("Realmente desea eliminar el descuento",(function(){o(gs.saveSale({id:r.id,data:Object(l.a)(Object(l.a)({},r),{},{total:r.total+r.descuento,descuento:0,items:JSON.stringify(r.items),payments:null})}))}))}),null,t),Object(fc.jsxs)("td",{children:[Object(fc.jsx)("span",{className:"text-danger w-full d-block text-uppercase",children:"Descuento"}),Object(fc.jsx)("label",{className:"w-full d-block",children:Object(fc.jsxs)("span",{className:"ml-1 text-danger",children:["- $",r.descuento]})})]})]}):null,r.payments.length?Object(fc.jsx)(fc.Fragment,{children:r.payments.map((function(e,a){var s=wc()(Date.now()).diff(wc()(e.created_at),"days"),c=t&&s&&i.rol;return Object(fc.jsxs)("tr",{children:[bi(h,e,c),Object(fc.jsxs)("td",{children:[Object(fc.jsxs)("a",{href:"#link",className:" w-full d-block text-uppercase",onClick:function(t){return function(e,t){e&&e.preventDefault(),m(Object(l.a)(Object(l.a)({},u),{},{showPaymentDetails:!0,payment:t}))}(t,e)},children:[Object(fc.jsx)("span",{className:e.id?"text-success":"text-warning text-bold",children:"Abono"}),Object(fc.jsx)("span",{className:"ml-1 text-muted",children:e.metodoname})]}),Object(fc.jsxs)("label",{className:"w-full d-block",children:[Object(fc.jsxs)("span",{className:"ml-1 text-muted",children:[wc()(e.created_at).format("LL"),","]}),Object(fc.jsxs)("span",{className:"ml-1",children:["$",e.total]})]})]})]},a)}))}):null,t&&r.total?Object(fc.jsx)("tr",{className:"table-info",children:Object(fc.jsx)("td",{colSpan:"2",children:Object(fc.jsxs)("span",{className:" w-full d-block text-uppercase text-center text-bold",children:[Object(fc.jsx)("i",{className:"fas fa-info-circle mr-1 text-primary"}),"Cuenta pagada"]})})}):null]})}),u.showPaymentDetails&&Object(fc.jsx)(ji,{handleClose:function(){m(Object(l.a)(Object(l.a)({},u),{},{showPaymentDetails:!1,payment:{}}))},payment:u.payment}),u.showUpdateItem&&Object(fc.jsx)(ui,{item:u.item,handleUpdate:function(e){var t=r.items.filter((function(t){return t.store_items_id!==e.store_items_id}));t.push(e),r.id?o(gs.saveSale({id:r.id,data:Object(l.a)(Object(l.a)({},r),{},{items:JSON.stringify(t),payments:null})})):o(gs.setSale(Object(l.a)(Object(l.a)({},r),{},{items:t}))),p()},close:p})]})}function bi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(fc.jsx)("td",{style:{width:32},children:Object(fc.jsx)("button",{type:"button",className:a?"btn btn-default disabled":"btn btn-default",onClick:function(){e&&(t?e(t):e())},disabled:a,children:Object(fc.jsx)("i",{className:"fas fa-trash text-muted"})})})}function hi(){var e=Object(n.d)((function(e){return e})).sales,t=e.sale,a=e.loading,s=Object(n.c)(),c=Object(bc.useState)({pagado:0}),r=Object(mc.a)(c,2),i=r[0],o=r[1],d=function(){return o({pagado:0})},j=function(e){o(Object(l.a)(Object(l.a)({},i),e))},u=function(){if("/notas"!==window.location.pathname)return!1;xs.confirm("Cerrar la venta actual",(function(){s(gs.setSale(Object(l.a)(Object(l.a)({},ps.sale),{},{session:xs.getSession(),created_at:new Date}))),d()}))};Object(bc.useEffect)((function(){var e={customer:t.customer,items:t.items,session:t.session,descuento:t.descuento,subtotal:t.subtotal,total:t.total,payments:t.payments},a=0,c=0;t.items.forEach((function(e){return a+=e.subtotal})),t.payments.forEach((function(e){return c+=e.total})),a===t.subtotal&&i.pagado===c||(t.subtotal=a,t.total=a-t.descuento,t.pagado=c,t.id&&s(gs.setSale(t)),o({pagado:c})),localStorage.setItem("OrusSales",JSON.stringify(t.id?{}:e)),window.addEventListener("afterprint",u)}),[t]),Object(bc.useEffect)((function(){return s(g.changeNamePage("punto de venta")),function(){console.log("[Orus Systme] Cerrando venta"),window.removeEventListener("afterprint",u),s(gs.setListSales({result:ps})),localStorage.setItem("OrusSales","{}")}}),[]);var m=t.total<=i.pagado,b=!(t.total-i.pagado>0&&0===t.descuento&&0===i.pagado);return Object(fc.jsx)(fc.Fragment,{children:Object(fc.jsxs)("div",{className:"card border border-gray mb-4",style:{height:"36rem"},children:[Object(fc.jsxs)("div",{className:"card-body pb-2 d-print-none",children:[Object(fc.jsxs)("nav",{className:"row mb-2",children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)(di,{sale:t,setSale:j})}),Object(fc.jsxs)("div",{className:"col",children:[Object(fc.jsx)("label",{className:"mx-1",children:"Folio:"}),Object(fc.jsx)("span",{className:"mx-1",children:t.id?t.id:"Nuevo"}),Object(fc.jsx)("label",{className:"mx-1",children:"Fecha:"}),Object(fc.jsx)("span",{className:"mx-1",children:wc()(t.created_at).format("L")}),t.pedido?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("label",{className:"mx-1",children:"Pedido:"}),Object(fc.jsx)("span",{className:"mx-1",children:t.pedido})]}):null]}),Object(fc.jsx)("div",{className:"col-3",children:Object(fc.jsxs)("div",{className:"card-tools text-right",children:[Object(fc.jsx)(ni,{setSale:j}),Object(fc.jsx)(si,{sale:t,paid:m,btnDisabled:b}),Object(fc.jsx)(ii,{sale:t,defaultState:ps,erase:d})]})})]}),Object(fc.jsx)("div",{className:"overflow-auto text-right p-0 border border-gray",style:{height:"27rem"},children:t.customer&&t.customer.id&&Object(fc.jsx)(mi,{paid:m})})]}),Object(fc.jsx)("div",{className:"card-footer",children:Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col d-print-none",children:t.total?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("span",{className:"text-lg",children:"Total:"}),Object(fc.jsxs)("label",{className:"text-lg ml-1",children:["$",t.total]})]}):null}),Object(fc.jsx)("div",{className:"col d-print-none",children:!m&&Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("span",{className:"text-lg",children:"Por pagar:"}),Object(fc.jsxs)("label",{className:"text-lg ml-1",children:["$",t.total-i.pagado]})]})}),Object(fc.jsxs)("div",{className:"col-6 text-right",children:[Object(fc.jsx)(ai,{sale:t}),Object(fc.jsx)(ri,{sale:t,paid:m,forPaid:t.total-i.pagado}),Object(fc.jsx)(Rr,{sale:t,order:t.pedido,payed:i.pagado})]})]})}),a?Object(fc.jsx)("div",{className:"overlay dark",children:Object(fc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})})}var xi=a(31);function pi(e){var t=e.filters,a=Object(bc.useState)({payments:[],meta:{},page:1,load:!1}),s=Object(mc.a)(a,2),c=s[0],n=s[1],r=function(){var e=Object(be.a)(je.a.mark((function e(){var a,s,r,i,o,d;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(l.a)({},t)).itemsPage=12,a.page=c.page,s=Oc("payments",null,a),console.log("REPORT PAYMENTS DETAILS URL",s),e.next=7,pc(s);case 7:r=e.sent,i=r.data,o=r.message,d=r.meta,i?n(Object(l.a)(Object(l.a)({},c),{},{payments:i,meta:d,load:!1})):o&&(console.log(o),n(Object(l.a)(Object(l.a)({},c),{},{load:!1})),console.error("[Orus system] Error in report payments details:",o),window.Swal.fire("Fallo de conexion",o,"error"));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(bc.useEffect)((function(){r()}),[t,c.page]),Object(fc.jsxs)("div",{className:"card card-success card-outline",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsx)("h3",{className:"card-title text-success",children:"Detallado"})}),Object(fc.jsx)("div",{className:"card-body",children:Object(fc.jsxs)("table",{className:"table table-sm",children:[Object(fc.jsx)("thead",{children:Object(fc.jsxs)("tr",{children:[Object(fc.jsx)("th",{children:"Metodo"}),Object(fc.jsx)("th",{children:"Cliente"}),Object(fc.jsx)("th",{children:"Pedido"}),Object(fc.jsx)("th",{children:"Total"})]})}),Object(fc.jsx)("tbody",{children:c.load?Object(fc.jsx)("tr",{children:Object(fc.jsxs)("td",{colSpan:"4",className:"text-center p-4",children:[Object(fc.jsx)("div",{className:"spinner-border text-primary mr-4",role:"status",children:Object(fc.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(fc.jsx)("span",{className:"font-weight-light font-italic",children:"Espere cargando datos de pagos"})]})}):c.payments.length?c.payments.map((function(e){return Object(fc.jsxs)("tr",{className:1===e.metodo?"text-success":"",children:[Object(fc.jsx)("th",{className:"text-uppercase",children:e.metodoname}),Object(fc.jsx)("td",{className:"text-capitalize",children:e.sale&&e.sale.customer?e.sale.customer.nombre:"--"}),Object(fc.jsx)("td",{children:Object(fc.jsx)("span",{className:"badge badge-primary",alt:"Cobrado por: "+e.created_user,title:"Cobrado por: "+e.created_user,children:e.sale&&e.sale.pedido?e.sale.pedido:"--"})}),Object(fc.jsx)("td",{className:"text-right",children:xi.dollarUS.format(e.total)})]},e.id)})):Object(fc.jsx)("tr",{children:Object(fc.jsx)("th",{colSpan:"4",className:"text-center",children:Object(fc.jsxs)("h6",{className:"text-warning",children:[Object(fc.jsx)("i",{className:"fas fa-info mr-2"}),"No hay datos para este dia"]})})})})]})}),c.meta.total?Object(fc.jsxs)("div",{className:"card-footer",children:[1===c.meta.current_page?Object(fc.jsx)("a",{href:"#next",onClick:function(e){return e.preventDefault()},children:Object(fc.jsx)("i",{className:"fas fa-step-backward text-dark"})}):Object(fc.jsx)("a",{href:"#next",onClick:function(e){e.preventDefault(),n(Object(l.a)(Object(l.a)({},c),{},{page:c.page-1}))},children:Object(fc.jsx)("i",{className:"fas fa-step-backward"})})," "+c.page+" / "+c.meta.last_page+" ",c.meta.current_page===c.meta.last_page?Object(fc.jsx)("a",{href:"#next",onClick:function(e){return e.preventDefault()},children:Object(fc.jsx)("i",{className:"fas fa-step-forward text-dark"})}):Object(fc.jsx)("a",{href:"#next",onClick:function(e){e.preventDefault(),n(Object(l.a)(Object(l.a)({},c),{},{page:c.page+1}))},children:Object(fc.jsx)("i",{className:"fas fa-step-forward"})})]}):null]})}function Oi(e){var t=e.filters,a=e.changeState,s=t.user,c=t.date_end,n=t.date_start,r=Object(bc.useState)({rol:s.roles,total:0,efectivo:0,page:1,char:null}),i=Object(mc.a)(r,2),o=i[0],d=i[1],j=function(){var e=Object(be.a)(je.a.mark((function e(){var s,r,i,j,u,m,b,h,x,p,O,f;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=Object(l.a)({},t)).itemsPage=12,s.page=o.page,s.type="methods",r=Oc("payments",null,s),console.log("REPORT PAYS URL",r),e.next=8,pc("payments?date_start=".concat(n,"&date_end=").concat(c,"&itemsPage=12&page=1&type=methods"));case 8:if(i=e.sent,j=i.data,u=i.message,!j){e.next=32;break}if(m=window.$("#donutChart").get(0).getContext("2d"),b={maintainAspectRatio:!0,responsive:!0},h=[],x=[],p=0,O=0,f={},o.char&&o.char.destroy(),j.message){e.next=25;break}if(!j||!j.length){e.next=20;break}return e.next=18,j.map((function(e){return h.push(e.method),x.push(e.total.toFixed(2)),"efectivo"===e.method&&(a("ventas",e.total),O=e.total),p+=e.total,null}));case 18:e.next=22;break;case 20:h=["No hay datos"],x=[0];case 22:d(Object(l.a)(Object(l.a)({},o),{},{total:p,efectivo:O})),e.next=28;break;case 25:console.error("[ORUS] Error al cargar la venta del dia",j.message),h=["No hay datos"],x=[100];case 28:f={labels:h,datasets:[{data:x,backgroundColor:["#f56954","#00a65a","#f39c12","#00c0ef","#3c8dbc","#d2d6de","#000"]}]},o.char=new window.Chart(m,{type:"pie",data:f,options:b}),e.next=34;break;case 32:return window.Swal.fire({title:"Error!",text:"Ups!\n Hubo un error al descargar las ventas",icon:"error",confirmButtonText:"Ok"}),e.abrupt("return",u);case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(bc.useEffect)((function(){j()}),[t]),Object(fc.jsxs)("div",{className:"card card-success card-outline",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsx)("h3",{className:"card-title text-success",children:o.rol?"Mis ventas del dia por metodo de pago":"Ventas del dia por metodo de pago"})}),Object(fc.jsxs)("div",{className:"card-body",children:[Object(fc.jsx)("canvas",{id:"donutChart"}),Object(fc.jsxs)("p",{children:[o.rol?null:Object(fc.jsxs)(hc.a.Fragment,{children:["Venta: ",Object(fc.jsx)("strong",{children:xi.dollarUS.format(o.total)}),Object(fc.jsx)("br",{})]}),"Efectivo: ",Object(fc.jsx)("strong",{children:xi.dollarUS.format(o.efectivo)})]})]})]})}function fi(e){var t=e.filters,a=Object(bc.useState)({listBank:[],page:1,data:[],load:!1}),s=Object(mc.a)(a,2),c=s[0],n=s[1],r=function(){var e=Object(be.a)(je.a.mark((function e(){var a,s,r,i,o;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(l.a)({},t)).itemsPage=12,a.page=c.page,a.type="banks",s=Oc("payments",null,a),console.log("REPORT BANK URL",s),e.next=8,pc(s);case 8:r=e.sent,i=r.data,o=r.message,i?n(Object(l.a)(Object(l.a)({},c),{},{data:i,load:!1})):o&&(n(Object(l.a)(Object(l.a)({},c),{},{load:!1})),console.error("[Orus system] Error in report payments details:",o),window.Swal.fire("Fallo de conexion",o,"error"));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(bc.useEffect)((function(){r()}),[t]),Object(fc.jsxs)("div",{className:"card card-success card-outline",children:[Object(fc.jsx)("div",{className:"card-header",children:Object(fc.jsx)("h3",{className:"card-title text-success",children:"Detallado de pagos bancarios"})}),Object(fc.jsx)("div",{className:"card-body",children:c.load?Object(fc.jsxs)("div",{children:[Object(fc.jsx)("div",{className:"spinner-border text-primary mr-4",role:"status",children:Object(fc.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(fc.jsx)("span",{className:"font-weight-light font-italic",children:"Espere cargando datos de banco"})]}):Object(fc.jsx)("ul",{className:"list-group",children:c.data.length?c.data.map((function(e,t){return Object(fc.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(fc.jsx)("label",{className:"text-uppercase",children:e.name}),Object(fc.jsx)("span",{className:"badge badge-primary",children:xi.dollarUS.format(e.total)})]},t)})):Object(fc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(fc.jsxs)("h6",{className:"text-warning",children:[Object(fc.jsx)("i",{className:"fas fa-info mr-2"}),"No hay datos para este dia"]})})})})]})}var gi=a(64),vi=a.n(gi),Ni=(a(90),Object(bc.createContext)(null)),yi=localStorage.getItem("OrusSystem"),Si={data:[],meta:{},server:yi?JSON.parse(yi):{}};function Ci(e){var t=e.children,a=Object(bc.useState)(Si),s=Object(mc.a)(a,2),c=s[0],n=s[1];return Object(bc.useEffect)((function(){pc("config?itemsPage=100","GET").then((function(e){n(Object(l.a)(Object(l.a)({},c),{},{data:e.data,meta:e.meta}))}))}),[]),Object(fc.jsx)(Ni.Provider,{value:c,children:t})}function _i(e){var t=e.filters,a=e.changeState,s=t.user,c=t.branch_id,n=t.date_end,r=t.date_start,i=Object(bc.useState)({branch_id:c,user:s,date_start:r,date_end:n}),o=Object(mc.a)(i,2),d=o[0],j=o[1],u=Object(bc.useContext)(Ni),m=function(){var e=Object(bc.useState)({listUsers:[],user:{}}),t=Object(mc.a)(e,2),a=t[0],s=t[1],c={orderby:"username",order:"asc",rol:10,page:1};return Object(bc.useEffect)((function(){pc(Oc("users",null,c)).then((function(e){e?s(Object(l.a)(Object(l.a)({},a),{},{listUsers:e.data})):console.error("ERROR")}))}),[]),a}(),b=u.data.filter((function(e){return"branches"===e.name})),h=function(e,t){j(Object(l.a)(Object(l.a)({},d),{},Object(N.a)({},e,wc()(t).format("YYYY-MM-DD"))))};return Object(fc.jsx)("div",{className:"border-bottom pb-3 mb-4",children:Object(fc.jsx)("div",{className:"card-body p-0 bg-light",children:Object(fc.jsxs)("div",{className:"form-group row col-lg-12 m-0",children:[Object(fc.jsx)("div",{className:"col-lg-1 mt-sm-3 ml-sm-3",children:Object(fc.jsx)("p",{className:"mt-2 font-weight-bold text-secondary h5",children:"Filtros"})}),Object(fc.jsx)("div",{className:"col-lg-2 mt-sm-3",children:Object(fc.jsx)("div",{className:"col-lg-12",children:Object(fc.jsxs)("select",{className:"form-control text-capitalize",defaultValue:c,onChange:function(e){var t=e.target;return j(Object(l.a)(Object(l.a)({},d),{},{branch_id:t.value}))},children:[Object(fc.jsx)("option",{value:"",children:""===c?"Sucursal":"Todas"}),b.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.data.name},e.id)}))]})})}),Object(fc.jsx)("div",{className:"col-lg-2 mt-sm-3",children:Object(fc.jsx)("div",{className:"col-lg-12",children:Object(fc.jsxs)("select",{className:"form-control text-capitalize",defaultValue:s,onChange:function(e){var t=e.target;return j(Object(l.a)(Object(l.a)({},d),{},{user:t.value}))},children:[Object(fc.jsx)("option",{value:"",children:""===s?"Usuarios":"Todos"}),m.listUsers.map((function(e){return c?"doctor"!==e.roles[0]?Object(fc.jsx)("option",{value:e.id,children:e.name},e.id):null:Object(fc.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),Object(fc.jsxs)("div",{className:"row mt-sm-3 m-0 ml-sm-2",children:[Object(fc.jsx)("label",{className:"col-lg-1 col-form-label p-0 ml-5 mt-2 ml-sm-3",children:"De:"}),Object(fc.jsx)("div",{className:"col-lg-10",children:Object(fc.jsx)(vi.a,{className:"form-control",selected:new Date(wc()(d.date_start).format("MM-DD-YYYY")),onSelect:function(e){return h("date_start",e)},onChange:function(e){return h("date_start",e)}})})]}),Object(fc.jsxs)("div",{className:"row mt-sm-3 m-0",children:[Object(fc.jsx)("label",{className:"col-lg-1 col-form-label p-0 mt-2 ml-sm-3",children:"a:"}),Object(fc.jsx)("div",{className:"col-lg-10",children:Object(fc.jsx)(vi.a,{className:"form-control",selected:new Date(wc()(d.date_end).format("MM-DD-YYYY")),onSelect:function(e){return h("date_end",e)},onChange:function(e){return h("date_end",e)}})})]}),Object(fc.jsx)("div",{className:"col-lg-2 row mt-sm-3 d-flex justify-content-center m-0 h-50",children:Object(fc.jsx)("button",{type:"button",className:"btn w-50 btn-success font-weight-bold",onClick:function(){var e=d.user,t=d.branch_id,s=d.date_end,c=d.date_start;a({branch_id:t,user:e,date_start:c,date_end:s})},children:"Filtrar"})})]})})})}var wi=function(e){Object(Sc.a)(a,e);var t=Object(Cc.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(yc.a)(a,[{key:"render",value:function(){var e=this.props.ventas;return Object(fc.jsx)("div",{className:"card border border-info rounded",children:Object(fc.jsxs)("div",{className:"card-body bg-light",children:[Object(fc.jsx)("h2",{className:"card-title text-secondary",children:"Efectivo de caja"}),Object(fc.jsx)("br",{}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col",children:Object(fc.jsx)("h5",{className:"text-success",children:xi.dollarUS.format(e)})})})]})})}}]),a}(bc.Component);function ki(){var e=Object(bc.useContext)(gc).auth,t=Object(bc.useState)({user:0,date_start:wc()().startOf("week").format("YYYY-MM-DD"),date_end:wc()().format("YYYY-MM-DD"),branch_id:e.branch.id,ventas:0,filterData:{}}),a=Object(mc.a)(t,2),s=a[0],c=a[1],n={user:s.user,date_start:s.date_start,date_end:s.date_end,branch_id:s.branch_id},r=function(e){console.log("Filters Seted up",e),"object"===typeof e?c(Object(l.a)(Object(l.a)({},s),e)):console.error("[Orus system] The filters data not is a object:",e)};return Object(fc.jsxs)("div",{className:"content",children:[Object(fc.jsxs)("p",{className:"h4 border-bottom mb-4",children:["Bienvenido",Object(fc.jsx)("span",{className:"font-weight-bold mx-2 text-capitalize",children:e.name.toLowerCase()}),"este es el resumen."]}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col col-md-12 col-lg-12",children:Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(fc.jsx)(_i,{filters:n,changeState:r})})})})}),Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsxs)("div",{className:"col-lg-4 col-md-12",children:[Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(fc.jsx)(wi,{ventas:s.ventas})})}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(fc.jsx)(Oi,{filters:n,changeState:r})})})]}),Object(fc.jsx)("div",{className:"col-lg-8 col-md-12",children:Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col-lg-4 col-md-12",children:Object(fc.jsx)(fi,{filters:n,changeState:r})}),Object(fc.jsx)("div",{className:"col-lg-8 col-md-12",children:Object(fc.jsx)(pi,{filters:n,changeState:r})})]})})]})]})}function Ei(){var e,t=Object(bc.useContext)(gc),a=t.auth,s=t.getNotifications,n=t.setNotifications,r=Object(bc.useState)({notifications:[],loading:!0,mainRole:a.roles}),i=Object(mc.a)(r,2),o=i[0],d=i[1],j=o.notifications,u=o.loading,m=o.mainRole,b=j?j.length:0,h=j.slice(0,10),x=function(){s().then((function(e){d(Object(l.a)(Object(l.a)({},o),{},{notifications:e,loading:!1}))})).catch((function(){d(Object(l.a)(Object(l.a)({},o),{},{loading:!1}))}))},p=function(e,t){-1===t&&e.preventDefault(),n({id:t})};return Object(bc.useEffect)((function(){return x(),e=setInterval((function(){console.log("[Orus system] check notifications"),d(Object(l.a)(Object(l.a)({},o),{},{loading:!0})),x()}),6e4),function(){clearInterval(e)}}),[]),Object(fc.jsxs)("li",{className:"nav-item dropdown",children:[Object(fc.jsx)("a",{className:"nav-link","data-toggle":"dropdown",href:"#end",children:u?Object(fc.jsx)("i",{className:"fas fa-spinner fa-spin"}):Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("i",{className:"far fa-bell"}),b?Object(fc.jsx)("span",{className:"badge badge-warning navbar-badge",children:b}):null]})}),Object(fc.jsxs)("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[Object(fc.jsxs)("span",{className:"dropdown-header",children:[b," Notificaciones"]}),Object(fc.jsx)("div",{className:"dropdown-divider"}),h.map((function(e){var t=e.type.split("\\",3),a="general",s="fa-file",n=wc()(e.created_at).fromNow(),r="#end";return"ExamNotification"===t[2]&&("doctor"===m?(a="Examen creado",r="/consultorio/registro/"+e.data.id):(a="Examen actualizado",r="/pedidos/registro"),s="fa-file-alt"),Object(fc.jsxs)(c.b,{to:r,className:"dropdown-item",onClick:function(t){p(t,e.id)},children:[Object(fc.jsx)("i",{className:"fas "+s+" mr-1"})," ",a,Object(fc.jsx)("span",{className:"float-right text-sm text-muted",children:n})]},e.id)})),b?Object(fc.jsxs)(bc.Fragment,{children:[Object(fc.jsx)("div",{className:"dropdown-divider"}),Object(fc.jsx)("a",{href:"#end",className:"dropdown-item dropdown-footer",onClick:function(e){e.preventDefault(),p(e,-1)},children:"Marcar todas."})]}):null]})]})}function Li(){return Object(fc.jsxs)("nav",{className:"main-header navbar navbar-expand navbar-dark navbar-lightblue",children:[Object(fc.jsx)("ul",{className:"navbar-nav",children:Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsx)("a",{className:"nav-link","data-widget":"pushmenu",href:"#navbar",role:"button",onClick:function(e){e.preventDefault(),window.$("#body").toggleClass("sidebar-open"),window.$("#body").toggleClass("sidebar-collapse")},children:Object(fc.jsx)("i",{className:"fas fa-bars"})})})}),Object(fc.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(fc.jsxs)("li",{className:"nav-item dropdown",children:[Object(fc.jsx)("a",{href:"#end",className:"nav-link","data-toggle":"dropdown",children:Object(fc.jsx)("i",{className:"far fa-comments"})}),Object(fc.jsxs)("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[Object(fc.jsx)("span",{className:"dropdown-header",children:"Sin comentarios"}),Object(fc.jsx)("div",{className:"dropdown-divider"})]})]}),Object(fc.jsx)(Ei,{})]})]})}function Ii(){var e=Object(bc.useContext)(gc),t=e.auth,a=e.setBranch,s=Object(bc.useContext)(Ni),c=Object(xc.g)().pathname.replace("/",""),r=c||"dashboard",i=t.branch,o=Object(bc.useState)({showChangeBranchs:!1,date:wc()().format("LLLL"),branchSelect:i.id}),d=Object(mc.a)(o,2),j=d[0],u=d[1],m=s.data.filter((function(e){return"branches"===e.name})),b=Object(n.c)();b(oe.setLoggin(t)),b($s.setBranches(m)),console.log("[DEBUG AUTH]",t);var h=function(){u(Object(l.a)(Object(l.a)({},j),{},{showChangeBranchs:!1}))},x=function(){var e=j.branchSelect;if(h(),!e)return console.error("[Orus System][ERROR] branch id is empty"),void window.location.reload();window.Swal.fire({text:"\xbfRealmente desea cambiarse de sucursal?",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){t.dismiss||a(e).then((function(e){e?window.location.reload():window.Swal.fire({icon:"error",text:"Lo sentimos, hay un problema de comunicacion con el servidor. Comfirme el IP.",showConfirmButton:!1,timer:3e3,position:"top center"})}))}))};return Object(fc.jsxs)("div",{className:"content-header",children:[Object(fc.jsx)("div",{className:"container-fluid",children:Object(fc.jsxs)("div",{className:"row",children:[Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("h1",{className:"m-0 text-dark text-capitalize",children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-file"})," ",r]})}),Object(fc.jsxs)("div",{className:"text-center col",children:[Object(fc.jsxs)("small",{className:"p-2 badge badge-secondary text-capitalize",alt:"conectado a",title:"conectado a",children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-wifi text-success"}),s.server.host,s.server.port&&"80"!==s.server.port?":".concat(s.server.port):null]}),Object(fc.jsxs)("small",{className:"p-2 mt-1 ml-1 badge badge-secondary text-capitalize",alt:"Almacenando en",title:"Almacenando en",children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-server text-success"}),t.permissions.includes("auth.changeBranch")?Object(fc.jsx)("a",{href:"#link",className:"text-white",onClick:function(e){e.preventDefault(),u(Object(l.a)(Object(l.a)({},j),{},{showChangeBranchs:!0}))},children:i.name}):i.name]}),Object(fc.jsxs)("small",{className:"p-2 mt-1 ml-2 badge badge-secondary text-capitalize",alt:"Usuario conectado",title:"Usuario conectado",children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-user text-info"})," ",t.username]}),j.showChangeBranchs?Object(fc.jsx)(Vn,{title:"Cambiar de sucursal",body:function(){var e=j.branchSelect;return Object(fc.jsxs)("div",{className:"form-group",children:[Object(fc.jsx)("label",{children:"Seleccione la sucursal"}),Object(fc.jsx)("select",{className:"form-control text-capitalize",onChange:function(e){var t=e.target;return u(Object(l.a)(Object(l.a)({},j),{},{branchSelect:parseInt(t.value)}))},defaultValue:null===i||void 0===i?void 0:i.id,children:m.map((function(e){return Object(fc.jsx)("option",{value:e.id,children:e.data.name},e.id)}))}),Object(fc.jsx)("div",{className:"mt-2 text-right",children:Object(fc.jsx)("button",{className:"btn btn-default",type:"button",onClick:x,disabled:e===(null===i||void 0===i?void 0:i.id),children:"Cambiar"})})]})}(),handleCancel:h}):null]}),Object(fc.jsx)("div",{className:"col",children:Object(fc.jsxs)("h6",{className:"text-right text-muted",children:[Object(fc.jsx)("i",{className:"mr-1 fas fa-calendar"})," ",j.date]})})]})}),Object(fc.jsx)("hr",{})]})}function Di(){var e=Object(bc.useContext)(gc),t=e.auth,a=e.outSession,s="Optica Madero",n=Object(xc.g)().pathname.replace("/",""),r="/img/avatars/avatar5.png";return"ventas"===t.roles&&(r="/img/avatars/avatar2.png"),"admin"===t.roles&&(r="/img/avatars/avatar3.png"),2===t.idUser&&(r="/img/avatars/avatar4.png"),Object(fc.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary",children:[Object(fc.jsxs)(c.b,{to:"/",className:"brand-link",children:[Object(fc.jsx)("img",{src:"/img/logo.png",alt:s+" logo ",className:"brand-image img-circle elevation-2",style:{opacity:.8,maxHeight:16}}),Object(fc.jsx)("span",{className:"brand-text font-weight-light text-uppercase",children:s})]}),Object(fc.jsxs)("div",{className:"sidebar",children:[Object(fc.jsxs)("div",{className:"pb-3 mt-3 mb-3 user-panel d-flex",children:[Object(fc.jsx)("div",{className:"image",children:Object(fc.jsx)("img",{src:r,className:"img-circle elevation-2",alt:t.name})}),Object(fc.jsx)("div",{className:"info",children:Object(fc.jsxs)("a",{href:"#end",className:"d-block text-capitalize",children:[t.name,Object(fc.jsxs)("small",{className:"text-lowercase",children:["(",t.username,")"]}),Object(fc.jsx)("br",{}),Object(fc.jsx)("span",{className:"badge badge-light",children:"admin"!==t.roles?"ventas"===t.roles?"Ventas":"Optometrista":"Administrador"})]})})]}),Object(fc.jsx)("nav",{className:"mt-2",children:Object(fc.jsxs)("ul",{className:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:["admin"===t.roles?Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)(c.b,{to:"/",className:""===n?"nav-link active":"nav-link",children:[Object(fc.jsx)("i",{className:"nav-icon fas fa-tachometer-alt"}),Object(fc.jsxs)("p",{children:["Dashboard",Object(fc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}):null,Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)(c.b,{to:"/contactos",className:"contactos"===n?"nav-link active":"nav-link",children:[Object(fc.jsx)("i",{className:"nav-icon fas fa-address-book"}),Object(fc.jsxs)("p",{children:["Contactos",Object(fc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)(c.b,{to:"/consultorio",className:"consultorio"===n||""===n&&"doctor"===t.roles?"nav-link active":"nav-link",children:[Object(fc.jsx)("i",{className:"nav-icon fas fa-notes-medical"}),Object(fc.jsxs)("p",{children:["Examenes",Object(fc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),"doctor"!==t.roles?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)(c.b,{to:"/pedidos",className:"pedidos"===n||""===n&&"ventas"===t.roles?"nav-link active":"nav-link",children:[Object(fc.jsx)("i",{className:"nav-icon fas fa-clipboard-list"}),Object(fc.jsxs)("p",{children:["Pedidos",Object(fc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)(c.b,{to:"/notas",className:"notas"===n?"nav-link active":"nav-link",children:[Object(fc.jsx)("i",{className:"nav-icon fas fa-cash-register"}),Object(fc.jsxs)("p",{children:["Ventas",Object(fc.jsx)("i",{className:"right fas fa-angle-left"})]})]})})]}):null,"admin"===t.roles?Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)("li",{className:"almacen"===n?"nav-item has-treeview menu-open":"nav-item has-treeview ",children:Object(fc.jsxs)(c.b,{to:"/almacen",className:"almacen"===n?"nav-link active":"nav-link",children:[Object(fc.jsx)("i",{className:"nav-icon fas fa-database"}),Object(fc.jsxs)("p",{children:["Almacen",Object(fc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)(c.b,{to:"/usuarios",className:"usuarios"===n?"nav-link active":"nav-link",children:[Object(fc.jsx)("i",{className:"nav-icon fas fa-user"}),Object(fc.jsxs)("p",{children:["Usuarios",Object(fc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)(c.b,{to:"/configuraciones",className:"configuraciones"===n?"nav-link active":"nav-link",children:[Object(fc.jsx)("i",{className:"nav-icon fas fa-tools"}),Object(fc.jsxs)("p",{children:["Configuraciones",Object(fc.jsx)("i",{className:"right fas fa-angle-left"})]})]})})]}):null,Object(fc.jsx)("li",{className:"nav-item",children:Object(fc.jsxs)(c.b,{to:"/",className:"nav-link",onClick:function(e){e.preventDefault(),window.Swal.fire({title:"Session",text:"\xbfEsta seguro de cerrar la sesion?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Si",cancelButtonText:"Cancelar"}).then((function(e){e.dismiss||(a(),setTimeout((function(){window.location.reload()}),2e3))}))},children:[Object(fc.jsx)("i",{className:"nav-icon fas fa-sign-out-alt"}),Object(fc.jsx)("p",{children:"Cerrar sesion"})]})})]})})]})]})}function Ti(e){var t=e.children,a={};return Object(fc.jsxs)("div",{className:"wrapper",children:[Object(fc.jsx)(Li,{logOut:function(){},data:a,page:function(){}}),Object(fc.jsx)(Di,{companyName:"company",user:a,page:function(){},logOut:function(){},active:"active"}),Object(fc.jsxs)("div",{className:"content-wrapper",children:[Object(fc.jsx)(Ii,{}),Object(fc.jsx)("div",{className:"content",children:Object(fc.jsx)("div",{className:"container-fluid",children:Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"col-lg-12",children:t})})})})]})]})}function Ai(e){var t=e.auth;return Object(fc.jsx)(Ci,{children:Object(fc.jsxs)(Ti,{children:[Object(fc.jsx)(xc.a,{exact:!0,path:"/",render:function(e){switch(t.roles){case"doctor":return Object(fc.jsx)(Cr,Object(l.a)({},e));case"ventas":return Object(fc.jsx)(Kr,Object(l.a)({},e));default:return Object(fc.jsx)(ki,Object(l.a)({},e))}}}),Object(fc.jsx)(xc.a,{path:"/usuarios/registro/:id?",render:function(e){return Object(fc.jsx)(Uc,Object(l.a)(Object(l.a)({},e),{},{page:function(){}}))}}),Object(fc.jsx)(xc.a,{path:"/usuarios",render:function(e){return Object(fc.jsx)(Gc,Object(l.a)(Object(l.a)({},e),{},{page:function(){}}))}}),Object(fc.jsx)(xc.a,{path:"/almacen/:id?",render:function(e){return Object(fc.jsx)(Cn,Object(l.a)(Object(l.a)({},e),{},{page:function(){}}))}}),Object(fc.jsx)(xc.a,{path:"/contactos/:id?",render:function(e){return Object(fc.jsx)(Xn,Object(l.a)(Object(l.a)({},e),{},{page:function(){}}))}}),Object(fc.jsx)(xc.a,{path:"/consultorio/:id?",render:function(e){return Object(fc.jsx)(Cr,Object(l.a)({},e))}}),Object(fc.jsx)(xc.a,{path:"/configuraciones",render:function(e){return Object(fc.jsx)(ar,Object(l.a)(Object(l.a)({},e),{},{page:function(){}}))}}),Object(fc.jsx)(xc.a,{path:"/pedidos/:id?",render:function(e){return Object(fc.jsx)(Kr,Object(l.a)({},e))}}),Object(fc.jsx)(xc.a,{path:"/notas/:id?",render:function(e){return Object(fc.jsx)(hi,Object(l.a)(Object(l.a)({},e),{},{page:function(){}}))}})]})})}function Pi(){return Object(fc.jsxs)("div",{children:[Object(fc.jsx)("h1",{children:"Portal Optica Madero"}),Object(fc.jsx)("p",{children:"Para accesar al portal inicia session aqui: "})]})}function Fi(){return Object(fc.jsx)(fc.Fragment,{children:Object(fc.jsx)(xc.a,{exact:!0,path:"/",render:function(e){return Object(fc.jsx)(Pi,{})}})})}function Mi(){var e=Object(n.c)();return Object(bc.useEffect)((function(){e(g.changeNamePage(""))}),[]),Object(fc.jsx)("div",{className:"container text-center font-weight-bold d-flex justify-content-center mt-5",children:Object(fc.jsx)("h1",{children:"404 Not Found"})})}function Bi(){var e=Object(xc.f)(),t=Object(bc.useContext)(gc),a=localStorage.getItem("OrusSystem"),s={protocol:window.location.protocol.replace(":",""),host:window.location.hostname,port:window.location.port},c=a?JSON.parse(a):s,n=Object(bc.useState)({load:!1,email:"",password:"",txtHost:"".concat(c.protocol,"://").concat(c.host,":").concat(c.port),hostShow:!1}),r=Object(mc.a)(n,2),i=r[0],o=r[1],d=Object(bc.useRef)(),j=Object(bc.useRef)(),u=function(){return i.email?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i.email)?["domain.com","opticamadero.com"].includes(i.email.split("@")[1])?i.password?i.password.length<8?window.Swal.fire({icon:"error",text:"El password debe de tener al menos 8 caracteres",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){j.current.focus()})):(o(Object(l.a)(Object(l.a)({},i),{},{load:!0})),void t.setSession({email:i.email,password:i.password}).then((function(t){if(o(Object(l.a)(Object(l.a)({},i),{},{load:!1})),!t.status){var a,s,c=t.message;if(null!==(a=t.data)&&void 0!==a&&a.errors)c=null===(s=t.data)||void 0===s?void 0:s.errors[Object.keys(t.data.errors)[0]][0];return!c&&t.data&&(c=t.data.message),window.Swal.fire({icon:"error",text:c,showConfirmButton:!1,timer:2500,position:"top center"})}e.push("/")}))):window.Swal.fire({icon:"error",text:"El campo de constrase\xf1a es requerido",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){j.current.focus()})):window.Swal.fire({icon:"error",text:"El dominio de este correo no es aceptado",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){o(Object(l.a)(Object(l.a)({},i),{},{email:""}))})):window.Swal.fire({icon:"error",text:"El usuario debe de ser un correo valido",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){d.current.focus()})):window.Swal.fire({icon:"error",text:"El campo de correo electronico es requerido",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){d.current.focus()}))},m=function(e,t){"Enter"===e&&t()},b=function(){var e,t,a,s=i.txtHost.split(":");2===s.length?(a="http",e=s[0].replace("//",""),t=s[1]):3===s.length?(a=s[0],e=s[1].replace("//",""),t=s[2]):(a="http",e=window.location.hostname,t=""),localStorage.setItem("OrusSystem",JSON.stringify(Object(l.a)(Object(l.a)({},c),{},{protocol:a,host:e,port:t,token:""}))),o(Object(l.a)(Object(l.a)({},i),{},{hostShow:!1})),window.Swal.fire({icon:"success",text:"Cambio de servidor exitoso",showConfirmButton:!1,timer:2500,position:"top center"})},h=function(){i.email&&j.current.focus()};return Object(bc.useEffect)((function(){var a;null!==(a=t.auth)&&void 0!==a&&a.isLogged&&e.push("/")}),[]),Object(fc.jsx)("div",{className:"login-page",children:Object(fc.jsxs)("div",{className:"login-box",children:[Object(fc.jsx)("div",{className:"login-logo",children:Object(fc.jsxs)("a",{href:"#logo",onClick:function(e){return e.preventDefault()},children:[Object(fc.jsx)("b",{className:"text-primary",children:"Orus"})," LTE"]})}),Object(fc.jsx)("div",{className:"rounded shadow-lg card",children:Object(fc.jsxs)("div",{className:"card-body login-card-body",children:[Object(fc.jsx)("p",{className:"login-box-msg text-uppercase",children:Object(fc.jsx)("span",{className:"p-2 badge badge-secondary",children:"Optica Madero"})}),Object(fc.jsxs)("form",{autoComplete:"off",children:[Object(fc.jsxs)("div",{className:"mb-0 input-group",children:[Object(fc.jsx)("input",{type:"email",className:"form-control text-lowercase",placeholder:"Correo electonico",onChange:function(e){var t=e.target;return o(Object(l.a)(Object(l.a)({},i),{},{email:t.value.toLowerCase()}))},onKeyPress:function(e){var t=e.key;return m(t,h)},defaultValue:i.email,autoComplete:"false",ref:d,autoFocus:!i.email}),Object(fc.jsx)("div",{className:"input-group-append",children:Object(fc.jsx)("div",{className:"input-group-text",children:Object(fc.jsx)("span",{className:"fas fa-user"})})})]}),Object(fc.jsxs)("div",{className:"mt-3 input-group",children:[Object(fc.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",onChange:function(e){var t=e.target;return o(Object(l.a)(Object(l.a)({},i),{},{password:t.value}))},onKeyPress:function(e){var t=e.key;return m(t,u)},defaultValue:i.password,autoComplete:"false",ref:j,autoFocus:!!i.email&&!i.password}),Object(fc.jsx)("div",{className:"input-group-append",children:Object(fc.jsx)("div",{className:"input-group-text",children:Object(fc.jsx)("span",{className:"fas fa-lock"})})})]}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsxs)("div",{className:"my-3 col-12",children:[Object(fc.jsxs)("a",{href:"#tools",onClick:function(){return o(Object(l.a)(Object(l.a)({},i),{},{hostShow:!i.hostShow}))},className:"text-muted",children:[Object(fc.jsx)("i",{className:"mx-1 fas fa-wifi"})," Servidor"]}),i.hostShow?Object(fc.jsxs)("div",{className:"mb-3 input-group",children:[Object(fc.jsx)("input",{type:"text",className:"form-control",placeholder:"Servidor",autoComplete:"off",onChange:function(e){var t=e.target;return o(Object(l.a)(Object(l.a)({},i),{},{txtHost:t.value.toLowerCase()}))},defaultValue:i.txtHost,onKeyPress:function(e){var t=e.key;return m(t,b)}}),Object(fc.jsx)("div",{className:"input-group-append",children:Object(fc.jsx)("div",{className:"input-group-text",children:Object(fc.jsx)("span",{className:"fas fa-server"})})})]}):null]})}),Object(fc.jsx)("div",{className:"row",children:Object(fc.jsx)("div",{className:"text-center col-12",children:Object(fc.jsx)("button",{type:"button",className:i.load?"btn btn-outline-secondary btn-block":"btn btn-primary btn-block",onClick:u,disabled:!!i.load,children:i.load?Object(fc.jsx)("div",{className:"spinner-border text-secondary",children:Object(fc.jsx)("span",{className:"sr-only",children:"Loading..."})}):"Iniciar session"})})})]})]})})]})})}function Ui(){var e=Object(bc.useContext)(gc).auth;return Object(fc.jsxs)(xc.c,{children:[Object(fc.jsx)(xc.a,{path:"/login",render:function(e){return Object(fc.jsx)(Bi,{})}}),null!==e&&void 0!==e&&e.isLogged?Object(fc.jsx)(Ai,{auth:e}):Object(fc.jsx)(Fi,{}),Object(fc.jsx)(xc.a,{component:Mi})]})}function zi(){return Object(fc.jsx)(c.a,{children:Object(fc.jsx)(vc,{children:Object(fc.jsx)(n.a,{store:uc,children:Object(fc.jsx)(Ui,{})})})})}Object(s.render)(Object(fc.jsx)(zi,{}),document.getElementById("root"))},31:function(e,t){e.exports={dollarUS:Intl.NumberFormat("en-US",{style:"currency",currency:"USD"})}}},[[132,1,2]]]);
//# sourceMappingURL=main.116ac3fe.chunk.js.map