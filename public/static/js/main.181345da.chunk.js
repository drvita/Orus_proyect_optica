(this.webpackJsonporussystem=this.webpackJsonporussystem||[]).push([[0],{174:function(e,t,a){"use strict";a.r(t);var n=a(38),c=a(15),s=a(14),r=a(36),i=a(90),o=a(1),l="CHANGE_HOST",d="CHANGE_PAGE",u=localStorage.getItem("OrusSystem"),j=JSON.parse(u||"{}"),b=j.port,m=void 0===b?window.location.protocol.toString().replace(":",""):b,h=j.host,x=void 0===h?window.location.hostname:h,O=j.company,p={port:m,host:x,company:void 0===O?"optica madero":O,namePage:"dashboard",success:void 0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case l:var n=localStorage.getItem("OrusSystem"),c=a.host,s=void 0===c?window.location.hostname:c,r=a.port,i=void 0===r?window.location.protocol.toString().replace(":",""):r,u={ls:JSON.parse(n||"{}")},j=u.ls,b=void 0===j?{}:j;return console.log("[Orus System] cambiando datos de host:",i,s),b.port=i,b.host=s,Object(o.a)(Object(o.a)({},e),{},{port:i,host:s,success:!0});case d:return Object(o.a)(Object(o.a)({},e),{},{namePage:a});default:var m=localStorage.getItem("OrusSystem"),h={ls:JSON.parse(m||"{}")},x=h.ls,O=void 0===x?{}:x;return O.port=e.port,O.host=e.host,O.company=e.company,Object(o.a)(Object(o.a)({},e),{},{success:void 0})}},v={changeHost:function(e){return{type:l,payload:e}},changeNamePage:function(e){return{type:d,payload:e}}},g=f,N=a(10),y="SAGA_TRY_LOGING",w="SAGA_CHECK_LOGING",C="SAGA_GET_NOTIFY",S="SAGA_READ_NOTIFYS",_="SAGA_GET_LIST_USERS",k="SAGA_GET_USER",E="SAGA_DELETE_USER",L="SAGA_SAVE_USER",I="SAGA_CLEAR_TOKEN_USER",T="SET_LOGGIN",D="SET_LOGOUT",P="SET_NOTIFYS",A="SET_MESSAGES",B="SET_LIST_USERS",F="SET_OPTIONS_USERS",M="SET_USER",z=localStorage.getItem("OrusSystem"),G=JSON.parse(z||"{}"),U=G.isLogged,V=void 0!==U&&U,R=G.idUser,Y=void 0===R?0:R,q=G.username,$=void 0===q?null:q,J=G.name,H=void 0===J?null:J,Z=G.rol,K=void 0===Z?null:Z,Q=G.roles,X=void 0===Q?null:Q,W=G.permissions,ee=void 0===W?null:W,te=G.email,ae=void 0===te?null:te,ne=G.token,ce=void 0===ne?null:ne,se=G.branch,re={dataLoggin:{isLogged:V,idUser:Y,username:$,name:H,rol:K,email:ae,token:ce,branch:void 0===se?null:se,roles:X,permissions:ee},options:{page:1,orderby:"created_at",order:"desc",search:"",itemsPage:10},notifications:[],list:[],meta:{total:0},user:{},messages:[],loading:!1,loading_notify:!1},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case y:case w:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case C:case S:return Object(o.a)(Object(o.a)({},e),{},{loading_notify:!0});case _:return Object(o.a)(Object(o.a)({},e),{},{list:[],meta:{},loading:!0});case k:return Object(o.a)(Object(o.a)({},e),{},{user:{},loading:!0});case E:case L:case I:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case T:var n=re.dataLoggin;return n.isLogged=!0,n.idUser=a.idUser,n.username=a.username,n.name=a.name,n.roles=[a.roles],n.permissions=a.permissions,n.email=a.email,n.token=a.token,n.branch=a.branch,e.dataLoggin.isLogged||console.log("[Orus System] Acceso a sistema exitoso",n.username),Object(o.a)(Object(o.a)({},e),{},{dataLoggin:Object(o.a)({},n),loading:!1});case D:var c=localStorage.getItem("OrusSystem"),s={ls:JSON.parse(c||"{}")},r=s.ls,i=void 0===r?{}:r;return delete i.email,delete i.idUser,delete i.isLogged,delete i.name,delete i.rol,delete i.token,delete i.username,delete i.branch,delete i.roles,delete i.permissions,console.log("[Orus System] Cierre de sistema exitoso"),Object(o.a)(Object(o.a)({},e),{},{dataLoggin:{isLogged:!1,idUser:0,username:null,name:null,rol:null,roles:null,permissions:null,email:null,token:null},notifications:[],list:[],meta:{},user:{},messages:[],loading:!1});case P:return Object(o.a)(Object(o.a)({},e),{},{notifications:a,loading_notify:!1,messages:[]});case A:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case B:return Object(o.a)(Object(o.a)({},e),{},{list:a.data,meta:a.meta,loading:!1,messages:[]});case F:var l=a.key,d=a.value;return Object(o.a)(Object(o.a)({},e),{},{options:Object(o.a)(Object(o.a)({},e.options),{},Object(N.a)({},l,d))});case M:return Object(o.a)(Object(o.a)({},e),{},{user:a,list:[],meta:{},loading:!1,messages:[]});default:return Object(o.a)({},e)}},oe={loggin:function(e){return{type:y,payload:e}},getNotifyUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:C,payload:e}},readNotifyUser:function(e){return{type:S,payload:e}},setLoggin:function(e){return{type:T,payload:e}},setLogout:function(){return{type:D,payload:null}},setNotifys:function(e){return{type:P,payload:e}},setMessages:function(e){return{type:A,payload:e}},getListUsers:function(e){return{type:_,payload:e}},setListUsers:function(e){return{type:B,payload:e}},setOptions:function(e){return{type:F,payload:e}},setUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:M,payload:e}},getUser:function(e){return{type:k,payload:e}},deleteUser:function(e){return{type:E,payload:e}},saveUser:function(e){return{type:L,payload:e}},clearTokenUser:function(e){return{type:I,payload:e}}},le=oe,de=a(3),ue=a.n(de),je=a(4),be=a(84),me=a(12);function he(e){return xe.apply(this,arguments)}function xe(){return xe=Object(me.a)(ue.a.mark((function e(t){var a,n,c,s,r,i,o,l,d,u,j,b,m,h,x,O,p=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>1&&void 0!==p[1]?p[1]:"GET",n=p.length>2?p[2]:void 0,c=p.length>3&&void 0!==p[3]?p[3]:null,s=sessionStorage.getItem("OrusSystem"),r=JSON.parse(s||"{}"),i=r.token,o=void 0===i?"":i,l=localStorage.getItem("OrusSystem"),d=JSON.parse(l||"{}"),u=d.protocol,j=void 0===u?"http":u,b=d.host,m=void 0===b?window.location.hostname.toString():b,h=d.port,x=void 0===h?"80":h,O={method:a,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o}},["POST","PUT"].includes(a.toUpperCase())&&n&&(O.body=JSON.stringify(n)),c&&(O.signal=c.signal),e.next=10,fetch("".concat(j,"://").concat(m,":").concat(x,"/api/").concat(t),O).then(function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=200&&t.status<300)){e.next=27;break}a=Object(be.a)(t.headers.entries()),e.prev=2,a.s();case 4:if((n=a.n()).done){e.next=19;break}if("content-type"!==(c=n.value)[0]){e.next=17;break}e.t0=c[1],e.next="application/json"===e.t0?10:"text/csv; charset=UTF-8"===e.t0?13:16;break;case 10:return e.next=12,t.json();case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,t.blob();case 15:return e.abrupt("return",e.sent);case 16:return e.abrupt("return",null);case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(2),a.e(e.t1);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return e.abrupt("return",t.json());case 28:case"end":return e.stop()}}),e,null,[[2,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error("[Orus System] Query API failer:",t),console.error("[Orus System] Query API message:",e.message),null}));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function Oe(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e,c=null,s=Object.keys(a);return t&&(n+="/".concat(t)),"object"!==typeof a||Array.isArray(a)||s&&(s.map((function(e){return null!==a[e]&&""!==a[e]||delete a[e],null})),Object.keys(a).length&&(c=new URLSearchParams(a),n+="?".concat(c))),n}var pe=ue.a.mark(fe);function fe(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload,c.prev=1,console.log("[Orus System] Consultando credenciales en la API"),!t.email||!t.password){c.next=20;break}return c.next=6,Object(je.b)(he,"user/login","POST",t);case 6:if(!(a=c.sent).data){c.next=15;break}return console.log("[Orus System] Servidor:",a.message),c.next=11,Object(je.c)(le.setLoggin(a));case 11:return c.next=13,Object(je.c)(le.setMessages([{type:"success",text:"Bienvenido al sistema: ".concat(a.data.username)}]));case 13:c.next=18;break;case 15:return console.error("[Orus System] Fallo la validacion de credenciales en servidor",a),c.next=18,Object(je.c)(le.setMessages([{type:"error",text:"Credenciales no validas"}]));case 18:c.next=22;break;case 20:return c.next=22,Object(je.c)(le.setMessages([{type:"error",text:"No se enviaron las credenciales del usuario"}]));case 22:c.next=30;break;case 24:return c.prev=24,c.t0=c.catch(1),n=c.t0.message.includes("Failed to fetch"),console.error("[Orus System] Error en handle loggin:",c.t0.message),c.next=30,Object(je.c)(le.setMessages([{type:"error",text:n?"No hay comunicacion con el servidor, revise conexion.":"Desconocido, comuniquese con el administrador del sistema"}]));case 30:case"end":return c.stop()}}),pe,null,[[1,24]])}var ve=ue.a.mark(ge);function ge(){var e,t;return ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("[Orus System] Consultando notificaciones en la API"),a.next=4,Object(je.b)(he,"user","GET");case 4:if(!(e=a.sent).data||!e.data.id){a.next=13;break}return t=e.data.unreadNotifications,console.log("[Orus System] Notificaciones encontradas:",t.length),console.log("[Orus System] Verificacion de usuario correcta",e.data.username),a.next=11,Object(je.c)(le.setNotifys(t));case 11:a.next=16;break;case 13:if(!e.message||"Unauthenticated."!==e.message){a.next=16;break}return a.next=16,Object(je.c)(le.setLogout());case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(0),console.error("[Orus System] Error en notificaciones/saga handleNotify",a.t0.message);case 21:case"end":return a.stop()}}),ve,null,[[0,18]])}var Ne=ue.a.mark(ye);function ye(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,console.log("[Orus System] Enviando notificaciones a la API"),c.next=5,Object(je.b)(he,"user/readAllNotifications","POST",t);case 5:if(a=c.sent,n=parseInt(t.id)<0?"Todas":1,!a.success){c.next=11;break}return console.log("[Orus System] Notificaciones marcadas leidas:",n),c.next=11,Object(je.c)(le.getNotifyUser());case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(1),console.error("[Orus System] Error en saga/Users handleNotifyRead",c.t0.message);case 16:case"end":return c.stop()}}),Ne,null,[[1,13]])}var we=ue.a.mark(Ce);function Ce(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("users",null,t),c.next=5,Object(je.b)(he,a);case 5:if(!(n=c.sent).data){c.next=11;break}return c.next=9,Object(je.c)(le.setListUsers(n));case 9:c.next=12;break;case 11:n.message&&(console.error("[Orus system] Error en la cosnulta de usuarios",n.message),window.sendPushMessage("Orus System",n.message));case 12:c.next=19;break;case 14:return c.prev=14,c.t0=c.catch(1),console.error("[Orus System] Error en saga/users handleGetList:",c.t0.message),c.next=19,Object(je.c)(le.setMessages([]));case 19:case"end":return c.stop()}}),we,null,[[1,14]])}var Se=ue.a.mark(_e);function _e(e){var t,a;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(je.b)(he,"users/".concat(t));case 4:if(!(a=n.sent).data){n.next=10;break}return n.next=8,Object(je.c)(le.setUser(a.data));case 8:n.next=11;break;case 10:console.error("[OrusSystem] Error en saga/users por servidor handleGetUser",a);case 11:n.next=18;break;case 13:return n.prev=13,n.t0=n.catch(1),console.error("[OrusSystem] Error en saga/users handleGetUser:",n.t0.message),n.next=18,Object(je.c)(le.setMessages([]));case 18:case"end":return n.stop()}}),Se,null,[[1,13]])}var ke=ue.a.mark(Ee);function Ee(e){var t,a,n,c,s;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,n=t.options,c="users/".concat(a),r.next=7,Object(je.b)(he,c,"DELETE");case 7:if(s=r.sent){r.next=16;break}return console.log("[Orus System] Usuario eliminado con exito",a),r.next=12,Object(je.c)(le.setMessages([{type:"success",text:"Usuario eliminado con exito"}]));case 12:return r.next=14,Object(je.c)(le.getListUsers(n));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar el usuario",s.message),!s.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)(le.setMessages([{type:"error",text:"No se puede eliminar un usuario que tiene actividades",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en saga/users handledDeleteUser",r.t0.message),r.next=27,Object(je.c)(le.setMessages([{type:"error",text:"al eliminar al usuario, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),ke,null,[[1,22]])}var Le=ue.a.mark(Ie);function Ie(e){var t,a,n,c,s,r,i,o,l,d,u,j;return ue.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,b.prev=1,a=t.data,n=void 0===a?{}:a,c=t.id,s=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,o=t.currentUser,l=void 0===o?0:o,d=Oe("users",s),u=s?"PUT":"POST",b.next=14,Object(je.b)(he,d,u,n);case 14:if(!(j=b.sent).message){b.next=17;break}throw new Error(j.message);case 17:return s?console.log("[Orus System] Usuario actualizada con exito: "+s):console.log("[Orus system] Usuario creado con exito",j.data.id),b.next=20,Object(je.c)(le.setMessages([{type:"success",text:s?"Usuario actualizado con exito":"Usuario almacenado con exito"}]));case 20:if(!Object.keys(i).length){b.next=27;break}return b.next=23,Object(je.c)(le.getListUsers(i));case 23:return b.next=25,Object(je.c)(le.setUser({}));case 25:case 30:b.next=34;break;case 27:if(s!==l){b.next=32;break}return b.next=30,Object(je.c)(le.setLoggin({data:j.data}));case 32:return b.next=34,Object(je.c)(le.setUser(j.data));case 34:b.next=41;break;case 36:return b.prev=36,b.t0=b.catch(1),console.error("[Orus System] Error en saga/users handleSaveUser",b.t0.message),b.next=41,Object(je.c)(le.setMessages([{type:"error",text:"al almacenar el usuario, intentelo mas tarde"}]));case 41:case"end":return b.stop()}}),Le,null,[[1,36]])}var Te=ue.a.mark(De);function De(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,console.log("[Orus System] Enviando notificaciones a la API"),a=Oe("users/clearToken",t),c.next=6,Object(je.b)(he,a,"POST");case 6:if(!(n=c.sent).success){c.next=13;break}return console.log("[Orus System] Se ha eliminado el token del usuario: "+t),c.next=11,Object(je.c)(le.getUser(t));case 11:c.next=14;break;case 13:console.error("[Orus System] No se elimino el token del usuario: "+t,n);case 14:c.next=19;break;case 16:c.prev=16,c.t0=c.catch(1),console.error("[Orus System] Error en saga/User handleClearToken:",c.t0.message);case 19:case"end":return c.stop()}}),Te,null,[[1,16]])}var Pe=ue.a.mark(Ae);function Ae(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de usuario"),e.next=3,Object(je.d)(y,fe);case 3:return e.next=5,Object(je.d)(C,ge);case 5:return e.next=7,Object(je.d)(S,ye);case 7:return e.next=9,Object(je.d)(_,Ce);case 9:return e.next=11,Object(je.d)(k,_e);case 11:return e.next=13,Object(je.d)(E,Ee);case 13:return e.next=15,Object(je.d)(L,Ie);case 15:return e.next=17,Object(je.d)(I,De);case 17:case"end":return e.stop()}}),Pe)}var Be=ie,Fe="SAGA_GET_LIST_ORDER",Me="SAGA_DELETE_ORDER",ze="SAGA_SAVE_ORDER",Ge="SAGA_GET_ORDER",Ue="SET_LIST_ORDER",Ve="SET_MESSAGE_ORDER",Re="SET_ORDER",Ye="SET_OPTIONS_ORDER",qe={list:[],metaList:{},order:{id:0},options:{page:1,orderby:"created_at",order:"desc",search:"",status:"",itemsPage:10},messages:[],loading:!1},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Fe:return Object(o.a)(Object(o.a)({},e),{},{list:[],metaList:{},order:{id:0},loading:!0});case Me:case ze:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Ge:return Object(o.a)(Object(o.a)({},e),{},{list:[],metaList:{},order:{id:0},loading:!0});case Ue:return Object(o.a)(Object(o.a)(Object(o.a)({},e),a.result),{},{messages:[],loading:!1});case Ve:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case Re:return Object(o.a)(Object(o.a)({},e),{},{order:a,messages:[],loading:!1});case Ye:var n=a.key,c=a.value;return Object(o.a)(Object(o.a)({},e),{},{options:Object(o.a)(Object(o.a)({},e.options),{},Object(N.a)({page:1},n,c))});default:return Object(o.a)({},e)}},Je={result:{list:[],metaList:{}}},He={getListOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Fe,payload:e}},deleteOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Me,payload:e}},saveOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ze,payload:e}},getOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ge,payload:e}},setListOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je;return{type:Ue,payload:e}},setMessageOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Ve,payload:e}},setOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Re,payload:e}},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ye,payload:e}}},Ze=He,Ke=ue.a.mark(Qe);function Qe(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("orders",null,t),c.next=5,Object(je.b)(he,a);case 5:return n=c.sent,c.next=8,Object(je.c)(Ze.setListOrder({result:{list:n.data,metaList:n.meta}}));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.error("[Orus System] Error en saga/order handleGetList:",c.t0),c.next=15,Object(je.c)(Ze.setMessageOrder([]));case 15:case"end":return c.stop()}}),Ke,null,[[1,10]])}var Xe=ue.a.mark(We);function We(e){var t,a,n,c,s;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,n=t.options,c="orders/".concat(a),r.next=7,Object(je.b)(he,c,"DELETE");case 7:if(s=r.sent){r.next=16;break}return console.log("[Orus System] Pedido eliminado con exito",a),r.next=12,Object(je.c)(Ze.setMessageOrder([{type:"success",text:"Pedido eliminado con exito"}]));case 12:return r.next=14,Object(je.c)(Ze.getListOrder(n));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar pedido",s.message),!s.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)(Ze.setMessageOrder([{type:"error",text:"No se puede eliminar un pedido que tiene asignada una nota de venta",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en handledDeleteOrder",r.t0),r.next=27,Object(je.c)(Ze.setMessageOrder([{type:"error",text:"al eliminar el pedidos, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),Xe,null,[[1,22]])}var et=ue.a.mark(tt);function tt(e){var t,a,n,c,s,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,console.log("DEBUG SAVE ORDER payload",t),u.prev=2,a=t.data,n=void 0===a?{}:a,c=t.id,s=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,o=Oe("orders",s),l=s?"PUT":"POST",u.next=13,Object(je.b)(he,o,l,n);case 13:if(!(d=u.sent).message){u.next=16;break}throw new Error(d.message);case 16:return s?console.log("[Orus System] Pedido actualizado con exito: "+s):console.log("[Orus system] Pedido creado con exito",d.data.id),u.next=19,Object(je.c)(Ze.setMessageOrder([{type:"success",text:s?"Pedido actualizado con exito":"Pedido almacenado con exito"}]));case 19:return u.next=21,Object(je.c)(Ze.getListOrder(i));case 21:u.next=28;break;case 23:return u.prev=23,u.t0=u.catch(2),console.error("[Orus System] Error in handleSaveOrder",u.t0),u.next=28,Object(je.c)(Ze.setMessageOrder([{type:"error",text:"al almacenar el pedido, intentelo mas tarde"}]));case 28:case"end":return u.stop()}}),et,null,[[2,23]])}var at=ue.a.mark(nt);function nt(e){var t,a;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(je.b)(he,"orders/".concat(t));case 4:if(!(a=n.sent).data){n.next=11;break}return console.log("[Orus System] Orden:",a.data.id),n.next=9,Object(je.c)(Ze.setOrder(a.data));case 9:n.next=12;break;case 11:console.error("[Orus System] Error en handleGetOrder",a);case 12:n.next=19;break;case 14:return n.prev=14,n.t0=n.catch(1),console.error("[Orus System] Error en saga/order handleGetOrder:",n.t0),n.next=19,Object(je.c)(Ze.setMessageOrder([]));case 19:case"end":return n.stop()}}),at,null,[[1,14]])}var ct=ue.a.mark(st);function st(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de ordenes"),e.next=3,Object(je.d)(Fe,Qe);case 3:return e.next=5,Object(je.d)(Me,We);case 5:return e.next=7,Object(je.d)(ze,tt);case 7:return e.next=9,Object(je.d)(Ge,nt);case 9:case"end":return e.stop()}}),ct)}var rt=$e,it="SAGA_GET_LIST_CATEGORIES",ot="SAGE_DELETE_CATEGORY",lt="SAGA_GET_CATEGORY",dt="SAGA_SAVE_CATEGORY",ut="SET_LIST_CATEGORY",jt="SET_MESSAGE_CATEGORY",bt="SET_CATEGORY",mt={list:[],metaList:{},messages:[],category:{id:0},loading:!1},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:case lt:case ot:case dt:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case ut:var a=t.payload;return Object(o.a)(Object(o.a)(Object(o.a)({},e),a.result),{},{messages:[],loading:!1});case jt:var n=t.payload;return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:n});case bt:var c=t.payload;return Object(o.a)(Object(o.a)({},e),{},{loading:!1,category:c});default:return Object(o.a)({},e)}},xt={getListCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:it,payload:e}},getCategory:function(e){return{type:lt,payload:e}},setListCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ut,payload:e}},setCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:bt,payload:e}},setMessageCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:jt,payload:e}},deleteCategory:function(e){return{type:ot,payload:e}},saveCategory:function(e){return{type:dt,payload:e}}},Ot=xt,pt=ue.a.mark(ft);function ft(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("categories",null,t),c.next=5,Object(je.b)(he,a);case 5:return n=c.sent,c.next=8,Object(je.c)(Ot.setListCategories({result:{list:n.data,metaList:n.meta}}));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.error("[Orus System] Error en saga/categorias handleGetList:",c.t0.message),c.next=15,Object(je.c)(Ot.setMessageCategory([]));case 15:case"end":return c.stop()}}),pt,null,[[1,10]])}var vt=ue.a.mark(gt);function gt(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=t.id,c.next=5,Object(je.b)(he,"categories/".concat(a),"GET");case 5:if(!(n=c.sent).data){c.next=11;break}return c.next=9,Object(je.c)(Ot.setCategory(n.data));case 9:c.next=14;break;case 11:return console.error("[Orus System] Error in handle GET Contact",n),c.next=14,Object(je.c)(Ot.setMessageCategory([{type:"error",text:"al traer datos de contacto en la API"}]));case 14:c.next=21;break;case 16:return c.prev=16,c.t0=c.catch(1),console.error("[Orus System] Error in handle GET Contact",c.t0),c.next=21,Object(je.c)(Ot.setMessageCategory([{type:"error",text:"al traer datos de contacto, intentelo mas tarde"}]));case 21:case"end":return c.stop()}}),vt,null,[[1,16]])}var Nt=ue.a.mark(yt);function yt(e){var t,a,n,c,s;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,n=t.options,c="categories/".concat(a),r.next=7,Object(je.b)(he,c,"DELETE");case 7:if(s=r.sent){r.next=16;break}return console.log("[Orus System] Categoria eliminada con exito",a),r.next=12,Object(je.c)(Ot.setMessageCategory([{type:"success",text:"Marca eliminada con exito"}]));case 12:return r.next=14,Object(je.c)(Ot.getListCategories(n));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar la categoria: "+a,s.message),!s.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)(Ot.setMessageCategory([{type:"error",text:"No se puede eliminar una categoria que ya esta relacionado con un producto",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en saga/category handledDeleteCategory",r.t0),r.next=27,Object(je.c)(Ot.setMessageCategory([{type:"error",text:"al eliminar la categoria, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),Nt,null,[[1,22]])}var wt=ue.a.mark(Ct);function Ct(e){var t,a,n,c,s,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.data,n=void 0===a?{}:a,c=t.id,s=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,o=Oe("categories",s),l=s?"PUT":"POST",u.next=12,Object(je.b)(he,o,l,n);case 12:if(!(d=u.sent).message){u.next=15;break}throw new Error(d.message);case 15:return s?console.log("[Orus System] Categoria actualizada con exito: "+s):console.log("[Orus system] Categoria creada con exito",d.data.id),u.next=18,Object(je.c)(Ot.setMessageCategory([{type:"success",text:s?"Categoria actualizada con exito":"Categoria almacenada con exito"}]));case 18:return u.next=20,Object(je.c)(Ot.getListCategories(i));case 20:u.next=27;break;case 22:return u.prev=22,u.t0=u.catch(1),console.error("[Orus System] Error saga/category handleSaveCategory",u.t0),u.next=27,Object(je.c)(Ot.setMessageCategory([{type:"error",text:"al almacenar la categoria, intentelo mas tarde"}]));case 27:case"end":return u.stop()}}),wt,null,[[1,22]])}var St=ue.a.mark(_t);function _t(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de categorias"),e.next=3,Object(je.d)(it,ft);case 3:return e.next=5,Object(je.d)(lt,gt);case 5:return e.next=7,Object(je.d)(ot,yt);case 7:return e.next=9,Object(je.d)(dt,Ct);case 9:case"end":return e.stop()}}),St)}var kt=ht,Et="SAGA_GET_LIST_STORE",Lt="SAGA_DELETE_STORE",It="SAGA_GET_ITEM",Tt="SAGA_SAVE_ITEM",Dt="SAGA_GET_LIST_BRANDS",Pt="SAGA_DELETE_BRAND",At="SAGA_SAVE_BRAND",Bt="SAGA_SAVE_INBRANCH",Ft="SET_LIST_STORE",Mt="SET_MESSAGE_STORE",zt="SET_OPTIONS",Gt="SET_ITEM",Ut="SET_LIST_BRANDS",Vt="SET_LOADING",Rt={list:[],metaList:{current_page:1,total:10,per_page:10,last_page:1},item:{},options:{page:1,orderby:"created_at",order:"desc",search:"",itemsPage:10,supplier:"",brand:"",zero:"false"},brands:[],messages:[],loading:!1},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Et:return Object(o.a)(Object(o.a)({},e),{},{list:[],metaList:{},loading:!0});case It:return Object(o.a)(Object(o.a)({},e),{},{item:{},loading:!0});case Lt:case Tt:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Dt:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,brands:[]});case At:case Pt:case Bt:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Ft:var n=a.result;return Object(o.a)(Object(o.a)(Object(o.a)({},e),n),{},{loading:!1});case Gt:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:[],item:a});case Mt:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case zt:var c=a.key,s=a.value;return Object(o.a)(Object(o.a)({},e),{},{options:Object(o.a)(Object(o.a)({},e.options),{},Object(N.a)({page:1},c,s))});case Ut:return Object(o.a)(Object(o.a)({},e),{},{brands:a,messages:[],loading:!1});case Vt:return Object(o.a)(Object(o.a)({},e),{},{loading:a||!1});default:return Object(o.a)({},e)}},qt={getListStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Et,payload:e}},deleteItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Lt,payload:e}},getItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:It,payload:e}},setListStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Ft,payload:e}},setMessagesStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Mt,payload:e}},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:zt,payload:e}},setItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Gt,payload:e}},saveItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Tt,payload:e}},getListBrands:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Dt,payload:e}},setListBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ut,payload:e}},saveBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:At,payload:e}},deleteBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Pt,payload:e}},saveInBranch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Bt,payload:e}},setLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:Vt,payload:e}}},$t=qt,Jt=ue.a.mark(Ht);function Ht(e){var t,a,n,c;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,n=Oe("store",null,t),s.next=5,Object(je.b)(he,n);case 5:if(!(c=s.sent).message){s.next=8;break}throw new Error(c.message);case 8:return s.next=10,Object(je.c)($t.setListStore({result:{list:c.data,metaList:c.meta,messages:null!==(a=c.data)&&void 0!==a&&a.length?[]:[{type:"info",text:"El codigo ".concat(t.search," no existe en el almacen")}]}}));case 10:s.next=17;break;case 12:return s.prev=12,s.t0=s.catch(1),console.error("[Orus System] Error en saga/store handleGetList:",s.t0.message),s.next=17,Object(je.c)($t.setMessagesStore([{type:"error",text:"En servidor al traer la lista de productos"}]));case 17:case"end":return s.stop()}}),Jt,null,[[1,12]])}var Zt=ue.a.mark(Kt);function Kt(e){var t,a,n,c,s;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,n=t.options,c="store/".concat(a),r.next=7,Object(je.b)(he,c,"DELETE");case 7:if(s=r.sent){r.next=16;break}return console.log("[Orus System] Item eliminado con exito",a),r.next=12,Object(je.c)($t.setMessagesStore([{type:"success",text:"Producto eliminado con exito"}]));case 12:return r.next=14,Object(je.c)($t.getListStore(n));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar producto",s.message),!s.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)($t.setMessagesStore([{type:"error",text:"No se puede eliminar un producto que ya esta relacionado con una venta",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en handledDeleteItem",r.t0),r.next=27,Object(je.c)($t.setMessagesStore([{type:"error",text:"al eliminar el producto, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),Zt,null,[[1,22]])}var Qt=ue.a.mark(Xt);function Xt(e){var t,a;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(je.b)(he,"store/".concat(t));case 4:if(!(a=n.sent).data){n.next=10;break}return n.next=8,Object(je.c)($t.setItem(a.data));case 8:n.next=11;break;case 10:console.error("[OrusSystem] Error en handleGetItem",a);case 11:n.next=18;break;case 13:return n.prev=13,n.t0=n.catch(1),console.error("[OrusSystem] Error en saga/order handleGetItem:",n.t0),n.next=18,Object(je.c)($t.setMessagesStore([]));case 18:case"end":return n.stop()}}),Qt,null,[[1,13]])}var Wt=ue.a.mark(ea);function ea(e){var t,a,n,c,s,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.data,n=void 0===a?{}:a,c=t.id,s=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,o=Oe("store",s),l=s?"PUT":"POST",u.next=12,Object(je.b)(he,o,l,n);case 12:if(!(d=u.sent).message){u.next=16;break}throw d.errors&&Object.keys(d.errors).length&&Object.keys(d.errors).forEach((function(e){throw new Error(d.errors[e])})),new Error(d.message);case 16:return s?console.log("[Orus System] Producto actualizado con exito: "+s):console.log("[Orus system] Producto creado con exito",d.data.id),u.next=19,Object(je.c)($t.setMessagesStore([{type:"success",text:s?"Producto actualizado con exito":"Producto almacenado con exito"}]));case 19:if(!i){u.next=24;break}return u.next=22,Object(je.c)($t.getListStore(i));case 22:u.next=27;break;case 24:if(!d.data||!d.data.id){u.next=27;break}return u.next=27,Object(je.c)($t.getItem(d.data.id));case 27:u.next=34;break;case 29:return u.prev=29,u.t0=u.catch(1),console.error("[Orus System] Error en saga handleSaveItem",u.t0.message),u.next=34,Object(je.c)($t.setMessagesStore([{type:"error",text:u.t0.message}]));case 34:case"end":return u.stop()}}),Wt,null,[[1,29]])}var ta=ue.a.mark(aa);function aa(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("brands",null,t),c.next=5,Object(je.b)(he,a);case 5:if(!(n=c.sent).data){c.next=9;break}return c.next=9,Object(je.c)($t.setListBrand(n.data));case 9:c.next=16;break;case 11:return c.prev=11,c.t0=c.catch(1),console.error("[Orus System] Error en saga handleGetListBrands:",c.t0),c.next=16,Object(je.c)($t.setMessagesStore([]));case 16:case"end":return c.stop()}}),ta,null,[[1,11]])}var na=ue.a.mark(ca);function ca(e){var t,a,n,c,s,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.data,n=void 0===a?{}:a,c=t.id,s=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,o=Oe("brands",s),l=s?"PUT":"POST",u.next=12,Object(je.b)(he,o,l,n);case 12:if(!(d=u.sent).message){u.next=15;break}throw new Error(d.message);case 15:return s?console.log("[Orus System] Marca actualizada con exito: "+s):console.log("[Orus system] Marca creada con exito",d.data.id),u.next=18,Object(je.c)($t.setMessagesStore([{type:"success",text:s?"Marca actualizada con exito":"Marca almacenada con exito"}]));case 18:return u.next=20,Object(je.c)($t.getListBrands(i));case 20:u.next=27;break;case 22:return u.prev=22,u.t0=u.catch(1),console.error("[Orus System] Error saga handleSaveBrand",u.t0),u.next=27,Object(je.c)($t.setMessagesStore([{type:"error",text:"al almacenar la marca, intentelo mas tarde"}]));case 27:case"end":return u.stop()}}),na,null,[[1,22]])}var sa=ue.a.mark(ra);function ra(e){var t,a,n,c,s;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,n=t.options,c="brands/".concat(a),r.next=7,Object(je.b)(he,c,"DELETE");case 7:if(s=r.sent){r.next=16;break}return console.log("[Orus System] Marca eliminada con exito",a),r.next=12,Object(je.c)($t.setMessagesStore([{type:"success",text:"Marca eliminada con exito"}]));case 12:return r.next=14,Object(je.c)($t.getListBrands(n));case 14:r.next=20;break;case 16:if(console.error("[Orus System] Fallo al eliminar marca",s.message),!s.message.indexOf("[SQLSTATE[23000]]")){r.next=20;break}return r.next=20,Object(je.c)($t.setMessagesStore([{type:"error",text:"No se puede eliminar un marca que ya esta relacionado con un producto",errnum:"SQL23000"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en saga handledDeleteBrand",r.t0),r.next=27,Object(je.c)($t.setMessagesStore([{type:"error",text:"al eliminar la marca, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),sa,null,[[1,22]])}var ia=ue.a.mark(oa);function oa(e){var t,a,n,c,s,r,i,o;return ue.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,l.prev=1,a=t.data,n=void 0===a?{}:a,c=t.id,r=Oe("branches",s=void 0===c?null:c),i=s?"PUT":"POST",l.next=10,Object(je.b)(he,r,i,n);case 10:if(!(o=l.sent).message){l.next=13;break}throw new Error(o.message);case 13:return s?console.log("[Orus System] Productos actualizados con exito "+s):console.log("[Orus system] Productos creados con exito"),l.next=16,Object(je.c)($t.setMessagesStore([{type:"success",text:s?"Productos actualizados con exito":"Productos almacenados con exito"}]));case 16:return l.next=18,Object(je.c)($t.getItem(n.store_item_id));case 18:l.next=25;break;case 20:return l.prev=20,l.t0=l.catch(1),console.error("[Orus System] Error en saga handleSaveItemInBranch",l.t0.message),l.next=25,Object(je.c)($t.setMessagesStore([{type:"error",text:"al almacenar los productos en el almacen correspondiente"}]));case 25:case"end":return l.stop()}}),ia,null,[[1,20]])}var la=ue.a.mark(da);function da(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de store"),e.next=3,Object(je.d)(Et,Ht);case 3:return e.next=5,Object(je.d)(Lt,Kt);case 5:return e.next=7,Object(je.d)(It,Xt);case 7:return e.next=9,Object(je.d)(Tt,ea);case 9:return e.next=11,Object(je.d)(Dt,aa);case 11:return e.next=13,Object(je.d)(At,ca);case 13:return e.next=15,Object(je.d)(Pt,ra);case 15:return e.next=17,Object(je.d)(Bt,oa);case 17:case"end":return e.stop()}}),la)}var ua=Yt,ja="SET_LIST_CONTACT",ba="SET_MESSAGE_CONTACT",ma="SET_CONTACT",ha="SET_LIST_SUPPLIERS",xa="SAGA_GET_LIST_CONTACTS",Oa="SAGA_DELETE_CONTACT",pa="SAGA_SAVE_CONTACT",fa="SAGA_GET_CONTACT",va="SAGA_GET_LIST_SUPPLIERS",ga={list:[],metaList:{},contact:{id:0},suppliers:[],supplier:{id:0},messages:[],loading:!1},Na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case xa:return Object(o.a)(Object(o.a)({},e),{},{list:[],metaList:{},loading:!0});case Oa:case pa:return Object(o.a)(Object(o.a)({},e),{},{contact:{id:0},loading:!0});case fa:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,contact:{id:0}});case va:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,supplier:{id:0}});case ja:return Object(o.a)(Object(o.a)(Object(o.a)({},e),{},{contact:{id:0}},a.result),{},{messages:[],loading:!1});case ba:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case ma:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,contact:a,list:[],metaList:{},messages:[]});case ha:return Object(o.a)(Object(o.a)({},e),{},{supplier:{id:0},suppliers:a,messages:[],loading:!1});default:return Object(o.a)({},e)}},ya={getListContacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:xa,payload:e}},deleteContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Oa,payload:e}},saveContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:pa,payload:e}},setListContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ja,payload:e}},setMessageContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ba,payload:e}},getContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:fa,payload:e}},setContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ma,payload:e}},getListSuppliers:function(e){return{type:va,payload:e}},setListSuppliers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ha,payload:e}}},wa=ya,Ca=ue.a.mark(Sa);function Sa(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("contacts",null,t),c.next=5,Object(je.b)(he,a,"GET");case 5:if(!(n=c.sent).data){c.next=11;break}return c.next=9,Object(je.c)(wa.setListContact({result:{list:n.data,metaList:n.meta},options:t}));case 9:c.next=13;break;case 11:return c.next=13,Object(je.c)(wa.setMessageContact([{type:"error",text:"al traer datos de contactos en la API"}]));case 13:c.next=20;break;case 15:return c.prev=15,c.t0=c.catch(1),console.error("[Orus System] Error in handle getListOrder",c.t0),c.next=20,Object(je.c)(wa.setMessageContact([{type:"error",text:"al traer datos de contactos, intentelo mas tarde"}]));case 20:case"end":return c.stop()}}),Ca,null,[[1,15]])}var _a=ue.a.mark(ka);function ka(e){var t,a,n,c;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,a=t.id,n=Oe("contacts",a),s.next=6,Object(je.b)(he,n,"DELETE");case 6:if(c=s.sent){s.next=13;break}return console.log("[Orus System] Contacto eliminado con exito",a),s.next=11,Object(je.c)(wa.setMessageContact([{type:"success",text:"Contacto eliminado con exito"}]));case 11:case 17:s.next=21;break;case 13:if(console.error("[Orus System] Fallo al eliminar el contacto",c.message),!c.message.indexOf("[SQLSTATE[23000]]")){s.next=19;break}return s.next=17,Object(je.c)(wa.setMessageContact([{type:"error",text:"No se puede eliminar un contacto que tiene registros",errnum:"SQL23000"}]));case 19:return s.next=21,Object(je.c)(wa.setMessageContact([{type:"error",text:"No se puede eliminar el contacto"}]));case 21:s.next=28;break;case 23:return s.prev=23,s.t0=s.catch(1),console.error("[Orus System] Error in handle delete contact",s.t0),s.next=28,Object(je.c)(wa.setMessageContact([{type:"error",text:"al eliminar el contacto, intentelo mas tarde"}]));case 28:case"end":return s.stop()}}),_a,null,[[1,23]])}var Ea=ue.a.mark(La);function La(e){var t,a,n,c,s,r,i,o;return ue.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,l.prev=1,a=t.data,n=void 0===a?{}:a,c=t.id,r=Oe("contacts",s=void 0===c?null:c),i=s?"PUT":"POST",l.next=10,Object(je.b)(he,r,i,n);case 10:if(!(o=l.sent).message||!o.errors){l.next=22;break}if(!o.errors.name){l.next=17;break}return l.next=15,Object(je.c)(wa.setMessageContact([{type:"error",text:o.errors.name[0].replace("name","Nombre")}]));case 15:l.next=20;break;case 17:if(!o.errors.email){l.next=20;break}return l.next=20,Object(je.c)(wa.setMessageContact([{type:"error",text:o.errors.email[0]}]));case 20:case 25:l.next=33;break;case 22:if(!o.message){l.next=27;break}return l.next=25,Object(je.c)(wa.setMessageContact([{type:"error",text:"Error en servidor, contacte al administrador: \nResponse [".concat(o.message,"]")}]));case 27:if(!o.data){l.next=33;break}return s?console.log("[Orus System] Contacto actualizado con exito",s):console.log("[Orus system] Contacto creado con exito",o.data.id),l.next=31,Object(je.c)(wa.setMessageContact([{type:"success",text:s?"Contacto actualizado con exito":"Contacto almacenado con exito"}]));case 31:return l.next=33,Object(je.c)(wa.setContact(o.data));case 33:l.next=40;break;case 35:return l.prev=35,l.t0=l.catch(1),console.error("[OrusSystem] Error in handle save contact --",l.t0),l.next=40,Object(je.c)(wa.setMessageContact([{type:"error",text:"En el servidor al almacenar el contacto, intentelo mas tarde"}]));case 40:case"end":return l.stop()}}),Ea,null,[[1,35]])}var Ia=ue.a.mark(Ta);function Ta(e){var t,a;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(je.b)(he,"contacts/".concat(t),"GET");case 4:if(!(a=n.sent).data){n.next=10;break}return n.next=8,Object(je.c)(wa.setContact(a.data));case 8:n.next=13;break;case 10:return console.error("[Orus System] Error in handle GET Contact",a),n.next=13,Object(je.c)(wa.setMessageContact([{type:"error",text:"al traer datos de contacto en la API"}]));case 13:n.next=20;break;case 15:return n.prev=15,n.t0=n.catch(1),console.error("[Orus System] Error in handle GET Contact",n.t0),n.next=20,Object(je.c)(wa.setMessageContact([{type:"error",text:"al traer datos de contacto, intentelo mas tarde"}]));case 20:case"end":return n.stop()}}),Ia,null,[[1,15]])}var Da=ue.a.mark(Pa);function Pa(e){var t,a,n,c;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,a=void 0===t?0:t,s.prev=1,n=Oe("contacts",null,{type:1,business:null!==a?a:"",orderby:"name",order:"asc"}),s.next=6,Object(je.b)(he,n);case 6:if(!(c=s.sent).data){s.next=10;break}return s.next=10,Object(je.c)(wa.setListSuppliers(c.data));case 10:s.next=17;break;case 12:return s.prev=12,s.t0=s.catch(1),console.error("[Orus System] Error en saga handleGetListSuppliers:",s.t0),s.next=17,Object(je.c)(wa.setMessageContact([]));case 17:case"end":return s.stop()}}),Da,null,[[1,12]])}var Aa=ue.a.mark(Ba);function Ba(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de contacto"),e.next=3,Object(je.d)(xa,Sa);case 3:return e.next=5,Object(je.d)(Oa,ka);case 5:return e.next=7,Object(je.d)(pa,La);case 7:return e.next=9,Object(je.d)(fa,Ta);case 9:return e.next=11,Object(je.d)(va,Pa);case 11:case"end":return e.stop()}}),Aa)}var Fa=Na,Ma="SAGA_GET_LIST_EXAM",za="SAGA_DELETE_EXAM",Ga="SAGA_SAVE_EXAM",Ua="SAGA_GET_EXAM",Va="SET_LIST_EXAM",Ra="SET_EXAM",Ya="SET_MESSAGE_EXAM",qa={list:[],metaList:{},messages:[],exam:{id:0},loading:!1},$a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Ma:case Ua:case za:case Ga:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Va:return Object(o.a)(Object(o.a)(Object(o.a)({},e),{},{exam:{id:0}},a.result),{},{messages:[],loading:!1});case Ya:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case Ra:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,exam:a});default:return Object(o.a)({},e)}},Ja={getListExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ma,payload:e}},setListExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Va,payload:e}},setMessagesExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:Ya,payload:e}},deleteExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:za,payload:e}},saveExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ga,payload:e}},getExam:function(e){return{type:Ua,payload:e}},setExam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ra,payload:e}}},Ha=Ja,Za=ue.a.mark(Ka);function Ka(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("exams",null,t),c.next=5,Object(je.b)(he,a);case 5:return n=c.sent,c.next=8,Object(je.c)(Ha.setListExam({result:{list:n.data,metaList:n.meta}}));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.error("[Orus System] Error en saga/exam getList:",c.t0),c.next=15,Object(je.c)(Ha.setMessagesExam([]));case 15:case"end":return c.stop()}}),Za,null,[[1,10]])}var Qa=ue.a.mark(Xa);function Xa(e){var t,a,n,c;return ue.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.prev=1,a=t.id,n=Oe("exams",a),s.next=6,Object(je.b)(he,n,"DELETE");case 6:if(c=s.sent){s.next=13;break}return console.log("[Orus System] Examen eliminado con exito",a),s.next=11,Object(je.c)(Ha.setMessagesExam([{type:"success",text:"Examen eliminado con exito"}]));case 11:case 17:s.next=21;break;case 13:if(console.error("[Orus System] Fallo al eliminar el examen",c.message),!c.message.indexOf("[SQLSTATE[23000]]")){s.next=19;break}return s.next=17,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"No se puede eliminar un examen que esta asignado",errnum:"SQL23000"}]));case 19:return s.next=21,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"No se puede eliminar el examen"}]));case 21:s.next=28;break;case 23:return s.prev=23,s.t0=s.catch(1),console.error("[Orus System] Error in handle deleteOrder",s.t0),s.next=28,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"al eliminar el examen, intentelo mas tarde"}]));case 28:case"end":return s.stop()}}),Qa,null,[[1,23]])}var Wa=ue.a.mark(en);function en(e){var t,a,n,c,s,r,i;return ue.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,a=t.id,n=t.data,c=t.options,s=Oe("exams",a),r=a?"PUT":"POST",o.next=9,Object(je.b)(he,s,r,n);case 9:if((i=o.sent).message){o.next=18;break}return console.log("[Orus System] Examen almacenado con exito",i.data.id),o.next=14,Object(je.c)(Ha.setMessagesExam([{type:"success",text:a?"Examen actualizado con exito":"Examen almacenado con exito"}]));case 14:return o.next=16,Object(je.c)(Ha.getListExam(c));case 16:o.next=21;break;case 18:return console.error("[Orus System] Fallo al almacenar el examen",i.message),o.next=21,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"No se puede almacenar el examen"}]));case 21:o.next=28;break;case 23:return o.prev=23,o.t0=o.catch(1),console.error("[Orus System] Error in handle save exam",o.t0),o.next=28,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"al almacenar el examen, intentelo mas tarde"}]));case 28:case"end":return o.stop()}}),Wa,null,[[1,23]])}var tn=ue.a.mark(an);function an(e){var t,a;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(je.b)(he,"exams/".concat(t),"GET");case 4:if(!(a=n.sent).data){n.next=10;break}return n.next=8,Object(je.c)(Ha.setExam(a.data));case 8:n.next=11;break;case 10:console.error("[OrusSystem] Error en handleGetExam",a);case 11:n.next=18;break;case 13:return n.prev=13,n.t0=n.catch(1),console.error("[OrusSystem] Error en saga/Exam handleGetExam",n.t0),n.next=18,Object(je.c)(Ha.setMessagesExam([{type:"error",text:"al traer datos de contacto, intentelo mas tarde"}]));case 18:case"end":return n.stop()}}),tn,null,[[1,13]])}var nn=ue.a.mark(cn);function cn(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de exam"),e.next=3,Object(je.d)(Ma,Ka);case 3:return e.next=5,Object(je.d)(za,Xa);case 5:return e.next=7,Object(je.d)(Ga,en);case 7:return e.next=9,Object(je.d)(Ua,an);case 9:case"end":return e.stop()}}),nn)}var sn=$a,rn="SAGA_GET_LIST_SALES",on="SAGA_DELETE_SALE",ln="SAGA_SAVE_SALE",dn="SAGA_GET_SALE",un="SAGA_GET_LIST_BANK",jn="SAGA_DELETE_PAYMENT",bn="SET_LIST_SALES",mn="SET_SALE",hn="SET_MESSAGE_SALE",xn="SET_LIST_BANKS",On={confirm:function(e,t){window.Swal.fire({title:"Ventas",text:e,icon:"question",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then((function(e){e.dismiss||t&&t()}))},getMethodName:function(e){switch(e){case 1:return"efectivo";case 2:return"tarjeta debito";case 3:return"tarjeta Credito";case 4:return"la marina";case 5:return"cheque";case 6:return"transferencia";default:return"otro"}},getSession:function(){return Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(36).substring(2,16)+Math.random().toString(10)},getForPay:function(e,t,a){var n=0,c=0;return t.forEach((function(e){n+=e.total})),e.forEach((function(e){c+=e.subtotal})),c-n-a},getSubTotal:function(e){var t=0;return e.forEach((function(e){t+=e.subtotal})),console.log("SubTotal:",t),t},getTotal:function(e,t){return console.log("Subtotal:",e),console.log("Descuento:",t),e-t},getPagado:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){t+=e.total})),t}},pn=On,fn={list:[],metaList:{},messages:[],sale:{id:0,customer:{id:2,nombre:"venta de mostrador",email:"",telefonos:{},f_nacimiento:null,edad:0},contact_id:2,items:[],session:pn.getSession(),descuento:0,subtotal:0,total:0,payments:[],created_at:new Date},listBanks:[],loading:!1,load_save:!1},vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case rn:case dn:case on:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case ln:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,load_save:!0});case un:case jn:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case bn:return Object(o.a)(Object(o.a)(Object(o.a)({},e),a.result),{},{messages:[],loading:!1});case hn:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case mn:return Object(o.a)(Object(o.a)({},e),{},{sale:a,messages:[],loading:!1,load_save:!1});case xn:return Object(o.a)(Object(o.a)({},e),{},{listBanks:a,messages:[],loading:!1});default:return Object(o.a)({},e)}},gn={setListSales:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:bn,payload:e}},setMessagesSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:hn,payload:e}},saveSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:ln,payload:e}},setSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:mn,payload:e}},getListSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:rn,payload:e}},getSale:function(e){return{type:dn,payload:e}},deleteSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:on,payload:e}},getListBanks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:un,payload:e}},setListBanks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:xn,payload:e}},deletePayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:jn,payload:e}}},Nn=gn,yn=ue.a.mark(wn);function wn(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("sales",null,t),c.next=5,Object(je.b)(he,a);case 5:return n=c.sent,console.log("SALE RESULT SAGA",n),c.next=9,Object(je.c)(Nn.setListSales({result:{list:n.data,metaList:n.meta}}));case 9:c.next=16;break;case 11:return c.prev=11,c.t0=c.catch(1),console.error("[Orus System] Error en saga/exam getList:",c.t0),c.next=16,Object(je.c)(Nn.setMessagesSale([]));case 16:case"end":return c.stop()}}),yn,null,[[1,11]])}var Cn=ue.a.mark(Sn);function Sn(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("config",null,Object(o.a)(Object(o.a)({},t),{},{name:"bank"})),c.next=5,Object(je.b)(he,a);case 5:return n=c.sent,c.next=8,Object(je.c)(Nn.setListBanks(n.data));case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),console.error("[Orus System] Error en saga/banks handleGetList:",c.t0),c.next=15,Object(je.c)(Nn.setMessagesSale([]));case 15:case"end":return c.stop()}}),Cn,null,[[1,10]])}var _n=ue.a.mark(kn);function kn(e){var t,a,n,c,s,r;return ue.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,a=t.id,n=t.data,c=Oe("sales",a),s=a?"PUT":"POST",i.next=8,Object(je.b)(he,c,s,n);case 8:if((r=i.sent).message){i.next=17;break}return console.log("[Orus System] Venta almacenada con exito",r.data.id),i.next=13,Object(je.c)(Nn.setMessagesSale([{type:"success",text:a?"Venta actualizada con exito":"Venta almacenada con exito"}]));case 13:return i.next=15,Object(je.c)(Nn.setSale(r.data));case 15:i.next=20;break;case 17:return console.error("[Orus System] Fallo al almacenar la venta",r),i.next=20,Object(je.c)(Nn.setMessagesSale([{type:"error",text:"No se puede almacenar la venta"}]));case 20:i.next=27;break;case 22:return i.prev=22,i.t0=i.catch(1),console.error("[Orus System] Error in saga/sales handledSaveSale",i.t0.message),i.next=27,Object(je.c)(Nn.setMessagesSale([{type:"error",text:"al almacenar venta, intentelo mas tarde"}]));case 27:case"end":return i.stop()}}),_n,null,[[1,22]])}var En=ue.a.mark(Ln);function Ln(e){var t,a,n,c,s;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,n=t.sale_id,c=Oe("payments",a),r.next=7,Object(je.b)(he,c,"DELETE");case 7:if(s=r.sent){r.next=17;break}return r.next=11,Object(je.c)(Nn.setMessagesSale([{type:"success",text:"Pago eliminado con exito"}]));case 11:if(!n){r.next=14;break}return r.next=14,Object(je.c)(Nn.getSale(n));case 14:console.log("[Orus System] Pago eliminado con exito",a),r.next=20;break;case 17:return console.error("[Orus System] Fallo al eliminar el pago",s.message),r.next=20,Object(je.c)(Nn.setMessagesSale([{type:"error",text:"No se puede eliminar el pago"}]));case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),console.error("[Orus System] Error en payment/saga handledDeletePayment",r.t0.message),r.next=27,Object(je.c)(Nn.setMessagesSale([{type:"error",text:"al eliminar el pago, intentelo mas tarde"}]));case 27:case"end":return r.stop()}}),En,null,[[1,22]])}var In=ue.a.mark(Tn);function Tn(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("sales",t),c.next=5,Object(je.b)(he,a);case 5:if(!(n=c.sent).data){c.next=10;break}return console.log("[Orus System] Estableciendo venta",t),c.next=10,Object(je.c)(Nn.setSale(n.data));case 10:c.next=17;break;case 12:return c.prev=12,c.t0=c.catch(1),console.error("[Orus System] Error en saga/sale handleGetSale:",c.t0.message),c.next=17,Object(je.c)(Nn.setMessagesSale([]));case 17:case"end":return c.stop()}}),In,null,[[1,12]])}var Dn=ue.a.mark(Pn);function Pn(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de ventas"),e.next=3,Object(je.d)(rn,wn);case 3:return e.next=5,Object(je.d)(un,Sn);case 5:return e.next=7,Object(je.d)(ln,kn);case 7:return e.next=9,Object(je.d)(jn,Ln);case 9:return e.next=11,Object(je.d)(dn,Tn);case 11:case"end":return e.stop()}}),Dn)}var An=vn,Bn="SAGA_GET_LIST_CONFIG",Fn="SAGA_GET_CONFIG",Mn="SAGA_DELETE_CONFIG",zn="SAGA_SAVE_CONFIG",Gn="SET_LIST_CONFIG",Un="SET_CONFIG",Vn="SET_MESSAGE_CONFIG",Rn="SAGA_GET_BRANCHES",Yn="SET_BRANCHES",qn={list:[],meta:{},config:{},messages:[],branches:[],loading:!1},$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case Bn:return Object(o.a)(Object(o.a)({},e),{},{list:[],meta:{},loading:!0});case Fn:return Object(o.a)(Object(o.a)({},e),{},{config:{},loading:!0});case Mn:case zn:return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case Vn:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,messages:a});case Gn:return Object(o.a)(Object(o.a)({},e),{},{list:a.data,meta:a.meta,loading:!1,messages:[]});case Un:return Object(o.a)(Object(o.a)({},e),{},{config:a,loading:!1,messages:[]});case Rn:return Object(o.a)({},e);case Yn:return Object(o.a)(Object(o.a)({},e),{},{branches:a});default:return Object(o.a)({},e)}},Jn={setMessages:function(e){return{type:Vn,payload:e}},getListConfig:function(e){return{type:Bn,payload:e}},getConfig:function(e){return{type:Fn,payload:e}},deleteConfig:function(e){return{type:Mn,payload:e}},saveConfig:function(e){return{type:zn,payload:e}},setListConfig:function(e){return{type:Gn,payload:e}},setConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Un,payload:e}},getBranches:function(e){return{type:Rn,payload:e}},setBranches:function(e){return{type:Yn,payload:e}}},Hn=Jn,Zn=ue.a.mark(Kn);function Kn(e){var t,a,n;return ue.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=Oe("config",null,t),c.next=5,Object(je.b)(he,a);case 5:if(!(n=c.sent).data){c.next=11;break}return c.next=9,Object(je.c)(Hn.setListConfig(n));case 9:c.next=12;break;case 11:n.message&&console.error("[Orus system] Error en la consulta de configuraciones",n.message);case 12:c.next=19;break;case 14:return c.prev=14,c.t0=c.catch(1),console.error("[Orus System] Error en saga/config handleGetListConfig:",c.t0.message),c.next=19,Object(je.c)(Hn.setMessages([]));case 19:case"end":return c.stop()}}),Zn,null,[[1,14]])}var Qn=ue.a.mark(Xn);function Xn(e){var t,a;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(je.b)(he,"users/".concat(t));case 4:if(!(a=n.sent).data){n.next=10;break}return n.next=8,Object(je.c)(Hn.setConfig(a.data));case 8:n.next=11;break;case 10:console.error("[OrusSystem] Error en saga/users por servidor handleGetUser",a);case 11:n.next=18;break;case 13:return n.prev=13,n.t0=n.catch(1),console.error("[OrusSystem] Error en saga/users handleGetUser:",n.t0.message),n.next=18,Object(je.c)(Hn.setMessages([]));case 18:case"end":return n.stop()}}),Qn,null,[[1,13]])}var Wn=ue.a.mark(ec);function ec(e){var t,a,n,c,s;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,a=t.id,n=t.options,c="config/".concat(a),r.next=7,Object(je.b)(he,c,"DELETE");case 7:if(s=r.sent){r.next=16;break}return console.log("[Orus System] Configuracion eliminada con exito",a),r.next=12,Object(je.c)(Hn.setMessages([{type:"success",text:"Configuracion eliminada con exito"}]));case 12:return r.next=14,Object(je.c)(Hn.getListConfig(n));case 14:r.next=17;break;case 16:console.error("[Orus Server] Fallo al eliminar configuracion",s.message);case 17:r.next=24;break;case 19:return r.prev=19,r.t0=r.catch(1),console.error("[Orus Server] Error en saga/configuraciones handledDeleteConfig",r.t0.message),r.next=24,Object(je.c)(Hn.setMessages([{type:"error",text:"al eliminar la configuracion, intentelo mas tarde"}]));case 24:case"end":return r.stop()}}),Wn,null,[[1,19]])}var tc=ue.a.mark(ac);function ac(e){var t,a,n,c,s,r,i,o,l,d;return ue.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.data,n=void 0===a?{}:a,c=t.id,s=void 0===c?null:c,r=t.options,i=void 0===r?{}:r,o=Oe("config",s),l=s?"PUT":"POST",u.next=12,Object(je.b)(he,o,l,n);case 12:if(!(d=u.sent).message){u.next=15;break}throw new Error(d.message);case 15:return s?console.log("[Orus System] Configuracion actualizada con exito: "+s):console.log("[Orus system] Configuracion creada con exito",d.data.id),u.next=18,Object(je.c)(Hn.setMessages([{type:"success",text:s?"Configuracion actualizada con exito":"Configuracion almacenada con exito"}]));case 18:return u.next=20,Object(je.c)(Hn.getListConfig(i));case 20:u.next=27;break;case 22:return u.prev=22,u.t0=u.catch(1),console.error("[Orus Server] Error en saga/configuraciones handleSaveConfig",u.t0),u.next=27,Object(je.c)(Hn.setMessages([{type:"error",text:"al almacenar la configuracion, intentelo mas tarde"}]));case 27:case"end":return u.stop()}}),tc,null,[[1,22]])}var nc=ue.a.mark(cc);function cc(e){var t,a;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.payload,n.prev=1,t=Oe("config",null,{page:1,name:"branches",itemsPage:10}),n.next=6,Object(je.b)(he,t);case 6:if(!(a=n.sent).data){n.next=12;break}return n.next=10,Object(je.c)(Hn.setBranches(a.data));case 10:n.next=13;break;case 12:a.message&&console.error("[Orus system] Error en la consulta de sucursales",a.message);case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(1),console.error("[Orus System] Error en saga/config handleGetListConfig:",n.t0.message);case 18:case"end":return n.stop()}}),nc,null,[[1,15]])}var sc=ue.a.mark(rc);function rc(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[Orus System] Escuchando eventos de configuracion"),e.next=3,Object(je.d)(Bn,Kn);case 3:return e.next=5,Object(je.d)(Fn,Xn);case 5:return e.next=7,Object(je.d)(Mn,ec);case 7:return e.next=9,Object(je.d)(zn,ac);case 9:return e.next=11,Object(je.d)(Rn,cc);case 11:case"end":return e.stop()}}),sc)}var ic=$n,oc=Object(r.b)({users:Be,default:g,order:rt,category:kt,storeItem:ua,contact:Fa,exam:sn,sales:An,config:ic}),lc=ue.a.mark(dc);function dc(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(je.a)([Ae(),st(),_t(),da(),Ba(),cn(),Pn(),rc()]);case 2:case"end":return e.stop()}}),lc)}var uc=Object(i.a)(),jc="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.c,bc=Object(r.d)(oc,jc(r.a.apply(void 0,[uc])));uc.run(dc);var mc=bc,hc=a(6),xc=a(2),Oc=a.n(xc),pc=a(22),fc=a(85),vc=a.n(fc);function gc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(c,s){var r=localStorage.getItem("OrusSystem"),i=sessionStorage.getItem("OrusSystem"),o=JSON.parse(r||"{}"),l=o.protocol,d=void 0===l?window.location.protocol:l,u=o.host,j=void 0===u?window.location.hostname:u,b=o.port,m=void 0===b?window.location.port:b,h=JSON.parse(i||"{}").token,x=void 0===h?"":h,O={method:t,url:"".concat(d,"://").concat(j,":").concat(m,"/api/").concat(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+x}};["POST","PUT"].includes(t.toUpperCase())&&a&&(O.data=JSON.stringify(a)),n&&(O.signal=n.signal),vc()(O).then((function(e){return c(e.data)})).catch((function(t){var a;return console.error("[Orus System] Query API failer:",e),console.error("[Orus System] Query API code:",null===t||void 0===t?void 0:t.code),console.error("[Orus System] Query API message:",null===t||void 0===t?void 0:t.message),s(null===(a=t.response)||void 0===a?void 0:a.data)}))}))}function Nc(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e,c=null,s=Object.keys(a);return t&&(n+="/".concat(t)),"object"!==typeof a||Array.isArray(a)||s&&(s.map((function(e){return null!==a[e]&&""!==a[e]||delete a[e],null})),s.length&&(c=new URLSearchParams(a),n+="?".concat(c))),n}var yc=a(0),wc=Object(xc.createContext)(null);function Cc(e){var t=e.children,a=Object(pc.f)(),n=sessionStorage.getItem("OrusSystem"),c={isLogged:!1,idUser:0,username:"",name:"",rol:null,email:"",token:"",branch:"",roles:"",permissions:[]},s=Object(xc.useState)((function(){return n&&"undefined"!==n&&(c=JSON.parse(n)),c})),r=Object(hc.a)(s,2),i=r[0],l=r[1],d=function(e){var t,a;if(e){var n={isLogged:null!==(t=e.isLogged)&&void 0!==t?t:i.isLogged,idUser:e.id,username:e.username.toLowerCase(),name:e.name.toLowerCase(),rol:2,email:e.email,token:null!==(a=e.token)&&void 0!==a?a:i.token,branch:Object(o.a)(Object(o.a)({},e.branch.data),{},{id:e.branch.id}),roles:e.roles[0],permissions:e.permissions};l(n),sessionStorage.setItem("OrusSystem",JSON.stringify(n))}},u=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.email,n=t.password,a&&n){e.next=3;break}return e.abrupt("return",{status:!1,message:"The fields user or passwors are required"});case 3:return e.next=5,gc("user/login","POST",t).then((function(e){if(!e.status)return{status:!1,data:e};var t=e.data;return d(Object(o.a)(Object(o.a)({},t),{},{token:e.token,isLogged:!0})),{status:!0,message:e.message}})).catch((function(e){return{status:!1,message:"Error en el servidor: "+e.message}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(me.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gc("user/logout","POST").then((function(){return l(c),sessionStorage.setItem("OrusSystem","{}"),!0})).catch((function(e){return console.error("[Server] When close session:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(me.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gc("user").then((function(e){return e.data})).catch((function(e){var t;"Unauthenticated."!==e.message?console.log("[Orus System] Responses:",e):"/login"!==(null===(t=a.location)||void 0===t?void 0:t.pathname)&&(l(c),sessionStorage.setItem("OrusSystem",JSON.stringify(c)),a.push("/login"))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(me.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().catch((function(){return null}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",t.unreadNotifications);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(me.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof t){e.next=2;break}return e.abrupt("return",{status:!1,message:"Payload should be object"});case 2:return e.next=4,gc("user/readAllNotifications","POST",t).then((function(e){var a=parseInt(t.id)<0?"Todas":1;return!!e.success&&(console.log("[Orus System] Notificaciones marcadas leidas:",a),!0)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("users",i.idUser),n={branch_id:t,name:i.name,username:i.username},e.next=4,gc(a,"PUT",n).then((function(e){return!(!e.data||e.message)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(xc.useEffect)((function(){b().then((function(e){e&&(console.log("[Orus system] Session was created"),d(Object(o.a)(Object(o.a)({},e),{},{isLogged:!0})))}))}),[i.isLogged]),Object(yc.jsx)(wc.Provider,{value:{auth:i,setSession:u,outSession:j,getNotifications:m,setNotifications:h,setBranch:x},children:t})}var Sc=a(9),_c=a.n(Sc);function kc(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("users",null,t),e.next=3,gc(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("users",t),e.next=3,gc(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("users",t),e.next=3,gc(a,"DELETE",null);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(me.a)(ue.a.mark((function e(t,a){var n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return console.log("Actualizar usuario modificado",a,t),n=Nc("users",a),e.next=5,gc(n,"PUT",t);case 5:case 11:return e.abrupt("return",e.sent);case 8:return c=Nc("users"),e.next=11,gc(c,"POST",t);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return{getListUsers:e,getUserById:t,deleteUser:a,saveUser:n}}var Ec=Object(xc.createContext)(null),Lc={data:[],meta:{},server:JSON.parse(localStorage.getItem("OrusSystem"))};function Ic(e){var t=e.children,a=Object(xc.useState)(Lc),n=Object(hc.a)(a,2),c=n[0],s=n[1],r=function(e){if("object"!==typeof e)return!1;var t=Object(o.a)(Object(o.a)({},c.server),e);return s(Object(o.a)(Object(o.a)({},c),{},{server:t})),localStorage.setItem("OrusSystem",JSON.stringify(t)),!0};return Object(xc.useEffect)((function(){gc("config?itemsPage=100","GET").then((function(e){s(Object(o.a)(Object(o.a)({},c),{},{data:e.data,meta:e.meta,setStorage:r}))}))}),[]),Object(yc.jsx)(Ec.Provider,{value:c,children:t})}function Tc(e){var t=Object(xc.useState)({bgColor:"bg-blue",validate:"",text:"Debe de tener al menos 4 caracteres.",searchUser:!1}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=e.col,r=e.username,i=e.userId,l=e.onChange,d=n.bgColor,u=n.validate,j=n.text,b=n.searchUser;return Object(yc.jsxs)("div",{className:"col-"+s,children:[r.length?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Usuario"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text "+d,children:b?Object(yc.jsx)("i",{className:"fas fa-spinner"}):Object(yc.jsx)("i",{className:"fas fa-user-check"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control"+u,placeholder:"Usuario",name:"username",autoComplete:"off",autoFocus:"autofocus",defaultValue:r,onChange:function(e){return function(e){var t=e.name,a=e.value;console.log(t+":"+a),l({name:t,value:a.toLowerCase()})}(e.target)},onBlur:function(){console.log("Validate user function");var e=r.replace(/\s/g,"");/^[\w]{4,16}$/.test(e)?(c(Object(o.a)(Object(o.a)({},n),{},{searchUser:!0})),Dc(e,i).then((function(e){e?(c(Object(o.a)(Object(o.a)({},n),{},{bgColor:"bg-red",validate:" border border-danger",text:"El usuario ya esta registrado.",searchUser:!1})),l({name:"validUserName",value:!1})):(c(Object(o.a)(Object(o.a)({},n),{},{bgColor:"bg-blue",validate:"",text:"",searchUser:!1})),l({name:"validUserName",value:!0}))}))):e.length>4?(c(Object(o.a)(Object(o.a)({},n),{},{bgColor:"bg-red",validate:" border border-danger",text:"No tiene el formato de usuario"})),l({name:"validUserName",value:!1})):e.length||(c(Object(o.a)(Object(o.a)({},n),{},{bgColor:"bg-red",validate:" border border-danger",text:"Debe de tener de 4 a 16 caracteres alfanumericos."})),l({name:"validUserName",value:!1}))},required:"required",minLength:"4",maxLength:"16",pattern:"^[\\w]{4,16}$"})]}),u?Object(yc.jsx)("small",{className:"text-muted",children:j}):""]})}var Dc=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n,c,s=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:null,n=Oe("users",null,{username:t,userId:a,deleted:0}),e.next=4,he(n);case 4:if(!(c=e.sent).data||!c.data.length){e.next=9;break}if(c.data[0].username.toLowerCase()!==t){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Pc(e){var t=Object(xc.useState)({bgColor:"bg-blue",validate:"",text:"No tiene el formato de un email",searchEmail:!1}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=e.col,r=e.email,i=e.userId,l=e.onChange,d=n.bgColor,u=n.validate,j=n.text,b=n.searchEmail;return Object(yc.jsxs)("div",{className:"col-"+s,children:[r.length?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Email"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text "+d,children:b?Object(yc.jsx)("i",{className:"fas fa-spinner"}):Object(yc.jsx)("i",{className:"fas fa-at"})})}),Object(yc.jsx)("input",{type:"email",className:"form-control"+u,placeholder:"email",name:"email",autoComplete:"off",defaultValue:r,onChange:function(e){return function(e){var t=e.name,a=e.value;l({name:t,value:a.toLowerCase()})}(e.target)},onBlur:function(){var e=r.replace(/\s/g,"");/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)?(c(Object(o.a)(Object(o.a)({},n),{},{searchUser:!0})),Ac(e,i).then((function(e){e?(c({bgColor:"bg-red",validate:" border border-danger",text:"El usuario ya esta registrado.",searchUser:!1}),l({name:"validUserEmail",value:!1})):(c(Object(o.a)(Object(o.a)({},n),{},{bgColor:"bg-blue",validate:"",text:""})),l({name:"validUserEmail",value:!0}))}))):e.length>8?(c(Object(o.a)(Object(o.a)({},n),{},{bgColor:"bg-red",validate:" border border-danger",text:"No tiene el formato de un email valido"})),l({name:"validUserEmail",value:!1})):e.length||(c(Object(o.a)(Object(o.a)({},n),{},{bgColor:"bg-red",validate:" border border-danger",text:"Escriba un email valido"})),l({name:"validUserEmail",value:!1}))},required:"required"})]}),u?Object(yc.jsx)("small",{className:"text-muted",children:j}):""]})}var Ac=function(){var e=Object(me.a)(ue.a.mark((function e(t,a){var n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Oe("users",null,{email:t,userId:a,deleted:0}),e.next=3,he(n);case 3:if(!(c=e.sent).data||!c.data.length){e.next=8;break}if(c.data[0].email.toLowerCase()!==t){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Bc={id:0,role:"admin",roles:[],permissions:[],username:"",name:"",email:"",password:"",updated_at:"",created_at:"",session:{},branch_id:12,load:!1};function Fc(e){var t=this,a=e.match.params.id,n=e.handleNewOrEdit,c=kc(),s=Object(xc.useContext)(Ec).data,r=Object(xc.useState)(Bc),i=Object(hc.a)(r,2),l=i[0],d=i[1],u=Object(pc.f)();Object(xc.useEffect)((function(){a?c.getUserById(a).then((function(e){e&&function(e,t){e&&(console.log(e),d({id:e.id,role:e.roles[0],roles:e.roles,permissions:e.permissions,username:e.username,name:e.name,email:e.email,password:"",updated_at:e.updated_at,created_at:e.created_at,session:e.session?e.session:{},branch_id:e.branch.id,load:!!e.load&&e.load}))}(e.data)}),[a]):console.log("ID NO ENCONTRADO")}),[a]);var j=!(!l.load&&l.validUserName&&l.name.length&&l.validUserEmail),b=function(e){var t=e.name,a=e.value,n=e.type;console.log(t,a,n),"text"===n&&(a=a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")),d(Object(o.a)(Object(o.a)({},l),{},Object(N.a)({},t,a)))};return Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-".concat(a?8:12),children:[Object(yc.jsxs)("form",{className:"card card-primary card-outline",autoComplete:"off",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h1",{className:"card-title text-primary",children:[Object(yc.jsx)("i",{className:"fas fa-user mr-2"}),a?"Editar usuario":"Registrar nuevo usuario"]})}),Object(yc.jsx)("div",{className:"card-body was-validated",children:l.load?Object(yc.jsx)("div",{className:"alert alert-light text-center p-4",children:Object(yc.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(yc.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"row mb-3",children:[Object(yc.jsx)(Tc,{username:l.username,userId:a||"",col:6,onChange:b}),Object(yc.jsxs)("div",{className:"col-6",children:[l.name.length?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Nombre completo"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text bg-blue",children:Object(yc.jsx)("i",{className:"fas fa-user-tag"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Nombre completo",name:"name",autoComplete:"off",defaultValue:l.name,onChange:function(e){var t=e.target;return b(t)},required:"required",minLength:"8",pattern:"^[a-zA-Z]{2,20}[\\s]{1}[a-zA-Z]{2,20}.*"})]})]})]}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-md-6",children:[l.password.length||a?Object(yc.jsxs)("small",{children:[Object(yc.jsx)("label",{children:"Contrase\xf1a"}),!a&&Object(yc.jsx)("span",{className:"ml-2 text-muted",children:"De 8 a 16 caracteres, por lo menos una mayuscula, un numero y un caracter especial"})]}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text bg-blue",children:Object(yc.jsx)("i",{className:"fas fa-lock"})})}),Object(yc.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"password",autoComplete:"off",defaultValue:l.password,onChange:function(e){var t=e.target;return b(t)},required:!a,minLength:"8",maxLength:"16",pattern:"^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$"})]})]}),Object(yc.jsx)(Pc,{email:l.email,userId:a||"",col:6,onChange:b})]}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-md-6",children:[Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Tipo de usuario"})}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text bg-blue",children:Object(yc.jsx)("i",{className:"fas fa-id-card"})})}),Object(yc.jsxs)("select",{className:"custom-select",name:"role",defaultValue:l.role,onChange:function(e){var t=e.target;return b(t)},children:[Object(yc.jsx)("option",{value:"admin",children:"Administrador"}),Object(yc.jsx)("option",{value:"ventas",children:"Ventas"}),Object(yc.jsx)("option",{value:"doctor",children:"Optometrista"})]})]})]}),Object(yc.jsxs)("div",{className:"col-md-6",children:[Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Sucursal"})}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text bg-blue",children:Object(yc.jsx)("i",{className:"fas fa-store"})})}),Object(yc.jsx)("select",{className:"custom-select text-uppercase",name:"branch_id",value:l.branch_id,onChange:function(e){var t=e.target;return b(t)},children:s.map((function(e){return"bank"!==e.name?Object(yc.jsx)("option",{value:e.id,children:e.data.name},e.id):null}))})]})]})]})]})}),Object(yc.jsx)("div",{className:"card-footer",children:Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-md-12 text-right",children:Object(yc.jsxs)("div",{className:"btn-group btn-group-lg",role:"group",children:[Object(yc.jsxs)("button",{type:"button",className:"btn btn-dark",onClick:function(){u.push("/usuarios"),n()},children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yc.jsxs)("button",{type:"button",className:l.load?"btn btn-primary disabled":"btn btn-primary",disabled:!!j,onClick:function(){var e=l.id,t=l.name,a=l.username,s=l.role,r=l.password,i=l.email,o=l.branch_id,d=l.validUserName,j=l.validUserEmail,b={name:t,username:a,role:s,email:i,branch_id:o};return r.length>=8&&(b.password=r),d?j?void(0===e?c.saveUser(b).then((function(e){e&&window.Swal.fire({title:"Usuarios",text:"Usuario guardado correctamente",icon:"success",showCancelButton:!1,confirmButtonText:"Hecho!",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||n()}))})):c.saveUser(b,e).then((function(e){e&&window.Swal.fire({title:"Usuarios",text:"Usuario actualizado correctamente",icon:"success",showCancelButton:!1,confirmButtonText:"Ok",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(u.push("/usuarios"),n())}))}))):(window.Swal.fire({icon:"error",title:"El correo ya esta en uso",showConfirmButton:!1,timer:1500}),!1):(window.Swal.fire({icon:"error",title:"El nombre de usuario ya esta en uso",showConfirmButton:!1,timer:1500}),!1)},children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"}),a?"Actualizar":"Guardar"]})]})})})})]}),Object(yc.jsxs)("div",{className:"card card-primary card-outline mt-4",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsx)("h5",{className:"card-title text-primary",children:"Tipo y permisos"})}),Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("span",{className:"badge badge-dark m-1",children:l.role}),l.permissions.map((function(e,t){return Object(yc.jsx)("span",{className:"badge badge-primary m-1",children:e},t)}))]})]})]}),a?Object(yc.jsx)("div",{className:"col-4",children:Object(yc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h3",{className:"card-title text-primary",children:[Object(yc.jsx)("i",{className:"fas fa-database mr-2"}),"Metadata"]})}),Object(yc.jsx)("div",{className:"card-body",children:l.session?Object(yc.jsxs)("ul",{className:"list-group",children:[Object(yc.jsxs)("li",{className:"list-group-item",children:[Object(yc.jsx)("h6",{children:"Datos del usuario"}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("span",{className:"text-primary",children:"Registrado"}),Object(yc.jsx)("p",{children:_c()(l.created_at).fromNow()})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("span",{className:"text-primary",children:"Ultima actualizacion"}),Object(yc.jsx)("p",{children:_c()(l.updated_at).fromNow()})]})]})]}),Object(yc.jsxs)("li",{className:"list-group-item",children:[Object(yc.jsx)("h6",{children:"Actividad"}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("span",{className:"text-primary",children:"IP"}),Object(yc.jsx)("p",{children:l.session.ip_address})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("span",{className:"text-primary",children:"Ultima actividad"}),Object(yc.jsx)("p",{children:_c()(l.session.last_activity).fromNow()})]})]})]}),Object(yc.jsxs)("li",{className:"list-group-item",children:[Object(yc.jsx)("span",{className:"text-primary",children:"Navegador y OS"}),Object(yc.jsx)("p",{children:l.session.user_agent})]}),Object(yc.jsxs)("li",{className:"list-group-item",children:[Object(yc.jsx)("span",{className:"text-primary",children:"Token"}),Object(yc.jsx)("p",{children:l.session.user_data})]})]}):Object(yc.jsx)("p",{children:"Usuario no ha registrado actividad."})}),l.session&&Object(yc.jsx)("div",{className:"card-footer text-right",children:Object(yc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return t.handleCloseSession(a)},children:[Object(yc.jsx)("i",{className:"fas fa-sign-out-alt mr-1"}),"Cerrar session"]})})]})}):null]})}var Mc=Object(xc.createContext)(null),zc=function(){return Object(xc.useContext)(Mc)},Gc=function(e){var t;return Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h5",{className:"card-title",children:[Object(yc.jsx)("i",{className:e.icon?"mr-2 fas fa-"+e.icon:"mr-2 fas fa-ellipsis-v"}),null!==(t=e.title)&&void 0!==t?t:"Menu"]})}),Object(yc.jsx)("div",{className:"card-body p-0",children:Object(yc.jsx)("ul",{className:"list-group nav list-group-flush",children:e.children})})]})};function Uc(e){var t,a,n,c,s,r,i,o,l=e.showIcon,d=void 0===l||l;return Object(yc.jsxs)("div",{className:"input-group mb-3",children:[d&&Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:e.value?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(yc.jsx)("i",{className:"fas fa-".concat(null!==(t=e.icon)&&void 0!==t?t:"sort-amount-down")})})}),Object(yc.jsxs)("select",{className:"custom-select text-uppercase",value:null!==(a=e.value)&&void 0!==a?a:"",disabled:null!==(n=e.load)&&void 0!==n&&n,onChange:function(t){var a=t.target;e.handleChange&&e.handleChange(parseInt(a.value))},children:[e.load?Object(yc.jsx)("option",{value:"",children:null!==(c=e.loadText)&&void 0!==c?c:"Cargando opciones"}):Object(yc.jsx)(yc.Fragment,{children:Boolean(null===(s=e.options)||void 0===s?void 0:s.length)?Object(yc.jsxs)("option",{value:"0",children:["--",null!==(i=e.text)&&void 0!==i?i:"Seleccione uno","--"]}):Object(yc.jsx)("option",{value:"",children:null!==(r=e.emptyText)&&void 0!==r?r:"No hay opciones"})}),null===(o=e.options)||void 0===o?void 0:o.map((function(e){return Object(yc.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})}function Vc(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return a=Nc("store",null,t),e.next=5,gc(a,"GET").then((function(e){return e})).catch((function(e){throw console.error("[Orus System] Catch when get items list in hook:",e.message),e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nc("store",t),e.next=5,gc(a,"GET").then((function(e){return e.data})).catch((function(e){throw console.error("[Orus System] Catch when get item in hook:",e.message),e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("ID A ELIMINAR",t),t){e.next=3;break}return e.abrupt("return",!1);case 3:return a=Nc("store",t),e.next=6,gc(a,"DELETE").then((function(){return!0})).catch((function(e){throw console.error("[Orus System] Catch when delete item in hook:",e.message),e}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Data de item a guardar:",t),t){e.next=3;break}return e.abrupt("return");case 3:if(a=t.id,delete t.data,delete t.loading,!a){e.next=13;break}return n=Nc("store",a),e.next=10,gc(n,"PUT",t).then((function(e){return e.data})).catch((function(e){throw console.error("[Orus System] Catch when save item in hook:",e.message),e}));case 10:case 16:return e.abrupt("return",e.sent);case 13:return c=Nc("store"),e.next=16,gc(c,"POST",t).then((function(e){return e.data})).catch((function(e){throw console.error("[Orus System] Catch when save item in hook:",e.message),e}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n,c,s;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(delete t.readyToSave,a=t.id,console.log(a,t.store_item_id),0!==a){e.next=13;break}return n=Nc("branches"),c="POST",console.log(c),console.log("Data a enviar",t),e.next=10,gc(n,c,t);case 10:case 18:return e.abrupt("return",e.sent);case 13:return console.log("data a enviar",t),s=Nc("branches",a),"PUT",e.next=18,gc(s,"PUT",t);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Data a guardar:",t),a=t.productCategoryId,n=Nc("store/setprice/".concat(a)),"POST",console.log(n),delete t.productCategoryId,e.next=8,gc(n,"POST",t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return a=Nc("brands",null,t),e.next=5,gc(a,"GET").then((function(e){return e})).catch((function(e){throw console.error("[Orus System] Catch when get brands list in hook:",e.message),e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nc("brands",t),e.next=5,gc(a,"GET").then((function(e){return e.data})).catch((function(e){throw console.error("[Orus System] Catch when get brands in hook:",e.message),e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("brands"),e.next=3,gc(a,"POST",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("brands",t),e.next=3,gc(a,"DELETE",null).then((function(){return!0})).catch((function(e){throw console.error("[Orus System] Catch when delete item in hook:",e.message),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getItems:e,getItem:t,deleteItem:a,saveItem:n,saveQantityandPrice:c,saveGlobalPrice:s,getBrands:r,getBrand:i,saveBrand:o,deleteBrand:l}}function Rc(e){var t=Object(xc.useState)({brands:[],load:!0}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=Vc();return Object(xc.useEffect)((function(){s.getBrands({supplier:e.supplier}).then((function(e){e?c(Object(o.a)(Object(o.a)({},n),{},{brands:e.data,load:!1})):console.error("Error al obetner las marcas")}))}),[e.supplier]),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Marca"})}),Object(yc.jsx)(Uc,{options:n.brands,value:e.brand,text:"Seleccione una marca",icon:"copyright",emptyText:"No hay marcas para este proveedor",load:n.load,loadText:"Cargando marcas",handleChange:function(t){console.log("ID seleccionado",t),e.handleChangeBrand&&e.handleChangeBrand(t)}})]})})}function Yc(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return a=Nc("contacts",null,t),e.next=5,gc(a,"GET").then((function(e){return e})).catch((function(e){return console.error("[Orus System] Catch when get contacts list in hook:",e.message),null}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nc("contacts",t),e.next=5,gc(a,"GET").then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when get contact in hook:",e.message),{}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nc("contacts",t),e.next=5,gc(a,"DELETE").then((function(){return!0})).catch((function(e){return console.error("[Orus System] Catch when delete contact in hook:",e.message),!1}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a=t.id,delete t.id,!a){e.next=11;break}return n=Nc("contacts",a),e.next=8,gc(n,"PUT",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when save contact in hook:",e.message),null}));case 8:case 14:return e.abrupt("return",e.sent);case 11:return c=Nc("contacts"),e.next=14,gc(c,"POST",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when save contact in hook:",e.message),null}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getContacts:e,getContact:t,deleteContact:a,saveContact:n}}function qc(e){var t,a=Yc(),n=Object(xc.useState)({suppliers:[],load:!0}),c=Object(hc.a)(n,2),s=c[0],r=c[1];return Object(xc.useEffect)((function(){a.getContacts({type:1,orderby:"name",order:"asc"}).then((function(e){r({suppliers:e.data,load:!1})}))}),[]),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Proveedor"})}),Object(yc.jsx)(Uc,{options:s.suppliers,value:null!==(t=e.supplier)&&void 0!==t?t:"",text:"Seleccione un provedor",icon:"address-book",load:s.load,handleChange:function(t){e.handleChangeSupplier&&e.handleChangeSupplier(t)}})]})})}function $c(){var e,t,a,n,c,s,r,i,l=zc(),d=Object(pc.f)(),u=function(e){var t=e.name,a=e.value,n=e.checked;"itemsPage"===t&&(a=parseInt(a)),"supplier"===t&&a>0&&(a=parseInt(a)),"zero"===t&&(a=n?"true":"false"),l.set(Object(o.a)(Object(o.a)({},l),{},{options:Object(o.a)(Object(o.a)({},l.options),{},Object(N.a)({},t,a))}))};return Object(yc.jsxs)(Gc,{title:"inbox"===l.panel?"Menu y filtros":"Menu",children:[Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:"inbox"===l.panel?"nav-link  disabled":"nav-link",onClick:function(e){e.preventDefault(),l.set(Object(o.a)(Object(o.a)({},l),{},{panel:"inbox"})),d.push("/almacen")},children:[Object(yc.jsx)("i",{className:"inbox"===l.panel?"fas fa-check text-success mr-1":"fas fa-plus mr-1"}),"Productos"]})}),Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:"category"===l.panel?"nav-link disabled":"nav-link ",onClick:function(e){e.preventDefault(),l.set(Object(o.a)(Object(o.a)({},l),{},{panel:"category"})),d.push("/almacen")},children:[Object(yc.jsx)("i",{className:"category"===l.panel?"fas fa-check text-success mr-1":"fas fa-plus mr-1"}),"Categorias"]})}),Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:"brands"===l.panel?"nav-link disabled":"nav-link",onClick:function(e){e.preventDefault(),l.set(Object(o.a)(Object(o.a)({},l),{},{panel:"brands"})),d.push("/almacen")},children:[Object(yc.jsx)("i",{className:"brands"===l.panel?"fas fa-check text-success mr-1":"fas fa-plus mr-1"}),"Marcas"]})}),Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:"inventory"===l.panel?"nav-link disabled":"nav-link",onClick:function(e){e.preventDefault(),l.set(Object(o.a)(Object(o.a)({},l),{},{panel:"inventory"}))},children:[Object(yc.jsx)("i",{className:"inventory"===l.panel?"fas fa-check text-success mr-1":"fas fa-plus mr-1"}),"Inventario"]})}),"inbox"===l.panel&&Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("li",{className:"nav-item p-1",children:Object(yc.jsx)(qc,{supplier:null===(e=l.options)||void 0===e?void 0:e.supplier,showIcon:!1,handleChangeSupplier:function(e){return function(e){l.set(Object(o.a)(Object(o.a)({},l),{},{options:Object(o.a)(Object(o.a)({},l.options),{},{brand:"",supplier:e})}))}(e)}})}),(null===(t=l.options)||void 0===t?void 0:t.supplier)&&Object(yc.jsx)("li",{className:"nav-item p-1",children:Object(yc.jsx)(Rc,{supplier:null===(a=l.options)||void 0===a?void 0:a.supplier,brand:null===(n=l.options)||void 0===n?void 0:n.brand,showIcon:!1,handleChangeBrand:function(e){u({name:"brand",value:e})}})}),Object(yc.jsx)("li",{className:"nav-item p-1",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"zero",type:"checkbox",className:"custom-control-input",id:"zero",checked:"true"===(null===(c=l.options)||void 0===c?void 0:c.zero),onChange:function(e){var t=e.target;return u(t)}}),Object(yc.jsx)("label",{className:"custom-control-label font-weight-normal",htmlFor:"zero",children:"Cantidades en cero"})]})}),Object(yc.jsxs)("li",{className:"nav-item p-1",children:[Object(yc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yc.jsxs)("select",{className:"custom-select text-uppercase",name:"orderby",id:"orderby",value:null===(s=l.options)||void 0===s?void 0:s.orderby,onChange:function(e){var t=e.target;return u(t)},children:[Object(yc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-1",children:[Object(yc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yc.jsxs)("select",{className:"custom-select text-uppercase",name:"order",id:"order",value:null===(r=l.options)||void 0===r?void 0:r.order,onChange:function(e){var t=e.target;return u(t)},children:[Object(yc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-1",children:[Object(yc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de productos"}),Object(yc.jsxs)("select",{className:"custom-select text-uppercase",name:"itemsPage",id:"itemsPage",value:null===(i=l.options)||void 0===i?void 0:i.itemsPage,onChange:function(e){var t=e.target;return u(t)},children:[Object(yc.jsx)("option",{value:"25",children:"ver 25"}),Object(yc.jsx)("option",{value:"50",children:"ver 50"}),Object(yc.jsx)("option",{value:"75",children:"ver 75"}),Object(yc.jsx)("option",{value:"100",children:"ver 100"})]})]})]})]})}function Jc(e){var t=e.meta,a=e.color,n=e.handlePagination,c=function(e){n?n(e):console.error("[OrusSystem] Funcion de paginador no definida")};return Object(yc.jsx)("div",{className:"btn-group",children:Object(yc.jsxs)("ul",{className:"pagination pagination-sm m-0 mb-1",children:[Object(yc.jsx)("li",{className:1===t.current_page?"page-item disabled":"page-item test-",children:Object(yc.jsx)("a",{className:1===t.current_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),c(1)},children:"Primero"})}),Object(yc.jsx)("li",{className:1===t.current_page?"page-item disabled":"page-item",children:Object(yc.jsx)("a",{className:1===t.current_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),c(t.current_page-1)},children:Object(yc.jsx)("i",{className:"fas fa-caret-left"})})}),Object(yc.jsx)("li",{className:"page-item",children:Object(yc.jsx)("span",{className:"page-link text-dark",children:t.current_page&&t.last_page?Object(yc.jsxs)(yc.Fragment,{children:[t.current_page," /",t.last_page]}):"..."})}),Object(yc.jsx)("li",{className:t.current_page===t.last_page?"page-item disabled":"page-item",children:Object(yc.jsx)("a",{className:t.current_page===t.last_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),c(t.current_page+1)},children:Object(yc.jsx)("i",{className:"fas fa-caret-right"})})}),Object(yc.jsx)("li",{className:t.current_page===t.last_page?"page-item disabled":"page-item",children:Object(yc.jsx)("a",{className:t.current_page===t.last_page?"page-link text-secondary":"page-link text-"+a,href:"#pageBefore",onClick:function(e){e.preventDefault(),c(t.last_page)},children:"Ultimo"})})]})})}var Hc=function(e){var t=e.defaultSearch,a=void 0===t?"":t,n=Object(xc.useState)(a),c=Object(hc.a)(n,2),s=c[0],r=c[1],i=Object(xc.useState)(""),o=Object(hc.a)(i,2),l=o[0],d=o[1],u=Object(xc.useRef)(),j=Object(xc.useContext)(wc).auth;return Object(xc.useEffect)((function(){var t=null;e.handleSearch&&(s.length?(l&&clearTimeout(l),t=setTimeout((function(){e.handleSearch(s)}),1e3),d(t)):e.handleSearch(""))}),[s]),Object(yc.jsxs)("div",{className:"card card-"+e.color+" card-outline",children:[Object(yc.jsxs)("div",{className:"card-header",children:[Object(yc.jsxs)("h3",{className:"card-title text-"+e.color,children:[Object(yc.jsx)("i",{className:e.icon?"mr-1 fas fa-"+e.icon:"mr-1 fas fa-user"}),e.title]}),Object(yc.jsx)("div",{className:"card-tools",children:e.handleSearch&&Object(yc.jsxs)("div",{className:"input-group input-group-sm position-relative",children:[Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Buscar",defaultValue:s,ref:u,onChange:function(e){var t=e.target.value;r(t)},onKeyPress:function(t){"Enter"===t.key&&(l&&clearTimeout(l),e.handleSearch(s))}}),Object(yc.jsx)("div",{className:"position-absolute",style:{top:5,left:-20,color:"#ced4da"},children:Object(yc.jsx)("i",{className:"fas fa-search"})}),s.length>2?Object(yc.jsx)("div",{className:"input-group-append",children:Object(yc.jsx)("div",{className:"btn btn-secondary",onClick:function(e){u.current.value="",r("")},children:Object(yc.jsx)("i",{className:"fas fa-window-close"})})}):null]})})]}),Object(yc.jsxs)("div",{className:"p-0 card-body",children:[e.handleDeleteItem||e.handleEditItem||e.handleStatus||e.handleSync||e.meta||e.handleDownload?Object(yc.jsxs)("div",{className:"mailbox-controls",children:[Object(yc.jsxs)("div",{className:"btn-group",children:[e.handleDeleteItem?Object(yc.jsx)("button",{type:"button",className:"btn btn-default btn-sm text-danger",title:"Eliminar",disabled:!e.itemSelected||e.itemSelected===j.idUser,onClick:function(t){return e.handleDeleteItem()},children:Object(yc.jsx)("i",{className:"fas fa-trash-alt"})}):null,e.handleEditItem?Object(yc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Editar",disabled:!e.itemSelected,onClick:function(t){return e.handleEditItem()},children:Object(yc.jsx)("i",{className:"fas fa-edit"})}):null,e.handleStatus?Object(yc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Estado",disabled:!e.itemSelected,onClick:function(t){return e.handleStatus()},children:Object(yc.jsx)("i",{className:"fas fa-check-circle"})}):null,e.handleSync?Object(yc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Recargar",onClick:function(t){return e.handleSync()},children:Object(yc.jsx)("i",{className:"fas fa-sync-alt"})}):null,e.handlePrint?Object(yc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Imprimir",onClick:function(t){return e.handlePrint()},children:Object(yc.jsx)("i",{className:"fas fa-print"})}):null,e.handleDownload?Object(yc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Exportar",onClick:function(t){return e.handleDownload()},children:Object(yc.jsx)("i",{className:"fas fa-file-csv"})}):null]}),Object(yc.jsx)("div",{className:"float-right",children:e.meta&&Object(yc.jsx)(Jc,{meta:e.meta,color:e.color,handlePagination:e.handlePagination})})]}):null,Object(yc.jsx)("div",{className:"table-responsive mailbox-messages",children:e.children})]}),e.loading?Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})};function Zc(e){var t,a=zc(),n=Vc(),c=Object(pc.f)(),s=Object(xc.useState)({itemSelected:{},items:[],meta:{},loading:!1}),r=Object(hc.a)(s,2),i=r[0],l=r[1],d=function(e,t){a.options[e]!==t&&a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},Object(N.a)({},e,t))}))},u=function(e,t){var a;e&&e.preventDefault(),null!==t&&void 0!==t&&t.id?c.push("/almacen/".concat(t.id)):null!==(a=i.itemSelected)&&void 0!==a&&a.id&&c.push("/almacen/".concat(i.itemSelected.id))},j=function(){var e=Object(me.a)(ue.a.mark((function e(){var t,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.a)(Object(o.a)({},a.options),{},{responseType:"csv"}),console.log("[Orus Sytem] Start donwload csv"),n=Oe("store",null,t),e.next=5,he(n);case 5:(c=e.sent)?(console.log("[Orus Sytem] Process data csv"),window.open(URL.createObjectURL(c)),console.log("[Orus Sytem] Donwload is ok"),window.Swal.fire({title:"Descargas",text:"El archivo CSV fue generado correctamente",icon:"success",showConfirmButton:!1,timer:1500})):window.Swal.fire({title:"Descargas",text:"El archivo CSV no se genero correctamente",icon:"error",showConfirmButton:!1,timer:3e3});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){l(Object(o.a)(Object(o.a)({},i),{},{loading:!0})),n.getItems(a.options).then((function(e){e&&l(Object(o.a)(Object(o.a)({},i),{},{items:e.data,meta:e.meta,loading:!1}))}))};return Object(xc.useEffect)((function(){b()}),[a.options]),Object(yc.jsx)(Hc,{title:"Lista de productos",icon:"id-badge",color:"primary",loading:i.loading,meta:i.meta,itemSelected:null===(t=i.itemSelected)||void 0===t?void 0:t.id,defaultSearch:a.options.search,handlePagination:function(e){return d("page",e)},handleSearch:function(e){return d("search",e)},handleDeleteItem:function(){window.Swal.fire({title:"Productos",text:"Desea eliminar el producto seleccionado?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||n.deleteItem(i.itemSelected.id).then((function(e){!0===e&&window.Swal.fire({title:"Productos",text:"Producto eliminado correctamente",icon:"success",showCancelButton:!1,confirmButtonColor:"#007bff",confirmButtonText:"Ok",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(l(Object(o.a)(Object(o.a)({},i),{},{itemSelected:{}})),l(Object(o.a)(Object(o.a)({},i),{},{loading:!0})),n.getItems(a.options).then((function(e){e&&l(Object(o.a)(Object(o.a)({},i),{},{items:e.data,meta:e.meta,loading:!1}))})))}))}))}))},handleEditItem:u,handleDownload:j,handleSync:b,children:Object(yc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{}),Object(yc.jsx)("th",{children:"Codigo"}),Object(yc.jsx)("th",{children:"Describci\xf3n"}),Object(yc.jsx)("th",{children:"Proveedor"}),Object(yc.jsx)("th",{children:"Marca"}),Object(yc.jsx)("th",{children:"Cant"})]})}),Object(yc.jsx)("tbody",{children:i.items.length?Object(yc.jsx)(yc.Fragment,{children:i.items.map((function(e){var t;return Object(yc.jsxs)("tr",{children:[Object(yc.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(yc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"item_"+e.id,checked:(null===(t=i.itemSelected)||void 0===t?void 0:t.id)===e.id,onChange:function(t){return function(e,t){var a=e.checked;l(Object(o.a)(Object(o.a)({},i),{},{itemSelected:a?t:{}}))}(t.target,e)}}),Object(yc.jsx)("label",{htmlFor:"item_"+e.id,className:"sr-only"})]}),Object(yc.jsx)("td",{className:"icheck-primary",children:Object(yc.jsx)("div",{className:"badge badge-dark text-uppercase",children:e.code})}),Object(yc.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",children:Object(yc.jsx)("a",{href:"\xb7link",onClick:function(t){return u(t,e)},className:"text-bold",children:e.name})}),Object(yc.jsx)("td",{className:"mailbox-attachment text-capitalize text-truncate text-muted",children:Object(yc.jsx)("span",{children:e.supplier?e.supplier.name:"--"})}),Object(yc.jsx)("td",{className:"mailbox-attachment text-uppercase text-truncate text-muted",children:Object(yc.jsx)("span",{children:e.brand?e.brand.name:"--"})}),Object(yc.jsx)("td",{className:"mailbox-date text-muted text-truncate text-right",children:Object(yc.jsx)("span",{children:e.cant_total})})]},e.id)}))}):Object(yc.jsx)("tr",{children:Object(yc.jsx)("th",{className:"text-center text-muted",colSpan:"6",children:"No hay productos registrados"})})})]})})}function Kc(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return a=Nc("categories",null,t),e.next=5,gc(a,"GET").then((function(e){return e})).catch((function(e){return console.error("[Orus System] Catch when get categories list in hook:",e.message),null}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nc("categories",t),e.next=5,gc(a,"GET").then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when get category in hook:",e.message),{}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("ID de la categoria a eliminar",t),t){e.next=3;break}return e.abrupt("return",!1);case 3:return a=Nc("categories",t),e.next=6,gc(a,"DELETE").then((function(){return!0})).catch((function(e){return console.error("[Orus System] Catch when delete category in hook:",e.message),!1}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("DATA CATEGORIA A GUARDAR:",t),t){e.next=3;break}return e.abrupt("return");case 3:if(a=t.id,delete t.id,!a){e.next=12;break}return n=Nc("categories",a),e.next=9,gc(n,"PUT",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when save category in hook:",e.message),null}));case 9:case 15:return e.abrupt("return",e.sent);case 12:return c=Nc("categories"),e.next=15,gc(c,"POST",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when save category in hook:",e.message),null}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getCategories:e,getCategory:t,deleteCategory:a,saveCategory:n}}function Qc(e){var t,a,n,c,s,r,i=Kc(),l=Object(xc.useState)({categories:[],cat1:0,cat2:0,cat3:0,cat4:0,load:!0}),d=Object(hc.a)(l,2),u=d[0],j=d[1],b=u.categories.filter((function(e){return e.id===u.cat1}))[0],m=null===b||void 0===b||null===(t=b.sons)||void 0===t?void 0:t.filter((function(e){return e.id===u.cat2}))[0],h=null===m||void 0===m||null===(a=m.sons)||void 0===a?void 0:a.filter((function(e){return e.id===u.cat3}))[0],x=null===h||void 0===h||null===(n=h.sons)||void 0===n?void 0:n.filter((function(e){return e.id===u.cat4}))[0];return Object(xc.useEffect)((function(){u.categories.length||i.getCategories({categoryid:"raiz"}).then((function(e){var t=e.data;j(Object(o.a)(Object(o.a)({},u),{},{categories:t,load:!1}))})),function(){var t,a,n;!u.cat1||!b||null!==(t=b.sons)&&void 0!==t&&t.length?!e.category||!u.cat1||u.cat2||u.cat3||u.cat4?!u.cat2||!m||null!==(a=m.sons)&&void 0!==a&&a.length?e.category&&u.cat1&&u.cat2&&!u.cat3&&!u.cat4?e.handleChange(0,[]):!u.cat3||!h||null!==(n=h.sons)&&void 0!==n&&n.length?e.category&&u.cat1&&u.cat2&&u.cat3&&!u.cat4?e.handleChange(0,[]):u.cat4&&e.handleChange(u.cat4,null===x||void 0===x?void 0:x.code):e.handleChange(u.cat3,h.code):e.handleChange(u.cat2,m.code):e.handleChange(0,[]):e.handleChange(u.cat1,b.code)}()}),[u]),Object(xc.useEffect)((function(){var t;u.categories.length&&e.category&&(t=e.category,i.getCategory(t).then((function(e){u.cat1===parseInt(e.code[0])&&u.cat2===parseInt(e.code[1])&&u.cat3===parseInt(e.code[2])&&u.cat4===parseInt(e.code[3])||j(Object(o.a)(Object(o.a)({},u),{},{cat1:parseInt(e.code[0]),cat2:parseInt(e.code[1]),cat3:parseInt(e.code[2]),cat4:parseInt(e.code[3]),load:!1}))})))}),[u.categories,e.category]),Object(yc.jsxs)("div",{children:[Object(yc.jsx)(Uc,{text:"Seleccione una categoria principal",options:u.categories,value:u.cat1,load:u.load,handleChange:function(e){return j(Object(o.a)(Object(o.a)({},u),{},{cat1:e,cat2:0,cat3:0,cat4:0}))}}),Boolean(u.cat1)&&Boolean(null===b||void 0===b||null===(c=b.sons)||void 0===c?void 0:c.length)&&Object(yc.jsx)(Uc,{text:"Seleccione una categoria para ".concat(b.name),options:b.sons,value:u.cat2,handleChange:function(e){return j(Object(o.a)(Object(o.a)({},u),{},{cat2:e,cat3:0,cat4:0}))}}),Boolean(u.cat2)&&Boolean(null===m||void 0===m||null===(s=m.sons)||void 0===s?void 0:s.length)&&Object(yc.jsx)(Uc,{text:"Seleccione una categoria para ".concat(m.name),options:m.sons,value:u.cat3,handleChange:function(e){return j(Object(o.a)(Object(o.a)({},u),{},{cat3:e,cat4:0}))}}),Boolean(u.cat2)&&Boolean(null===h||void 0===h||null===(r=h.sons)||void 0===r?void 0:r.length)&&Object(yc.jsx)(Uc,{text:"Seleccione una categoria para ".concat(h.name),options:h.sons,value:u.cat4,handleChange:function(e){return j(Object(o.a)(Object(o.a)({},u),{},{cat4:e}))}})]})}function Xc(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("store",null,{search:t}),e.next=3,gc(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("store",t),console.log(a),e.next=4,gc(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t,a){var n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Nc("store",null,{code:t,id:a}),console.log(n),e.next=4,gc(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Data a guardar",t),a=t.id,n=Nc("store"),!a){e.next=9;break}return e.next=6,gc(n,"PUT",t);case 6:case 11:return e.abrupt("return",e.sent);case 9:return e.next=11,gc(n,"POST",t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getProducts:e,getProductById:t,getProductByCode:a,saveProduct:n}}function Wc(e){var t=Xc(),a=Object(xc.useState)(0===e.code.length),n=Object(hc.a)(a,2),c=n[0],s=n[1];return Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:!0===c?"input-group-text bg-warning":"input-group-text bg-primary",children:Object(yc.jsx)("i",{className:"fas fa-code"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control text-uppercase",placeholder:"Codigo",name:"code",defaultValue:e.code,onChange:function(t){var a=t.target,n=a.name,c=a.value;console.log(n,c),e.onChangeProductCode(c)},onBlur:function(){0===e.code.length?s(!0):t.getProductByCode(e.code,e.id).then((function(t){t.data.length?t.data[0].code===e.code?(console.log("C\xf2digo de props",e.code),console.log("C\xf2digo a validar",t.data[0].code),s(!1)):s(!0):0===t.data.length&&(console.log("Entrando hasta abajo"),s(!1))}))},autoComplete:"off",maxLength:"18"}),!0===c?Object(yc.jsx)("span",{className:"text-muted text-xs d-block w-100",children:"Campo vacio o c\xf2digo en uso"}):null]})}function es(e){return Object(yc.jsx)("div",{className:"card",children:Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsxs)("h5",{className:"card-title text-muted text-bold w-100 mb-4",children:[Object(yc.jsx)("i",{className:"fas fa-bars mr-1"}),"Actividad"]}),e.data.map((function(e,t){var a,n=e.data,c=e.type;return Object(yc.jsxs)("p",{className:"card-text border-bottom",children:[Object(yc.jsx)("span",{className:"deleted"!==c?"created"===c?"badge badge-success text-uppercase":"badge badge-primary text-uppercase":"badge badge-danger text-uppercase",children:c}),Object(yc.jsx)("span",{className:"mx-2 text-uppercase",children:_c()(n.datetime).format("DD-MMMM-YYYY HH:mm")}),Object(yc.jsx)("span",{className:"text-bold text-capitalize",children:null===(a=n.user)||void 0===a?void 0:a.name.toLowerCase()}),Boolean(Object.keys(n.inputs).length)&&Object(yc.jsx)("span",{className:"px-2",children:Object.keys(n.inputs).map((function(e,t){return Object(yc.jsxs)("span",{className:"badge badge-light text-uppercase mx-1",children:[e," / ",n.inputs[e]]},t)}))})]},t)}))]})})}function ts(e){var t=e.branch_default,a=e.showIcon,n=void 0===a||a,c=e.setBranchId,s=Object(xc.useContext)(Ec).data.filter((function(e){return"branches"===e.name}));return Object(yc.jsxs)("div",{className:"input-group mb-3",children:[n&&Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text bg-primary",children:Object(yc.jsx)("i",{className:"fas fa-store-alt"})})}),Object(yc.jsxs)("select",{className:"custom-select text-uppercase",name:"branch_id",value:t,onChange:function(e){var t=e.target;return c(t)},children:[Object(yc.jsx)("option",{value:"0",children:"-- Ninguna --"}),s.map((function(e){return Object(yc.jsx)("option",{value:e.id,children:e.data.name},e.id)}))]})]})}function as(e){var t=e.inBranch,a=e.branchID,n=e.storeItemID,c=Vc(),s=Object(xc.useState)({id:0,cant:0,price:1,store_item_id:0,branch_id:0,readyToSave:!1}),r=Object(hc.a)(s,2),i=r[0],l=r[1],d=function(e){var a=e.name,n=e.value,c=!1;n="cant"===a?parseInt(n):parseFloat(n),t[a]!==n&&(c=!0),l(Object(o.a)(Object(o.a)({},i),{},Object(N.a)({readyToSave:c},a,n)))};return Object(xc.useEffect)((function(){l({id:t.id?t.id:0,cant:t.cant?t.cant:0,price:t.price?t.price:0,readyToSave:!1,store_item_id:n,branch_id:a})}),[t]),Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Cantidad en existencia"})}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text bg-primary",children:Object(yc.jsx)("i",{className:"fas fa-database"})})}),Object(yc.jsx)("input",{type:"number",className:"form-control text-right",placeholder:"Cantidades en existencia",name:"cant",onChange:function(e){var t=e.target;return d(t)},value:i.cant,min:0})]})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Precio"})}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text bg-primary",children:Object(yc.jsx)("i",{className:"fas fa-money-bill"})})}),Object(yc.jsx)("input",{type:"number",className:"form-control text-right",placeholder:"Precio",name:"price",onChange:function(e){var t=e.target;return d(t)},value:i.price,min:0})]})]})]}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col text-right",children:Object(yc.jsxs)("button",{className:i.readyToSave?"btn btn-success":"btn btn-secondary",type:"button",onClick:function(){c.saveQantityandPrice(i).then((function(e){e?console.log("Data devuelta",e):console.error("Error al guardar la informacion")})),l(Object(o.a)(Object(o.a)({},i),{},{readyToSave:!1}))},disabled:!i.readyToSave,children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"})," Guardar"]})})})]})}function ns(e){var t=e.branches,a=e.storeItemID;console.log("----",a);var n=Object(xc.useContext)(Ec).data.filter((function(e){return"branches"===e.name}));return Object(yc.jsx)("form",{children:n.map((function(e){var n,c=t.filter((function(t){return t.branch_id===e.id}));return console.log(c),Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h5",{className:"card-title text-primary text-capitalize",children:[Object(yc.jsx)("i",{className:"fas fa-store-alt mr-1"})," ",e.data.name]})}),Object(yc.jsx)("div",{className:"card-body",children:Object(yc.jsx)(as,{inBranch:null!==(n=c[0])&&void 0!==n?n:{},branchID:e.id,storeItemID:a})})]},e.id)}))})}var cs={id:0,code:"",codebar:"",grad:"",brand_id:0,name:"",unit:"PZ",cant:1,price:1,supplier_id:0,category_id:0,branch_default:12,data:{category:{code:[]},categories:[],branches:[],codes:[],category_code:[],activity:[]},loading:!1};function ss(e){var t=Object(xc.useContext)(Mc),a=e.match.params.id,n=Object(xc.useState)(cs),s=Object(hc.a)(n,2),r=s[0],i=s[1],l=Vc(),d=r.code,u=r.loading,j=Object(xc.useContext)(wc),b=Object(pc.f)(),m=!1;m=(r.data.category.code?r.data.category.code.filter((function(e){return""!==e})):[]).includes("1")?r.category_id&&r.code&&r.name:r.category_id&&r.code&&r.name&&r.supplier_id&&r.brand_id;return Object(xc.useEffect)((function(){a&&l.getItem(a).then((function(e){var t,a,n;console.log("API response",e),i(Object(o.a)(Object(o.a)({},r),{},{id:e.id?e.id:0,name:e.name?e.name:"",category_id:null===(t=e.category)||void 0===t?void 0:t.id,supplier_id:null===(a=e.supplier)||void 0===a?void 0:a.id,brand_id:null===(n=e.brand)||void 0===n?void 0:n.id,branch_default:j.auth.branch.id?j.auth.branch.id:"12",code:e.code?e.code:"",data:Object(o.a)(Object(o.a)({},r.data),{},{category:e.category?e.category:[],inBranches:e.inBranches?e.inBranches:"",branches:e.branches?e.branches:[],activity:e.activity?e.activity:[]}),loading:!1}))}))}),[a]),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h3",{className:"card-title text-primary text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-database mr-1"}),a?"Editar producto (".concat(d,")"):"Registrar nuevo producto"]})}),Object(yc.jsxs)("form",{className:"card-body",autoComplete:"off",children:[Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("fieldset",{children:[Object(yc.jsx)("small",{className:"mr-2",children:Object(yc.jsx)("label",{children:"Categoria"})}),Object(yc.jsx)(Qc,{category:r.category_id,handleChange:function(e,t){i(Object(o.a)(Object(o.a)({},r),{},{category_id:e,data:Object(o.a)(Object(o.a)({},r.data),{},{category_code:t})}))}})]})})}),Boolean(r.data.category_code.length)&&!r.data.category_code.includes("1")&&Object(yc.jsx)(qc,{supplier:r.supplier_id,handleChangeSupplier:function(e){i(Object(o.a)(Object(o.a)({},r),{},{supplier_id:e,brand_id:0}))}}),Boolean(r.supplier_id)&&Object(yc.jsx)(Rc,{brand:r.brand_id,supplier:r.supplier_id,textSelect:"Selecione la marca",handleChangeBrand:function(e){i(Object(o.a)(Object(o.a)({},r),{},{brand_id:e}))}}),r.category_id?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"row",children:[r.data.category_code.includes("1")&&Object(yc.jsxs)("div",{className:"col-3",children:[Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Graduacion"})}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text bg-primary",children:Object(yc.jsx)("i",{className:"fas fa-glasses"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"+100100",defaultValue:r.grad,onChange:function(e){var t=e.target;return i(Object(o.a)(Object(o.a)({},r),{},{grad:t.value}))},maxLength:"7",autoComplete:"off"})]})]}),Object(yc.jsxs)("div",{className:"col",children:[r.unit?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Unidad de presentacion"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:r.unit?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(yc.jsx)("i",{className:"fas fa-balance-scale"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Unidad de presentaci\xf3n",defaultValue:r.unit,onChange:function(e){var t=e.target;return i(Object(o.a)(Object(o.a)({},r),{},{unit:t.value}))},maxLength:"4"})]})]})]}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-5",children:[r.code?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Codigo"})}):Object(yc.jsx)("br",{}),Object(yc.jsx)(Wc,{code:r.code,id:r.id,onChangeProductCode:function(e){i(Object(o.a)(Object(o.a)({},r),{},{code:e}))}})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Codigo de barras"})}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text bg-primary",children:Object(yc.jsx)("i",{className:"fas fa-barcode"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Codigo de barras",name:"codebar",defaultValue:r.codebar,onChange:function(e){var t=e.target;i(Object(o.a)(Object(o.a)({},r),{},{codebar:t.value}))},autoComplete:"off",maxLength:"100"})]})]})]}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col",children:[r.name?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Nombre del producto"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:r.name?"input-group-text bg-primary":"input-group-text bg-warning",children:Object(yc.jsx)("i",{className:"fas fa-archive"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control text-uppercase",placeholder:"Nombre",name:"name",defaultValue:r.name,onChange:function(e){var t=e.target;i(Object(o.a)(Object(o.a)({},r),{},{name:t.value}))},maxLength:"149"})]})]})})]}):Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("h6",{className:"text-warning",children:"Seleccione primero una categor\xeda."})})})]}),Object(yc.jsx)("div",{className:"card-footer text-right",children:Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-md-12",children:Object(yc.jsxs)("div",{className:"btn-group",role:"group",children:[Object(yc.jsxs)(c.b,{to:"/almacen",className:"btn btn-default",onClick:function(){t.set(Object(o.a)(Object(o.a)({},t),{},{panel:"inbox"}))},children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),a?"Cerrar":"Cancelar"]}),Object(yc.jsxs)("button",{type:"button",onClick:function(){l.saveItem(r).then((function(e){e?window.Swal.fire({title:"Productos",text:"Producto guardado correctamente",icon:"success",showCancelButton:!1,confirmButtonColor:"#007bff",confirmButtonText:"OK",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(i(cs),t.set(Object(o.a)(Object(o.a)({},t),{},{panel:"inbox"})),b.push("/almacen"))})):window.Swal.fire({title:"Almacenamiento",text:"Error al guardar el producto",icon:"error",showCancelButton:!1,confirmButtonColor:"#007bff",confirmButtonText:"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0})}))},className:m?"btn btn-primary":"btn btn-secondary",disabled:!m,children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"}),"Guardar"]})]})})})}),u&&Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})})]})}),a?Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsx)("h5",{className:"card-title text-primary",children:"Sucursal por defecto"})}),Object(yc.jsx)("div",{className:"card-body",children:Object(yc.jsx)(ts,{branch_default:r.branch_default,showIcon:!1,setBranchId:function(e){var t=e.value;i(Object(o.a)(Object(o.a)({},r),{},{branch_default:t}))}})})]})})}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)(ns,{branches:r.data.branches,storeItemID:r.id})})})]}):null,Object(yc.jsx)("div",{className:"col-lg-12",children:Object(yc.jsx)(es,{data:r.data.activity})})]})}function rs(e){var t=Kc(),a=JSON.parse(localStorage.getItem("OrusSystem")),n=Object(xc.useContext)(Mc),c=Object(xc.useState)({id:0,meta:{},dd:!1,name:"",category_raiz:[],category_id:e.category,page:1,host:a.host,token:a.token,load:!1}),s=Object(hc.a)(c,2),r=s[0],i=s[1],l=r.category_raiz,d=r.category_id,u=r.name,j=r.add,b=e.loading;Object(xc.useEffect)((function(){var t=e.categoryData,a=void 0===t?[]:t;a&&i(Object(o.a)(Object(o.a)({},r),{},{category_raiz:a}))}),[e]);return Object(yc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yc.jsx)("div",{className:"card-body",children:Object(yc.jsxs)("table",{className:"table",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"Nombre"}),Object(yc.jsx)("th",{style:{width:48}})]})}),Object(yc.jsx)("tbody",{children:!b&&l?Object(yc.jsx)(Oc.a.Fragment,{children:l.map((function(a){return Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("td",{className:"text-capitalize",children:Object(yc.jsx)("a",{href:"#select!"+a.id,onClick:function(t){t.preventDefault(),function(t){var a=e.last,n=e.categorySelect,c=r.category_raiz;!a&&!(!t.sons||t.sons&&!t.sons.length)&&(n({category_id:t.id,category_data:c}),i(Object(o.a)(Object(o.a)({},r),{},{category_id:t.id})))}(a)},className:a.sons&&a.sons.length?"text-primary":"text-dark",children:a.name})}),Object(yc.jsxs)("td",{className:"btn-group",children:[Object(yc.jsx)("button",{type:"button",className:"btn btn-default",disabled:!0,title:"Proximamente",children:Object(yc.jsx)("i",{className:"fas fa-edit"})}),Object(yc.jsx)("button",{type:"button",title:"Eliminar",className:a.hijos&&a.hijos.length?"btn btn-outline-secondary btn-sm":"btn btn-outline-danger btn-sm",onClick:function(e){var c;c=a.id,a.name,c&&t.deleteCategory(c).then((function(e){e?window.Swal.fire({title:"Categorias",text:"Categoria eliminada correctamente",icon:"success",showCancelButton:!1,confirmButtonText:"OK",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||n.set(Object(o.a)(Object(o.a)({},n),{},{panel:"inbox"}))})):window.Swal.fire({title:"Categorias",text:"Error al eliminar la categoria",icon:"error",showCancelButton:!1,confirmButtonText:"OK",showLoaderOnConfirm:!0})}))},disabled:a.hijos&&a.hijos.length,children:Object(yc.jsx)("i",{className:"fas fa-trash"})})]})]},a.id)}))}):Object(yc.jsx)("tr",{children:Object(yc.jsx)("td",{colSpan:"8",className:"text-center",children:Object(yc.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(yc.jsx)("span",{className:"sr-only",children:"Loading..."})})})})}),j&&!b?Object(yc.jsx)("tfoot",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("td",{children:Object(yc.jsx)("input",{type:"text",name:"name",className:"form-control text-uppercase",autoComplete:"off",value:u,onChange:function(e){var t=e.target,a=t.name,n=t.value;i(Object(o.a)(Object(o.a)({},r),{},Object(N.a)({},a,n.toLowerCase())))},ref:function(e){}})}),Object(yc.jsx)("td",{children:Object(yc.jsx)("button",{className:"btn btn-dark btn-sm",onClick:function(){if(r.name.length<4)return window.Swal.fire("Verificaci\xf3n","Debe de escribir el nombre de la categoria","warning"),!1;var e=r.category_id,a={name:r.name,category_id:e};t.saveCategory(a).then((function(e){e?window.Swal.fire({title:"Categorias",text:"Categoria guardada correctamente",icon:"success",showCancelButton:!1,confirmButtonText:"OK",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||n.set(Object(o.a)(Object(o.a)({},n),{},{panel:"inbox"}))})):window.Swal.fire("Categorias","Error al guardar la categoria","error")}))},disabled:u.length<3,title:"Guardar categoria",children:Object(yc.jsx)("i",{className:"fas fa-save"})})})]})}):null]})}),Object(yc.jsx)("div",{className:"card-footer text-right",children:Object(yc.jsx)("button",{className:j?"btn btn-secondary btn-sm text-bold":"btn btn-primary btn-sm",onClick:function(){i(Object(o.a)(Object(o.a)({},r),{},{add:!r.add,name:""}))},disabled:!d,title:j?"Cancelar":"Crear nueva categoria",children:j?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}):Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar"]})})})]})}function is(){var e,t=Kc(),a=Object(xc.useState)({category_id:0,category_data:[]}),n=Object(hc.a)(a,2),c=n[0],s=n[1],r=c.category_id,i=c.category_data,l=i,d={};if(r){var u=i.filter((function(e){return e.id===r}));u.length&&(d=u[0])&&d.sons&&(l=d.sons)}return Object(xc.useEffect)((function(){t.getCategories({categoryid:"raiz"}).then((function(e){e?s(Object(o.a)(Object(o.a)({},c),{},{category_data:e.data})):console.error("Error al obtener la lista de categorias")}))}),[]),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col-8",children:[Object(yc.jsx)("nav",{children:Object(yc.jsx)("ol",{className:"breadcrumb",children:c.category_id?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:Object(yc.jsx)("a",{href:"#link",onClick:function(e){e&&e.preventDefault(),t.getCategories({categoryid:"raiz"}).then((function(e){e?s({category_data:e.data,category_id:null}):console.error("Error al obtener la lista de categorias")}))},children:"Raiz"})}),d.id?Object(yc.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:d.name}):null]}):Object(yc.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Seleccione una categoria para ver su contenido"})})}),Object(yc.jsx)(rs,{category:r,categoryData:null!==(e=l)&&void 0!==e?e:[],categorySelect:function(e){s(e)}})]})})}function os(e){var t=e.brands,a=e.handleEdit,n=void 0===a?null:a,c=e.handleDelete,s=void 0===c?null:c;return Object(yc.jsx)("ul",{className:"card-text list-group",children:t.length?t.map((function(e){return Object(yc.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(yc.jsxs)("span",{className:"text-dark text-uppercase text-truncate",children:[Object(yc.jsx)("i",{className:"fas fa-thumbtack mr-1"}),e.name]}),n||s,Object(yc.jsxs)("div",{children:[n&&Object(yc.jsx)("span",{className:"badge badge-dark badge-pill py-1 mr-2",style:{cursor:"pointer"},title:"Editar",onClick:function(){return n(e)},children:Object(yc.jsx)("i",{className:"fas fa-edit"})}),s&&Object(yc.jsx)("span",{className:"badge badge-danger badge-pill py-1",style:{cursor:"pointer"},title:"Eliminar",onClick:function(){return s(e)},children:Object(yc.jsx)("i",{className:"fas fa-trash"})})]})]},e.id)})):Object(yc.jsx)("li",{className:"list-group-item",children:Object(yc.jsxs)("p",{className:"text-danger",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"No exiten marcas para este proveedor!"]})})})}function ls(){var e=Vc(),t=Object(xc.useContext)(Mc),a=Object(xc.useState)({id:null,supplier:0,brands:[],name:"",loading:!1}),n=Object(hc.a)(a,2),c=n[0],s=n[1];Object(xc.useEffect)((function(){r()}),[c.supplier]);var r=function(){var t=c.supplier;t&&e.getBrands({supplier:t,order:"name"}).then((function(e){e?s(Object(o.a)(Object(o.a)({},c),{},{brands:e.data})):console.error("Error al obtener la lista de marcas")}))},i=c.id,l=c.supplier,d=c.name,u=c.loading;return Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-12",children:Object(yc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yc.jsx)("h5",{className:"card-title mt-2 ml-2 text-bold",children:"Marcas para productos"}),Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)(qc,{supplier:l,handleChangeSupplier:function(e){s(Object(o.a)(Object(o.a)({},c),{},{supplier:e,brands:e?c.brands:[]}))}}),!c.brands.length&&Object(yc.jsxs)("p",{className:"card-text",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Para iniciar, primero seleccione a un proveedor"]})]})]})}),l?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("h5",{className:"card-title text-dark mb-4 text-bold",children:"Listado de marcas"}),Object(yc.jsx)(os,{brands:c.brands,handleEdit:function(e){return function(e){s(Object(o.a)(Object(o.a)({},c),{},{name:e.nombre,id:e.id}))}(e)},handleDelete:function(a){!function(a,n){window.Swal.fire({title:"Eliminar",text:"\xbfEsta seguro de eliminar la marca "+n.toUpperCase()+"?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(n){n.dismiss||(console.log("[Orus Suystem] Enviando datos para eliminar marca",a),e.deleteBrand(a).then((function(e){!0===e?window.Swal.fire({title:"Marcas",text:"Marca eliminada correctamente",icon:"success",showCancelButton:!1,confirmButtonColor:"#007bff",confirmButtonText:"Ok",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}):window.Swal.fire({title:"Marcas",text:"Error al eliminar la marca",icon:"error",showCancelButton:!1,confirmButtonColor:"#d33",confirmButtonText:"Ok",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0})})),t.set(Object(o.a)(Object(o.a)({},t),{},{panel:"inbox"})))}))}(a.id,a.name)}})]}),Object(yc.jsx)("div",{className:"card-footer",children:Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("input",{type:"text",className:"form-control mr-1",name:"name",value:d,onChange:function(e){return function(e){var t=e.name,a=e.value;s(Object(o.a)(Object(o.a)({},c),{},Object(N.a)({},t,a.toLowerCase())))}(e.target)}}),Object(yc.jsxs)("div",{className:"btn-group",children:[Object(yc.jsx)("button",{type:"button",className:"btn btn-default",disabled:!d,onClick:function(){s(Object(o.a)(Object(o.a)({},c),{},{name:"",id:null}))},children:Object(yc.jsx)("i",{className:"fas fa-eraser"})}),Object(yc.jsx)("button",{type:"button",className:i?"btn btn-success":"btn btn-primary",onClick:function(a){a.preventDefault();var n=c.name,r=c.supplier,i={name:n,contact_id:r};return n.length<3?(window.Swal.fire("Error","El nombre de la marca debe de tener por lo menos 3 caracteres","error"),!1):r?void window.Swal.fire({title:"Almacenamiento",text:"\xbfEsta seguro de CREAR un nuevo producto?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(a){a.dismiss||(e.saveBrand(i).then((function(e){e?window.Swal.fire({title:"Almacenamiento",text:"Producto almacenado correctamente",icon:"success",showCancelButton:!1,confirmButtonColor:"#007bff",confirmButtonText:"Ok",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}):console.error("Error al guardar la data enviada")})),t.set(Object(o.a)(Object(o.a)({},t),{},{panel:"inbox"})),s(Object(o.a)(Object(o.a)({},c),{},{name:"",id:null})))})):(window.Swal.fire("Error","Debe de elegir a un proveedor primero","error"),!1)},disabled:!d,children:Object(yc.jsx)("i",{className:"fas fa-save"})})]})]})}),u?Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})}):null]})}function ds(e){var t=e.header,a=e.body,n=e.items;return Object(yc.jsx)("div",{className:"table-responsive",children:Object(yc.jsxs)("table",{className:"table table-sm table-bordered table-hover",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"/"}),t]})}),Object(yc.jsx)("tbody",{children:a.map((function(e,a){var s="label"===e.props.children.type;return Object(yc.jsxs)("tr",{className:s?"table-secondary":"",children:[e,t.map((function(t,a){var r=s?parseFloat(e.props.children.props.children).toFixed(2).replace(".",""):parseFloat(e.props.children).toFixed(2).replace(".","");return parseInt(r)>=0&&(r="+"+r),r+=parseFloat(t.props.children).toFixed(2).replace(/[-.]/g,""),Object(yc.jsx)("td",{className:"text-center",children:n.length?n.map((function(e,t){return r===e.grad?Object(yc.jsx)(yc.Fragment,{children:e.cant_total?Object(yc.jsx)("span",{title:e.grad,className:e.cant_total>0?"badge badge-success":"badge badge-danger",children:Object(yc.jsx)(c.b,{to:"/almacen/"+e.id,className:"text-light",children:e.cant_total})},e.id+t):null}):null})):Object(yc.jsx)(c.b,{to:"/almacen/registro",children:Object(yc.jsx)("i",{className:"fas fa-plus text-secondary"})})},r+a)}))]},a)}))})]})})}var us=function(e){var t=e.currentBranch,a=e.handleSave,n=e.handleClose,c=e.branches,s=e.handleChange,r=e.disabled;return Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsx)("h5",{className:"modal-title",children:"Asignar Precio"}),Object(yc.jsx)("button",{onClick:n,type:"button",className:"close",children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsx)("div",{className:"modal-body p-2",children:Object(yc.jsxs)("div",{className:"d-flex flex-column justify-content-start align-items-start",children:[Object(yc.jsx)("label",{className:"text-center",children:"Sucrusales"}),Object(yc.jsxs)("select",{className:"form-control",id:"",name:"branchSelected",defaultValue:t.name,onChange:function(e){var t=e.target,a=t.name,n=t.value;s(a,n)},children:[Object(yc.jsx)("option",{value:0,children:"-- Seleciona una sucursal --"}),c.map((function(e){return Object(yc.jsx)("option",{value:e.id,children:e.data.name.toUpperCase()},e.id)}))]}),Object(yc.jsx)("br",{}),Object(yc.jsx)("label",{children:"Precio"}),Object(yc.jsx)("input",{onChange:function(e){var t=e.target,a=t.name,n=t.value;s(a,n)},name:"productPrice",type:"number",defaultValue:0,className:"form-control",placeholder:"Precio"})]})}),Object(yc.jsxs)("div",{className:"modal-footer",children:[Object(yc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:n,children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yc.jsx)("button",{onClick:a,disabled:r,type:"button",className:"btn btn-success",children:"Asignar"})]})]})})})};function js(){var e=Object(xc.useContext)(Ec).data.filter((function(e){return"branches"===e.name})),t=Object(xc.useContext)(wc).auth.branch,a=Object(xc.useState)({catData_1:[],catData_2:[],catData_3:[],catid_1:0,catid_2:0,catid_3:0,load:!1,items:[],meta:{},price:0}),n=Object(hc.a)(a,2),c=n[0],s=n[1],r=Object(xc.useState)({branchSelected:t?t.id:0,productPrice:0,productCategoryId:0}),i=Object(hc.a)(r,2),l=i[0],d=i[1],u=Object(xc.useState)(!1),j=Object(hc.a)(u,2),b=j[0],m=j[1],h=Kc(),x=Vc(),O=[],p=[],f=0;do{O.push(Object(yc.jsx)("th",{children:f.toFixed(2)},f)),f-=.25}while(f>parseFloat(c.meta.cil)-.25);f=parseFloat(c.meta.rangoInf);do{0===f?p.push(Object(yc.jsx)("td",{children:Object(yc.jsx)("label",{children:"0.00"})})):p.push(Object(yc.jsx)("td",{children:f.toFixed(2)})),f+=.25}while(f<parseFloat(c.meta.rangoSup)+.25);var v=0===c.items.length,g=0===l.branchSelected||0===l.productPrice||0===l.productCategoryId,y=function(){m(!b)},w=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=c.load,n={cat:t,itemsPage:500},a||s(Object(o.a)(Object(o.a)({},c),{},{load:!0})),x.getItems(n).then((function(e){if(e){var a=e.data.filter((function(e){return"+000000"!==e.grad}));s(Object(o.a)(Object(o.a)({},c),{},{items:a||[],catid_3:t,load:!1}))}else console.error("Error al obtener la lista de productos"),s(Object(o.a)(Object(o.a)({},c),{},{load:!1}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.target,a=t.name,n=t.value,r=c.catData_1,i=c.catData_2,l=[],d={};"catid_1"===a?(r.map((function(e){return e.id===parseInt(n)&&(l=e.sons,d=e.meta,!0)})),s(Object(o.a)(Object(o.a)({},c),{},{catid_1:parseInt(n),catid_2:0,catid_3:0,catData_2:l,catData_3:[],meta:d}))):"catid_2"===a&&(i.map((function(e){return e.id===parseInt(n)&&(l=e.sons,!0)})),s(Object(o.a)(Object(o.a)({},c),{},{catid_2:parseInt(n),catid_3:0,catData_3:l})))};return Object(xc.useEffect)((function(){h.getCategories({categoryid:"raiz"}).then((function(e){e&&e.data?s(Object(o.a)(Object(o.a)({},c),{},{catData_1:e.data[0].sons})):(console.error("Error al descargar categor\xedas"),window.Swal.fire("Fallo de conexion","Verifique la conexion al servidor","error"))}))}),[]),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("select",{className:"custom-select",name:"catid_1",value:c.catid_1,onChange:C,children:[Object(yc.jsx)("option",{value:"0",children:"Seleccione un tipo"}),c.catData_1.map((function(e){return Object(yc.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),c.catid_1&&c.catData_2.length?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("select",{className:"custom-select",name:"catid_2",value:c.catid_2,onChange:C,children:[Object(yc.jsx)("option",{value:"0",children:"Seleccione un material"}),c.catData_2.map((function(e){return Object(yc.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}):null,c.catid_2&&c.catData_3.length?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:c.catData_3.map((function(e){return Object(yc.jsx)("button",{className:c.catid_3===e.id?"btn btn-primary":"btn btn-secondary",onClick:function(t){w(e.id),s(Object(o.a)(Object(o.a)({},c),{},{catid_3:e.id,load:!0}))},children:e.name},e.id)}))})}):null]})}),Object(yc.jsx)("div",{className:"card-body",children:c.catid_3?Object(yc.jsx)(Oc.a.Fragment,{children:c.load?Object(yc.jsxs)("div",{className:"text-center",children:[Object(yc.jsx)("span",{className:"text-primary",children:"Cargando productos"}),Object(yc.jsx)("div",{className:"spinner-border text-primary ml-4",role:"status",children:Object(yc.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(yc.jsxs)(Oc.a.Fragment,{children:[Object(yc.jsxs)("div",{className:"row mb-2",children:[Object(yc.jsxs)("div",{className:"col mt-2",children:["Total de productos: ",Object(yc.jsx)("label",{children:c.items.length})]}),Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("button",{disabled:v,className:"btn btn-success",onClick:y,children:"Asignar Precio"})}),Object(yc.jsx)("div",{className:"col-6",children:Object(yc.jsx)("div",{className:"row"})})]}),b&&Object(yc.jsx)(us,{branches:e,currentBranch:t,handleChange:function(e,t){var a;d(Object(o.a)(Object(o.a)({},l),{},(a={},Object(N.a)(a,e,parseInt(t)),Object(N.a)(a,"productCategoryId",c.items.length?c.items[0].category.id:0),a)))},handleClose:y,disabled:g,handleSave:function(){x.saveGlobalPrice(l).then((function(e){y(),e?(console.log(e),window.Swal.fire({title:"Productos",text:"Precio asignado correctamente",icon:"success",showCancelButton:!1,confirmButtonColor:"#007bff",confirmButtonText:"OK",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||d({branchSelected:t?t.id:0,productPrice:0,productCategoryId:0})}))):(console.error("Error en la cosulta"),window.Swal.fire({title:"Productos",text:"Erro al guardar el precio global",icon:"error",showCancelButton:!1,confirmButtonColor:"#007bff",confirmButtonText:"OK",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||d({branchSelected:t?t.id:0,productPrice:0,productCategoryId:0})})))}))}}),Object(yc.jsx)(ds,{header:O,body:p,items:c.items})]})}):Object(yc.jsxs)("div",{className:"alert alert-warning text-light",role:"alert",children:[Object(yc.jsxs)("h4",{className:"alert-heading",children:[Object(yc.jsx)("i",{className:"fas fa-exclamation"})," Seleccion."]}),Object(yc.jsx)("hr",{}),Object(yc.jsxs)("ul",{children:[c.catid_1?null:Object(yc.jsx)("li",{children:"Selecciones primero el tipo de lente"}),c.catid_2?null:Object(yc.jsx)("li",{children:"Despues el material"}),Object(yc.jsx)("li",{children:"Por ultimo el tratamiento"})]})]})})]})})})}var bs={page:1,orderby:"created_at",order:"desc",search:"",itemsPage:25,supplier:"",brand:"",zero:"false"};function ms(e){var t=Object(xc.useState)({panel:"inbox",options:bs}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=e.match.params.id;return Object(xc.useEffect)((function(){c(Object(o.a)(Object(o.a)({},n),{},{panel:s?"neworedit":"inbox"}))}),[s]),Object(yc.jsx)(Mc.Provider,{value:Object(o.a)(Object(o.a)({},n),{},{set:c}),children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-sm-12 col-md-2",children:[Object(yc.jsxs)("button",{className:"btn bg-primary btn-block mb-3",type:"button",disabled:"inbox"!==n.panel,onClick:function(){return c(Object(o.a)(Object(o.a)({},n),{},{panel:"neworedit"}))},children:[Object(yc.jsx)("i",{className:"fas fa-plus mr-1"}),"Nuevo producto"]}),Object(yc.jsx)($c,{})]}),Object(yc.jsxs)("div",{className:"col-sm-12 col-md-10",children:["inbox"===n.panel&&Object(yc.jsx)(Zc,{}),"neworedit"===n.panel&&Object(yc.jsx)(ss,Object(o.a)({},e)),"category"===n.panel&&Object(yc.jsx)(is,{}),"brands"===n.panel&&Object(yc.jsx)(ls,{}),"inventory"===n.panel&&Object(yc.jsx)(js,{})]})]})})}var hs=Object(xc.createContext)(null),xs=function(){return Object(xc.useContext)(hs)};function Os(e){var t;return Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h5",{className:"card-title",children:[Object(yc.jsx)("i",{className:e.icon?"mr-2 fas fa-"+e.icon:"mr-2 fas fa-ellipsis-v"}),null!==(t=e.title)&&void 0!==t?t:"Menu"]})}),Object(yc.jsx)("div",{className:"card-body p-0",children:Object(yc.jsx)("ul",{className:"list-group nav list-group-flush",children:e.children})})]})}function ps(e){var t,a,n,c,s,r=e.newOrEdit,i=void 0!==r&&r,l=e.handleNewOrEdit,d=xs(),u=Object(pc.f)();return Object(yc.jsxs)("div",{className:"col-sm-12 col-md-2",children:[Object(yc.jsxs)("button",{className:"btn bg-indigo btn-block mb-3",type:"button",disabled:i,onClick:function(){return l()},children:[Object(yc.jsx)("i",{className:"fas fa-plus mr-1"}),"Nuevo contacto"]}),Object(yc.jsx)(Os,{title:i?"Menu":"Filtros",children:i?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("li",{className:"list-group-item",children:Object(yc.jsxs)("a",{href:"#back",className:"d-flex justify-content-between align-items-center",onClick:function(e){var t;e.preventDefault(),console.log("[DEBUG] Tool bar:",null===(t=d.options)||void 0===t?void 0:t.page),u.push("/contactos")},children:["Ver listado",Object(yc.jsx)("span",{className:"badge badge-primary badge-pill",children:Object(yc.jsx)("i",{className:"fas fa-chevron-left"})})]})}),null!==(s=d.contact)&&void 0!==s&&s.id?Object(yc.jsx)("li",{className:"list-group-item",children:Object(yc.jsxs)("a",{href:"#details",className:"d-flex justify-content-between align-items-center",children:["Detalles",Object(yc.jsx)("span",{className:"badge badge-primary badge-pill",children:Object(yc.jsx)("i",{className:"fas fa-chevron-right"})})]})}):null]}):Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"type",children:"Tipo"}),Object(yc.jsxs)("select",{className:"form-control ",name:"type",id:"type",value:null===(t=d.options)||void 0===t?void 0:t.type,onChange:function(e){var t=e.target,a=parseInt(t.value);d.set(Object(o.a)(Object(o.a)({},d),{},{options:Object(o.a)(Object(o.a)({},d.options),{},{type:isNaN(a)?"":a})}))},children:[Object(yc.jsx)("option",{value:"",children:"-- Todos --"}),Object(yc.jsx)("option",{value:"0",children:"Clientes"}),Object(yc.jsx)("option",{value:"1",children:"Proveedores"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yc.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:null===(a=d.options)||void 0===a?void 0:a.orderby,onChange:function(e){var t=e.target;d.set(Object(o.a)(Object(o.a)({},d),{},{options:Object(o.a)(Object(o.a)({},d.options),{},{orderby:t.value})}))},children:[Object(yc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yc.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:null===(n=d.options)||void 0===n?void 0:n.order,onChange:function(e){var t=e.target;d.set(Object(o.a)(Object(o.a)({},d),{},{options:Object(o.a)(Object(o.a)({},d.options),{},{order:t.value})}))},children:[Object(yc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de contactos"}),Object(yc.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:null===(c=d.options)||void 0===c?void 0:c.itemsPage,onChange:function(e){var t=e.target;d.set(Object(o.a)(Object(o.a)({},d),{},{options:Object(o.a)(Object(o.a)({},d.options),{},{itemsPage:parseInt(t.value)})}))},children:[Object(yc.jsx)("option",{value:"25",children:"ver 25"}),Object(yc.jsx)("option",{value:"50",children:"ver 50"}),Object(yc.jsx)("option",{value:"75",children:"ver 75"}),Object(yc.jsx)("option",{value:"100",children:"ver 100"})]})]})]})})]})}function fs(){var e,t,a=xs(),n=Yc(),c=Object(pc.f)(),s=Object(xc.useState)({contactSelected:"",contacts:[],meta:{},loading:!1}),r=Object(hc.a)(s,2),i=r[0],l=r[1],d=function(){l(Object(o.a)(Object(o.a)({},i),{},{loading:!0})),n.getContacts(Object(o.a)({},a.options)).then((function(e){l(Object(o.a)(Object(o.a)({},i),{},{loading:!1,contacts:e.data,meta:e.meta,contactSelected:""}))}))};return Object(xc.useEffect)((function(){Object.keys(a.options).length&&d()}),[a.options]),Object(yc.jsx)(Hc,{title:"Lista de contactos",icon:"id-badge",color:"indigo",loading:i.loading,meta:i.meta,itemSelected:i.contactSelected,handlePagination:function(e){e&&a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},{page:e})}))},handleSearch:function(e){e?a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},{search:e,page:1})})):a.options.search&&a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},{search:"",page:1})}))},handleDeleteItem:function(e){i.contactSelected?window.Swal.fire({title:"Contactos",text:"\xbfDesea eliminar a este contacto?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss?l(Object(o.a)(Object(o.a)({},i),{},{contactSelected:""})):n.deleteContact(i.contactSelected).then((function(){d()})).catch((function(e){console.log("[Orus System] Catch when delete contact:",e.message)}))})):window.Swal.fire({title:"Error",text:"Lo sentimos no existe un contacto seleccionado",icon:"error"})},handleEditItem:function(){i.contactSelected?c.push("contactos/".concat(i.contactSelected)):window.Swal.fire({title:"Error",text:"Lo sentimos no existe un contacto seleccionado",icon:"error"})},handleSync:function(){a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},{page:1})}))},children:Object(yc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{}),Object(yc.jsx)("th",{children:"Nombre"}),Object(yc.jsx)("th",{children:"Edad"}),Object(yc.jsx)("th",{children:"E-mail"}),Object(yc.jsx)("th",{children:"Telefono"}),Object(yc.jsx)("th",{children:"Creado por"}),Object(yc.jsx)("th",{children:"created_at"===a.options.orderby?"Registrado":"Actualizado"})]})}),Object(yc.jsxs)("tbody",{children:[null===(e=i.contacts)||void 0===e?void 0:e.map((function(e){var t,n=Object.values(e.phones).filter((function(e){return e}));return Object(yc.jsxs)("tr",{children:[Object(yc.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(yc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"contact_"+e.id,checked:i.contactSelected===e.id,onChange:function(e){var t=e.target,a=t.value,n=t.checked;l(Object(o.a)(Object(o.a)({},i),{},{contactSelected:n?parseInt(a):""}))}}),Object(yc.jsx)("label",{htmlFor:"contact_"+e.id,className:"sr-only"})]}),Object(yc.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",style:{cursor:"pointer",maxWidth:180},onClick:function(){c.push("contactos/".concat(e.id))},children:Object(yc.jsxs)("label",{style:{cursor:"pointer"},className:e.enUso?"text-indigo":"",children:[e.type?Object(yc.jsx)("i",{className:"fas fa-store text-sm mr-2"}):Object(yc.jsx)("i",{className:"fas fa-user text-sm mr-2"}),e.name.toLowerCase()]})}),Object(yc.jsx)("th",{children:e.age?e.age:"--"}),Object(yc.jsx)("td",{className:"mailbox-attachment text-lowercase text-truncate",style:{maxWidth:180},children:Object(yc.jsxs)("span",{children:[Object(yc.jsx)("i",{className:"fas fa-envelope text-sm mr-2"}),Object(yc.jsx)("a",{href:"mailto:"+e.email,className:"text-muted",children:null===(t=e.email)||void 0===t?void 0:t.toLowerCase()})]})}),Object(yc.jsx)("td",{className:"mailbox-date text-muted text-truncate text-right",children:Object(yc.jsxs)("span",{children:[Object(yc.jsx)("i",{className:"fas fa-phone text-sm mr-2"}),n.length?n[0]:"--"]})}),Object(yc.jsx)("td",{className:"text-capitalize",children:e.created.name.toLowerCase()}),Object(yc.jsx)("td",{children:_c()("created_at"===a.options.orderby?e.created_at:e.updated_at).fromNow()})]},e.id)})),!(null!==(t=i.contacts)&&void 0!==t&&t.length)&&Object(yc.jsx)("tr",{children:Object(yc.jsxs)("th",{className:"text-center text-muted",colSpan:"7",children:[Object(yc.jsx)("i",{className:"fa fa-info mx-2"}),a.options.search?Object(yc.jsxs)("span",{children:["La busqueda",Object(yc.jsxs)("strong",{className:"text-dark mx-1",children:['"',a.options.search,'",']}),"no coincide con ning\xfan contacto."]}):"No hay contactos registrados"]})})]})]})})}var vs=a(28),gs=a.n(vs),Ns=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})$/i,ys={isEmail:function(e){return!!e&&Ns.test(e)}},ws=a(46);function Cs(e){var t,a,n,c,s,r,i,l,d,u=e.data,j=void 0===u?{}:u,b=e.handleChange,m=e.fn,h=Object(xc.useState)({emailVerification:null,emailColor:"dark",nameVerification:null,nameColor:"dark",birthdayVerification:!1,birthdayColor:"dark",contatcs:[]}),x=Object(hc.a)(h,2),O=x[0],p=x[1],f=function(e,t){e&&t&&("email"===e&&ys.isEmail(t)&&m.getContacts({page:1,orderby:"created_at",order:"desc",itemsPage:10,email:t,except:j.id}).then((function(e){var t,a,n;p(Object(o.a)(Object(o.a)({},O),{},{emailVerification:Boolean(null===(t=e.data)||void 0===t?void 0:t.length),emailColor:null!==(a=e.data)&&void 0!==a&&a.length?"danger":"dark"})),b("validates",Object(o.a)(Object(o.a)({},j.validates),{},{email:!Boolean(null===(n=e.data)||void 0===n?void 0:n.length)}))})),"name"===e&&m.getContacts({page:1,orderby:"created_at",order:"desc",itemsPage:10,name:t,except:j.id}).then((function(e){var t,a,n,c;p(Object(o.a)(Object(o.a)({},O),{},{contacts:null!==(t=e.data)&&void 0!==t&&t.length?e.data:[],nameVerification:Boolean(null===(a=e.data)||void 0===a?void 0:a.length),nameColor:null!==(n=e.data)&&void 0!==n&&n.length?"danger":"dark"})),b("validates",Object(o.a)(Object(o.a)({},j.validates),{},{name:!Boolean(null===(c=e.data)||void 0===c?void 0:c.length)}))})))};return Object(xc.useEffect)((function(){var e={birthday:Boolean(_c()().diff(j.birthday,"days")>0),test:_c()().diff(j.birthday,"days")};e.birthday!==O.birthdayVerification&&(p(Object(o.a)(Object(o.a)({},O),{},{birthdayVerification:e.birthday,birthdayColor:e.birthday?"dark":"danger"})),b("validates",Object(o.a)(Object(o.a)({},j.validates),{},{birthday:e.birthday})))}),[j.name,j.email,j.birthday]),Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Tipo de contacto"}),Object(yc.jsxs)("select",{className:"custom-select",name:"type",value:null!==(t=j.type)&&void 0!==t?t:"",onChange:function(e){var t=e.target;return b("type",parseInt(t.value))},children:[Object(yc.jsx)("option",{value:"0",children:"Cliente"}),Object(yc.jsx)("option",{value:"1",children:"Proveedor"})]})]}),j.type?Object(yc.jsxs)("div",{className:"form-group custom-control custom-checkbox",children:[Object(yc.jsx)("input",{type:"checkbox",name:"business",className:"custom-control-input",checked:null!==(a=j.business)&&void 0!==a&&a,onChange:function(e){var t=e.target;return b("business",t.checked)},id:"business_checkbox"}),Object(yc.jsx)("label",{htmlFor:"business_checkbox",className:"custom-control-label cursor-pointer",children:Object(yc.jsx)("small",{children:"\xbfEs un laboratorio?"})})]}):null,Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"RFC"}),Object(yc.jsx)("input",{type:"text",className:"form-control text-uppercase text-truncate",placeholder:"facturas",name:"rfc",defaultValue:null!==(n=j.rfc)&&void 0!==n?n:"",onChange:function(e){var t=e.target;return b("rfc",t.value.toUpperCase())},minLength:"10"})]}),Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"G\xe9nero"}),Object(yc.jsxs)("select",{className:"custom-select",name:"gender",value:null!==(c=j.gender)&&void 0!==c?c:"",onChange:function(e){var t=e.target;return b("gender",t.value)},children:[Object(yc.jsx)("option",{value:"male",children:"Hombre"}),Object(yc.jsx)("option",{value:"female",children:"Mujer"})]})]})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsxs)("div",{className:"form-group position-relative",children:[Object(yc.jsxs)("label",{children:["Nombre completo ",Object(yc.jsx)("span",{className:"text-orange",children:"*"})]}),Object(yc.jsx)("input",{type:"text",className:"form-control text-capitalize text-truncate text-".concat(O.nameColor),placeholder:"Ej: Juan Perez G",name:"name",defaultValue:null!==(s=j.name)&&void 0!==s?s:"",onChange:function(e){var t=e.target;return b("name",t.value.toLowerCase())},onBlur:function(e){var t=e.target;return f("name",t.value.toLowerCase())},onKeyDown:function(e){"Escape"===e.key&&p(Object(o.a)(Object(o.a)({},O),{},{contacts:[]}))}}),!j.name&&Object(yc.jsx)("small",{children:Object(yc.jsx)("span",{className:"text-orange",children:"Este campo es requerido"})}),null!==(r=O.contacts)&&void 0!==r&&r.length&&(null===(i=j.name)||void 0===i?void 0:i.length)>5&&!j.id?(d=O.contacts,Object(yc.jsx)("div",{className:"position-absolute border rounded p-0 bg-white overflow-auto ",style:{zIndex:"50",top:"4.1rem",width:"100%",maxHeight:"8rem"},children:Object(yc.jsx)("ul",{className:"list-group",children:d.map((function(e){var t;return Object(yc.jsxs)("li",{className:"list-group-item text-truncate",children:[Object(yc.jsx)("i",{className:"fas fa-minus mr-1 text-danger"}),Object(yc.jsx)("span",{className:"text-capitalize text-muted text-monospace text-sm",children:null===(t=e.name)||void 0===t?void 0:t.toLowerCase()})]},e.id)}))})})):null]}),Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsxs)("label",{children:["Correo electr\xf3nico ",Object(yc.jsx)("span",{className:"text-orange",children:"*"})]}),Object(yc.jsx)("input",{type:"email",className:"form-control text-lowercase text-truncate text-".concat(O.emailColor),placeholder:"Ej: correo@domain.com",name:"email",defaultValue:null!==(l=j.email)&&void 0!==l?l:"",onChange:function(e){var t=e.target;return b("email",t.value.toLowerCase())},onBlur:function(e){var t=e.target;return f("email",t.value)}}),!j.email&&Object(yc.jsx)("small",{children:Object(yc.jsx)("span",{className:"text-orange",children:"Este campo es requerido"})}),j.email&&!ys.isEmail(j.email)&&Object(yc.jsx)("small",{children:Object(yc.jsx)("span",{className:"text-orange",children:"Este no es un correo valido"})}),O.emailVerification&&"boolean"===typeof O.emailVerification&&Object(yc.jsx)("small",{children:Object(yc.jsx)("span",{className:"text-orange",children:"Este e-mail ya se encuentra registrado"})})]}),j.type?null:Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsxs)("label",{children:["Fecha de nacimiento ",Object(yc.jsx)("span",{className:"text-orange",children:"*"})]}),Object(yc.jsx)(gs.a,{className:"form-control text-".concat(O.birthdayColor),locale:"es",selected:new Date(j.birthday.format("YYYY/MM/DD")),dateFormat:"dd/MM/yyyy",maxDate:new Date,placeholderText:"Seleccione una fecha",onSelect:function(e){if(e){e=e.toLocaleDateString("es-MX");var t=_c()(e,"DD/MM/YYYY");t.isValid()&&b("birthday",t)}},onChange:function(e){if(e){e=e.toLocaleDateString("es-MX");var t=_c()(e,"DD/MM/YYYY");t.isValid()&&b("birthday",t)}}}),!O.birthdayVerification&&Object(yc.jsx)("small",{children:Object(yc.jsx)("span",{className:"text-orange",children:"Este campo es requerido"})})]})]})]})}function Ss(e){var t,a,n,c,s,r=e.data,i=e.handleChange;return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"col",children:[r.address_street?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Calle y numero"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group mb-1",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-road"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Calle y numero",defaultValue:null!==(t=r.address_street)&&void 0!==t?t:"",onChange:function(e){var t=e.target;return i("address_street",t.value.toLowerCase())}})]}),r.address_neighborhood?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Colonia"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group mb-1",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-location-arrow"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Colonia",defaultValue:null!==(a=r.address_neighborhood)&&void 0!==a?a:"",onChange:function(e){var t=e.target;return i("address_neighborhood",t.value.toLowerCase())}})]}),r.address_location?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Municipio"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group mb-1",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-location-arrow"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Municipio",defaultValue:null!==(n=r.address_location)&&void 0!==n?n:"",onChange:function(e){var t=e.target;return i("address_location",t.value.toLowerCase())}})]})]}),Object(yc.jsxs)("div",{className:"col",children:[r.address_state?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Estado"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group mb-1",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-map-marker"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Estado",defaultValue:null!==(c=r.address_state)&&void 0!==c?c:"",onChange:function(e){var t=e.target;return i("address_state",t.value.toLowerCase())}})]}),r.address_zip?Object(yc.jsx)("small",{children:Object(yc.jsx)("label",{children:"Codigo postal"})}):Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"input-group mb-1",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-map-marker"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Codigo Postal",defaultValue:null!==(s=r.address_zip)&&void 0!==s?s:"",onChange:function(e){var t=e.target;return i("address_zip",t.value.toLowerCase())}})]})]})]})}function _s(e){var t=e.data,a=e.handleChange;return Object(xc.useEffect)((function(){var e,n=Boolean([t.phone_notices,t.phone_cell,t.phone_office].filter((function(e){return 10===e.length})).length);n!==(null===(e=t.validates)||void 0===e?void 0:e.phones)&&a("validates",Object(o.a)(Object(o.a)({},t.validates),{},{phones:n}))}),[t.phone_notices,t.phone_cell,t.phone_office]),Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Telefono para recados"}),Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-phone"})})}),Object(yc.jsx)("input",{type:"tel",className:"form-control",placeholder:"(999) 999 9999",maxLength:"10",value:t.phone_notices,onChange:function(e){var t=e.target;isNaN(t.value)||a("phone_notices",t.value)}})]}),t.phone_notices&&10!==t.phone_notices.length&&Object(yc.jsx)("small",{children:Object(yc.jsx)("span",{className:"text-orange",children:"Telefono a 10 numeros"})})]})}),Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Telefono personal / whatsApp"}),Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-phone"})})}),Object(yc.jsx)("input",{type:"tel",className:"form-control",placeholder:"(999) 999 9999",maxLength:"10",value:t.phone_cell,onChange:function(e){var t=e.target;isNaN(t.value)||a("phone_cell",t.value)}})]})]})}),Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Telefono del trabajo"}),Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-phone"})})}),Object(yc.jsx)("input",{type:"tel",className:"form-control",placeholder:"(999) 999 9999",maxLength:"10",value:t.phone_office,onChange:function(e){var t=e.target;isNaN(t.value)||a("phone_office",t.value)}})]})]})})]})}Object(vs.registerLocale)("es",ws.a);var ks=function(e){var t=e.sales;return Object(yc.jsxs)("table",{className:"table m-0",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"ID"}),Object(yc.jsx)("th",{children:"Total"}),Object(yc.jsx)("th",{children:"Orden"}),Object(yc.jsx)("th",{children:"Registrado"})]})}),Object(yc.jsx)("tbody",{children:t.map((function(e){return Object(yc.jsxs)("tr",{children:[Object(yc.jsxs)("th",{children:["#",e.id]}),Object(yc.jsxs)("td",{children:["$ ",e.total.toFixed(2)]}),Object(yc.jsxs)("td",{children:["#",e.pedido]}),Object(yc.jsxs)("td",{className:"text-truncate",children:[Object(yc.jsx)("i",{className:"fas fa-clock mr-2"}),_c()(e.created_at).fromNow()]})]},e.id)}))})]})};function Es(e){var t=e.analytics,a=e.metadata,n=t.purchases,c=t.exams,s=t.brands,r=t.orders,i=t.suppliers,o=a.created_at,l=a.created,d=a.updated,u=a.updated_at;return Object(yc.jsxs)("div",{className:"row",children:[s?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"small-box bg-orange",children:[Object(yc.jsxs)("div",{className:"inner",children:[Object(yc.jsx)("h5",{children:s}),Object(yc.jsx)("p",{children:"Marcas"})]}),Object(yc.jsx)("div",{className:"icon",children:Object(yc.jsx)("i",{className:"fas fa-shopping-bag"})}),Object(yc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,i?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"small-box bg-indigo",children:[Object(yc.jsxs)("div",{className:"inner",children:[Object(yc.jsx)("h5",{children:i}),Object(yc.jsx)("p",{children:"Laboratorio"})]}),Object(yc.jsx)("div",{className:"icon",children:Object(yc.jsx)("i",{className:"fas fa-building"})}),Object(yc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,n?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"small-box bg-success",children:[Object(yc.jsxs)("div",{className:"inner",children:[Object(yc.jsx)("h5",{children:n}),Object(yc.jsx)("p",{children:"Compras"})]}),Object(yc.jsx)("div",{className:"icon",children:Object(yc.jsx)("i",{className:"fas fa-money-bill"})}),Object(yc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,c?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"small-box bg-info",children:[Object(yc.jsxs)("div",{className:"inner",children:[Object(yc.jsx)("h5",{children:c}),Object(yc.jsx)("p",{children:"Examenes"})]}),Object(yc.jsx)("div",{className:"icon",children:Object(yc.jsx)("i",{className:"fas fa-notes-medical"})}),Object(yc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,r?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"small-box bg-warning",children:[Object(yc.jsxs)("div",{className:"inner",children:[Object(yc.jsx)("h5",{children:r}),Object(yc.jsx)("p",{children:"Pedidos"})]}),Object(yc.jsx)("div",{className:"icon",children:Object(yc.jsx)("i",{className:"fas fa-shopping-basket"})}),Object(yc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs",children:["Mas ",Object(yc.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}):null,o&&Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"small-box bg-primary",children:[Object(yc.jsxs)("div",{className:"inner",children:[Object(yc.jsx)("h5",{children:_c()().diff(o,"days")>=0?o.format("DD/MMMM/Y"):"--/--/--"}),Object(yc.jsx)("p",{children:"Registrado"})]}),Object(yc.jsx)("div",{className:"icon",children:Object(yc.jsx)("i",{className:"fas fa-calendar"})}),Object(yc.jsx)("a",{href:"#details",className:"small-box-footer text-xs",children:_c()().diff(u,"days")>=0?"Modificado: ".concat(u.format("DD/MMMM/Y")):"Modificado --/--/--"})]})}),l&&Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"small-box bg-primary",children:[Object(yc.jsxs)("div",{className:"inner text-capitalize",children:[Object(yc.jsx)("h5",{className:"text-truncate",children:l}),Object(yc.jsx)("p",{children:"Registrado por"})]}),Object(yc.jsx)("div",{className:"icon",children:Object(yc.jsx)("i",{className:"fas fa-user"})}),Object(yc.jsxs)("a",{href:"#details",className:"small-box-footer text-xs text-truncate text-capitalize",children:["Modificado: ",d]})]})})]})}var Ls=function(e){var t=e.brands;return Object(yc.jsxs)("table",{className:"table m-0",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"Nombre"}),Object(yc.jsx)("th",{children:"Registrado"})]})}),Object(yc.jsx)("tbody",{children:t.map((function(e){return Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("td",{className:"text-uppercase",children:e.name}),Object(yc.jsxs)("td",{className:"text-truncate",children:[Object(yc.jsx)("i",{className:"fas fa-clock mr-2"}),_c()(e.created_at).fromNow()]})]},e.id)}))})]})},Is=function(e){var t,a=JSON.parse(null!==(t=localStorage.getItem("OrusSystem"))&&void 0!==t?t:"");return a.orders||(a.orders=[]),e?a.orders:a},Ts=function(e,t){t&&t()},Ds={handleStatusString:function(e){switch(e){case 0:return"procesando";case 1:return"laboratorio";case 2:return"bicelacion";case 3:return"terminado";case 4:return"entregado";default:return"garantia"}},handleDeleteOrder:function(e,t,a){if(e.id)return e.estado?(window.Swal.fire({title:"Verificacion",text:"El pedido tiene un proceso avanzado",icon:"warning"}),!1):e.nota?(window.Swal.fire({title:"Verificacion",text:"No se puede eliminar un pedido con una venta activa",icon:"warning"}),!1):(window.Swal.fire({text:"\xbfEsta seguro de eliminar el pedido ".concat(e.id,"?"),icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(n){if(!n.dismiss&&a)return a({id:e.id,options:t}),console.log("[Orus System] Eliminando pedido: "+e.id),!0})),!1)},handleSaveOrder:function(e,t,a,n,c){window.Swal.fire({title:"Almacenamiento",text:e?"\xbfEsta seguro de actualizar el pedido ".concat(e,"?"):"\xbfEsta seguro de crear un nuevo pedido?",icon:"question",showCancelButton:!0,confirmButtonText:e?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){var r=s.dismiss;console.log("[DEBUG HELPER data]",t),!r&&n&&(n({data:t,id:e,options:a}),c&&c(),Ts(t.contact_id))}))},getDataTemporary:Is,addDataTemporary:function(e){var t=Is();Object(o.a)(Object(o.a)({},t),{},{orders:t.orders.filter((function(t){return t.id!==e.id}))}).orders.push(e)},removeDataTemporary:Ts,getDataOneItem:function(e){var t;return null!==(t=Is().orders.filter((function(t){return t.id===e}))[0])&&void 0!==t?t:{}},getStatusType:["procesando","laboratorio","bicelacion","terminado","entregado"]},Ps=function(e){var t=e.orders;return Object(yc.jsxs)("table",{className:"table m-0",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"ID"}),Object(yc.jsx)("th",{children:"Folio LAB"}),Object(yc.jsx)("th",{children:"Nota"}),Object(yc.jsx)("th",{children:"Estado"}),Object(yc.jsx)("th",{children:"Registrado"})]})}),Object(yc.jsx)("tbody",{children:t.map((function(e){return Object(yc.jsxs)("tr",{children:[Object(yc.jsxs)("th",{children:["#",e.id]}),Object(yc.jsx)("td",{children:e.order_foreing?"#".concat(e.order_foreing):"--"}),Object(yc.jsx)("td",{children:e.nota?"#".concat(e.nota):"--"}),Object(yc.jsx)("td",{className:"text-uppercase",children:Object(yc.jsx)("span",{className:"badge badge-secondary",children:Ds.handleStatusString(e.status)})}),Object(yc.jsxs)("td",{className:"text-truncate",children:[Object(yc.jsx)("i",{className:"fas fa-clock mr-2"}),_c()(e.created_at).fromNow()]})]},e.id)}))})]})};function As(e){var t=e.exams,a=void 0===t?[]:t,n=e.allSelect,c=void 0!==n&&n,s=e.handleSelectedExam,r=Object(xc.useState)(""),i=Object(hc.a)(r,2),o=i[0],l=i[1];return Object(yc.jsxs)("table",{className:"table m-0",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{scope:"col"}),Object(yc.jsx)("th",{scope:"col",children:"Folio"}),Object(yc.jsx)("th",{scope:"col",children:"Registrado"}),Object(yc.jsx)("th",{scope:"col",children:"Estado"})]})}),Object(yc.jsxs)("tbody",{children:[a.length?null:Object(yc.jsx)("tr",{children:Object(yc.jsxs)("th",{colSpan:"4",className:"text-center",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"No hay registros"]})}),a.map((function(e){return Object(yc.jsxs)("tr",{className:_c()(new Date).isSame(_c()(e.created_at),"day")?"text-primary":"",children:[Object(yc.jsx)("td",{children:Object(yc.jsx)("div",{className:"icheck-primary",children:s?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("input",{type:"checkbox",name:"exam_"+e.id,id:"exam_"+e.id,defaultValue:e.id,onChange:function(t){t.target.checked?(l(e.id),s(e)):l("")},disabled:!c,checked:o===e.id}),Object(yc.jsx)("label",{htmlFor:"exam_"+e.id})]}):null})}),Object(yc.jsx)("th",{scope:"row",children:Object(yc.jsxs)("span",{className:"text",children:["#",e.id]})}),Object(yc.jsxs)("td",{className:"text-truncate",children:[Object(yc.jsx)("i",{className:"fas fa-clock mr-2"}),_c()(e.created_at).fromNow()]}),Object(yc.jsx)("td",{children:e.status?Object(yc.jsxs)("span",{className:"badge badge-success",children:[Object(yc.jsx)("i",{className:"fas fa-check"})," Terminado"]}):Object(yc.jsxs)("span",{className:"badge badge-secondary",children:[Object(yc.jsx)("i",{className:"fas fa-hourglass"})," Activo"]})})]},e.id)}))]})]})}function Bs(e){var t=e.showBottons,a=void 0!==t&&t,n=e.exams,c=void 0===n?[]:n;return Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsxs)("h5",{className:"card-title text-indigo text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-notes-medical mr-1"}),"Examenes"]}),c.length?Object(yc.jsx)(As,{allSelect:!0,exams:c,handleSelectedExam:function(e){console.log("[DEBUG] examSelect",e)}}):Object(yc.jsx)("div",{className:"alert alert-info mt-5",children:Object(yc.jsxs)("h5",{children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Aun no hay examenes para este contacto"]})})]}),a&&Object(yc.jsx)("div",{className:"card-footer text-right",children:Object(yc.jsx)("div",{className:"btn-group",children:Object(yc.jsx)("button",{className:"btn btn-secondary",children:"Nuevo"})})})]})}var Fs=function(e){var t=e.title,a=void 0===t?"confirmaci\xf3n":t,n=e.body,c=e.handleCancel;return Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsx)("h5",{className:"modal-title text-dark text-bold text-capitalize",children:a}),Object(yc.jsx)("button",{type:"button",className:"close",onClick:function(){c&&c()},children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsx)("div",{className:"modal-body",children:n})]})})})},Ms={id:0,name:"",rfc:"",gender:"male",email:"",type:0,business:0,birthday:_c()(),phone_notices:"",phone_cell:"",phone_office:"",age:"",address_street:"",address_neighborhood:"",address_location:"Colima",address_state:"Colima",address_zip:"",done:{purchases:[],brands:[],supplier_of:[],orders:[],exams:[]},analytics:{purchases:0,exams:0,brands:0,suppliers:0,orders:0},metadata:{created_at:"",updated_at:"",deleted_at:"",created:"",updated:"--"},validates:{name:!1,email:!1,birthday:!1,phones:!1},activity:[],loading:!1};function zs(e){var t,a,n,s=e.match.params.id,r=e.handleNewOrEdit,i=e.showModal,l=void 0!==i&&i,d=Yc(),u=Object(xc.useState)(Ms),j=Object(hc.a)(u,2),b=j[0],m=j[1],h=b.done,x=h.purchases,O=h.brands,p=h.supplier_of,f=h.orders,v=h.exams,g=b.analytics,y=b.metadata,w=Object(pc.f)(),C=4===Object.values(b.validates).filter((function(e){return e})).length,S=function(e,t){e&&b[e]!==t&&m(Object(o.a)(Object(o.a)({},b),{},Object(N.a)({},e,t)))};return Object(xc.useEffect)((function(){s&&d.getContact(parseInt(s)).then((function(e){!function(e,t){if(e){var a,n,c,s,r,i,o,l,d,u,j,b,m,h,x,O,p,f,v,g,N,y,w,C,S=_c()(null===(a=e.metadata)||void 0===a?void 0:a.birthday),_=_c()(),k=_.diff(S,"days");t({id:e.id,name:null===(n=e.name)||void 0===n?void 0:n.toLowerCase(),rfc:null===(c=e.rfc)||void 0===c?void 0:c.toUpperCase(),gender:null!==(s=e.metadata)&&void 0!==s&&s.gender?null===(r=e.metadata)||void 0===r?void 0:r.gender:"male",email:null===(i=e.email)||void 0===i?void 0:i.toLowerCase(),type:e.type,business:e.business,birthday:k>0?S:_,phone_notices:null===(o=e.phones)||void 0===o?void 0:o.notices,phone_cell:null===(l=e.phones)||void 0===l?void 0:l.cell,phone_office:null===(d=e.phones)||void 0===d?void 0:d.office,age:null!==(u=e.age)&&void 0!==u?u:0,address_street:null===(j=e.address)||void 0===j?void 0:j.street.toLowerCase(),address_neighborhood:null===(b=e.address)||void 0===b?void 0:b.neighborhood.toLowerCase(),address_location:null===(m=e.address)||void 0===m?void 0:m.location.toLowerCase(),address_state:null===(h=e.address)||void 0===h?void 0:h.state.toLowerCase(),address_zip:null===(x=e.address)||void 0===x?void 0:x.zip.toLowerCase(),done:{purchases:e.purchases,brands:e.brands,supplier_of:e.supplier_of,orders:e.orders,exams:e.exams},analytics:{purchases:e.purchases_count,exams:e.exams_count,brands:e.brands_count,suppliers:e.suppliers_count,orders:e.orders_count},metadata:{created_at:e.created_at?_c()(e.created_at):_c()(),updated_at:e.updated_at?_c()(e.updated_at):_c()(),deleted_at:null!==(O=e.deleted_at)&&void 0!==O?O:"",created:null!==(p=null===(f=e.created)||void 0===f?void 0:f.username.toLowerCase())&&void 0!==p?p:"",updated:null!==(v=null===(g=e.updated)||void 0===g?void 0:g.username.toLowerCase())&&void 0!==v?v:"--"},validates:{name:(null===(N=e.name)||void 0===N?void 0:N.length)>5,email:ys.isEmail(e.email),birthday:Boolean(_c()().diff(null===(y=e.metadata)||void 0===y?void 0:y.birthday,"days")>0),phones:Boolean(Object.values(null!==(w=e.phones)&&void 0!==w?w:{}).filter((function(e){return 10===e.length})).length)},activity:null!==(C=e.activity)&&void 0!==C?C:[],loading:!1})}}(e,m)}))}),[s]),Object(yc.jsxs)(yc.Fragment,{children:[b.id?Object(yc.jsx)(Es,{analytics:g,metadata:y}):null,Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col-md-12",children:[y.deleted_at?Object(yc.jsxs)("div",{className:"alert alert-warning",children:[Object(yc.jsxs)("h4",{className:"alert-heading",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Precaucion!"]}),Object(yc.jsxs)("p",{children:["Este contacto fue eliminado por ",null===(t=b.updated)||void 0===t?void 0:t.name," el"," ",_c()(b.deleted_at).format("LLLL")]})]}):null,Object(yc.jsxs)("div",{className:"card card-indigo card-outline",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h3",{className:"card-title text-indigo",children:[Object(yc.jsx)("i",{className:"fas fa-address-book mr-1"}),b.id?Object(yc.jsxs)("label",{children:["Editar contacto",Object(yc.jsx)("span",{className:"badge bg-indigo ml-2",children:b.id})]}):Object(yc.jsx)("label",{children:"Registrar nuevo contacto"})]})}),Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("h6",{className:"card-subtitle text-muted d-block w-100 mb-4 text-center",children:"Datos personales"}),Object(yc.jsx)(Cs,{data:b,handleChange:S,fn:d})]}),Object(yc.jsxs)("div",{className:"row mt-5 border-top pt-5",children:[Object(yc.jsxs)("h6",{className:"card-subtitle text-muted d-block w-100 mb-4 text-center",children:["Medios de contacto ",Object(yc.jsx)("span",{className:"text-orange",children:"*"}),!b.validates.phones&&Object(yc.jsx)("small",{className:"d-block w-100",children:Object(yc.jsx)("span",{className:"text-orange",children:"Ingrese por lo menos un telefono"})})]}),Object(yc.jsx)(_s,{data:b,handleChange:S})]}),b.type?null:Object(yc.jsxs)("div",{className:"row mt-5 border-top pt-5",children:[Object(yc.jsx)("h6",{className:"card-subtitle text-muted d-block w-100 mb-4 text-center",children:"Domicilios del contacto"}),Object(yc.jsx)(Ss,{data:b,domicilios:null!==(a=b.address)&&void 0!==a?a:{calle:"",colonia:"",municipio:"",estado:"",cp:""},handleChange:S})]})]}),Object(yc.jsx)("div",{className:"card-footer",children:Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-md-12",children:Object(yc.jsxs)("div",{className:"btn-group float-right",role:"group",children:[Object(yc.jsxs)("button",{className:"btn btn-default",type:"button",onClick:function(){w.push("/contactos"),r()},children:[Object(yc.jsx)("i",{className:b.id?"fas fa-arrow-left mr-2":"fas fa-ban mr-2"}),Object(yc.jsx)("strong",{children:b.id?"Cerrar":"Cancelar"})]}),Object(yc.jsxs)("button",{type:"button",className:"btn bg-indigo",onClick:function(){return function(){var e={id:b.id,name:b.name,rfc:b.rfc,gender:b.gender,email:b.email,type:b.type,business:b.business,birthday:b.birthday.format("YYYY/MM/DD"),telnumbers:{notices:b.phone_notices,cell:b.phone_cell,office:b.phone_office},domicilio:{street:b.address_street,neighborhood:b.address_neighborhood,location:b.address_location,state:b.address_state,zip:b.address_zip}};window.Swal.fire({title:"Contactos",text:e.id?"\xbfDesea actualizar a este contacto?":"\xbfDesea crear un nuevo contacto?",icon:"question",showCancelButton:!0,confirmButtonText:e.id?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){t.dismiss||d.saveContact(e).then((function(e){null!==e&&void 0!==e&&e.id&&(console.log("[Orus System] Create contatc successfully",e.id),r(),w.push("/contactos"))}))}))}()},disabled:!C,children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"}),b.id?"Actualizar":"Guardar"]})]})})})}),b.loading&&Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})})]})]})}),b.id?Object(yc.jsxs)("div",{className:"content",id:"details",children:[Object(yc.jsxs)("div",{className:"row",children:[!b.type&&Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)(Bs,{exams:v})}),x.length?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("div",{className:"card",children:Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(yc.jsx)("i",{className:"fas fa-money-bill mr-1"}),"Compras"]}),Object(yc.jsx)(ks,{sales:x})]})})}):null,O.length?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("div",{className:"card",children:Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(yc.jsx)("i",{className:"fas fa-copyright mr-1"}),"Marcas"]}),Object(yc.jsx)(Ls,{brands:O})]})})}):null,p.length?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("div",{className:"card",children:Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(yc.jsx)("i",{className:"fas fa-building mr-1"}),"Laboratorio"]}),Object(yc.jsx)(Ps,{orders:null!==p&&void 0!==p?p:[]})]})})}):null,f.length?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("div",{className:"card",children:Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsxs)("h5",{className:"card-title text-indigo text-bold w-100 mb-2",children:[Object(yc.jsx)("i",{className:"fas fa-shopping-basket mr-1"}),"Pedidos"]}),Object(yc.jsx)(Ps,{orders:null!==f&&void 0!==f?f:[]})]})})}):null]}),Boolean(b.activity.length)&&Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-12",children:Object(yc.jsx)(es,{data:b.activity})})})]}):null,l&&Object(yc.jsx)(Fs,{body:(n=10,Object(yc.jsxs)("div",{children:[Object(yc.jsx)("p",{className:"text-center",children:"\xbfRealmente desea ver el examen?"}),Object(yc.jsx)("div",{className:"text-center",children:Object(yc.jsx)(c.b,{to:"/consultorio/".concat(n),className:"btn btn-primary",children:"Confirmar"})})]})),handleCancel:function(){}})]})}var Gs={page:1,orderby:"created_at",order:"desc",itemsPage:25};function Us(e){var t=Object(xc.useState)({options:Gs,newOrEdit:null}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=e.match.params.id;return Object(xc.useEffect)((function(){c(Object(o.a)(Object(o.a)({},n),{},{newOrEdit:!!s}))}),[s]),Object(yc.jsx)(hs.Provider,{value:Object(o.a)(Object(o.a)({},n),{},{set:c}),children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)(ps,{newOrEdit:n.newOrEdit,handleNewOrEdit:function(){return c(Object(o.a)(Object(o.a)({},n),{},{newOrEdit:!n.newOrEdit}))}}),"boolean"===typeof n.newOrEdit?Object(yc.jsx)("div",{className:"col-sm-12 col-md-8 col-lg-10",children:n.newOrEdit?Object(yc.jsx)(zs,Object(o.a)(Object(o.a)({},e),{},{handleNewOrEdit:function(){return c(Object(o.a)(Object(o.a)({},n),{},{newOrEdit:!n.newOrEdit}))}})):Object(yc.jsx)(fs,{})}):Object(yc.jsx)("p",{children:"Loading component"})]})})}var Vs={deleteConfig:function(e,t,a,n){window.Swal.fire({title:"Almacenamiento",text:"\xbfEsta seguro de ELIMINAR la sucursal ".concat(a,"?"),icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(a){a.dismiss||n(Hn.deleteConfig({id:e,options:t}))}))},saveConfig:function(e,t,a){window.Swal.fire({title:"Almacenamiento",text:e.id?"\xbfEsta seguro de actualizar la sucursal ".concat(e.name,"?"):"\xbfEsta seguro de crear una nueva sucursal?",icon:"question",showCancelButton:!0,confirmButtonText:e.id?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(n){n.dismiss||a(Hn.saveConfig({data:{name:"branches",value:{name:e.name,address:e.address,phone:e.phone}},id:e.id,options:t}))}))},verifyData:function(e){return e.name.length<=3?(window.Swal.fire({title:"Verificacion",text:"Por favor escriba un nombre valido para la sucursal",icon:"warning"}),!1):e.address.length<=3?(window.Swal.fire({title:"Verificacion",text:"Por favor escriba un domicilio valido para la sucursal",icon:"warning"}),!1):10===e.phone.length||(window.Swal.fire({title:"Verificacion",text:"Por favor escriba un numero telefonico a 10 numeros",icon:"warning"}),!1)}};function Rs(){var e=Object(s.d)((function(e){return e.config})).list,t=Object(s.c)(),a=Object(xc.useState)({showForm:!1,id:0,name:"",address:"",phone:""}),n=Object(hc.a)(a,2),c=n[0],r=n[1],i={page:1,name:"branches",itemsPage:10},l=function(){return r(Object(o.a)(Object(o.a)({},c),{},{showForm:!1,id:0,name:"",address:"",phone:""}))},d=function(e){var t=e.name,a=e.value;r(Object(o.a)(Object(o.a)({},c),{},Object(N.a)({},t,a.toString().toLowerCase())))};return Object(xc.useEffect)((function(){t(Hn.getListConfig(i))}),[]),Object(yc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsxs)("h5",{className:"card-title d-block mb-2",children:[Object(yc.jsx)("i",{className:"fas fa-store mr-1"}),"Sucursales"]}),c.showForm?Object(yc.jsxs)("form",{className:"card-text m-2 mt-4",onSubmit:function(e){e.preventDefault(),Vs.verifyData(c)&&(Vs.saveConfig(c,i,t),l())},children:[Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Nombre de la sucursal"}),Object(yc.jsx)("input",{type:"text",placeholder:"Escriba el nombre de la sucursal",className:"form-control",name:"name",defaultValue:c.name,onChange:function(e){var t=e.target;return d(t)}})]}),Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Domicilio"}),Object(yc.jsx)("input",{type:"text",placeholder:"Escriba el domicilio de la sucursal",className:"form-control",name:"address",defaultValue:c.address,onChange:function(e){var t=e.target;return d(t)}})]}),Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Telefono"}),Object(yc.jsx)("input",{type:"phone",placeholder:"Escriba el telefono de la sucursal",className:"form-control",name:"phone",defaultValue:c.phone,onChange:function(e){var t=e.target;return d(t)},maxLength:10})]}),Object(yc.jsxs)("div",{className:"form-group text-right",children:[Object(yc.jsx)("button",{type:"button",className:"btn btn-link",onClick:l,children:"Cancelar"}),Object(yc.jsx)("button",{type:"submit",className:"btn btn-dark ml-2",children:"Guardar"})]})]}):Object(yc.jsx)("div",{className:"table-responsive",children:Object(yc.jsxs)("table",{className:"table table-striped table-sm",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"Nombre"}),Object(yc.jsx)("th",{children:"Domicilio"}),Object(yc.jsx)("td",{children:Object(yc.jsx)("span",{className:"sr-only",children:"Acciones"})})]})}),Object(yc.jsx)("tbody",{children:e.map((function(e){var t;return"bank"!==e.name?Object(yc.jsxs)("tr",{children:[console.log(e),Object(yc.jsx)("td",{className:"text-capitalize",children:e.data.name}),Object(yc.jsx)("td",{className:"text-truncate text-capitalize",children:null!==(t=e.data.address)&&void 0!==t?t:"--"}),Object(yc.jsx)("td",{className:"text-right",children:Object(yc.jsx)("button",{type:"button",className:"btn btn-sm btn-primary ml-1",onClick:function(){return function(e){var t,a,n,c=e.id,s=(e.values,e.data);r(Object(o.a)(Object(o.a)({},s),{},{showForm:!0,id:c,name:null===(t=s.name)||void 0===t?void 0:t.toString().toLowerCase(),address:null===(a=s.address)||void 0===a?void 0:a.toString().toLowerCase(),phone:null===(n=s.phone)||void 0===n?void 0:n.toString().toLowerCase()}))}(e)},children:Object(yc.jsx)("i",{className:"fas fa-edit"})})})]},e.id):null}))})]})})]}),Object(yc.jsx)("div",{className:"card-footer text-right",children:Object(yc.jsx)("button",{className:"btn btn-primary btn-sm",disabled:c.showForm,onClick:function(){return r(Object(o.a)(Object(o.a)({},c),{},{showForm:!0}))},children:Object(yc.jsx)("i",{className:"fas fa-plus"})})})]})}function Ys(){var e=Object(s.c)(),t=Object(xc.useContext)(wc).auth,a=JSON.parse(localStorage.getItem("OrusSystem")),n=Object(xc.useState)({server:a.host?a.host:"",company:a.company?a.company:"",email:t.email?t.email:"",name:t.name?t.name:"",username:t.username?t.username:"",password:"",category_list:[]}),c=Object(hc.a)(n,2),r=c[0],i=c[1];console.log(r),Object(xc.useEffect)((function(){e(v.changeNamePage("configuraciones"))}),[]);var o=function(e){var t=e.target,a=t.name,n=t.value;i(Object(N.a)({},a,n.toLowerCase()))};return Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-12",children:Object(yc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("h5",{className:"card-title",children:"Generales"}),Object(yc.jsx)("p",{children:"\xa0"}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-server"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Servidor",name:"server",value:r.server,onChange:o})]}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-building"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Nombre de la empresa",name:"company",value:r.company,onChange:o})]})]}),Object(yc.jsx)("div",{className:"card-footer text-right",children:Object(yc.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=JSON.parse(localStorage.getItem("OrusSystem"));e.company=r.company,localStorage.setItem("OrusSystem",JSON.stringify(e))},children:"Guardar"})})]})}),Object(yc.jsx)("div",{className:"col-lg-6 col-sm-12",children:Object(yc.jsxs)("div",{className:"card card-primary card-outline",children:[Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("h5",{className:"card-title",children:"Usuario"}),Object(yc.jsx)("p",{children:"\xa0"}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-at"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",name:"email",value:r.email,onChange:o})]}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-user-tag"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control text-capitalize",placeholder:"Nombre completo",name:"name",value:r.name,onChange:o})]}),Object(yc.jsx)("hr",{}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-user-check"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Usuario",name:"username",value:r.username,onChange:o})]}),Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:Object(yc.jsx)("i",{className:"fas fa-lock"})})}),Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Contrase\xf1a",name:"password",value:r.password,onChange:o})]})]}),Object(yc.jsx)("div",{className:"card-footer text-right",children:Object(yc.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){},children:"Guardar"})})]})}),Object(yc.jsx)("div",{className:"col-lg-6 col-md-12 col-sm-12",children:Object(yc.jsx)(Rs,{})})]})}var qs=Object(xc.createContext)(null),$s=function(){return Object(xc.useContext)(qs)};function Js(e){var t,a,n,c,s,r,i,l=e.newOrEdit,d=e.handleNewOrEdit,u=$s(),j=null===(t=Object(xc.useContext)(Ec).data)||void 0===t?void 0:t.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"branches"===e.name})),b=null!==(a=u.options)&&void 0!==a&&a.date?_c()(u.options.date):_c()();return Object(yc.jsxs)("div",{className:"col-sm-12 col-md-2 d-print-none",children:[Object(yc.jsxs)("button",{className:"btn bg-info btn-block mb-3",type:"button",disabled:l,onClick:d,children:[Object(yc.jsx)("i",{className:"fas fa-plus mr-1"}),"Nuevo examen"]}),Object(yc.jsxs)(Os,{title:"Filtros",children:[Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yc.jsxs)("select",{className:"form-control",id:"orderby",defaultValue:null===(n=u.options)||void 0===n?void 0:n.orderby,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{orderby:t.value})}))},children:[Object(yc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"date",children:"Fecha"}),Object(yc.jsx)(gs.a,{className:"form-control",locale:"es",selected:new Date(b.format("YYYY/MM/DD")),dateFormat:"dd/MM/yyyy",maxDate:new Date,placeholderText:"Seleccione una fecha",onSelect:function(e){e&&(e=e.toLocaleDateString("es-MX"),(e=_c()(e,"DD/MM/YYYY")).isValid()&&u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{date:e.format("YYYY/MM/DD")})})))},onChange:function(e){e&&(e=e.toLocaleDateString("es-MX"),(e=_c()(e,"DD/MM/YYYY")).isValid()&&u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{date:e.format("YYYY/MM/DD")})})))}}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-info btn-block text-bold mt-1",onClick:function(e){u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{date:""})}))},children:[Object(yc.jsx)("i",{className:"fas fa-trash mr-1"}),"Borrar fecha"]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yc.jsxs)("select",{className:"form-control",id:"order",value:null===(c=u.options)||void 0===c?void 0:c.order,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{order:t.value})}))},children:[Object(yc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de examenes"}),Object(yc.jsxs)("select",{className:"form-control",id:"itemsPage",value:null===(s=u.options)||void 0===s?void 0:s.itemsPage,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{itemsPage:t.value})}))},children:[Object(yc.jsx)("option",{value:"25",children:"ver 25"}),Object(yc.jsx)("option",{value:"50",children:"ver 50"}),Object(yc.jsx)("option",{value:"75",children:"ver 75"}),Object(yc.jsx)("option",{value:"100",children:"ver 100"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"status",children:"Estado"}),Object(yc.jsxs)("select",{className:"form-control",id:"status",value:null===(r=u.options)||void 0===r?void 0:r.status,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{status:t.value})}))},children:[Object(yc.jsx)("option",{value:"",children:"-- Todos --"}),Object(yc.jsx)("option",{value:"1",children:"Solo terminados"}),Object(yc.jsx)("option",{value:"0",children:"En proceso"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"status",children:"Sucursales"}),Object(yc.jsxs)("select",{className:"form-control text-capitalize",id:"branch",value:null===(i=u.options)||void 0===i?void 0:i.branch,onChange:function(e){var t=e.target;u.set(Object(o.a)(Object(o.a)({},u),{},{options:Object(o.a)(Object(o.a)({},u.options),{},{branch:t.value})}))},children:[Object(yc.jsx)("option",{value:"all",children:"-- Todas --"}),null===j||void 0===j?void 0:j.map((function(e){var t;return Object(yc.jsx)("option",{value:e.id,children:null===(t=e.data)||void 0===t?void 0:t.name},e.id)}))]})]})]})]})}function Hs(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return a=Nc("exams",null,t),e.next=5,gc(a,"GET").then((function(e){return e})).catch((function(e){return console.error("[Orus System] Catch when get contacts list in hook:",e.message),null}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nc("exams",t),e.next=5,gc(a,"GET").then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when get contact in hook:",e.message),{}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return a=Nc("exams",t),e.next=5,gc(a,"DELETE").then((function(){return!0})).catch((function(e){return console.error("[Orus System] Catch when delete contact in hook:",e.message),!1}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a=t.id,delete t.id,!a){e.next=11;break}return n=Nc("exams",a),e.next=8,gc(n,"PUT",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when update exam in hook"),e}));case 8:case 14:return e.abrupt("return",e.sent);case 11:return c=Nc("exams"),e.next=14,gc(c,"POST",t).then((function(e){return e.data})).catch((function(e){return console.error("[Orus System] Catch when create exam in hook"),e}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getExams:e,getExam:t,deleteExam:a,saveExam:n}}function Zs(){var e,t,a,n,c=$s(),s=Hs(),r=Object(pc.f)(),i=Object(xc.useState)({list:[],meta:{},loading:!1,examSelected:{}}),l=Object(hc.a)(i,2),d=l[0],u=l[1],j=function(){u(Object(o.a)(Object(o.a)({},d),{},{loading:!0})),s.getExams(c.options).then((function(e){e.data&&u(Object(o.a)(Object(o.a)({},d),{},{list:e.data,meta:e.meta,loading:!1,examSelected:{}}))}))},b=function(e){var t,a;if(null!==e&&void 0!==e&&e.id)s.saveExam({id:e.id,status:!e.status,contact_id:null===(a=e.customer)||void 0===a?void 0:a.id}).then((function(e){if(e.id)j();else if(e.hasOwnProperty("errors")){var t=Object.values(e.errors);console.log("[Orus System] Message of server:",e.errors),window.Swal.fire({title:"Consultorio",text:t[0],icon:"error",showConfirmButton:!1,timer:3e3})}}));else if(null!==(t=d.examSelected)&&void 0!==t&&t.id){var n;s.saveExam({id:d.examSelected.id,status:!d.examSelected.status,contact_id:null===(n=d.examSelected.customer)||void 0===n?void 0:n.id}).then((function(e){if(e.id)j();else if(e.hasOwnProperty("errors")){var t=Object.values(e.errors);console.log("[Orus System] Message of server:",e.errors),window.Swal.fire({title:"Consultorio",text:t[0],icon:"error",showConfirmButton:!1,timer:3e3})}}))}else console.error("[Orus System] When get id of exam:",e,d.examSelected),window.Swal.fire({title:"Consultorio",text:"Lo sentimos no existe un examen seleccionado",icon:"warning",showConfirmButton:!1,timer:3e3})};return Object(xc.useEffect)((function(){j()}),[c.options]),Object(yc.jsx)(Hc,{title:"Lista de examenes",icon:"notes-medical",color:"info",loading:d.loading,meta:d.meta,itemSelected:null===(e=d.examSelected)||void 0===e?void 0:e.id,handlePagination:function(e){e&&c.set(Object(o.a)(Object(o.a)({},c),{},{options:Object(o.a)(Object(o.a)({},c.options),{},{page:e})}))},handleSearch:function(e){e?c.set(Object(o.a)(Object(o.a)({},c),{},{options:Object(o.a)(Object(o.a)({},c.options),{},{search:e,page:1})})):c.options.search&&c.set(Object(o.a)(Object(o.a)({},c),{},{options:Object(o.a)(Object(o.a)({},c.options),{},{search:"",page:1})}))},handleDeleteItem:function(){var e;null!==(e=d.examSelected)&&void 0!==e&&e.id?window.Swal.fire({title:"Consultorio",text:"\xbfDesea eliminar el examen?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss?u(Object(o.a)(Object(o.a)({},d),{},{examSelected:{}})):s.deleteExam(d.examSelected.id).then((function(){j()}))})):window.Swal.fire({title:"Error",text:"Lo sentimos no existe un examen seleccionado",icon:"error"})},handleEditItem:function(){var e;null!==(e=d.examSelected)&&void 0!==e&&e.id?r.push("consultorio/".concat(d.examSelected.id)):window.Swal.fire({title:"Error",text:"Lo sentimos no existe un examen seleccionado",icon:"error"})},handleSync:j,handleStatus:b,children:Object(yc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{}),Object(yc.jsx)("th",{children:"Nombre"}),Object(yc.jsx)("th",{children:"Estado"}),Object(yc.jsx)("th",{children:"ESF"}),Object(yc.jsx)("th",{children:"CIL"}),Object(yc.jsx)("th",{children:"EJE"}),Object(yc.jsx)("th",{children:"ADC"}),Object(yc.jsx)("th",{children:"MED"}),Object(yc.jsx)("th",{children:"DP"}),Object(yc.jsx)("th",{children:"ALT"}),Object(yc.jsx)("th",{children:"created_at"===(null===(t=c.options)||void 0===t?void 0:t.orderby)?"Registrado":"Actualizado"})]})}),Object(yc.jsx)("tbody",{children:null!==(a=d.list)&&void 0!==a&&a.length?Object(yc.jsx)(yc.Fragment,{children:null===(n=d.list)||void 0===n?void 0:n.map((function(e){var t,a,n,s,i;return Object(yc.jsxs)("tr",{children:[Object(yc.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(yc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",id:"exam_"+e.id,checked:(null===(t=d.examSelected)||void 0===t?void 0:t.id)===e.id,disabled:e.estado||(null===(a=e.orders)||void 0===a?void 0:a.length),onChange:function(t){var a=t.target;u(Object(o.a)(Object(o.a)({},d),{},{examSelected:a.checked?e:""}))}}),Object(yc.jsx)("label",{htmlFor:"exam_"+e.id,className:"sr-only"})]}),Object(yc.jsx)("td",{className:"mailbox-name text-capitalize text-truncate",children:Object(yc.jsx)("a",{href:"#edit",onClick:function(t){t.preventDefault(),r.push("consultorio/".concat(e.id))},children:Object(yc.jsxs)("span",{className:e.status||null!==(n=e.orders)&&void 0!==n&&n.length?"text-muted":"text-dark text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-user text-sm mr-2"}),null===(s=e.customer)||void 0===s?void 0:s.name.toLowerCase()]})})}),Object(yc.jsx)("td",{className:"text-center",style:{cursor:"pointer"},onClick:function(){return b(e)},children:e.status?Object(yc.jsx)("i",{className:"fas fa-clipboard-check text-muted",title:"Terminado"}):Object(yc.jsx)("i",{className:"fas fa-clipboard text-info",title:"En proceso"})}),Object(yc.jsxs)("td",{children:[e.esferaod,"/",e.esferaoi]}),Object(yc.jsxs)("td",{children:[e.cilindrod,"/",e.cilindroi]}),Object(yc.jsxs)("td",{children:[e.ejeod,"/",e.ejeoi]}),Object(yc.jsxs)("td",{children:[e.adiciond,"/",e.adicioni]}),Object(yc.jsxs)("td",{children:[e.adicion_media_od,"/",e.adicion_media_oi]}),Object(yc.jsxs)("td",{children:[e.dpod,"/",e.dpoi]}),Object(yc.jsxs)("td",{children:[e.alturaod,"/",e.alturaoi]}),Object(yc.jsx)("td",{children:_c()("created_at"===(null===(i=c.options)||void 0===i?void 0:i.orderby)?e.created_at:e.updated_at).fromNow()})]},e.id)}))}):Object(yc.jsx)("tr",{children:Object(yc.jsx)("th",{className:"text-center text-muted",colSpan:"12",children:"No hay examenes registrados"})})})]})})}function Ks(e){var t,a,n,c,s,r,i=function(t){var a=t.target,n=a.name,c=a.type,s=a.checked,r=a.value,i="checkbox"===c?s:r.toLowerCase();e.handleGetData(n,i)};return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"pc",type:"checkbox",className:"custom-control-input",id:"pc",checked:e.pc,onChange:i}),Object(yc.jsxs)("label",{className:"custom-control-label",htmlFor:"pc",children:[Object(yc.jsx)("i",{className:"fas fa-desktop"})," PC"]})]}),Object(yc.jsx)("input",{type:"text",name:"pc_time",className:"form-control input-xs",defaultValue:null!==(t=e.pc_time)&&void 0!==t?t:"",onChange:i,readOnly:e.pc?"":"readonly"})]}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"tablet",type:"checkbox",className:"custom-control-input",id:"tablet",checked:e.tablet,onChange:i}),Object(yc.jsxs)("label",{className:"custom-control-label",htmlFor:"tablet",children:[Object(yc.jsx)("i",{className:"fas fa-tablet-alt"})," Tablet"]})]}),Object(yc.jsx)("input",{type:"text",name:"tablet_time",className:"form-control input-xs",defaultValue:null!==(a=e.tablet_time)&&void 0!==a?a:"",onChange:i,readOnly:e.tablet?"":"readonly"})]}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"movil",type:"checkbox",className:"custom-control-input",id:"movil",checked:e.movil,onChange:i}),Object(yc.jsxs)("label",{className:"custom-control-label",htmlFor:"movil",children:[Object(yc.jsx)("i",{className:"fas fa-mobile-alt"})," Telefono"]})]}),Object(yc.jsx)("input",{type:"text",name:"movil_time",className:"form-control input-xs",defaultValue:null!==(n=e.movil_time)&&void 0!==n?n:"",onChange:i,readOnly:e.movil?"":"readonly"})]}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"lap",type:"checkbox",className:"custom-control-input",id:"lap",checked:e.lap,onChange:i}),Object(yc.jsxs)("label",{className:"custom-control-label",htmlFor:"lap",children:[Object(yc.jsx)("i",{className:"fas fa-laptop"})," Laptop"]})]}),Object(yc.jsx)("input",{type:"text",name:"lap_time",className:"form-control input-xs",defaultValue:null!==(c=e.lap_time)&&void 0!==c?c:"",onChange:i,readOnly:e.lap?"":"readonly"})]})]}),Object(yc.jsxs)("div",{className:"row mt-1",children:[Object(yc.jsx)("div",{className:"col-md-6",children:Object(yc.jsxs)("ul",{className:"list-group",children:[Object(yc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"frontal",type:"checkbox",className:"custom-control-input",id:"frontal",checked:e.frontal,onChange:i}),Object(yc.jsx)("label",{className:"custom-control-label",htmlFor:"frontal",children:"Frontal"})]})}),Object(yc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"occipital",type:"checkbox",className:"custom-control-input",id:"occipital",checked:e.occipital,onChange:i}),Object(yc.jsx)("label",{className:"custom-control-label",htmlFor:"occipital",children:"Occipital"})]})}),Object(yc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"generality",type:"checkbox",className:"custom-control-input",id:"generality",checked:e.generality,onChange:i}),Object(yc.jsx)("label",{className:"custom-control-label",htmlFor:"generality",children:"General"})]})}),Object(yc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"cefalea",type:"checkbox",className:"custom-control-input",id:"cefalea",checked:e.cefalea,onChange:i}),Object(yc.jsx)("label",{className:"custom-control-label",htmlFor:"cefalea",children:"Cefalea"})]})})]})}),Object(yc.jsx)("div",{className:"col-md-6",children:Object(yc.jsxs)("ul",{className:"list-group",children:[Object(yc.jsxs)("li",{className:"list-group-item",children:["Temporal",Object(yc.jsx)("br",{}),Object(yc.jsxs)("div",{className:"row mt-2",children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"temporaod",type:"checkbox",className:"custom-control-input",id:"temporaod",checked:e.temporaod,onChange:i}),Object(yc.jsxs)("label",{className:"custom-control-label",htmlFor:"temporaod",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," Derecho"]})]})}),Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"temporaoi",type:"checkbox",className:"custom-control-input",id:"temporaoi",checked:e.temporaoi,onChange:i}),Object(yc.jsxs)("label",{className:"custom-control-label",htmlFor:"temporaoi",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," Izquierdo"]})]})})]})]}),Object(yc.jsxs)("li",{className:"list-group-item",children:["Frecuencia",Object(yc.jsx)("span",{className:"badge badge-pill",children:Object(yc.jsx)("input",{type:"text",name:"c_frecuencia",maxLength:"60",className:"form-control input-xs",defaultValue:null!==(s=e.c_frecuencia)&&void 0!==s?s:"",onChange:i})})]}),Object(yc.jsxs)("li",{className:"list-group-item",children:[Object(yc.jsx)("label",{htmlFor:"c_intensidad",children:"Intensidad"}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-11",children:Object(yc.jsx)("input",{type:"range",name:"c_intensidad",className:"custom-range custom-range-info",id:"c_intensidad",min:"0",max:"4",defaultValue:null!==(r=e.c_intensidad)&&void 0!==r?r:"",onChange:i})}),Object(yc.jsx)("div",{className:"col-1",children:Object(yc.jsx)("h6",{children:e.c_intensidad})})]})]})]})})]})]})}Object(vs.registerLocale)("es",ws.a);var Qs=a(18),Xs=a(19),Ws=a(20),er=a(21),tr=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(){var e;Object(Qs.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,n="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,n)},e}return Object(Xs.a)(a,[{key:"render",value:function(){var e,t,a,n;return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col-12",children:[Object(yc.jsx)("label",{children:"Interrogatorio inicial"}),Object(yc.jsx)("textarea",{name:"interrogatorio",className:"form-control",defaultValue:null!==(e=this.props.interrogatorio)&&void 0!==e?e:"",onChange:this.catchInputs})]})}),Object(yc.jsx)("div",{className:"row mt-2",children:Object(yc.jsxs)("div",{className:"col-12",children:[Object(yc.jsx)("label",{children:"Cirugias oculares"}),Object(yc.jsx)("textarea",{name:"coa",className:"form-control",defaultValue:null!==(t=this.props.coa)&&void 0!==t?t:"",onChange:this.catchInputs})]})}),Object(yc.jsx)("div",{className:"row mt-2",children:Object(yc.jsxs)("div",{className:"col-12",children:[Object(yc.jsx)("label",{children:"Antecedentes oculares patologicas personales"}),Object(yc.jsx)("textarea",{name:"aopp",className:"form-control",rows:"2",defaultValue:null!==(a=this.props.aopp)&&void 0!==a?a:"",onChange:this.catchInputs})]})}),Object(yc.jsx)("div",{className:"row mt-2",children:Object(yc.jsxs)("div",{className:"col-12",children:[Object(yc.jsx)("label",{children:"Antecedentes oculares patologicas familiares"}),Object(yc.jsx)("textarea",{name:"aopf",className:"form-control",rows:"2",defaultValue:null!==(n=this.props.aopf)&&void 0!==n?n:"",onChange:this.catchInputs})]})})]})}}]),a}(xc.Component),ar=function(e){var t,a,n,c,s=function(t){var a=t.target.name,n="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.onChangeInput(a,n)};return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-6",children:"Keratometria"}),Object(yc.jsx)("div",{className:"col-6",children:"Retinoscopia"})]}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsx)("i",{className:"fas fa-eye"})," ",Object(yc.jsx)("label",{children:"Derecho"}),Object(yc.jsx)("input",{type:"text",name:"keratometriaod",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(t=e.keratometriaod)&&void 0!==t?t:"",onChange:s})]}),Object(yc.jsxs)("div",{className:"col-3",children:[Object(yc.jsx)("i",{className:"fas fa-eye"})," ",Object(yc.jsx)("label",{children:"Izquierdo"}),Object(yc.jsx)("input",{type:"text",name:"keratometriaoi",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(a=e.keratometriaoi)&&void 0!==a?a:"",onChange:s})]}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Derecho"}),Object(yc.jsx)("input",{type:"text",name:"rsod",maxLength:"16",className:"form-control",defaultValue:null!==(n=e.rsod)&&void 0!==n?n:"",onChange:s})]}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Izquierdo"}),Object(yc.jsx)("input",{type:"text",name:"rsoi",maxLength:"16",className:"form-control",defaultValue:null!==(c=e.rsoi)&&void 0!==c?c:"",onChange:s})]})]})]})},nr=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(){var e;Object(Qs.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,n="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,n)},e}return Object(Xs.a)(a,[{key:"render",value:function(){var e,t,a,n,c,s;return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-md-8",children:Object(yc.jsx)("label",{children:"Diab\xe9tico"})}),Object(yc.jsx)("div",{className:"col-md-4",children:Object(yc.jsx)("label",{children:"Fotocoagulaci\xf3n laser"})})]}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-3",children:"Fecha"}),Object(yc.jsx)("div",{className:"col-2",children:"Rango de glucosa"}),Object(yc.jsx)("div",{className:"col-3",children:"Ultimo examen"}),Object(yc.jsx)("div",{className:"col-2",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"d_fclod",type:"checkbox",className:"custom-control-input",id:"d_fclod",checked:this.props.d_fclod,onChange:this.catchInputs}),Object(yc.jsxs)("label",{className:"custom-control-label",htmlFor:"d_fclod",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," Derecho"]})]})}),Object(yc.jsx)("div",{className:"col-2",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"d_fcloi",type:"checkbox",className:"custom-control-input",id:"d_fcloi",checked:this.props.d_fcloi,onChange:this.catchInputs}),Object(yc.jsxs)("label",{className:"custom-control-label",htmlFor:"d_fcloi",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," Izquierdo"]})]})})]}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-md-3",children:Object(yc.jsx)("input",{type:"date",name:"d_time",className:"form-control",defaultValue:null!==(e=this.props.d_time)&&void 0!==e?e:"",onChange:this.catchInputs})}),Object(yc.jsx)("div",{className:"col-md-2",children:Object(yc.jsx)("input",{type:"text",name:"d_media",className:"form-control",defaultValue:null!==(t=this.props.d_media)&&void 0!==t?t:"",onChange:this.catchInputs})}),Object(yc.jsx)("div",{className:"col-md-3",children:Object(yc.jsx)("input",{type:"date",name:"d_test",className:"form-control",defaultValue:null!==(a=this.props.d_test)&&void 0!==a?a:"",onChange:this.catchInputs})}),Object(yc.jsx)("div",{className:"col-md-2",children:Object(yc.jsx)("input",{type:"text",name:"d_fclod_time",className:"form-control",defaultValue:null!==(n=this.props.d_fclod_time)&&void 0!==n?n:"",onChange:this.catchInputs,readOnly:this.props.d_fclod?"":"readonly"})}),Object(yc.jsx)("div",{className:"col-md-2",children:Object(yc.jsx)("input",{type:"text",name:"d_fcloi_time",className:"form-control",defaultValue:null!==(c=this.props.d_fcloi_time)&&void 0!==c?c:"",onChange:this.catchInputs,readOnly:this.props.d_fcloi?"":"readonly"})})]}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col-12",children:[Object(yc.jsx)("label",{children:"Oftalmoscopia"}),Object(yc.jsx)("textarea",{name:"oftalmoscopia",className:"form-control",defaultValue:null!==(s=this.props.oftalmoscopia)&&void 0!==s?s:"",onChange:this.catchInputs})]})})]})}}]),a}(xc.Component),cr=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(){var e;Object(Qs.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,n="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,n)},e}return Object(Xs.a)(a,[{key:"render",value:function(){var e,t,a,n,c,s,r,i,o;return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-md-6",children:"Capacidad visual"})}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Derecho"}),Object(yc.jsx)("input",{type:"text",name:"cvod",maxLength:"12",className:"form-control",defaultValue:null!==(e=this.props.cvod)&&void 0!==e?e:"",onChange:this.catchInputs})]}),Object(yc.jsxs)("div",{className:"col-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Izquierdo"}),Object(yc.jsx)("input",{type:"text",name:"cvoi",maxLength:"12",className:"form-control",defaultValue:null!==(t=this.props.cvoi)&&void 0!==t?t:"",onChange:this.catchInputs})]})]}),Object(yc.jsxs)("div",{className:"row mt-2",children:[Object(yc.jsx)("div",{className:"col-md-6",children:"Agudeza visual (Sin lentes)"}),Object(yc.jsx)("div",{className:"col-md-6",children:"Agudeza visual (con la graduaci\xf3n anterior)"})]}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Derecho"}),Object(yc.jsx)("input",{type:"text",name:"avslod",maxLength:"12",className:"form-control",defaultValue:null!==(a=this.props.avslod)&&void 0!==a?a:"",onChange:this.catchInputs})]}),Object(yc.jsxs)("div",{className:"col-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Izquierdo"}),Object(yc.jsx)("input",{type:"text",name:"avsloi",maxLength:"12",className:"form-control",defaultValue:null!==(n=this.props.avsloi)&&void 0!==n?n:"",onChange:this.catchInputs})]}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Derecho"}),Object(yc.jsx)("input",{type:"text",name:"avcgaod",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(c=this.props.avcgaod)&&void 0!==c?c:"",onChange:this.catchInputs})]}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Izquierdo"}),Object(yc.jsx)("input",{type:"text",name:"avcgaoi",maxLength:"12",className:"form-control input-xs",defaultValue:null!==(s=this.props.avcgaoi)&&void 0!==s?s:"",onChange:this.catchInputs})]})]}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-md-6",children:"Agudeza visual final"})}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Derecho"}),Object(yc.jsx)("br",{}),Object(yc.jsx)("input",{type:"text",name:"avfod",maxLength:"12",className:"form-control",defaultValue:null!==(r=this.props.avfod)&&void 0!==r?r:"",onChange:this.catchInputs})]}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Izquierdo"}),Object(yc.jsx)("br",{}),Object(yc.jsx)("input",{type:"text",name:"avfoi",maxLength:"12",className:"form-control",defaultValue:null!==(i=this.props.avfoi)&&void 0!==i?i:"",onChange:this.catchInputs})]}),Object(yc.jsxs)("div",{className:"col-md-4",children:[Object(yc.jsx)("i",{className:"fa fa-eye"}),Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Ambos"}),Object(yc.jsx)("br",{}),Object(yc.jsx)("input",{type:"text",name:"avf2o",maxLength:"25",className:"form-control",defaultValue:null!==(o=this.props.avf2o)&&void 0!==o?o:"",onChange:this.catchInputs})]})]})]})}}]),a}(xc.Component),sr=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(){var e;Object(Qs.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,n="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,n)},e}return Object(Xs.a)(a,[{key:"render",value:function(){var e,t,a,n;return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-md-6"}),Object(yc.jsx)("div",{className:"col-md-6",children:"Tensi\xf3n ocular"})]}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-md-3",children:["Diagnostico",Object(yc.jsxs)("select",{name:"diagnostico",className:"form-control",defaultValue:null!==(e=this.props.diagnostico)&&void 0!==e?e:"",onChange:this.catchInputs,children:[Object(yc.jsx)("option",{value:"Emetrope",children:"Em\xe9trope"}),Object(yc.jsx)("option",{value:"hipermetropia",children:"Hipermetrop\xeda"}),Object(yc.jsx)("option",{value:"hipermetropia-astigmatismo",children:"Hipermetrop\xeda y astigmatismo"}),Object(yc.jsx)("option",{value:"hipermetropia-miopia",children:"Hipermetrop\xeda y miop\xeda"}),Object(yc.jsx)("option",{value:"astigmatismo-regla",children:"Astigmatismo con la regla"}),Object(yc.jsx)("option",{value:"astigmatismo-contra-regla",children:"Astigmatismo contra la regla"}),Object(yc.jsx)("option",{value:"astigmatismo-oblicuo",children:"Astigmatismo oblicuo"}),Object(yc.jsx)("option",{value:"astigmatismo-miopia",children:"Astigmatismo/m\xedopico"}),Object(yc.jsx)("option",{value:"miopia",children:"Miop\xeda"})]})]}),Object(yc.jsx)("div",{className:"col-md-3",children:Object(yc.jsxs)("div",{className:"custom-control custom-switch",children:[Object(yc.jsx)("input",{name:"presbicie",type:"checkbox",className:"custom-control-input",id:"presbicie",checked:this.props.presbicie,onChange:this.catchInputs}),Object(yc.jsx)("label",{className:"custom-control-label",htmlFor:"presbicie",children:"Presbicie"})]})}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Derecho"}),Object(yc.jsx)("input",{type:"number",name:"piod",min:"0",max:"40",step:"1",className:"form-control",defaultValue:null!==(t=this.props.piod)&&void 0!==t?t:"",onChange:this.catchInputs})]}),Object(yc.jsxs)("div",{className:"col-md-3",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Izquierdo"}),Object(yc.jsx)("input",{type:"number",name:"pioi",min:"0",max:"40",step:"1",className:"form-control",defaultValue:null!==(a=this.props.pioi)&&void 0!==a?a:"",onChange:this.catchInputs})]})]}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col-12",children:[Object(yc.jsx)("label",{children:"Tratamiento oftalmico"}),Object(yc.jsx)("textarea",{name:"txoftalmico",className:"form-control",defaultValue:null!==(n=this.props.txoftalmico)&&void 0!==n?n:"",onChange:this.catchInputs})]})})]})}}]),a}(xc.Component),rr=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(){var e;Object(Qs.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target,n=a.name,c=a.type,s=a.value,r=a.checked,i=e.props.onChangeInput,o=s;"checkbox"===c&&(o=r),"text"===c&&(o=s.toLowerCase()),"number"===c&&("ejeod"===n||"ejeoi"===n?o=parseInt(s):(o=(o=parseFloat(s)).toFixed(2),o=parseFloat(o))),i&&i(n,o)},e}return Object(Xs.a)(a,[{key:"render",value:function(){var e=this.props,t=e.readOnly,a=void 0!==t&&t,n=e.cilindrod,c=e.cilindroi,s=e.esferaod,r=e.esferaoi,i=e.ejeod,o=e.ejeoi,l=e.adiciond,d=e.adicioni,u=e.adicion_media_od,j=e.adicion_media_oi,b=e.dpod,m=e.dpoi,h=e.alturaod,x=e.alturaoi,O=e.lcmarca,p=e.lcgod,f=e.lcgoi,v=e.showContactGlasses,g=void 0===v||v;return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("table",{className:"table",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"#"}),Object(yc.jsx)("th",{children:"Esfera"}),Object(yc.jsx)("th",{children:"Cilindro"}),Object(yc.jsx)("th",{children:"Eje"}),Object(yc.jsx)("th",{children:"Adici\xf3n"}),Object(yc.jsx)("th",{children:"Adici\xf3n media"}),Object(yc.jsx)("th",{children:"D/P"}),Object(yc.jsx)("th",{children:"Altura"})]})}),Object(yc.jsxs)("tbody",{children:[Object(yc.jsxs)("tr",{children:[Object(yc.jsxs)("td",{children:[Object(yc.jsx)("i",{className:"fa fa-eye mr-1",title:"Ojo derecho"}),Object(yc.jsx)("span",{className:"text-sm d-block",children:"Derecho"})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"esferaod",min:"-20",max:"20",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==s&&void 0!==s?s:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==s&&void 0!==s?s:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"cilindrod",min:"-20",max:"0",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==n&&void 0!==n?n:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==n&&void 0!==n?n:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"ejeod",min:"0",max:"180",step:"1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,placeholder:"\xb0",defaultValue:i?parseInt(i):"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==i&&void 0!==i?i:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"adiciond",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==l&&void 0!==l?l:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==l&&void 0!==l?l:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"adicion_media_od",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==u&&void 0!==u?u:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==u&&void 0!==u?u:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"dpod",min:"40",max:"80",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==b&&void 0!==b?b:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==b&&void 0!==b?b:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"alturaod",min:"0",max:"35",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==h&&void 0!==h?h:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==h&&void 0!==h?h:""})]})]}),Object(yc.jsxs)("tr",{children:[Object(yc.jsxs)("td",{children:[Object(yc.jsx)("i",{className:"fa fa-eye ml-1",title:"Ojo izquierdo"}),Object(yc.jsx)("span",{className:"text-sm d-block",children:"Izquierdo"})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"esferaoi",min:"-20",max:"20",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==r&&void 0!==r?r:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==r&&void 0!==r?r:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"cilindroi",min:"-20",max:"0",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==c&&void 0!==c?c:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==c&&void 0!==c?c:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"ejeoi",min:"0",max:"180",step:"1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,placeholder:"\xb0",defaultValue:o?parseInt(o):"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==o&&void 0!==o?o:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"adicioni",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==d&&void 0!==d?d:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==d&&void 0!==d?d:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"adicion_media_oi",min:"0",max:"3",step:".25",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==j&&void 0!==j?j:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==j&&void 0!==j?j:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"dpoi",min:"40",max:"80",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==m&&void 0!==m?m:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==m&&void 0!==m?m:""})]}),Object(yc.jsxs)("td",{className:"text-right",children:[Object(yc.jsx)("input",{type:"number",name:"alturaoi",min:"0",max:"35",step:".1",className:a?"form-control d-print-none disabled":"form-control d-print-none",disabled:!!a,defaultValue:null!==x&&void 0!==x?x:"",onChange:this.catchInputs}),Object(yc.jsx)("h5",{className:"d-none d-print-block",children:null!==x&&void 0!==x?x:""})]})]})]})]}),g&&Object(yc.jsx)("ul",{className:"list-group d-print-none mt-4",children:Object(yc.jsxs)("li",{className:"list-group-item",children:[Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col-md-12",children:["Lente de contacto",Object(yc.jsx)("input",{type:"text",name:"lcmarca",maxLength:"70",className:a?"form-control disabled":"form-control",disabled:!!a,defaultValue:null!==O&&void 0!==O?O:"",onChange:this.catchInputs})]})}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Derecho"}),Object(yc.jsx)("input",{type:"text",name:"lcgod",maxLength:"30",className:a?"form-control disabled":"form-control",disabled:!!a,defaultValue:p||"",onChange:this.catchInputs})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("i",{className:"fa fa-eye"})," ",Object(yc.jsx)("label",{children:"Izquierdo"}),Object(yc.jsx)("input",{type:"text",name:"lcgoi",maxLength:"30",className:a?"form-control disabled":"form-control",disabled:!!a,defaultValue:f||"",onChange:this.catchInputs})]})]})]})})]})}}]),a}(xc.Component),ir=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(){var e;Object(Qs.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).catchInputs=function(t){var a=t.target.name,n="checkbox"===t.target.type?t.target.checked:t.target.value.toLowerCase();e.props.onChangeInput(a,n)},e}return Object(Xs.a)(a,[{key:"render",value:function(){var e;return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("label",{htmlFor:"observaciones",children:"Observaciones"}),Object(yc.jsx)("textarea",{name:"observaciones",id:"observaciones",className:"form-control",defaultValue:null!==(e=this.props.observaciones)&&void 0!==e?e:"",onChange:this.catchInputs})]})}}]),a}(xc.Component),or=function(e){var t="";return e.parent?e.parent.parent?(t=e.parent.parent.meta.code,t+=e.parent.meta.code,t+=e.meta.code):(t=e.parent.meta.code,t+=e.meta.code):t=e.meta.code,t},lr={handleTypeInput:function(e){return"pc"===e||"tablet"===e||"movil"===e||"lap"===e||"pc_time"===e||"tablet_time"===e||"movil_time"===e||"lap_time"===e||"frontal"===e||"occipital"===e||"generality"===e||"cefalea"===e||"temporaod"===e||"temporaoi"===e||"c_frecuencia"===e||"c_intensidad"===e?"generales":"interrogatorio"===e||"coa"===e||"aopp"===e||"aopf"===e?"interrogatorios":"keratometriaod"===e||"keratometriaoi"===e||"rsod"===e||"rsoi"===e?"keraRet":"d_time"===e||"d_media"===e||"d_test"===e||"d_fclod"===e||"d_fclod_time"===e||"d_fcloi"===e||"d_fcloi_time"===e?"diabetes":"cvod"===e||"cvoi"===e||"avslod"===e||"avsloi"===e||"avcgaod"===e||"avcgaoi"===e||"avfod"===e||"avfoi"===e||"avf2o"===e?"agudeza":"diagnostico"===e||"presbicie"===e||"piod"===e||"pioi"===e||"txoftalmico"===e?"diagnostico":"esferaod"===e||"esferaoi"===e||"cilindrod"===e||"cilindroi"===e||"ejeod"===e||"ejeoi"===e||"adiciond"===e||"adicioni"===e||"adicion_media_od"===e||"adicion_media_oi"===e||"dpod"===e||"dpoi"===e||"alturaod"===e||"alturaoi"===e||"lcmarca"===e||"lcgod"===e||"lcgoi"===e?"graduacion":"observaciones"===e?"observaciones":null},handleCodeName:or,getCodeGrad:function(e,t,a,n,c){var s=Object.keys(e).length?or(e):null;if(!s)return{};var r="+000000",i="+000000";return(n||t)&&(r=t>0?"+":"",r+=t.toFixed(2).toString().replace(".","")+n.toFixed(2).toString().replace("-","").replace(".","")),(c||a)&&(i=a>0?"+":"",i+=a.toFixed(2).toString().replace(".","")+c.toFixed(2).toString().replace("-","").replace(".","")),{code:s,od:r,oi:i}},handleSaveExam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,n=e.examenes.filter((function(e){return 0===_c()(e.created_at).diff(_c()(),"days")||!e.estado}));if(n.length&&!t)return window.Swal.fire({title:"Examenes",text:"Existe un examen activo o del dia",icon:"error"}),console.error("[OrusSystem] Examenes activos:",n.length),!1;window.Swal.fire({title:"Almacenamiento",text:t?"\xbfEsta seguro de actualizar este examen?":"\xbfEsta seguro de crear un nuevo examen?",icon:"question",showCancelButton:!0,confirmButtonText:t?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){!t.dismiss&&a&&a({id:0,data:{edad:e.edad,contact_id:e.id}})}))}},dr=lr;function ur(e){var t=Object(xc.useState)({category_list:[],category_list_2:[],category_list_3:[],category_id_1:0,category_id_2:0,category_id_3:0,category:{},codesItems:{}}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=Kc(),r=e.category_id,i=e.title,l=e.esferaod,d=e.esferaoi,u=e.cilindrod,j=e.cilindroi,b=e.handleCodesItems,m=n.codesItems,h=n.category_id_1,x=n.category_id_2,O=n.category_id_3,p=n.category_list_2,f=n.category_list_3,v=n.category_list,g=function(t){var a=t.target,s=a.name,r=a.value,i=e.onChangeInput;switch(s){case"category_id_1":for(var l in v)if(v[l].id===parseInt(r)){c(Object(o.a)(Object(o.a)({},n),{},{category_id_1:parseInt(r),category_id_3:0,category_list_2:v[l].sons,category_list_3:[]}));break}break;case"category_id_2":r&&n.category_list_2.map((function(e){return e.id===parseInt(r)&&c(Object(o.a)(Object(o.a)({},n),{},{category_id_2:parseInt(r),category_list_3:e.sons})),null}));break;case"category_id_3":i(parseInt(r));break;default:c(Object(o.a)(Object(o.a)({},n),{},Object(N.a)({},s,parseInt(r))))}},y=function(){var e=Object(me.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&s.getCategory(t).then((function(e){e.id?c(Object(o.a)(Object(o.a)({},n),{},{category:e})):console.error("[DEBUG] NEW ERROR",e)})),e.abrupt("return",{});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(me.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.getCategories({categoryid:"raiz",search:"lentes",order:"id"}).then((function(e){var t=e.data;c(Object(o.a)(Object(o.a)({},n),{},{category_list:t[0].sons}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(xc.useEffect)((function(){r?y(r):w()}),[r]),Object(xc.useEffect)((function(){if(n.category.id){var e=dr.getCodeGrad(n.category,l,d,u,j);c(Object(o.a)(Object(o.a)({},n),{},{codesItems:e}))}}),[n.category]),Object(yc.jsx)("div",{className:"card border border-info rounded d-print-none",children:Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("h3",{className:"card-title text-success m-2",children:i}),!r&&Object(yc.jsxs)(yc.Fragment,{children:[v.length?Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:"Tipo"})}),Object(yc.jsxs)("select",{name:"category_id_1",className:"custom-select",defaultValue:null!==h&&void 0!==h?h:"",onChange:g,children:[Object(yc.jsx)("option",{value:"0",children:"-- Seleccione el tipo --"}),v.map((function(e){return e.meta&&e.meta.rangoInf<=l&&l<=e.meta.rangoSup&&e.meta.rangoInf<=d&&d<=e.meta.rangoSup&&e.meta.cil<=u&&e.meta.cil<=j?Object(yc.jsx)("option",{value:e.id,children:e.name},e.id):null}))]})]}):null,h&&p.length?Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:"Material"})}),Object(yc.jsxs)("select",{name:"category_id_2",className:"custom-select",defaultValue:null!==x&&void 0!==x?x:"",onChange:g,children:[Object(yc.jsx)("option",{value:"0",children:"-- Seleccione el material --"}),p.map((function(e){var t;return!!(e.meta&&e.meta.rangoInf<=l&&l<=e.meta.rangoSup&&e.meta.rangoInf<=d&&d<=e.meta.rangoSup)&&Object(yc.jsx)("option",{value:null!==(t=e.id)&&void 0!==t?t:"",children:e.name},e.id)}))]})]}):null,h&&x&&f.length?Object(yc.jsxs)("div",{className:"input-group mb-3",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsx)("span",{className:"input-group-text",children:"Tratamiento"})}),Object(yc.jsxs)("select",{name:"category_id_3",className:"custom-select",defaultValue:null!==O&&void 0!==O?O:"",onChange:g,children:[Object(yc.jsx)("option",{value:"0",children:"-- Seleccione el tratamiento --"}),f.map((function(e){var t;return Object(yc.jsx)("option",{value:null!==(t=e.id)&&void 0!==t?t:"",children:e.name},e.id)}))]})]}):null]}),Object.values(m).length?Object(yc.jsxs)(yc.Fragment,{children:[m.code+m.od===m.code+m.oi?Object(yc.jsxs)("p",{className:"card-text",children:[Object(yc.jsx)("label",{children:"Lente"}),": ",m.code+m.od]}):Object(yc.jsxs)("div",{className:"row card-text",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Lente Derecho"}),Object(yc.jsx)("br",{})," ",m.code+m.od]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Lente Izquierdo"}),Object(yc.jsx)("br",{})," ",m.code+m.oi]})]}),b&&Object(yc.jsx)("p",{className:"card-text text-right",children:Object(yc.jsxs)("button",{className:"btn btn-info",onClick:function(e){e.preventDefault(),b({code:m.code,od:m.od,oi:m.oi})},children:[Object(yc.jsx)("i",{className:"fas fa-check mr-2"}),"Siguiente"]})}),e.update?Object(yc.jsx)("p",{className:"card-text text-right",children:Object(yc.jsx)("button",{className:"btn btn-outline-info btn-sm card-link mt-2",onClick:function(t){t.preventDefault();var a=e.onChangeInput;c(Object(o.a)(Object(o.a)({},n),{},{category_list_2:[],category_list_3:[],category_id_1:0,category_id_2:0,category_id_3:0,category:{},codesItems:{}})),a(0)},children:"Cambiar"})}):null]}):null]})})}function jr(e){var t=e.title,a=void 0===t?"contacto":t,n=e.nameDefault,c=e.messages,s=void 0===c?[]:c,r=e._save,i=Object(xc.useState)({name:"",phone:"",birthday:_c()(),email:"",gender:"male"}),l=Object(hc.a)(i,2),d=l[0],u=l[1];return Object(xc.useEffect)((function(){console.log("[DEBUG] New contact effec:",n),n&&u(Object(o.a)(Object(o.a)({},d),{},{name:n}))}),[]),Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsxs)("h5",{className:"modal-title text-primary text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-plus mr-1"}),"Crear nuevo ",a]}),Object(yc.jsx)("button",{type:"button",className:"close",onClick:e.handleCancel,children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsxs)("div",{className:"modal-body",children:[s.length?Object(yc.jsx)(yc.Fragment,{children:s.map((function(e,t){var a=e.type,n=e.text;return Object(yc.jsxs)("div",{className:"alert alert-".concat("error"===a?"danger":"success"===a?a:"warning"),children:[Object(yc.jsx)("i",{className:"fas fa-info mr-1"}),n]},t)}))}):null,Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsxs)("label",{children:["Nombre del ",a]}),Object(yc.jsx)("input",{type:"text",className:"form-control text-uppercase",placeholder:"Nombre del ".concat(a),autoComplete:"off",required:"required",pattern:"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*",minLength:"8",defaultValue:d.name,onChange:function(e){var t=e.target;u(Object(o.a)(Object(o.a)({},d),{},{name:t.value.toLowerCase()}))}})]}),Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"E-mail"}),Object(yc.jsx)("input",{type:"email",className:"form-control",defaultValue:d.email,onChange:function(e){var t=e.target;u(Object(o.a)(Object(o.a)({},d),{},{email:t.value.toLowerCase()}))}})]}),Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Telefono celular"}),Object(yc.jsx)("input",{type:"tel",placeholder:"Telefono celular",className:"form-control",maxLength:"10",value:d.phone,onChange:function(e){var t=e.target;isNaN(t.value)||u(Object(o.a)(Object(o.a)({},d),{},{phone:t.value}))}})]}),Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Fecha de naciemiento"}),Object(yc.jsx)(gs.a,{className:"form-control",locale:"es",selected:new Date(d.birthday.format("YYYY/MM/DD")),dateFormat:"dd/MM/yyyy",maxDate:new Date,placeholderText:"Seleccione una fecha",onSelect:function(e){e&&(e=e.toLocaleDateString("es-MX"),(e=_c()(e,"DD/MM/YYYY")).isValid()&&u(Object(o.a)(Object(o.a)({},d),{},{birthday:e})))},onChange:function(e){e&&(e=e.toLocaleDateString("es-MX"),(e=_c()(e,"DD/MM/YYYY")).isValid()&&u(Object(o.a)(Object(o.a)({},d),{},{birthday:e})))}})]}),Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"G\xe9nero"}),Object(yc.jsxs)("select",{className:"custom-select",onChange:function(e){var t=e.target;u(Object(o.a)(Object(o.a)({},d),{},{gender:t.value}))},defaultValue:d.gender,children:[Object(yc.jsx)("option",{value:"male",children:"Hombre"}),Object(yc.jsx)("option",{value:"female",children:"Mujer"})]})]})]}),Object(yc.jsx)("div",{className:"modal-footer",children:Object(yc.jsxs)("div",{className:"btn-group",children:[e.handleCancel&&Object(yc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:e.handleCancel,children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"cancelar"]}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ys.handleVerificationData(d,e).result}(!0),t=Object(o.a)(Object(o.a)({},d),{},{telnumbers:JSON.stringify(d.telnumbers)});if(!e)return!1;ys.saveContact(a,t,r)},disabled:!0,children:[Object(yc.jsx)("i",{className:"fas fa-save"}),"Guardar"]})]})})]})})})}function br(e){var t,a,n,c,s;return Object(yc.jsx)("div",{className:"position-absolute overflow-auto",style:{left:null!==(t=e.left)&&void 0!==t?t:"0rem",height:e.showNew?"0rem":"12rem",zIndex:"10",width:"100%",maxWidth:null!==(a=e.maxWidth)&&void 0!==a?a:"30rem"},children:Object(yc.jsx)("ul",{className:"list-group",children:e.contacts.length?Object(yc.jsxs)(yc.Fragment,{children:[e.contacts.map((function(t){return 2===t.id?Object(yc.jsxs)("li",{className:"list-group-item text-capitalize",children:[Object(yc.jsx)("i",{className:"fas fa-user mr-1 text-secondary"}),t.name.toLowerCase()]},t.id):Object(yc.jsx)("li",{className:"list-group-item text-capitalize",children:Object(yc.jsxs)("a",{href:"#selecte",className:"text-indigo",onClick:function(a){a.preventDefault(),e.handleSelected(t)},children:[Object(yc.jsx)("i",{className:"fas fa-user mr-1"}),t.name.toLowerCase()]})},t.id)})),(null===(n=e.meta)||void 0===n?void 0:n.total)>(null===(c=e.meta)||void 0===c?void 0:c.per_page)?Object(yc.jsxs)("li",{className:"list-group-item text-muted",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Existen mas registros, sea mas espesifico"]}):null]}):0===(null===(s=e.meta)||void 0===s?void 0:s.total)&&e.handleNew?Object(yc.jsx)("li",{className:"list-group-item",children:Object(yc.jsxs)("a",{href:"\xb7create",onClick:function(t){t.preventDefault(),e.handleNew()},children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1 text-dark"}),Object(yc.jsxs)("label",{children:["El ",e.title,":"]}),Object(yc.jsx)("span",{className:"text-uppercase text-dark font-weight-bold ml-1",children:e.text}),", no existe.",Object(yc.jsx)("span",{className:"badge badge-dark ml-2",children:"Registrar"})]})}):null})})}function mr(e){var t=Object(xc.useState)({search:"",contacts:[],meta:{},new:!1,newName:"",loading:!1,timer:""}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=Yc(),r=Object(xc.useRef)(),i=function(){c(Object(o.a)(Object(o.a)({},n),{},{timer:"",loading:!0})),s.getContacts({search:n.search,itemsPage:10}).then((function(e){if(e.data)c(Object(o.a)(Object(o.a)({},n),{},{contacts:e.data,meta:e.meta,loading:!1}));else{var t=Object.values(e.errors);console.log("[Orus System] Message of server:",e.errors),window.Swal.fire({title:"Contactos",text:t[0],icon:"error",showConfirmButton:!1,timer:3e3}),c(Object(o.a)(Object(o.a)({},n),{},{contacts:[],meta:{},loading:!1}))}}))};return Object(xc.useEffect)((function(){var e=null;n.search.length>5?(n.timer&&clearTimeout(n.timer),e=setTimeout((function(){return i()}),2e3),c(Object(o.a)(Object(o.a)({},n),{},{timer:e}))):n.search.length||(n.timer&&clearTimeout(n.timer),c(Object(o.a)(Object(o.a)({},n),{},{timer:null,contacts:[],meta:{},loading:!1})))}),[n.search]),Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("input",{type:"text",className:"form-control text-capitalize",defaultValue:n.search,onChange:function(e){var t,a=e.target;c(Object(o.a)(Object(o.a)({},n),{},{search:null===(t=a.value)||void 0===t?void 0:t.toLowerCase()}))},disabled:n.loading,onKeyDown:function(e){var t=e.key;"Escape"===t?(c(Object(o.a)(Object(o.a)({},n),{},{contacts:[],search:""})),r.current.value=""):"Enter"===t&&(n.timer&&clearTimeout(n.timer),i(),c(Object(o.a)(Object(o.a)({},n),{},{timer:null})))},ref:r}),n.loading&&Object(yc.jsx)("div",{className:"float-right px-4",children:Object(yc.jsx)("div",{className:"spinner-border text-indigo"})}),n.new&&Object(yc.jsx)(jr,{title:e.title,nameDefault:n.newName,handleCancel:function(e){c(Object(o.a)(Object(o.a)({},n),{},{new:!1,newName:""}))}}),n.search.length>2&&!n.loading&&Object(yc.jsx)("div",{className:"w-100 d-block position-static",children:Object(yc.jsx)(br,{contacts:n.contacts,text:n.search,meta:n.meta,title:e.title,left:"6.6rem",maxWidth:"24rem",handleNew:function(e){c(Object(o.a)(Object(o.a)({},n),{},{contacts:[],search:"",new:!0,newName:n.search})),r.current.value=""},handleSelected:function(t){e.handleSelectContact(t),c(Object(o.a)(Object(o.a)({},n),{},{contacts:[],search:""})),r.current.value=""}})})]})}function hr(e){var t=e.data,a=void 0===t?{}:t,n=e.readOnly,c=void 0!==n&&n,s=e.title,r=void 0===s?"contacto":s,i=e.legend,o=Object(pc.f)();return Object(yc.jsxs)("div",{className:"w-100 d-block",children:[i&&!a.id&&Object(yc.jsxs)("span",{className:"text-sm text-muted ml-4 w-100 d-block",children:[Object(yc.jsx)("label",{children:"Primero:"})," ",i]}),Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsxs)("span",{className:"input-group-text text-capitalize",children:[Object(yc.jsx)("i",{className:"fas fa-user mr-2"})," ",r]})}),a.id?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("span",{className:"form-control bg-light",children:[a.name.toUpperCase(),Object(yc.jsxs)("span",{className:"badge badge-secondary mx-1",children:[Object(yc.jsx)("i",{className:"fas fa-envelope mr-1"}),a.email?a.email:"--"]}),Object(yc.jsxs)("span",{className:"badge badge-secondary ml-1",children:[Object(yc.jsx)("i",{className:"fas fa-calendar mr-1"}),a.age?"".concat(a.age," a\xf1os"):"--"]})]}),!c&&Object(yc.jsx)("div",{className:"float-right",children:Object(yc.jsxs)("div",{className:"btn-group btn-sm d-print-none",children:[Object(yc.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(){window.Swal.fire({title:"Contactos",text:"\xbfEsta seguro de cambiar de ".concat(e.title,"?"),icon:"question",showCancelButton:!0,confirmButtonText:"Cambiar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){t.dismiss||e.handleContactSelect({id:0})}))},title:"Cambiar",children:Object(yc.jsx)("i",{className:"fas fa-exchange-alt"})}),Object(yc.jsx)("button",{className:"btn bg-indigo btn-sm",onClick:function(){return o.push("/contactos/".concat(a.id))},title:"Editar",children:Object(yc.jsx)("i",{className:"fas fa-edit"})})]})})]}):Object(yc.jsx)(mr,{title:r,handleSelectContact:function(t){e.handleContactSelect(t)}})]})]})}function xr(e){var t=e.state,a=e.handle;return Object(yc.jsxs)("div",{className:"nav flex-column nav-tabs",children:[Object(yc.jsxs)("a",{className:t.panel?"nav-link":"nav-link text-bold active",href:"#general",onClick:function(e){e.preventDefault(),a(0)},children:[Object(yc.jsx)("i",{className:t.generales?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Generales"]}),Object(yc.jsxs)("a",{className:1===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(1)},children:[Object(yc.jsx)("i",{className:t.interrogatorios?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Interrogatorio"]}),Object(yc.jsxs)("a",{className:2===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(2)},children:[Object(yc.jsx)("i",{className:t.keraRet?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Keratometria"]}),Object(yc.jsxs)("a",{className:3===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(3)},children:[Object(yc.jsx)("i",{className:t.diabetes?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Diabetes"]}),Object(yc.jsxs)("a",{className:4===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(4)},children:[Object(yc.jsx)("i",{className:t.agudeza?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Agudeza"]}),Object(yc.jsxs)("a",{className:5===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(5)},children:[Object(yc.jsx)("i",{className:t.diagnostico?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Diagnostico"]}),Object(yc.jsxs)("a",{className:6===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(6)},children:[Object(yc.jsx)("i",{className:t.graduacion?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Graduaci\xf3n"]}),Object(yc.jsxs)("a",{className:7===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(7)},children:[Object(yc.jsx)("i",{className:t.observaciones?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Observaciones"]}),Object(yc.jsxs)("a",{className:8===t.panel?"nav-link text-bold active":"nav-link",href:"#general",onClick:function(e){e.preventDefault(),a(8)},children:[Object(yc.jsx)("i",{className:t.recomendaciones?"fas fa-check-circle mr-1 text-success":"fas fa-circle mr-1"}),"Recomendaciones"]})]})}function Or(e){var t,a,n,c,s,r,i,l,d,u,j,b,m,h,x,O,p,f,v,g,y,w,C,S,_,k,E,L,I,T,D,P,A,B,F,M,z,G,U,V,R,Y,q,$,J,H,Z,K,Q,X,W,ee,te,ae,ne,ce,se,re,ie,oe,le,de,ue,je,be,me,he,xe,Oe,pe,fe,ve,ge,Ne,ye,we,Ce,Se,_e=Object(xc.useState)(Object(o.a)(Object(o.a)({},pr()),{},{loading:!1,panel:0,used:{generales:!1,interrogatorios:!1,keraRet:!1,diabetes:!1,agudeza:!1,diagnostico:!1,graduacion:!1,observaciones:!1,recomendaciones:!1}})),ke=Object(hc.a)(_e,2),Ee=ke[0],Le=ke[1],Ie=e.match.params.id,Te=Hs(),De=Object(pc.f)();return Object(xc.useEffect)((function(){Ie&&(console.log("[Orus System] Loading exam:",Ie),Le(Object(o.a)(Object(o.a)({},Ee),{},{loading:!1})),Te.getExam(Ie).then((function(e){var t,a;e.category_ii=null===(t=e.category_ii)||void 0===t?void 0:t.id,e.category_id=null===(a=e.category_id)||void 0===a?void 0:a.id,Le(Object(o.a)(Object(o.a)({},pr(e)),{},{loading:!1,panel:0,used:{generales:!0,interrogatorios:!0,keraRet:!0,diabetes:!0,agudeza:!0,diagnostico:!0,graduacion:!0,observaciones:!0,recomendaciones:!0}}))})))}),[Ie]),Object(yc.jsx)(yc.Fragment,{children:Object(yc.jsxs)("div",{className:"card card-info card-outline d-print-none",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h3",{className:"card-title text-info",children:[Object(yc.jsx)("i",{className:"fas fa-notes-medical mr-1"}),Ee.id?Object(yc.jsxs)("label",{children:["Examen ",Object(yc.jsxs)("span",{className:"badge badge-info",children:["#",Ee.id]})]}):"Nuevo examen"]})}),Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("div",{className:"form-group",children:Object(yc.jsx)(hr,{readOnly:!!Ee.id,title:"paciente",legend:"Busque el paciente por nombre para crear un nuevo examen",left:"6.5rem",data:Ee.contact,handleContactSelect:function(e){Le(Object(o.a)(Object(o.a)({},Ee),{},{contact:e,contact_id:e.id}))}})}),null!==(t=Ee.contact)&&void 0!==t&&t.id?Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-2",children:Object(yc.jsx)(xr,{state:Object(o.a)({panel:Ee.panel},Ee.used),handle:function(e){isNaN(e)||("string"===typeof e&&(e=parseInt(e)),Le(Object(o.a)(Object(o.a)({},Ee),{},{panel:e})))}})}),Object(yc.jsxs)("div",{className:"col-10",children:[Ee.panel?null:Object(yc.jsx)(Ks,{pc:null!==(a=Ee.pc)&&void 0!==a?a:"",tablet:null!==(n=Ee.tablet)&&void 0!==n?n:"",movil:null!==(c=Ee.movil)&&void 0!==c?c:"",lap:null!==(s=Ee.lap)&&void 0!==s?s:"",lap_time:null!==(r=Ee.lap_time)&&void 0!==r?r:"",pc_time:null!==(i=Ee.pc_time)&&void 0!==i?i:"",tablet_time:null!==(l=Ee.tablet_time)&&void 0!==l?l:"",movil_time:null!==(d=Ee.movil_time)&&void 0!==d?d:"",cefalea:null!==(u=Ee.cefalea)&&void 0!==u?u:"",c_frecuencia:null!==(j=Ee.c_frecuencia)&&void 0!==j?j:"",c_intensidad:null!==(b=Ee.c_intensidad)&&void 0!==b?b:"",frontal:null!==(m=Ee.frontal)&&void 0!==m?m:"",temporal:null!==(h=Ee.temporal)&&void 0!==h?h:"",occipital:null!==(x=Ee.occipital)&&void 0!==x?x:"",generality:null!==(O=Ee.generality)&&void 0!==O?O:"",temporaoi:null!==(p=Ee.temporaoi)&&void 0!==p?p:"",temporaod:null!==(f=Ee.temporaod)&&void 0!==f?f:"",handleGetData:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{generales:!0})),a)))}}),1===Ee.panel?Object(yc.jsx)(tr,{interrogatorio:null!==(v=Ee.interrogatorio)&&void 0!==v?v:"",coa:null!==(g=Ee.coa)&&void 0!==g?g:"",aopp:null!==(y=Ee.aopp)&&void 0!==y?y:"",aopf:null!==(w=Ee.aopf)&&void 0!==w?w:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{interrogatorios:!0})),a)))}}):null,2===Ee.panel?Object(yc.jsx)(ar,{keratometriaoi:null!==(C=Ee.keratometriaoi)&&void 0!==C?C:"",keratometriaod:null!==(S=Ee.keratometriaod)&&void 0!==S?S:"",rsoi:null!==(_=Ee.rsoi)&&void 0!==_?_:"",rsod:null!==(k=Ee.rsod)&&void 0!==k?k:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{keraRet:!0})),a)))}}):null,3===Ee.panel?Object(yc.jsx)(nr,{d_time:null!==(E=Ee.d_time)&&void 0!==E?E:"",d_media:null!==(L=Ee.d_media)&&void 0!==L?L:"",d_test:null!==(I=Ee.d_test)&&void 0!==I?I:"",d_fclod:null!==(T=Ee.d_fclod)&&void 0!==T?T:"",d_fclod_time:null!==(D=Ee.d_fclod_time)&&void 0!==D?D:"",d_fcloi:null!==(P=Ee.d_fcloi)&&void 0!==P?P:"",d_fcloi_time:null!==(A=Ee.d_fcloi_time)&&void 0!==A?A:"",oftalmoscopia:null!==(B=Ee.oftalmoscopia)&&void 0!==B?B:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{diabetes:!0})),a)))}}):null,4===Ee.panel?Object(yc.jsx)(cr,{cvod:null!==(F=Ee.cvod)&&void 0!==F?F:"",cvoi:null!==(M=Ee.cvoi)&&void 0!==M?M:"",avslod:null!==(z=Ee.avslod)&&void 0!==z?z:"",avsloi:null!==(G=Ee.avsloi)&&void 0!==G?G:"",avcgaod:null!==(U=Ee.avcgaod)&&void 0!==U?U:"",avcgaoi:null!==(V=Ee.avcgaoi)&&void 0!==V?V:"",avfod:null!==(R=Ee.avfod)&&void 0!==R?R:"",avfoi:null!==(Y=Ee.avfoi)&&void 0!==Y?Y:"",avf2o:null!==(q=Ee.avf2o)&&void 0!==q?q:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{agudeza:!0})),a)))}}):null,5===Ee.panel?Object(yc.jsx)(sr,{diagnostico:null!==($=Ee.diagnostico)&&void 0!==$?$:"",presbicie:null!==(J=Ee.presbicie)&&void 0!==J?J:"",piod:null!==(H=Ee.piod)&&void 0!==H?H:"",pioi:null!==(Z=Ee.pioi)&&void 0!==Z?Z:"",txoftalmico:null!==(K=Ee.txoftalmico)&&void 0!==K?K:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{diagnostico:!0})),a)))}}):null,6===Ee.panel?Object(yc.jsx)(rr,{esferaod:null!==(Q=Ee.esferaod)&&void 0!==Q?Q:0,esferaoi:null!==(X=Ee.esferaoi)&&void 0!==X?X:0,cilindrod:null!==(W=Ee.cilindrod)&&void 0!==W?W:0,cilindroi:null!==(ee=Ee.cilindroi)&&void 0!==ee?ee:0,ejeod:null!==(te=Ee.ejeod)&&void 0!==te?te:0,ejeoi:null!==(ae=Ee.ejeoi)&&void 0!==ae?ae:0,adiciond:null!==(ne=Ee.adiciond)&&void 0!==ne?ne:0,adicioni:null!==(ce=Ee.adicioni)&&void 0!==ce?ce:0,adicion_media_od:null!==(se=Ee.adicion_media_od)&&void 0!==se?se:0,adicion_media_oi:null!==(re=Ee.adicion_media_oi)&&void 0!==re?re:0,dpod:null!==(ie=Ee.dpod)&&void 0!==ie?ie:0,dpoi:null!==(oe=Ee.dpoi)&&void 0!==oe?oe:0,alturaod:null!==(le=Ee.alturaod)&&void 0!==le?le:0,alturaoi:null!==(de=Ee.alturaoi)&&void 0!==de?de:0,lcmarca:null!==(ue=Ee.lcmarca)&&void 0!==ue?ue:0,lcgod:null!==(je=Ee.lcgod)&&void 0!==je?je:0,lcgoi:null!==(be=Ee.lcgoi)&&void 0!==be?be:0,onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{graduacion:!0})),a)))}}):null,7===Ee.panel?Object(yc.jsx)(ir,{observaciones:null!==(me=Ee.observaciones)&&void 0!==me?me:"",onChangeInput:function(e,t){var a;e&&Le(Object(o.a)(Object(o.a)({},Ee),{},(a={},Object(N.a)(a,e,t),Object(N.a)(a,"used",Object(o.a)(Object(o.a)({},Ee.used),{},{observaciones:!0})),a)))}}):null,8===Ee.panel?Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)(ur,{category_id:null!==(he=Ee.category_id)&&void 0!==he?he:null,esferaod:null!==(xe=Ee.esferaod)&&void 0!==xe?xe:"",esferaoi:null!==(Oe=Ee.esferaoi)&&void 0!==Oe?Oe:"",cilindrod:null!==(pe=Ee.cilindrod)&&void 0!==pe?pe:"",cilindroi:null!==(fe=Ee.cilindroi)&&void 0!==fe?fe:"",nameItem:"item1",title:"Recomendacion principal",onChangeInput:function(e){Le(Object(o.a)(Object(o.a)({},Ee),{},{category_id:e,category_ii:0,used:Object(o.a)(Object(o.a)({},Ee.used),{},{recomendaciones:!0})}))},update:!0})}),Ee.category_id?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)(ur,{category_id:null!==(ve=Ee.category_ii)&&void 0!==ve?ve:null,esferaod:null!==(ge=Ee.esferaod)&&void 0!==ge?ge:"",esferaoi:null!==(Ne=Ee.esferaoi)&&void 0!==Ne?Ne:"",cilindrod:null!==(ye=Ee.cilindrod)&&void 0!==ye?ye:"",cilindroi:null!==(we=Ee.cilindroi)&&void 0!==we?we:"",nameItem:"item2",title:"Recomendacion adicional",onChangeInput:function(e){Le(Object(o.a)(Object(o.a)({},Ee),{},{category_ii:e,used:Object(o.a)(Object(o.a)({},Ee.used),{},{recomendaciones:!0})}))},update:!0})}):null]}):null]})]}):null]}),Object(yc.jsx)("div",{className:"card-footer text-right",children:Object(yc.jsxs)("div",{className:"btn-group",role:"group",children:[Object(yc.jsxs)("a",{href:"#close",className:"btn btn-default",onClick:function(t){t.preventDefault(),De.push("/consultorio"),e.handleNewOrEdit()},children:[Object(yc.jsx)("i",{className:Ee.id?"fas fa-arrow-left mr-2":"fas fa-ban mr-2"}),Object(yc.jsx)("strong",{children:Ee.id?"Cancelar":"Cerrar"})]}),Ee.id?Object(yc.jsxs)("button",{className:"btn btn-default",onClick:function(e){e.preventDefault()},children:[Object(yc.jsx)("i",{className:"fas fa-print mr-2"}),"Imprimir"]}):null,Object(yc.jsxs)("button",{type:"button",className:null!==(Ce=Ee.contact)&&void 0!==Ce&&Ce.id?"btn btn-info":"btn btn-info disabled",onClick:function(){var t=Object(o.a)({},Ee),a=t.contact;if(delete t.loading,delete t.panel,delete t.used,delete t.contact,t.category_ii||delete t.category_ii,t.category_id||delete t.category_id,t.cilindrod<0&&!t.ejeod||t.cilindroi<0&&!t.ejeoi)return window.Swal.fire("Consultorio","El campo CILINDRO esta vacio","warning"),!1;window.Swal.fire({title:"Consultorio",text:t.id?"\xbfDesea actualizar el examen de ".concat(a.name.toUpperCase(),"?"):"\xbfDesea crear un nuevo examen para ".concat(a.name.toUpperCase(),"?"),icon:"question",showCancelButton:!0,confirmButtonText:t.id?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(a){a.dismiss||Te.saveExam(t).then((function(t){if(null!==t&&void 0!==t&&t.id)console.log("[Orus System] Save exam successfully",t.id),e.handleNewOrEdit(),De.push("/consultorio");else if(t.hasOwnProperty("errors")){var a=Object.values(t.errors);console.log("[Orus System] Message of server:",t.errors),window.Swal.fire({title:"Consultorio",text:a[0],icon:"error",showConfirmButton:!1,timer:3e3})}}))}))},disabled:null===(Se=Ee.contact)||void 0===Se||!Se.id,children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"}),Object(yc.jsx)("strong",{children:Ee.id?"Actualizar":"Guardar"})]})]})})]})})}function pr(){var e,t,a,n,c,s,r,i,o,l,d,u,j,b,m,h,x,O,p,f,v,g,N,y,w,C,S,_,k,E,L,I,T,D,P,A,B,F,M,z,G,U,V,R,Y,q,$,J,H,Z,K,Q,X,W,ee,te,ae,ne,ce,se,re,ie,oe,le,de,ue,je,be,me,he,xe,Oe,pe,fe,ve,ge,Ne=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:null!==(e=Ne.id)&&void 0!==e?e:0,age:null!==(t=null===(a=Ne.customer)||void 0===a?void 0:a.age)&&void 0!==t?t:0,keratometriaoi:null!==(n=Ne.keratometriaoi)&&void 0!==n?n:"",keratometriaod:null!==(c=Ne.keratometriaod)&&void 0!==c?c:"",pantalleooi:null!==(s=Ne.pantalleooi)&&void 0!==s?s:"",pantalleood:null!==(r=Ne.pantalleood)&&void 0!==r?r:"",interrogatorio:null!==(i=Ne.interrogatorio)&&void 0!==i?i:"",cefalea:null!==(o=Ne.cefalea)&&void 0!==o?o:0,c_frecuencia:null!==(l=Ne.c_frecuencia)&&void 0!==l?l:"",c_intensidad:null!==(d=Ne.c_intensidad)&&void 0!==d?d:0,frontal:null!==(u=Ne.frontal)&&void 0!==u?u:0,temporal:null!==(j=Ne.temporal)&&void 0!==j?j:0,occipital:null!==(b=Ne.occipital)&&void 0!==b?b:0,generality:null!==(m=Ne.generality)&&void 0!==m?m:0,temporaoi:null!==(h=Ne.temporaoi)&&void 0!==h?h:0,temporaod:null!==(x=Ne.temporaod)&&void 0!==x?x:0,coa:null!==(O=Ne.coa)&&void 0!==O?O:"",aopp:null!==(p=Ne.aopp)&&void 0!==p?p:"",aopf:null!==(f=Ne.aopf)&&void 0!==f?f:"",avsloi:null!==(v=Ne.avsloi)&&void 0!==v?v:"",avslod:null!==(g=Ne.avslod)&&void 0!==g?g:"",avcgaoi:null!==(N=Ne.avcgaoi)&&void 0!==N?N:"",avcgaod:null!==(y=Ne.avcgaod)&&void 0!==y?y:"",cvoi:null!==(w=Ne.cvoi)&&void 0!==w?w:"",cvod:null!==(C=Ne.cvod)&&void 0!==C?C:"",oftalmoscopia:null!==(S=Ne.oftalmoscopia)&&void 0!==S?S:"",rsoi:null!==(_=Ne.rsoi)&&void 0!==_?_:"",rsod:null!==(k=Ne.rsod)&&void 0!==k?k:"",diagnostico:null!==(E=Ne.diagnostico)&&void 0!==E?E:"",presbicie:null!==(L=Ne.presbicie)&&void 0!==L?L:0,txoftalmico:null!==(I=Ne.txoftalmico)&&void 0!==I?I:"",esferaoi:null!==(T=Ne.esferaoi)&&void 0!==T?T:0,esferaod:null!==(D=Ne.esferaod)&&void 0!==D?D:0,cilindroi:null!==(P=Ne.cilindroi)&&void 0!==P?P:0,cilindrod:null!==(A=Ne.cilindrod)&&void 0!==A?A:0,ejeoi:null!==(B=Ne.ejeoi)&&void 0!==B?B:0,ejeod:null!==(F=Ne.ejeod)&&void 0!==F?F:0,adicioni:null!==(M=Ne.adicioni)&&void 0!==M?M:0,adiciond:null!==(z=Ne.adiciond)&&void 0!==z?z:0,adicion_media_oi:null!==(G=Ne.adicion_media_oi)&&void 0!==G?G:0,adicion_media_od:null!==(U=Ne.adicion_media_od)&&void 0!==U?U:0,dpoi:null!==(V=Ne.dpoi)&&void 0!==V?V:0,dpod:null!==(R=Ne.dpod)&&void 0!==R?R:0,avfod:null!==(Y=Ne.avfod)&&void 0!==Y?Y:"",avfoi:null!==(q=Ne.avfoi)&&void 0!==q?q:"",avf2o:null!==($=Ne.avf2o)&&void 0!==$?$:"",lcmarca:null!==(J=Ne.lcmarca)&&void 0!==J?J:"",lcgoi:null!==(H=Ne.lcgoi)&&void 0!==H?H:"",lcgod:null!==(Z=Ne.lcgod)&&void 0!==Z?Z:"",txoptico:null!==(K=Ne.txoptico)&&void 0!==K?K:"",alturaod:null!==(Q=Ne.alturaod)&&void 0!==Q?Q:0,alturaoi:null!==(X=Ne.alturaoi)&&void 0!==X?X:0,pioi:null!==(W=Ne.pioi)&&void 0!==W?W:0,piod:null!==(ee=Ne.piod)&&void 0!==ee?ee:0,observaciones:null!==(te=Ne.observaciones)&&void 0!==te?te:"",pc:null!==(ae=Ne.pc)&&void 0!==ae?ae:0,tablet:null!==(ne=Ne.tablet)&&void 0!==ne?ne:0,movil:null!==(ce=Ne.movil)&&void 0!==ce?ce:0,lap:null!==(se=Ne.lap)&&void 0!==se?se:0,lap_time:null!==(re=Ne.lap_time)&&void 0!==re?re:"00:00",pc_time:null!==(ie=Ne.pc_time)&&void 0!==ie?ie:"00:00",tablet_time:null!==(oe=Ne.tablet_time)&&void 0!==oe?oe:"00:00",movil_time:null!==(le=Ne.movil_time)&&void 0!==le?le:"00:00",d_time:null!==(de=Ne.d_time)&&void 0!==de?de:"",d_media:null!==(ue=Ne.d_media)&&void 0!==ue?ue:"",d_test:null!==(je=Ne.d_test)&&void 0!==je?je:"",d_fclod:null!==(be=Ne.d_fclod)&&void 0!==be?be:0,d_fcloi:null!==(me=Ne.d_fcloi)&&void 0!==me?me:0,d_fclod_time:null!==(he=Ne.d_fclod_time)&&void 0!==he?he:"00:00",d_fcloi_time:null!==(xe=Ne.d_fcloi_time)&&void 0!==xe?xe:"00:00",contact:null!==(Oe=Ne.customer)&&void 0!==Oe?Oe:{},status:null!==(pe=Ne.status)&&void 0!==pe?pe:1,contact_id:null===(fe=Ne.customer)||void 0===fe?void 0:fe.id,category_id:null!==(ve=Ne.category_id)&&void 0!==ve?ve:0,category_ii:null!==(ge=Ne.category_ii)&&void 0!==ge?ge:0}}Object(vs.registerLocale)("es",ws.a);var fr={page:1,orderby:"created_at",order:"desc",search:"",status:"",itemsPage:25,date:"",branch:"all"};function vr(e){var t=Object(xc.useState)({options:fr,newOrEdit:null}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=e.match.params.id;return Object(xc.useEffect)((function(){c(Object(o.a)(Object(o.a)({},n),{},{newOrEdit:!!s}))}),[s]),Object(yc.jsx)(qs.Provider,{value:Object(o.a)(Object(o.a)({},n),{},{set:c}),children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)(Js,{newOrEdit:n.newOrEdit,handleNewOrEdit:function(){return c(Object(o.a)(Object(o.a)({},n),{},{newOrEdit:!(null!==n&&void 0!==n&&n.newOrEdit)}))}}),"boolean"===typeof n.newOrEdit?Object(yc.jsx)("div",{className:"col-sm-12 col-md-10",children:n.newOrEdit?Object(yc.jsx)(Or,Object(o.a)(Object(o.a)({},e),{},{handleNewOrEdit:function(){return c(Object(o.a)(Object(o.a)({},n),{},{newOrEdit:!n.newOrEdit}))}})):Object(yc.jsx)(Zs,{})}):Object(yc.jsx)("p",{children:"Loading component"})]})})}var gr=Object(xc.createContext)(null),Nr={_getList:Ze.getListOrder,_getOrder:Ze.getOrder,_setOrder:Ze.setOrder,_setOptions:Ze.setOptions,_deleteOrder:Ze.deleteOrder,_saveOrder:Ze.saveOrder},yr=Object(s.b)((function(e){var t=e.order;return{orders:t.list,options:t.options,meta:t.metaList,loading:t.loading}}),Nr)((function(e){var t=Object(xc.useContext)(gr),a=function(){var e=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("orders",null,t),e.next=3,gc(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(me.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{getListOrders:e,getOrder:t,setOrder:a,setOptions:function(){},deleteOrder:function(){},saveOrder:function(){}}}(),n=t.options,s=Object(xc.useState)({data:[],meta:{},loading:!1}),r=Object(hc.a)(s,2),i=r[0],l=r[1],d=e._getOrder,u=(e._setOrder,e._deleteOrder),j=e._saveOrder,b=Object(xc.useState)({id:0}),m=Object(hc.a)(b,2),h=m[0],x=m[1],O=function(e,a){console.log(e,"   ",a),t.set(Object(o.a)(Object(o.a)({},t),{},{options:Object(o.a)(Object(o.a)({},n),{},Object(N.a)({},e,a))}))},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:0};e&&e.preventDefault(),t.id?console.log("Entrando al primero"):h.id&&(console.log("Entrando al segundo",t),d(h.id))};return Object(xc.useEffect)((function(){l(Object(o.a)(Object(o.a)({},i),{},{loading:!0})),a.getListOrders(n).then((function(e){e?l({data:e.data,meta:e.meta}):console.error("Error al obtener la lista de pedidos")}))}),[n]),Object(yc.jsx)(Hc,{title:"Listado de pedidos",icon:"clipboard-list",color:"warning",meta:i.meta,itemSelected:h.id,loading:i.loading,defaultSearch:n.search,handlePagination:function(e){return O("page",e)},handleSearch:function(e){return O("search",e)},handleEditItem:p,handleDeleteItem:function(){Ds.handleDeleteOrder(h,n,u),x({id:0})},handleSync:function(){t.set(Object(o.a)(Object(o.a)({},t),{},{options:{page:1,orderby:"created_at",order:"desc",itemsPage:10,status:0,search:""}}))},handleStatus:function(){h.id&&h.estado<3&&Ds.handleSaveOrder(h.id,{status:3},n,j),x({id:0})},children:Object(yc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{}),Object(yc.jsx)("th",{children:"Folio"}),Object(yc.jsx)("th",{children:"Cliente"}),Object(yc.jsx)("th",{children:"Estado"}),Object(yc.jsx)("th",{children:"Nota"}),Object(yc.jsx)("th",{children:"created_at"===n.orderby?"Registrado":"Modificado"})]})}),Object(yc.jsx)("tbody",{children:i.data.length?i.data.map((function(e){return Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("td",{children:Object(yc.jsxs)("div",{className:"icheck-primary",children:[Object(yc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:e.id,id:"order_"+e.id,checked:h.id===e.id,disabled:e.estado>2,onChange:function(t){return function(e,t){var a=e.checked;console.log(a," -- ",t),a||(t={id:0}),x(t)}(t.target,e)}}),Object(yc.jsx)("label",{htmlFor:"order_"+e.id,className:"sr-only"})]})}),Object(yc.jsxs)("td",{children:["#",e.id]}),Object(yc.jsx)("td",{className:"mailbox-name text-truncate text-capitalize text-bold",style:{cursor:"pointer"},children:Object(yc.jsx)("a",{href:"#edit",onClick:function(t){return p(t,e)},children:Object(yc.jsxs)("span",{className:e.status>2?"text-muted":"text-dark text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-user text-sm mr-2"}),e.paciente.nombre]})})}),Object(yc.jsxs)("td",{className:"mailbox-subject",children:[Object(yc.jsx)("span",{className:"badge badge-".concat(e.status<3?"primary":"secondary"," mr-2 text-uppercase"),children:Ds.handleStatusString(e.status)}),1===e.status?Object(yc.jsxs)("div",{children:[Object(yc.jsx)("span",{className:"mr-1 text-dark",children:e.laboratorio?e.laboratorio.nombre:"Sin asignar"}),e.laboratorio?"/ "+e.npedidolab:""]}):2===e.status?Object(yc.jsx)("small",{children:e.ncaja?"CAJA: "+e.ncaja:"Caja no asignada"}):e.status?3===e.status?Object(yc.jsx)("small",{className:"text-dark",children:"Sin entregar"}):null:Object(yc.jsx)("small",{children:e.exam?1===e.exam.status?"Examen completado":"Examen no realizado":"Examen no asignado"})]}),Object(yc.jsx)("td",{className:"mailbox-attachment",children:e.nota?Object(yc.jsx)(c.b,{to:"/notas/registro/"+e.nota.id,children:Object(yc.jsx)("span",{className:"badge badge-success",children:e.nota.id})}):"--"}),Object(yc.jsx)("td",{className:"mailbox-date",children:"created_at"===n.orderby?_c()(e.created_at).format("ll"):_c()(e.updated_at).fromNow()})]},e.id)})):Object(yc.jsx)("tr",{children:Object(yc.jsx)("th",{colSpan:"10",className:"text-center",children:"No hay datos para mostrar"})})})]})})})),wr={_saveExam:Ha.saveExam},Cr=Object(s.b)((function(e){return{messages:e.exam.messages}}),wr)((function(e){var t,a,n,c,s,r,i,l,d,u,j,b,m,h,x,O=e.exam,p=void 0===O?{}:O,f=e.examEdit,v=void 0!==f&&f,g=e.ChangeInput,y=e._saveExam,w=Object(xc.useState)({esferaod:p.esferaod,esferaoi:p.esferaoi,cilindrod:p.cilindrod,cilindroi:p.cilindroi,ejeod:p.ejeod,ejeoi:p.ejeoi,adiciond:p.adiciond,adicioni:p.adicioni,adicion_media_od:p.adicion_media_od,adicion_media_oi:p.adicion_media_oi,dpod:p.dpod,dpoi:p.dpoi,alturaod:p.alturaod,alturaoi:p.alturaoi,lcmarca:p.lcmarca,lcgod:p.lcgod,lcgoi:p.lcgoi}),C=Object(hc.a)(w,2),S=C[0],_=C[1],k=function(){g("examEdit",!1)};return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("b",{children:["Folio ",Object(yc.jsx)("br",{}),"#",p.id]})}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("b",{children:"Fecha:"}),Object(yc.jsx)("br",{}),Object(yc.jsx)("i",{className:"fas fa-calendar mr-2"}),_c()(p.created_at).format("L")]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("b",{children:"Estado:"}),Object(yc.jsx)("br",{}),p.estado?Object(yc.jsxs)("span",{className:"badge badge-success",children:[Object(yc.jsx)("i",{className:"fas fa-check"})," Terminado"]}):Object(yc.jsxs)("span",{className:"badge badge-secondary",children:[Object(yc.jsx)("i",{className:"fas fa-hourglass"})," Activo"]})]})]}),p.observaciones?Object(yc.jsx)("div",{className:"form-group mt-2",children:Object(yc.jsxs)("div",{className:"callout callout-info",children:[Object(yc.jsxs)("h5",{className:"text-info text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-info"})," Observaciones:"]}),p.observaciones]})}):null,Object(yc.jsx)("div",{className:"row mt-2",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)(rr,{esferaod:null!==(t=S.esferaod)&&void 0!==t?t:0,esferaoi:null!==(a=S.esferaoi)&&void 0!==a?a:0,cilindrod:null!==(n=S.cilindrod)&&void 0!==n?n:0,cilindroi:null!==(c=S.cilindroi)&&void 0!==c?c:0,ejeod:null!==(s=S.ejeod)&&void 0!==s?s:0,ejeoi:null!==(r=S.ejeoi)&&void 0!==r?r:0,adiciond:null!==(i=S.adiciond)&&void 0!==i?i:0,adicioni:null!==(l=S.adicioni)&&void 0!==l?l:0,adicion_media_od:S.adicion_media_od,adicion_media_oi:S.adicion_media_oi,dpod:null!==(d=S.dpod)&&void 0!==d?d:0,dpoi:null!==(u=S.dpoi)&&void 0!==u?u:0,alturaod:null!==(j=S.alturaod)&&void 0!==j?j:0,alturaoi:null!==(b=S.alturaoi)&&void 0!==b?b:0,lcmarca:null!==(m=S.lcmarca)&&void 0!==m?m:0,lcgod:null!==(h=S.lcgod)&&void 0!==h?h:0,lcgoi:null!==(x=S.lcgoi)&&void 0!==x?x:0,readOnly:!v,onChangeInput:function(e,t){var a=Object(o.a)(Object(o.a)({},S),{},Object(N.a)({},e,parseFloat(t)));_(a),g("codes",{})}})})}),v?Object(yc.jsx)("div",{className:"text-right mt-2",children:Object(yc.jsxs)("div",{className:"btn-group",children:[Object(yc.jsxs)("button",{className:"btn btn-default",onClick:k,children:[Object(yc.jsx)("i",{className:"fas fa-times mr-1"})," Cerrar"]}),Object(yc.jsxs)("button",{className:"btn btn-info",onClick:function(){window.Swal.fire({title:"Almacenamiento",text:"\xbfEsta seguro de actualizar el examen?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Actualizar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(y({id:p.id,data:S}),k())}))},children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"})," Guardar"]})]})}):null]})}));var Sr={_getList:$t.getListStore,_setList:$t.setListStore},_r=Object(s.b)((function(e){var t=e.storeItem;return{items:t.list,meta:t.metaList,loading:t.loading}}),Sr)((function(e){var t=e.items,a=e.meta,n=e.item,c=void 0===n?{producto:""}:n,s=e._getList,r=e._setList,i=e.handleItemSelect,o=Object(xc.useState)(c.producto),l=Object(hc.a)(o,2),d=l[0],u=l[1],j=Object(xc.useState)(""),b=Object(hc.a)(j,2),m=b[0],h=b[1],x=Object(xc.useState)(!1),O=Object(hc.a)(x,2),p=O[0],f=O[1],v=function(e){r({result:{list:[],metaList:{}}}),i(e),u(e.producto.toUpperCase())};return Object(xc.useEffect)((function(){var e=null;d.length>2&&!c.store_items_id&&(m&&clearTimeout(m),e=setTimeout((function(){s({search:d,itemsPage:10}),h(""),f(!1)}),1e3),h(e)),!d.length&&t.length&&(m&&clearTimeout(m),r({result:{list:[],metaList:{}}}),f(!1))}),[d]),Object(xc.useEffect)((function(){return function(){r({result:{list:[],metaList:{}}})}}),[]),Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("label",{children:["Producto",p?Object(yc.jsx)("small",{className:"position-absolute text-primary ml-2",style:{zIndex:"101",top:"0"},children:"Buscando..."}):null]}),Object(yc.jsx)("input",{className:"form-control text-uppercase text-truncate",type:"text",placeholder:"Buscar producto",autoComplete:"off",value:d,onChange:function(e){var t=e.target.value;u(t.toLowerCase()),f(!0)}}),t.length&&d.length>2?Object(yc.jsx)("div",{className:"position-absolute shadow p-0 pt-2 pl-1 bg-white rounded w-100 mh-50 overflow-auto",style:{maxHeight:"18rem",zIndex:"100"},children:Object(yc.jsxs)("div",{className:"list-group m-0 list-group-flush",children:[t.sort((function(e,t){return e.cant>t.cant?-1:e.cant<t.cant?1:0})).map((function(e){return function(e,t){if(e.cant!==e.cant_total)return!e.cant&&e.cant_total?Object(yc.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(yc.jsxs)("span",{className:"text-truncate text-uppercase text-muted",children:["[S]-",e.producto]}),Object(yc.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant_total})]},e.id):Object(yc.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(yc.jsx)("span",{className:"text-truncate text-uppercase text-primary",children:e.producto}),Object(yc.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant_total})]},e.id);if(!e.cant_total&&!e.cant)return Object(yc.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(yc.jsxs)("span",{className:"text-truncate text-uppercase text-danger",children:["[X]-",e.producto]}),Object(yc.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant_total})]},e.id);return Object(yc.jsxs)("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",href:"#l",onClick:function(a){a.preventDefault(),t(e)},children:[Object(yc.jsx)("span",{className:"text-truncate text-uppercase text-primary",children:e.producto}),Object(yc.jsx)("span",{className:"badge badge-dark badge-pill",children:e.cant})]},e.id)}(e,v)})),a.total>10&&Object(yc.jsxs)("a",{href:"#more",className:"list-group-item text-center text-dark text-bold",onClick:function(e){return e.preventDefault()},children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Existen mas registros, sea m\xe1s espesifico"]})]})}):null]})}));var kr=function(e){switch(e){case"monofocales":return"MF";case"bifocales":return"BF";case"progresivo basico":case"progresivo-basico":return"PB";case"progresivo digital":case"progresivo-digital":return"PD";case"plastico":return"CR";case"policarbonato":return"PL";case"hi-index":case"hi index":return"HI";case"antirreflejantes":return"AR";case"photo":return"PH";case"ar & photo":case"antirreflejante-photo":return"ARPH";case"blanco":return"BL";case"polarizado":return"PO";case"bifocal invisible":case"bifocal-invisible":return"BI";case"monofocal drivesafe":case"monofocal-drivesafe":case"monofocal digital drivesafe":case"monofocal digital DriveSafe":return"MDSF";case"monofocal superb":case"monofocal-superb":case"monofocal digital superb":return"MDSU";case"monofocal individual":case"monofocal-individual":case"monofocal digital individual":return"MDIN";default:return"XX"}},Er={verifyItem:function(e){return e.cantidad<=0?(window.Swal.fire({title:"Verificacion",text:"La cantidad debe de ser un valor valido",icon:"warning"}),!1):e.store_items_id?!!e.precio||(window.Swal.fire({title:"Verificacion",text:"El precio no es valido",icon:"warning"}),!1):(window.Swal.fire({title:"Verificacion",text:"No se selecciono un producto valido",icon:"warning"}),!1)},handleDeleteItem:function(e,t,a,n){if(e.id)return n||(n="\xbfEsta seguro de eliminar el producto ".concat(e.code,"?")),window.Swal.fire({text:n,icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(n){if(!n.dismiss&&a)return a({id:e.id,options:t}),!0})),!1},handleVerifyData:function(e,t){var a=e.category_id,n=e.category_id1,c=e.category_id2,s=e.category_id4,r=e.supplier,i=e.brand_id,o=e.code;if(!a)return window.Swal.fire("Verificaci\xf3n","Selecione una categoria primero","warning"),!1;if(a){if(1===n&&s!==a)return window.Swal.fire("Verificaci\xf3n","Selecione una categoria valida para lentes","warning"),!1;if(2===n&&c!==a)return window.Swal.fire("Verificaci\xf3n","Selecione una categoria valida para armazones","warning"),!1}return 2!==n||r?2!==n||i?!(!o&&!t.current.value)||(window.Swal.fire("Verificaci\xf3n","Escriba una CODIGO para este producto","warning"),!1):(window.Swal.fire("Verificaci\xf3n","Selecione una MARCA valida primero","warning"),!1):(window.Swal.fire("Verificaci\xf3n","Selecione un PROVEEDOR valido primero","warning"),!1)},handleSaveItem:function(e,t,a,n,c,s){s||(s=e?"\xbfEsta seguro de actualizar el producto?":"\xbfEsta seguro de crear un nuevo producto?"),window.Swal.fire({title:"Almacenamiento",text:s,icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:e?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){!s.dismiss&&n&&(n({id:e,data:t,options:a}),c&&c())}))},handleCatOne:function(e){return{category_id:e.id,category_id1:e.id,category_id2:0,category_list2:e.hijos,category_id3:0,category_list3:[],category_id4:0,category_list4:[],supplier:0}},handleCatTwo:function(e){return{category_id:e.id,category_id2:e.id,category_id3:0,category_list3:e.hijos,category_id4:0,category_list4:[]}},handleCatTree:function(e){return{category_id:e.id,category_id3:e.id,category_id4:0,category_list4:e.hijos}},handleCodeString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"armazon",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e+=null!==t.current&&t.current.selectedIndex?" "+t.current.options[t.current.selectedIndex].text.trim():"",e+=null!==a.current&&a.current.selectedIndex?" "+a.current.options[a.current.selectedIndex].text.trim().replace(/\s/gim,""):"",n&&(e+=" "+n.replace(/[-\s]+/gm,"")),e.toLowerCase()},handleCodeLent:function(e,t,a,n){if(!t.current||!a.current||!n.current)return"";var c=null!==t.current?kr(t.current.options[t.current.selectedIndex].text.trim().toLowerCase()):"";return c+=null!==a.current?kr(a.current.options[a.current.selectedIndex].text.trim().toLowerCase()):"",(c+=null!==n.current?kr(n.current.options[n.current.selectedIndex].text.trim().toLowerCase()):"")+e.toString().trim().replace(/\s/gim,"")},codeLentString:kr,handleNameLent:function(e,t,a,n){if(!t.current||!a.current||!n.current)return"";var c="";return c+=null!==t.current?t.current.options[t.current.selectedIndex].text.trim():"",c+=null!==a.current?" "+a.current.options[a.current.selectedIndex].text.trim():"",c+=null!==n.current?" "+n.current.options[n.current.selectedIndex].text.trim():"",(c+=" "+e.toString()).toLowerCase()}},Lr=Er;var Ir=function(e){var t=Object(s.d)((function(e){return e.users.dataLoggin})),a=e.codeDefault,n=void 0===a?"":a,c=e.cantDefault,r=void 0===c?1:c,i=e.handleAddItem,l=e.handleCloseModal,d=Object(xc.useState)({id:0,producto:n,cantidad:r,precio:0,out:0,inStorage:0,subtotal:0,store_items_id:0,descripcion:"",category:0}),u=Object(hc.a)(d,2),j=u[0],b=u[1],m=Object(xc.useState)(!1),h=Object(hc.a)(m,2),x=h[0],O=h[1],p=function(){b({id:0,producto:"",precio:0,out:0,cantidad:1,inStorage:0,subtotal:0,store_items_id:0,descripcion:"",category:0}),l()},f=function(e,t){b(Object(o.a)(Object(o.a)({},j),{},Object(N.a)({},e,"descripcion"===e?t:parseInt(t))))};return Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsxs)("h5",{className:"modal-title text-primary text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar producto"]}),Object(yc.jsx)("button",{type:"button",className:"close",onClick:function(){return p()},children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsx)("div",{className:"modal-body",children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col position-relative",children:Object(yc.jsx)(_r,{item:j,handleItemSelect:function(e){b({id:0,producto:e.producto.toLowerCase(),precio:parseFloat(e.precio),out:e.cantidades,cantidad:1,inStorage:0,subtotal:0,store_items_id:e.id,descripcion:"",category:e.categoria?e.categoria.id:0})}})}),j.store_items_id?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"col-2",children:[Object(yc.jsx)("label",{children:"Cantidad"}),Object(yc.jsx)("input",{type:"number",className:"form-control",placeholder:"Cantidad",value:j.cantidad,min:"0",max:"100",onChange:function(e){var t=e.target;return f("cantidad",t.value)}})]}),Object(yc.jsxs)("div",{className:"col-3",children:[Object(yc.jsx)("label",{children:"Precio"}),Object(yc.jsx)("input",{type:"number",className:"form-control text-right",placeholder:"Precio",min:"0",value:j.precio,onChange:function(e){var t=e.target;return f("precio",t.value)}})]}),x?Object(yc.jsx)("div",{className:"col-12 mt-2",children:Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Agregue una descripcion",value:j.descripcion,onChange:function(e){var t=e.target;return f("descripcion",t.value)}})}):null]}):null]})}),Object(yc.jsx)("div",{className:"modal-footer",children:Object(yc.jsxs)("div",{className:"btn-group",children:[Object(yc.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return p()},children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return O(!x)},disabled:!j.store_items_id,children:[Object(yc.jsx)("i",{className:"fas fa-sticky-note mr-1"}),x?"Cerrar nota":"Abrir nota"]}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm text-bold",disabled:!(j.store_items_id&&j.cantidad&&j.precio),onClick:function(){return function(){if(!Lr.verifyItem(j))return!1;j.inStorage=j.out>=j.cantidad,j.out=j.out>=j.cantidad?0:j.cantidad-j.out,j.subtotal=parseFloat(j.cantidad*j.precio),j.branch_id=t.branch.id,i(j),p()}()},children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"}),"Agregar"]})]})})]})})})},Tr=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(e){var n;return Object(Qs.a)(this,a),(n=t.call(this,e)).handleSetCantItem=function(e,t){var a=n.props,c=a.items;(0,a.ChangeInput)("items",c.map((function(a){return a.store_items_id===e&&(a.cantidad=a.cantidad+t,a.subtotal=a.cantidad*a.precio),a})).filter((function(e){return e.cantidad>0})))},n.handleSetCode=function(e){var t=e.code,a=e.oi,c=e.od;n.setState({itemNew:!0,code:t,cant:a===c?2:1})},n.deleteItem=function(e){var t=n.props,a=t.items,c=t.status,s=void 0===c||c,r=t.ChangeInput,i=a.filter((function(t){return t.store_items_id!==e}));if(!s)return console.error("[Orus System] No se puede eliminar el producto, por estatus",e),!1;r("items",i)},n.handleAddItem=function(e){if(e){var t=n.props,a=t.items,c=t.ChangeInput,s=a.findIndex((function(t){return t.store_items_id===e.store_items_id}));if(-1!==s){var r=a[s].cantidad+e.cantidad,i=e.precio,o=a[s].precio*r;a[s].precio===i?(a[s].cantidad=r,a[s].subtotal=o):a.push(e)}else a.push(e);c("items",a)}},n.state={itemNew:!1,code:"",cant:1},n.total=0,n}return Object(Xs.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.itemNew,n=t.code,c=t.cant,s=this.props,r=s.items,i=s.codes,o=s.session,l=s.status,d=void 0===l||l,u=!s.noPrice;return this.total=0,Object(yc.jsxs)("div",{className:"card ",children:[Object(yc.jsxs)("div",{className:"card-header",children:[Object(yc.jsxs)("h3",{className:"card-title",children:[Object(yc.jsx)("i",{className:"fas fa-shopping-cart"})," Pedido"]}),Object(yc.jsx)("div",{className:"card-tools",children:o&&!a?Object(yc.jsxs)("button",{className:d?"btn btn-too btn-primary text-bold":"btn btn-too btn-outline-secondary disabled",disabled:!d,onClick:function(t){e.setState({itemNew:!e.state.itemNew,code:"",cant:1})},children:[Object(yc.jsx)("i",{className:"fas fa-plus mr-1"})," Agregar"]}):null})]}),Object(yc.jsx)("div",{className:"card-body table-responsive p-0",children:Object(yc.jsxs)("table",{className:"table table-sm m-0",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[d?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("th",{style:{width:16}}),Object(yc.jsx)("th",{style:{width:16}})]}):null,Object(yc.jsx)("th",{scope:"col",style:{width:32},children:"cant"}),Object(yc.jsx)("th",{scope:"col",children:"Descripcion"}),u?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("th",{scope:"col",className:"text-right",style:{width:120},children:"Precio"}),Object(yc.jsx)("th",{scope:"col",className:"text-right",style:{width:120},children:"Subtotal"})]}):null,d?Object(yc.jsx)("th",{scope:"col",style:{minWidth:"4rem",maxWidth:"8rem"},children:Object(yc.jsx)("span",{className:"sr-only",children:"acciones"})}):null]})}),Object(yc.jsx)("tbody",{children:r.length?r.map((function(t){return e.total+=1*t.subtotal,Object(yc.jsxs)("tr",{children:[d?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("td",{children:t.cantidad>1?Object(yc.jsx)("i",{className:"fas fa-minus mr-2 text-primary",title:"Quitar",style:{cursor:"pointer"},onClick:function(){return e.handleSetCantItem(t.store_items_id,-1)}}):Object(yc.jsx)("i",{className:"fas fa-minus mr-2 text-muted"})}),Object(yc.jsx)("td",{children:Object(yc.jsx)("i",{className:"fas fa-plus mr-2 text-primary",title:"Agregar",style:{cursor:"pointer"},onClick:function(){return e.handleSetCantItem(t.store_items_id,1)}})})]}):null,Object(yc.jsx)("th",{scope:"row",className:"text-right",children:t.cantidad}),Object(yc.jsxs)("td",{children:[t.inStorage?null:Object(yc.jsx)("i",{className:"text-warning fas fa-circle mr-1"}),Object(yc.jsx)("span",{className:"text-capitalize",children:t.producto}),t.descripcion?Object(yc.jsxs)("span",{className:"text-muted ml-2",children:["(",t.descripcion,")"]}):null]}),u?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("td",{className:"text-right",children:["$ ",parseFloat(t.precio).toFixed(2)]}),Object(yc.jsxs)("td",{className:"text-right",children:["$ ",t.subtotal.toFixed(2)]})]}):null,d?Object(yc.jsx)("td",{className:"d-print-none text-right",children:Object(yc.jsx)("button",{type:"button",className:"btn btn-sm btn-muted",disabled:!d,onClick:function(){return e.deleteItem(t.store_items_id)},children:Object(yc.jsx)("i",{className:"fas fa-trash"})})}):null]},t.store_items_id)})):Object(yc.jsx)("tr",{children:Object(yc.jsxs)("td",{className:"text-center",colSpan:d?7:4,children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Seleccione articulos primero"]})})}),r.length&&u?Object(yc.jsx)("tfoot",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("td",{className:"text-right",colSpan:d?4:2}),Object(yc.jsx)("th",{scope:"row",className:"text-right text-lg",children:"Total"}),Object(yc.jsx)("td",{className:"text-right text-primary text-lg pr-3",children:Object(yc.jsxs)("label",{children:["$ ",this.total.toFixed(2)]})}),d?Object(yc.jsx)("td",{}):null]})}):null]})}),i&&i.code?Object(yc.jsx)("div",{className:"card-footer",children:i.od===i.oi?Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsxs)("label",{className:"m-2",children:[Object(yc.jsx)("i",{className:"fas fa-eye"})," Graduacion"]}),Object(yc.jsx)("span",{className:"text",style:{cursor:"pointer"},onClick:function(){return e.handleSetCode(i)},children:i.code+i.od})]})}):Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsxs)("label",{className:"m-2",children:[Object(yc.jsx)("i",{className:"fas fa-eye"})," Graduacion ojo derecho"]}),Object(yc.jsx)("span",{className:"text",style:{cursor:"pointer"},onClick:function(){return e.handleSetCode(i)},children:i.code+i.od})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsxs)("label",{className:"m-2",children:[Object(yc.jsx)("i",{className:"fas fa-eye"})," Graduacion ojo izquierdo"]}),Object(yc.jsx)("span",{className:"text",style:{cursor:"pointer"},onClick:function(){return e.handleSetCode(i)},children:i.code+i.oi})]})]})}):null,a?Object(yc.jsx)(Ir,{codeDefault:n,cantDefault:c,handleAddItem:this.handleAddItem,handleCloseModal:function(){return e.setState({itemNew:!1})}}):null]})}}]),a}(xc.Component),Dr=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(e){var n;return Object(Qs.a)(this,a),(n=t.call(this,e)).handleSaveStorage=function(){var e=n.state,t=e.contact_id,a=e.exam_id,c=e.items,s=e.session,r=n.props.contact,i={id:t,contact:{id:r.id,name:r.nombre},exam_id:a,items:c,session:s,created_at:new Date};Ds.addDataTemporary(i),n.handleCancel()},n.handleCancel=function(){var e=n.props,t=e.handleClose,a=e._setContact;n.setState({contact_id:0,items:[],codes:{},exam_id:null,exam:{},examEdit:!1}),t(),a()},n.handleGetCategories=function(e){(0,n.props._getCategory)({id:e})},n.handleChangeInput=function(e,t){"exam"===e&&(t.category_id&&n.handleGetCategories(t.category_id),t.id?n.setState({exam_id:t.id,exam:t,codes:{}}):n.setState({exam_id:0,exam:{},codes:{}})),"codes"===e?n.setState({codes:t}):n.setState(Object(N.a)({},e,t))},n.handleCodeName=function(e){var t="";return e.depende_de?e.depende_de.depende_de?(t=e.depende_de.depende_de.meta.code,t+=e.depende_de.meta.code,t+=e.meta.code):(t=e.depende_de.meta.code,t+=e.meta.code):t=e.meta.code,t},n.getCategories=function(e,t){var a=t.category_id,c=t.esferaod,s=t.esferaoi,r=t.cilindrod,i=t.cilindroi,o=t.id,l=a&&e.id?n.handleCodeName(e):"XX",d="+000000",u="+000000";(r||c)&&(d=c>0?"+":"",d+=c.toFixed(2).toString().replace(".","")+r.toFixed(2).toString().replace("-","").replace(".","")),(i||s)&&(u=s>0?"+":"",u+=s.toFixed(2).toString().replace(".","")+i.toFixed(2).toString().replace("-","").replace(".","")),n.setState({exam_id:o,exam:t,codes:{code:l,od:d,oi:u}})},n.handleSave=function(e){var t=0,a=n.props,c=a.options,s=a._saveOrder,r=a._setContact,i=n.state,o=i.items,l=i.exam_id,d=i.session,u=i.contact_id,j=o.map((function(e){return 4===e.category&&t++,{cant:e.cantidad,price:e.precio,subtotal:e.subtotal,inStorage:e.inStorage,session:e.session,out:e.out,descripcion:e.descripcion,store_items_id:e.store_items_id}}));if(j.length===t)return window.Swal.fire({title:"Verificacion",text:"No hay productos para procesar en un pedido",icon:"warning"}),!1;var b={session:d,contact_id:u,items:JSON.stringify(j),status:0};console.log("[DEBUG ORDER data]",b),l&&(b.exam_id=parseInt(l)),Ds.handleSaveOrder(null,b,c,s,(function(){return r({})}))},n.state={session:pn.getSession(),contact_id:0,items:[],codes:{},exam_id:null,exam:{},examEdit:!1,load:!0},n}return Object(Xs.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.contact,a=e.exam;if(t.id){var n,c,s,r=Ds.getDataOneItem(t.id);if(r)this.setState({contact:t,contact_id:t.id,items:null!==(n=r.items)&&void 0!==n?n:[],session:null!==(c=r.session)&&void 0!==c?c:this.state.session,exam:null!==a&&void 0!==a?a:this.state.exam,exam_id:null!==(s=a.id)&&void 0!==s?s:this.state.exam_id})}}},{key:"componentDidUpdate",value:function(e){var t,a,n=this.props,c=n.category,s=n.contact,r=n.exam,i=n.msg_exams,o=n._setMsgExam,l=n._getContact,d=Ds.getDataOneItem(s.id);(e.category.id!==c.id&&this.getCategories(c,this.state.exam),e.msg_exams.length!==i.length&&i.length&&(i.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),o(),l(s.id),this.setState({load:!0})),e.contact.id!==s.id&&s.id)&&this.setState({contact:s,contact_id:s.id,items:null!==(t=d.items)&&void 0!==t?t:[],session:null!==(a=d.session)&&void 0!==a?a:this.state.session});e.exam.id!==r.id&&r.id&&this.setState({exam:r,exam_id:r.id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.contact_id,n=t.items,c=t.exam,s=t.exam_id,r=t.examEdit,i=t.codes,o=t.session,l=this.props,d=l.contact,u=l.load_order,j=l._saveExam;return Object(yc.jsxs)("div",{className:"card card-warning card-outline",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h3",{className:"card-title",children:[Object(yc.jsx)("i",{className:"fas fa-clipboard-list mr-1"}),"Nuevo pedido"]})}),Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("div",{className:"form-group d-print-none",children:Object(yc.jsx)(hr,{title:"cliente",legend:d.id?null:"Busque el paciente por nombre para crearun nuevo pedido",readOnly:null!==s})}),d.id?Object(yc.jsx)(Oc.a.Fragment,{children:null!==s?Object(yc.jsx)(Oc.a.Fragment,{children:r?Object(yc.jsx)("div",{className:"form-group",children:Object(yc.jsx)(Cr,{id:s,examEdit:!0,exam:c,ChangeInput:this.handleChangeInput})}):Object(yc.jsxs)(Oc.a.Fragment,{children:[Object(yc.jsx)("div",{className:"form-group",children:Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("div",{className:"input-group-prepend",children:Object(yc.jsxs)("span",{className:"input-group-text",children:[Object(yc.jsx)("i",{className:"fas fa-notes-medical mr-1"})," ","Examen:"]})}),Object(yc.jsx)("input",{type:"text",className:s?c.observaciones?"form-control text-right pr-2 bg-info text-bold":"form-control text-right pr-2":"form-control text-center",value:s?c.observaciones?s+" [Revise las observaciones]":s:"Sin examen",readOnly:!0}),Object(yc.jsx)("div",{className:"float-right",children:Object(yc.jsxs)("div",{className:"btn-group btn-sm",children:[Object(yc.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(t){return e.handleChangeInput("exam_id",null)},children:Object(yc.jsx)("i",{className:"fas fa-exchange-alt"})}),c.id?Object(yc.jsx)("button",{type:"button",className:"btn btn-info btn-sm",onClick:function(t){return e.handleChangeInput("examEdit",!0)},disabled:r,children:Object(yc.jsx)("i",{className:"fas fa-edit"})}):null]})})]})}),c.id>0&&c.status||!c.id?Object(yc.jsx)(Tr,{items:n,session:o,codes:i,ChangeInput:this.handleChangeInput}):Object(yc.jsx)("span",{className:"alert",children:Object(yc.jsxs)("h5",{className:"w-100 text-center",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),Object(yc.jsx)("span",{className:"text-muted",children:"Es necesario que el examen este terminado para continuar con el pedido"})]})})]})}):Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)(As,{exams:d.examenes,allSelect:!0,handleSelectedExam:function(t){return e.handleChangeInput("exam",t)}}),Object(yc.jsxs)("div",{className:"btn-group",children:[Object(yc.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.handleChangeInput("exam",{id:0})},children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Sin examen"]}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return dr.handleSaveExam(d,null,j)},children:[Object(yc.jsx)("i",{className:"fas fa-notes-medical mr-1"}),"Nuevo examen"]})]})]})}):null]}),r?null:Object(yc.jsx)("div",{className:"card-footer",children:Object(yc.jsx)("div",{className:"mailbox-controls text-right",children:Object(yc.jsxs)("div",{className:"btn-group",children:[Object(yc.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:this.handleCancel,children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),a?"Cancelar":"Cerrar"]}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-default btn-sm",onClick:this.handleSaveStorage,disabled:!a,children:[Object(yc.jsx)("i",{className:"fas fa-clock mr-1"}),"Temporal"]}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-warning btn-sm text-bold",onClick:this.handleSave,disabled:!a||null===s||!n.length,children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"})," Guardar"]})]})})}),u?Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})}}]),a}(xc.Component),Pr={_setContact:wa.setContact,_getContact:wa.getContact,_saveExam:Ha.saveExam,_setMsgExam:Ha.setMessagesExam,_saveOrder:Ze.saveOrder,_getCategory:Ot.getCategory},Ar=Object(s.b)((function(e){var t=e.contact,a=e.exam,n=e.order,c=e.category;return{load_contact:t.loading,contact:t.contact,exam:a.exam,msg_exams:a.messages,options:n.options,load_order:n.loading,category:c.category}}),Pr)(Dr);function Br(e){var t=e.status,a=void 0!==t&&t,n=e.lab_id,c=void 0===n?"":n,r=e.npedidolab,i=void 0===r?"":r,o=e.handleChange,l=Object(s.d)((function(e){return e.contact})).suppliers,d=Object(s.c)(),u=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value,c=n;"lab_id"===a&&(c=parseInt(n)),o&&o(a,c)};return Object(xc.useEffect)((function(){d(wa.getListSuppliers(1))}),[]),Object(yc.jsxs)("div",{className:"row m-2",children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(yc.jsx)("label",{children:"Laboratorio"}),Object(yc.jsx)("select",{className:a>1?"form-control disabled":"form-control",disabled:a>1,name:"lab_id",defaultValue:c,onChange:u,children:l&&l.length?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("option",{value:"0",children:"Seleccione un proveedor"}),l.map((function(e){return Object(yc.jsx)("option",{value:e.id,children:e.nombre},e.id)}))]}):Object(yc.jsx)("option",{value:"0",children:"Configure primero los proveedores"})})]})}),Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(yc.jsx)("label",{children:"Folio"}),Object(yc.jsx)("input",{type:"text",className:a>1?"form-control disabled":"form-control",disabled:a>1,name:"npedidolab",defaultValue:i,onChange:u})]})})]})}function Fr(e){var t=e.status,a=void 0!==t&&t,n=e.ncaja,c=void 0===n?"":n,s=e.observaciones,r=void 0===s?"":s,i=e.handleChange,o=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value,c=n;"caja"===a&&(c=parseInt(n)),i&&i(a,c)};return Object(yc.jsxs)("div",{className:"row m-2",children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(yc.jsx)("label",{htmlFor:"lab",children:"Caja"}),Object(yc.jsx)("input",{type:"number",className:a>2?"form-control disabled":"form-control",disabled:a>2,name:"ncaja",min:"1",defaultValue:c,onChange:o})]})}),Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"border border-warning rounded p-2",children:[Object(yc.jsx)("label",{children:"Observaciones"}),Object(yc.jsx)("textarea",{name:"observaciones",className:a>2?"form-control disabled":"form-control",disabled:a>2,defaultValue:r,onChange:o})]})})]})}var Mr=a(89),zr=Object(xc.createContext)(null),Gr=function(){return Object(xc.useContext)(zr)};var Ur=function(e){var t=e.forPaid,a=e.handleClose,n=Object(xc.useContext)(Ec).data,c=Gr(),s=Object(xc.useState)({id:0,metodopago:1,metodoname:"efectivo",total:0,bank_id:null,details:null,auth:null}),r=Object(hc.a)(s,2),i=r[0],l=r[1],d=function(e){var t=e.name,a=e.value,n=e.type,c=a;"number"!==n&&"select-one"!==n||(c=parseFloat(a)),l(Object(o.a)(Object(o.a)({},i),{},Object(N.a)({},t,c)))},u=function(){var e=Object(Mr.a)(c.payments),n=0;if(!i.total)return window.Swal.fire({icon:"warning",title:"El total del abono debe ser mayor a 0",showConfirmButton:!1,timer:1500}),!1;if(1!==i.metodopago&&4!==i.metodopago&&0!==i.metodopago){var s,r;if(!i.bank_id)return window.Swal.fire({icon:"warning",title:"Seleccione un banco",showConfirmButton:!1,timer:1500}),!1;if((null===(s=i.auth)||void 0===s?void 0:s.length)<4)return window.Swal.fire({icon:"warning",title:"Espesifique los ultimos 4 numeros de la tarjeta",showConfirmButton:!1,timer:1500}),!1;if((null===(r=i.auth)||void 0===r?void 0:r.length)>4)return window.Swal.fire({icon:"warning",title:"Espesifique solamente 4 numeros",showConfirmButton:!1,timer:1500}),!1}if(4===i.metodopago&&(console.log("Metodo Pago",i.metodoname),!i.auth))return window.Swal.fire({icon:"warning",title:"Espesifique el numero de autorizaci\xf3n",showConfirmButton:!1,timer:1500}),!1;e.push(Object(o.a)(Object(o.a)({},i),{},{id:"new".concat(Date.now().toString()),metodoname:pn.getMethodName(i.metodopago),total:t<i.total?t:i.total})),e.forEach((function(e){return n+=e.total})),a(),c.set(Object(o.a)(Object(o.a)({},c),{},{payments:e}))};return Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsx)("h5",{className:"modal-title",children:"Capture el pago"}),Object(yc.jsx)("button",{type:"button",className:"close",onClick:function(){return a()},children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsx)("div",{className:"modal-body p-2",children:Object(yc.jsxs)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),u()},children:[Object(yc.jsx)("div",{className:"row mb-2 bg-gray-light",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("h4",{className:"text-center",children:["Por pagar: ",Object(yc.jsxs)("span",{className:"text-success",children:["$ ",t]})]})})}),Object(yc.jsxs)("div",{className:"row my-2",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Metodo de pago"}),Object(yc.jsxs)("select",{name:"metodopago",className:"custom-select text-uppercase",onChange:function(e){var t=e.target;return d(t)},defaultValue:i.metodopago,children:[Object(yc.jsx)("option",{value:"1",children:"Efectivo"}),Object(yc.jsx)("option",{value:"2",children:"Tarjeta de debito"}),Object(yc.jsx)("option",{value:"3",children:"Tarjeta de credito"}),Object(yc.jsx)("option",{value:"4",children:"La marina"}),Object(yc.jsx)("option",{value:"5",children:"Cheque"}),Object(yc.jsx)("option",{value:"6",children:"Transferencia"}),Object(yc.jsx)("option",{value:"0",children:"Otro"})]})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Cantidad"}),Object(yc.jsx)("input",{type:"number",min:"0",className:"form-control text-right",name:"total",onChange:function(e){var t=e.target;return d(t)},autoFocus:!0})]})]}),1!==i.metodopago?Object(yc.jsxs)("div",{className:"row mb-2",children:[Object(yc.jsx)("div",{className:"col",children:4!==i.metodopago&&0!==i.metodopago?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("label",{children:"Banco"}),Object(yc.jsxs)("select",{name:"bank_id",className:"custom-select text-uppercase",onChange:function(e){var t=e.target;return d(t)},children:[Object(yc.jsx)("option",{value:"",children:"--Seleccione un banco--"}),n.map((function(e){return"bank"===e.name?Object(yc.jsx)("option",{value:e.id,children:e.data},e.id):null}))]})]}):i.metodopago?Object(yc.jsx)("h4",{className:"d-bloc text-center mt-4 text-success",children:"LA MARINA"}):Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("label",{children:"Espesifique"}),Object(yc.jsx)("input",{type:"text",name:"details",className:"form-control",onChange:function(e){var t=e.target;return d(t)}})]})}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:4!==i.metodopago?"Ultimos 4 digitos":"N. Autorizaci\xf3n"}),Object(yc.jsx)("input",{type:"number",name:"auth",className:"form-control",onChange:function(e){var t=e.target;return d(t)}})]})]}):null,t<i.total?Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("h4",{className:"text-center mt-4",children:1===i.metodopago?Object(yc.jsxs)(yc.Fragment,{children:["Cambio:",Object(yc.jsxs)("span",{className:"ml-2",children:["$ ",i.total-t]})]}):Object(yc.jsxs)("span",{className:"text-danger",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-2"}),"La cantidad cobrada es mayor al total"]})})})}):null]})}),Object(yc.jsxs)("div",{className:"modal-footer",children:[Object(yc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return a()},children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return u()},disabled:!i.total,children:[Object(yc.jsx)("i",{className:"fas fa-money-bill mr-1"}),"Abonar"]})]})]})})})};function Vr(e){var t=function(){var e=Object(me.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Nc("sales",null,{orderBy:"created_at",order:"desc",itemsPage:100}),e.next=4,gc(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc("sales",null,{orderBy:"created_at",order:"desc",itemsPage:25,search:t}),e.next=4,gc(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(me.a)(ue.a.mark((function e(t){var a,n,c,s;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payments.forEach((function(e){"string"===typeof e.id&&(e.id=0)})),delete(a=Object(o.a)({},t)).id,delete a.created_at,delete a.customer,e.prev=5,console.log("DATA A GUARDAR------",a),n=t.id,c=Nc("sales",n),s=n?"PUT":"POST",console.log(c),e.next=11,gc(c,s,a);case 11:return e.abrupt("return",e.sent);case 14:e.prev=14,e.t0=e.catch(5),console.error("[Orus System] Error in saga/sales handledSaveSale",e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}();return{getSaleList:t,getSaleById:a,saveSale:n}}function Rr(e){var t=e.payed,a=void 0===t?0:t,n=e.order,c=e.text,s=e.btn,r=void 0===s?"primary":s,i=Gr(),l=Vr(),d=Object(xc.useContext)(wc).auth,u={id:0,customer:{id:0,name:"venta de mostrador"},contact_id:2,items:[],session:pn.getSession(),discount:0,subtotal:0,total:0,payments:[],branch_id:d.branch.id},j=i.items,b=i.discount,m=i.total,h=void 0===m?0:m,x=i.created_at,O=i.id,p=i.customer,f=i.payments,v=h-a,g=d.branch,N=0===i.discount?pn.getPagado(i.payments):pn.getPagado(i.payments)+i.discount,y=i.total<=N,w=0,C=function(){l.saveSale(i).then((function(e){e.data?(i.set(Object(o.a)(Object(o.a)({},i),{},{id:e.data.id})),window.Swal.fire({title:"Venta Guardada",text:"\xbfQuieres imprimir el ticket de la venta?",icon:"question",showCancelButton:!0,confirmButtonText:"Imprimir",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss?pn.confirm("Cerrar la venta actual",(function(){i.set(u)})):setTimeout(S,1e3)}))):console.error("")}))},S=function(){if("/notas"!==window.location.pathname)return!1;window.print()},_=function(){i.set(u)};return Object(xc.useEffect)((function(){return y&&i.subtotal?i.id?null:void C():null}),[y,i.total]),Object(xc.useEffect)((function(){return window.addEventListener("afterprint",(function(){_()})),function(){window.removeEventListener("afterprint",(function(){_()}))}}),[]),Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("button",{className:"btn btn-".concat(r," ml-2 d-print-none"),disabled:!f.length,onClick:C,children:[Object(yc.jsx)("i",{className:c?"fas fa-print mr-1":"fas fa-print"}),c]}),Object(yc.jsxs)("div",{className:"d-none d-print-block fixed-top bg-white",style:{maxWidth:380},id:"print_sale_"+O,children:[Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("div",{className:"card m-0",children:Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("h4",{className:"text-right",style:{fontSize:28,fontFamily:"sans-serif"},children:Object(yc.jsxs)("i",{children:[n?"Pedido":"Nota",":"," ",Object(yc.jsx)("strong",{children:n||O})]})}),Object(yc.jsx)("h6",{className:"text-right mb-2",style:{fontSize:18,fontFamily:"sans-serif"},children:Object(yc.jsx)("strong",{children:_c()(x).format("LL")})}),Object(yc.jsx)("h2",{className:"text-center",style:{fontSize:54,fontFamily:"sans-serif"},children:Object(yc.jsx)("center",{children:Object(yc.jsx)("strong",{children:"\xd3ptica Madero"})})}),Object(yc.jsx)("h4",{className:"text-center mb-4",style:{fontSize:22,fontFamily:"sans-serif"},children:Object(yc.jsxs)("em",{children:["Julio Cesar Cardenas Martinez",Object(yc.jsx)("br",{}),Object(yc.jsxs)("span",{className:"text-capitalize",children:["sucursal: ",g.name]}),Object(yc.jsx)("br",{}),Object(yc.jsxs)("span",{children:["Tel: ",g.phone]}),Object(yc.jsx)("br",{}),Object(yc.jsx)("span",{className:"text-capitalize",children:g.address})]})}),Object(yc.jsxs)("h4",{className:"text-uppercase text-center mb-1",style:{fontSize:20,fontFamily:"sans-serif"},children:[p&&p.name?p.name:"Venta de mostrador",Object(yc.jsx)("br",{}),Object(yc.jsx)("strong",{children:Object(yc.jsx)("em",{style:{fontSize:24},children:p&&p.telefonos?p.telefonos.t_movil?p.telefonos.t_movil:p.telefonos.t_casa?p.telefonos.t_casa:p.telefonos.t_oficina:"--"})})]})]})})})}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col text-center",children:Object(yc.jsx)("h2",{style:{fontSize:36,fontFamily:"sans-serif"},children:Object(yc.jsx)("strong",{children:"Pedido"})})})}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("table",{className:"table",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{style:{fontSize:26,fontFamily:"sans-serif"},children:"Cant"}),Object(yc.jsx)("th",{style:{fontSize:26,fontFamily:"sans-serif"},children:"Descripcion"}),Object(yc.jsx)("th",{style:{fontSize:26,fontFamily:"sans-serif"},children:"Total"})]})}),Object(yc.jsx)("tbody",{children:j.map((function(e,t){var a=parseFloat(e.cant*e.price);return w+=a,Object(yc.jsxs)("tr",{className:"text-capitalize",children:[Object(yc.jsx)("td",{style:{fontSize:22,fontFamily:"sans-serif"},children:e.cant}),Object(yc.jsx)("td",{style:{fontSize:22,fontFamily:"sans-serif"},children:e.producto}),Object(yc.jsx)("td",{className:"text-right",style:{fontSize:24,fontFamily:"sans-serif"},children:a})]},t)}))}),Object(yc.jsx)("tfoot",{children:Object(yc.jsx)("tr",{children:Object(yc.jsxs)("td",{className:"text-right",colSpan:"3",children:[b?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Subtotal: ",Object(yc.jsxs)("label",{children:["$ ",w]})]}),Object(yc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Descuento: ",Object(yc.jsxs)("label",{children:["$ ",b]})]})]}):null,Object(yc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Total: ",Object(yc.jsxs)("label",{children:["$ ",h]})]}),a?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Abonado: ",Object(yc.jsxs)("label",{children:["$ ",a]})]}),v?Object(yc.jsxs)("h4",{style:{fontSize:26,fontFamily:"sans-serif"},children:["Saldo: ",Object(yc.jsxs)("label",{children:["$ ",v]})]}):Object(yc.jsx)("div",{className:"text-center d-block w-100 my-3",children:Object(yc.jsx)("h3",{className:"text-muted text-bold",children:"::: Cuenta Pagada :::"})})]}):null]})})})]})})}),Object(yc.jsx)("div",{className:"text-justify text-lg",children:Object(yc.jsxs)("ul",{className:"d-block",style:{fontFamily:"sans-serif"},children:[Object(yc.jsx)("li",{children:"Armazones usados, viejos y/o resecos son responsabilidad del cliente"}),Object(yc.jsx)("li",{children:"Armazones reparados por el cliente pierden garantia de proovedor"})]})})]})]})}function Yr(e){var t=e.nota,a=e.orderId,n=Object(xc.useState)({showPayment:!1,totalPayments:0,toPaid:0}),c=Object(hc.a)(n,2),r=c[0],i=c[1],l=Object(s.c)(),d=Object(s.d)((function(e){return e.sales})).sale;return Object(xc.useEffect)((function(){if(d.id){var e=0;d.payments.forEach((function(t){return e+=parseInt(t.total)})),i(Object(o.a)(Object(o.a)({},r),{},{totalPayments:e,toPaid:parseInt(d.total)-e}))}else(a=t.id)&&l(Nn.getSale(a));var a}),[d]),Object(xc.useEffect)((function(){return function(){l(Nn.setSale())}}),[]),d&&d.id?Object(yc.jsx)("div",{className:"card",children:Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsxs)("div",{className:"row d-print-none",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Nota:"})," ",d.id]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Total:"})," $",d.subtotal]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Abonado:"})," $",r.totalPayments]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Por pagar:"})," ",Object(yc.jsxs)("span",{className:"text-success text-bold",children:["$",r.toPaid>=0?r.toPaid:0]})]})]}),Object(yc.jsx)("div",{className:"row d-print-none",children:Object(yc.jsx)("div",{className:"col table-responsive",children:Object(yc.jsxs)("table",{className:"table table-sm",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"Folio"}),Object(yc.jsx)("th",{children:"Metodo"}),Object(yc.jsx)("th",{children:"Total"}),Object(yc.jsx)("th",{children:"Fecha"}),Object(yc.jsx)("th",{children:"Recibio"}),Object(yc.jsx)("th",{style:{width:16},children:Object(yc.jsx)("span",{className:"sr-only",children:"DELETE"})})]})}),Object(yc.jsx)("tbody",{children:d.payments.map((function(e){return Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:e.id}),Object(yc.jsx)("td",{className:"text-uppercase",children:e.metodoname}),Object(yc.jsxs)("td",{children:["$",e.total]}),Object(yc.jsx)("td",{children:e.created_at}),Object(yc.jsx)("td",{children:e.created.name}),Object(yc.jsx)("td",{children:Object(yc.jsx)("button",{type:"button",className:"btn btn-default",onClick:function(){return function(e){var t=e.id,a=e.total,n=e.metodoname;pn.confirm("Realmente desea eliminar el pago ".concat(n,", de ").concat(a),(function(){l(Nn.deletePayment({id:t,sale_id:d.id}))}))}(e)},children:Object(yc.jsx)("i",{className:"fas fa-trash"})})})]},e.id)}))})]})})}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col text-right",children:Object(yc.jsxs)("div",{className:"btn-group",children:[Object(yc.jsx)(Rr,{sale:d,order:a,payed:r.totalPayments,text:"Imprimir",btn:"default"}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-primary d-print-none",disabled:!r.toPaid,onClick:function(){i(Object(o.a)(Object(o.a)({},r),{},{showPayment:!0}))},children:[Object(yc.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar"]})]})})}),r.showPayment&&Object(yc.jsx)(Ur,{handleClose:function(){i(Object(o.a)(Object(o.a)({},r),{},{showPayment:!1}))},sale:Object(o.a)(Object(o.a)({},d),{},{contact_id:d.customer.id}),forPaid:r.toPaid})]})}):Object(yc.jsxs)("span",{className:"d-block text-center text-dark my-4",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Sin datos de ventas"]})}var qr=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(e){var n;return Object(Qs.a)(this,a),(n=t.call(this,e)).getOrderData=function(){var e,t=n.props.order;n.setState(Object(o.a)(Object(o.a)({},t),{},{lab_id:null!==(e=t.laboratorio&&t.laboratorio.id)&&void 0!==e?e:0}))},n.handleDeleteOrder=function(){var e=n.props,t=e.order,a=e.options,c=e._deleteOrder;Ds.handleDeleteOrder(t,a,c)},n.handleClose=function(e){var t=n.props._setOrder;e&&e.preventDefault(),t(),n.props.handleChangePanel(null,0)},n.handleChangeInput=function(e,t){n.setState(Object(N.a)({},e,t))},n.handleSave=function(){var e=n.state,t=e.id,a=e.npedidolab,c=e.ncaja,s=e.status,r=e.lab_id,i=e.observaciones,l=e.items,d=n.props,u=d.options,j=d._saveOrder,b=d.currentUser,m=l.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{cant:e.cantidad,price:e.precio})})),h={npedidolab:a,ncaja:c,status:s,observaciones:i,items:JSON.stringify(m),branch_id:b.branch.id};return r&&(h.lab_id=r),1===s&&!r&&toString(a).length?(window.Swal.fire("Verificaci\xf3n","Los campos de laboratorio estan vacios","error"),!1):2!==s||c?void Ds.handleSaveOrder(t,h,u,j):(window.Swal.fire("Verificaci\xf3n","El numero de caja esta vacio","error"),!1)},n.state={id:0,paciente:{},session:null,lab_id:0,npedidolab:"",observaciones:"",ncaja:0,items:[],exam:{},codes:{},status:0,created:{},created_at:null,updated:{},updated_at:null},n}return Object(Xs.a)(a,[{key:"componentDidMount",value:function(){this.getOrderData()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.order;e.order.id!==a.id&&a.id&&this.getOrderData()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e._setOrder,a=e._setSale;t(qe.order),a(fn.sale)}},{key:"render",value:function(){var e,t,a=this,n=this.state,c=n.id,s=n.paciente,r=n.session,i=n.lab_id,o=n.npedidolab,l=n.ncaja,d=n.observaciones,u=n.items,j=n.exam,b=void 0===j?{}:j,m=n.codes,h=n.status,x=n.created,O=n.created_at,p=n.updated,f=n.updated_at,v=this.props,g=v.order,N=v.loading,y=new Date(null!==(e=s.f_nacimiento)&&void 0!==e?e:"")<new Date?_c()(s.f_nacimiento):null,w=Object.values(null!==(t=s.telefonos)&&void 0!==t?t:{}).filter((function(e){return""!==e}));return Object(yc.jsx)(yc.Fragment,{children:!N&&g?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("div",{className:"card card-warning card-outline d-print-none",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h3",{className:"card-title",children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-clipboard-list"}),"Pedido",Object(yc.jsx)("span",{className:"ml-1 badge badge-pill badge-warning",children:c})]})}),Object(yc.jsx)("div",{className:"p-0 card-body",children:Object(yc.jsxs)("div",{className:"mailbox-read-info",children:[Object(yc.jsxs)("h5",{children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-user"}),Object(yc.jsx)("span",{className:"text-capitalize",children:s.nombre}),"admin"===this.props.role?Object(yc.jsxs)("span",{className:"float-right mailbox-read-time",children:["Fecha de nacimiento:"," ",y?Object(yc.jsxs)(yc.Fragment,{children:[y.format("LL"),Object(yc.jsxs)("label",{className:"ml-1",children:["(",_c()().diff(y,"years")," a\xf1os)"]})]}):"NO REGISTRADO"]}):null]}),Object(yc.jsxs)("h6",{children:[s.email?Object(yc.jsxs)("span",{children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-envelope"}),s.email]}):null,Object(yc.jsxs)("span",{className:"float-right mailbox-read-time",children:["Pedido registrado ",_c()(O).fromNow()]})]}),w.length?Object(yc.jsxs)("h6",{children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-phone"}),Object(yc.jsx)("span",{className:"mx-1",children:w.map((function(e,t){return t?", ".concat(e):"".concat(e)}))})]}):null]})}),Object(yc.jsx)("div",{className:"card-footer",children:Object(yc.jsx)("div",{className:"text-right mailbox-controls",children:Object(yc.jsxs)("div",{className:"btn-group",children:[Object(yc.jsxs)("a",{href:"#close",className:"btn btn-secondary btn-sm",onClick:function(e){return a.handleClose(e)},children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-ban"}),"Cerrar"]}),Object(yc.jsxs)("button",{className:"btn btn-warning btn-sm",onClick:this.handleSave,children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-save"})," Guardar"]})]})})}),N?Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]}),Object(yc.jsxs)("div",{className:"row mt-4",children:[Object(yc.jsxs)("div",{className:"col-lg-4 col-md-6 col-sm-12 d-print-none",children:[Object(yc.jsx)("h6",{className:"w-100 d-block",children:"Acciones"}),Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsx)("div",{className:"text-center mailbox-controls with-border",children:Object(yc.jsxs)("div",{className:"btn-group",children:[g.nota&&!g.nota.id?Object(yc.jsx)("button",{type:"button",className:"btn btn-default btn-sm",title:"Eliminar",onClick:this.handleDeleteOrder,children:Object(yc.jsx)("i",{className:"far fa-trash-alt"})}):null,s.telefonos&&s.telefonos.t_movil?Object(yc.jsx)("a",{href:"https://wa.me/52"+s.telefonos.t_movil.replace(" ",""),className:"btn btn-default btn-sm",title:"Abrir WhatsApp",target:"_blank",rel:"noopener noreferrer",children:Object(yc.jsx)("i",{className:"fas fa-mobile-alt"})}):null,s.email&&Object(yc.jsx)("a",{href:"mailto:"+s.email,className:"btn btn-default btn-sm",title:"Enviar e-mail",target:"_blank",rel:"noopener noreferrer",children:Object(yc.jsx)("i",{className:"fas fa-at"})})]})}),N?Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]}),Object(yc.jsx)("h6",{className:"w-100 d-block",children:"Estado"}),Object(yc.jsxs)("div",{className:"card mt-2",children:[Object(yc.jsx)("div",{className:"btn-group-vertical",children:Ds.getStatusType.map((function(e,t){return Object(yc.jsx)("button",{type:"button",className:h===t?"btn btn-primary btn-sm text-capitalize text-bold":"btn btn-default btn-sm text-capitalize",onClick:function(e){a.setState({status:t})},children:e},t)}))}),N?Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})]}),Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"card h-100 m-0",children:[Object(yc.jsx)("div",{className:"card-header d-print-none",children:Object(yc.jsxs)("h5",{className:"card-title w-100 d-block mb-2 text-capitalize text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-shield-alt mr-1"}),Ds.handleStatusString(h)]})}),Object(yc.jsx)("div",{className:"card-body p-0",children:Object(yc.jsxs)("div",{className:"p-0 mailbox-read-message m-0",children:[0===h?Object(yc.jsx)(Tr,{items:u,codes:m,session:r,noPrice:!0,ChangeInput:this.handleChangeInput}):null,1===h?Object(yc.jsx)(Br,{lab_id:i,npedidolab:o,status:h,handleChange:this.handleChangeInput}):null,2===h?Object(yc.jsx)(Fr,{ncaja:l,observaciones:d,status:h,handleChange:this.handleChangeInput}):null,h>=3?Object(yc.jsxs)("div",{className:"px-2",children:[Object(yc.jsx)("div",{className:"my-2 border rounded card border-warning d-print-none",children:Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("h5",{className:"card-title",children:"Estado de la entrega"}),Object(yc.jsxs)("div",{className:"ml-1 icheck-success d-inline",children:[Object(yc.jsx)("input",{type:"checkbox",checked:3!==h,id:"checkboxSuccess1",onChange:function(e){return a.handleChangeInput("status",3===h?4:3)}}),Object(yc.jsx)("label",{htmlFor:"checkboxSuccess1"})]})]})}),g&&g.id?Object(yc.jsx)(Yr,{nota:g.nota,orderId:g.id}):null]}):null]})}),N?Object(yc.jsx)("div",{className:"overlay dark d-print-none",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})})]}),Object(yc.jsxs)("div",{className:"row mt-4 d-print-none",children:[b&&b.id?Object(yc.jsxs)("div",{className:"col pt-6",children:[Object(yc.jsx)("h6",{className:"w-100 d-block",children:"Examen"}),Object(yc.jsx)("div",{className:"card mt-2",children:Object(yc.jsx)("div",{className:"card-body",children:Object(yc.jsx)("div",{className:"p-0 mailbox-read-message",children:Object(yc.jsx)(Cr,{id:b.id,examEdit:!1,exam:b})})})})]}):null,Object(yc.jsxs)("div",{className:"col-".concat(b&&b.id?3:12," pt-6"),children:[Object(yc.jsx)("h6",{className:"w-100 d-block",children:"Meta data"}),Object(yc.jsx)(Es,{register:null!==O&&void 0!==O?O:"",created:x?x.name:"",updated:p?p.name:"",updated_at:null!==f&&void 0!==f?f:""})]})]})]}):null})}}]),a}(xc.Component),$r={_saveOrder:Ze.saveOrder,_deleteOrder:Ze.deleteOrder,_setOrder:Ze.setOrder,_setSale:Nn.setSale},Jr=Object(s.b)((function(e){var t=e.order,a=e.users;return{order:t.order,role:a.dataLoggin.roles[0],currentUser:a.dataLoggin,options:t.options,loading:t.loading}}),$r)(qr),Hr=(a(172),function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(e){var n;Object(Qs.a)(this,a),(n=t.call(this,e)).handleMessege=function(e){var t=e.target,a=t.value,c=t.name;n.setState(Object(N.a)({},c,a.toLowerCase()))},n.sendMessenger=Object(me.a)(ue.a.mark((function e(){var t,a,c,s,r,i,o;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.table,c=t.idRow,s=n.state,r=s.message,s.load||n.setState({load:!0}),i=Oe("messengers",null),o={table:a,idRow:c,message:r},e.next=7,he(i,"POST",o,null);case 7:e.sent?n.getMessengers():(window.alert("Ups!\n Algo salio mal, intentelo mas tarde."),n.setState({load:!1}));case 9:case"end":return e.stop()}}),e)}))),n.getMessengers=Object(me.a)(ue.a.mark((function e(){var t,a,c,s,r,i,o,l;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.load,a=n.props,c=a.table,s=a.idRow,r=Oe("messengers",null,{table:c,idRow:s,page:1}),t||n.setState({load:!0}),e.next=7,he(r);case 7:i=e.sent,o=i.data,l=i.message,o?n.setState({messages:o,message:"",load:!1}):l&&(window.alert("Ups!\n Algo salio mal, intentelo mas tarde."),n.setState({load:!1}));case 11:case"end":return e.stop()}}),e)})));var c=JSON.parse(localStorage.getItem("OrusSystem"));return n.state={messages:[],message:"",load:!0,host:c.host,token:c.token,user:c.idUser},n}return Object(Xs.a)(a,[{key:"componentDidMount",value:function(){this.getMessengers()}},{key:"componentDidUpdate",value:function(e,t){e.pagado!==this.props.pagado&&this.getMessengers()}},{key:"render",value:function(){var e=this.state,t=e.messages,a=e.load,n=e.message,c=e.user,s=this.props.idRow;return Object(yc.jsxs)("div",{className:"card direct-chat direct-chat-primary d-print-none",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h3",{className:"card-title",children:[Object(yc.jsx)("i",{className:"fas fa-comments mr-1"}),"Chat",Object(yc.jsx)("span",{className:"badge badge-pill badge-secondary ml-1",children:s})]})}),a?Object(yc.jsx)("div",{className:"card-body",children:Object(yc.jsx)("div",{className:"card-text text-center p-4",children:Object(yc.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(yc.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):t.length?Object(yc.jsx)(Oc.a.Fragment,{children:Object(yc.jsx)("div",{className:"card-body",children:Object(yc.jsx)("div",{className:"direct-chat-messages",id:"boxchat",children:t.map((function(e){var t="/img/avatars/avatar5.png";return 1===e.created_user.rol&&(t="/img/avatars/avatar2.png"),e.created_user.rol||(t="/img/avatars/avatar3.png"),2===e.created_user.id&&(t="/img/avatars/avatar4.png"),Object(yc.jsxs)("div",{className:e.created_user.id===c?"direct-chat-msg right":"direct-chat-msg",children:[Object(yc.jsxs)("div",{className:"direct-chat-infos clearfix",children:[Object(yc.jsx)("span",{className:e.created_user.id===c?"direct-chat-name float-right":"direct-chat-name float-left",children:e.created_user.name}),Object(yc.jsx)("span",{className:e.created_user.id===c?"direct-chat-timestamp float-left":"direct-chat-timestamp float-right",children:_c()(e.updated_at).format("lll")})]}),Object(yc.jsx)("img",{className:"direct-chat-img",src:1===e.created_user.id?"/img/avatars/OrusBot.png":t,alt:"message user image1"}),Object(yc.jsx)("div",{className:"direct-chat-text",children:e.mensaje})]},e.id)}))})})}):Object(yc.jsx)("div",{className:"card-body",children:Object(yc.jsx)("div",{className:"card-text text-center p-4",children:Object(yc.jsxs)("h5",{children:[Object(yc.jsx)("i",{className:"fas fa-comment-slash mr-1"}),"No hay mensajes aun"]})})}),Object(yc.jsx)("div",{className:"card-footer",children:Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("input",{type:"text",name:"message",placeholder:"Escriba un mensaje ...",className:"form-control",value:n,onChange:this.handleMessege}),Object(yc.jsx)("span",{className:"input-group-append",children:Object(yc.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.sendMessenger,disabled:!(n.length>5),children:"Enviar"})})]})})]})}}]),a}(xc.Component)),Zr=Object(s.b)((function(e){return{mainRole:e.users.dataLoggin.roles[0]}}),{})(Hr);var Kr={_getContact:wa.getContact,_setContact:wa.setContact,_getExam:Ha.getExam,_setExam:Ha.setExam},Qr=Object(s.b)((function(e){var t=e.contact,a=e.exam;return{contact:t.contact,exam:a.exam}}),Kr)((function(e){var t=e._getContact,a=e._getExam,n=e._setContact,c=e._setExam,s=e.handleChangePanel,r=Object(xc.useState)([]),i=Object(hc.a)(r,2),o=i[0],l=i[1],d=Object(xc.useState)(!0),u=Object(hc.a)(d,2),j=u[0],b=u[1],m=Object(xc.useState)(0),h=Object(hc.a)(m,2),x=h[0],O=h[1];return Object(xc.useEffect)((function(){j&&(l(Ds.getDataTemporary(!0)),b(!1),n(),c())}),[j]),Object(yc.jsx)(Hc,{title:"Examenes sin orden",icon:"notes-medical",color:"info",itemSelected:x,handleDeleteItem:function(){Ds.removeDataTemporary(x.id,(function(){return b(!0)})),O(0)},handleEditItem:function(){x.contact.id&&t(x.contact.id),x.exam_id&&a(x.exam_id),O(0),s(null,2)},children:Object(yc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{}),Object(yc.jsx)("th",{children:"Paciente"}),Object(yc.jsx)("th",{children:"Examen"}),Object(yc.jsx)("th",{children:"Productos"}),Object(yc.jsx)("th",{children:"Session"}),Object(yc.jsx)("th",{children:"Creado"})]})}),Object(yc.jsx)("tbody",{children:o.map((function(e,n){return Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("td",{children:Object(yc.jsxs)("div",{className:"icheck-primary",children:[Object(yc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",id:"exam_"+e.id,checked:e.id===x.id,onChange:function(t){return function(e,t){e.checked||(t={id:0}),O(t)}(t.target,e)}}),Object(yc.jsx)("label",{htmlFor:"exam_"+e.id,className:"sr-only"})]})}),Object(yc.jsx)("th",{className:"text-truncate",children:Object(yc.jsx)("a",{href:"#select",onClick:function(n){return function(e,n){e.preventDefault(),n.contact.id&&t(n.contact.id),n.exam_id&&a(n.exam_id),O(0),s(null,2)}(n,e)},children:Object(yc.jsx)("span",{className:"text-capitalize",children:e.contact.name})})}),Object(yc.jsxs)("td",{children:["# ",e.exam_id]}),Object(yc.jsx)("td",{className:"text-right",children:Object(yc.jsx)("span",{className:"badge badge-dark",children:e.items.length})}),Object(yc.jsx)("td",{style:{maxWidth:"250px"},children:Object(yc.jsx)("p",{className:"text-truncate",children:Object(yc.jsx)("span",{children:e.session})})}),Object(yc.jsx)("td",{children:_c()(e.created_at).fromNow()})]},n)}))})]})})}));function Xr(e){e.handleChangePanel;var t=Object(s.d)((function(e){return e.order})),a=t.list,n=t.metaList,c=t.loading,r=Object(s.c)(),i=Object(xc.useState)({page:1,orderby:"created_at",order:"desc",status:0,itemsPage:1}),l=Object(hc.a)(i,2),d=l[0],u=l[1],j=Object(xc.useState)({lab_id:null,npedidolab:null,ncaja:null,observaciones:null,status:0}),b=Object(hc.a)(j,2),m=b[0],h=b[1],x=function(e){u(Object(o.a)(Object(o.a)({},d),{},{page:e}))},O=function(e,t){e&&h(Object(o.a)(Object(o.a)({},m),{},Object(N.a)({},e,t)))};return Object(xc.useEffect)((function(){return r(Ze.getListOrder(d)),function(){r(Ze.setListOrder())}}),[d]),Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsxs)("div",{className:"card-header",children:[Object(yc.jsx)("i",{className:"fas fa-folder-open mr-1"}),Object(yc.jsx)("label",{children:"Reporte de pedidos"})]}),Object(yc.jsx)("div",{className:"card-body",children:Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col table-responsive",children:a.map((function(e){var t,a,c,s,i,o,l,u,j,b,h,p,f,v,g,N,y;return Object(yc.jsxs)("div",{children:[Object(yc.jsxs)("table",{className:"table table-striped",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"Order"}),Object(yc.jsx)("th",{children:"Paciente"}),Object(yc.jsx)("th",{children:"Creado"}),Object(yc.jsx)("th",{children:"Realizo"})]})}),Object(yc.jsx)("tbody",{children:Object(yc.jsxs)("tr",{className:"text-capitalize",children:[Object(yc.jsx)("th",{children:e.id}),Object(yc.jsx)("td",{children:e.paciente.nombre.toLowerCase()}),Object(yc.jsx)("td",{children:_c()(e.created_at).fromNow()}),Object(yc.jsx)("td",{children:e.created.name.toLowerCase()})]})}),Object(yc.jsx)("tfoot",{children:Object(yc.jsx)("tr",{children:Object(yc.jsx)("td",{colSpan:"5",className:"text-center",children:Object(yc.jsx)(Jc,{meta:n,handlePagination:x})})})})]}),e.exam&&Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsxs)("h5",{className:"my-4",children:[Object(yc.jsx)("i",{className:"fas fa-notes-medical mr-1"}),"Examen"]}),Object(yc.jsx)(rr,{esferaod:null!==(t=e.exam.esferaod)&&void 0!==t?t:0,esferaoi:null!==(a=e.exam.esferaoi)&&void 0!==a?a:0,cilindrod:null!==(c=e.exam.cilindrod)&&void 0!==c?c:0,cilindroi:null!==(s=e.exam.cilindroi)&&void 0!==s?s:0,ejeod:null!==(i=e.exam.ejeod)&&void 0!==i?i:0,ejeoi:null!==(o=e.exam.ejeoi)&&void 0!==o?o:0,adiciond:null!==(l=e.exam.adiciond)&&void 0!==l?l:0,adicioni:null!==(u=e.exam.adicioni)&&void 0!==u?u:0,adicion_media_od:null!==(j=e.exam.adicion_media_od)&&void 0!==j?j:0,adicion_media_oi:null!==(b=e.exam.adicion_media_oi)&&void 0!==b?b:0,dpod:null!==(h=e.exam.dpod)&&void 0!==h?h:0,dpoi:null!==(p=e.exam.dpoi)&&void 0!==p?p:0,alturaod:null!==(f=e.exam.alturaod)&&void 0!==f?f:0,alturaoi:null!==(v=e.exam.alturaoi)&&void 0!==v?v:0,lcmarca:null!==(g=e.exam.lcmarca)&&void 0!==g?g:0,lcgod:null!==(N=e.exam.lcgod)&&void 0!==N?N:0,lcgoi:null!==(y=e.exam.lcgoi)&&void 0!==y?y:0,showContactGlasses:!1,readOnly:!0})]}),Object(yc.jsxs)("h5",{className:"my-4",children:[Object(yc.jsx)("i",{className:"fas fa-clipboard-list mr-1"}),"Productos"]}),Object(yc.jsxs)("table",{className:"table table-striped",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"Producto"}),Object(yc.jsx)("th",{children:"Cantidad"})]})}),Object(yc.jsx)("tbody",{children:e.items.map((function(e){return Object(yc.jsxs)("tr",{className:"text-capitalize",children:[Object(yc.jsx)("td",{children:e.producto.toLowerCase()}),Object(yc.jsx)("td",{children:e.cantidad})]},e.id)}))})]}),Object(yc.jsxs)("h5",{className:"my-4",children:[Object(yc.jsx)("i",{className:"fas fa-cog mr-1"}),"Proceso"]}),Object(yc.jsxs)("div",{className:"my-4 py-4",children:[Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{htmlFor:"status",children:"\xbfCual es la siguiente accion de este pedido?"}),Object(yc.jsxs)("select",{id:"status",className:"form-control",defaultValue:e.status,onChange:function(e){var t=e.target.value;O("status",parseInt(t))},children:[Object(yc.jsx)("option",{children:"-- Seleccione primero una accion --"}),Object(yc.jsx)("option",{value:"1",children:"Laboratorio"}),Object(yc.jsx)("option",{value:"2",children:"Bicelaci\xf3n"})]})]})})}),Object(yc.jsxs)("div",{className:"row",children:[1===m.status?Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("h5",{children:"Laboratorio"}),Object(yc.jsx)(Br,{lab_id:m.lab_id,npedidolab:m.npedidolab,handleChange:O})]}):null,2===m.status?Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("h5",{children:"Bicelaci\xf3n"}),Object(yc.jsx)(Fr,{ncaja:m.ncaja,observaciones:m.observaciones,handleChange:O})]}):null]})]}),Object(yc.jsx)("div",{className:"text-center mt-4",children:Object(yc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return function(e){if(!m.status)return window.Swal.fire({title:"Verificacion",text:"Seleccione una accion, antes de guardar",icon:"warning"}),!1;if(1===m.status){if(!m.lab_id)return window.Swal.fire({title:"Verificacion",text:"Seleccione un laboratorio",icon:"warning"}),!1;if(!m.npedidolab)return window.Swal.fire({title:"Verificacion",text:"Escriba el folio del laboratorio",icon:"warning"}),!1}if(2===m.status&&!m.ncaja)return window.Swal.fire({title:"Verificacion",text:"Escriba el numero de la caja de bicelaci\xf3n",icon:"warning"}),!1;e.id?Ds.handleSaveOrder(e.id,m,d,(function(e){return r(Ze.saveOrder(e))})):console.error("[error] Se perdio el identificador del pedido",e.id)}(e)},children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"}),"Actualizar pedido"]})})]},e.id)}))})})}),c&&Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})})]})}var Wr=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(e){var n;return Object(Qs.a)(this,a),(n=t.call(this,e)).handleShowReport=function(e){(0,n.props._setList)(),n.handleShowPanel(e,4)},n.showPanel=function(e){switch(e){case 1:return Object(yc.jsx)(Qr,{handleChangePanel:n.handleShowPanel});case 2:return Object(yc.jsx)(Ar,{handleClose:function(){return n.handleChangeInput("panel",0)}});case 3:return Object(yc.jsx)(Jr,{handleChangePanel:n.handleShowPanel});case 4:return Object(yc.jsx)(Xr,{handleChangePanel:n.handleShowPanel});default:return Object(yc.jsx)(yr,{handleChangePanel:n.handleShowPanel})}},n.handleSetSelectOptions=function(e){var t=e.target,a=n.props._setOptions,c=t.value,s=t.name,r=c;"itemsPage"===s&&(r=parseInt(r)),"status"===s&&""!==r&&(r=parseInt(r)),a({key:s,value:r})},n.handleChangeInput=function(e,t){n.setState(Object(N.a)({},e,t))},n.handleShowPanel=function(e,t){e&&e.preventDefault(),n.handleChangeInput("panel",t)},n.state={panel:null,idOrder:0},n}return Object(Xs.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e._getOrder,n=e._setPageName,c=t.params.id;c&&!isNaN(c)?(console.log("[OrusSystem] cargando orden al inicio: ",c),a(c),this.setState({panel:3})):"reporte"===c&&this.setState({panel:4,idOrder:c}),n("pedidos")}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.order,c=a.history,s=a.messages,r=a._setContact,i=this.state.panel;if(t.panel!==i)switch(i){case 1:c.push("/pedidos/pending");break;case 2:c.push("/pedidos/new");break;case 3:r(),n.id&&c.push("/pedidos/".concat(n.id));break;case 4:c.push("/pedidos/reporte");break;default:c.push("/pedidos")}e.messages.length!==s.length&&s.length&&(s.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})})),i&&4!==i&&this.setState({panel:0}))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e._setList,a=e._setSales,n=e._setOrder;console.log("[Orus Systme] Cerrando pedido"),t(),a({result:fn}),n()}},{key:"render",value:function(){var e=this,t=this.state.panel,a=this.props,n=a.order,c=a.options,s=a.mainRole,r=this.showPanel(t);return Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-md-2 col-sm-12 d-print-none",children:[Object(yc.jsxs)("a",{href:"#new",className:2===t?"disabled mb-3 btn btn-secondary btn-block":"mb-3 btn btn-warning btn-block",onClick:function(t){t.preventDefault(),e.handleShowPanel(t,2)},disabled:2===t,children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-plus"}),"Pedido nuevo"]}),Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h5",{className:"card-title text-dark",children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-ellipsis-v"}),"Menu y filtros"]})}),Object(yc.jsx)("div",{className:"p-0 card-body",children:Object(yc.jsxs)("ul",{className:"nav nav-pills flex-column",children:[Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:1===t?"nav-link active":"nav-link",onClick:function(t){t.preventDefault(),e.handleShowPanel(t,1)},children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-notes-medical"})," Pendientes"]})}),Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:t?"nav-link":"nav-link active",onClick:function(t){return e.handleShowPanel(t,0)},children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-clipboard-list"})," Pedidos"]})}),"admin"===s?Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:4===t?"nav-link active":"nav-link",onClick:this.handleShowReport,children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-folder-open"})," Reporte"]})}):null,t?null:Object(yc.jsxs)(xc.Fragment,{children:[Object(yc.jsx)("li",{className:"nav-item",children:"\xa0"}),Object(yc.jsxs)("li",{className:"p-2 nav-item",children:[Object(yc.jsx)("label",{htmlFor:"status",children:"Estado del pedido"}),Object(yc.jsxs)("select",{className:"form-control ",name:"status",id:"status",value:c.status,onChange:this.handleSetSelectOptions,children:[Object(yc.jsx)("option",{value:"",children:"-- Todos --"}),Object(yc.jsx)("option",{value:"0",children:"En proceso"}),Object(yc.jsx)("option",{value:"1",children:"Laboratorio"}),Object(yc.jsx)("option",{value:"2",children:"Bicelaci\xf3n"}),Object(yc.jsx)("option",{value:"3",children:"Terminado"}),Object(yc.jsx)("option",{value:"4",children:"Entregado"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yc.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:c.orderby,onChange:this.handleSetSelectOptions,children:[Object(yc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yc.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:c.order,onChange:this.handleSetSelectOptions,children:[Object(yc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de pedidos"}),Object(yc.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:c.itemsPage,onChange:this.handleSetSelectOptions,children:[Object(yc.jsx)("option",{value:"10",children:"ver 10"}),Object(yc.jsx)("option",{value:"20",children:"ver 20"}),Object(yc.jsx)("option",{value:"50",children:"ver 50"}),Object(yc.jsx)("option",{value:"100",children:"ver 100"})]})]})]})]})})]}),3===t?Object(yc.jsx)(Zr,{table:"orders",idRow:n.id}):null]}),Object(yc.jsx)("div",{className:"col-md-10 col-sm-12",children:r})]})}}]),a}(xc.Component),ei={_getOrder:Ze.getOrder,_setOptions:Ze.setOptions,_setList:Ze.setListOrder,_setContact:wa.setContact,_setSales:Nn.setListSales,_setPageName:v.changeNamePage,_setOrder:Ze.setOrder},ti=Object(s.b)((function(e){var t=e.order,a=e.users;return{order:t.order,options:t.options,messages:t.messages,user:a.dataLoggin,mainRole:a.dataLoggin.roles[0]}}),ei)(Wr);var ai=function(e){var t=e.items,a=e.cantDefault,n=void 0===a?1:a,c=e.handleClose,s=e.handleSelect,r=Object(xc.useState)({item:null,cant:n,precio:0}),i=Object(hc.a)(r,2),l=i[0],d=i[1],u=l.precio<=0,j=function(){c&&c()},b=function(e){var t=e.name,a=e.value;d(Object(o.a)(Object(o.a)({},l),{},Object(N.a)({},t,parseInt(a))))};return Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsx)("h5",{className:"modal-title",children:"Seleccione un producto"}),Object(yc.jsx)("button",{type:"button",className:"close",onClick:j,children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsx)("div",{className:"modal-body p-2",children:Object(yc.jsx)("div",{className:"table-responsive overflow-auto",style:{height:"12rem"},children:l.item&&l.item.id?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("div",{className:"text-uppercase mb-4",children:l.item.producto}),Object(yc.jsxs)("div",{className:"form-group row",children:[Object(yc.jsx)("label",{className:"col-2 col-form-label",children:"Cantidad"}),n<2?Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("input",{type:"number",placeholder:"Cantidad",name:"cant",className:"form-control",defaultValue:l.cant,onChange:function(e){var t=e.target;return b(t)}})}):Object(yc.jsx)("span",{className:"col text-lg",children:l.cant}),Object(yc.jsx)("label",{className:"col-2 col-form-label",children:"Precio"}),l.item.precio?Object(yc.jsxs)("span",{className:"col text-lg",children:["$",l.precio]}):Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("input",{type:"number",placeholder:"Precio",name:"precio",className:"form-control",defaultValue:l.precio,onChange:function(e){var t=e.target;return b(t)}})})]})]}):Object(yc.jsx)("table",{className:"table table-sm",children:Object(yc.jsx)("tbody",{children:t?Object(yc.jsx)(yc.Fragment,{children:t.length?Object(yc.jsx)(yc.Fragment,{children:t.map((function(e){return Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("td",{className:"text-right",children:Object(yc.jsx)("span",{className:"badge badge-dark",children:e.code})}),Object(yc.jsx)("td",{className:"text-capitalize text-left",children:Object(yc.jsx)("a",{href:"#select",onClick:function(t){return function(e,t){e.preventDefault(),d(Object(o.a)(Object(o.a)({},l),{},{precio:t.precio,item:t}))}(t,e)},children:e.name})}),Object(yc.jsxs)("td",{children:["$",e.price]})]},e.id)}))}):Object(yc.jsx)("tr",{children:Object(yc.jsx)("td",{children:"No existen productos para esta coincidencia"})})}):Object(yc.jsx)("tr",{children:Object(yc.jsxs)("td",{children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"})," No se recibieron los productos"]})})})})})}),Object(yc.jsxs)("div",{className:"modal-footer",children:[Object(yc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:j,children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=Object(o.a)(Object(o.a)({},l),{},{item:Object(o.a)(Object(o.a)({},l.item),{},{precio:l.precio})});console.log("ITEM SELECCIONADO",l.item.precio),s(e),d({item:null,cant:1,precio:0}),j()},disabled:u,children:[Object(yc.jsx)("i",{className:"fas fa-check mr-1"}),"Seleccionar"]})]})]})})})};var ni=Object(s.b)((function(e){var t=e.storeItem;return{loading:t.loading,messages:t.messages}}))((function(e){var t=e.messages,a=e.loading,n=Object(xc.useState)(""),c=Object(hc.a)(n,2),s=c[0],r=c[1],i=Object(xc.useState)(!1),l=Object(hc.a)(i,2),d=l[0],u=l[1],j=Object(xc.useState)(1),b=Object(hc.a)(j,2),m=b[0],h=b[1],x=Object(xc.useState)([]),O=Object(hc.a)(x,2),p=O[0],f=O[1],v=Gr(),g=v.session,N=Xc(),y=function(){if(s.length>2){var e=s.split("*"),t=s;2===e.length&&(t=e[1],h(parseInt(e[0]))),N.getProducts(t).then((function(e){e?(console.log(e),f(e.data)):console.error("Error al buscar el producto")})),r("")}},w=function(e){return{id:0,cant:e.cant,price:parseFloat(e.item.price),subtotal:parseInt(e.cant)*parseFloat(e.item.price),inStorage:parseInt(e.item.cantidades)>=parseInt(e.cant),out:parseInt(e.item.cantidades)-parseInt(e.cant),cantInStore:parseInt(e.item.cantidades),session:g,store_items_id:e.item.id,descripcion:e.item.descripcion,producto:e.item.name.toLowerCase(),category:e.item.categoria?e.item.categoria.id:0}},C=function(e){var t=v.items.filter((function(t){return t.store_items_id===e.store_items_id})),a=v.items.filter((function(t){return t.store_items_id!==e.store_items_id}));if(t.length){var n=parseInt(e.cant)+parseInt(t[0].cant),c=Object(o.a)(Object(o.a)({},t[0]),{},{cant:n,subtotal:parseFloat(e.price)*n,inStorage:n>=parseInt(e.cantInStore),out:parseInt(e.cantInStore)-n});a.push(c)}else a.push(e);var s=pn.getSubTotal(a);v.set(Object(o.a)(Object(o.a)({},v),{},{items:a,total:pn.getTotal(s,v.discount),subtotal:s}))};return Object(xc.useEffect)((function(){if(p.length)if(1===p.length){var e=w({item:p[0],cant:m||1});e.price<=0?window.Swal.fire({title:"Verificar",text:"El item que intentas agregar tiene un precio de $0, revisa el precio en el almacen",icon:"warning",showCancelButton:!1,confirmButtonText:"Ok",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}):(C(e),h(1))}else u(!0);else!p.length&&t.length&&t.forEach((function(e){var t=e.type,a=e.text;window.Swal.fire({icon:t,title:a,showConfirmButton:"error"===t,timer:"error"!==t?1500:9e3})}))}),[p]),Object(yc.jsxs)("div",{className:"btn-group text-center d-print-none",children:[Object(yc.jsx)("input",{className:"form-control",placeholder:"Codigo",onChange:function(e){return function(e){var t=e.value;r(t)}(e.target)},onKeyPress:function(e){return function(e){"Enter"===e&&y()}(e.key)},value:s}),a?Object(yc.jsx)("i",{className:"fas fa-2x fa-spinner fa-spin"}):Object(yc.jsx)("button",{type:"button",className:"btn btn-primary",onClick:y,disabled:!(s.length>2),children:Object(yc.jsx)("i",{className:"fas fa-barcode"})}),d&&p.length?Object(yc.jsx)(ai,{items:p,cantDefault:m,handleClose:function(){u(!1)},handleSelect:function(e){var t=w(e);C(t),h(1)}}):null]})}));function ci(){var e=Gr(),t=pn.getPagado(e.payments),a=!(e.subtotal-t>0&&0===e.discount&&0===t);return Object(yc.jsx)("button",{className:"btn btn-primary mx-1",title:"Agregar descuento",onClick:function(){var t=window.prompt("Agregue el descuento a aplicar");if(null===t)return null;var a=0;if(e.items.forEach((function(e){return a+=e.subtotal})),t.match(/^[0-9]+$/gm)){var n=parseInt(t);e.set(Object(o.a)(Object(o.a)({},e),{},{discount:n})),console.log("Aplicando descuento")}else if(t.match(/^[0-9]{2,3}%$/gm)){var c=parseInt(t.replace("%",""))/100,s=parseInt(a*c);e.set(Object(o.a)(Object(o.a)({},e),{},{discount:s})),console.log("Aplicando descuento")}},disabled:a,children:Object(yc.jsx)("i",{className:"fas fa-percent"})})}var si=function(e){var t=e.handleClose,a=e.handleSelect,n=Vr(),c=Object(xc.useState)(""),s=Object(hc.a)(c,2),r=s[0],i=s[1],o=Object(xc.useState)([]),l=Object(hc.a)(o,2),d=l[0],u=l[1],j=Gr(),b=0!==d.length?d:0!==j.length?j:[],m=function(e){"Enter"===e&&h(r)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.length,n.getSaleById(e).then((function(e){e?u(e.data):console.error("Error al obtener la venta individual")}))};return Object(xc.useEffect)((function(){n.getSaleList().then((function(e){e?u(e.data):console.error("Error al obtener las ventas")}))}),[r]),Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsx)("h5",{className:"modal-title",children:"Seleccione una venta"}),Object(yc.jsx)("button",{type:"button",className:"close",onClick:function(){return t()},children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsxs)("div",{className:"modal-body p-2",children:[Object(yc.jsx)("div",{className:"w-full d-block mb-4",children:Object(yc.jsxs)("div",{className:"input-group",children:[Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Buscar por folio o nombre",onChange:function(e){return function(e){var t=e.value;i(t)}(e.target)},onKeyPress:function(e){var t=e.key;return m(t)}}),Object(yc.jsx)("button",{type:"button",className:"btn btn-default ml-1",onClick:function(){return m("Enter")},children:Object(yc.jsx)("i",{className:"fas fa-search"})})]})}),Object(yc.jsx)("div",{className:"table-responsive overflow-auto",style:{height:"12rem"},children:Object(yc.jsx)("table",{className:"table table-sm",children:Object(yc.jsx)("tbody",{children:b?Object(yc.jsx)(yc.Fragment,{children:b.length?Object(yc.jsx)(yc.Fragment,{children:b.map((function(e){return Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("td",{className:"text-right",children:Object(yc.jsx)("span",{className:"badge badge-dark",children:e.id})}),Object(yc.jsx)("td",{className:"text-capitalize text-left",children:Object(yc.jsx)("a",{href:"#select",onClick:function(t){return function(e,t){e&&e.preventDefault(),j.items.length?window.Swal.fire({title:"Ventas",text:"Si cargas una venta, se cerrar\xe1 la venta actual",icon:"question",showCancelButton:!0,confirmButtonText:"Cargar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){if(e.dismiss)return null;a(t)})):a(t)}(t,e)},children:e.customer?e.customer.name:"--"})}),Object(yc.jsx)("td",{className:"text-right",children:_c()(e.created_at).fromNow()})]},e.id)}))}):Object(yc.jsx)("tr",{children:Object(yc.jsx)("td",{children:"No existen ventas para esta coincidencia"})})}):Object(yc.jsx)("tr",{children:Object(yc.jsxs)("td",{children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"})," Escriba el folio o nombre para cargar una venta"]})})})})})]}),Object(yc.jsx)("div",{className:"modal-footer",children:Object(yc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return t()},children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]})})]})})})};function ri(){var e=Gr(),t=Object(xc.useState)(!1),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=!!e.items.length;return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("button",{className:"btn btn-primary mr-1",title:"Cargar una venta",onClick:function(){c(!0)},disabled:s,children:Object(yc.jsx)("i",{className:"fas fa-list"})}),n&&Object(yc.jsx)(si,{handleClose:function(){c(!1)},handleSelect:function(t){t.payments.forEach((function(e){return e.total})),c(!1),e.set({id:t.id,contact_id:t.customer.id,customer:t.customer,items:t.items,session:t.session,discount:t.discount,subtotal:t.subtotal,total:t.total,payments:t.payments,branch_id:t.branch.id,created_at:t.created_at})}})]})}function ii(){var e=Object(xc.useState)({showPayment:!1}),t=Object(hc.a)(e,2),a=t[0],n=t[1],c=Gr(),s=pn.getForPay(c.items,c.payments,c.discount),r=0===c.discount?pn.getPagado(c.payments):pn.getPagado(c.payments)+c.discount,i=c.subtotal<=r;return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("button",{className:"btn btn-success ml-2 d-print-none",onClick:function(){n(Object(o.a)(Object(o.a)({},a),{},{showPayment:!0}))},disabled:!c.items.length||c.subtotal&&i,children:Object(yc.jsx)("i",{className:"fas fa-money-bill-alt"})}),a.showPayment&&Object(yc.jsx)(Ur,{handleClose:function(){n(Object(o.a)(Object(o.a)({},a),{},{showPayment:!1}))},sale:Object(o.a)(Object(o.a)({},c),{},{contact_id:c.customer.id}),forPaid:s})]})}function oi(){var e=Gr(),t=!e.customer.id&&!e.items.length,a=Object(xc.useContext)(wc).auth,n=function(){console.log("Borrar venta con boton"),e.set({id:0,customer:{id:0,name:"venta de mostrador"},contact_id:2,items:[],session:pn.getSession(),discount:0,subtotal:0,total:0,payments:[],branch_id:a.branch.id})};return Object(yc.jsx)("button",{className:"btn btn-warning ml-1",title:"Nueva venta",onClick:function(){pn.confirm("\xbfDesea terminar esta venta y crear una nueva?",n)},disabled:t,children:Object(yc.jsx)("i",{className:"fas fa-window-close"})})}var li=function(e){var t=e.handleClose,a=Object(xc.useState)({textSearch:""}),n=Object(hc.a)(a,2),c=n[0],s=n[1],r=Object(xc.useState)([]),i=Object(hc.a)(r,2),l=i[0],d=i[1],u=Gr(),j=Object(xc.useContext)(wc).auth,b=Yc(),m=function(){t&&t()},h=function(){var e={search:c.textSearch,itemsPage:"25",orderBy:"id",order:"desc"};b.getContacts(e).then((function(e){e?d(e.data):console.error("Error al obtener usuario")}))};return Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsx)("h5",{className:"modal-title",children:"Seleccione un cliente"}),Object(yc.jsx)("button",{type:"button",className:"close",onClick:m,children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsxs)("div",{className:"modal-body p-2",children:[Object(yc.jsxs)("div",{className:"form-inline mb-3",children:[Object(yc.jsx)("div",{className:"form-group",children:Object(yc.jsx)("input",{className:"form-control",placeholder:"Buscar cliente",onChange:function(e){return function(e){var t=e.value;s({textSearch:t})}(e.target)},onKeyPress:function(e){return function(e){if("Enter"===e){if(c.textSearch.length>4)return h();window.Swal.fire({title:"Verificacion",text:"Escriba un nombre valido, al menos 5 caracteres",icon:"warning"})}}(e.key)},onBlur:function(){return c.textSearch.length>4&&h()},autoFocus:!0})}),Object(yc.jsx)("div",{className:"form-group pl-2",children:Object(yc.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:h,disabled:c.textSearch.length<5,children:Object(yc.jsx)("i",{className:"fas fa-search"})})})]}),Object(yc.jsx)("div",{className:"table-responsive overflow-auto",style:{height:"12rem"},children:Object(yc.jsx)("table",{className:"table table-sm",children:Object(yc.jsxs)("tbody",{children:[l.map((function(e){return Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("td",{className:"text-right",children:Object(yc.jsx)("span",{className:"badge badge-dark",children:e.id})}),Object(yc.jsx)("td",{className:"text-left",children:Object(yc.jsx)("a",{href:"#select",onClick:function(a){return function(e,a){e.preventDefault(),console.log("ID customer venta:",u.customer.id,"ID customer seleccionado:",a.id),u.customer.id!==a.id?(console.log(![0,2].includes(u.customer.id)),[0,2].includes(u.customer.id)?(u.set(Object(o.a)(Object(o.a)({},u),{},{customer:{id:a.id,name:a.name?a.name:"Venta de mostrador"},contact_id:a.id})),t()):window.Swal.fire({title:"Ventas",text:"Esta accion creara una nueva venta \xbfEsta seguro que desea crear una nueva venta?",icon:"question",showCancelButton:!0,confirmButtonText:"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(e){e.dismiss||(console.log("Entrando al Dissmiss"),console.log(a),u.set({id:0,customer:{id:a.id,name:a.name},contact_id:a.id,items:[],session:pn.getSession(),discount:0,subtotal:0,total:0,payments:[],branch_id:j.branch.id}),t())}))):t()}(a,e)},className:"text-capitalize",children:e.name.toLowerCase()})})]},e.id)})),!l.length&&Object(yc.jsx)(yc.Fragment,{children:[0,2].includes(u.customer.id)?Object(yc.jsx)("tr",{children:Object(yc.jsx)("td",{children:"No existen pacientes con esta coincidencia"})}):Object(yc.jsx)("tr",{children:Object(yc.jsx)("td",{children:Object(yc.jsxs)("span",{className:"alert alert-warning text-center",children:["Cambiar de usuario, provocara cerrar la"," ",Object(yc.jsx)("strong",{children:"venta"})," actual."]})})})})]})})})]}),Object(yc.jsx)("div",{className:"modal-footer",children:Object(yc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:m,children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]})})]})})})};function di(){var e=Object(xc.useState)(!1),t=Object(hc.a)(e,2),a=t[0],n=t[1],c=function(){n(!a)},s=Gr();return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("i",{className:"fas fa-user mr-1 text-indigo"}),"Cliente:",Object(yc.jsx)("label",{className:"text-capitalize ml-1",children:s.customer?s.customer.name:"XXX - vuelva a cargar"}),Object(yc.jsx)("button",{type:"button",className:"btn bg-indigo btn-sm ml-2",title:"Buscar cliente",onClick:c,children:Object(yc.jsx)("i",{className:"fas fa-exchange-alt"})}),a&&Object(yc.jsx)(li,{handleClose:c})]})}var ui=function(e){var t,a=e.payment,n=void 0===a?{}:a,c=e.handleClose;return Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsx)("h5",{className:"modal-title",children:"Detalles del abono"}),Object(yc.jsx)("button",{type:"button",className:"close",onClick:function(){return c()},children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsxs)("div",{className:"modal-body p-2",children:[Object(yc.jsxs)("div",{className:"row mb-2",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{className:"mr-2",children:"Metodo de pago"}),Object(yc.jsx)("span",{children:n.metodoname})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{className:"mr-2",children:"Cantidad abonada"}),Object(yc.jsxs)("span",{children:["$",n.total]})]})]}),n.banco&&n.banco.id?Object(yc.jsxs)("div",{className:"row mb-2",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{className:"mr-2",children:"Banco"}),Object(yc.jsx)("span",{children:n.banco.value})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{className:"mr-2",children:"Auth"}),Object(yc.jsx)("span",{children:null!==(t=n.auth)&&void 0!==t?t:"--"})]})]}):null,n.id?Object(yc.jsxs)("div",{className:"row mb-2",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{className:"mr-2 d-block",children:"Folio"}),Object(yc.jsx)("span",{children:n.id})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{className:"mr-2 d-block",children:"Fecha"}),n.created_at?Object(yc.jsx)("span",{children:_c()(n.created_at).format("LL")}):Object(yc.jsx)("span",{children:"--"})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{className:"mr-2 d-block text-uppercase",children:"Recibio"}),Object(yc.jsx)("span",{children:n.created&&n.created.name?n.created.name:"--"})]})]}):Object(yc.jsx)("div",{className:"row mb-2",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("span",{className:"alert alert-warning d-block text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Pago no acreditado!"]})})})]}),Object(yc.jsx)("div",{className:"modal-footer",children:Object(yc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return c()},children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]})})]})})})};function ji(e){var t,a,n=e.item,c=e.close,s=e.handleUpdate,r=Object(xc.useState)({cant:null!==(t=n.cant)&&void 0!==t?t:0,price:null!==(a=n.price)&&void 0!==a?a:0}),i=Object(hc.a)(r,2),l=i[0],d=i[1],u=function(e){var t=e.name,a=e.value;d(Object(o.a)(Object(o.a)({},l),{},Object(N.a)({},t,parseInt(a))))},j=function(){s(Object(o.a)(Object(o.a)(Object(o.a)({},n),l),{},{subtotal:l.cant*l.price}))};return console.log("[DEBUG] Item:",n),Object(yc.jsx)("div",{className:"modal d-block",tabIndex:"-1",children:Object(yc.jsx)("div",{className:"modal-dialog",role:"document",children:Object(yc.jsxs)("div",{className:"modal-content",children:[Object(yc.jsxs)("div",{className:"modal-header",children:[Object(yc.jsx)("h5",{className:"modal-title",children:Object(yc.jsx)("span",{className:"text-capitalize text-truncate",children:n.producto})}),Object(yc.jsx)("button",{type:"button",className:"close",onClick:function(){return c()},children:Object(yc.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(yc.jsx)("div",{className:"modal-body p-2",children:Object(yc.jsxs)("div",{className:"row my-2",children:[Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Cantidad"}),Object(yc.jsx)("input",{type:"number",min:"0",className:"form-control text-right",name:"cant",defaultValue:l.cant,onChange:function(e){var t=e.target;return u(t)}})]}),Object(yc.jsxs)("div",{className:"col",children:[Object(yc.jsx)("label",{children:"Precio"}),Object(yc.jsx)("input",{type:"number",min:"0",className:"form-control text-right",name:"price",defaultValue:l.price,onChange:function(e){var t=e.target;return u(t)},onKeyPress:function(e){return function(e){"Enter"===e&&j()}(e.key)}})]})]})}),Object(yc.jsxs)("div",{className:"modal-footer",children:[Object(yc.jsxs)("button",{type:"button",className:"btn btn-default",onClick:function(){return c()},children:[Object(yc.jsx)("i",{className:"fas fa-ban mr-1"}),"Cancelar"]}),Object(yc.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:j,children:[Object(yc.jsx)("i",{className:"fas fa-save mr-1"}),"Guardar"]})]})]})})})}function bi(){var e=Gr(),t=0===e.discount?pn.getPagado(e.payments):pn.getPagado(e.payments)+e.discount,a=e.subtotal<=t,n=Object(xc.useContext)(wc).auth.roles,c=Object(xc.useState)({showUpdateItem:!1,showPaymentDetails:!1,item:{},payment:{}}),s=Object(hc.a)(c,2),r=s[0],i=s[1],l=function(t){var a=e.items.filter((function(e){return e.store_items_id!==t.store_items_id})),n=pn.getSubTotal(a);e.set(Object(o.a)(Object(o.a)({},e),{},{items:a,total:pn.getTotal(n,e.discount),subtotal:n}))},d=function(t){var a=t.id,n=t.total,c=t.metodoname;console.log("DEBUG",a,n,c);var s=e.payments.filter((function(e){return e.id!==a}));pn.confirm("Realmente desea eliminar el pago de  $".concat(n),(function(){e.set(Object(o.a)(Object(o.a)({},e),{},{payments:s}))}))},u=function(e,t){console.log("Funcion ejecutada"),e&&e.preventDefault(),i(Object(o.a)(Object(o.a)({},r),{},{showUpdateItem:!0,item:t}))},j=function(){i(Object(o.a)(Object(o.a)({},r),{},{showUpdateItem:!1,item:{}}))};return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("table",{className:"table table-striped",children:Object(yc.jsxs)("tbody",{children:[e.items&&e.items.length?Object(yc.jsx)(yc.Fragment,{children:e.items.map((function(t,c){console.log(t);var s=e.subtotal&&a||e.payments.length||e.discount,r=_c()(Date.now()).diff(_c()(e.created_at),"days");return t.store_items_id?Object(yc.jsxs)("tr",{children:[mi(l,t,s),Object(yc.jsxs)("td",{onClick:function(e){"ventas"===n&&0!==r?alert("No puedes editar esta venta!"):u(null,t)},children:[Object(yc.jsx)("a",{href:"#details",className:"text-muted w-full d-block text-uppercase",onClick:function(e){if("ventas"===n)return null;u(e,t)},children:t.producto?t.producto:t.name}),Object(yc.jsxs)("label",{className:"w-full d-block",children:[Object(yc.jsx)("span",{className:"badge badge-dark mr-1",children:t.cant}),"*",Object(yc.jsxs)("span",{className:t.price?"mx-1":"mx-1 text-danger",children:["$",t.price]}),"=",Object(yc.jsxs)("span",{className:t.subtotal?"ml-1":"ml-1 text-danger",children:["$",t.subtotal]})]})]})]},c):null}))}):null,e.discount?Object(yc.jsxs)("tr",{children:[mi((function(){pn.confirm("Realmente desea eliminar el descuento",(function(){e.set(Object(o.a)(Object(o.a)({},e),{},{discount:0}))}))}),null,a),Object(yc.jsxs)("td",{children:[Object(yc.jsx)("span",{className:"text-danger w-full d-block text-uppercase",children:"Descuento"}),Object(yc.jsx)("label",{className:"w-full d-block",children:Object(yc.jsxs)("span",{className:"ml-1 text-danger",children:["- $",e.discount]})})]})]}):null,e.payments.length?Object(yc.jsx)(yc.Fragment,{children:e.payments.map((function(e,t){var a=_c()(Date.now()).diff(_c()(e.created_at),"days");console.log("Diferencia de dias",a),console.log(e.created_at);var c="admin"!==n&&("ventas"===n&&0!==a);return Object(yc.jsxs)("tr",{children:[mi(d,e,c),console.log(e),Object(yc.jsxs)("td",{children:[Object(yc.jsxs)("a",{href:"#link",className:" w-full d-block text-uppercase",onClick:function(t){return function(e,t){e&&e.preventDefault(),i(Object(o.a)(Object(o.a)({},r),{},{showPaymentDetails:!0,payment:t}))}(t,e)},children:[Object(yc.jsx)("span",{className:e.id?"text-success":"text-warning text-bold",children:"Abono"}),Object(yc.jsx)("span",{className:"ml-1 text-muted",children:e.metodoname})]}),Object(yc.jsxs)("label",{className:"w-full d-block",children:[Object(yc.jsxs)("span",{className:"ml-1 text-muted",children:[_c()(e.created_at).format("LL"),","]}),Object(yc.jsxs)("span",{className:"ml-1",children:["$",e.total]})]})]})]},t)}))}):null,a&&e.subtotal?Object(yc.jsx)("tr",{className:"table-info",children:Object(yc.jsx)("td",{colSpan:"2",children:Object(yc.jsxs)("span",{className:" w-full d-block text-uppercase text-center text-bold",children:[Object(yc.jsx)("i",{className:"fas fa-info-circle mr-1 text-primary"}),"Cuenta pagada"]})})}):null]})}),r.showPaymentDetails&&Object(yc.jsx)(ui,{handleClose:function(){i(Object(o.a)(Object(o.a)({},r),{},{showPaymentDetails:!1,payment:{}}))},payment:r.payment}),r.showUpdateItem&&Object(yc.jsx)(ji,{item:r.item,handleUpdate:function(t){var a=e.items.filter((function(e){return e.store_items_id!==t.store_items_id}));a.push(t);var n=pn.getSubTotal(a);e.set(Object(o.a)(Object(o.a)({},e),{},{items:a,total:pn.getTotal(n,e.discount),subtotal:n})),j()},close:j})]})}function mi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(yc.jsx)("td",{style:{width:32},children:Object(yc.jsx)("button",{type:"button",className:a?"btn btn-default disabled":"btn btn-default",onClick:function(){e&&(t?e(t):e())},disabled:a,children:Object(yc.jsx)("i",{className:"fas fa-trash text-muted"})})})}function hi(){var e=Gr();return Object(yc.jsxs)("div",{children:[Object(yc.jsx)("label",{className:"mx-1",children:"Folio:"}),Object(yc.jsx)("span",{className:"mx-1",children:e.id?e.id:"Nuevo"}),Object(yc.jsx)("label",{className:"mx-1",children:"Fecha:"}),Object(yc.jsx)("span",{className:"mx-1",children:_c()(e.created_at).format("L")}),e.pedido?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("label",{className:"mx-1",children:"Pedido:"}),Object(yc.jsx)("span",{className:"mx-1",children:e.pedido})]}):null]})}function xi(){var e=Gr();return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("span",{className:"text-lg",children:"Por pagar:"}),Object(yc.jsxs)("label",{className:"text-lg ml-1",children:["$",pn.getForPay(e.items,e.payments,e.discount)]})]})}function Oi(){var e=Gr();return Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("span",{className:"text-lg",children:"Total:"}),Object(yc.jsxs)("label",{className:"text-lg ml-1",children:["$",e.subtotal]})]})}function pi(){var e=Object(xc.useContext)(wc).auth,t=Object(s.d)((function(e){return e})),a=t.sales.loading,n=Object(s.c)(),c=Object(xc.useState)({id:0,customer:{id:0,name:"venta de mostrador"},contact_id:2,items:[],session:pn.getSession(),discount:0,subtotal:0,total:0,payments:[],branch_id:e.branch.id}),r=Object(hc.a)(c,2),i=r[0],l=r[1],d=Object(xc.useState)({pagado:0}),u=Object(hc.a)(d,2),j=u[0],b=u[1];return Object(xc.useEffect)((function(){var e=0,t=0;i.items.forEach((function(t){return e+=t.subtotal})),i.payments.forEach((function(e){return t+=e.total})),e===i.subtotal&&j.pagado===t||(i.subtotal=e,i.total=e-i.discount,i.pagado=t,b({pagado:t}))}),[]),Object(xc.useEffect)((function(){return n(v.changeNamePage("punto de venta")),function(){console.log("[Orus Systme] Cerrando venta"),localStorage.setItem("OrusSales","{}")}}),[]),Object(yc.jsx)(zr.Provider,{value:Object(o.a)(Object(o.a)({},i),{},{set:l}),children:Object(yc.jsxs)("div",{className:"card border border-gray mb-4",style:{height:"36rem"},children:[Object(yc.jsxs)("div",{className:"card-body pb-2 d-print-none",children:[Object(yc.jsxs)("nav",{className:"row mb-2",children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)(di,{})}),Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)(hi,{})}),Object(yc.jsx)("div",{className:"col-3",children:Object(yc.jsxs)("div",{className:"card-tools text-right",children:[Object(yc.jsx)(ri,{}),Object(yc.jsx)(ci,{}),Object(yc.jsx)(oi,{})]})})]}),Object(yc.jsx)("div",{className:"overflow-auto text-right p-0 border border-gray",style:{height:"27rem"},children:Object(yc.jsx)(bi,{})})]}),Object(yc.jsx)("div",{className:"card-footer",children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col d-print-none",children:Object(yc.jsx)(Oi,{})}),Object(yc.jsx)("div",{className:"col d-print-none",children:Object(yc.jsx)(xi,{})}),Object(yc.jsxs)("div",{className:"col-6 text-right",children:[Object(yc.jsx)(ni,{}),Object(yc.jsx)(ii,{}),Object(yc.jsx)(Rr,{})]})]})}),a?Object(yc.jsx)("div",{className:"overlay dark",children:Object(yc.jsx)("i",{className:"fas fa-2x fa-sync-alt fa-spin"})}):null]})})}var fi=a(35);function vi(e){var t=e.filters,a=Object(xc.useState)({payments:[],meta:{},page:1,load:!1}),n=Object(hc.a)(a,2),c=n[0],s=n[1],r=function(){var e=Object(me.a)(ue.a.mark((function e(){var a,n,r,i,l,d;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(o.a)({},t)).itemsPage=12,a.page=c.page,n=Nc("payments",null,a),console.log("REPORT PAYMENTS DETAILS URL",n),e.next=7,gc(n);case 7:r=e.sent,i=r.data,l=r.message,d=r.meta,i?s(Object(o.a)(Object(o.a)({},c),{},{payments:i,meta:d,load:!1})):l&&(console.log(l),s(Object(o.a)(Object(o.a)({},c),{},{load:!1})),console.error("[Orus system] Error in report payments details:",l),window.Swal.fire("Fallo de conexion",l,"error"));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(xc.useEffect)((function(){r()}),[t,c.page]),Object(yc.jsxs)("div",{className:"card card-success card-outline",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsx)("h3",{className:"card-title text-success",children:"Detallado"})}),Object(yc.jsx)("div",{className:"card-body",children:Object(yc.jsxs)("table",{className:"table table-sm",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{children:"Metodo"}),Object(yc.jsx)("th",{children:"Cliente"}),Object(yc.jsx)("th",{children:"Pedido"}),Object(yc.jsx)("th",{children:"Total"})]})}),Object(yc.jsx)("tbody",{children:c.load?Object(yc.jsx)("tr",{children:Object(yc.jsxs)("td",{colSpan:"4",className:"text-center p-4",children:[Object(yc.jsx)("div",{className:"spinner-border text-primary mr-4",role:"status",children:Object(yc.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(yc.jsx)("span",{className:"font-weight-light font-italic",children:"Espere cargando datos de pagos"})]})}):c.payments.length?c.payments.map((function(e){return Object(yc.jsxs)("tr",{className:1===e.metodo?"text-success":"",children:[Object(yc.jsx)("th",{className:"text-uppercase",children:e.metodoname}),Object(yc.jsx)("td",{className:"text-capitalize",children:e.sale&&e.sale.customer?e.sale.customer.nombre:"--"}),Object(yc.jsx)("td",{children:Object(yc.jsx)("span",{className:"badge badge-primary",alt:"Cobrado por: "+e.created_user,title:"Cobrado por: "+e.created_user,children:e.sale&&e.sale.pedido?e.sale.pedido:"--"})}),Object(yc.jsx)("td",{className:"text-right",children:fi.dollarUS.format(e.total)})]},e.id)})):Object(yc.jsx)("tr",{children:Object(yc.jsx)("th",{colSpan:"4",className:"text-center",children:Object(yc.jsxs)("h6",{className:"text-warning",children:[Object(yc.jsx)("i",{className:"fas fa-info mr-2"}),"No hay datos para este dia"]})})})})]})}),c.meta.total?Object(yc.jsxs)("div",{className:"card-footer",children:[1===c.meta.current_page?Object(yc.jsx)("a",{href:"#next",onClick:function(e){return e.preventDefault()},children:Object(yc.jsx)("i",{className:"fas fa-step-backward text-dark"})}):Object(yc.jsx)("a",{href:"#next",onClick:function(e){e.preventDefault(),s(Object(o.a)(Object(o.a)({},c),{},{page:c.page-1}))},children:Object(yc.jsx)("i",{className:"fas fa-step-backward"})})," "+c.page+" / "+c.meta.last_page+" ",c.meta.current_page===c.meta.last_page?Object(yc.jsx)("a",{href:"#next",onClick:function(e){return e.preventDefault()},children:Object(yc.jsx)("i",{className:"fas fa-step-forward text-dark"})}):Object(yc.jsx)("a",{href:"#next",onClick:function(e){e.preventDefault(),s(Object(o.a)(Object(o.a)({},c),{},{page:c.page+1}))},children:Object(yc.jsx)("i",{className:"fas fa-step-forward"})})]}):null]})}function gi(e){var t=e.filters,a=e.changeState,n=t.user,c=t.date_end,s=t.date_start,r=Object(xc.useState)({rol:n.roles,total:0,efectivo:0,page:1,char:null}),i=Object(hc.a)(r,2),l=i[0],d=i[1],u=function(){var e=Object(me.a)(ue.a.mark((function e(){var n,r,i,u,j,b,m,h,x,O,p,f;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(o.a)({},t)).itemsPage=12,n.page=l.page,n.type="methods",r=Nc("payments",null,n),console.log("REPORT PAYS URL",r),e.next=8,gc("payments?date_start=".concat(s,"&date_end=").concat(c,"&itemsPage=12&page=1&type=methods"));case 8:if(i=e.sent,u=i.data,j=i.message,!u){e.next=32;break}if(b=window.$("#donutChart").get(0).getContext("2d"),m={maintainAspectRatio:!0,responsive:!0},h=[],x=[],O=0,p=0,f={},l.char&&l.char.destroy(),u.message){e.next=25;break}if(!u||!u.length){e.next=20;break}return e.next=18,u.map((function(e){return h.push(e.method),x.push(e.total.toFixed(2)),"efectivo"===e.method&&(a("ventas",e.total),p=e.total),O+=e.total,null}));case 18:e.next=22;break;case 20:h=["No hay datos"],x=[0];case 22:d(Object(o.a)(Object(o.a)({},l),{},{total:O,efectivo:p})),e.next=28;break;case 25:console.error("[ORUS] Error al cargar la venta del dia",u.message),h=["No hay datos"],x=[100];case 28:f={labels:h,datasets:[{data:x,backgroundColor:["#f56954","#00a65a","#f39c12","#00c0ef","#3c8dbc","#d2d6de","#000"]}]},l.char=new window.Chart(b,{type:"pie",data:f,options:m}),e.next=34;break;case 32:return window.Swal.fire({title:"Error!",text:"Ups!\n Hubo un error al descargar las ventas",icon:"error",confirmButtonText:"Ok"}),e.abrupt("return",j);case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(xc.useEffect)((function(){u()}),[t]),Object(yc.jsxs)("div",{className:"card card-success card-outline",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsx)("h3",{className:"card-title text-success",children:l.rol?"Mis ventas del dia por metodo de pago":"Ventas del dia por metodo de pago"})}),Object(yc.jsxs)("div",{className:"card-body",children:[Object(yc.jsx)("canvas",{id:"donutChart"}),Object(yc.jsxs)("p",{children:[l.rol?null:Object(yc.jsxs)(Oc.a.Fragment,{children:["Venta: ",Object(yc.jsx)("strong",{children:fi.dollarUS.format(l.total)}),Object(yc.jsx)("br",{})]}),"Efectivo: ",Object(yc.jsx)("strong",{children:fi.dollarUS.format(l.efectivo)})]})]})]})}function Ni(e){var t=e.filters,a=Object(xc.useState)({listBank:[],page:1,data:[],load:!1}),n=Object(hc.a)(a,2),c=n[0],s=n[1],r=function(){var e=Object(me.a)(ue.a.mark((function e(){var a,n,r,i,l;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(o.a)({},t)).itemsPage=12,a.page=c.page,a.type="banks",n=Nc("payments",null,a),console.log("REPORT BANK URL",n),e.next=8,gc(n);case 8:r=e.sent,i=r.data,l=r.message,i?s(Object(o.a)(Object(o.a)({},c),{},{data:i,load:!1})):l&&(s(Object(o.a)(Object(o.a)({},c),{},{load:!1})),console.error("[Orus system] Error in report payments details:",l),window.Swal.fire("Fallo de conexion",l,"error"));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(xc.useEffect)((function(){r()}),[t]),Object(yc.jsxs)("div",{className:"card card-success card-outline",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsx)("h3",{className:"card-title text-success",children:"Detallado de pagos bancarios"})}),Object(yc.jsx)("div",{className:"card-body",children:c.load?Object(yc.jsxs)("div",{children:[Object(yc.jsx)("div",{className:"spinner-border text-primary mr-4",role:"status",children:Object(yc.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(yc.jsx)("span",{className:"font-weight-light font-italic",children:"Espere cargando datos de banco"})]}):Object(yc.jsx)("ul",{className:"list-group",children:c.data.length?c.data.map((function(e,t){return Object(yc.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(yc.jsx)("label",{className:"text-uppercase",children:e.name}),Object(yc.jsx)("span",{className:"badge badge-primary",children:fi.dollarUS.format(e.total)})]},t)})):Object(yc.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:Object(yc.jsxs)("h6",{className:"text-warning",children:[Object(yc.jsx)("i",{className:"fas fa-info mr-2"}),"No hay datos para este dia"]})})})})]})}a(173);function yi(e){var t=e.filters,a=e.changeState,n=t.user,c=t.branch_id,s=t.date_end,r=t.date_start,i=Object(xc.useState)({branch_id:c,user:n,date_start:r,date_end:s}),l=Object(hc.a)(i,2),d=l[0],u=l[1],j=Object(xc.useState)([]),b=Object(hc.a)(j,2),m=b[0],h=b[1],x=kc(),O=Object(xc.useContext)(Ec).data.filter((function(e){return"branches"===e.name})),p=function(e,t){u(Object(o.a)(Object(o.a)({},d),{},Object(N.a)({},e,_c()(t).format("YYYY-MM-DD"))))};return Object(xc.useEffect)((function(){x.getListUsers().then((function(e){e?h(e.data):console.error("Error al obtener la lista de usuarios")}))}),[]),Object(yc.jsx)("div",{className:"border-bottom pb-3 mb-4",children:Object(yc.jsx)("div",{className:"card-body p-0 bg-light",children:Object(yc.jsxs)("div",{className:"form-group row col-lg-12 m-0",children:[Object(yc.jsx)("div",{className:"col-lg-1 mt-sm-3 ml-sm-3",children:Object(yc.jsx)("p",{className:"mt-2 font-weight-bold text-secondary h5",children:"Filtros"})}),Object(yc.jsx)("div",{className:"col-lg-2 mt-sm-3",children:Object(yc.jsx)("div",{className:"col-lg-12",children:Object(yc.jsxs)("select",{className:"form-control text-capitalize",defaultValue:c,onChange:function(e){var t=e.target;return u(Object(o.a)(Object(o.a)({},d),{},{branch_id:t.value}))},children:[Object(yc.jsx)("option",{value:"",children:""===c?"Sucursal":"Todas"}),O.map((function(e){return Object(yc.jsx)("option",{value:e.id,children:e.data.name},e.id)}))]})})}),Object(yc.jsx)("div",{className:"col-lg-2 mt-sm-3",children:Object(yc.jsx)("div",{className:"col-lg-12",children:Object(yc.jsxs)("select",{className:"form-control text-capitalize",defaultValue:n,onChange:function(e){var t=e.target;return u(Object(o.a)(Object(o.a)({},d),{},{user:t.value}))},children:[Object(yc.jsx)("option",{value:"",children:""===n?"Usuarios":"Todos"}),m.map((function(e){return c?"doctor"!==e.roles[0]?Object(yc.jsx)("option",{value:e.id,children:e.name},e.id):null:Object(yc.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}),Object(yc.jsxs)("div",{className:"row mt-sm-3 m-0 ml-sm-2",children:[Object(yc.jsx)("label",{className:"col-lg-1 col-form-label p-0 ml-5 mt-2 ml-sm-3",children:"De:"}),Object(yc.jsx)("div",{className:"col-lg-10",children:Object(yc.jsx)(gs.a,{className:"form-control",selected:new Date(_c()(d.date_start).format("MM-DD-YYYY")),onSelect:function(e){return p("date_start",e)},onChange:function(e){return p("date_start",e)}})})]}),Object(yc.jsxs)("div",{className:"row mt-sm-3 m-0",children:[Object(yc.jsx)("label",{className:"col-lg-1 col-form-label p-0 mt-2 ml-sm-3",children:"a:"}),Object(yc.jsx)("div",{className:"col-lg-10",children:Object(yc.jsx)(gs.a,{className:"form-control",selected:new Date(_c()(d.date_end).format("MM-DD-YYYY")),onSelect:function(e){return p("date_end",e)},onChange:function(e){return p("date_end",e)}})})]}),Object(yc.jsx)("div",{className:"col-lg-2 row mt-sm-3 d-flex justify-content-center m-0 h-50",children:Object(yc.jsx)("button",{type:"button",className:"btn w-50 btn-success font-weight-bold",onClick:function(){var e=d.user,t=d.branch_id,n=d.date_end,c=d.date_start;a({branch_id:t,user:e,date_start:c,date_end:n})},children:"Filtrar"})})]})})})}var wi=function(e){Object(Ws.a)(a,e);var t=Object(er.a)(a);function a(){return Object(Qs.a)(this,a),t.apply(this,arguments)}return Object(Xs.a)(a,[{key:"render",value:function(){var e=this.props.ventas;return Object(yc.jsx)("div",{className:"card border border-info rounded",children:Object(yc.jsxs)("div",{className:"card-body bg-light",children:[Object(yc.jsx)("h2",{className:"card-title text-secondary",children:"Efectivo de caja"}),Object(yc.jsx)("br",{}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col",children:Object(yc.jsx)("h5",{className:"text-success",children:fi.dollarUS.format(e)})})})]})})}}]),a}(xc.Component);function Ci(){var e=Object(xc.useContext)(wc).auth,t=Object(xc.useState)({user:0,date_start:_c()().startOf("week").format("YYYY-MM-DD"),date_end:_c()().format("YYYY-MM-DD"),branch_id:e.branch.id,ventas:0,filterData:{}}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s={user:n.user,date_start:n.date_start,date_end:n.date_end,branch_id:n.branch_id},r=function(e){console.log("Filters Seted up",e),"object"===typeof e?c(Object(o.a)(Object(o.a)({},n),e)):console.error("[Orus system] The filters data not is a object:",e)};return Object(yc.jsxs)("div",{className:"content",children:[Object(yc.jsxs)("p",{className:"h4 border-bottom mb-4",children:["Bienvenido",Object(yc.jsx)("span",{className:"font-weight-bold mx-2 text-capitalize",children:e.name.toLowerCase()}),"este es el resumen."]}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col col-md-12 col-lg-12",children:Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(yc.jsx)(yi,{filters:s,changeState:r})})})})}),Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsxs)("div",{className:"col-lg-4 col-md-12",children:[Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(yc.jsx)(wi,{ventas:n.ventas})})}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(yc.jsx)(gi,{filters:s,changeState:r})})})]}),Object(yc.jsx)("div",{className:"col-lg-8 col-md-12",children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-lg-4 col-md-12",children:Object(yc.jsx)(Ni,{filters:s,changeState:r})}),Object(yc.jsx)("div",{className:"col-lg-8 col-md-12",children:Object(yc.jsx)(vi,{filters:s,changeState:r})})]})})]})]})}var Si=Object(xc.createContext)(null);function _i(e){var t=e.handleNewOrEdit,a=e.newOrEdit,n=Object(xc.useContext)(Si),c=Object(pc.f)();return Object(yc.jsxs)("div",{className:"col-lg-12",children:[Object(yc.jsxs)("button",{className:"inbox"!==n.panel?"disabled mb-3 btn btn-secondary btn-block":"mb-3 btn btn-primary btn-block",onClick:function(e){e.preventDefault(),t()},disabled:a,children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-plus"}),"Usuario nuevo"]}),a?Object(yc.jsx)("div",{children:Object(yc.jsx)("li",{className:"list-group-item",children:Object(yc.jsxs)("a",{href:"#back",className:"d-flex justify-content-between align-items-center",onClick:function(e){e.preventDefault(),t(),c.push("/usuarios")},children:["Ver listado",Object(yc.jsx)("span",{className:"badge badge-primary badge-pill",children:Object(yc.jsx)("i",{className:"fas fa-chevron-left"})})]})})}):Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h5",{className:"card-title text-dark",children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-ellipsis-v"}),"Filtros"]})}),Object(yc.jsx)("div",{className:"p-0 card-body",children:Object(yc.jsxs)("ul",{className:"nav nav-pills flex-column",children:[Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yc.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:n.options.orderby,onChange:function(e){var t=e.target,a=t.name,c=t.value;n.set(Object(o.a)(Object(o.a)({},n),{},{options:Object(o.a)(Object(o.a)({},n.options),{},Object(N.a)({},a,c))}))},children:[Object(yc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yc.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:n.options.order,onChange:function(e){var t=e.target,a=t.name,c=t.value;n.set(Object(o.a)(Object(o.a)({},n),{},{options:Object(o.a)(Object(o.a)({},n.options),{},Object(N.a)({},a,c))}))},children:[Object(yc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de usuarios"}),Object(yc.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:n.options.itemsPage,onChange:function(e){var t=e.target,a=t.name,c=t.value;n.set(Object(o.a)(Object(o.a)({},n),{},{options:Object(o.a)(Object(o.a)({},n.options),{},Object(N.a)({},a,c))}))},children:[Object(yc.jsx)("option",{value:"25",children:"ver 25"}),Object(yc.jsx)("option",{value:"50",children:"ver 50"}),Object(yc.jsx)("option",{value:"75",children:"ver 75"}),Object(yc.jsx)("option",{value:"100",children:"ver 100"})]})]})]})})]})]})}var ki={validInputs:function(e){var t=e.email,a=e.password;return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)?/^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$/.test(a)?{isValid:!0}:(console.error("[Orus System] Fallo validacion de password"),{isValid:!1,msg:"Los datos introducidos no son validos",input:"password"}):(console.error("[Orus System] Fallo validacion de email"),{isValid:!1,msg:"Los datos introducidos no son validos",input:"email"})},getNameRoles:function(e){var t=[];return e.forEach((function(e,a){t.push(Object(yc.jsx)("span",{className:"text-capitalize badge badge-dark",children:e},a))})),1===t.length?t:t.length>1?Object(yc.jsx)("span",{className:"text-capitalize badge badge-dark",children:"+1"}):void 0},handleDelete:function(e,t,a,n){if(e.id)return n||(n="\xbfEsta seguro de eliminar el usuario ".concat(e.username,"?")),window.Swal.fire({text:n,icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(n){if(!n.dismiss&&a)return a({id:e.id,options:t}),!0})),!1},handleSave:function(e,t,a,n,c,s){s||(s=e?"\xbfEsta seguro de actualizar el usuario?":"\xbfEsta seguro de crear un nuevo usuario?"),window.Swal.fire({title:"Almacenamiento",text:s,icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:e?"Actualizar":"Crear",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(s){!s.dismiss&&n&&(n({id:e,data:t,options:a}),c&&c())}))}};function Ei(){var e=Object(pc.f)(),t=kc(),a=Object(xc.useContext)(Si),n=Object(xc.useState)(""),c=Object(hc.a)(n,2),s=c[0],r=c[1],i=Object(xc.useState)({users:[],meta:{}}),l=Object(hc.a)(i,2),d=l[0],u=l[1],j=Object(xc.useState)(!1),b=Object(hc.a)(j,2),m=b[0],h=b[1],x=d.users,O=d.meta,p=function(e,t){a.set(Object(o.a)(Object(o.a)({},a),{},{options:Object(o.a)(Object(o.a)({},a.options),{},Object(N.a)({},e,t))}))};return Object(xc.useEffect)((function(){h(!0),t.getListUsers(a.options).then((function(e){e?(u(Object(o.a)(Object(o.a)({},e),{},{users:e.data,meta:e.meta})),h(!1)):console.error("Error al obtener los datos")}))}),[a.options]),Object(yc.jsx)(Hc,{title:"Lista de productos",icon:"id-badge",color:"primary",loading:m,meta:O,itemSelected:s,defaultSearch:a.options.search,handlePagination:function(e){return p("page",e)},handleSearch:function(e){return p("search",e)},handleDeleteItem:function(){h(!0),t.deleteUser(s).then((function(e){window.Swal.fire({icon:"success",title:"Usuario eliminado correctamente",showConfirmButton:!1,timer:2500}),r({id:0}),t.getListUsers(a.options).then((function(e){e&&(u(Object(o.a)(Object(o.a)({},e),{},{users:e.data,meta:e.meta})),h(!1))}))})).catch((function(e){console.error(e)}))},handleEditItem:function(t){s?e.push("usuarios/".concat(s)):window.Swal.fire({title:"Error",text:"Lo sentimos no existe un contacto seleccionado",icon:"error"})},handleSync:function(){a.set(Object(o.a)(Object(o.a)({},a),{},{options:{page:1,orderby:"created_at",order:"desc",itemsPage:10}}))},children:Object(yc.jsxs)("table",{className:"table table-hover table-striped",children:[Object(yc.jsx)("thead",{children:Object(yc.jsxs)("tr",{children:[Object(yc.jsx)("th",{}),Object(yc.jsx)("th",{children:"Nombre"}),Object(yc.jsx)("th",{children:"Email/Usuario"}),Object(yc.jsx)("th",{children:"Rol"}),Object(yc.jsx)("th",{children:"Sucursal"}),"created_at"===a.options.orderby?Object(yc.jsx)("th",{children:"Creado"}):Object(yc.jsx)("th",{children:"Modificado"})]})}),Object(yc.jsx)("tbody",{children:x.length?Object(yc.jsx)(yc.Fragment,{children:x.map((function(t){return Object(yc.jsxs)("tr",{children:[Object(yc.jsxs)("td",{className:"icheck-primary pl-2",children:[Object(yc.jsx)("input",{type:"checkbox",className:"form-check-input mt-4",value:t.id,id:"item_"+t.id,checked:s===t.id,onChange:function(e){var t=e.target,a=t.value,n=t.checked;r(n?parseInt(a):"")}}),Object(yc.jsx)("label",{htmlFor:"item_"+t.id,className:"sr-only"})]}),Object(yc.jsx)("td",{className:"mailbox-name text-capitalize text-truncate text-bold text-primary",style:{cursor:"pointer",maxWidth:180},onClick:function(a){e.push("usuarios/".concat(t.id))},children:t.name}),Object(yc.jsx)("td",{className:"mailbox-name text-muted text-truncate",children:Object(yc.jsx)("span",{children:t.email})}),Object(yc.jsx)("td",{className:"mailbox-name text-dark text-bold text-truncate",children:ki.getNameRoles(t.roles)}),Object(yc.jsx)("td",{className:"text-truncate",children:Object(yc.jsx)("span",{className:"text-capitalize",children:t.branch.data.name})}),"created_at"===a.options.orderby?Object(yc.jsx)("td",{className:"mailbox-date text-muted text-truncate",children:Object(yc.jsx)("span",{children:_c()(t.created_at).format("LL")})}):Object(yc.jsx)("td",{className:"mailbox-date text-muted text-truncate",children:Object(yc.jsx)("span",{children:_c()(t.updated_at).fromNow()})})]},t.id)}))}):Object(yc.jsx)("tr",{children:Object(yc.jsx)("th",{className:"text-center text-muted",colSpan:"6",children:"No hay usuarios registrados"})})})]})})}function Li(e){var t=Object(xc.useState)({options:{page:1,orderby:"created_at",order:"desc",itemsPage:25,search:""},panel:"inbox",newOrEdit:null}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=e.match.params.id;return Object(xc.useEffect)((function(){c(Object(o.a)(Object(o.a)({},n),{},{newOrEdit:!!s}))}),[s]),Object(yc.jsx)(Si.Provider,{value:Object(o.a)(Object(o.a)({},n),{},{set:c}),children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-lg-2",children:Object(yc.jsx)(_i,{newOrEdit:n.newOrEdit,handleNewOrEdit:function(){return c(Object(o.a)(Object(o.a)({},n),{},{newOrEdit:!n.newOrEdit}))}})}),Object(yc.jsx)("div",{className:"col-lg-10",children:"boolean"===typeof n.newOrEdit?Object(yc.jsx)("div",{className:"col-sm-10 col-md-12 col-lg-12",children:n.newOrEdit?Object(yc.jsx)(Fc,Object(o.a)(Object(o.a)({},e),{},{handleNewOrEdit:function(){return c(Object(o.a)(Object(o.a)({},n),{},{newOrEdit:!n.newOrEdit}))}})):Object(yc.jsx)(Ei,{})}):Object(yc.jsx)("p",{children:"Loading component"})})]})})}function Ii(){var e=Object(xc.useContext)(gr),t=Object(xc.useContext)(wc).auth.roles,a=e.options,n=e.order,c=function(t){var n=t.target,c=n.value,s=n.name;e.set(Object(o.a)(Object(o.a)({},e),{},{options:Object(o.a)(Object(o.a)({},a),{},Object(N.a)({},s,c))}))};return Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"col-md-12 col-sm-12 d-print-none",children:[Object(yc.jsxs)("a",{href:"#new",className:"newOrder"===e.panel?"disabled mb-3 btn btn-secondary btn-block":"mb-3 btn btn-warning btn-block",onClick:function(t){t.preventDefault(),e.set(Object(o.a)(Object(o.a)({},e),{},{panel:"newOrder"}))},disabled:"newOrder"===e.panel,children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-plus"}),"Pedido nuevo"]}),Object(yc.jsxs)("div",{className:"card",children:[Object(yc.jsx)("div",{className:"card-header",children:Object(yc.jsxs)("h5",{className:"card-title text-dark",children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-ellipsis-v"}),"Menu y filtros"]})}),Object(yc.jsx)("div",{className:"p-0 card-body",children:Object(yc.jsxs)("ul",{className:"nav nav-pills flex-column",children:[Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:"pending"===e.panel?"nav-link active":"nav-link",onClick:function(t){t.preventDefault(),e.set(Object(o.a)(Object(o.a)({},e),{},{panel:"pending"}))},children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-notes-medical"})," Pendientes"]})}),Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:"inbox"===e.panel?"nav-link active":"nav-link",onClick:function(t){t.preventDefault(),e.set(Object(o.a)(Object(o.a)({},e),{},{panel:"inbox"}))},children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-clipboard-list"})," Pedidos"]})}),"admin"===t?Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)("a",{href:"#item",className:"reports"===e.panel?"nav-link active":"nav-link",onClick:function(t){t.preventDefault(),e.set(Object(o.a)(Object(o.a)({},e),{},{panel:"reports"}))},children:[Object(yc.jsx)("i",{className:"mr-2 fas fa-folder-open"})," Reporte"]})}):null,"inbox"===e.panel?Object(yc.jsxs)(xc.Fragment,{children:[Object(yc.jsx)("li",{className:"nav-item",children:"\xa0"}),Object(yc.jsxs)("li",{className:"p-2 nav-item",children:[Object(yc.jsx)("label",{htmlFor:"status",children:"Estado del pedido"}),Object(yc.jsxs)("select",{className:"form-control",name:"status",id:"status",value:a.status,onChange:c,children:[Object(yc.jsx)("option",{value:"",children:"-- Todos --"}),Object(yc.jsx)("option",{value:"0",children:"En proceso"}),Object(yc.jsx)("option",{value:"1",children:"Laboratorio"}),Object(yc.jsx)("option",{value:"2",children:"Bicelaci\xf3n"}),Object(yc.jsx)("option",{value:"3",children:"Terminado"}),Object(yc.jsx)("option",{value:"4",children:"Entregado"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"orderby",children:"Ordenar por"}),Object(yc.jsxs)("select",{className:"form-control ",name:"orderby",id:"orderby",value:a.orderby,onChange:c,children:[Object(yc.jsx)("option",{value:"created_at",children:"Fecha de registro"}),Object(yc.jsx)("option",{value:"updated_at",children:"Fecha de modificacion"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"order",children:"Mostrar por"}),Object(yc.jsxs)("select",{className:"form-control ",name:"order",id:"order",value:a.order,onChange:c,children:[Object(yc.jsx)("option",{value:"asc",children:"Antiguos"}),Object(yc.jsx)("option",{value:"desc",children:"Recientes"})]})]}),Object(yc.jsxs)("li",{className:"nav-item p-2",children:[Object(yc.jsx)("label",{htmlFor:"itemsPage",children:"Numero de pedidos"}),Object(yc.jsxs)("select",{className:"form-control ",name:"itemsPage",id:"itemsPage",value:a.itemsPage,onChange:c,children:[Object(yc.jsx)("option",{value:"10",children:"ver 10"}),Object(yc.jsx)("option",{value:"20",children:"ver 20"}),Object(yc.jsx)("option",{value:"50",children:"ver 50"}),Object(yc.jsx)("option",{value:"100",children:"ver 100"})]})]})]}):null]})})]}),"edit"===e.panel?Object(yc.jsx)(Ar,{table:"orders",idRow:n.id}):null]})})}var Ti={page:1,orderby:"created_at",order:"desc",itemsPage:10,status:0,search:""};function Di(e){var t=Object(xc.useState)({panel:"inbox",options:Ti,order:{}}),a=Object(hc.a)(t,2),n=a[0],c=a[1],s=e.match.params.id;return Object(xc.useEffect)((function(){c(Object(o.a)(Object(o.a)({},n),{},{panel:s?"edit":"inbox"}))}),[s]),Object(yc.jsx)(gr.Provider,{value:Object(o.a)(Object(o.a)({},n),{},{set:c}),children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col-sm-12 col-md-2",children:Object(yc.jsx)(Ii,{})}),Object(yc.jsxs)("div",{className:"col-sm-12 col-md-10",children:["inbox"===n.panel&&Object(yc.jsx)(yr,{}),"newOrder"===n.panel&&Object(yc.jsx)(Ar,Object(o.a)({},e)),"pending"===n.panel&&Object(yc.jsx)("p",{children:"Pendientes"}),"reports"===n.panel&&Object(yc.jsx)("p",{children:"Reportes"})]})]})})}function Pi(){var e,t=Object(xc.useContext)(wc),a=t.auth,n=t.getNotifications,s=t.setNotifications,r=Object(xc.useState)({notifications:[],loading:!0,mainRole:a.roles}),i=Object(hc.a)(r,2),l=i[0],d=i[1],u=l.notifications,j=l.loading,b=l.mainRole,m=u?u.length:0,h=u.slice(0,10),x=function(){n().then((function(e){d(Object(o.a)(Object(o.a)({},l),{},{notifications:e,loading:!1}))})).catch((function(){d(Object(o.a)(Object(o.a)({},l),{},{loading:!1}))}))},O=function(e,t){-1===t&&e.preventDefault(),s({id:t})};return Object(xc.useEffect)((function(){return x(),e=setInterval((function(){console.log("[Orus system] check notifications"),d(Object(o.a)(Object(o.a)({},l),{},{loading:!0})),x()}),6e4),function(){clearInterval(e)}}),[]),Object(yc.jsxs)("li",{className:"nav-item dropdown",children:[Object(yc.jsx)("a",{className:"nav-link","data-toggle":"dropdown",href:"#end",children:j?Object(yc.jsx)("i",{className:"fas fa-spinner fa-spin"}):Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("i",{className:"far fa-bell"}),m?Object(yc.jsx)("span",{className:"badge badge-warning navbar-badge",children:m}):null]})}),Object(yc.jsxs)("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[Object(yc.jsxs)("span",{className:"dropdown-header",children:[m," Notificaciones"]}),Object(yc.jsx)("div",{className:"dropdown-divider"}),h.map((function(e){var t=e.type.split("\\",3),a="general",n="fa-file",s=_c()(e.created_at).fromNow(),r="#end";return"ExamNotification"===t[2]&&("doctor"===b?(a="Examen creado",r="/consultorio/registro/"+e.data.id):(a="Examen actualizado",r="/pedidos/registro"),n="fa-file-alt"),Object(yc.jsxs)(c.b,{to:r,className:"dropdown-item",onClick:function(t){O(t,e.id)},children:[Object(yc.jsx)("i",{className:"fas "+n+" mr-1"})," ",a,Object(yc.jsx)("span",{className:"float-right text-sm text-muted",children:s})]},e.id)})),m?Object(yc.jsxs)(xc.Fragment,{children:[Object(yc.jsx)("div",{className:"dropdown-divider"}),Object(yc.jsx)("a",{href:"#end",className:"dropdown-item dropdown-footer",onClick:function(e){e.preventDefault(),O(e,-1)},children:"Marcar todas."})]}):null]})]})}function Ai(){return Object(yc.jsxs)("nav",{className:"main-header navbar navbar-expand navbar-dark navbar-lightblue",children:[Object(yc.jsx)("ul",{className:"navbar-nav",children:Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsx)("a",{className:"nav-link","data-widget":"pushmenu",href:"#navbar",role:"button",onClick:function(e){e.preventDefault(),window.$("#body").toggleClass("sidebar-open"),window.$("#body").toggleClass("sidebar-collapse")},children:Object(yc.jsx)("i",{className:"fas fa-bars"})})})}),Object(yc.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(yc.jsxs)("li",{className:"nav-item dropdown",children:[Object(yc.jsx)("a",{href:"#end",className:"nav-link","data-toggle":"dropdown",children:Object(yc.jsx)("i",{className:"far fa-comments"})}),Object(yc.jsxs)("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[Object(yc.jsx)("span",{className:"dropdown-header",children:"Sin comentarios"}),Object(yc.jsx)("div",{className:"dropdown-divider"})]})]}),Object(yc.jsx)(Pi,{})]})]})}function Bi(){var e,t,a,n,c,r,i,l=Object(xc.useContext)(wc),d=l.auth,u=l.setBranch,j=Object(xc.useContext)(Ec),b=Object(pc.g)().pathname.split("/"),m=(b&&b.length?b:["dashboard"]).filter((function(e){return![""].includes(e)}))[0],h=d.branch,x=Object(xc.useState)({showChangeBranchs:!1,date:_c()().format("LLLL"),branchSelect:h.id}),O=Object(hc.a)(x,2),p=O[0],f=O[1],v=null!==(e=null===(t=j.data)||void 0===t?void 0:t.filter((function(e){return"branches"===e.name})))&&void 0!==e?e:[],g=Object(s.c)();g(le.setLoggin(d)),g(Hn.setBranches(v));var N=function(){f(Object(o.a)(Object(o.a)({},p),{},{showChangeBranchs:!1}))},y=function(){var e=p.branchSelect;if(N(),!e)return console.error("[Orus System][ERROR] branch id is empty"),void window.location.reload();window.Swal.fire({text:"\xbfRealmente desea cambiarse de sucursal?",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then((function(t){t.dismiss||u(e).then((function(e){e?window.location.reload():window.Swal.fire({icon:"error",text:"Lo sentimos, hay un problema de comunicacion con el servidor. Comfirme el IP.",showConfirmButton:!1,timer:3e3,position:"top center"})}))}))};return Object(yc.jsxs)("div",{className:"content-header",children:[Object(yc.jsx)("div",{className:"container-fluid",children:Object(yc.jsxs)("div",{className:"row",children:[Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("h1",{className:"m-0 text-dark text-capitalize",children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-file"})," ",m]})}),Object(yc.jsxs)("div",{className:"text-center col",children:[Object(yc.jsxs)("small",{className:"p-2 badge badge-secondary text-capitalize",alt:"conectado a",title:"conectado a",children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-wifi text-success"}),null===(a=j.server)||void 0===a?void 0:a.host,null!==(n=j.server)&&void 0!==n&&n.port&&"80"!==(null===(c=j.server)||void 0===c?void 0:c.port)?":".concat(null===(r=j.server)||void 0===r?void 0:r.port):null]}),Object(yc.jsxs)("small",{className:"p-2 mt-1 ml-1 badge badge-secondary text-capitalize",alt:"Almacenando en",title:"Almacenando en",children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-server text-success"}),null!==(i=d.permissions)&&void 0!==i&&i.includes("auth.changeBranch")?Object(yc.jsx)("a",{href:"#link",className:"text-white",onClick:function(e){e.preventDefault(),f(Object(o.a)(Object(o.a)({},p),{},{showChangeBranchs:!0}))},children:h.name}):h.name]}),Object(yc.jsxs)("small",{className:"p-2 mt-1 ml-2 badge badge-secondary text-capitalize",alt:"Usuario conectado",title:"Usuario conectado",children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-user text-info"})," ",d.username]}),p.showChangeBranchs?Object(yc.jsx)(Fs,{title:"Cambiar de sucursal",body:function(){var e=p.branchSelect;return Object(yc.jsxs)("div",{className:"form-group",children:[Object(yc.jsx)("label",{children:"Seleccione la sucursal"}),Object(yc.jsx)("select",{className:"form-control text-capitalize",onChange:function(e){var t=e.target;return f(Object(o.a)(Object(o.a)({},p),{},{branchSelect:parseInt(t.value)}))},defaultValue:null===h||void 0===h?void 0:h.id,children:v.map((function(e){return Object(yc.jsx)("option",{value:e.id,children:e.data.name},e.id)}))}),Object(yc.jsx)("div",{className:"mt-2 text-right",children:Object(yc.jsx)("button",{className:"btn btn-default",type:"button",onClick:y,disabled:e===(null===h||void 0===h?void 0:h.id),children:"Cambiar"})})]})}(),handleCancel:N}):null]}),Object(yc.jsx)("div",{className:"col",children:Object(yc.jsxs)("h6",{className:"text-right text-muted",children:[Object(yc.jsx)("i",{className:"mr-1 fas fa-calendar"})," ",p.date]})})]})}),Object(yc.jsx)("hr",{})]})}function Fi(){var e=Object(xc.useContext)(wc),t=e.auth,a=e.outSession,n="Optica Madero",s=Object(pc.g)().pathname.replace("/",""),r="/img/avatars/avatar5.png";return"ventas"===t.roles&&(r="/img/avatars/avatar2.png"),"admin"===t.roles&&(r="/img/avatars/avatar3.png"),2===t.idUser&&(r="/img/avatars/avatar4.png"),Object(yc.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary",children:[Object(yc.jsxs)(c.b,{to:"/",className:"brand-link",children:[Object(yc.jsx)("img",{src:"/img/logo.png",alt:n+" logo ",className:"brand-image img-circle elevation-2",style:{opacity:.8,maxHeight:16}}),Object(yc.jsx)("span",{className:"brand-text font-weight-light text-uppercase",children:n})]}),Object(yc.jsxs)("div",{className:"sidebar",children:[Object(yc.jsxs)("div",{className:"pb-3 mt-3 mb-3 user-panel d-flex",children:[Object(yc.jsx)("div",{className:"image",children:Object(yc.jsx)("img",{src:r,className:"img-circle elevation-2",alt:t.name})}),Object(yc.jsx)("div",{className:"info",children:Object(yc.jsxs)("a",{href:"#end",className:"d-block text-capitalize",children:[t.name,Object(yc.jsxs)("small",{className:"text-lowercase",children:["(",t.username,")"]}),Object(yc.jsx)("br",{}),Object(yc.jsx)("span",{className:"badge badge-light",children:"admin"!==t.roles?"ventas"===t.roles?"Ventas":"Optometrista":"Administrador"})]})})]}),Object(yc.jsx)("nav",{className:"mt-2",children:Object(yc.jsxs)("ul",{className:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:["admin"===t.roles?Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)(c.b,{to:"/",className:""===s?"nav-link active":"nav-link",children:[Object(yc.jsx)("i",{className:"nav-icon fas fa-tachometer-alt"}),Object(yc.jsxs)("p",{children:["Dashboard",Object(yc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}):null,Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)(c.b,{to:"/contactos",className:"contactos"===s?"nav-link active":"nav-link",children:[Object(yc.jsx)("i",{className:"nav-icon fas fa-address-book"}),Object(yc.jsxs)("p",{children:["Contactos",Object(yc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)(c.b,{to:"/consultorio",className:"consultorio"===s||""===s&&"doctor"===t.roles?"nav-link active":"nav-link",children:[Object(yc.jsx)("i",{className:"nav-icon fas fa-notes-medical"}),Object(yc.jsxs)("p",{children:["Examenes",Object(yc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),"doctor"!==t.roles?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)(c.b,{to:"/pedidos",className:"pedidos"===s||""===s&&"ventas"===t.roles?"nav-link active":"nav-link",children:[Object(yc.jsx)("i",{className:"nav-icon fas fa-clipboard-list"}),Object(yc.jsxs)("p",{children:["Pedidos",Object(yc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)(c.b,{to:"/notas",className:"notas"===s?"nav-link active":"nav-link",children:[Object(yc.jsx)("i",{className:"nav-icon fas fa-cash-register"}),Object(yc.jsxs)("p",{children:["Ventas",Object(yc.jsx)("i",{className:"right fas fa-angle-left"})]})]})})]}):null,"admin"===t.roles?Object(yc.jsxs)(yc.Fragment,{children:[Object(yc.jsx)("li",{className:"almacen"===s?"nav-item has-treeview menu-open":"nav-item has-treeview ",children:Object(yc.jsxs)(c.b,{to:"/almacen",className:"almacen"===s?"nav-link active":"nav-link",children:[Object(yc.jsx)("i",{className:"nav-icon fas fa-database"}),Object(yc.jsxs)("p",{children:["Almacen",Object(yc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)(c.b,{to:"/usuarios",className:"usuarios"===s?"nav-link active":"nav-link",children:[Object(yc.jsx)("i",{className:"nav-icon fas fa-user"}),Object(yc.jsxs)("p",{children:["Usuarios",Object(yc.jsx)("i",{className:"right fas fa-angle-left"})]})]})}),Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)(c.b,{to:"/configuraciones",className:"configuraciones"===s?"nav-link active":"nav-link",children:[Object(yc.jsx)("i",{className:"nav-icon fas fa-tools"}),Object(yc.jsxs)("p",{children:["Configuraciones",Object(yc.jsx)("i",{className:"right fas fa-angle-left"})]})]})})]}):null,Object(yc.jsx)("li",{className:"nav-item",children:Object(yc.jsxs)(c.b,{to:"/",className:"nav-link",onClick:function(e){e.preventDefault(),window.Swal.fire({title:"Session",text:"\xbfEsta seguro de cerrar la sesion?",icon:"question",showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Si",cancelButtonText:"Cancelar"}).then((function(e){e.dismiss||(a(),setTimeout((function(){window.location.reload()}),2e3))}))},children:[Object(yc.jsx)("i",{className:"nav-icon fas fa-sign-out-alt"}),Object(yc.jsx)("p",{children:"Cerrar sesion"})]})})]})})]})]})}function Mi(e){var t=e.children,a={};return Object(yc.jsxs)("div",{className:"wrapper",children:[Object(yc.jsx)(Ai,{logOut:function(){},data:a,page:function(){}}),Object(yc.jsx)(Fi,{companyName:"company",user:a,page:function(){},logOut:function(){},active:"active"}),Object(yc.jsxs)("div",{className:"content-wrapper",children:[Object(yc.jsx)(Bi,{}),Object(yc.jsx)("div",{className:"content",children:Object(yc.jsx)("div",{className:"container-fluid",children:Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"col-lg-12",children:t})})})})]})]})}function zi(e){var t=e.auth;return Object(yc.jsx)(Ic,{children:Object(yc.jsxs)(Mi,{children:[Object(yc.jsx)(pc.a,{exact:!0,path:"/",render:function(e){switch(t.roles){case"doctor":return Object(yc.jsx)(vr,Object(o.a)({},e));case"ventas":return Object(yc.jsx)(ti,Object(o.a)({},e));default:return Object(yc.jsx)(Ci,Object(o.a)({},e))}}}),Object(yc.jsx)(pc.a,{path:"/usuarios/registro/:id?",render:function(e){return Object(yc.jsx)(Fc,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yc.jsx)(pc.a,{path:"/usuarios/:id?",render:function(e){return Object(yc.jsx)(Li,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yc.jsx)(pc.a,{path:"/almacen/:id?",render:function(e){return Object(yc.jsx)(ms,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yc.jsx)(pc.a,{path:"/contactos/:id?",render:function(e){return Object(yc.jsx)(Us,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yc.jsx)(pc.a,{path:"/consultorio/:id?",render:function(e){return Object(yc.jsx)(vr,Object(o.a)({},e))}}),Object(yc.jsx)(pc.a,{path:"/configuraciones",render:function(e){return Object(yc.jsx)(Ys,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}}),Object(yc.jsx)(pc.a,{path:"/pedidos/:id?",render:function(e){return Object(yc.jsx)(Di,Object(o.a)({},e))}}),Object(yc.jsx)(pc.a,{path:"/notas/:id?",render:function(e){return Object(yc.jsx)(pi,Object(o.a)(Object(o.a)({},e),{},{page:function(){}}))}})]})})}function Gi(){return Object(yc.jsxs)("div",{className:"mx-auto p-4 mt-5 w-50",children:[Object(yc.jsx)("h1",{children:"Portal Optica Madero"}),Object(yc.jsx)("p",{children:"Para accesar al portal inicia session aqui: "}),Object(yc.jsx)("button",{onClick:function(){window.location.href="/login"},type:"button",children:"Acceder"})]})}function Ui(){return Object(yc.jsx)(yc.Fragment,{children:Object(yc.jsx)(pc.a,{exact:!0,path:"/",render:function(e){return Object(yc.jsx)(Gi,{})}})})}function Vi(){var e=Object(s.c)();return Object(xc.useEffect)((function(){e(v.changeNamePage(""))}),[]),Object(yc.jsx)("div",{className:"container text-center font-weight-bold d-flex justify-content-center mt-5",children:Object(yc.jsx)("h1",{children:"404 Not Found"})})}function Ri(){var e,t,a,n=Object(pc.f)(),c=Object(xc.useContext)(wc),s=localStorage.getItem("OrusSystem"),r={protocol:window.location.protocol.replace(":",""),host:window.location.hostname,port:window.location.port},i=s?JSON.parse(s):r,l="".concat(null!==(e=i.protocol+"://")&&void 0!==e?e:"").concat(null!==(t=i.host)&&void 0!==t?t:"").concat(null!==(a=":"+i.port)&&void 0!==a?a:""),d=Object(xc.useState)({load:!1,email:"",password:"",txtHost:l,hostShow:!l}),u=Object(hc.a)(d,2),j=u[0],b=u[1],m=Object(xc.useRef)(),h=Object(xc.useRef)(),x=function(){if(!j.email)return window.Swal.fire({icon:"error",text:"El campo de correo electronico es requerido",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){m.current.focus()}));if(/^@./.test(j.email)){var e=j.email.replace("@","");j.email="".concat(e,"@domain.com")}else if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(j.email))return window.Swal.fire({icon:"error",text:"El usuario debe de ser un correo valido",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){m.current.focus()}));return["domain.com","opticamadero.com"].includes(j.email.split("@")[1])?j.password?j.password.length<8?window.Swal.fire({icon:"error",text:"El password debe de tener al menos 8 caracteres",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){h.current.focus()})):(b(Object(o.a)(Object(o.a)({},j),{},{load:!0})),void c.setSession({email:j.email,password:j.password}).then((function(e){if(b(Object(o.a)(Object(o.a)({},j),{},{load:!1})),!e.status){var t,a,c=e.message;if(null!==(t=e.data)&&void 0!==t&&t.errors)c=null===(a=e.data)||void 0===a?void 0:a.errors[Object.keys(e.data.errors)[0]][0];return!c&&e.data&&(c=e.data.message),window.Swal.fire({icon:"error",text:c,showConfirmButton:!1,timer:2500,position:"top center"})}n.push("/")}))):window.Swal.fire({icon:"error",text:"El campo de constrase\xf1a es requerido",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){h.current.focus()})):window.Swal.fire({icon:"error",text:"El dominio de este correo no es aceptado",showConfirmButton:!1,timer:2500,position:"top center"}).then((function(){b(Object(o.a)(Object(o.a)({},j),{},{email:""}))}))},O=function(e,t){"Enter"===e&&t()},p=function(){var e=j.txtHost;if(!e)return window.Swal.fire({icon:"error",text:"El campo de servidor no puede estar vacio",showConfirmButton:!1,timer:2500,position:"top center"});var t,a,n,c=e.split(":");2===c.length?(n=window.location.protocol.replace(":",""),t=c[0].replace("//",""),a=c[1]):3===c.length?(n=c[0],t=c[1].replace("//",""),a=c[2]):(n=window.location.protocol.replace(":",""),t=window.location.hostname,a=window.location.port),localStorage.setItem("OrusSystem",JSON.stringify(Object(o.a)(Object(o.a)({},i),{},{protocol:n,host:t,port:a,token:""}))),b(Object(o.a)(Object(o.a)({},j),{},{hostShow:!1})),window.Swal.fire({icon:"success",text:"Cambio de servidor exitoso",showConfirmButton:!1,timer:2500,position:"top center"})},f=function(){j.email&&h.current.focus()};return Object(xc.useEffect)((function(){var e;null!==(e=c.auth)&&void 0!==e&&e.isLogged&&n.push("/")}),[]),Object(yc.jsx)("div",{className:"login-page",children:Object(yc.jsxs)("div",{className:"login-box",children:[Object(yc.jsx)("div",{className:"login-logo",children:Object(yc.jsxs)("a",{href:"#logo",onClick:function(e){return e.preventDefault()},children:[Object(yc.jsx)("b",{className:"text-primary",children:"Orus"})," LTE"]})}),Object(yc.jsx)("div",{className:"rounded shadow-lg card",children:Object(yc.jsxs)("div",{className:"card-body login-card-body",children:[Object(yc.jsxs)("p",{className:"login-box-msg text-uppercase",children:[Object(yc.jsx)("span",{className:"p-2 badge badge-secondary",children:"Optica Madero"}),Object(yc.jsx)("br",{}),Object(yc.jsx)("small",{className:"text-muted text-lowercase",children:"<".concat(j.txtHost,">")})]}),Object(yc.jsxs)("form",{autoComplete:"off",children:[Object(yc.jsxs)("div",{className:"mb-0 input-group",children:[Object(yc.jsx)("input",{type:"email",className:"form-control text-lowercase",placeholder:"Correo electonico",onChange:function(e){var t=e.target;return b(Object(o.a)(Object(o.a)({},j),{},{email:t.value.toLowerCase()}))},onKeyPress:function(e){var t=e.key;return O(t,f)},defaultValue:j.email,autoComplete:"false",ref:m,autoFocus:!j.email}),Object(yc.jsx)("div",{className:"input-group-append",children:Object(yc.jsx)("div",{className:"input-group-text",children:Object(yc.jsx)("span",{className:"fas fa-user"})})})]}),Object(yc.jsxs)("div",{className:"mt-3 input-group",children:[Object(yc.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",onChange:function(e){var t=e.target;return b(Object(o.a)(Object(o.a)({},j),{},{password:t.value}))},onKeyPress:function(e){var t=e.key;return O(t,x)},defaultValue:j.password,autoComplete:"false",ref:h,autoFocus:!!j.email&&!j.password}),Object(yc.jsx)("div",{className:"input-group-append",children:Object(yc.jsx)("div",{className:"input-group-text",children:Object(yc.jsx)("span",{className:"fas fa-lock"})})})]}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsxs)("div",{className:"my-3 col-12",children:[Object(yc.jsxs)("a",{href:"#tools",onClick:function(e){e.preventDefault(),b(Object(o.a)(Object(o.a)({},j),{},{hostShow:!j.hostShow}))},className:"text-muted",children:[Object(yc.jsx)("i",{className:"mx-1 fas fa-wifi"})," Servidor"]}),j.hostShow?Object(yc.jsxs)("div",{className:"mb-3 input-group",children:[Object(yc.jsx)("input",{type:"text",className:"form-control",placeholder:"Servidor",autoComplete:"off",onChange:function(e){var t=e.target;return b(Object(o.a)(Object(o.a)({},j),{},{txtHost:t.value.toLowerCase()}))},defaultValue:j.txtHost,onKeyPress:function(e){var t=e.key;return O(t,p)}}),Object(yc.jsx)("div",{className:"input-group-append",children:Object(yc.jsx)("div",{className:"input-group-text",children:Object(yc.jsx)("span",{className:"fas fa-server"})})})]}):null]})}),Object(yc.jsx)("div",{className:"row",children:Object(yc.jsx)("div",{className:"text-center col-12",children:Object(yc.jsx)("button",{type:"button",className:j.load?"btn btn-outline-secondary btn-block":"btn btn-primary btn-block",onClick:x,disabled:!!j.load,children:j.load?Object(yc.jsx)("div",{className:"spinner-border text-secondary",children:Object(yc.jsx)("span",{className:"sr-only",children:"Loading..."})}):"Iniciar session"})})})]})]})})]})})}function Yi(){var e=Object(xc.useContext)(wc).auth;return Object(yc.jsxs)(pc.c,{children:[Object(yc.jsx)(pc.a,{path:"/login",render:function(){return Object(yc.jsx)(Ri,{})}}),null!==e&&void 0!==e&&e.isLogged?Object(yc.jsx)(zi,{auth:e}):Object(yc.jsx)(Ui,{}),Object(yc.jsx)(pc.a,{component:Vi})]})}function qi(){var e=localStorage.getItem("OrusSystem"),t={protocol:window.location.protocol.replace(":",""),host:window.location.hostname,port:window.location.port},a=e?JSON.parse(e):t;return Object(xc.useEffect)((function(){localStorage.setItem("OrusSystem",JSON.stringify(a))}),[]),Object(yc.jsx)(c.a,{children:Object(yc.jsx)(Cc,{children:Object(yc.jsx)(s.a,{store:mc,children:Object(yc.jsx)(Yi,{})})})})}Object(n.render)(Object(yc.jsx)(qi,{}),document.getElementById("root"))},35:function(e,t){e.exports={dollarUS:Intl.NumberFormat("en-US",{style:"currency",currency:"USD"})}}},[[174,1,2]]]);
//# sourceMappingURL=main.181345da.chunk.js.map