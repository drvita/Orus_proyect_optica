{"version":3,"sources":["components/Layouts/notify.jsx","components/Layouts/navtop.jsx","components/Layouts/menu.jsx","components/Layouts/breadcrumb.jsx","components/Layouts/footer.jsx","components/Layouts/headerTable.jsx","components/Layouts/pagination.jsx","components/Users/index_filter.jsx","components/Layouts/actionsTable.jsx","components/Users/index.jsx","components/Users/userNameInput.jsx","components/Users/userEmailInput.jsx","components/Users/add.jsx","components/Store/index_filter.jsx","components/Store/index.jsx","components/Store/add_lote.jsx","components/Store/input_category.jsx","components/Store/input_suppliers.jsx","components/Store/input_brand.jsx","components/Layouts/codeLentString.jsx","components/Store/add.jsx","components/Store/category_list.jsx","components/Store/categories.jsx","components/Store/brands.jsx","components/Store/inventory.jsx","components/Contacts/index_filter.jsx","components/Contacts/index.jsx","components/Contacts/mapa.jsx","components/Exam/graduacionExam.jsx","components/Exam/recomendaciones.jsx","components/Exam/listsExams.jsx","components/Contacts/nameInput.jsx","components/Contacts/emailInput.jsx","components/Contacts/add_personal.jsx","components/Contacts/add_domicilio.jsx","components/Contacts/add_telefonos.jsx","components/Contacts/add.jsx","components/Contacts/addByContact.jsx","components/Layouts/tools_category.jsx","components/Layouts/tools.jsx","components/Exam/index_filter.jsx","components/Exam/index.jsx","components/Contacts/easyContact.jsx","components/Contacts/searchContactCard.jsx","components/Exam/generalesExam.jsx","components/Exam/interrogatoriosExam.jsx","components/Exam/keraRetExam.jsx","components/Exam/diabetesExam.jsx","components/Exam/agudezaExam.jsx","components/Exam/diagnosticoExam.jsx","components/Exam/observacionesExam.jsx","components/Layouts/messenger.jsx","components/Contacts/contactDataVertical.jsx","components/Exam/print_exam.jsx","components/Exam/add.jsx","components/Order/index_filter.jsx","components/Order/index.jsx","components/Order/itemsOrder.jsx","components/Order/labOrder.jsx","components/Order/statusOrder.jsx","components/Order/bicelacionOrder.jsx","components/Order/garantiaOrder.jsx","components/Order/add.jsx","components/Sales/index_filter.jsx","components/Sales/index.jsx","components/Sales/abonoAdd.jsx","components/Sales/print_pay.jsx","components/Sales/abonos.jsx","components/Sales/print_sale.jsx","components/Sales/edoCuenta.jsx","components/Sales/add.jsx","components/Sales/reportPaymentsDetails.jsx","components/Sales/reportPays.jsx","components/Sales/reportBank.jsx","components/Dashboard/cash.jsx","components/Dashboard/dateUser.jsx","components/Dashboard/boxCut.jsx","components/Dashboard/index.jsx","components/Layouts/notifyAll.jsx","Routers.jsx","components/Layouts/login.jsx","index.js"],"names":["Notify","props","handleClickRead","e","id","notify","data","host","token","preventDefault","console","log","fetch","method","body","JSON","stringify","signal","headers","Accept","Authorization","then","response","a","back","status","json","ok","Error","message","success","verifyUser","error","catch","logOut","isLogged","count","state","res","exception","username","unreadNotifications","length","navigator","window","Notification","permission","options","serviceWorker","getRegistration","reg","showNotification","setState","notifications","rol","controller","AbortController","this","abort","setInterval","localStorage","setItem","countNotify","className","data-toggle","href","map","index","notiFyType","type","split","title","icon","time","moment","created_at","fromNow","url","page","to","key","onClick","contact_id","exam_id","Fragment","Component","Navtop","data-widget","role","$","toggleClass","Menu","changePage","handleLogOut","Swal","fire","text","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","result","dismiss","value","companyName","user","active","avatar","idUser","src","alt","style","opacity","name","data-accordion","Breadcrumb","date","format","Footer","HeaderTable","handleOrder","item","order","orderby","actions","col","filter","scope","cursor","Pagination","handleChangePage","meta","total","current_page","Math","ceil","per_page","toFixed","last_page","Filter","onKeyPressSearch","setFilters","onClickClean","changeFilters","modal","target","search","data-target","tabIndex","data-dismiss","aria-label","aria-hidden","placeholder","onChange","onKeyPress","ActionsTable","handleDelete","delete","edit","Users","load","toUpperCase","showLoaderOnConfirm","preConfirm","confirm","showConfirmButton","timer","getUsers","statusText","users","sdd","parse","getItem","colSpan","Object","keys","email","session","last_activity","updated_at","UserName","handleChange","x","replace","toLowerCase","test","validUser","bgColor","validate","varLocalStorage","timeFetch","clearTimeout","setTimeout","searchUser","alert","autoComplete","autoFocus","required","minLength","maxLength","pattern","validEmail","UserAdd","catchInputs","handleSave","validUserName","validUserEmail","password","history","goBack","getUser","match","params","send","onSubmit","disabled","ip_address","user_agent","user_data","Store","onchangeSearch","getItems","items","codigo","marca","producto","unidad","cantidades","precio","proveedor","nombre","lotes","ordenar","buscar","pagina","errors","StoreLote","tr","parentNode","classList","add","ls","deleteColor","clearInterval","remove","loteNew","handelGetLots","refresh","bill","cost","price","amount","lote","handleNewLote","bind","pages","i","push","width","lot","factura","costo","min","validInputs","store_items_id","InputCategory","handleChangeCategory","categoryData","parseInt","category","find","categoryName","textSelect","categoryRef","ref","cat","categoria","SuppliersInput","getSuppliers","suppliers_data","supplier","handleChangeSupplier","supplierRef","sp","InputBrand","handleChangeBrand","getBrands","brands","brandsName","brand","brandRef","string","StoreAdd","handleNameLent","grad","stringcode","category2","current","selectedIndex","trim","category3","category4","toString","handleCodeLent","Codestring","handleCodeString","code","setNew","codebar","brand_id","unit","cant","category_id","category_id1","category_id2","category_id3","category_id4","category_list2","category_list3","category_list4","getCategory","category_list1","codeRef","nameRef","depende_de","hijos","c_barra","graduacion","category_data","category1","React","createRef","next","codeValue","nameValue","CategoryList","handleClickDelete","category_raiz","indexCat","splice","handleClickSave","nameInput","focus","getCategoriesMain","CategoryData","undefined","categoryid","ppage","handleClickAdd","categoryDataName","categorySelect","last","input","Categories","handleChangeState","category_hijos1","category_hijos2","category_hijos3","category_hijos4","Brands","deleteBrand","indexItem","saveBrand","changeInput","Inventory","catid","handleClickCat","catData_1","catData_2","sons","catid_1","catid_2","catid_3","catData_3","getCategories","header","parseFloat","cil","rangoInf","rangoSup","row","zero","children","h","business","Contacts","getContacts","contacts","contact","rfc","tipo","telefonos","t_movil","enUso","negocio","Mapa","eventLoadMap","request","query","calle","colonia","municipio","estado","cp","fields","service","google","maps","places","PlacesService","findPlaceFromQuery","results","markers","setMap","place","marker","Marker","position","geometry","location","formatted_address","addListener","address","changeAddress","setCenter","googlePlaceAPILoad1","mapCenter","LatLng","Map","document","getElementById","center","zoom","height","GraduacionExam","checked","val","onChangeInput","readOnly","cilindrod","cilindroi","esferaod","esferaoi","ejeod","ejeoi","adiciond","adicioni","adicion_media_od","adicion_media_oi","dpod","dpoi","alturaod","alturaoi","lcmarca","lcgod","lcgoi","max","step","Recomendaciones","handleCodeName","handleClickCategory","nameCategory","category_id_2","category_id_3","category_list_2","category_list_3","handleCategoryChange","gradod","gradoi","category_list","update","ListsExams","handleSaveExam","paciente","edad","handleDataExam","exam","handleChangeInput","ChangeInput","handleClickDeleteExam","handleClickSelect","handleNewOrder","getExams","handleNewExam","client","examEdit","select","datos","utc","local","observaciones","category_ii","Date","isSame","examToday","newExam","NameInput","eraseTilde","RegExp","stringOk","contacto","validName","list","EmailInput","emailOriginal","emailContact","AddPersonal","birthday","AddDomicilio","AddTelefonos","t_casa","t_oficina","verify","ContactsAdd","domicilio","telnumbers","empresa","f_nacimiento","timeSave","AddContact","ToolsCategory","category_select","category_hijos","category_hijos_3","newItem","padre","clickSave","company","server","clickSaveUser","Exam","handleFilter","exams","order_id","fecha","easyContact","changeValue","setContac","storage","searchContact","sendAge","dataContact","getIdContact","getContact","handleClickChange","handleClickContact","word","handleSearcContact","contactInput","onBlur","GeneralesExam","aria-expanded","aria-controls","aria-labelledby","data-parent","pc","htmlFor","pc_time","tablet","tablet_time","movil","movil_time","lap","lap_time","frontal","occipital","generality","cefalea","temporaod","temporaoi","c_frecuencia","c_intensidad","InterrogatorioExam","interrogatorio","coa","rows","aopp","aopf","KeraRetExam","keratometriaod","keratometriaoi","rsod","rsoi","DiabetesExam","d_fclod","d_fcloi","d_time","d_media","d_test","d_fclod_time","d_fcloi_time","oftalmoscopia","AgudezaExam","cvod","cvoi","avslod","avsloi","avcgaod","avcgaoi","avfod","avfoi","avf2o","DiagnosticoExam","diagnostico","presbicie","piod","pioi","txoftalmico","ObservacionesExam","messenger","handleMessege","sendMessenger","table","idRow","getMessengers","messages","pagado","created_user","mensaje","contactDataVertical","printExam","ExamAdd","handleStatus","getExam","pantalleooi","pantalleood","temporal","txoptico","item1","item2","hoy","now","registro","toDay","nameItem","obj","print","setStatusString","getPedidos","pedidos","pedido","caja","laboratorio","folio_lab","examen","nota","Items","handelClickItemDb","subtotal","cantidad","inStorage","out","itemsDb","deleteItem","addItem","itemNew","handleNewItem","descripcion","inputItem","inputCant","db","maxWidth","addCancel","labOrder","supplies","lab_id","s","npedidolab","statusOrder","bicelacionOrder","ncaja","garantiaOrder","OrderAdd","getExamById","getOrder","productos","usuario","created","random","substring","showTabActive","ventas","venta","cliente","AddAbono","getBaks","listBank","handlePay","metodopago","bank_id","auth","details","sale_id","saleId","contactId","banco","onChangeValue","pay","bank","printPay","ListAbonos","getPayments","content","pri","contentWindow","open","write","innerHTML","close","handleLoad","SetMethodPayment","sale","abonos","abono","metodo","Autorizacion","aria-disabled","folio","printSale","descuento","saldo","abonado","totalItems","fontSize","fontFamily","edoCuenta","SaleAdd","getSales","chat","ReportPaymentsDetails","getSaleDay","saleDay","saleUser","payments","metodoname","ReportPay","changeState","donutChartCanvas","get","getContext","donutOptions","maintainAspectRatio","responsive","labels","values","efectivo","donutData","char","destroy","mp","datasets","backgroundColor","Chart","ReportBank","bankname","Cash","deleteAtm","getAtms","sendAtm","atmDate","atmUser","atm","atms","DateUser","BoxCut","Dashboard","NotifyAll","handleClickViewNotify","seccion","checkNotify","read_at","Routers","handlePage","handleTitleSection","pathname","locations","dir","path","render","extric","Main","pressEnter","hostShow","showTools","handleLogin","loginFunction","App","login","removeItem","hostname","userAgent"],"mappings":"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","file":"static/js/main.fb3dbe1d.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Notify extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      notifications: [],\r\n      rol: -1,\r\n      count: 0,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.verifyUser();\r\n    setInterval(() => {\r\n      console.log(\"[ORUS] Cron de verificacion de usuario\");\r\n      this.verifyUser();\r\n    }, 60000);\r\n  }\r\n  componentDidUpdate() {\r\n    localStorage.setItem(\"OrusNotify\", JSON.stringify(this.state));\r\n  }\r\n\r\n  render() {\r\n    const { notifications, rol } = this.state,\r\n      countNotify = notifications ? notifications.length : 0;\r\n\r\n    return (\r\n      <li className=\"nav-item dropdown\">\r\n        <a className=\"nav-link\" data-toggle=\"dropdown\" href=\"#end\">\r\n          <i className=\"far fa-bell\"></i>\r\n          {countNotify ? (\r\n            <span className=\"badge badge-warning navbar-badge\">\r\n              {countNotify}\r\n            </span>\r\n          ) : null}\r\n        </a>\r\n        <div className=\"dropdown-menu dropdown-menu-lg dropdown-menu-right\">\r\n          <span className=\"dropdown-header\">{countNotify} Notificaciones</span>\r\n          <div className=\"dropdown-divider\"></div>\r\n          {notifications.map((notify, index) => {\r\n            const notiFyType = notify.type.split(\"\\\\\", 3);\r\n            let title = \"general\",\r\n              icon = \"fa-file\",\r\n              time = moment(notify.created_at).fromNow(),\r\n              url = \"#end\",\r\n              page = \"/\";\r\n\r\n            //Cortamos si son más de 10 notificaciones\r\n            if (index > 10) return false;\r\n\r\n            if (notiFyType[2] === \"ExamNotification\") {\r\n              if (rol === 2) {\r\n                title = \"Examen creado\";\r\n                url = \"/consultorio/registro/\" + notify.data.id;\r\n                page = \"/consultorio\";\r\n              } else {\r\n                title = \"Examen actualizado\";\r\n                url = \"/pedidos/registro\";\r\n                page = \"/pedidos\";\r\n              }\r\n              icon = \"fa-file-alt\";\r\n            }\r\n            //console.log(\"Notify num:\", index);\r\n            return (\r\n              <Link\r\n                to={url}\r\n                className=\"dropdown-item\"\r\n                key={notify.id}\r\n                onClick={(e) => {\r\n                  this.props.page(page);\r\n                  this.handleClickRead(e, notify.id);\r\n                  console.log(\r\n                    \"[Notify] estableciendo datos de contacto en uso\"\r\n                  );\r\n                  localStorage.setItem(\r\n                    \"OrusContactInUse\",\r\n                    JSON.stringify({\r\n                      id: notify.data.contact_id,\r\n                      exam_id: notify.data.id,\r\n                    })\r\n                  );\r\n                }}\r\n              >\r\n                <i className={\"fas \" + icon + \" mr-1\"}></i> {title}\r\n                <span className=\"float-right text-muted text-sm\">{time}</span>\r\n              </Link>\r\n            );\r\n          })}\r\n          {countNotify ? (\r\n            <React.Fragment>\r\n              <div className=\"dropdown-divider\"></div>\r\n              <a\r\n                href=\"#end\"\r\n                className=\"dropdown-item dropdown-footer\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleClickRead(e, -1);\r\n                }}\r\n              >\r\n                Marcar como leído.\r\n              </a>\r\n            </React.Fragment>\r\n          ) : null}\r\n          <Link\r\n            to=\"/notificaciones\"\r\n            className=\"dropdown-item dropdown-footer\"\r\n            onClick={(e) => {\r\n              this.props.page(\"/notificaciones\");\r\n            }}\r\n          >\r\n            Ver todas\r\n          </Link>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  handleClickRead = (e, id, notify) => {\r\n    //Constantes\r\n    const { host, token } = this.props.data;\r\n    if (id === -1) e.preventDefault();\r\n\r\n    console.log(\"[ORUS] Marcando notificaciones como leidas\");\r\n    fetch(\"http://\" + host + \"/api/user/readAllNotifications\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        id,\r\n      }),\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((notify) => {\r\n        if (notify.success) {\r\n          console.log(\"[ORUS] Notificaciones leeidas\");\r\n          this.verifyUser();\r\n        } else {\r\n          console.error(\"[ORUS] Sin notificaciones\", notify);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"[ORUS] Notify error \\n\", e);\r\n      });\r\n  };\r\n  verifyUser = () => {\r\n    //Constantes de logueo\r\n    const { data, logOut } = this.props,\r\n      { host, isLogged, token } = data,\r\n      { count } = this.state;\r\n\r\n    //Solo realizamos la verificacion si hay sesion\r\n    if (isLogged && host && token) {\r\n      console.log(\"[ORUS] Verificando usuario\");\r\n      //Realizando verificación de usuarios\r\n      if (token !== \"\" && host !== \"\") {\r\n        fetch(\"http://\" + host + \"/api/user\", {\r\n          method: \"GET\",\r\n          signal: this.signal,\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n        })\r\n          .then((res) => {\r\n            if (!res.ok && token !== \"\") {\r\n              console.error(\"[ORUS] Usuario invalido:\", res);\r\n            }\r\n            return res.json();\r\n          })\r\n          .then((data) => {\r\n            if (data.exception || data.message) {\r\n              logOut();\r\n            } else {\r\n              console.log(\"[ORUS] Usuario validado: \", data.data.username);\r\n              console.log(\r\n                \"[ORUS] Buscando notificaciones nuevas\",\r\n                data.data.unreadNotifications.length\r\n              );\r\n              if (\r\n                data.data.unreadNotifications.length &&\r\n                data.data.unreadNotifications.length !== count\r\n              ) {\r\n                if (\"serviceWorker\" in navigator && \"PushManager\" in window) {\r\n                  console.log(\"[ORUS] Verificando permisos de Push\");\r\n                  if (Notification.permission !== \"denied\") {\r\n                    const title = \"Orus bot\",\r\n                      options = {\r\n                        body: \"Hay notificaciones nuevas\",\r\n                      };\r\n                    navigator.serviceWorker\r\n                      .getRegistration()\r\n                      .then(function (reg) {\r\n                        reg.showNotification(title, options);\r\n                      });\r\n                  }\r\n                }\r\n              }\r\n              this.setState({\r\n                notifications: data.data ? data.data.unreadNotifications : [],\r\n                rol: data.data.rol,\r\n                count: data.data.unreadNotifications.length,\r\n              });\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            console.error(\r\n              \"[ORUS] Verificacion de usuario en Notify, error \\n\",\r\n              error\r\n            );\r\n          });\r\n      }\r\n    } else {\r\n      console.error(\"[ORUS] La sesion ya no esta activa o se perdio el host\");\r\n      logOut();\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Notify from \"./notify\";\r\n\r\nexport default class Navtop extends Component {\r\n  render() {\r\n    const { logOut, data, page } = this.props;\r\n    return (\r\n      <nav className=\"main-header navbar navbar-expand navbar-dark navbar-lightblue\">\r\n        <ul className=\"navbar-nav\">\r\n          <li className=\"nav-item\">\r\n            <a\r\n              className=\"nav-link\"\r\n              data-widget=\"pushmenu\"\r\n              href=\"#end\"\r\n              role=\"button\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                window.$(\"#body\").toggleClass(\"sidebar-open\");\r\n                window.$(\"#body\").toggleClass(\"sidebar-collapse\");\r\n              }}\r\n            >\r\n              <i className=\"fas fa-bars\"></i>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n        <ul className=\"navbar-nav ml-auto\">\r\n          <li className=\"nav-item dropdown\">\r\n            <a href=\"#end\" className=\"nav-link\" data-toggle=\"dropdown\">\r\n              <i className=\"far fa-comments\"></i>\r\n            </a>\r\n            <div className=\"dropdown-menu dropdown-menu-lg dropdown-menu-right\">\r\n              <span className=\"dropdown-header\">Sin comentarios</span>\r\n              <div className=\"dropdown-divider\"></div>\r\n            </div>\r\n          </li>\r\n          <Notify logOut={logOut} data={data} page={page} />\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Menu extends Component {\r\n  render() {\r\n    const { companyName, user, active } = this.props;\r\n    let avatar = \"/img/avatars/avatar5.png\";\r\n    if (user.rol === 1) avatar = \"/img/avatars/avatar2.png\";\r\n    if (!user.rol) avatar = \"/img/avatars/avatar3.png\";\r\n    if (user.idUser === 2) avatar = \"/img/avatars/avatar4.png\";\r\n\r\n    return (\r\n      <aside className=\"main-sidebar sidebar-dark-primary\">\r\n        <Link\r\n          to=\"/\"\r\n          className=\"brand-link\"\r\n          onClick={(e) => {\r\n            this.changePage(\"/\");\r\n          }}\r\n        >\r\n          <img\r\n            src=\"/img/AdminLTELogo.png\"\r\n            alt={companyName + \" logo \"}\r\n            className=\"brand-image img-circle elevation-3\"\r\n            style={{ opacity: 0.8 }}\r\n          />\r\n          <span className=\"brand-text font-weight-light text-uppercase\">\r\n            {companyName}\r\n          </span>\r\n        </Link>\r\n        <div className=\"sidebar\">\r\n          <div className=\"user-panel mt-3 pb-3 mb-3 d-flex\">\r\n            <div className=\"image\">\r\n              <img\r\n                src={avatar}\r\n                className=\"img-circle elevation-2\"\r\n                alt={user.name}\r\n              />\r\n            </div>\r\n            <div className=\"info\">\r\n              <a href=\"#end\" className=\"d-block text-capitalize\">\r\n                {user.name}\r\n                <small className=\"text-lowercase\">({user.username})</small>\r\n                <br />\r\n                <span className=\"badge badge-light\">\r\n                  {user.rol > 0\r\n                    ? user.rol === 1\r\n                      ? \"Ventas\"\r\n                      : \"Optometrista\"\r\n                    : \"Administrador\"}\r\n                </span>\r\n              </a>\r\n            </div>\r\n          </div>\r\n          <nav className=\"mt-2\">\r\n            <ul\r\n              className=\"nav nav-pills nav-sidebar flex-column\"\r\n              data-widget=\"treeview\"\r\n              role=\"menu\"\r\n              data-accordion=\"false\"\r\n            >\r\n              {user.rol !== 2 ? (\r\n                <li className=\"nav-item\">\r\n                  <Link\r\n                    to=\"/\"\r\n                    className={\r\n                      active === \"dashboard\" ? \"nav-link active\" : \"nav-link\"\r\n                    }\r\n                    onClick={(e) => {\r\n                      this.changePage(\"/\");\r\n                    }}\r\n                  >\r\n                    <i className=\"nav-icon fas fa-tachometer-alt\"></i>\r\n                    <p>\r\n                      Dashboard\r\n                      <i className=\"right fas fa-angle-left\"></i>\r\n                    </p>\r\n                  </Link>\r\n                </li>\r\n              ) : null}\r\n              <li className=\"nav-item\">\r\n                <Link\r\n                  to=\"/contactos\"\r\n                  className={\r\n                    active === \"contactos\" ? \"nav-link active\" : \"nav-link\"\r\n                  }\r\n                  onClick={(e) => {\r\n                    this.changePage(\"/contactos\");\r\n                  }}\r\n                >\r\n                  <i className=\"nav-icon fas fa-address-book\"></i>\r\n                  <p>\r\n                    Contactos\r\n                    <i className=\"right fas fa-angle-left\"></i>\r\n                  </p>\r\n                </Link>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <Link\r\n                  to=\"/consultorio\"\r\n                  className={\r\n                    active === \"consultorio\" ? \"nav-link active\" : \"nav-link\"\r\n                  }\r\n                  onClick={(e) => {\r\n                    this.changePage(\"/consultorio\");\r\n                  }}\r\n                >\r\n                  <i className=\"nav-icon fas fa-notes-medical\"></i>\r\n                  <p>\r\n                    Examenes\r\n                    <i className=\"right fas fa-angle-left\"></i>\r\n                  </p>\r\n                </Link>\r\n              </li>\r\n\r\n              {user.rol <= 1 ? (\r\n                <React.Fragment>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/pedidos\"\r\n                      className={\r\n                        active === \"pedidos\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/pedidos\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-clipboard-list\"></i>\r\n                      <p>\r\n                        Pedidos\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/notas\"\r\n                      className={\r\n                        active === \"notas\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/notas\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-cash-register\"></i>\r\n                      <p>\r\n                        Ventas\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                </React.Fragment>\r\n              ) : null}\r\n\r\n              {!user.rol ? (\r\n                <React.Fragment>\r\n                  <li\r\n                    className={\r\n                      active === \"almacen\"\r\n                        ? \"nav-item has-treeview menu-open\"\r\n                        : \"nav-item has-treeview \"\r\n                    }\r\n                  >\r\n                    <a\r\n                      href=\"#a!\"\r\n                      className={\r\n                        active === \"almacen\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        this.changePage(\"/almacen\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-database\"></i>\r\n                      <p>\r\n                        Almacen\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </a>\r\n                    <ul className=\"nav nav-treeview\">\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Productos</p>\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen/categorias\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen/categorias\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Categorias</p>\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen/marcas\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen/marcas\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Marcas</p>\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen/inventario\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen/marcas\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Inventario</p>\r\n                        </Link>\r\n                      </li>\r\n                    </ul>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/usuarios\"\r\n                      className={\r\n                        active === \"usuarios\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/usuarios\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-user\"></i>\r\n                      <p>\r\n                        Usuarios\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/configuraciones\"\r\n                      className={\r\n                        active === \"configuraciones\"\r\n                          ? \"nav-link active\"\r\n                          : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/configuraciones\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-tools\"></i>\r\n                      <p>\r\n                        Configuraciones\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                </React.Fragment>\r\n              ) : null}\r\n\r\n              <li className=\"nav-item\">\r\n                <Link to=\"/\" className=\"nav-link\" onClick={this.handleLogOut}>\r\n                  <i className=\"nav-icon fas fa-sign-out-alt\"></i>\r\n                  <p>Cerrar sesion</p>\r\n                </Link>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n\r\n  handleLogOut = (e) => {\r\n    e.preventDefault();\r\n    window.Swal.fire({\r\n      title: \"Session\",\r\n      text: \"¿Esta seguro de cerrar la sesion?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Si\",\r\n      cancelButtonText: \"Cancelar\",\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        this.props.logOut();\r\n        this.changePage(\"/\");\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport default Menu;\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class Breadcrumb extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: moment().format(\"LLLL\"),\r\n    };\r\n    setInterval(() => {\r\n      console.log(\"[ORUS] Actualizando hora de sistema\");\r\n      this.setState({\r\n        date: moment().format(\"LLLL\"),\r\n      });\r\n    }, 60000);\r\n  }\r\n\r\n  render() {\r\n    const { title } = this.props;\r\n    const { date } = this.state;\r\n    return (\r\n      <div className=\"content-header\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6\">\r\n              <h1 className=\"m-0 text-dark text-capitalize\">{title}</h1>\r\n            </div>\r\n            <div className=\"col\">\r\n              <h6 className=\"text-dark text-right\">{date}</h6>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nclass Footer extends Component {\r\n  render() {\r\n    return (\r\n      <footer className=\"main-footer d-print-none\">\r\n        <div className=\"float-right d-none d-sm-inline\">V2.0</div>\r\n        <strong>\r\n          Copyright &copy; 2015-2020 <a href=\"#end\">Orus</a>.\r\n        </strong>{\" \"}\r\n        Todos los derechos reservados.\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Footer;\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class HeaderTable extends Component {\r\n  render() {\r\n    let { data, order, orderby, actions } = this.props;\r\n\r\n    if (data.length) {\r\n      return (\r\n        <thead className=\"thead-light\">\r\n          <tr>\r\n            {data.map((col, index) => {\r\n              if (col.filter) {\r\n                return (\r\n                  <th\r\n                    scope=\"col\"\r\n                    key={index}\r\n                    onClick={() => {\r\n                      this.handleOrder(col.type);\r\n                    }}\r\n                    style={{\r\n                      cursor: order === \"desc\" ? \"n-resize\" : \"s-resize\",\r\n                    }}\r\n                  >\r\n                    {col.name}\r\n                    {orderby === col.type ? (\r\n                      <span className=\"ml-2\">\r\n                        <i className=\"fas fa-sort text-primary\"></i>\r\n                      </span>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </th>\r\n                );\r\n              } else {\r\n                return (\r\n                  <th scope=\"col\" key={index}>\r\n                    {col.name}\r\n                  </th>\r\n                );\r\n              }\r\n            })}\r\n            {actions ? <th className=\"text-center\">Acciones</th> : \"\"}\r\n          </tr>\r\n        </thead>\r\n      );\r\n    } else {\r\n      return (\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\" className=\"text-center\">\r\n              No hay datos de columnas\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleOrder = (item) => {\r\n    this.props.handleOrder(item);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Pagination extends Component {\r\n  render() {\r\n    let { meta } = this.props;\r\n    if (meta.total > 10) {\r\n      return (\r\n        <div className=\"btn-group\">\r\n          <ul className=\"pagination pagination-sm\">\r\n            <li\r\n              className={\r\n                meta.current_page === 1 ? \"page-item disabled\" : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === 1\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(1);\r\n                }}\r\n              >\r\n                Primero\r\n              </a>\r\n            </li>\r\n\r\n            <li\r\n              className={\r\n                meta.current_page === 1 ? \"page-item disabled\" : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === 1\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(meta.current_page - 1);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-step-backward\"></i>\r\n              </a>\r\n            </li>\r\n\r\n            <li className=\"page-item\">\r\n              <span className=\"page-link\">\r\n                {meta.current_page} /{\" \"}\r\n                {Math.ceil(meta.total / meta.per_page).toFixed(0)}\r\n              </span>\r\n            </li>\r\n\r\n            <li\r\n              className={\r\n                meta.current_page === meta.last_page\r\n                  ? \"page-item disabled\"\r\n                  : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === meta.last_page\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(meta.current_page + 1);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-step-forward\"></i>\r\n              </a>\r\n            </li>\r\n\r\n            <li\r\n              className={\r\n                meta.current_page === meta.last_page\r\n                  ? \"page-item disabled\"\r\n                  : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === meta.last_page\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(meta.last_page);\r\n                }}\r\n              >\r\n                Ultimo\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      );\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  handleChangePage = (page) => {\r\n    this.props.handleChangePage(page);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, rol } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: nombre, usuario o email\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Rol</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"rol\"\r\n                    value={rol}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Administrador</option>\r\n                    <option value=\"1\">Ventas</option>\r\n                    <option value=\"2\">Optometrista</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      this.props.search || this.props.rol\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"rol\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class ActionsTable extends Component {\r\n  render() {\r\n    const { item, edit, id } = this.props;\r\n    return (\r\n      <td className=\"text-right\">\r\n        {this.props.delete ? (\r\n          <a\r\n            className=\"btn-flat text-dark mr-4\"\r\n            href=\"#delete\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              this.handleDelete(id, item);\r\n            }}\r\n          >\r\n            <i className=\"fas fa-trash\"></i>\r\n          </a>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {edit ? (\r\n          <Link className=\"btn-flat text-dark\" to={edit + id}>\r\n            <i className=\"fas fa-pencil-alt\"></i>\r\n          </Link>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </td>\r\n    );\r\n  }\r\n\r\n  handleDelete = (id, item) => {\r\n    this.props.delete(id, item);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Filters from \"./index_filter\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Users extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusUsers\"));\r\n    this.state = {\r\n      users: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"asc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      rol: sdd ? sdd.rol : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getUsers();\r\n    localStorage.setItem(\r\n      \"OrusUsers\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        rol: this.state.rol,\r\n      })\r\n    );\r\n    console.log(\"[Users] Eliminando datos de contacto en uso\");\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando usuarios y almacenando configuracion\");\r\n      localStorage.setItem(\r\n        \"OrusUsers\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          rol: this.state.rol,\r\n        })\r\n      );\r\n      this.getUsers();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { users, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"usuario\", type: \"username\", filter: true },\r\n        { name: \"nombre\", type: \"name\", filter: true },\r\n        { name: \"e-mail\", type: \"email\", filter: true },\r\n        { name: \"Rol\", type: \"rol\", filter: true },\r\n        { name: \"Actividad\", type: \"session\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-header\">\r\n          <h2 className=\"card-title text-primary\">\r\n            <i className=\"fas fa-user mr-1\"></i>\r\n            Usuarios registrados\r\n          </h2>\r\n          <div className=\"card-tools\">\r\n            <Filters\r\n              search={this.state.search}\r\n              rol={this.state.rol}\r\n              changeFilters={this.changeFilters}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={users.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"9\" className=\"alert alert-light text-center p-4\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(users.data).length ? (\r\n                users.data.map((user) => {\r\n                  return (\r\n                    <tr key={user.id}>\r\n                      <th scope=\"row\">\r\n                        <span className=\"text-capitalize text-primary\">\r\n                          {user.username}\r\n                        </span>\r\n                      </th>\r\n                      <td>\r\n                        <Link to={\"/usuarios/registro/\" + user.id}>\r\n                          <span className=\"badge badge-primary text-capitalize p-1\">\r\n                            {user.name}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td>{user.email}</td>\r\n                      <td>\r\n                        {user.rol > 0 ? (\r\n                          user.rol === 1 ? (\r\n                            <span className=\"text-capitalize text-success\">\r\n                              <i className=\"fas fa-user-tag mr-2\"></i>\r\n                              Ventas\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"text-capitalize text-primary\">\r\n                              <i className=\"fas fa-user-tie mr-2\"></i>\r\n                              Optometrista\r\n                            </span>\r\n                          )\r\n                        ) : (\r\n                          <span className=\"text-capitalize text-danger\">\r\n                            <i className=\"fas fa-user-shield mr-2\"></i>\r\n                            Administrador\r\n                          </span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {user.session\r\n                          ? moment(user.session.last_activity).fromNow()\r\n                          : \"--\"}\r\n                      </td>\r\n                      <td>{moment(user.updated_at).fromNow()}</td>\r\n                      <td className=\"text-right\">\r\n                        {moment(user.created_at).format(\"ll\")}\r\n                      </td>\r\n                      <Actions\r\n                        id={user.id}\r\n                        item={user.username}\r\n                        delete={this.handleDelete}\r\n                        edit={\"/usuarios/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"8\" className=\"alert alert-info text-center\">\r\n                    <i className=\"fas fa-info mr-2\"></i>\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/usuarios/registro\"\r\n            className=\"btn btn-outline-primary btn-lg\"\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            Nuevo usuario\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeFilters = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (page) => {\r\n    this.setState({\r\n      page,\r\n      load: true,\r\n    });\r\n  };\r\n  handleDelete = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el usuario \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de usuario por API\");\r\n          return fetch(\"http://\" + host + \"/api/users/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Usuario eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Usuario eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getUsers());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getUsers = () => {\r\n    let { load, host, token } = this.state,\r\n      url = \"http://\" + host + \"/api/users\",\r\n      orderby = `&orderby=${this.state.orderby}&order=${this.state.order}`,\r\n      search = this.state.search ? `&search=${this.state.search}` : \"\",\r\n      rol = this.state.rol.length > 0 ? `&rol=${this.state.rol}` : \"\",\r\n      page = this.state.page > 0 ? \"?page=\" + this.state.page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de los usuarios\r\n    console.log(\"Solicitando usuarios a la API\");\r\n    fetch(url + page + orderby + search + rol, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Descargando usuarios\");\r\n          this.setState({\r\n            users: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar usuarios\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class UserName extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: \"bg-blue\",\r\n      validate: \"\",\r\n      text: \"Debe de tener al menos 4 caracteres.\",\r\n      searchUser: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { col, username } = this.props;\r\n    let { bgColor, validate, text, searchUser } = this.state;\r\n\r\n    return (\r\n      <div className={\"col-\" + col}>\r\n        {username.length ? (\r\n          <small>\r\n            <label>Usuario</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              {searchUser ? (\r\n                <i className=\"fas fa-spinner\"></i>\r\n              ) : (\r\n                <i className=\"fas fa-user-check\"></i>\r\n              )}\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className={\"form-control\" + validate}\r\n            placeholder=\"Usuario\"\r\n            name=\"username\"\r\n            autoComplete=\"off\"\r\n            autoFocus=\"autofocus\"\r\n            value={username}\r\n            onChange={this.handleChange}\r\n            required=\"required\"\r\n            minLength=\"4\"\r\n            maxLength=\"16\"\r\n            pattern=\"^[\\w]{4,16}$\"\r\n          />\r\n        </div>\r\n        {validate ? <small className=\"text-muted\">{text}</small> : \"\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    let regex = /^[\\w]{4,16}$/,\r\n      x = {\r\n        target: {\r\n          name: \"validUserName\",\r\n          value: \"\",\r\n        },\r\n      };\r\n    e.target.value = value.replace(/ /g, \"\").toLowerCase();\r\n\r\n    if (regex.test(value)) {\r\n      this.validUser(e.target.value, x);\r\n    } else {\r\n      if (value.length > 4) {\r\n        this.setState({\r\n          bgColor: \"bg-red\",\r\n          validate: \" border border-danger\",\r\n          text: \"No tiene el formato de usuario\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      } else if (!value.length) {\r\n        this.setState({\r\n          bgColor: \"bg-blue\",\r\n          validate: \" border border-danger\",\r\n          text: \"Debe de tener de 4 a 16 caracteres alfanumericos.\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      }\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validUser = (name, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/users\",\r\n      username = \"?username=\" + name;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de los usuarios\r\n      this.setState({\r\n        searchUser: true,\r\n      });\r\n      fetch(url + username, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            if (\r\n              data.data.length &&\r\n              data.data[0].username.toLowerCase() === name\r\n            ) {\r\n              this.setState({\r\n                bgColor: \"bg-red\",\r\n                validate: \" border border-danger\",\r\n                text: \"El usuario ya esta registrado.\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = false;\r\n              this.props.onChange(x);\r\n            } else {\r\n              this.setState({\r\n                bgColor: \"bg-blue\",\r\n                validate: \"\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = true;\r\n              this.props.onChange(x);\r\n            }\r\n          } else {\r\n            console.error(\"Error en la descarga de usuarios\", data.message);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class UserName extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: \"bg-blue\",\r\n      validate: \"\",\r\n      text: \"No tiene el formato de un email\",\r\n      searchUser: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { col, email } = this.props;\r\n    let { bgColor, validate, text } = this.state;\r\n\r\n    return (\r\n      <div className={\"col-\" + col}>\r\n        {email.length ? (\r\n          <small>\r\n            <label>Usuario</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              <i className=\"fas fa-at\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"email\"\r\n            className={\"form-control\" + validate}\r\n            placeholder=\"email\"\r\n            name=\"email\"\r\n            autoComplete=\"off\"\r\n            value={email}\r\n            onChange={this.handleChange}\r\n            required=\"required\"\r\n          />\r\n        </div>\r\n        {validate ? <small className=\"text-muted\">{text}</small> : \"\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    let regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n      x = {\r\n        target: {\r\n          name: \"validUserEmail\",\r\n          value: true,\r\n        },\r\n      };\r\n    e.target.value = value.replace(/\\s/g, \"\").toLowerCase();\r\n    if (regex.test(value)) {\r\n      this.validEmail(e.target.value, x);\r\n    } else {\r\n      if (value.length > 8) {\r\n        this.setState({\r\n          bgColor: \"bg-red\",\r\n          validate: \" border border-danger\",\r\n          text: \"No tiene el formato de un email\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      } else if (!value.length) {\r\n        this.setState({\r\n          bgColor: \"bg-blue\",\r\n          validate: \"\",\r\n          text: \"No tiene el formato de un email\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      }\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validEmail = (search, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/users\",\r\n      email = \"?email=\" + search;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de los usuarios\r\n      this.setState({\r\n        searchUser: true,\r\n      });\r\n      //Realiza la peticion de los usuarios\r\n      fetch(url + email, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            if (\r\n              data.data.length &&\r\n              data.data[0].email.toLowerCase() === search\r\n            ) {\r\n              this.setState({\r\n                bgColor: \"bg-red\",\r\n                validate: \" border border-danger\",\r\n                text: \"El email ya esta registrado.\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = false;\r\n              this.props.onChange(x);\r\n            } else {\r\n              this.setState({\r\n                bgColor: \"bg-blue\",\r\n                validate: \"\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = true;\r\n              this.props.onChange(x);\r\n            }\r\n          } else {\r\n            console.error(\"Error en la descarga de usuarios\", data.message);\r\n            this.setState({\r\n              bgColor: \"bg-red\",\r\n              validate: \" border border-danger\",\r\n              text: \"Error en la consulta\",\r\n              searchUser: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport UserName from \"./userNameInput\";\r\nimport UserEmail from \"./userEmailInput\";\r\n\r\nexport default class UserAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      rol: 1,\r\n      username: \"\",\r\n      validUserName: false,\r\n      name: \"\",\r\n      email: \"\",\r\n      validUserEmail: false,\r\n      password: \"\",\r\n      updated_at: \"\",\r\n      created_at: \"\",\r\n      session: {},\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    let id = this.props.match.params.id;\r\n    if (id) {\r\n      this.getUser(id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let {\r\n        load,\r\n        id,\r\n        rol,\r\n        username,\r\n        name,\r\n        email,\r\n        password,\r\n        updated_at,\r\n        created_at,\r\n        session,\r\n        validUserName,\r\n        validUserEmail,\r\n      } = this.state,\r\n      send =\r\n        !load && validUserName && name.length && validUserEmail ? false : true;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <form\r\n            className=\"card card-primary card-outline\"\r\n            onSubmit={this.handleSave}\r\n          >\r\n            <div className=\"card-header\">\r\n              <h1 className=\"card-title text-primary\">\r\n                <i className=\"fas fa-user mr-2\"></i>\r\n                {id ? \"Editar usuario\" : \"Registrar nuevo usuario\"}\r\n              </h1>\r\n            </div>\r\n            <div className=\"card-body was-validated\">\r\n              {load ? (\r\n                <div className=\"alert alert-light text-center p-4\">\r\n                  <div className=\"spinner-border text-primary\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <React.Fragment>\r\n                  <div className=\"row mb-3\">\r\n                    <UserName\r\n                      username={username}\r\n                      col={6}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                    <div className=\"col-6\">\r\n                      {name.length ? (\r\n                        <small>\r\n                          <label>Nombre completo</label>\r\n                        </small>\r\n                      ) : (\r\n                        <br />\r\n                      )}\r\n                      <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                          <span className=\"input-group-text bg-blue\">\r\n                            <i className=\"fas fa-user-tag\"></i>\r\n                          </span>\r\n                        </div>\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control text-capitalize\"\r\n                          placeholder=\"Nombre completo\"\r\n                          name=\"name\"\r\n                          autoComplete=\"off\"\r\n                          value={name}\r\n                          onChange={this.catchInputs}\r\n                          required=\"required\"\r\n                          minLength=\"8\"\r\n                          pattern=\"^[a-zA-Z]{2,20}[\\s]{1}[a-zA-Z]{2,20}.*\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                      {password.length || id ? (\r\n                        <small>\r\n                          <label>Contraseña</label>\r\n                          {id ? (\r\n                            \"\"\r\n                          ) : (\r\n                            <span className=\"ml-2\">\r\n                              De 8 a 16 caracteres, por lo menos una mayuscula,\r\n                              un numero y un caracter especial\r\n                            </span>\r\n                          )}\r\n                        </small>\r\n                      ) : (\r\n                        <br />\r\n                      )}\r\n                      <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                          <span className=\"input-group-text bg-blue\">\r\n                            <i className=\"fas fa-lock\"></i>\r\n                          </span>\r\n                        </div>\r\n                        <input\r\n                          type=\"password\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Contraseña\"\r\n                          name=\"password\"\r\n                          autoComplete=\"off\"\r\n                          value={password}\r\n                          onChange={this.catchInputs}\r\n                          required={id ? false : true}\r\n                          minLength=\"8\"\r\n                          maxLength=\"16\"\r\n                          pattern=\"^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <UserEmail\r\n                      email={email}\r\n                      col={6}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                      <small>\r\n                        <label>Rol</label>\r\n                      </small>\r\n                      <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                          <span className=\"input-group-text bg-blue\">\r\n                            <i className=\"fas fa-id-card\"></i>\r\n                          </span>\r\n                        </div>\r\n                        <select\r\n                          className=\"custom-select\"\r\n                          name=\"rol\"\r\n                          value={rol}\r\n                          onChange={this.catchInputs}\r\n                        >\r\n                          <option value=\"0\">Administrador</option>\r\n                          <option value=\"1\">Ventas</option>\r\n                          <option value=\"2\">Optometrista</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </React.Fragment>\r\n              )}\r\n            </div>\r\n            <div className=\"card-footer\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12 text-right\">\r\n                  <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                    <Link\r\n                      to=\"/usuarios\"\r\n                      className=\"btn btn-dark\"\r\n                      onClick={this.changePage}\r\n                      id=\"/usuarios\"\r\n                    >\r\n                      <i className=\"fas fa-ban mr-1\"></i>\r\n                      Cancelar\r\n                    </Link>\r\n                    <button\r\n                      type=\"submit\"\r\n                      className={\r\n                        load ? \"btn btn-primary disabled\" : \"btn btn-primary\"\r\n                      }\r\n                      disabled={send ? true : false}\r\n                    >\r\n                      <i className=\"fas fa-save mr-1\"></i>\r\n                      Guardar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        {id ? (\r\n          <div className=\"col\">\r\n            <div className=\"card card-primary card-outline\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title text-primary\">\r\n                  <i className=\"fas fa-database mr-2\"></i>\r\n                  Metadata\r\n                </h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                {session ? (\r\n                  <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                      <h6>Datos del usuario</h6>\r\n                      <div className=\"row\">\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">Registrado</span>\r\n                          <p>{moment(created_at).fromNow()}</p>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">\r\n                            Ultima actualizacion\r\n                          </span>\r\n                          <p>{moment(updated_at).fromNow()}</p>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                      <h6>Actividad</h6>\r\n                      <div className=\"row\">\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">IP</span>\r\n                          <p>{session.ip_address}</p>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">Ultima actividad</span>\r\n                          <p>{moment(session.last_activity).fromNow()}</p>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                      <span className=\"text-primary\">Navegador y OS</span>\r\n                      <p>{session.user_agent}</p>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                      <span className=\"text-primary\">Token</span>\r\n                      <p>{session.user_data}</p>\r\n                    </li>\r\n                  </ul>\r\n                ) : (\r\n                  <p>Usuario no ha registrado actividad.</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changePage = (e) => {\r\n    this.props.page(e.target.id);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n\r\n    let { id, validUserName, validUserEmail } = this.state;\r\n\r\n    //Verificamos campos validos\r\n    if (!validUserName) {\r\n      window.Swal.fire({\r\n        icon: \"error\",\r\n        title: \"El nombre de usuario ya esta en uso\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n      return false;\r\n    }\r\n    if (!validUserEmail) {\r\n      window.Swal.fire({\r\n        icon: \"error\",\r\n        title: \"El correo ya esta en uso\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el usuario?\"\r\n        : \"¿Esta seguro de crear un nuevo usuario?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let {\r\n              host,\r\n              token,\r\n              id,\r\n              name,\r\n              username,\r\n              rol,\r\n              password,\r\n              email,\r\n            } = this.state,\r\n            body = {\r\n              name,\r\n              username,\r\n              rol,\r\n              email,\r\n            },\r\n            url = id\r\n              ? \"http://\" + host + \"/api/users/\" + id\r\n              : \"http://\" + host + \"/api/users\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n\r\n          //Agregamos el password si no esta vacio\r\n          if (password.length > 8) body.password = password;\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del usuario a API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Usuario almacenado\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Usuario actualizado con exito\"\r\n              : \"Usuario almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => this.props.history.goBack());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el usuario\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getUser = (id) => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state;\r\n    if (id > 0) {\r\n      fetch(\"http://\" + host + \"/api/users/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.data) {\r\n            console.log(\"Cargando datos de usuario\");\r\n            this.setState({\r\n              id: data.data.id,\r\n              rol: data.data.rol,\r\n              username: data.data.username,\r\n              name: data.data.name,\r\n              email: data.data.email,\r\n              updated_at: data.data.updated_at,\r\n              created_at: data.data.created_at,\r\n              session: data.data.session,\r\n              load: false,\r\n              validUserName: true,\r\n              validUserEmail: true,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\r\n              \"Error\",\r\n              \"Error en el sistema, comuniquese con el administrador de sistema\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: codigo o producto\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Store extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusStore\"));\r\n    this.state = {\r\n      items: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"desc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getItems();\r\n    localStorage.setItem(\r\n      \"OrusStore\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n      })\r\n    );\r\n    console.log(\"[Store] Eliminando datos de contacto en uso\");\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando productos\");\r\n      this.getItems();\r\n      localStorage.setItem(\r\n        \"OrusStore\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { items, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Codigo\" },\r\n        { name: \"Marca\", type: \"brand\", filter: true },\r\n        { name: \"Producto\", type: \"name\", filter: true },\r\n        { name: \"PS\" },\r\n        { name: \"UND\" },\r\n        { name: \"Precio\", type: \"price\", filter: true },\r\n        { name: \"Proveedor\", type: \"contact_id \", filter: true },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-primary\">\r\n            <i className=\"fas fa-database mr-1\"></i>\r\n            Productos en almacen\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/almacen/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={this.changePage}\r\n              id=\"/almacen/registro\"\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={this.state.search}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={items.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center\">\r\n                    <span className=\"text-primary\">Cargando productos</span>\r\n                    <div\r\n                      className=\"spinner-border text-primary ml-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(items.data).length ? (\r\n                items.data.map((item) => {\r\n                  return (\r\n                    <tr key={item.id}>\r\n                      <td>\r\n                        <span className=\"text-primary text-uppercase\">\r\n                          {item.codigo}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {item.marca !== null ? item.marca.marca : \"--\"}\r\n                      </td>\r\n                      <td>\r\n                        <Link to={\"/almacen/registro/\" + item.id}>\r\n                          <span className=\"badge badge-primary text-capitalize p-1\">\r\n                            {item.producto}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-right\">{item.unidad}</td>\r\n                      <td>\r\n                        <span\r\n                          className={\r\n                            item.cantidades > 0 ? \"text-success\" : \"text-danger\"\r\n                          }\r\n                        >\r\n                          {item.cantidades > 0 ? item.cantidades : 0}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-right\">$ {item.precio.toFixed(2)}</td>\r\n                      <td className=\"text-capitalize\">\r\n                        {item.proveedor !== null\r\n                          ? item.proveedor.nombre.split(\" \").length\r\n                            ? item.proveedor.nombre.split(\" \")[0]\r\n                            : item.proveedor.nombre\r\n                          : \"--\"}\r\n                      </td>\r\n                      <td className=\"text-capitalize\">\r\n                        {moment(item.updated_at).fromNow()}\r\n                      </td>\r\n                      <td className=\"text-capitalize\">\r\n                        {moment(item.created_at).format(\"LL\")}\r\n                      </td>\r\n                      <Actions\r\n                        id={item.id}\r\n                        item={item.producto}\r\n                        delete={\r\n                          item.lotes || item.cantidades\r\n                            ? null\r\n                            : this.handleDelete\r\n                        }\r\n                        edit={\"/almacen/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"btn-group\" role=\"group\">\r\n                <Link\r\n                  to=\"/almacen/registro\"\r\n                  className=\"btn btn-outline-primary\"\r\n                  onClick={this.changePage}\r\n                  id=\"/almacen/registro\"\r\n                >\r\n                  <i className=\"fas fa-plus mr-1\"></i>\r\n                  Nuevo producto\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e.target.id);\r\n  };\r\n  handleDelete = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el producto \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de producto por API\");\r\n          return fetch(\"http://\" + host + \"/api/store/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Producto eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Producto eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getItems());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getItems() {\r\n    //Variables\r\n    const { load, orderby, order, search, page, host, token } = this.state,\r\n      url = \"http://\" + host + \"/api/store\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search.replace(\"+\", \"%2b\")}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de los contactos\r\n    console.log(\"Descargando productos de API\");\r\n    fetch(url + pagina + ordenar + buscar, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenando productos\");\r\n          this.setState({\r\n            items: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message, data.errors);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nclass StoreLote extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      bill: \"\",\r\n      cost: 0,\r\n      price: this.props.price,\r\n      amount: 0,\r\n      lote: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      loteNew: false,\r\n      load: true,\r\n      page: 1,\r\n    };\r\n    this.handleNewLote = this.handleNewLote.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.catchInputs = this.catchInputs.bind(this);\r\n    this.handelGetLots = this.handelGetLots.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.handelGetLots(this.state.page);\r\n  }\r\n\r\n  render() {\r\n    let { lote, load } = this.state,\r\n      pages = [];\r\n    if (this.state.lote.meta.total > 10) {\r\n      for (var i = 1; i <= this.state.lote.meta.last_page; i++) {\r\n        pages.push(\r\n          <li\r\n            key={i}\r\n            className={\r\n              this.state.lote.meta.current_page === i\r\n                ? \"page-item disabled\"\r\n                : \"page-item\"\r\n            }\r\n          >\r\n            <a\r\n              href=\"#e\"\r\n              id={i}\r\n              className=\"page-link\"\r\n              onClick={this.handleChangePage.bind(this)}\r\n            >\r\n              {i}\r\n            </a>\r\n          </li>\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-primary\">\r\n            <i className=\"fas fa-list\"></i>\r\n            Listado de lotes\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            {this.state.lote.meta.total > 10 ? (\r\n              <div className=\"btn-group\">\r\n                <ul className=\"pagination pagination-sm\">{pages}</ul>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-hover table-nowrap\">\r\n            <thead>\r\n              <tr>\r\n                <th>Registrado</th>\r\n                <th style={{ width: 140 }}>Factura</th>\r\n                <th className=\"text-right\" style={{ width: 90 }}>\r\n                  Unidades\r\n                </th>\r\n                <th className=\"text-right\" style={{ width: 110 }}>\r\n                  Costo\r\n                </th>\r\n                <th className=\"text-right\" style={{ width: 110 }}>\r\n                  Precio\r\n                </th>\r\n                <th>Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"6\" className=\"text-center\">\r\n                    <span className=\"text-primary mr-4\">Cargando lotes</span>\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(lote.data).length ? (\r\n                lote.data.map((lot) => {\r\n                  return (\r\n                    <tr key={lot.id}>\r\n                      <td>{lot.created_at}</td>\r\n                      <td className=\"text-uppercase\">\r\n                        {lot.factura ? lot.factura : \"XXXX\"}\r\n                      </td>\r\n                      <td className=\"text-right\">{lot.cantidades}</td>\r\n                      <td className=\"text-right\">\r\n                        $ {lot.costo ? lot.costo : 0}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {lot.precio ? lot.precio : 0}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        <a\r\n                          className=\"btn-flat text-dark\"\r\n                          href=\"#delete\"\r\n                          onClick={(e) => {\r\n                            this.handleDelete(e, lot.id, lot.factura);\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-trash\"></i>\r\n                        </a>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"6\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n              {this.state.loteNew ? (\r\n                <tr>\r\n                  <th>Nuevo</th>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-uppercase\"\r\n                      type=\"text\"\r\n                      name=\"bill\"\r\n                      value={this.state.bill}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-right\"\r\n                      type=\"number\"\r\n                      name=\"amount\"\r\n                      min=\"1\"\r\n                      value={this.state.amount}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-right\"\r\n                      type=\"number\"\r\n                      name=\"cost\"\r\n                      value={this.state.cost}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-right\"\r\n                      type=\"number\"\r\n                      name=\"price\"\r\n                      value={this.state.price}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td className=\"text-right\">\r\n                    <div className=\"btn-group\" role=\"group\">\r\n                      <button\r\n                        className=\"btn btn-outline-primary btn-sm\"\r\n                        onClick={this.handleSave}\r\n                      >\r\n                        <i className=\"fas fa-save\"></i>\r\n                      </button>\r\n                      <button\r\n                        className=\"btn btn-outline-dark btn-sm\"\r\n                        onClick={this.handleNewLote}\r\n                      >\r\n                        <i className=\"fas fa-undo\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                <tr></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"btn-group float-right\" role=\"group\">\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={this.handleNewLote}\r\n                >\r\n                  Nuevo lote\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangePage(e) {\r\n    e.preventDefault();\r\n    this.setState({\r\n      page: e.target.id,\r\n    });\r\n    this.handelGetLots(e.target.id);\r\n  }\r\n  handleNewLote() {\r\n    this.setState({\r\n      loteNew: !this.state.loteNew,\r\n    });\r\n  }\r\n  catchInputs(e) {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  }\r\n  validInputs() {\r\n    //Datos del formulario\r\n    let { bill, price, amount } = this.state;\r\n    if (!bill.length) {\r\n      bill = \"XXXX\";\r\n    }\r\n    if (!price) {\r\n      price = 1000;\r\n    }\r\n    if (!amount) {\r\n      window.alert(\"La cantidad de articulos no puede ser cero\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  handleSave(e) {\r\n    e.preventDefault();\r\n\r\n    //Verificamos campos validos\r\n    if (!this.validInputs()) {\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de almacenar un nuevo lote?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Guardar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let ls = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n            { id, bill, cost, price, amount } = this.state,\r\n            body = {\r\n              bill,\r\n              cost,\r\n              price,\r\n              amount,\r\n              store_items_id: id,\r\n            };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del producto a API\");\r\n          return fetch(\"http://\" + ls.host + \"/api/items\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Lote almacenada\");\r\n          this.setState({\r\n            load: true,\r\n            loteNew: false,\r\n          });\r\n          window.Swal.fire(\"Lote guardado con exito\", \"\", \"success\").then(\r\n            (res) => {\r\n              this.handelGetLots(this.state.page);\r\n              this.props.refresh();\r\n            }\r\n          );\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el lote\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  handelGetLots(page) {\r\n    //Variables\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      id = this.props.id,\r\n      url =\r\n        \"http://\" + varLocalStorage.host + \"/api/items?store_items_id=\" + id;\r\n    fetch(url + \"&page=\" + page, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(\"Descargando lotes\");\r\n        this.setState({\r\n          id,\r\n          lote: data,\r\n          load: false,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n  handleDelete = (e, id, item) => {\r\n    e.preventDefault();\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el lote \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          const tr = e.target.parentNode.parentNode.parentNode;\r\n          tr.classList.add(\"bg-danger\");\r\n\r\n          let ls = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n            deleteColor = setInterval(() => {\r\n              clearInterval(deleteColor);\r\n              tr.classList.remove(\"bg-danger\");\r\n            }, 6500);\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de lote por API\");\r\n          return fetch(\"http://\" + ls.host + \"/api/items/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Producto eliminado\");\r\n        this.setState({\r\n          load: true,\r\n          loteNew: false,\r\n        });\r\n        window.Swal.fire(\"Lote eliminado con exito\", \"\", \"success\").then(\r\n          (res) => {\r\n            this.handelGetLots(this.state.page);\r\n            this.props.refresh();\r\n          }\r\n        );\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport default StoreLote;\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class InputCategory extends Component {\r\n  render() {\r\n    const {\r\n      categoryData,\r\n      categoryName,\r\n      category,\r\n      textSelect,\r\n      categoryRef,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"input-group mb-3\">\r\n        <div className=\"input-group-prepend\">\r\n          <span\r\n            className={\r\n              category\r\n                ? \"input-group-text bg-primary\"\r\n                : \"input-group-text bg-warning\"\r\n            }\r\n          >\r\n            <i className=\"fas fa-sort-amount-down\"></i>\r\n          </span>\r\n        </div>\r\n        <select\r\n          className=\"custom-select text-uppercase\"\r\n          name={categoryName}\r\n          value={category}\r\n          onChange={this.handleChangeCategory}\r\n          ref={categoryRef}\r\n        >\r\n          <option value=\"0\">{textSelect}</option>\r\n          {categoryData.map((cat) => {\r\n            return (\r\n              <option value={cat.id} key={cat.id}>\r\n                {cat.categoria ? cat.categoria : cat.name}\r\n              </option>\r\n            );\r\n          })}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangeCategory = (e) => {\r\n    const { value } = e.target,\r\n      { categoryData, handleChangeCategory } = this.props;\r\n    let search = parseInt(value),\r\n      category = categoryData.find((i) => i.id === search);\r\n    if (!search) {\r\n      category = {\r\n        id: 0,\r\n      };\r\n    }\r\n\r\n    handleChangeCategory(category);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class SuppliersInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      suppliers_data: [],\r\n      text: \"\",\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      suppliers_data: [],\r\n    });\r\n    this.getSuppliers();\r\n  }\r\n  render() {\r\n    const { suppliers_data } = this.state,\r\n      { supplier, handleChangeSupplier, supplierRef } = this.props;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <small>\r\n            <label>Proveedor</label>\r\n          </small>\r\n          {suppliers_data.length ? (\r\n            <div className=\"input-group mb-3\">\r\n              <div className=\"input-group-prepend\">\r\n                <span\r\n                  className={\r\n                    supplier\r\n                      ? \"input-group-text bg-primary\"\r\n                      : \"input-group-text bg-warning\"\r\n                  }\r\n                >\r\n                  <i className=\"fas fa-address-book\"></i>\r\n                </span>\r\n              </div>\r\n              <select\r\n                className=\"custom-select text-uppercase\"\r\n                name=\"supplier\"\r\n                value={supplier}\r\n                ref={supplierRef}\r\n                onChange={(e) => {\r\n                  const { value } = e.target;\r\n                  handleChangeSupplier(parseInt(value));\r\n                }}\r\n              >\r\n                <option value=\"0\">Seleccione un Proveedor</option>\r\n                {suppliers_data.map((sp) => {\r\n                  return (\r\n                    <option value={sp.id} key={sp.id}>\r\n                      {sp.nombre}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-left\">\r\n              <span className=\"text-dark\">Descargando proveedores</span>\r\n              <div className=\"spinner-border text-primary ml-4\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getSuppliers = () => {\r\n    //Variables\r\n    let { host, token } = this.state;\r\n\r\n    console.log(\"solicitando proveedores al API\");\r\n    fetch(\"http://\" + host + \"/api/contacts?type=1\", {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data !== null) {\r\n          console.log(\"Cargando proveedores\");\r\n          this.setState({\r\n            suppliers_data: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\r\n            \"Error\",\r\n            \"Error al descargar los proveedores\",\r\n            \"error\"\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class InputBrand extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      brands: [],\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getBrands();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.supplier !== this.props.supplier) {\r\n      this.setState({\r\n        brands: [],\r\n      });\r\n      this.getBrands();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { brandsName, brand, textSelect, brandRef } = this.props,\r\n      { brands } = this.state;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <small>\r\n            <label>Marca</label>\r\n          </small>\r\n          {brands.length ? (\r\n            <div className=\"input-group mb-3\">\r\n              <div className=\"input-group-prepend\">\r\n                <span\r\n                  className={\r\n                    brand\r\n                      ? \"input-group-text bg-primary\"\r\n                      : \"input-group-text bg-warning\"\r\n                  }\r\n                >\r\n                  <i className=\"fas fa-copyright\"></i>\r\n                </span>\r\n              </div>\r\n              <select\r\n                className=\"custom-select text-uppercase\"\r\n                name={brandsName}\r\n                value={brand}\r\n                ref={brandRef}\r\n                onChange={this.handleChangeCategory}\r\n              >\r\n                <option value=\"0\">{textSelect}</option>\r\n                {brands.map((brand) => {\r\n                  return (\r\n                    <option value={brand.id} key={brand.id}>\r\n                      {brand.nombre}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-left\">\r\n              <span className=\"text-dark\">Descargando marcas</span>\r\n              <div className=\"spinner-border text-primary ml-4\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangeCategory = (e) => {\r\n    const { value } = e.target,\r\n      { handleChangeBrand } = this.props;\r\n    handleChangeBrand(parseInt(value));\r\n  };\r\n  getBrands = () => {\r\n    //Constantes\r\n    const { host, token } = this.state,\r\n      { supplier } = this.props;\r\n\r\n    console.log(\"solicitando marcas al API\");\r\n    fetch(\"http://\" + host + \"/api/brands?supplier=\" + supplier, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        if (data.data !== null) {\r\n          console.log(\"descargando marcas\");\r\n          this.setState({\r\n            brands: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Error al descargar las marcas\", \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","export default (string) => {\r\n  switch (string) {\r\n    case \"monofocales\":\r\n      return \"MF\";\r\n    case \"bifocales\":\r\n      return \"BF\";\r\n    case \"progresivo basico\":\r\n    case \"progresivo-basico\":\r\n      return \"PB\";\r\n    case \"progresivo digital\":\r\n    case \"progresivo-digital\":\r\n      return \"PD\";\r\n    case \"plastico\":\r\n      return \"CR\";\r\n    case \"policarbonato\":\r\n      return \"PL\";\r\n    case \"hi-index\":\r\n    case \"hi index\":\r\n      return \"HI\";\r\n    case \"antirreflejantes\":\r\n      return \"AR\";\r\n    case \"photo\":\r\n      return \"PH\";\r\n    case \"ar & photo\":\r\n    case \"antirreflejante-photo\":\r\n      return \"ARPH\";\r\n    case \"blanco\":\r\n      return \"BL\";\r\n    case \"polarizado\":\r\n      return \"PO\";\r\n    case \"bifocal invisible\":\r\n    case \"bifocal-invisible\":\r\n      return \"BI\";\r\n    case \"monofocal drivesafe\":\r\n    case \"monofocal-drivesafe\":\r\n    case \"monofocal digital drivesafe\":\r\n    case \"monofocal digital DriveSafe\":\r\n      return \"MDSF\";\r\n    case \"monofocal superb\":\r\n    case \"monofocal-superb\":\r\n    case \"monofocal digital superb\":\r\n      return \"MDSU\";\r\n    case \"monofocal individual\":\r\n    case \"monofocal-individual\":\r\n    case \"monofocal digital individual\":\r\n      return \"MDIN\";\r\n    default:\r\n      return \"XX\";\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StoreLote from \"./add_lote\";\r\nimport InputCategory from \"./input_category\";\r\nimport Suppliers from \"./input_suppliers\";\r\nimport Brands from \"./input_brand\";\r\nimport Codestring from \"../Layouts/codeLentString\";\r\n\r\nexport default class StoreAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const id = this.props.match.params.id;\r\n    this.state = {\r\n      id: id ? id : 0,\r\n      code: \"\",\r\n      codebar: \"\",\r\n      grad: \"\",\r\n      brand_id: 0,\r\n      name: \"\",\r\n      unit: \"PZ\",\r\n      cant: 1,\r\n      price: 1,\r\n      supplier: 0,\r\n      category_id: 0,\r\n      category_data: {},\r\n      category_id1: 0,\r\n      category_id2: 0,\r\n      category_id3: 0,\r\n      category_id4: 0,\r\n      category_list1: [],\r\n      category_list2: [],\r\n      category_list3: [],\r\n      category_list4: [],\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.category1 = React.createRef(); //Primera categoria\r\n    this.category2 = React.createRef(); //Segunda categoria\r\n    this.category3 = React.createRef(); //Tercera categoria\r\n    this.category4 = React.createRef(); //Cuarta categoria\r\n    this.supplierRef = React.createRef(); //Referencia de proveedor\r\n    this.brandRef = React.createRef(); //Referencia de proveedor\r\n    this.codeRef = React.createRef(); //Referencia del codigo\r\n    this.nameRef = React.createRef(); //REferencia del nombre del producto\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    const { id } = this.state;\r\n    this.getItem(id);\r\n    this.getCategory();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    const {\r\n      category_list1,\r\n      category_id,\r\n      category_id1,\r\n      category_id2,\r\n      category_id3,\r\n    } = this.state;\r\n\r\n    if (state.category_id !== category_id) {\r\n      if (state.category_id1 !== category_id1 && category_id1 !== 0) {\r\n        const next = category_list1.find((e) => e.id === category_id1);\r\n        if (next) {\r\n          this.setState({\r\n            category_list2: next.hijos,\r\n          });\r\n        }\r\n      }\r\n      if (state.category_id2 !== category_id2 && category_id2 !== 0) {\r\n        const next = category_list1.find((e) => e.id === category_id2);\r\n        if (next) {\r\n          this.setState({\r\n            category_list3: next.hijos,\r\n          });\r\n        }\r\n      }\r\n      if (state.category_id3 !== category_id3 && category_id3 !== 0) {\r\n        const next = category_list1.find((e) => e.id === category_id3);\r\n        if (next) {\r\n          this.setState({\r\n            category_list4: next.hijos,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      load,\r\n      supplier,\r\n      category_id,\r\n      category_id1,\r\n      category_id2,\r\n      category_id3,\r\n      category_id4,\r\n      category_list1,\r\n      category_list2,\r\n      category_list3,\r\n      category_list4,\r\n      brand_id,\r\n      code,\r\n      name,\r\n      grad,\r\n      unit,\r\n      cant,\r\n      price,\r\n    } = this.state;\r\n    let codeValue = code,\r\n      nameValue = name;\r\n\r\n    if (\r\n      this.category1.current !== null &&\r\n      parseInt(this.category1.current.value) === 2\r\n    ) {\r\n      if (name.length <= 3) {\r\n        nameValue = this.handleCodeString(codeValue);\r\n      }\r\n    } else if (\r\n      this.category1.current !== null &&\r\n      parseInt(this.category1.current.value) === 1\r\n    ) {\r\n      if (code.length <= 3) {\r\n        codeValue = this.handleCodeLent(grad);\r\n      }\r\n      if (name.length <= 3) {\r\n        nameValue = this.handleNameLent(grad);\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className={id ? \"col-5\" : \"col-6\"}>\r\n          <form\r\n            className=\"card card-primary card-outline\"\r\n            onSubmit={this.handleSave}\r\n          >\r\n            <div className=\"card-header\">\r\n              <h3 className=\"card-title text-primary\">\r\n                <i className=\"fas fa-database mr-1\"></i>\r\n                {id ? \"Editar producto\" : \"Registrar nuevo producto\"}\r\n              </h3>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {category_list1 && category_list1.length && !load ? (\r\n                <React.Fragment>\r\n                  <div className=\"row\">\r\n                    <div className=\"col\">\r\n                      <fieldset>\r\n                        <small className=\"mr-2\">\r\n                          <label>Categoria</label>\r\n                        </small>\r\n\r\n                        <InputCategory\r\n                          data={this.props.data}\r\n                          category={category_id1}\r\n                          categoryName=\"category_id1\"\r\n                          categoryData={category_list1}\r\n                          textSelect=\"Seleciona la categoria\"\r\n                          categoryRef={this.category1}\r\n                          handleChangeCategory={(data) => {\r\n                            this.setState({\r\n                              category_id: data.id,\r\n                              category_id1: data.id,\r\n                              category_id2: 0,\r\n                              category_list2: data.hijos,\r\n                              category_id3: 0,\r\n                              category_list3: [],\r\n                              category_id4: 0,\r\n                              category_list4: [],\r\n                              supplier: 0,\r\n                            });\r\n                          }}\r\n                        />\r\n\r\n                        {category_id1 &&\r\n                        category_list2 &&\r\n                        category_list2.length ? (\r\n                          <InputCategory\r\n                            data={this.props.data}\r\n                            category={category_id2}\r\n                            categoryName=\"category_id2\"\r\n                            categoryData={category_list2}\r\n                            textSelect=\"Seleciona el tipo\"\r\n                            categoryRef={this.category2}\r\n                            handleChangeCategory={(data) => {\r\n                              this.setState({\r\n                                category_id: data.id,\r\n                                category_id2: data.id,\r\n                                category_id3: 0,\r\n                                category_list3: data.hijos,\r\n                                category_id4: 0,\r\n                                category_list4: [],\r\n                              });\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n\r\n                        {category_id2 &&\r\n                        category_list3 &&\r\n                        category_list3.length ? (\r\n                          <InputCategory\r\n                            data={this.props.data}\r\n                            category={category_id3}\r\n                            categoryName=\"category_id3\"\r\n                            categoryData={category_list3}\r\n                            textSelect=\"Seleciona el material\"\r\n                            categoryRef={this.category3}\r\n                            handleChangeCategory={(data) => {\r\n                              this.setState({\r\n                                category_id: data.id,\r\n                                category_id3: data.id,\r\n                                category_id4: 0,\r\n                                category_list4: data.hijos,\r\n                              });\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n\r\n                        {category_id3 &&\r\n                        category_list4 &&\r\n                        category_list4.length ? (\r\n                          <InputCategory\r\n                            data={this.props.data}\r\n                            category={category_id4}\r\n                            categoryName=\"category_id4\"\r\n                            categoryData={category_list4}\r\n                            textSelect=\"Seleciona el tratamiento\"\r\n                            categoryRef={this.category4}\r\n                            handleChangeCategory={(data) => {\r\n                              this.setState({\r\n                                category_id: data.id,\r\n                                category_id4: data.id,\r\n                              });\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n                      </fieldset>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {category_id1 && category_id1 !== 1 ? (\r\n                    <Suppliers\r\n                      data={this.props.data}\r\n                      supplier={supplier}\r\n                      textSelect=\"Selecione el proveedor\"\r\n                      supplierRef={this.supplierRef}\r\n                      handleChangeSupplier={(e) => {\r\n                        this.setState({\r\n                          supplier: e,\r\n                        });\r\n                      }}\r\n                    />\r\n                  ) : null}\r\n\r\n                  {category_id1 && category_id1 !== 1 && supplier ? (\r\n                    <Brands\r\n                      data={this.props.data}\r\n                      brand={brand_id}\r\n                      supplier={supplier}\r\n                      textSelect=\"Selecione la marca\"\r\n                      brandRef={this.brandRef}\r\n                      handleChangeBrand={(e) => {\r\n                        this.setState({\r\n                          brand_id: e,\r\n                        });\r\n                      }}\r\n                    />\r\n                  ) : null}\r\n\r\n                  {category_id ? (\r\n                    <React.Fragment>\r\n                      <div className=\"row\">\r\n                        <div className=\"col-5\">\r\n                          {codeValue ? (\r\n                            <small>\r\n                              <label>Codigo</label>\r\n                            </small>\r\n                          ) : (\r\n                            <br />\r\n                          )}\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  codeValue\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-code\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control text-uppercase\"\r\n                              placeholder=\"Codigo\"\r\n                              name=\"code\"\r\n                              ref={this.codeRef}\r\n                              value={codeValue}\r\n                              onChange={this.catchInputs}\r\n                              autoComplete=\"off\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <small>\r\n                            <label>Codigo de barras</label>\r\n                          </small>\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span className=\"input-group-text bg-primary\">\r\n                                <i className=\"fas fa-barcode\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Codigo de barras\"\r\n                              name=\"codebar\"\r\n                              value={this.state.codebar}\r\n                              onChange={this.catchInputs}\r\n                              autoComplete=\"off\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"row\">\r\n                        {category_id1 === 1 ? (\r\n                          <div className=\"col-3\">\r\n                            <small>\r\n                              <label>Graduacion</label>\r\n                            </small>\r\n                            <div className=\"input-group mb-3\">\r\n                              <div className=\"input-group-prepend\">\r\n                                <span\r\n                                  className={\r\n                                    grad\r\n                                      ? \"input-group-text bg-primary\"\r\n                                      : \"input-group-text bg-warning\"\r\n                                  }\r\n                                >\r\n                                  <i className=\"fas fa-glasses\"></i>\r\n                                </span>\r\n                              </div>\r\n                              <input\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                placeholder=\"+100100\"\r\n                                name=\"grad\"\r\n                                value={grad}\r\n                                onChange={this.catchInputs}\r\n                                autoComplete=\"off\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        ) : null}\r\n                        <div className=\"col\">\r\n                          {nameValue ? (\r\n                            <small>\r\n                              <label>Nombre del producto</label>\r\n                            </small>\r\n                          ) : (\r\n                            <br />\r\n                          )}\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  nameValue\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-archive\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control text-uppercase\"\r\n                              placeholder=\"Nombre del producto\"\r\n                              name=\"name\"\r\n                              ref={this.nameRef}\r\n                              value={nameValue}\r\n                              onChange={this.catchInputs}\r\n                              autoComplete=\"off\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"row\">\r\n                        <div className=\"col\">\r\n                          {this.state.unit ? (\r\n                            <small>\r\n                              <label>Unidad de presentacion</label>\r\n                            </small>\r\n                          ) : (\r\n                            <br />\r\n                          )}\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  unit\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-balance-scale\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Unidad de presentación\"\r\n                              name=\"unit\"\r\n                              value={unit}\r\n                              onChange={this.catchInputs}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <small>\r\n                            <label>Cantidad en existencia</label>\r\n                          </small>\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  cant\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-database\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"number\"\r\n                              className=\"form-control text-right\"\r\n                              placeholder=\"Cantidades en existencia\"\r\n                              name=\"cant\"\r\n                              value={cant}\r\n                              onChange={this.catchInputs}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <small>\r\n                            <label>Precio</label>\r\n                          </small>\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  price\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-money-bill\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"number\"\r\n                              className=\"form-control text-right\"\r\n                              placeholder=\"Precio\"\r\n                              name=\"price\"\r\n                              value={price}\r\n                              onChange={this.catchInputs}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </React.Fragment>\r\n                  ) : (\r\n                    <div className=\"row\">\r\n                      <div className=\"col\">\r\n                        <h6 className=\"text-warning\">\r\n                          Seleccione primero una categoría.\r\n                        </h6>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </React.Fragment>\r\n              ) : (\r\n                <div className=\"text-center\">\r\n                  <span className=\"text-primary\">Cargando formulario</span>\r\n                  <div\r\n                    className=\"spinner-border text-primary ml-4\"\r\n                    role=\"status\"\r\n                  >\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"card-footer text-right\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"btn-group\" role=\"group\">\r\n                    <Link\r\n                      to=\"/almacen/registro\"\r\n                      className=\"btn btn-dark\"\r\n                      onClick={this.setNew}\r\n                    >\r\n                      <i className=\"fas fa-plus mr-1\"></i>\r\n                      Nuevo\r\n                    </Link>\r\n                    <Link\r\n                      to=\"/almacen\"\r\n                      className=\"btn btn-dark\"\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/almacen\");\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className={id ? \"fas fa-ban mr-1\" : \"fas fa-undo mr-1\"}\r\n                      ></i>\r\n                      {id ? \"Cerrar\" : \"Cancelar\"}\r\n                    </Link>\r\n                    <button type=\"submit\" className=\"btn btn-primary\">\r\n                      <i className=\"fas fa-save mr-1\"></i>\r\n                      Guardar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        {id ? (\r\n          <div className=\"col\">\r\n            <StoreLote\r\n              id={id}\r\n              price={this.state.price}\r\n              refresh={this.getItem}\r\n            />\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleNameLent = (grad) => {\r\n    let stringcode = \"\";\r\n    stringcode +=\r\n      this.category2.current !== null\r\n        ? this.category2.current.options[\r\n            this.category2.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.category3.current !== null\r\n        ? \" \" +\r\n          this.category3.current.options[\r\n            this.category3.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.category4.current !== null\r\n        ? \" \" +\r\n          this.category4.current.options[\r\n            this.category4.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n\r\n    stringcode += \" \" + grad.toString();\r\n    return stringcode.toLowerCase();\r\n  };\r\n  handleCodeLent = (grad) => {\r\n    let stringcode =\r\n      this.category2.current !== null\r\n        ? Codestring(\r\n            this.category2.current.options[this.category2.current.selectedIndex]\r\n              .text\r\n          )\r\n        : \"\";\r\n    stringcode +=\r\n      this.category3.current !== null\r\n        ? Codestring(\r\n            this.category3.current.options[this.category3.current.selectedIndex]\r\n              .text\r\n          )\r\n        : \"\";\r\n    stringcode +=\r\n      this.category4.current !== null\r\n        ? Codestring(\r\n            this.category4.current.options[this.category4.current.selectedIndex]\r\n              .text\r\n          )\r\n        : \"\";\r\n    return stringcode + grad.toString();\r\n  };\r\n  handleCodeString = (code) => {\r\n    let stringcode = \"armazon\";\r\n    stringcode +=\r\n      this.category2.current !== null\r\n        ? \" \" +\r\n          this.category2.current.options[\r\n            this.category2.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.brandRef.current !== null\r\n        ? \" \" +\r\n          this.brandRef.current.options[\r\n            this.brandRef.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.supplierRef.current !== null\r\n        ? \" \" +\r\n          this.supplierRef.current.options[\r\n            this.supplierRef.current.selectedIndex\r\n          ].text\r\n            .trim()\r\n            .split(\" \")[0]\r\n        : \"\";\r\n\r\n    stringcode += \" \" + code.toString();\r\n    return stringcode.toLowerCase();\r\n  };\r\n  setNew = (e) => {\r\n    this.setState({\r\n      id: 0,\r\n      code: \"\",\r\n      codebar: \"\",\r\n      grad: \"\",\r\n      brand_id: 0,\r\n      name: \"\",\r\n      unit: \"PZ\",\r\n      cant: 1,\r\n      price: 1,\r\n      supplier: 0,\r\n      brand: 0,\r\n      category_id: 0,\r\n      category_id1: 0,\r\n      category_id2: 0,\r\n      category_id3: 0,\r\n      category_id4: 0,\r\n      category_list2: [],\r\n      category_list3: [],\r\n      category_list4: [],\r\n      load: false,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, type } = e.target;\r\n    let { value } = e.target;\r\n\r\n    if (type === \"text\") value = value.toLowerCase();\r\n    if (type === \"number\") value = parseInt(value);\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getCategory = () => {\r\n    //Variables\r\n    let { host, token } = this.state;\r\n\r\n    console.log(\"solicitando categorias al API\");\r\n    fetch(\"http://\" + host + \"/api/categories?categoryid=raiz\", {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data !== null) {\r\n          console.log(\"Almacenando categorias\");\r\n          this.setState({\r\n            category_list1: cat.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", cat.message);\r\n          window.Swal.fire(\r\n            \"Error\",\r\n            \"Error al descargar las categorias\",\r\n            \"error\"\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  handleSave = async (e) => {\r\n    e.preventDefault();\r\n    const {\r\n      id,\r\n      category_id,\r\n      category_id1,\r\n      category_id2,\r\n      category_id4,\r\n      supplier,\r\n      brand_id,\r\n      code,\r\n    } = this.state;\r\n    //Verificamos campos validos\r\n    if (!category_id) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Selecione una categoria primero\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    } else {\r\n      if (category_id1 === 1 && category_id4 !== category_id) {\r\n        window.Swal.fire(\r\n          \"Verificación\",\r\n          \"Selecione una categoria valida para lentes\",\r\n          \"warning\"\r\n        );\r\n        return false;\r\n      } else if (category_id1 === 2 && category_id2 !== category_id) {\r\n        window.Swal.fire(\r\n          \"Verificación\",\r\n          \"Selecione una categoria valida para armazones\",\r\n          \"warning\"\r\n        );\r\n        return false;\r\n      }\r\n    }\r\n    if (category_id1 === 2 && !supplier) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Selecione un PROVEEDOR valido primero\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (category_id1 === 2 && !brand_id) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Selecione una MARCA valida primero\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (!code && !this.codeRef.current.value) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Escriba una CODIGO para este producto\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el producto?\"\r\n        : \"¿Esta seguro de crear un nuevo producto?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const {\r\n              id,\r\n              code,\r\n              codebar,\r\n              brand_id,\r\n              name,\r\n              unit,\r\n              cant,\r\n              price,\r\n              category_id,\r\n              token,\r\n              host,\r\n              supplier,\r\n              grad,\r\n            } = this.state,\r\n            url = id\r\n              ? \"http://\" + host + \"/api/store/\" + id\r\n              : \"http://\" + host + \"/api/store\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n          let body = {\r\n            code: code ? code : this.codeRef.current.value,\r\n            codebar,\r\n            name: name ? name : this.nameRef.current.value,\r\n            unit,\r\n            cant,\r\n            price,\r\n            category_id,\r\n            grad: grad ? grad : \"+000000\",\r\n            brand_id: brand_id ? brand_id : \"\",\r\n            contact_id: supplier ? supplier : \"\",\r\n          };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del producto a API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          }).then(async (response) => {\r\n            let back = {};\r\n            if (response.status !== 204) back = await response.json();\r\n            if (!response.ok) {\r\n              console.error(\"Orus res: \", back.message, back.errors);\r\n              if (back.errors && back.errors.code) {\r\n                window.Swal.fire(\r\n                  \"Validacion\",\r\n                  \"El CODIGO ya esta registrado\",\r\n                  \"warning\"\r\n                );\r\n              } else if (back.errors && back.errors.name) {\r\n                window.Swal.fire(\r\n                  \"Validacion\",\r\n                  \"El nombre del PRODUCTO ya esta registrado\",\r\n                  \"warning\"\r\n                );\r\n              } else\r\n                window.Swal.fire(\"Error\", \"al almacenar el producto\", \"error\");\r\n            }\r\n            return back;\r\n          });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Producto almacenado\", data.data);\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Producto actualizado con exito\"\r\n              : \"Producto almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            if (id) {\r\n              this.props.history.push(`/almacen`);\r\n            } else {\r\n              this.setState({\r\n                id: data.data.id,\r\n              });\r\n              this.props.history.push(`/almacen/registro/${data.data.id}`);\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getItem = (id) => {\r\n    if (id > 0) {\r\n      //Variables\r\n      let { host, token } = this.state;\r\n      //Realiza la peticion al API\r\n      console.log(\"Solicitando datos de producto a la API\");\r\n      fetch(\"http://\" + host + \"/api/store/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then(async (data) => {\r\n          if (data.data) {\r\n            let category_id1 = 0,\r\n              category_list2 = [],\r\n              category_list3 = [],\r\n              category_list4 = [],\r\n              category_id2 = 0,\r\n              category_id3 = 0,\r\n              category_id4 = 0;\r\n\r\n            if (data.data.categoria && data.data.categoria.depende_de) {\r\n              if (\r\n                data.data.categoria.depende_de &&\r\n                data.data.categoria.depende_de.depende_de\r\n              ) {\r\n                if (\r\n                  data.data.categoria.depende_de.depende_de &&\r\n                  data.data.categoria.depende_de.depende_de.depende_de\r\n                ) {\r\n                  category_id1 =\r\n                    data.data.categoria.depende_de.depende_de.depende_de.id;\r\n                  category_id2 = data.data.categoria.depende_de.depende_de.id;\r\n                  category_id3 = data.data.categoria.depende_de.id;\r\n                  category_id4 = data.data.categoria.id;\r\n                  //Listas\r\n                  category_list2 =\r\n                    data.data.categoria.depende_de.depende_de.depende_de.hijos;\r\n                  category_list3 =\r\n                    data.data.categoria.depende_de.depende_de.hijos;\r\n                  category_list4 = data.data.categoria.depende_de.hijos;\r\n                } else {\r\n                  category_id1 = data.data.categoria.depende_de.depende_de.id;\r\n                  category_id2 = data.data.categoria.depende_de.id;\r\n                  category_id3 = data.data.categoria.id;\r\n                  //Lista\r\n                  category_list2 =\r\n                    data.data.categoria.depende_de.depende_de.hijos;\r\n                  category_list3 = data.data.categoria.depende_de.hijos;\r\n                }\r\n              } else {\r\n                category_id1 = data.data.categoria.depende_de.id;\r\n                category_id2 = data.data.categoria.id;\r\n                //Lista\r\n                category_list2 = data.data.categoria.depende_de.hijos;\r\n              }\r\n            } else {\r\n              category_id1 = data.data.categoria.id;\r\n              //Lista\r\n              category_list2 = data.data.categoria.hijos;\r\n            }\r\n            /*console.log(\r\n              \"CAT principal\",\r\n              \"Nombre: \" + data.data.categoria.categoria,\r\n              \"Hijos: \" + data.data.categoria.hijos.length,\r\n              \"Padre: \",\r\n              data.data.categoria.depende_de\r\n            );*/\r\n\r\n            this.setState({\r\n              id: data.data.id,\r\n              code: data.data.codigo,\r\n              codebar: data.data.c_barra,\r\n              brand_id: data.data.marca ? data.data.marca.id : 0,\r\n              grad: data.data.graduacion ? data.data.graduacion : \"\",\r\n              name: data.data.producto,\r\n              unit: data.data.unidad,\r\n              cant: data.data.cantidades,\r\n              price: data.data.precio,\r\n              category_id: data.data.categoria.id,\r\n              category_id1,\r\n              category_list2,\r\n              category_list3,\r\n              category_list4,\r\n              category_id2,\r\n              category_id3,\r\n              category_id4,\r\n              category_data: data.data.categoria,\r\n              supplier: data.data.proveedor ? data.data.proveedor.id : 0,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"[Store] add - \", data.message);\r\n            window.Swal.fire(\r\n              \"Error\",\r\n              \"Error en el sistema, comuniquese con el administrador de sistema\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Pagination from \"../Layouts/pagination\";\r\n\r\nexport default class CategoryList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      meta: {},\r\n      add: false,\r\n      name: \"\",\r\n      category_raiz: [],\r\n      category_id: props.category,\r\n      page: 1,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      load: true,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getCategoriesMain();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    const { category } = this.props;\r\n    if (props.category !== category) {\r\n      this.getCategoriesMain();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { category_raiz, category_id, name, add, meta, load } = this.state,\r\n      {\r\n        categoryName,\r\n        categoryDataName,\r\n        categorySelect,\r\n        category,\r\n        last,\r\n      } = this.props;\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-body\">\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Nombre</th>\r\n                <th style={{ width: 16 }} className=\"text-center\">\r\n                  E\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {!load && category_raiz ? (\r\n                <React.Fragment>\r\n                  <tr\r\n                    className={category_id === category ? \"table-success\" : \"\"}\r\n                    onClick={(e) => {\r\n                      this.setState({\r\n                        category_id: parseInt(category) ? category : 0,\r\n                      });\r\n                      categorySelect({\r\n                        [categoryName]: 0,\r\n                        [categoryDataName]: [],\r\n                        category_id: category,\r\n                      });\r\n                    }}\r\n                  >\r\n                    <td\r\n                      colSpan=\"2\"\r\n                      className=\"text-capitalize\"\r\n                      style={{ cursor: \"pointer\" }}\r\n                    >\r\n                      Raiz\r\n                    </td>\r\n                  </tr>\r\n                  {category_raiz.map((cat) => {\r\n                    return (\r\n                      <tr\r\n                        key={cat.id}\r\n                        className={\r\n                          cat.id === category_id ? \"table-success\" : \"\"\r\n                        }\r\n                        style={{ cursor: \"pointer\" }}\r\n                        onClick={(e) => {\r\n                          if (last) {\r\n                            this.setState({\r\n                              category_id: parseInt(category) ? category : 0,\r\n                            });\r\n                            categorySelect({\r\n                              [categoryName]: 0,\r\n                              [categoryDataName]: [],\r\n                              category_id: category,\r\n                            });\r\n                          } else {\r\n                            categorySelect({\r\n                              [categoryName]: cat.id,\r\n                              [categoryDataName]: cat.hijos,\r\n                              category_id: cat.id,\r\n                            });\r\n                            this.setState({\r\n                              category_id: cat.id,\r\n                            });\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td className=\"text-capitalize\">\r\n                          <a\r\n                            href={\"#select!\" + cat.id}\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              this.setState({\r\n                                category_id: cat.id,\r\n                              });\r\n                            }}\r\n                          >\r\n                            {cat.categoria}\r\n                          </a>\r\n                        </td>\r\n                        <td>\r\n                          {!cat.hijos.length ? (\r\n                            <button\r\n                              className=\"btn btn-outline-dark btn-sm\"\r\n                              onClick={(e) => {\r\n                                this.handleClickDelete(cat.id, cat.categoria);\r\n                              }}\r\n                            >\r\n                              <i className=\"fas fa-trash\"></i>\r\n                            </button>\r\n                          ) : null}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </React.Fragment>\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"8\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n            {add && !load ? (\r\n              <tfoot>\r\n                <tr>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      className=\"form-control text-capitalize\"\r\n                      autoComplete=\"off\"\r\n                      value={name}\r\n                      onChange={this.catchInputs}\r\n                      ref={(input) => {\r\n                        this.nameInput = input;\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-dark btn-sm\"\r\n                      onClick={this.handleClickSave}\r\n                    >\r\n                      <i className=\"fas fa-save\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            ) : (\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan=\"3\">\r\n                    <Pagination\r\n                      meta={meta}\r\n                      handleChangePage={this.handleChangePage}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            )}\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={this.handleClickAdd}\r\n          >\r\n            {this.state.add ? (\r\n              <i className=\"fas fa-undo\"></i>\r\n            ) : (\r\n              <i className=\"fas fa-plus\"></i>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n    });\r\n  };\r\n  handleClickDelete = (id, name) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar la categoria \" + name.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          const { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de categoria por API\");\r\n          return fetch(\"http://\" + host + \"/api/categories/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Categoria eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Categoria eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => {\r\n          //Proceso de eliminacion de categoria del array\r\n          const { category } = this.props;\r\n          let { category_raiz } = this.state,\r\n            indexCat = 0;\r\n\r\n          if (category_raiz.length) {\r\n            category_raiz.filter((cat, i) => {\r\n              if (cat.id === id) indexCat = i;\r\n              return false;\r\n            });\r\n            category_raiz.splice(indexCat, 1);\r\n            this.setState({\r\n              category_raiz,\r\n              category_id: category,\r\n            });\r\n          }\r\n          //fin del proceso\r\n        });\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  handleClickSave = () => {\r\n    //Verificamos campos validos\r\n    if (this.state.name.length < 4) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Debe de escribir el nombre de la categoria\",\r\n        \"warning\"\r\n      );\r\n      this.nameInput.focus();\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva categoria?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          const { host, token, category_id, name } = this.state,\r\n            { category } = this.props,\r\n            body = {\r\n              name,\r\n              category_id: parseInt(category_id)\r\n                ? parseInt(category_id)\r\n                : parseInt(category)\r\n                ? parseInt(category)\r\n                : \"\",\r\n            };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(\"http://\" + host + \"/api/categories\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        const data = result.value,\r\n          { category_raiz, category_id } = this.state,\r\n          { category } = this.props;\r\n\r\n        if (data.data) {\r\n          console.log(\"Categoria almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Categoria almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then(async (res) => {\r\n            //Resultado actualizando datos\r\n            if (parseInt(category) === category_id) {\r\n              category_raiz.push(data.data);\r\n            } else {\r\n              await category_raiz.find((cat) => {\r\n                if (cat.id === category_id) {\r\n                  cat.hijos.push(data.data);\r\n                  return cat;\r\n                } else return false;\r\n              });\r\n            }\r\n\r\n            this.setState({\r\n              category_raiz,\r\n              name: \"\",\r\n              add: !this.state.add,\r\n              category_id: data.data.id,\r\n            });\r\n            //Fin de resultado\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la categoria\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getCategoriesMain = () => {\r\n    //Variables props\r\n    const { category, CategoryData } = this.props;\r\n\r\n    if (CategoryData === undefined || !CategoryData.length) {\r\n      //Variables en localStorage\r\n      const { host, token, page, load } = this.state,\r\n        url = \"http://\" + host + \"/api/categories\",\r\n        categoryid = category ? \"&categoryid=\" + category : \"&categoryid=raiz\",\r\n        ppage = page > 0 ? \"?page=\" + page : \"?page=1\";\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      //Categories main\r\n      fetch(url + ppage + categoryid, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((cat) => {\r\n          this.setState({\r\n            category_raiz: cat.data !== null ? cat.data : [],\r\n            category_id: category,\r\n            load: false,\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus: \" + e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    } else {\r\n      this.setState({\r\n        category_raiz: CategoryData ? CategoryData : [],\r\n        category_id: category,\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n  handleClickAdd = () => {\r\n    this.setState({\r\n      add: !this.state.add,\r\n      name: \"\",\r\n    });\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Catalogo from \"./category_list\";\r\n\r\nexport default class Categories extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      category_id: 0,\r\n      category_id1: 0,\r\n      category_hijos1: [],\r\n      category_id2: 0,\r\n      category_hijos2: [],\r\n      category_id3: 0,\r\n      category_hijos3: [],\r\n      category_id4: 0,\r\n      category_hijos4: [],\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      category_id1,\r\n      category_hijos1,\r\n      category_id2,\r\n      category_hijos2,\r\n      category_id3,\r\n      category_hijos3,\r\n    } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <h5>Categorias de productos</h5>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <Catalogo\r\n              data={this.props.data}\r\n              category={0}\r\n              categoryName=\"category_id1\"\r\n              categoryDataName=\"category_hijos1\"\r\n              categorySelect={this.handleChangeState}\r\n            />\r\n          </div>\r\n          {category_id1 && category_hijos1.length ? (\r\n            <div className=\"col\">\r\n              <Catalogo\r\n                data={this.props.data}\r\n                category={category_id1}\r\n                CategoryData={category_hijos1}\r\n                categoryName=\"category_id2\"\r\n                categoryDataName=\"category_hijos2\"\r\n                categorySelect={this.handleChangeState}\r\n                last={category_id1 === 2 ? true : false}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {category_id2 && category_hijos2.length ? (\r\n            <div className=\"col\">\r\n              <Catalogo\r\n                data={this.props.data}\r\n                category={category_id2}\r\n                CategoryData={category_hijos2}\r\n                categoryName=\"category_id3\"\r\n                categoryDataName=\"category_hijos3\"\r\n                categorySelect={this.handleChangeState}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {category_id3 && category_hijos3.length ? (\r\n            <div className=\"col\">\r\n              <Catalogo\r\n                data={this.props.data}\r\n                category={category_id3}\r\n                CategoryData={category_hijos3}\r\n                categoryName=\"category_id4\"\r\n                categoryDataName=\"category_hijos4\"\r\n                categorySelect={this.handleChangeState}\r\n                last={true}\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  handleChangeState = (data) => {\r\n    if (data.category_id1 !== undefined && data.category_id1) {\r\n      data.category_id2 = 0;\r\n      data.category_id3 = 0;\r\n      data.category_id4 = 0;\r\n    } else if (data.category_id2 !== undefined && data.category_id2) {\r\n      data.category_id3 = 0;\r\n      data.category_id4 = 0;\r\n    } else if (data.category_id3 !== undefined && data.category_id3) {\r\n      data.category_id4 = 0;\r\n    }\r\n    this.setState(data);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Suppliers from \"./input_suppliers\";\r\n\r\nexport default class Brands extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      supplier: 0,\r\n      brands: [],\r\n      name: \"\",\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(props, state) {\r\n    if (state.supplier !== this.state.supplier && this.state.supplier) {\r\n      this.getBrands();\r\n    }\r\n  }\r\n  render() {\r\n    const { supplier, name, brands } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <h5>Marcas para productos</h5>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card card-primary card-outline\">\r\n              <div className=\"card-body\">\r\n                <Suppliers\r\n                  data={this.props.data}\r\n                  supplier={supplier}\r\n                  handleChangeSupplier={(e) => {\r\n                    this.setState({\r\n                      supplier: e,\r\n                    });\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col\">\r\n            <div className=\"card card-primary card-outline\">\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title text-primary mb-4\">\r\n                  {supplier\r\n                    ? \"Listado de marcas\"\r\n                    : \"Primero seleccione a un proveedor\"}\r\n                </h5>\r\n                {supplier ? (\r\n                  <ul className=\"card-text list-group\">\r\n                    {!brands.length ? (\r\n                      <li className=\"list-group-item\">\r\n                        No hay marcas registradas para este proveedor\r\n                      </li>\r\n                    ) : (\r\n                      brands.map((brand) => {\r\n                        return (\r\n                          <li\r\n                            className=\"list-group-item d-flex justify-content-between align-items-center\"\r\n                            key={brand.id}\r\n                          >\r\n                            <span className=\"text-primary\">{brand.nombre}</span>\r\n                            <span\r\n                              className=\"badge badge-dark badge-pill\"\r\n                              style={{ cursor: \"pointer\" }}\r\n                              onClick={(e) => {\r\n                                this.deleteBrand(brand.id, brand.nombre);\r\n                              }}\r\n                            >\r\n                              <i className=\"fas fa-trash\"></i>\r\n                            </span>\r\n                          </li>\r\n                        );\r\n                      })\r\n                    )}\r\n                  </ul>\r\n                ) : null}\r\n              </div>\r\n              {supplier ? (\r\n                <div className=\"card-footer\">\r\n                  <form onSubmit={this.saveBrand}>\r\n                    <div className=\"input-group\">\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"form-control mr-1\"\r\n                        name=\"name\"\r\n                        value={name}\r\n                        onChange={this.changeInput}\r\n                      />\r\n                      <button className=\"btn btn-dark\">\r\n                        <i className=\"fas fa-save\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  deleteBrand = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el producto \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de marca por API\");\r\n          return fetch(\"http://\" + host + \"/api/brands/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Marca eliminada\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Marca eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => {\r\n          //Eliminar el item del array\r\n          let { brands } = this.state,\r\n            indexItem = 0;\r\n\r\n          if (brands.length) {\r\n            brands.filter((item, i) => {\r\n              if (item.id === id) indexItem = i;\r\n              return false;\r\n            });\r\n            brands.splice(indexItem, 1);\r\n            this.setState({\r\n              brands,\r\n            });\r\n          }\r\n        });\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  saveBrand = (e) => {\r\n    e.preventDefault();\r\n    const { name, supplier } = this.state;\r\n\r\n    if (name.length < 3) {\r\n      window.Swal.fire(\r\n        \"Error\",\r\n        \"El nombre de la marca debe de tener por lo menos 3 caracteres\",\r\n        \"error\"\r\n      );\r\n      return false;\r\n    } else if (!supplier) {\r\n      window.Swal.fire(\r\n        \"Error\",\r\n        \"Debe de elegir a un proveedor primero\",\r\n        \"error\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva marca?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { name, supplier, token, host } = this.state;\r\n          let body = {\r\n            name,\r\n            contact_id: supplier,\r\n          };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos de la marca a API\");\r\n          return fetch(\"http://\" + host + \"/api/brands\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Marca almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Marca almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            //Actualizando con la nueva marca\r\n            let { brands } = this.state;\r\n\r\n            brands.push(data.data);\r\n            this.setState({\r\n              brands,\r\n              name: \"\",\r\n            });\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la marca\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  changeInput = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getBrands = () => {\r\n    //Constantes\r\n    const { supplier, host, token } = this.state;\r\n\r\n    console.log(\"solicitando marcas al API\");\r\n    fetch(\"http://\" + host + \"/api/brands?supplier=\" + supplier, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        if (data.data !== null) {\r\n          console.log(\"descargando marcas\");\r\n          this.setState({\r\n            brands: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Error al descargar las marcas\", \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Inventory extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      catData_1: [],\r\n      catData_2: [],\r\n      catData_3: [],\r\n      catid_1: 0,\r\n      catid_2: 0,\r\n      catid_3: 0,\r\n      load: false,\r\n      items: [],\r\n      meta: {},\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.catid_3 !== this.state.catid_3) {\r\n      this.getItems(this.state.catid_3);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      catid_1,\r\n      catData_1,\r\n      catid_2,\r\n      catData_2,\r\n      catid_3,\r\n      catData_3,\r\n      load,\r\n      items,\r\n      meta,\r\n    } = this.state;\r\n    let header = [],\r\n      body = [],\r\n      i = 0;\r\n\r\n    do {\r\n      header.push(<th key={i}>{i.toFixed(2)}</th>);\r\n      i = i - 0.25;\r\n    } while (i > parseFloat(meta.cil) - 0.25);\r\n\r\n    i = parseFloat(meta.rangoInf);\r\n    do {\r\n      if (i === 0)\r\n        body.push(\r\n          <td>\r\n            <label>0.00</label>\r\n          </td>\r\n        );\r\n      else body.push(<td>{i.toFixed(2)}</td>);\r\n      i = i + 0.25;\r\n    } while (i < parseFloat(meta.rangoSup) + 0.25);\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <div className=\"row\">\r\n                <div className=\"col\">\r\n                  <select\r\n                    className=\"custom-select\"\r\n                    name=\"catid_1\"\r\n                    value={catid_1}\r\n                    onChange={this.handleClickCat}\r\n                  >\r\n                    <option value=\"0\">Seleccione un tipo</option>\r\n                    {catData_1.map((cat) => {\r\n                      return (\r\n                        <option key={cat.id} value={cat.id}>\r\n                          {cat.categoria}\r\n                        </option>\r\n                      );\r\n                    })}\r\n                  </select>\r\n                </div>\r\n\r\n                {catid_1 && catData_2.length ? (\r\n                  <div className=\"col\">\r\n                    <select\r\n                      className=\"custom-select\"\r\n                      name=\"catid_2\"\r\n                      value={catid_2}\r\n                      onChange={this.handleClickCat}\r\n                    >\r\n                      <option value=\"0\">Seleccione un material</option>\r\n                      {catData_2.map((cat) => {\r\n                        return (\r\n                          <option key={cat.id} value={cat.id}>\r\n                            {cat.categoria}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n\r\n                {catid_2 && catData_3.length ? (\r\n                  <div className=\"col\">\r\n                    <div\r\n                      className=\"btn-group\"\r\n                      role=\"group\"\r\n                      aria-label=\"Basic example\"\r\n                    >\r\n                      {catData_3.map((cat) => {\r\n                        return (\r\n                          <button\r\n                            key={cat.id}\r\n                            className={\r\n                              catid_3 === cat.id\r\n                                ? \"btn btn-primary\"\r\n                                : \"btn btn-secondary\"\r\n                            }\r\n                            onClick={(e) => {\r\n                              this.setState({\r\n                                catid_3: cat.id,\r\n                                load: true,\r\n                              });\r\n                            }}\r\n                          >\r\n                            {cat.categoria}\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {catid_3 ? (\r\n                <React.Fragment>\r\n                  {load ? (\r\n                    <div className=\"text-center\">\r\n                      <span className=\"text-primary\">Cargando productos</span>\r\n                      <div\r\n                        className=\"spinner-border text-primary ml-4\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <React.Fragment>\r\n                      <div className=\"text-center\">\r\n                        Productos: {items.length}\r\n                      </div>\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-sm table-bordered table-hover\">\r\n                          <thead>\r\n                            <tr>\r\n                              <th>/</th>\r\n                              {header}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {body.map((row, i) => {\r\n                              const zero =\r\n                                row.props.children.type === \"label\"\r\n                                  ? true\r\n                                  : false;\r\n                              return (\r\n                                <tr\r\n                                  className={zero ? \"table-secondary\" : \"\"}\r\n                                  key={i}\r\n                                >\r\n                                  {row}\r\n                                  {header.map((h, i) => {\r\n                                    let grad = zero\r\n                                      ? parseFloat(\r\n                                          row.props.children.props.children\r\n                                        )\r\n                                          .toFixed(2)\r\n                                          .replace(\".\", \"\")\r\n                                      : parseFloat(row.props.children)\r\n                                          .toFixed(2)\r\n                                          .replace(\".\", \"\");\r\n                                    if (parseInt(grad) >= 0) grad = \"+\" + grad;\r\n                                    grad += parseFloat(h.props.children)\r\n                                      .toFixed(2)\r\n                                      .replace(/[-.]/g, \"\");\r\n\r\n                                    //console.log(\"G\", grad);\r\n                                    return (\r\n                                      <td key={i} className=\"text-center\">\r\n                                        {items.length ? (\r\n                                          items.map((item) => {\r\n                                            //console.log(\"comp: \");\r\n                                            return grad === item.graduacion ? (\r\n                                              <React.Fragment>\r\n                                                {item.cantidades ? (\r\n                                                  <span\r\n                                                    key={item.id}\r\n                                                    className={\r\n                                                      item.cantidades > 0\r\n                                                        ? \"badge badge-success\"\r\n                                                        : \"badge badge-danger\"\r\n                                                    }\r\n                                                  >\r\n                                                    <Link\r\n                                                      to={\r\n                                                        \"/almacen/registro/\" +\r\n                                                        item.id\r\n                                                      }\r\n                                                      className=\"text-light\"\r\n                                                    >\r\n                                                      {item.cantidades}\r\n                                                    </Link>\r\n                                                  </span>\r\n                                                ) : null}\r\n                                              </React.Fragment>\r\n                                            ) : null;\r\n                                          })\r\n                                        ) : (\r\n                                          <Link to=\"/almacen/registro\">\r\n                                            <i className=\"fas fa-plus text-secondary\"></i>\r\n                                          </Link>\r\n                                        )}\r\n                                      </td>\r\n                                    );\r\n                                  })}\r\n                                </tr>\r\n                              );\r\n                            })}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </React.Fragment>\r\n                  )}\r\n                </React.Fragment>\r\n              ) : (\r\n                <div className=\"alert alert-warning text-light\" role=\"alert\">\r\n                  <h4 className=\"alert-heading\">\r\n                    <i className=\"fas fa-exclamation\"></i> Seleccion.\r\n                  </h4>\r\n                  <hr />\r\n                  <ul>\r\n                    {!catid_1 ? (\r\n                      <li>Selecciones primero el tipo de lente</li>\r\n                    ) : null}\r\n                    {!catid_2 ? <li>Despues el material</li> : null}\r\n                    <li>Por ultimo el tratamiento</li>\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getItems = (catid) => {\r\n    //Variables en localStorage\r\n    const { data } = this.props,\r\n      { load } = this.state,\r\n      url = \"http://\" + data.host + \"/api/store?cat=\" + catid;\r\n\r\n    //Cargando\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Categories main\r\n    fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + data.token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(\"Descarga de producto exitosa\");\r\n        this.setState({\r\n          items: res.data && res.data.length ? res.data : [],\r\n          load: false,\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n  handleClickCat = (e) => {\r\n    const { name, value } = e.target,\r\n      { catData_1, catData_2 } = this.state;\r\n    let sons = [],\r\n      meta = {};\r\n\r\n    if (name === \"catid_1\") {\r\n      catData_1.map((cat) => {\r\n        if (cat.id === parseInt(value)) {\r\n          sons = cat.hijos;\r\n          meta = cat.meta;\r\n          return true;\r\n        } else return false;\r\n      });\r\n      //console.log(\"Meta: \", meta);\r\n\r\n      this.setState({\r\n        catid_1: parseInt(value),\r\n        catid_2: 0,\r\n        catid_3: 0,\r\n        catData_2: sons,\r\n        catData_3: [],\r\n        meta,\r\n      });\r\n    } else if (name === \"catid_2\") {\r\n      catData_2.map((cat) => {\r\n        if (cat.id === parseInt(value)) {\r\n          sons = cat.hijos;\r\n          return true;\r\n        } else return false;\r\n      });\r\n\r\n      this.setState({\r\n        catid_2: parseInt(value),\r\n        catid_3: 0,\r\n        catData_3: sons,\r\n      });\r\n    }\r\n  };\r\n  getCategories = () => {\r\n    //Variables en localStorage\r\n    const { data } = this.props,\r\n      url = \"http://\" + data.host + \"/api/categories/1\";\r\n\r\n    //Categories main\r\n    fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + data.token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data && cat.data.hijos.length) {\r\n          console.log(\"Descarga de categoria exitos\");\r\n          this.setState({\r\n            catData_1: cat.data.hijos,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, type, business } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: nombre, RFC o email\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Tipo de contacto</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"type\"\r\n                    value={type}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Clientes</option>\r\n                    <option value=\"1\">Proveedores</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>¿Es una empresa?</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-building\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"business\"\r\n                    value={business}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"1\">Si</option>\r\n                    <option value=\"0\">No</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search || type || business\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"type\", \"\");\r\n    this.props.changeFilters(\"business\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Contacts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusContacts\"));\r\n    this.state = {\r\n      contacts: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd && sdd.orderby ? sdd.orderby : \"created_at\",\r\n      order: sdd && sdd.order ? sdd.order : \"desc\",\r\n      search: sdd && sdd.search ? sdd.search : \"\",\r\n      type: sdd && sdd.type ? sdd.type : \"\",\r\n      business: sdd && sdd.business ? sdd.business : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getContacts();\r\n    localStorage.setItem(\r\n      \"OrusContacts\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        type: this.state.type,\r\n        business: this.state.business,\r\n      })\r\n    );\r\n    console.log(\"[Contacts] Eliminando datos de contacto en uso\");\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando contactos\");\r\n      this.getContacts();\r\n      localStorage.setItem(\r\n        \"OrusContacts\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          type: this.state.type,\r\n          business: this.state.business,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { contacts, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Nombre\", type: \"name\", filter: true },\r\n        { name: \"RFC\", type: \"name\", filter: true },\r\n        { name: \"E-mail\", type: \"email\", filter: true },\r\n        { name: \"Tipo\", type: \"type\", filter: true },\r\n        { name: \"Telefono\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-danger card-outline\">\r\n        <div className=\"card-header\">\r\n          <h2 className=\"card-title text-danger\">\r\n            <i className=\"fas fa-address-book mr-1\"></i>\r\n            Lista de contactos\r\n          </h2>\r\n          <div className=\"card-tools\">\r\n            <Filter\r\n              search={this.state.search}\r\n              type={this.state.type}\r\n              business={this.state.business}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={contacts.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-danger\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(contacts.data).length ? (\r\n                contacts.data.map((contact) => {\r\n                  return (\r\n                    <tr key={contact.id}>\r\n                      <td>\r\n                        <Link to={\"/contactos/registro/\" + contact.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {contact.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {contact.rfc ? contact.rfc : \"--\"}\r\n                      </td>\r\n                      <td className=\"text-lowercase\">\r\n                        {contact.email ? contact.email : \"--\"}\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {contact.tipo ? (\r\n                          <span className=\"text-purple\">Proveedor</span>\r\n                        ) : (\r\n                          <span className=\"text-green\">Cliente</span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {contact.telefonos && contact.telefonos.t_movil\r\n                          ? contact.telefonos.t_movil\r\n                          : \"--\"}\r\n                      </td>\r\n                      <td>{moment(contact.updated_at).fromNow()}</td>\r\n                      <td>{moment(contact.created_at).format(\"ll\")}</td>\r\n                      <Actions\r\n                        id={contact.id}\r\n                        item={contact.nombre}\r\n                        delete={contact.enUso ? null : this.handleDelete}\r\n                        edit={\"/contactos/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/contactos/registro\"\r\n            className=\"btn btn-outline-danger\"\r\n            onClick={this.changePage}\r\n            id=\"/contactos/registro\"\r\n          >\r\n            <i className=\"fas fa-plus\" id=\"/contactos/registro\"></i>\r\n            &nbsp; Nuevo contacto\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e.target.id);\r\n  };\r\n  handleDelete = (id, item) => {\r\n    //Confirmación de eliminacion\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el contacto \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación por API\");\r\n          return fetch(\"http://\" + host + \"/api/contacts/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Contacto eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getContacts());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getContacts() {\r\n    //Variables\r\n    let {\r\n        host,\r\n        token,\r\n        order,\r\n        orderby,\r\n        search,\r\n        page,\r\n        type,\r\n        business,\r\n        load,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/contacts\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\",\r\n      tipo = type === \"\" ? \"\" : \"&type=\" + type,\r\n      negocio = business === \"\" ? \"\" : \"&business=\" + business;\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Realiza la peticion de los contactos\r\n    console.log(\"Descargando contactos del API\");\r\n    fetch(url + pagina + ordenar + buscar + tipo + negocio, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenando contactos\");\r\n          this.setState({\r\n            contacts: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar contactos\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Mapa extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      load: true,\r\n    };\r\n    this.markers = [];\r\n    this.map = \"\";\r\n  }\r\n  componentDidMount() {\r\n    const googlePlaceAPILoad1 = setInterval(() => {\r\n      if (window.google) {\r\n        this.google = window.google;\r\n        clearInterval(googlePlaceAPILoad1);\r\n        console.log(\"Cargando mapa\");\r\n        const mapCenter = new this.google.maps.LatLng(19.2487072, -103.747381);\r\n        this.map = new this.google.maps.Map(\r\n          document.getElementById(\"gmapContainer\"),\r\n          {\r\n            center: mapCenter,\r\n            zoom: 16,\r\n          }\r\n        );\r\n        if (this.props.calle.length > 6) {\r\n          console.log(\"Cargando Marker\");\r\n          this.eventLoadMap();\r\n        }\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      }\r\n    }, 100);\r\n  }\r\n  componentDidUpdate() {\r\n    if (this.props.calle.length > 6) {\r\n      console.log(\"Cargando Marker\");\r\n      this.eventLoadMap();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"card card-danger card-outline\">\r\n        <div className=\"card-header\">\r\n          <i className=\"fas fa-map-marked mr-1\"></i>\r\n          Mapa\r\n        </div>\r\n        <div\r\n          className=\"card-body\"\r\n          id=\"gmapContainer\"\r\n          style={{ height: 400 }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  eventLoadMap = () => {\r\n    let input =\r\n      this.props.calle +\r\n      \",\" +\r\n      this.props.colonia +\r\n      \",\" +\r\n      this.props.municipio +\r\n      \",\" +\r\n      this.props.estado +\r\n      \",\" +\r\n      this.props.cp;\r\n    const request = {\r\n      query: input,\r\n      fields: [\"formatted_address\", \"geometry\"],\r\n    };\r\n    this.service = new this.google.maps.places.PlacesService(this.map);\r\n    this.service.findPlaceFromQuery(request, (results, status) => {\r\n      if (status === \"OK\") {\r\n        if (this.markers.length) {\r\n          this.markers[0].setMap(null);\r\n          this.markers = [];\r\n        }\r\n        results.map((place) => {\r\n          this.marker = new this.google.maps.Marker({\r\n            position: place.geometry.location,\r\n            title: place.formatted_address,\r\n            map: this.map,\r\n          });\r\n          this.marker.addListener(\"click\", () => {\r\n            let address = this.marker.title.split(\",\"),\r\n              add = address[2].split(/(\\d{5})/g);\r\n\r\n            if (!add.length) {\r\n              add = address[3].split(/(\\d{5})/g);\r\n            }\r\n            this.props.changeAddress({\r\n              calle: address[0].trim(),\r\n              colonia: address[1].trim(),\r\n              municipio: add[2] ? add[2].trim() : this.props.municipio,\r\n              estado: address[3].trim(),\r\n              cp: add[1] ? add[1].trim() : this.props.cp,\r\n            });\r\n          });\r\n          this.markers.push(this.marker);\r\n          this.markers[0].setMap(this.map);\r\n          this.map.setCenter(this.markers[0].position);\r\n          return null;\r\n        });\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class GraduacionExam extends Component {\r\n  render() {\r\n    const {\r\n      readOnly,\r\n      cilindrod,\r\n      cilindroi,\r\n      esferaod,\r\n      esferaoi,\r\n      ejeod,\r\n      ejeoi,\r\n      adiciond,\r\n      adicioni,\r\n      adicion_media_od,\r\n      adicion_media_oi,\r\n      dpod,\r\n      dpoi,\r\n      alturaod,\r\n      alturaoi,\r\n      lcmarca,\r\n      lcgod,\r\n      lcgoi,\r\n    } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <table className=\"table table-bordered table-hover\">\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Esfera</th>\r\n              <th>Cilindro</th>\r\n              <th>Eje</th>\r\n              <th>Adici&oacute;n</th>\r\n              <th>Adici&oacute;n media</th>\r\n              <th>D/P</th>\r\n              <th>Altura</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                <label>D</label>\r\n                <i className=\"fa fa-eye\"></i>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"esferaod\"\r\n                  min=\"-20\"\r\n                  max=\"20\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={esferaod ? esferaod.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{esferaod.toFixed(2)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"cilindrod\"\r\n                  min=\"-20\"\r\n                  max=\"0\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={cilindrod ? cilindrod.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{cilindrod.toFixed(2)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"ejeod\"\r\n                  min=\"0\"\r\n                  max=\"180\"\r\n                  step=\"1\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  placeholder=\"°\"\r\n                  value={ejeod ? parseInt(ejeod) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{parseInt(ejeod)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adiciond\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={adiciond ? adiciond.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{adiciond.toFixed(2)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adicion_media_od\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={adicion_media_od ? adicion_media_od.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">\r\n                  {adicion_media_od.toFixed(2)}\r\n                </h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"dpod\"\r\n                  min=\"40\"\r\n                  max=\"80\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={dpod ? dpod.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{dpod.toFixed(1)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"alturaod\"\r\n                  min=\"0\"\r\n                  max=\"35\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={alturaod ? alturaod.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{alturaod.toFixed(1)}</h5>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>\r\n                <label>I</label>\r\n                <i className=\"fa fa-eye\"></i>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"esferaoi\"\r\n                  min=\"-20\"\r\n                  max=\"20\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={esferaoi ? esferaoi.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{esferaoi.toFixed(2)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"cilindroi\"\r\n                  min=\"-20\"\r\n                  max=\"0\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={cilindroi ? cilindroi.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{cilindroi.toFixed(2)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"ejeoi\"\r\n                  min=\"0\"\r\n                  max=\"180\"\r\n                  step=\"1\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  placeholder=\"°\"\r\n                  value={ejeoi ? parseInt(ejeoi) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{parseInt(ejeoi)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adicioni\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={adicioni ? adicioni.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{adicioni.toFixed(2)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adicion_media_oi\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={adicion_media_oi ? adicion_media_oi.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">\r\n                  {adicion_media_oi.toFixed(2)}\r\n                </h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"dpoi\"\r\n                  min=\"40\"\r\n                  max=\"80\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={dpoi ? dpoi.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{dpoi.toFixed(1)}</h5>\r\n              </td>\r\n              <td className=\"text-right\">\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"alturaoi\"\r\n                  min=\"0\"\r\n                  max=\"35\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly\r\n                      ? \"form-control d-print-none disabled\"\r\n                      : \"form-control d-print-none\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={alturaoi ? alturaoi.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n                <h5 className=\"d-none d-print-block\">{alturaoi.toFixed(1)}</h5>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <ul className=\"list-group d-print-none mt-4\">\r\n          <li className=\"list-group-item\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12\">\r\n                Lente de contacto\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lcmarca\"\r\n                  maxLength=\"70\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={lcmarca}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lcgod\"\r\n                  maxLength=\"30\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={lcgod ? lcgod : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lcgoi\"\r\n                  maxLength=\"30\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={lcgoi ? lcgoi : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name, type, value, checked } = e.target;\r\n    let val = value;\r\n\r\n    if (type === \"checkbox\") val = checked;\r\n    if (type === \"text\") val = value.toLowerCase();\r\n    if (type === \"number\") {\r\n      if (name === \"ejeod\" || name === \"ejeoi\") {\r\n        val = parseInt(value);\r\n      } else {\r\n        val = parseFloat(value);\r\n        val = val.toFixed(2);\r\n        val = parseFloat(val);\r\n      }\r\n    }\r\n    this.props.onChangeInput(name, val);\r\n  };\r\n}\r\n","import React, { Component, Fragment } from \"react\";\r\n//import Codestring from \"../Layouts/codeLentString\";\r\n\r\nexport default class Recomendaciones extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      category_list: [],\r\n      meta: {},\r\n      category_list_2: [],\r\n      category_list_3: [],\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      category: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.category_id !== this.props.category_id) {\r\n      console.log(\"Recargando recomendacion\");\r\n      this.getCategories();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n        category_id,\r\n        title,\r\n        esferaod,\r\n        esferaoi,\r\n        cilindrod,\r\n        cilindroi,\r\n      } = this.props,\r\n      { category } = this.state;\r\n    let code =\r\n        category_id && Object.keys(category).length\r\n          ? this.handleCodeName(category)\r\n          : \"XX\",\r\n      gradod = \"+000000\",\r\n      gradoi = \"+000000\";\r\n\r\n    if (cilindrod || esferaod) {\r\n      gradod = esferaod > 0 ? \"+\" : \"\";\r\n      gradod +=\r\n        esferaod.toFixed(2).toString().replace(\".\", \"\") +\r\n        cilindrod.toFixed(2).toString().replace(\"-\", \"\").replace(\".\", \"\");\r\n    }\r\n    if (cilindroi || esferaoi) {\r\n      gradoi = esferaoi > 0 ? \"+\" : \"\";\r\n      gradoi +=\r\n        esferaoi.toFixed(2).toString().replace(\".\", \"\") +\r\n        cilindroi.toFixed(2).toString().replace(\"-\", \"\").replace(\".\", \"\");\r\n    }\r\n    //console.log(\"GRAD CIL: \", cilindrod, cilindroi);\r\n\r\n    return (\r\n      <div className=\"card border border-info rounded d-print-none\">\r\n        <div className=\"card-body\">\r\n          <h3 className=\"card-title text-success m-2\">{title}</h3>\r\n          {!category_id ? (\r\n            this.state.category_list.length ? (\r\n              <Fragment>\r\n                {this.state.category_list.length ? (\r\n                  <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\">Tipo</span>\r\n                    </div>\r\n                    <select\r\n                      name=\"category_id\"\r\n                      className=\"custom-select\"\r\n                      value={this.state.category_id}\r\n                      onChange={this.handleCategoryChange}\r\n                    >\r\n                      <option value=\"0\">Seleccione el tipo</option>\r\n                      {this.state.category_list.map((cat) => {\r\n                        console.log(cat.categoria);\r\n                        console.log(\r\n                          \"[DEBUG] Cil-der: \",\r\n                          cat.meta.rangoInf,\r\n                          cilindrod,\r\n                          cat.meta.cil\r\n                        );\r\n                        console.log(\r\n                          \"[DEBUG] Cil-izq: \",\r\n                          cat.meta.rangoInf,\r\n                          cilindroi,\r\n                          cat.meta.cil\r\n                        );\r\n                        if (\r\n                          cat.meta &&\r\n                          cat.meta.rangoInf <= esferaod &&\r\n                          esferaod <= cat.meta.rangoSup &&\r\n                          cat.meta.rangoInf <= esferaoi &&\r\n                          esferaoi <= cat.meta.rangoSup &&\r\n                          cat.meta.cil <= cilindrod &&\r\n                          cat.meta.cil <= cilindroi\r\n                        ) {\r\n                          console.log(\"[DEBUG] OK\");\r\n                          return (\r\n                            <option value={cat.id} key={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        } else return false;\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n\r\n                {this.state.category_id && this.state.category_list_2.length ? (\r\n                  <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\">Material</span>\r\n                    </div>\r\n                    <select\r\n                      name=\"category_id_2\"\r\n                      className=\"custom-select\"\r\n                      value={this.state.category_id_2}\r\n                      onChange={this.handleCategoryChange}\r\n                    >\r\n                      <option value=\"0\">Seleccione el material</option>\r\n                      {this.state.category_list_2.map((cat) => {\r\n                        if (\r\n                          cat.meta &&\r\n                          cat.meta.rangoInf <= esferaod &&\r\n                          esferaod <= cat.meta.rangoSup &&\r\n                          cat.meta.rangoInf <= esferaoi &&\r\n                          esferaoi <= cat.meta.rangoSup\r\n                        ) {\r\n                          return (\r\n                            <option value={cat.id} key={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        } else return false;\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n\r\n                {this.state.category_id &&\r\n                this.state.category_id_2 &&\r\n                this.state.category_list_3.length ? (\r\n                  <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\">Tratamiento</span>\r\n                    </div>\r\n                    <select\r\n                      name=\"category_id_3\"\r\n                      className=\"custom-select\"\r\n                      value={this.state.category_id_3}\r\n                      onChange={(e) => {\r\n                        this.handleCategoryChange(e, gradod, gradoi);\r\n                      }}\r\n                    >\r\n                      <option value=\"0\">Seleccione el tratamiento</option>\r\n                      {this.state.category_list_3.map((cat) => {\r\n                        return (\r\n                          <option value={cat.id} key={cat.id}>\r\n                            {cat.categoria}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n              </Fragment>\r\n            ) : (\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            )\r\n          ) : (\r\n            <Fragment>\r\n              {code + gradod === code + gradoi ? (\r\n                <p className=\"card-text\">\r\n                  <label>Lente</label>: {code + gradod}\r\n                </p>\r\n              ) : (\r\n                <div className=\"row card-text\">\r\n                  <div className=\"col\">\r\n                    <label>Lente Derecho</label>\r\n                    <br /> {code + gradod}\r\n                  </div>\r\n                  <div className=\"col\">\r\n                    <label>Lente Izquierdo</label>\r\n                    <br /> {code + gradoi}\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {this.props.update ? (\r\n                <p className=\"card-text text-right\">\r\n                  <button\r\n                    className=\"btn btn-outline-info btn-sm card-link mt-2\"\r\n                    onClick={this.handleClickCategory}\r\n                  >\r\n                    Cambiar\r\n                  </button>\r\n                </p>\r\n              ) : null}\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleCodeName = (category) => {\r\n    let code = \"\";\r\n    if (category.depende_de) {\r\n      if (category.depende_de.depende_de) {\r\n        code = category.depende_de.depende_de.meta.code;\r\n        code += category.depende_de.meta.code;\r\n        code += category.meta.code;\r\n      } else {\r\n        code = category.depende_de.meta.code;\r\n        code += category.meta.code;\r\n      }\r\n    } else {\r\n      code = category.meta.code;\r\n    }\r\n    return code;\r\n  };\r\n  handleClickCategory = (e) => {\r\n    e.preventDefault();\r\n    const { onChangeInput, nameCategory } = this.props;\r\n    this.setState({\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      category_list_2: [],\r\n      category_list_3: [],\r\n    });\r\n    onChangeInput({\r\n      [nameCategory]: 0,\r\n    });\r\n  };\r\n  handleCategoryChange = (e, gradod, gradoi) => {\r\n    const { name, value } = e.target,\r\n      { onChangeInput, nameCategory } = this.props;\r\n\r\n    if (name === \"category_id\") {\r\n      if (value) {\r\n        this.state.category_list.map((cat) => {\r\n          if (cat.id === parseInt(value)) {\r\n            this.setState({\r\n              category_id_3: 0,\r\n              category_list_2: cat.hijos,\r\n              category_list_3: [],\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n    if (name === \"category_id_2\") {\r\n      if (value) {\r\n        this.state.category_list_2.map((cat) => {\r\n          if (cat.id === value * 1) {\r\n            this.setState({\r\n              category_list_3: cat.hijos,\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      [name]: parseInt(value),\r\n    });\r\n\r\n    if (name === \"category_id_3\") {\r\n      onChangeInput({\r\n        [nameCategory]: parseInt(value),\r\n      });\r\n    }\r\n  };\r\n  getCategories = () => {\r\n    //Variables\r\n    const { host, token } = this.props.data,\r\n      { category_id } = this.props;\r\n\r\n    //console.log(\"Tipo de descarga\", nameCategory, category_id);\r\n    if (category_id) {\r\n      console.log(\"Descargando categoria para recomendacion\");\r\n      fetch(\"http://\" + host + \"/api/categories/\" + category_id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((cat) => {\r\n          if (cat.data) {\r\n            console.log(\"Recomendacion descargada\");\r\n            this.setState({\r\n              category: cat.data,\r\n              category_id,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus: \" + e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    } else {\r\n      console.log(\"Descargando lista de recomendaciones raiz\");\r\n      fetch(\"http://\" + host + \"/api/categories/1\", {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((cat) => {\r\n          if (cat.data) {\r\n            console.log(\"Lista de recomendaciones descargadas\");\r\n            this.setState({\r\n              category_list: cat.data.hijos,\r\n              meta: cat.meta,\r\n              category_id: 0,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus: \" + e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Graduacion from \"../Exam/graduacionExam\";\r\nimport Recomendaciones from \"../Exam/recomendaciones\";\r\nimport moment from \"moment\";\r\n\r\nexport default class ListsExams extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let ls = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    this.state = {\r\n      id: 0,\r\n      data: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      exam: {},\r\n      examEdit: false,\r\n      load: true,\r\n      page: 0,\r\n      host: ls.host,\r\n      token: ls.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.exam && !this.props.exam.id) {\r\n      this.getExams();\r\n    } else {\r\n      this.setState({\r\n        id: this.props.exam.id,\r\n        exam: this.props.exam,\r\n        load: false,\r\n      });\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (\r\n      this.props.exam &&\r\n      !this.props.exam.id &&\r\n      this.props.exam.id !== props.exam.id\r\n    ) {\r\n      this.getExams();\r\n    }\r\n    if (this.props.exam && this.props.exam.id !== props.exam.id) {\r\n      this.setState({\r\n        id: this.props.exam.id,\r\n        exam: this.props.exam,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data, load, id, exam, examEdit } = this.state,\r\n      { select, datos } = this.props;\r\n\r\n    if (select) {\r\n      return (\r\n        <React.Fragment>\r\n          {id ? (\r\n            <React.Fragment>\r\n              <div className=\"row d-print-none mb-4\">\r\n                <div className=\"col-2\">\r\n                  <div className=\"border border-info rounded p-2 d-flex justify-content-between align-items-center\">\r\n                    <span className=\"badge badge-pill badge-info mx-2\">\r\n                      Folio\r\n                    </span>\r\n                    <strong>{id}</strong>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col\">\r\n                  <div className=\"border border-info rounded p-2 d-flex justify-content-between align-items-center\">\r\n                    <span className=\"badge badge-pill badge-info mx-2\">\r\n                      Estado\r\n                    </span>\r\n                    <strong>\r\n                      {exam.estado ? \"Terminado\" : \"En proceso...\"}\r\n                    </strong>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col\">\r\n                  <div className=\"border border-info rounded p-2 d-flex justify-content-between align-items-center\">\r\n                    <span className=\"badge badge-pill badge-info mx-2\">\r\n                      Fecha\r\n                    </span>\r\n                    <strong>\r\n                      {moment.utc(exam.created_at).local().format(\"LL\")}\r\n                    </strong>\r\n                  </div>\r\n                </div>\r\n                {exam.observaciones.length ? (\r\n                  <div className=\"col-1\">\r\n                    <span className=\"badge badge-pill badge-danger mx-2\">\r\n                      <i className=\"fas fa-eye mr-2\"></i>\r\n                      Observaciones\r\n                    </span>\r\n                  </div>\r\n                ) : null}\r\n                <div className=\"col-2 d-print-none text-right\">\r\n                  <button\r\n                    className={\r\n                      this.props.status\r\n                        ? \"btn btn-info disabled\"\r\n                        : \"btn btn-info\"\r\n                    }\r\n                    disabled={this.props.status ? true : false}\r\n                    onClick={this.handleClickDeleteExam}\r\n                  >\r\n                    Cambiar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <Graduacion\r\n                esferaod={exam.esferaod ? exam.esferaod : 0}\r\n                esferaoi={exam.esferaoi ? exam.esferaoi : 0}\r\n                cilindrod={exam.cilindrod ? exam.cilindrod : 0}\r\n                cilindroi={exam.cilindroi ? exam.cilindroi : 0}\r\n                ejeod={exam.ejeod ? exam.ejeod : 0}\r\n                ejeoi={exam.ejeoi ? exam.ejeoi : 0}\r\n                adiciond={exam.adiciond ? exam.adiciond : 0}\r\n                adicioni={exam.adicioni ? exam.adicioni : 0}\r\n                adicion_media_od={exam.adicion_media_od}\r\n                adicion_media_oi={exam.adicion_media_oi}\r\n                dpod={exam.dpod ? exam.dpod : 0}\r\n                dpoi={exam.dpoi ? exam.dpoi : 0}\r\n                alturaod={exam.alturaod ? exam.alturaod : 0}\r\n                alturaoi={exam.alturaoi ? exam.alturaoi : 0}\r\n                lcmarca={exam.lcmarca ? exam.lcmarca : 0}\r\n                lcgod={exam.lcgod ? exam.lcgod : 0}\r\n                lcgoi={exam.lcgoi ? exam.lcgoi : 0}\r\n                readOnly={!examEdit}\r\n                onChangeInput={this.handleDataExam}\r\n              />\r\n\r\n              <div className=\"row d-print-none\">\r\n                <div className=\"col p-2\">\r\n                  <div\r\n                    className={\r\n                      exam.observaciones.length\r\n                        ? \"card border border-danger rounded\"\r\n                        : \"card border border-info rounded\"\r\n                    }\r\n                  >\r\n                    <div className=\"card-body\">\r\n                      <label className=\"card-title\">Observaciones</label>\r\n                      <p className=\"card-text text-muted text-uppercase\">\r\n                        {exam.observaciones ? exam.observaciones : \"--\"}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {exam.category_id ? (\r\n                  <React.Fragment>\r\n                    <div className=\"col p-2\">\r\n                      <Recomendaciones\r\n                        category_id={exam.category_id}\r\n                        title=\"Recomendacion principal\"\r\n                        esferaod={exam.esferaod ? exam.esferaod : 0}\r\n                        esferaoi={exam.esferaoi ? exam.esferaoi : 0}\r\n                        cilindrod={exam.cilindrod ? exam.cilindrod : 0}\r\n                        cilindroi={exam.cilindroi ? exam.cilindroi : 0}\r\n                        data={datos}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    {exam.category_ii ? (\r\n                      <div className=\"col p-2\">\r\n                        <Recomendaciones\r\n                          category_id={exam.category_ii}\r\n                          title=\"Recomendacion adicional\"\r\n                          esferaod={exam.esferaod ? exam.esferaod : 0}\r\n                          esferaoi={exam.esferaoi ? exam.esferaoi : 0}\r\n                          cilindrod={exam.cilindrod ? exam.cilindrod : 0}\r\n                          cilindroi={exam.cilindroi ? exam.cilindroi : 0}\r\n                          data={datos}\r\n                          onChangeInput={this.handleChangeInput}\r\n                        />\r\n                      </div>\r\n                    ) : null}\r\n                  </React.Fragment>\r\n                ) : null}\r\n              </div>\r\n\r\n              <div className=\"row d-print-none\">\r\n                <div className=\"col text-right pt-2\">\r\n                  <button\r\n                    className={examEdit ? \"btn btn-dark\" : \"btn btn-info\"}\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      if (examEdit) {\r\n                        this.handleSaveExam(exam);\r\n                      }\r\n                      this.setState({\r\n                        examEdit: !examEdit,\r\n                      });\r\n                    }}\r\n                  >\r\n                    {examEdit ? (\r\n                      <React.Fragment>\r\n                        <i className=\"fas fa-save mr-2\"></i> Guardar\r\n                      </React.Fragment>\r\n                    ) : (\r\n                      <React.Fragment>\r\n                        <i className=\"fas fa-pencil-alt mr-2\"></i> Editar\r\n                      </React.Fragment>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          ) : (\r\n            <table className=\"table table-hover table-nowrap\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Folio</th>\r\n                  <th>Fecha</th>\r\n                  <th>Edad</th>\r\n                  <th>Estado</th>\r\n                  <th>&nbsp;</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {load ? (\r\n                  <tr>\r\n                    <td colSpan=\"5\" className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : Object.keys(data.data).length ? (\r\n                  data.data.map((row) => {\r\n                    return (\r\n                      <tr\r\n                        key={row.id}\r\n                        className={\r\n                          moment\r\n                            .utc(new Date())\r\n                            .isSame(moment.utc(row.created_at), \"day\")\r\n                            ? \"table-success\"\r\n                            : \"\"\r\n                        }\r\n                      >\r\n                        <td>\r\n                          <span className=\"badge badge-info\">{row.id}</span>\r\n                        </td>\r\n                        <td>\r\n                          {moment.utc(row.created_at).local().format(\"L\")}\r\n                          <br />\r\n                          {moment(new Date()).isSame(row.created_at)}\r\n                        </td>\r\n                        <td>{row.edad}</td>\r\n                        <td>\r\n                          {row.estado ? (\r\n                            <span className=\"badge badge-secondary\">\r\n                              Terminado\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"badge badge-success\">Activo</span>\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          <button\r\n                            className=\"btn btn-outline-dark btn-sm\"\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              this.handleClickSelect(row);\r\n                            }}\r\n                          >\r\n                            <i className=\"fas fa-check\"></i>\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <tr>\r\n                    <th colSpan=\"5\" className=\"text-center\">\r\n                      Aun no tiene examenes\r\n                      <button\r\n                        className=\"btn btn-outline-info btn-sm ml-4\"\r\n                        onClick={this.handleNewExam}\r\n                      >\r\n                        <i className=\"fas fa-plus\"></i>\r\n                      </button>\r\n                    </th>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      let examToday = false,\r\n        newExam = false;\r\n      return (\r\n        <div className=\"card card-info card-outline\">\r\n          <div className=\"card-header\">\r\n            <i className=\"fas fa-notes-medical mr-1\"></i>\r\n            Examenes realizados\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <table className=\"table table-hover table-nowrap\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Folio</th>\r\n                  <th>Fecha</th>\r\n                  <th>Edad</th>\r\n                  <th>Estado</th>\r\n                  <th className=\"text-center\">Acciones</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {load ? (\r\n                  <tr>\r\n                    <td colSpan=\"8\" className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : Object.keys(data.data).length ? (\r\n                  data.data.map((row) => {\r\n                    examToday = moment(new Date()).isSame(\r\n                      moment(row.created_at),\r\n                      \"day\"\r\n                    );\r\n                    newExam = newExam ? true : examToday;\r\n                    console.log(\"Hoy: \", examToday, newExam);\r\n                    return (\r\n                      <tr\r\n                        key={row.id}\r\n                        className={examToday ? \"table-success\" : \"\"}\r\n                      >\r\n                        <td>\r\n                          <span className=\"badge badge-info\">{row.id}</span>\r\n                        </td>\r\n                        <td>{moment(row.created_at).format(\"L\")}</td>\r\n                        <td>{row.edad}</td>\r\n                        <td>\r\n                          {row.estado ? (\r\n                            <span className=\"badge badge-secondary\">\r\n                              Terminado\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"badge badge-success\">Activo</span>\r\n                          )}\r\n                        </td>\r\n                        <td className=\"text-right\">\r\n                          <Link\r\n                            className=\"btn btn-outline-info btn-sm\"\r\n                            to={\"/consultorio/registro/\" + row.id}\r\n                            onClick={(e) => {\r\n                              this.changePage(\"/consultorio/registro/\");\r\n                            }}\r\n                            alt=\"Ver examen\"\r\n                          >\r\n                            <i className=\"fas fa-share\"></i> Ver examen\r\n                          </Link>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <tr>\r\n                    <th colSpan=\"5\" className=\"text-center\">\r\n                      Aun no tiene examenes\r\n                    </th>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"card-footer\">\r\n            {!newExam ? (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-info float-right\"\r\n                onClick={this.handleNewExam}\r\n              >\r\n                <i className=\"fas fa-plus\"></i>\r\n              </button>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleSaveExam = (data) => {\r\n    const { id } = data,\r\n      { paciente, edad } = this.props;\r\n    delete data.id;\r\n    data.contact_id = paciente;\r\n    data.edad = edad;\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de actualizar el examen?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Actualizar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Actualiza el examen según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n            method: \"PUT\",\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Examen almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Examen actualizado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el pedido\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  handleDataExam = (key, value) => {\r\n    let { exam } = this.state;\r\n    exam[key] = value;\r\n    this.setState({\r\n      exam,\r\n    });\r\n  };\r\n  handleChangeInput = (key, value) => {\r\n    this.props.ChangeInput(key, value);\r\n  };\r\n  handleClickDeleteExam = (e) => {\r\n    e.preventDefault();\r\n    if (window.confirm(\"¿Realmente desea cambiar de examen?\")) {\r\n      this.props.ChangeInput(\"exam_id\", 0);\r\n      this.props.ChangeInput(\"exam\", {});\r\n    }\r\n  };\r\n  handleClickSelect = (exam) => {\r\n    this.props.ChangeInput(\"exam_id\", exam.id);\r\n    this.props.ChangeInput(\"exam\", exam);\r\n  };\r\n  handleNewOrder = (id) => {\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva orden?\",\r\n      icon: \"info\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Si\",\r\n      cancelButtonText: \"No\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables en localStorage\r\n          let { host, token } = this.state,\r\n            { paciente } = this.props,\r\n            body = {\r\n              contact_id: paciente,\r\n              exam_id: id,\r\n              items: JSON.stringify([]),\r\n            };\r\n          //Crear o modificar examen\r\n          console.log(\"Enviando datos del pedido a la API\");\r\n          return fetch(\"http://\" + host + \"/api/orders\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Orden almacenada\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n          window.Swal.fire(\r\n            \"Orden creada con exito\",\r\n            \"\",\r\n            \"success\"\r\n          ).then((res) => this.getExams());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la orden\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  handleNewExam = (e) => {\r\n    e.preventDefault();\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear un nueva examen?\",\r\n      icon: \"info\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Si\",\r\n      cancelButtonText: \"No\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables en localStorage\r\n          let { host, token } = this.state,\r\n            { paciente, edad } = this.props,\r\n            body = {\r\n              contact_id: paciente,\r\n              edad,\r\n            };\r\n          //Crear examen\r\n          console.log(\"Enviando datos del examen a la API\");\r\n          return fetch(\"http://\" + host + \"/api/exams\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Examen almacenado\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Examen creado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.getExams();\r\n            this.props.ChangeInput(\"exam_id\", data.data.id);\r\n            this.props.ChangeInput(\"exam\", data.data);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el examen\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  getExams = () => {\r\n    const { load, host, token } = this.state;\r\n    const { paciente } = this.props;\r\n\r\n    if (paciente) {\r\n      //Variables en localStorage\r\n      const url = \"http://\" + host + \"/api/exams\",\r\n        page = this.state.page > 0 ? \"?page=\" + this.state.page : \"?page=1\",\r\n        orderby = \"&orderby=created_at&order=desc\",\r\n        client = \"&paciente=\" + paciente;\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n\r\n      //Realiza la peticion de examenes a la API\r\n      console.log(\"Descargando examenes del contacto\");\r\n      fetch(url + page + client + orderby, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            this.setState({\r\n              load: false,\r\n            });\r\n            console.log(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          console.log(\"Examenes almacenados\");\r\n          this.setState({\r\n            data: !data.message ? data : [],\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class NameInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: props.validName ? \"bg-blue\" : \"bg-red\",\r\n      validate: props.validName ? \"\" : \" border border-danger\",\r\n      text: \"Debe de tener por lo menos nombre y apellido\",\r\n      searchUser: false,\r\n      contacts: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidUpdate(props) {\r\n    if (props.validName !== this.props.validName) {\r\n      this.setState({\r\n        bgColor: this.props.validName ? \"bg-blue\" : \"bg-red\",\r\n        validate: this.props.validName ? \"\" : \" border border-danger\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { name, validName } = this.props;\r\n    let { bgColor, validate, text, searchUser, contacts } = this.state;\r\n    if (!name) name = \"\";\r\n    return (\r\n      <React.Fragment>\r\n        {name ? (\r\n          <div className=\"ml-2 mt-1\">\r\n            <small>\r\n              <label>Nombre completo</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              {searchUser ? (\r\n                <i className=\"fas fa-spinner\"></i>\r\n              ) : (\r\n                <i className=\"fas fa-id-card-alt\"></i>\r\n              )}\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className={\"form-control text-capitalize\" + validate}\r\n            placeholder=\"Nombre completo\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={this.handleChange}\r\n            autoFocus={!name.length ? true : false}\r\n            autoComplete=\"off\"\r\n            required=\"required\"\r\n            pattern=\"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*\"\r\n            minLength=\"8\"\r\n            list=\"contactos_db\"\r\n          />\r\n        </div>\r\n        {contacts.length ? (\r\n          <datalist id=\"contactos_db\">\r\n            {contacts.map((contact) => {\r\n              return (\r\n                <option\r\n                  key={contact.id}\r\n                  value={this.eraseTilde(contact.nombre)}\r\n                />\r\n              );\r\n            })}\r\n          </datalist>\r\n        ) : null}\r\n        {!validName ? (\r\n          <div className=\"p-0\">\r\n            <small className=\"text-danger\">{text}</small>\r\n          </div>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  eraseTilde = (string) => {\r\n    string = string.replace(new RegExp(/[àáâãäå]/g), \"a\");\r\n    string = string.replace(new RegExp(/[èéêë]/g), \"e\");\r\n    string = string.replace(new RegExp(/[ìíîï]/g), \"i\");\r\n    string = string.replace(new RegExp(/[òóôõö]/g), \"o\");\r\n    string = string.replace(new RegExp(/[ùúûü]/g), \"u\");\r\n    return string;\r\n  };\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    let regex = /^[a-z.]{2,20}[\\s]{1}[a-z.]{2,20}.*/,\r\n      x = {\r\n        target: {\r\n          name: \"validName\",\r\n          value: \"\",\r\n          target: \"\",\r\n        },\r\n      },\r\n      stringOk = this.eraseTilde(value.toLowerCase());\r\n    e.target.value = stringOk;\r\n\r\n    if (regex.test(value)) {\r\n      this.setState({\r\n        bgColor: \"bg-blue\",\r\n        validate: \"\",\r\n      });\r\n      x.target.value = true;\r\n      this.props.onChange(x);\r\n      this.validUser(e.target.value, x);\r\n    } else {\r\n      this.setState({\r\n        bgColor: \"bg-red\",\r\n        validate: \" border border-danger\",\r\n        text: \"No tiene el formato de nombre de persona\",\r\n        contacts: [],\r\n      });\r\n      x.target.value = false;\r\n      this.props.onChange(x);\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validUser = (search, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n      name = \"?name=\" + search;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de contactos\r\n      this.setState({\r\n        searchUser: true,\r\n      });\r\n      fetch(url + name, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            data.data.map((contacto) => {\r\n              let nombre = this.eraseTilde(contacto.nombre);\r\n              if (nombre === search) {\r\n                console.log(\"Contacto registrado \");\r\n                this.setState({\r\n                  bgColor: \"bg-red\",\r\n                  validate: \" border border-danger\",\r\n                  text: \"El contacto ya esta registrado\",\r\n                  searchUser: false,\r\n                  contacts: [],\r\n                });\r\n                x.target.value = false;\r\n                this.props.onChange(x);\r\n              }\r\n              return false;\r\n            });\r\n            this.setState({\r\n              searchUser: false,\r\n              contacts: data.data,\r\n            });\r\n          } else {\r\n            console.error(\"Error en la descarga de contactos\", data.message);\r\n            this.setState({\r\n              searchUser: false,\r\n            });\r\n            x.target.value = false;\r\n            this.props.onChange(x);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          this.setState({\r\n            searchUser: false,\r\n          });\r\n          x.target.value = false;\r\n          this.props.onChange(x);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class EmailInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: props.validEmail ? \"bg-blue\" : \"bg-red\",\r\n      validate: props.validEmail ? \"\" : \" border border-danger\",\r\n      text: \"No es un email correcto\",\r\n      emailContact: false,\r\n      contacts: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n    this.emailOriginal = props.email;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidUpdate(props) {\r\n    if (props.validEmail !== this.props.validEmail) {\r\n      this.setState({\r\n        bgColor: this.props.validEmail ? \"bg-blue\" : \"bg-red\",\r\n        validate: this.props.validEmail ? \"\" : \" border border-danger\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { email, validEmail } = this.props;\r\n    let { bgColor, validate, text, emailContact, contacts } = this.state;\r\n    if (!email) email = \"\";\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {email ? (\r\n          <div className=\"ml-2 mt-1\">\r\n            <small>\r\n              <label>Correo electronico</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mt-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              {emailContact ? (\r\n                <i className=\"fas fa-spinner\"></i>\r\n              ) : (\r\n                <i className=\"fas fa-at\"></i>\r\n              )}\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"email\"\r\n            className={\"form-control\" + validate}\r\n            placeholder=\"Correo electronico\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={this.handleChange}\r\n            autoComplete=\"off\"\r\n            minLength=\"8\"\r\n            list=\"email_db\"\r\n          />\r\n          {contacts.length ? (\r\n            <datalist id=\"email_db\">\r\n              {contacts.map((contact) => {\r\n                return <option key={contact.id} value={contact.email} />;\r\n              })}\r\n            </datalist>\r\n          ) : null}\r\n        </div>\r\n        {!validEmail ? (\r\n          <div className=\"p-0\">\r\n            <small className=\"text-danger\">{text}</small>\r\n          </div>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  eraseTilde = (string) => {\r\n    string = string.replace(new RegExp(/[àáâãäå]/g), \"a\");\r\n    string = string.replace(new RegExp(/[èéêë]/g), \"e\");\r\n    string = string.replace(new RegExp(/[ìíîï]/g), \"i\");\r\n    string = string.replace(new RegExp(/[òóôõö]/g), \"o\");\r\n    string = string.replace(new RegExp(/[ùúûü]/g), \"u\");\r\n    return string;\r\n  };\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    const { id } = this.props;\r\n    let regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n      x = {\r\n        target: {\r\n          name: \"validEmail\",\r\n          value: \"\",\r\n          target: \"\",\r\n        },\r\n      },\r\n      stringOk = this.eraseTilde(value.toLowerCase());\r\n    e.target.value = stringOk;\r\n\r\n    if (regex.test(value)) {\r\n      this.setState({\r\n        bgColor: \"bg-blue\",\r\n        validate: \"\",\r\n      });\r\n      x.target.value = true;\r\n      this.props.onChange(x);\r\n      if (!id) {\r\n        if (this.emailOriginal !== e.target.value)\r\n          this.validUser(e.target.value, x);\r\n      } else {\r\n        this.validUser(e.target.value, x);\r\n      }\r\n    } else {\r\n      this.setState({\r\n        bgColor: \"bg-red\",\r\n        validate: \" border border-danger\",\r\n        text: \"No es un email correcto\",\r\n        contacts: [],\r\n      });\r\n      x.target.value = false;\r\n      this.props.onChange(x);\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validUser = (search, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n      name = \"?email=\" + search;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de contactos\r\n      this.setState({\r\n        emailContact: true,\r\n      });\r\n      fetch(url + name, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            data.data.map((contacto) => {\r\n              if (contacto.email === search) {\r\n                this.setState({\r\n                  bgColor: \"bg-red\",\r\n                  validate: \" border border-danger\",\r\n                  text: \"El email ya esta registrado\",\r\n                  emailContact: false,\r\n                  contacts: [],\r\n                });\r\n                x.target.value = false;\r\n                this.props.onChange(x);\r\n              }\r\n              return false;\r\n            });\r\n            this.setState({\r\n              emailContact: false,\r\n              contacts: data.data,\r\n            });\r\n          } else {\r\n            console.error(\"Error en la descarga de contactos\", data.message);\r\n            this.setState({\r\n              emailContact: false,\r\n            });\r\n            x.target.value = false;\r\n            this.props.onChange(x);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          this.setState({\r\n            emailContact: false,\r\n          });\r\n          x.target.value = false;\r\n          this.props.onChange(x);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport NameInput from \"./nameInput\";\r\nimport EmailInput from \"./emailInput\";\r\n\r\nexport default class AddPersonal extends Component {\r\n  render() {\r\n    let {\r\n      type,\r\n      business,\r\n      name,\r\n      rfc,\r\n      email,\r\n      birthday,\r\n      validName,\r\n      validEmail,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"col \">\r\n        <small>\r\n          <label>Tipo de cliente</label>\r\n        </small>\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-clipboard-check\"></i>\r\n            </span>\r\n          </div>\r\n          <select\r\n            className=\"custom-select\"\r\n            name=\"type\"\r\n            value={type}\r\n            onChange={this.catchInputs}\r\n          >\r\n            <option value=\"0\">Cliente</option>\r\n            <option value=\"1\">Proveedor</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <input\r\n              type=\"checkbox\"\r\n              name=\"business\"\r\n              className=\"mr-2\"\r\n              checked={business}\r\n              onChange={this.catchInputs}\r\n            />\r\n            <small>\r\n              <label>¿Es una empresa?</label>\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <NameInput\r\n          name={name}\r\n          validName={validName}\r\n          onChange={this.catchInputs}\r\n        />\r\n\r\n        {rfc ? (\r\n          <div className=\"ml-2 mt-1\">\r\n            <small>\r\n              <label>RFC</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-file-invoice-dollar\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-uppercase\"\r\n            placeholder=\"RFC\"\r\n            name=\"rfc\"\r\n            value={rfc ? rfc : \"\"}\r\n            onChange={this.catchInputs}\r\n            required={false}\r\n            minLength=\"10\"\r\n          />\r\n        </div>\r\n\r\n        <EmailInput\r\n          email={email}\r\n          validEmail={validEmail}\r\n          onChange={this.catchInputs}\r\n        />\r\n\r\n        {!business && !type ? (\r\n          <React.Fragment>\r\n            {birthday ? (\r\n              <div className=\"ml-2 mt-1\">\r\n                <small>\r\n                  <label>Fecha de nacimiento</label>\r\n                </small>\r\n              </div>\r\n            ) : (\r\n              <br />\r\n            )}\r\n            <div className=\"input-group mb-1\">\r\n              <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\">\r\n                  <i className=\"fas fa-calendar-check\"></i>\r\n                </span>\r\n              </div>\r\n              <input\r\n                type=\"date\"\r\n                className=\"form-control\"\r\n                placeholder=\"Fecha de nacimiento\"\r\n                name=\"birthday\"\r\n                value={birthday ? birthday : \"\"}\r\n                onChange={this.catchInputs}\r\n              />\r\n            </div>\r\n          </React.Fragment>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (x) => {\r\n    this.props.onChange(x);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AddDomicilio extends Component {\r\n  render() {\r\n    let { calle, colonia, municipio, estado, cp } = this.props;\r\n    return (\r\n      <div className=\"col\">\r\n        {calle ? (\r\n          <small>\r\n            <label>Calle y numero</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-road\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Calle y numero\"\r\n            name=\"calle\"\r\n            value={calle}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {colonia ? (\r\n          <small>\r\n            <label>Colonia</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-location-arrow\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Colonia\"\r\n            name=\"colonia\"\r\n            value={colonia}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {municipio ? (\r\n          <small>\r\n            <label>Municipio</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-location-arrow\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Municipio\"\r\n            name=\"municipio\"\r\n            value={municipio}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {estado ? (\r\n          <small>\r\n            <label>Estado</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-map-marker\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Estado\"\r\n            name=\"estado\"\r\n            value={estado}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {cp ? (\r\n          <small>\r\n            <label>Codigo postal</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-map-marker\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Codigo Postal\"\r\n            name=\"cp\"\r\n            value={cp}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (x) => {\r\n    this.props.onChange(x);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AddTelefonos extends Component {\r\n  render() {\r\n    let { t_casa, t_oficina, t_movil } = this.props,\r\n      verify =\r\n        t_casa.length === 10 ||\r\n        t_movil.length === 10 ||\r\n        t_oficina.length === 10;\r\n\r\n    return (\r\n      <div className=\"col\">\r\n        {t_casa ? (\r\n          <div className=\"ml-1 mt-1\">\r\n            <small>\r\n              <label>Telefono de casa</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-phone\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Telefono de casa\"\r\n            name=\"t_casa\"\r\n            value={t_casa}\r\n            onChange={this.catchInputs}\r\n            pattern=\"^[\\d]{10}$\"\r\n            maxLength=\"10\"\r\n          />\r\n        </div>\r\n        {t_oficina ? (\r\n          <div className=\"ml-1 mt-1\">\r\n            <small>\r\n              <label>Telefono de oficina</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-phone-alt\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Telefono de oficina\"\r\n            name=\"t_oficina\"\r\n            value={t_oficina}\r\n            onChange={this.catchInputs}\r\n            pattern=\"^[\\d]{10}$\"\r\n            maxLength=\"10\"\r\n          />\r\n        </div>\r\n        {t_movil ? (\r\n          <div className=\"ml-1 mt-1\">\r\n            <small>\r\n              <label>Telefono celular</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-mobile-alt\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Telefono celular\"\r\n            name=\"t_movil\"\r\n            value={t_movil}\r\n            onChange={this.catchInputs}\r\n            pattern=\"^[\\d]{10}$\"\r\n            required={\r\n              t_casa.length !== 10 && t_oficina.length !== 10 ? true : false\r\n            }\r\n            maxLength=\"10\"\r\n          />\r\n        </div>\r\n        {!verify ? (\r\n          <div className=\"mt-2 p-0 text-danger\">\r\n            <small>Por lo menos capture un telefono</small>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (x) => {\r\n    this.props.onChange(x);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Mapa from \"./mapa\";\r\nimport ListExam from \"../Exam/listsExams\";\r\nimport Personal from \"./add_personal\";\r\nimport Domicilio from \"./add_domicilio\";\r\nimport Telefono from \"./add_telefonos\";\r\n\r\nexport default class ContactsAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Recogemos valores de registro previo\r\n    let contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    this.state = {\r\n      id: 0,\r\n      name: contact && contact.name ? contact.name : \"\",\r\n      validName: false,\r\n      rfc: \"\",\r\n      email: \"\",\r\n      validEmail: false,\r\n      type: 0,\r\n      birthday: \"\",\r\n      calle: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      estado: \"\",\r\n      cp: \"\",\r\n      t_casa: \"\",\r\n      t_oficina: \"\",\r\n      t_movil: \"\",\r\n      business: false,\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeSave = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    let id = this.props.match.params.id,\r\n      //Recogemos valores de registro inconcluso\r\n      data = JSON.parse(localStorage.getItem(\"OrusContactNew\"));\r\n\r\n    if (id) {\r\n      this.getUser(id);\r\n    } else {\r\n      //Si existe un usuario previo\r\n      if (\r\n        data &&\r\n        data.name &&\r\n        data.name.length > 4 &&\r\n        window.confirm(\r\n          \"Existe un registro previo de \" +\r\n            data.name.toUpperCase() +\r\n            \", \\n ¿Desea Cargar los datos?\"\r\n        )\r\n      ) {\r\n        this.setState({\r\n          name: data.name,\r\n          validName: true,\r\n          rfc: data.rfc,\r\n          email: data.email,\r\n          validEmail: true,\r\n          type: data.type,\r\n          birthday: data.birthday,\r\n          calle: data.calle,\r\n          colonia: data.colonia,\r\n          municipio: data.municipio,\r\n          estado: data.estado,\r\n          cp: data.cp,\r\n          t_casa: data.t_casa,\r\n          t_oficina: data.t_oficina,\r\n          t_movil: data.t_movil,\r\n        });\r\n      }\r\n      localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (\r\n      !this.state.id &&\r\n      !this.state.load &&\r\n      this.state.validName &&\r\n      this.state.validEmail\r\n    ) {\r\n      if (this.timeSave) clearTimeout(this.timeSave);\r\n      this.timeSave = setTimeout(() => {\r\n        localStorage.setItem(\r\n          \"OrusContactNew\",\r\n          JSON.stringify({\r\n            name: this.state.name,\r\n            rfc: this.state.rfc,\r\n            email: this.state.email,\r\n            type: this.state.type,\r\n            birthday: this.state.birthday,\r\n            calle: this.state.calle,\r\n            colonia: this.state.colonia,\r\n            municipio: this.state.municipio,\r\n            estado: this.state.estado,\r\n            cp: this.state.cp,\r\n            t_casa: this.state.t_casa,\r\n            t_oficina: this.state.t_oficina,\r\n            t_movil: this.state.t_movil,\r\n          })\r\n        );\r\n      }, 1500);\r\n    } else {\r\n      localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      id,\r\n      name,\r\n      rfc,\r\n      email,\r\n      type,\r\n      birthday,\r\n      calle,\r\n      colonia,\r\n      municipio,\r\n      estado,\r\n      cp,\r\n      t_casa,\r\n      t_oficina,\r\n      t_movil,\r\n      business,\r\n      load,\r\n      validName,\r\n      validEmail,\r\n    } = this.state;\r\n\r\n    return (\r\n      <form onSubmit={this.handleSave}>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12\">\r\n            <div className=\"card card-danger card-outline\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title text-danger\">\r\n                  <i className=\"fas fa-address-book mr-2\"></i>\r\n                  {id ? \"Editar contacto\" : \"Registrar nuevo contacto\"}\r\n                  {validName && validEmail ? (\r\n                    <span className=\"ml-2 text-muted\">\r\n                      <small>(Almacenado automatico)</small>\r\n                    </span>\r\n                  ) : null}\r\n                </h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row was-validated\">\r\n                  <Personal\r\n                    id={id}\r\n                    name={name}\r\n                    rfc={rfc}\r\n                    email={email}\r\n                    type={type}\r\n                    birthday={birthday}\r\n                    business={business}\r\n                    validName={validName}\r\n                    validEmail={validEmail}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n\r\n                  <Domicilio\r\n                    calle={calle}\r\n                    colonia={colonia}\r\n                    municipio={municipio}\r\n                    estado={estado}\r\n                    cp={cp}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n\r\n                  <Telefono\r\n                    t_casa={t_casa}\r\n                    t_movil={t_movil}\r\n                    t_oficina={t_oficina}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"card-footer\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-12\">\r\n                    {load ? (\r\n                      <div className=\"text-center\">\r\n                        <div\r\n                          className=\"spinner-border text-primary\"\r\n                          role=\"status\"\r\n                        >\r\n                          <span className=\"sr-only\">Loading...</span>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"btn-group float-right\" role=\"group\">\r\n                        <Link\r\n                          to=\"/contactos\"\r\n                          className=\"btn btn-dark\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/contactos\");\r\n                          }}\r\n                        >\r\n                          <i\r\n                            className={\r\n                              id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                            }\r\n                          ></i>\r\n                          <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                        </Link>\r\n                        <button\r\n                          type=\"submit\"\r\n                          className={\r\n                            validName &&\r\n                            validEmail &&\r\n                            (t_casa || t_oficina || t_movil)\r\n                              ? \"btn btn-danger\"\r\n                              : \"btn btn-danger disabled\"\r\n                          }\r\n                          disabled={\r\n                            validName &&\r\n                            validEmail &&\r\n                            (t_casa || t_oficina || t_movil)\r\n                              ? \"\"\r\n                              : \"disabled\"\r\n                          }\r\n                        >\r\n                          <i className=\"fas fa-save mr-1\"></i>\r\n                          Guardar\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          {this.state.calle && !this.state.type ? (\r\n            <div className=\"col\">\r\n              <Mapa\r\n                calle={this.state.calle}\r\n                colonia={this.state.colonia}\r\n                municipio={this.state.municipio}\r\n                estado={this.state.estado}\r\n                cp={this.state.cp}\r\n                changeAddress={this.changeAddress}\r\n              />\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {this.state.id && !this.state.type ? (\r\n            <div className=\"col\">\r\n              <ListExam\r\n                paciente={this.state.id}\r\n                exam={{}}\r\n                page={this.changePage}\r\n                edad={\r\n                  moment(this.state.birthday)\r\n                    .fromNow(true)\r\n                    .replace(/[a-zA-ZñÑ]/gi, \"\") * 1\r\n                }\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  changeAddress = (json) => {\r\n    this.setState(json);\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value = e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { validName, validEmail, id } = this.state;\r\n\r\n    //Verificamos campos validos\r\n    if (!validName) {\r\n      window.Swal.fire(\r\n        \"Base de datos\",\r\n        \"El contacto ya esta registrado\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (!validEmail) {\r\n      window.Swal.fire(\r\n        \"Base de datos\",\r\n        \"El email ya esta registrado\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar al contacto?\"\r\n        : \"¿Esta seguro de crear un nuevo contacto?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let {\r\n              name,\r\n              rfc,\r\n              email,\r\n              type,\r\n              birthday,\r\n              calle,\r\n              colonia,\r\n              municipio,\r\n              estado,\r\n              cp,\r\n              t_casa,\r\n              t_oficina,\r\n              t_movil,\r\n              business,\r\n              host,\r\n              token,\r\n            } = this.state,\r\n            //Creamos el body\r\n            body = {\r\n              name,\r\n              rfc,\r\n              email,\r\n              type,\r\n              birthday: business ? \"\" : birthday,\r\n              business,\r\n              domicilio: JSON.stringify({\r\n                calle,\r\n                colonia,\r\n                municipio,\r\n                estado,\r\n                cp,\r\n              }),\r\n              telnumbers: JSON.stringify({\r\n                t_casa,\r\n                t_oficina,\r\n                t_movil,\r\n              }),\r\n            },\r\n            //Identificamos la URL y el metodo segun sea el caso (Actualizar o agregar)\r\n            url = id\r\n              ? \"http://\" + host + \"/api/contacts/\" + id\r\n              : \"http://\" + host + \"/api/contacts\",\r\n            //Actualiza el contacto o creamos el contacto\r\n            method = id ? \"PUT\" : \"POST\";\r\n\r\n          //Enviamos datos al API\r\n          console.log(\"Enviando datos del contacto a la API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Contacto almacenado\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n          localStorage.setItem(\r\n            \"OrusContactInUse\",\r\n            JSON.stringify({ id: data.data.id })\r\n          );\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Contacto actualizado con exito\"\r\n              : \"Contacto almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.props.history.goBack();\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el contacto\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getUser = (id) => {\r\n    if (id > 0) {\r\n      //Variables en localStorage\r\n      let { load, host, token } = this.state;\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      //Realiza la peticion al API\r\n      console.log(\"Descargando datos del contacto del API\");\r\n      fetch(\"http://\" + host + \"/api/contacts/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.data) {\r\n            let { domicilio, telefonos } = data.data;\r\n            console.log(\"Almacenando datos del contacto\");\r\n            this.setState({\r\n              id: data.data.id,\r\n              name: data.data.nombre,\r\n              rfc: data.data.rfc,\r\n              email: data.data.email,\r\n              type: data.data.tipo,\r\n              business: data.data.empresa,\r\n              birthday: data.data.f_nacimiento,\r\n              calle: domicilio && domicilio.calle ? domicilio.calle : \"\",\r\n              colonia: domicilio && domicilio.colonia ? domicilio.colonia : \"\",\r\n              municipio:\r\n                domicilio && domicilio.municipio ? domicilio.municipio : \"\",\r\n              estado: domicilio && domicilio.estado ? domicilio.estado : \"\",\r\n              cp: domicilio && domicilio.cp ? domicilio.cp : \"\",\r\n              t_casa: telefonos && telefonos.t_casa ? telefonos.t_casa : \"\",\r\n              t_oficina:\r\n                telefonos && telefonos.t_oficina ? telefonos.t_oficina : \"\",\r\n              t_movil: telefonos && telefonos.t_movil ? telefonos.t_movil : \"\",\r\n              validName: true,\r\n              validEmail: true,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\"Error\", \"Al descargar el contacto\", \"error\");\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AddContact extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Recogemos valores de registro previo\r\n    this.state = {\r\n      name: \"\",\r\n      validName: false,\r\n      rfc: \"\",\r\n      email: \"\",\r\n      validEmail: false,\r\n      type: 0,\r\n      birthday: \"\",\r\n      t_casa: \"\",\r\n      t_oficina: \"\",\r\n      t_movil: \"\",\r\n      business: false,\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeSave = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      name,\r\n      email,\r\n      birthday,\r\n      t_casa,\r\n      t_oficina,\r\n      t_movil,\r\n      load,\r\n      validName,\r\n      validEmail,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card card-danger card-outline\">\r\n            <div className=\"card-header\">\r\n              <h3 className=\"card-title text-danger\">\r\n                <i className=\"fas fa-address-book mr-2\"></i>\r\n                Pacientes\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"card-body\">\r\n              <div className=\"row was-validated\">\r\n                <div className=\"input-group mb-1\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className={\"input-group-text \"}>\r\n                      <i className=\"fas fa-id-card-alt\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    className={\"form-control text-capitalize\"}\r\n                    placeholder=\"Nombre completo\"\r\n                    name=\"name\"\r\n                    value={name}\r\n                    onChange={this.handleChange}\r\n                    autoFocus={!name.length ? true : false}\r\n                    autoComplete=\"off\"\r\n                    required=\"required\"\r\n                    pattern=\"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*\"\r\n                    minLength=\"8\"\r\n                    list=\"contactos_db\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-1\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className={\"input-group-text \"}>\r\n                      <i className=\"fas fa-at\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"email\"\r\n                    className={\"form-control\"}\r\n                    placeholder=\"Correo electronico\"\r\n                    name=\"email\"\r\n                    value={email}\r\n                    onChange={this.handleChange}\r\n                    autoComplete=\"off\"\r\n                    minLength=\"8\"\r\n                    list=\"email_db\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-1\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-phone\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"tel\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Telefono\"\r\n                    name=\"t_movil\"\r\n                    value={t_movil}\r\n                    onChange={this.catchInputs}\r\n                    pattern=\"^[\\d]{10}$\"\r\n                    maxLength=\"10\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"input-group mb-1\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-calendar-check\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Fecha de nacimiento\"\r\n                  name=\"birthday\"\r\n                  value={birthday ? birthday : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"card-footer\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                  {load ? (\r\n                    <div className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"btn-group float-right\" role=\"group\">\r\n                      <button\r\n                        type=\"submit\"\r\n                        className={\r\n                          validName &&\r\n                          validEmail &&\r\n                          (t_casa || t_oficina || t_movil)\r\n                            ? \"btn btn-danger\"\r\n                            : \"btn btn-danger disabled\"\r\n                        }\r\n                        disabled={\r\n                          validName &&\r\n                          validEmail &&\r\n                          (t_casa || t_oficina || t_movil)\r\n                            ? \"\"\r\n                            : \"disabled\"\r\n                        }\r\n                      >\r\n                        <i className=\"fas fa-save mr-1\"></i>\r\n                        Guardar\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Pagination from \"./pagination\";\r\n\r\nexport default class ToolsCategory extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      category_list: [],\r\n      category_select: [],\r\n      category_hijos: [],\r\n      category_hijos_3: [],\r\n      meta: {},\r\n      add: false,\r\n      name: \"\",\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      newItem: 0,\r\n      page: 1,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      load: true,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.page !== this.state.page) {\r\n      console.log(\"Recargando categorias\");\r\n      this.getCategories();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { category_list, meta, load } = this.state,\r\n      category_hijos = this.state.category_hijos,\r\n      category_hijos_3 = this.state.category_hijos_3;\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">Categorias</h5>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Nombre</th>\r\n                <th>Padre</th>\r\n                <th>Eliminar</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {!load ? (\r\n                category_list.map((cat) => {\r\n                  let padre = \"\";\r\n\r\n                  if (cat.depende_de != null) {\r\n                    if (cat.depende_de.depende_de != null) {\r\n                      padre = cat.depende_de.depende_de.categoria;\r\n                    }\r\n                    padre = padre\r\n                      ? padre + \"/\" + cat.depende_de.categoria\r\n                      : cat.depende_de.categoria;\r\n                  }\r\n                  padre = padre ? padre : \"--\";\r\n\r\n                  return (\r\n                    <tr\r\n                      key={cat.id}\r\n                      className={\r\n                        cat.id === this.state.newItem ? \"table-success\" : \"\"\r\n                      }\r\n                    >\r\n                      <td className=\"text-capitalize\">{cat.categoria}</td>\r\n                      <td className=\"text-capitalize\">{padre}</td>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn btn-outline-light btn-sm\"\r\n                          onClick={(e) => {\r\n                            this.handleClickDelete(cat.id, cat.categoria);\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-trash\"></i>\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"8\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n            {this.state.add && !load ? (\r\n              <tfoot>\r\n                <tr>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      className=\"form-control\"\r\n                      autoComplete=\"off\"\r\n                      value={this.state.name}\r\n                      onChange={this.catchInputs}\r\n                      ref={(input) => {\r\n                        this.nameInput = input;\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <select\r\n                      name=\"category_id\"\r\n                      className=\"form-control\"\r\n                      value={this.state.category_id}\r\n                      onChange={this.handleCategoryChange}\r\n                    >\r\n                      <option value=\"0\">Inicial</option>\r\n                      {this.state.category_select.map((cat) => {\r\n                        return (\r\n                          <option key={cat.id} value={cat.id}>\r\n                            {cat.categoria}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                    {category_hijos.length ? (\r\n                      <select\r\n                        name=\"category_id_2\"\r\n                        className=\"form-control mt-2\"\r\n                        value={this.state.category_id_2}\r\n                        onChange={this.handleCategoryChange}\r\n                      >\r\n                        <option value=\"0\">Raiz</option>\r\n                        {this.state.category_hijos.map((cat) => {\r\n                          return (\r\n                            <option key={cat.id} value={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        })}\r\n                      </select>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    {category_hijos_3.length ? (\r\n                      <select\r\n                        name=\"category_id_3\"\r\n                        className=\"form-control mt-2\"\r\n                        value={this.state.category_id_3}\r\n                        onChange={this.handleCategoryChange}\r\n                      >\r\n                        <option value=\"0\">Raiz</option>\r\n                        {this.state.category_hijos_3.map((cat) => {\r\n                          return (\r\n                            <option key={cat.id} value={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        })}\r\n                      </select>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-dark btn-sm\"\r\n                      onClick={this.handleClickSave}\r\n                    >\r\n                      <i className=\"fas fa-save\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            ) : (\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan=\"3\">\r\n                    <Pagination\r\n                      meta={meta}\r\n                      handleChangePage={this.handleChangePage}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            )}\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={this.handleClickAdd}\r\n          >\r\n            {this.state.add ? (\r\n              <i className=\"fas fa-undo\"></i>\r\n            ) : (\r\n              <i className=\"fas fa-plus\"></i>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleCategoryChange = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"category_id\") {\r\n      if (value) {\r\n        this.state.category_select.map((cat) => {\r\n          if (cat.id === value * 1) {\r\n            this.setState({\r\n              category_hijos: cat.hijos,\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n    if (name === \"category_id_2\") {\r\n      if (value) {\r\n        this.state.category_hijos.map((cat) => {\r\n          if (cat.id === value * 1) {\r\n            this.setState({\r\n              category_hijos_3: cat.hijos,\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n    });\r\n  };\r\n  handleClickDelete = (id, name) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar la categoria \" + name.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de categoria por API\");\r\n          return fetch(\"http://\" + host + \"/api/categories/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Categoria eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Categoria eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getCategories());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  handleClickSave = () => {\r\n    //Verificamos campos validos\r\n    if (this.state.name.length < 4) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Debe de escribir el nombre de la categoria\",\r\n        \"warning\"\r\n      );\r\n      this.nameInput.focus();\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva categoria?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          let { host, token } = this.state,\r\n            body = {\r\n              name: this.state.name,\r\n              category_id: this.state.category_id_3\r\n                ? this.state.category_id_3\r\n                : this.state.category_id_2\r\n                ? this.state.category_id_2\r\n                : this.state.category_id,\r\n            };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(\"http://\" + host + \"/api/categories\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Categoria almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Categoria almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.setState({\r\n              newItem: data.data.id,\r\n            });\r\n            this.getCategories();\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la categoria\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getCategories = () => {\r\n    //Variables en localStorage\r\n    let { host, token, load } = this.state,\r\n      url = \"http://\" + host + \"/api/categories\",\r\n      categoryid = \"&categoryid=raiz\",\r\n      page = this.state.page > 0 ? \"?page=\" + this.state.page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    console.log(\"Descargando lista de categorias\");\r\n    fetch(url + page, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data) {\r\n          console.log(\"Lista de categorias descargadas\");\r\n          this.setState({\r\n            category_list: cat.data,\r\n            meta: cat.meta,\r\n            newItem: 0,\r\n            add: false,\r\n            category_id: 0,\r\n            name: \"\",\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n    //Category_select\r\n    fetch(url + page + categoryid, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data) {\r\n          this.setState({\r\n            category_select: cat.data,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  handleClickAdd = () => {\r\n    this.setState({\r\n      add: !this.state.add,\r\n      name: \"\",\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      category_hijos: [],\r\n      category_hijos_3: [],\r\n    });\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Category from \"./tools_category\";\r\n//import { Link } from 'react-router-dom';\r\n\r\nexport default class StoreAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      server: \"\",\r\n      company: \"\",\r\n      email: \"\",\r\n      name: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      category_list: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    this.setState({\r\n      server: varLocalStorage.host\r\n        ? varLocalStorage.host\r\n        : window.location.host.split(\":\")[0],\r\n      company: varLocalStorage.company ? varLocalStorage.company : \"\",\r\n      email: varLocalStorage.email ? varLocalStorage.email : \"\",\r\n      name: varLocalStorage.name ? varLocalStorage.name : \"\",\r\n      username: varLocalStorage.username ? varLocalStorage.username : \"\",\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { data } = this.props;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-6\">\r\n          <div className=\"card card-primary card-outline\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Generales</h5>\r\n              <p>&nbsp;</p>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-server\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Servidor\"\r\n                  name=\"server\"\r\n                  value={this.state.server}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-building\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control text-capitalize\"\r\n                  placeholder=\"Nombre de la empresa\"\r\n                  name=\"company\"\r\n                  value={this.state.company}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"card-footer text-right\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.clickSave}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <Category data={data} />\r\n        </div>\r\n        <div className=\"col-6\">\r\n          <div className=\"card card-primary card-outline\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Usuario</h5>\r\n              <p>&nbsp;</p>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-at\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Email\"\r\n                  name=\"email\"\r\n                  value={this.state.email}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-user-tag\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control text-capitalize\"\r\n                  placeholder=\"Nombre completo\"\r\n                  name=\"name\"\r\n                  value={this.state.name}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <hr />\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-user-check\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Usuario\"\r\n                  name=\"username\"\r\n                  value={this.state.username}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-lock\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Contraseña\"\r\n                  name=\"password\"\r\n                  value={this.state.password}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"card-footer text-right\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.clickSaveUser}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  clickSave = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    varLocalStorage.company = this.state.company;\r\n    varLocalStorage.host = this.state.server;\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(varLocalStorage));\r\n  };\r\n  clickSaveUser = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    varLocalStorage.email = this.state.email;\r\n    varLocalStorage.name = this.state.name;\r\n    varLocalStorage.username = this.state.username;\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(varLocalStorage));\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, status, date } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: paciente\"\r\n                    value={search ? search : \"\"}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Estado</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-toggle-on\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"status\"\r\n                    value={status}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Activo</option>\r\n                    <option value=\"1\">Terminado</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Fecha</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-calendar-alt\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"form-control\"\r\n                    name=\"date\"\r\n                    value={date}\r\n                    onChange={this.changeFilters}\r\n                  />\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search || date || status\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"status\", 0);\r\n    this.props.changeFilters(\"date\", moment(new Date()).format(\"YYYY-MM-DD\"));\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Exam extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusExam\"));\r\n    this.state = {\r\n      exams: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd && sdd.orderby ? sdd.orderby : \"created_at\",\r\n      order: sdd && sdd.order ? sdd.order : \"desc\",\r\n      search: sdd && sdd.search ? sdd.search : \"\",\r\n      status: sdd && sdd.status >= 0 ? sdd.status : \"\",\r\n      date: sdd && sdd.date ? sdd.date : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getExams();\r\n    localStorage.setItem(\r\n      \"OrusExam\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        status: this.state.status,\r\n        date: this.state.date,\r\n      })\r\n    );\r\n    console.log(\"[Exams] Eliminando datos de contacto en uso\");\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando examenes\");\r\n      this.getExams();\r\n      localStorage.setItem(\r\n        \"OrusExam\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          status: this.state.status,\r\n          date: this.state.date,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { exams, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Paciente\", type: \"name\", filter: true },\r\n        { name: \"Edad\" },\r\n        { name: \"Estado\" },\r\n        { name: \"Esfera\" },\r\n        { name: \"Cilindro\" },\r\n        { name: \"Eje\" },\r\n        { name: \"Adicion\" },\r\n        { name: \"Ad Media\" },\r\n        { name: \"D/P\" },\r\n        { name: \"Altura\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-info card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-info\">\r\n            <i className=\"fas fa-notes-medical mr-2\"></i>\r\n            Examanes de la vista\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/consultorio/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={this.changePage}\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={this.state.search}\r\n              status={this.state.status}\r\n              date={this.state.date}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={exams.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"12\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(exams.data).length ? (\r\n                exams.data.map((exam) => {\r\n                  return (\r\n                    <tr\r\n                      key={exam.id}\r\n                      className={\r\n                        exam.estado\r\n                          ? \"table-secondary\"\r\n                          : moment\r\n                              .utc(new Date())\r\n                              .isSame(moment.utc(exam.created_at), \"hour\")\r\n                          ? \"table-success\"\r\n                          : \"\"\r\n                      }\r\n                    >\r\n                      <td>\r\n                        <Link\r\n                          to={\"/consultorio/registro/\" + exam.id}\r\n                          onClick={(e) => {\r\n                            //e.preventDefault();\r\n                            console.log(\r\n                              \"[Exams] Almacenando datos de paciente en local storage\"\r\n                            );\r\n                            localStorage.setItem(\r\n                              \"OrusContactInUse\",\r\n                              JSON.stringify({\r\n                                id: exam.paciente.id,\r\n                                nombre: exam.paciente.nombre,\r\n                              })\r\n                            );\r\n                            return true;\r\n                          }}\r\n                        >\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {exam.paciente.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td>{exam.edad ? exam.edad : \"--\"}</td>\r\n                      <td className=\"text-uppercase\">\r\n                        {exam.estado ? (\r\n                          <span className=\"text-secondary\">Terminado</span>\r\n                        ) : (\r\n                          <span className=\"text-success\">Activo</span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {exam.esferaod}/{exam.esferaoi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.cilindrod}/{exam.cilindroi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.ejeod}/{exam.ejeoi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.adiciond}/{exam.adicioni}\r\n                      </td>\r\n                      <td>\r\n                        {exam.adicion_media_od}/{exam.adicion_media_oi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.dpod}/{exam.dpoi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.alturaod}/{exam.alturaoi}\r\n                      </td>\r\n                      <td>\r\n                        {moment(exam.updated_at, \"YYYY-MM-DD\").format(\"ll\")}\r\n                      </td>\r\n                      <td>{moment(exam.created_at, \"YYYY-MM-DD\").fromNow()}</td>\r\n                      <Actions\r\n                        id={exam.id}\r\n                        item={exam.paciente.nombre}\r\n                        delete={\r\n                          exam.estado || exam.order_id\r\n                            ? null\r\n                            : this.handleDelete\r\n                        }\r\n                        edit={\"/consultorio/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"12\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/consultorio/registro\"\r\n            className=\"btn btn-outline-info\"\r\n            onClick={this.changePage}\r\n            id=\"/consultorio/registro\"\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            Nuevo examen\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleFilter = () => {\r\n    this.setState({\r\n      load: true,\r\n      page: 1,\r\n    });\r\n  };\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  handleDelete = (id, item) => {\r\n    //Confirmación de eliminacion\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text:\r\n        \"¿Esta seguro de eliminar el examen del paciente \" +\r\n        item.toUpperCase() +\r\n        \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          return fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Examen eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Examen eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getExams());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getExams() {\r\n    //Variables\r\n    let {\r\n        host,\r\n        token,\r\n        order,\r\n        orderby,\r\n        search,\r\n        page,\r\n        status,\r\n        load,\r\n        date,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/exams\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\",\r\n      fecha = date === \"\" ? \"\" : \"&date=\" + date,\r\n      estado = status === \"\" ? \"\" : \"&status=\" + status;\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Realiza la peticion de los contactos\r\n    fetch(url + pagina + ordenar + estado + fecha + buscar, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Examenes descargados\");\r\n          this.setState({\r\n            exams: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar examenes\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class easyContact extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let storage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    this.state = {\r\n      name: \"\",\r\n      t_movil: \"\",\r\n      birthday: \"\",\r\n      email: \"\",\r\n      host: storage.host,\r\n      token: storage.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { name } = this.props;\r\n    if (name) {\r\n      this.setState({\r\n        name,\r\n      });\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.name !== this.props.name && this.props.name !== this.state.name) {\r\n      this.setState({\r\n        name: this.props.name,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { name, t_movil, birthday, email } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"form-group\">\r\n          <label>Nuevo paciente</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-uppercase\"\r\n            placeholder=\"Nombre del paciente\"\r\n            name=\"name\"\r\n            autoComplete=\"off\"\r\n            required=\"required\"\r\n            pattern=\"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*\"\r\n            minLength=\"8\"\r\n            value={name}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Telefono celular</label>\r\n          <input\r\n            type=\"tel\"\r\n            placeholder=\"Telefono celular\"\r\n            className=\"form-control\"\r\n            name=\"t_movil\"\r\n            pattern=\"^[\\d]{10}$\"\r\n            maxLength=\"10\"\r\n            value={t_movil}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>E-mail</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Fecha de naciemiento</label>\r\n          <input\r\n            type=\"date\"\r\n            className=\"form-control\"\r\n            name=\"birthday\"\r\n            value={birthday}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group text-right\">\r\n          <button className=\"btn btn-danger\" onClick={this.handleSave}>\r\n            Registrar\r\n          </button>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  changeValue = (e) => {\r\n    const { name, value, type } = e.target;\r\n    let val = value;\r\n    console.log(name, value);\r\n    if (type === \"text\" || type === \"email\") val = value.toLowerCase();\r\n    this.setState({\r\n      [name]: val,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { name, t_movil } = this.state;\r\n    console.log(\"Verificacion\", name.length, t_movil.length);\r\n    //Verificamos campos validos\r\n    if (name.length < 5) {\r\n      window.Swal.fire(\r\n        \"Verificacion\",\r\n        \"El nombre del paciente no es correcto\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (t_movil.length !== 10) {\r\n      window.Swal.fire(\r\n        \"Verificacion\",\r\n        \"El numero telefonico no es correcto\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear un nuevo contacto?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { name, birthday, t_movil, email, host, token } = this.state,\r\n            //Creamos el body\r\n            body = {\r\n              name,\r\n              email: email\r\n                ? email\r\n                : name.replace(/\\s/g, \"\") +\r\n                  birthday.replace(/-/g, \"\").replace(/\\//g, \"\") +\r\n                  \"@domain\",\r\n              type: 0,\r\n              birthday,\r\n              business: 0,\r\n              domicilio: JSON.stringify({\r\n                calle: \"\",\r\n                colonia: \"\",\r\n                municipio: \"Colima\",\r\n                estado: \"Colima\",\r\n                cp: \"28000\",\r\n              }),\r\n              telnumbers: JSON.stringify({\r\n                t_casa: \"\",\r\n                t_oficina: \"\",\r\n                t_movil,\r\n              }),\r\n            },\r\n            //Identificamos la URL y el metodo segun sea el caso (Actualizar o agregar)\r\n            url = \"http://\" + host + \"/api/contacts\",\r\n            //Actualiza el contacto o creamos el contacto\r\n            method = \"POST\";\r\n\r\n          //Enviamos datos al API\r\n          console.log(\"Enviando datos del contacto a la API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Contacto almacenado\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n          localStorage.setItem(\r\n            \"OrusContactInUse\",\r\n            JSON.stringify({ id: data.data.id })\r\n          );\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Contacto almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.props.setContac(data.data.id, data.data.birthday);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el contacto\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Easycontact from \"./easyContact\";\r\nimport moment from \"moment\";\r\n\r\nexport default class searchContact extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      contacto: \"\",\r\n      data: [],\r\n      dataContact: {},\r\n      load: false,\r\n      edad: 0,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    //identificador del contacto\r\n    let id = this.props.contact;\r\n    if (id) {\r\n      this.getContact(id);\r\n    } else {\r\n      this.contactInput.focus();\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.contacto !== this.state.contacto) {\r\n      if (this.state.contacto.length > 2) {\r\n        this.getContacts(this.state.contacto);\r\n      } else {\r\n        this.setState({\r\n          data: [],\r\n        });\r\n      }\r\n    }\r\n    if (props.contact !== this.props.contact && this.props.contact) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n      this.getContact(this.props.contact);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { load } = this.state;\r\n\r\n    if (this.props.contact) {\r\n      if (load) {\r\n        return (\r\n          <div className=\"card card-danger card-outline d-print-none\">\r\n            <div className=\"card-body box-profile\">\r\n              <div className=\"text-center\">\r\n                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                  <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      } else if (Object.keys(this.state.dataContact).length) {\r\n        const {\r\n            nombre,\r\n            telefonos,\r\n            domicilio,\r\n            id,\r\n            f_nacimiento,\r\n            email,\r\n          } = this.state.dataContact,\r\n          edad = this.props.edad\r\n            ? this.props.edad + \" años\"\r\n            : f_nacimiento\r\n            ? moment(f_nacimiento).fromNow()\r\n            : 0;\r\n        console.log(\r\n          \"[Contact][search] Almacenando datos de contacto en local storage\"\r\n        );\r\n        localStorage.setItem(\r\n          \"OrusContactInUse\",\r\n          JSON.stringify({\r\n            id,\r\n            nombre,\r\n          })\r\n        );\r\n\r\n        return (\r\n          <div className=\"card card-danger card-outline\">\r\n            <div className=\"card-body box-profile\">\r\n              <div className=\"text-center\">\r\n                <img\r\n                  className=\"profile-user-img img-fluid img-circle\"\r\n                  src=\"/img/avatars/no-avatar.png\"\r\n                  alt=\"User Avatar\"\r\n                />\r\n              </div>\r\n\r\n              <h3 className=\"profile-username text-center text-capitalize\">\r\n                {nombre}\r\n              </h3>\r\n              <h6 className=\"text-muted text-center\">\r\n                {telefonos.t_movil ? (\r\n                  <span>Movil: {telefonos.t_movil}</span>\r\n                ) : telefonos.t_casa ? (\r\n                  <span>Casa: {telefonos.t_casa}</span>\r\n                ) : telefonos.t_oficina ? (\r\n                  <span>Oficina: {telefonos.t_oficina}</span>\r\n                ) : (\r\n                  <span className=\"text-danger\">Capture el telefono</span>\r\n                )}\r\n              </h6>\r\n              <p className=\"text-muted text-center\">\r\n                {domicilio && domicilio.calle.length > 6\r\n                  ? domicilio.calle\r\n                  : null}\r\n              </p>\r\n\r\n              <ul className=\"list-group list-group-unbordered mb-3\">\r\n                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                  <b className=\"mr-4\">Edad:</b>\r\n\r\n                  {edad ? (\r\n                    <span className=\"badge badge-primary badge-pill\">\r\n                      {edad}\r\n                    </span>\r\n                  ) : (\r\n                    <input\r\n                      type=\"number\"\r\n                      name=\"edad\"\r\n                      className=\"form-control\"\r\n                      value={this.state.edad ? this.state.edad : \"\"}\r\n                      onChange={this.handleSearcContact}\r\n                      onBlur={this.sendAge}\r\n                      onKeyPress={(e) => {\r\n                        if (e.key === \"Enter\") {\r\n                          this.sendAge(e);\r\n                        }\r\n                      }}\r\n                    />\r\n                  )}\r\n                </li>\r\n                {f_nacimiento ? (\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <b>Fecha de nacimiento:</b>\r\n                    <span className=\"badge badge-primary badge-pill\">\r\n                      {moment(f_nacimiento).format(\"L\")}\r\n                    </span>\r\n                  </li>\r\n                ) : null}\r\n                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                  <b>E-mail:</b>\r\n                  {email ? (\r\n                    <span className=\"badge badge-primary badge-pill\">\r\n                      {email}\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"badge badge-warning badge-pill\">\r\n                      No se ha capturado\r\n                    </span>\r\n                  )}\r\n                </li>\r\n                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                  <b>#Contacto:</b>\r\n                  <span className=\"badge badge-primary badge-pill\">{id}</span>\r\n                </li>\r\n              </ul>\r\n              {!this.props.status ? (\r\n                <div className=\"btn-group btn-block d-print-none\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={this.handleClickChange}\r\n                  >\r\n                    <i className=\"fas fa-exchange-alt mr-1\"></i>\r\n                    <b>Cambiar</b>\r\n                  </button>\r\n                  <Link\r\n                    to={\"/contactos/registro/\" + id}\r\n                    className=\"btn btn-danger\"\r\n                    onClick={(e) => {\r\n                      this.handleChangePage(\"/contactos/registro/\");\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-edit mr-1\"></i>\r\n                    <b>Editar</b>\r\n                  </Link>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      return (\r\n        <div className=\"card card-danger card-outline d-print-none\">\r\n          <div className=\"card-body\">\r\n            <label>Buscar paciente</label>\r\n            <div className=\"input-group mb-3\">\r\n              <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\">\r\n                  <i className=\"fas fa-user\"></i>\r\n                </span>\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control text-capitalize\"\r\n                placeholder=\"Nombre del paciente\"\r\n                name=\"contacto\"\r\n                autoComplete=\"off\"\r\n                value={this.state.contacto}\r\n                onChange={this.handleSearcContact}\r\n                ref={(input) => {\r\n                  this.contactInput = input;\r\n                }}\r\n              />\r\n            </div>\r\n            {this.state.data.length ? (\r\n              <ul className=\"list-group\">\r\n                {this.state.data.map((contact) => {\r\n                  return (\r\n                    <li key={contact.id} className=\"list-group-item\">\r\n                      <a\r\n                        href=\"#contact\"\r\n                        className={\r\n                          !contact.id\r\n                            ? \"text-danger text-capitalize\"\r\n                            : \"text-muted text-capitalize\"\r\n                        }\r\n                        onClick={(e) => {\r\n                          this.handleClickContact(e, contact.id);\r\n                        }}\r\n                      >\r\n                        <i className=\"fas fa-user mr-1\"></i>\r\n                        {contact.nombre}\r\n                      </a>\r\n                      {!contact.id ? (\r\n                        <Easycontact\r\n                          name={this.state.contacto}\r\n                          setContac={(id, date) => {\r\n                            let edad =\r\n                              moment(date)\r\n                                .fromNow(true)\r\n                                .replace(/[a-zA-ZñÑ]/gi, \"\") * 1;\r\n                            this.setState({\r\n                              contacto: \"\",\r\n                              data: [],\r\n                              dataContact: {},\r\n                            });\r\n                            console.log(\r\n                              \"[Contact][search] Almacenando datos de contacto en local storage\"\r\n                            );\r\n                            localStorage.setItem(\r\n                              \"OrusContactInUse\",\r\n                              JSON.stringify({})\r\n                            );\r\n                            this.props.getIdContact(id, edad);\r\n                          }}\r\n                        />\r\n                      ) : null}\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            ) : load ? (\r\n              <div className=\"text-center\">\r\n                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                  <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  sendAge = (e) => {\r\n    const { value } = e.target,\r\n      { id } = this.state.dataContact;\r\n\r\n    if (value > 0 && value < 110 && id) {\r\n      this.props.getIdContact(id, parseInt(value));\r\n    }\r\n  };\r\n  getContact = (id) => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    //Realiza busqueda de contacto\r\n    fetch(\"http://\" + varLocalStorage.host + \"/api/contacts/\" + id, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        console.log(\"Descargando contacto\");\r\n        this.setState({\r\n          dataContact: data.data,\r\n          load: false,\r\n        });\r\n        console.log(\r\n          \"[Contact][search] Almacenando datos de contacto en local storage\"\r\n        );\r\n        localStorage.setItem(\"OrusContactInUse\", JSON.stringify(data.data));\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n  handleChangePage = (page) => {\r\n    this.props.changePage(page);\r\n  };\r\n  handleClickChange = (e) => {\r\n    e.preventDefault();\r\n    if (window.confirm(\"¿Esta seguro?\")) {\r\n      this.setState({\r\n        contacto: \"\",\r\n        data: [],\r\n        dataContact: {},\r\n      });\r\n      console.log(\"[Contact][search] Eliminando datos local storage\");\r\n      localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n      this.props.getIdContact(0);\r\n    }\r\n  };\r\n  handleClickContact = (e, id) => {\r\n    if (e) e.preventDefault();\r\n    this.state.data.map((contact) => {\r\n      if (contact.id === id) {\r\n        this.setState({\r\n          contacto: \"\",\r\n          data: [],\r\n          dataContact: contact,\r\n        });\r\n        let edad =\r\n          moment(contact.f_nacimiento)\r\n            .fromNow(true)\r\n            .replace(/[a-zA-ZñÑ]/gi, \"\") * 1;\r\n        this.props.getIdContact(id, edad);\r\n        console.log(\r\n          \"[Contact][search] Almacenando datos de contacto en local storage\"\r\n        );\r\n        localStorage.setItem(\"OrusContactInUse\", JSON.stringify({ id }));\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    });\r\n  };\r\n  getContacts = (word) => {\r\n    let { load } = this.state;\r\n\r\n    //Revisamos que ya este cargando\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    if (this.timeSave) clearTimeout(this.timeSave);\r\n    this.timeSave = setTimeout(() => {\r\n      //Variables en localStorage\r\n      let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n        url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n        type = \"&type=0\",\r\n        search = word ? `&search=${word}` : \"\",\r\n        page = \"?page=1&itemsPage=4\";\r\n      console.log(\"Descargando contactos de la API\");\r\n      //Realiza la peticion de los contactos\r\n      fetch(url + page + search + type, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then(async (response) => {\r\n          let back = {};\r\n          if (response.status !== 204) back = await response.json();\r\n          if (!response.ok) {\r\n            throw new Error(back.message);\r\n          }\r\n          return back;\r\n        })\r\n        .then((data) => {\r\n          if (data.data && data.data.length) {\r\n            console.log(\"Mostrando información del contacto\");\r\n            this.setState({\r\n              data: data.data,\r\n              load: false,\r\n            });\r\n          } else {\r\n            this.setState({\r\n              data: [\r\n                {\r\n                  id: 0,\r\n                  nombre: \"No hay contactos para: \" + word,\r\n                },\r\n              ],\r\n              load: false,\r\n            });\r\n            console.log(\r\n              \"[Contact][search] Almacenando datos de contacto en local storage\"\r\n            );\r\n            localStorage.setItem(\r\n              \"OrusContactInUse\",\r\n              JSON.stringify({ name: word.toLowerCase() })\r\n            );\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus fetch\", e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    }, 1500);\r\n  };\r\n  handleSearcContact = (e) => {\r\n    const { name, value, type } = e.target;\r\n    let val = value;\r\n    if (type === \"number\") val = parseInt(value);\r\n    if (type === \"text\") val = value.toLowerCase();\r\n\r\n    this.setState({\r\n      [name]: val,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class GeneralesExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"headingOne\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#collapseOne\"\r\n              aria-expanded=\"true\"\r\n              aria-controls=\"collapseOne\"\r\n            >\r\n              Generales\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"collapseOne\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingOne\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"pc\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"pc\"\r\n                    checked={this.props.pc}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"pc\">\r\n                    <i className=\"fas fa-desktop\"></i> PC\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"pc_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.pc_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.pc ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"tablet\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"tablet\"\r\n                    checked={this.props.tablet}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"tablet\">\r\n                    <i className=\"fas fa-tablet-alt\"></i> Tablet\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"tablet_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.tablet_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.tablet ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"movil\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"movil\"\r\n                    checked={this.props.movil}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"movil\">\r\n                    <i className=\"fas fa-mobile-alt\"></i> Telefono\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"movil_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.movil_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.movil ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"lap\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"lap\"\r\n                    checked={this.props.lap}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"lap\">\r\n                    <i className=\"fas fa-laptop\"></i> Laptop\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lap_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.lap_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.lap ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-1\">\r\n              <div className=\"col-md-6\">\r\n                <ul className=\"list-group\">\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"frontal\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"frontal\"\r\n                        checked={this.props.frontal}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label className=\"custom-control-label\" htmlFor=\"frontal\">\r\n                        Frontal\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"occipital\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"occipital\"\r\n                        checked={this.props.occipital}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label\r\n                        className=\"custom-control-label\"\r\n                        htmlFor=\"occipital\"\r\n                      >\r\n                        Occipital\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"generality\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"generality\"\r\n                        checked={this.props.generality}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label\r\n                        className=\"custom-control-label\"\r\n                        htmlFor=\"generality\"\r\n                      >\r\n                        General\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"cefalea\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"cefalea\"\r\n                        checked={this.props.cefalea}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label className=\"custom-control-label\" htmlFor=\"cefalea\">\r\n                        Cefalea\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <ul className=\"list-group\">\r\n                  <li className=\"list-group-item\">\r\n                    Temporal\r\n                    <br />\r\n                    <div className=\"row mt-2\">\r\n                      <div className=\"col\">\r\n                        <div className=\"custom-control custom-switch\">\r\n                          <input\r\n                            name=\"temporaod\"\r\n                            type=\"checkbox\"\r\n                            className=\"custom-control-input\"\r\n                            id=\"temporaod\"\r\n                            checked={this.props.temporaod}\r\n                            onChange={this.catchInputs}\r\n                          />\r\n                          <label\r\n                            className=\"custom-control-label\"\r\n                            htmlFor=\"temporaod\"\r\n                          >\r\n                            <i className=\"fa fa-eye\"></i> Derecho\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col\">\r\n                        <div className=\"custom-control custom-switch\">\r\n                          <input\r\n                            name=\"temporaoi\"\r\n                            type=\"checkbox\"\r\n                            className=\"custom-control-input\"\r\n                            id=\"temporaoi\"\r\n                            checked={this.props.temporaoi}\r\n                            onChange={this.catchInputs}\r\n                          />\r\n                          <label\r\n                            className=\"custom-control-label\"\r\n                            htmlFor=\"temporaoi\"\r\n                          >\r\n                            <i className=\"fa fa-eye\"></i> Izquierdo\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item\">\r\n                    Frecuencia\r\n                    <span className=\"badge badge-pill\">\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"c_frecuencia\"\r\n                        maxLength=\"60\"\r\n                        className=\"form-control input-xs\"\r\n                        value={this.props.c_frecuencia}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                    </span>\r\n                  </li>\r\n                  <li className=\"list-group-item\">\r\n                    <label htmlFor=\"c_intensidad\">Intensidad</label>\r\n                    <input\r\n                      type=\"range\"\r\n                      name=\"c_intensidad\"\r\n                      className=\"custom-range custom-range-info\"\r\n                      id=\"c_intensidad\"\r\n                      min=\"0\"\r\n                      max=\"4\"\r\n                      value={this.props.c_intensidad}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class InterrogatorioExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"headingThree\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#collapseThree\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"collapseThree\"\r\n            >\r\n              Interrogatorios\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"collapseThree\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <label>Interrogatorio inicial</label>\r\n                <textarea\r\n                  name=\"interrogatorio\"\r\n                  className=\"form-control\"\r\n                  value={this.props.interrogatorio}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-12\">\r\n                <label>Cirugias oculares</label>\r\n                <textarea\r\n                  name=\"coa\"\r\n                  className=\"form-control\"\r\n                  value={this.props.coa}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-12\">\r\n                <label>Antecedentes oculares patologicas personales</label>\r\n                <textarea\r\n                  name=\"aopp\"\r\n                  className=\"form-control\"\r\n                  rows=\"2\"\r\n                  value={this.props.aopp}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-12\">\r\n                <label>Antecedentes oculares patologicas familiares</label>\r\n                <textarea\r\n                  name=\"aopf\"\r\n                  className=\"form-control\"\r\n                  rows=\"2\"\r\n                  value={this.props.aopf}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class KeraRetExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#panel_100\"\r\n              aria-expanded=\"true\"\r\n              aria-controls=\"panel_100\"\r\n            >\r\n              Keratrometria y Retinoscopia\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"panel_100\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingOne\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-6\">Keratometria</div>\r\n              <div className=\"col-6\">Retinoscopia</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fas fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"keratometriaod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.keratometriaod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <i className=\"fas fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"keratometriaoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.keratometriaoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"rsod\"\r\n                  maxLength=\"16\"\r\n                  className=\"form-control\"\r\n                  value={this.props.rsod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"rsoi\"\r\n                  maxLength=\"16\"\r\n                  className=\"form-control\"\r\n                  value={this.props.rsoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class DiabetesExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading4\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja4\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja4\"\r\n            >\r\n              Diabetes\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja4\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8\">\r\n                <label>Diab&eacute;tico</label>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <label>Fotocoagulaci&oacute;n laser</label>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">Fecha</div>\r\n              <div className=\"col-2\">Rango de glucosa</div>\r\n              <div className=\"col-3\">Ultimo examen</div>\r\n              <div className=\"col-2\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"d_fclod\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"d_fclod\"\r\n                    checked={this.props.d_fclod}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"d_fclod\">\r\n                    <i className=\"fa fa-eye\"></i> Derecho\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-2\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"d_fcloi\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"d_fcloi\"\r\n                    checked={this.props.d_fcloi}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"d_fcloi\">\r\n                    <i className=\"fa fa-eye\"></i> Izquierdo\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"d_time\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_time}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"d_media\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_media}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"d_test\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_test}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"d_fclod_time\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_fclod_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.d_fclod ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"d_fcloi_time\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_fcloi_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.d_fcloi ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <label>Oftalmoscopia</label>\r\n                <textarea\r\n                  name=\"oftalmoscopia\"\r\n                  className=\"form-control\"\r\n                  value={this.props.oftalmoscopia}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AgudezaExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading5\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja5\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja5\"\r\n            >\r\n              Capacidad y agudeza visual\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja5\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">Capacidad visual</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"cvod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.cvod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"cvoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.cvoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-md-6\">Agudeza visual (Sin lentes)</div>\r\n              <div className=\"col-md-6\">\r\n                Agudeza visual (con la graduaci&oacute;n anterior)\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avslod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avslod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avsloi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avsloi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avcgaod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.avcgaod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avcgaoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.avcgaoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">Agudeza visual final</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avfod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avfod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avfoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avfoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <i className=\"fa fa-eye\"></i>\r\n                <i className=\"fa fa-eye\"></i> <label>Ambos</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avf2o\"\r\n                  maxLength=\"25\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avf2o}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class DiagnosticoExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading6\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja6\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja6\"\r\n            >\r\n              Diagnostico\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja6\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\"></div>\r\n              <div className=\"col-md-6\">Tensi&oacute;n ocular</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                Diagnostico\r\n                <select\r\n                  name=\"diagnostico\"\r\n                  className=\"form-control\"\r\n                  value={this.props.diagnostico}\r\n                  onChange={this.catchInputs}\r\n                >\r\n                  <option value=\"Emetrope\">Em&eacute;trope</option>\r\n                  <option value=\"hipermetropia\">Hipermetrop&iacute;a</option>\r\n                  <option value=\"hipermetropia-astigmatismo\">\r\n                    Hipermetrop&iacute;a y astigmatismo\r\n                  </option>\r\n                  <option value=\"hipermetropia-miopia\">\r\n                    Hipermetrop&iacute;a y miop&iacute;a\r\n                  </option>\r\n                  <option value=\"astigmatismo-regla\">\r\n                    Astigmatismo con la regla\r\n                  </option>\r\n                  <option value=\"astigmatismo-contra-regla\">\r\n                    Astigmatismo contra la regla\r\n                  </option>\r\n                  <option value=\"astigmatismo-oblicuo\">\r\n                    Astigmatismo oblicuo\r\n                  </option>\r\n                  <option value=\"astigmatismo-miopia\">\r\n                    Astigmatismo/m&iacute;opico\r\n                  </option>\r\n                  <option value=\"miopia\">Miop&iacute;a</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"presbicie\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"presbicie\"\r\n                    checked={this.props.presbicie}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"presbicie\">\r\n                    Presbicie\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"piod\"\r\n                  min=\"0\"\r\n                  max=\"40\"\r\n                  step=\"1\"\r\n                  className=\"form-control\"\r\n                  value={this.props.piod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"pioi\"\r\n                  min=\"0\"\r\n                  max=\"40\"\r\n                  step=\"1\"\r\n                  className=\"form-control\"\r\n                  value={this.props.pioi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <label>Tratamiento oftalmico</label>\r\n                <textarea\r\n                  name=\"txoftalmico\"\r\n                  className=\"form-control\"\r\n                  value={this.props.txoftalmico}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class ObservacionesExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading8\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja8\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja8\"\r\n            >\r\n              Observaciones\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja8\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <textarea\r\n              name=\"observaciones\"\r\n              className=\"form-control\"\r\n              value={this.props.observaciones}\r\n              onChange={this.catchInputs}\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nexport default class messenger extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      messages: [],\r\n      message: \"\",\r\n      load: true,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getMessengers();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    //window.$(\"#boxchat\").scrollTop(window.$(\"#boxchat\").prop(\"scrollHeight\"));\r\n    if (props.pagado !== this.props.pagado) {\r\n      console.log(\"Recargando chat\");\r\n      this.getMessengers();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data } = this.props,\r\n      { messages, load, message } = this.state,\r\n      user = data.idUser;\r\n\r\n    return (\r\n      <div className=\"card direct-chat direct-chat-primary d-print-none\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title\">\r\n            <i className=\"fas fa-comments mr-1\"></i>\r\n            Chat\r\n          </h3>\r\n        </div>\r\n\r\n        {load ? (\r\n          <div className=\"card-body\">\r\n            <div className=\"card-text text-center p-4\">\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : messages.length ? (\r\n          <React.Fragment>\r\n            <div className=\"card-body\">\r\n              <div className=\"direct-chat-messages\" id=\"boxchat\">\r\n                {messages.map((message) => {\r\n                  let avatar = \"/img/avatars/avatar5.png\";\r\n\r\n                  if (message.created_user.rol === 1)\r\n                    avatar = \"/img/avatars/avatar2.png\";\r\n                  if (!message.created_user.rol)\r\n                    avatar = \"/img/avatars/avatar3.png\";\r\n                  if (message.created_user.id === 2)\r\n                    avatar = \"/img/avatars/avatar4.png\";\r\n                  return (\r\n                    <div\r\n                      className={\r\n                        message.created_user.id === user\r\n                          ? \"direct-chat-msg right\"\r\n                          : \"direct-chat-msg\"\r\n                      }\r\n                      key={message.id}\r\n                    >\r\n                      <div className=\"direct-chat-infos clearfix\">\r\n                        <span\r\n                          className={\r\n                            message.created_user.id === user\r\n                              ? \"direct-chat-name float-right\"\r\n                              : \"direct-chat-name float-left\"\r\n                          }\r\n                        >\r\n                          {message.created_user.name}\r\n                        </span>\r\n                        <span\r\n                          className={\r\n                            message.created_user.id === user\r\n                              ? \"direct-chat-timestamp float-left\"\r\n                              : \"direct-chat-timestamp float-right\"\r\n                          }\r\n                        >\r\n                          {moment(message.updated_at).format(\"lll\")}\r\n                        </span>\r\n                      </div>\r\n                      <img\r\n                        className=\"direct-chat-img\"\r\n                        src={\r\n                          message.created_user.id === 1\r\n                            ? \"/img/avatars/OrusBot.png\"\r\n                            : avatar\r\n                        }\r\n                        alt=\"message user image1\"\r\n                      />\r\n                      <div className=\"direct-chat-text\">{message.mensaje}</div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </React.Fragment>\r\n        ) : (\r\n          <div className=\"card-body\">\r\n            <div className=\"card-text text-center p-4\">\r\n              <h5>\r\n                <i className=\"fas fa-comment-slash mr-1\"></i>\r\n                No hay mensajes aun\r\n              </h5>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"card-footer\">\r\n          <div className=\"input-group\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"message\"\r\n              placeholder=\"Escriba un mensaje ...\"\r\n              className=\"form-control\"\r\n              value={message}\r\n              onChange={this.handleMessege}\r\n            />\r\n            <span className=\"input-group-append\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.sendMessenger}\r\n                disabled={message.length > 5 ? false : true}\r\n              >\r\n                Enviar\r\n              </button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleMessege = (e) => {\r\n    let { value, name } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n  sendMessenger = () => {\r\n    const { message, load, host, token } = this.state,\r\n      { table, idRow } = this.props,\r\n      url = \"http://\" + host + \"/api/messengers\",\r\n      body = {\r\n        table,\r\n        idRow,\r\n        user: \"\",\r\n        message,\r\n      };\r\n\r\n    //Mandamos señal de procesamiento\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    console.log(\"Enviando mensajes a la API\");\r\n    //Realiza la peticion de los contactos\r\n    fetch(url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(body),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenado mensajes\");\r\n          this.getMessengers();\r\n        } else {\r\n          console.error(data.message);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n  getMessengers = () => {\r\n    //Variables en localStorage\r\n    const { load, host, token } = this.state,\r\n      { table, idRow } = this.props,\r\n      url = \"http://\" + host + \"/api/messengers\",\r\n      type = \"&table=\" + table + \"&idRow=\" + idRow,\r\n      page = \"?page=1\";\r\n\r\n    //Mandamos señal de procesamiento\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    console.log(\"Solicitando mensajes de la API\");\r\n    //Realiza la peticion de los contactos\r\n    fetch(url + page + type, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenado mensajes\");\r\n          this.setState({\r\n            messages: data.data,\r\n            message: \"\",\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(data.message);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class contactDataVertical extends Component {\r\n  render() {\r\n    const contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    console.log(\"[Contact][Datavertical] Recogiendo valores de localStorage\");\r\n    return (\r\n      <div className=\"col\">\r\n        <label>Nombre de paciente: </label>\r\n        <h3 className=\"ml-2 text-capitalize\">\r\n          <i className=\"fas fa-user\"></i> {contact.nombre}\r\n        </h3>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport Graduacion from \"./graduacionExam\";\r\nimport Contacto from \"../Contacts/contactDataVertical\";\r\n\r\nexport default class printExam extends Component {\r\n  render() {\r\n    const {\r\n      esferaod,\r\n      esferaoi,\r\n      cilindrod,\r\n      cilindroi,\r\n      ejeod,\r\n      ejeoi,\r\n      adiciond,\r\n      adicioni,\r\n      adicion_media_od,\r\n      adicion_media_oi,\r\n      dpod,\r\n      dpoi,\r\n      alturaod,\r\n      alturaoi,\r\n      diagnostico,\r\n      presbicie,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"card d-none d-print-block\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h4>\r\n              Optica Madero\r\n              <br />\r\n              <small>312 312 5353</small>\r\n            </h4>\r\n          </div>\r\n          <div className=\"col-3 text-right\">{moment().format(\"LLL\")}</div>\r\n        </div>\r\n        <div className=\"row pt-4\">\r\n          <Contacto />\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <label className=\"mr-2\">Diagnostico:</label>\r\n            {diagnostico}\r\n          </div>\r\n          <div className=\"col-4\">\r\n            <label className=\"mr-2\">presbicie:</label>\r\n            {presbicie ? \"SI\" : \"NO\"}\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <Graduacion\r\n              esferaod={esferaod}\r\n              esferaoi={esferaoi}\r\n              cilindrod={cilindrod}\r\n              cilindroi={cilindroi}\r\n              ejeod={ejeod}\r\n              ejeoi={ejeoi}\r\n              adiciond={adiciond}\r\n              adicioni={adicioni}\r\n              adicion_media_od={adicion_media_od}\r\n              adicion_media_oi={adicion_media_oi}\r\n              dpod={dpod}\r\n              dpoi={dpoi}\r\n              alturaod={alturaod}\r\n              alturaoi={alturaoi}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <p className=\"card-text text-center mt-4 pt-4\">\r\n              <h4>Julio Cárdenas Martinez</h4>\r\n              Optometrista contactologo\r\n              <br />\r\n              UAG\r\n              <br />\r\n              CED PROF. 2413419\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport SearchContact from \"../Contacts/searchContactCard\";\r\nimport Recomendaciones from \"./recomendaciones\";\r\nimport Generales from \"./generalesExam\";\r\nimport Interrogatorios from \"./interrogatoriosExam\";\r\nimport KeraRet from \"./keraRetExam\";\r\nimport Diabetes from \"./diabetesExam\";\r\nimport Agudeza from \"./agudezaExam\";\r\nimport Diagnostico from \"./diagnosticoExam\";\r\nimport Graduacion from \"./graduacionExam\";\r\nimport Observaciones from \"./observacionesExam\";\r\nimport Chat from \"../Layouts/messenger\";\r\nimport PrintExam from \"./print_exam\";\r\n\r\nexport default class ExamAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    console.log(\r\n      \"[Order] Contacto en uso: \",\r\n      contact && contact.id ? \"Si\" : \"No\"\r\n    );\r\n    this.state = {\r\n      id: 0,\r\n      edad: 0,\r\n      keratometriaoi: \"\",\r\n      keratometriaod: \"\",\r\n      pantalleooi: \"\",\r\n      pantalleood: \"\",\r\n      interrogatorio: \"\",\r\n      cefalea: false,\r\n      c_frecuencia: \"\",\r\n      c_intensidad: 0,\r\n      frontal: false,\r\n      temporal: false,\r\n      occipital: false,\r\n      generality: false,\r\n      temporaoi: false,\r\n      temporaod: false,\r\n      coa: \"\",\r\n      aopp: \"\",\r\n      aopf: \"\",\r\n      avsloi: \"\",\r\n      avslod: \"\",\r\n      avcgaoi: \"\",\r\n      avcgaod: \"\",\r\n      cvoi: \"\",\r\n      cvod: \"\",\r\n      oftalmoscopia: \"\",\r\n      rsoi: \"\",\r\n      rsod: \"\",\r\n      diagnostico: \"Hemetrope\",\r\n      presbicie: true,\r\n      txoftalmico: \"\",\r\n      esferaoi: 0,\r\n      esferaod: 0,\r\n      cilindroi: 0,\r\n      cilindrod: 0,\r\n      ejeoi: 0,\r\n      ejeod: 0,\r\n      adicioni: 0,\r\n      adiciond: 0,\r\n      adicion_media_od: 0,\r\n      adicion_media_oi: 0,\r\n      dpoi: 0,\r\n      dpod: 0,\r\n      avfoi: \"\",\r\n      avfod: \"\",\r\n      avf2o: \"\",\r\n      lcmarca: \"\",\r\n      lcgoi: \"\",\r\n      lcgod: \"\",\r\n      txoptico: \"\",\r\n      alturaoi: 0,\r\n      alturaod: 0,\r\n      pioi: 0,\r\n      piod: 0,\r\n      observaciones: \"\",\r\n      pc: false,\r\n      tablet: false,\r\n      movil: false,\r\n      lap: false,\r\n      lap_time: \"00:00\",\r\n      pc_time: \"00:00\",\r\n      tablet_time: \"00:00\",\r\n      movil_time: \"00:00\",\r\n      d_time: \"00:00\",\r\n      d_media: \"\",\r\n      d_test: \"\",\r\n      d_fclod: false,\r\n      d_fcloi: false,\r\n      d_fclod_time: \"00:00\",\r\n      d_fcloi_time: \"00:00\",\r\n      category_id: 0,\r\n      category_ii: 0,\r\n      item1: 0,\r\n      item2: 0,\r\n      contact_id: contact && contact.id ? contact.id : 0,\r\n      order_id: 0,\r\n      status: 0,\r\n      created_at: \"\",\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    //Variables\r\n    let id = this.props.match.params.id;\r\n    if (id) {\r\n      this.getExam(id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n        contact_id,\r\n        id,\r\n        order_id,\r\n        edad,\r\n        status,\r\n        created_at,\r\n        category_id,\r\n        category_ii,\r\n        cilindrod,\r\n        cilindroi,\r\n        esferaod,\r\n        esferaoi,\r\n        ejeod,\r\n        ejeoi,\r\n        adiciond,\r\n        adicioni,\r\n        adicion_media_od,\r\n        adicion_media_oi,\r\n        dpod,\r\n        dpoi,\r\n        alturaod,\r\n        alturaoi,\r\n        lcmarca,\r\n        lcgod,\r\n        lcgoi,\r\n        diagnostico,\r\n        presbicie,\r\n      } = this.state,\r\n      { data } = this.props,\r\n      hoy = moment(Date.now()),\r\n      registro = moment(created_at),\r\n      toDay = moment(hoy).isSame(registro, \"day\");\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <form className=\"row\">\r\n          <div className=\"col-3 d-print-none\">\r\n            <SearchContact\r\n              contact={contact_id}\r\n              edad={edad}\r\n              status={status || id ? !toDay : true || order_id ? false : true}\r\n              getIdContact={this.getIdContact}\r\n              changePage={this.changePage}\r\n            />\r\n            {contact_id && order_id ? (\r\n              <Chat data={data} table=\"orders\" idRow={order_id} />\r\n            ) : null}\r\n          </div>\r\n          <div className=\"col\">\r\n            <PrintExam\r\n              esferaod={esferaod}\r\n              esferaoi={esferaoi}\r\n              cilindrod={cilindrod}\r\n              cilindroi={cilindroi}\r\n              ejeod={ejeod}\r\n              ejeoi={ejeoi}\r\n              adiciond={adiciond}\r\n              adicioni={adicioni}\r\n              adicion_media_od={adicion_media_od}\r\n              adicion_media_oi={adicion_media_oi}\r\n              dpod={dpod}\r\n              dpoi={dpoi}\r\n              alturaod={alturaod}\r\n              alturaoi={alturaoi}\r\n              lcmarca={lcmarca}\r\n              lcgod={lcgod}\r\n              lcgoi={lcgoi}\r\n              diagnostico={diagnostico}\r\n              presbicie={presbicie}\r\n            />\r\n            <div className=\"card card-info card-outline d-print-none\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title\">\r\n                  <i className=\"fas fa-notes-medical mr-1\"></i>\r\n                  {this.state.id ? \"Examen\" : \"Nuevo examen\"}\r\n                </h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"accordion\" id=\"accordionExample\">\r\n                  {contact_id ? (\r\n                    <React.Fragment>\r\n                      <Generales\r\n                        pc={this.state.pc}\r\n                        tablet={this.state.tablet}\r\n                        movil={this.state.movil}\r\n                        lap={this.state.lap}\r\n                        lap_time={this.state.lap_time}\r\n                        pc_time={this.state.pc_time}\r\n                        tablet_time={this.state.tablet_time}\r\n                        movil_time={this.state.movil_time}\r\n                        cefalea={this.state.cefalea}\r\n                        c_frecuencia={this.state.c_frecuencia}\r\n                        c_intensidad={this.state.c_intensidad}\r\n                        frontal={this.state.frontal}\r\n                        temporal={this.state.temporal}\r\n                        occipital={this.state.occipital}\r\n                        generality={this.state.generality}\r\n                        temporaoi={this.state.temporaoi}\r\n                        temporaod={this.state.temporaod}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Interrogatorios\r\n                        interrogatorio={this.state.interrogatorio}\r\n                        coa={this.state.coa}\r\n                        aopp={this.state.aopp}\r\n                        aopf={this.state.aopf}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <KeraRet\r\n                        keratometriaoi={this.state.keratometriaoi}\r\n                        keratometriaod={this.state.keratometriaod}\r\n                        rsoi={this.state.rsoi}\r\n                        rsod={this.state.rsod}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Diabetes\r\n                        d_time={this.state.d_time}\r\n                        d_media={this.state.d_media}\r\n                        d_test={this.state.d_test}\r\n                        d_fclod={this.state.d_fclod}\r\n                        d_fclod_time={this.state.d_fclod_time}\r\n                        d_fcloi={this.state.d_fcloi}\r\n                        d_fcloi_time={this.state.d_fcloi_time}\r\n                        oftalmoscopia={this.state.oftalmoscopia}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Agudeza\r\n                        cvod={this.state.cvod}\r\n                        cvoi={this.state.cvoi}\r\n                        avslod={this.state.avslod}\r\n                        avsloi={this.state.avsloi}\r\n                        avcgaod={this.state.avcgaod}\r\n                        avcgaoi={this.state.avcgaoi}\r\n                        avfod={this.state.avfod}\r\n                        avfoi={this.state.avfoi}\r\n                        avf2o={this.state.avf2o}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Diagnostico\r\n                        diagnostico={this.state.diagnostico}\r\n                        presbicie={this.state.presbicie}\r\n                        piod={this.state.piod}\r\n                        pioi={this.state.pioi}\r\n                        txoftalmico={this.state.txoftalmico}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"card-header d-print-none\" id=\"heading7\">\r\n                          <h2 className=\"mb-0\">\r\n                            <button\r\n                              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n                              type=\"button\"\r\n                              data-toggle=\"collapse\"\r\n                              data-target=\"#caja7\"\r\n                              aria-expanded=\"false\"\r\n                              aria-controls=\"caja7\"\r\n                            >\r\n                              Graduaci&oacute;n\r\n                            </button>\r\n                          </h2>\r\n                        </div>\r\n                        <div\r\n                          id=\"caja7\"\r\n                          className=\"collapse\"\r\n                          aria-labelledby=\"headingThree\"\r\n                          data-parent=\"#accordionExample\"\r\n                        >\r\n                          <div className=\"card-body p-1\">\r\n                            <div className=\"d-none d-print-block mb-2\">\r\n                              <div className=\"row border\">\r\n                                <div className=\"col-3\">\r\n                                  <label>Diagnostico</label>\r\n                                </div>\r\n                                <div className=\"col\">\r\n                                  <p className=\"card-text\">\r\n                                    {this.state.diagnostico}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            <Graduacion\r\n                              esferaod={esferaod}\r\n                              esferaoi={esferaoi}\r\n                              cilindrod={cilindrod}\r\n                              cilindroi={cilindroi}\r\n                              ejeod={ejeod}\r\n                              ejeoi={ejeoi}\r\n                              adiciond={adiciond}\r\n                              adicioni={adicioni}\r\n                              adicion_media_od={adicion_media_od}\r\n                              adicion_media_oi={adicion_media_oi}\r\n                              dpod={dpod}\r\n                              dpoi={dpoi}\r\n                              alturaod={alturaod}\r\n                              alturaoi={alturaoi}\r\n                              lcmarca={lcmarca}\r\n                              lcgod={lcgod}\r\n                              lcgoi={lcgoi}\r\n                              onChangeInput={this.handleChangeInput}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <Observaciones\r\n                        observaciones={this.state.observaciones}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"card-header d-print-none\" id=\"heading9\">\r\n                          <h2 className=\"mb-0\">\r\n                            <button\r\n                              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n                              type=\"button\"\r\n                              data-toggle=\"collapse\"\r\n                              data-target=\"#caja9\"\r\n                              aria-expanded=\"false\"\r\n                              aria-controls=\"caja9\"\r\n                            >\r\n                              Recomendaciones\r\n                            </button>\r\n                          </h2>\r\n                        </div>\r\n                        <div id=\"caja9\" className=\"collapse p-2\">\r\n                          <div className=\"row\">\r\n                            <div className=\"col\">\r\n                              <Recomendaciones\r\n                                category_id={parseInt(category_id)}\r\n                                esferaod={esferaod}\r\n                                esferaoi={esferaoi}\r\n                                cilindrod={cilindrod}\r\n                                cilindroi={cilindroi}\r\n                                nameCategory=\"category_id\"\r\n                                nameItem=\"item1\"\r\n                                title=\"Recomendacion principal\"\r\n                                data={data}\r\n                                onChangeInput={(obj) => {\r\n                                  if (typeof obj === \"object\") {\r\n                                    this.setState(obj);\r\n                                  }\r\n                                }}\r\n                                update={true}\r\n                              />\r\n                            </div>\r\n                            {category_id ? (\r\n                              <div className=\"col\">\r\n                                <Recomendaciones\r\n                                  category_id={parseInt(category_ii)}\r\n                                  esferaod={esferaod}\r\n                                  esferaoi={esferaoi}\r\n                                  cilindrod={cilindrod}\r\n                                  cilindroi={cilindroi}\r\n                                  nameCategory=\"category_ii\"\r\n                                  nameItem=\"item2\"\r\n                                  title=\"Recomendacion adicional\"\r\n                                  data={data}\r\n                                  onChangeInput={(obj) => {\r\n                                    if (typeof obj === \"object\") {\r\n                                      this.setState(obj);\r\n                                    }\r\n                                  }}\r\n                                  update={true}\r\n                                />\r\n                              </div>\r\n                            ) : null}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </React.Fragment>\r\n                  ) : (\r\n                    <div className=\"card\">\r\n                      <div className=\"card-body text-info\">\r\n                        <i className=\"fas fa-exclamation-triangle mr-2\"></i>\r\n                        <label>Elija primero un paciente</label>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"card-footer text-right\">\r\n                <div className=\"btn-group d-print-none\" role=\"group\">\r\n                  <Link\r\n                    to=\"/consultorio\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={(e) => {\r\n                      console.log(\r\n                        \"[Exams] Eliminando usuario en uso de localStorage\"\r\n                      );\r\n                      localStorage.setItem(\r\n                        \"OrusContactInUse\",\r\n                        JSON.stringify({})\r\n                      );\r\n                      this.changePage(\"/consultorio\");\r\n                    }}\r\n                  >\r\n                    <i\r\n                      className={\r\n                        id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                      }\r\n                    ></i>\r\n                    <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                  </Link>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={this.handleStatus}\r\n                  >\r\n                    <i\r\n                      className={\r\n                        this.state.status\r\n                          ? \"fas fa-lock-open mr-1\"\r\n                          : \"fas fa-lock mr-1\"\r\n                      }\r\n                    ></i>\r\n                    <strong>\r\n                      {this.state.status ? \"Activar\" : \"Terminar\"}\r\n                    </strong>\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-dark\"\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      window.print();\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-print mr-2\"></i>\r\n                    Imprimir\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      contact_id ? \"btn btn-info\" : \"btn btn-info disabled\"\r\n                    }\r\n                    onClick={this.handleSave}\r\n                    disabled={contact_id ? \"\" : \"disabled\"}\r\n                  >\r\n                    <i className=\"fas fa-save mr-1\"></i>\r\n                    <strong>Guardar</strong>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  handleChangeInput = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleStatus = () => {\r\n    this.setState({\r\n      status: !this.state.status,\r\n    });\r\n  };\r\n  getIdContact = (id, edad) => {\r\n    this.setState({\r\n      contact_id: id,\r\n      edad,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { host, token, id, cilindrod, cilindroi, ejeod, ejeoi } = this.state;\r\n\r\n    //Verificar si los datos son validos.\r\n    if ((cilindrod < 0 && !ejeod) || (cilindroi < 0 && !ejeoi)) {\r\n      window.Swal.fire(\"Verificación\", \"El campo CILINDRO esta vacio\", \"error\");\r\n      return false;\r\n    }\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el examen?\"\r\n        : \"¿Esta seguro de crear un nuevo examen?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          let body = this.state,\r\n            //Identificamos la URL y el metodo segun sea el caso (Actualizar o agregar)\r\n            url = id\r\n              ? \"http://\" + host + \"/api/exams/\" + id\r\n              : \"http://\" + host + \"/api/exams\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n          if (!body.category_id) delete body.category_id;\r\n          if (!body.category_ii) delete body.category_ii;\r\n\r\n          //Crear o modificar examen\r\n          console.log(\"Enviando datos del examen a la API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            signal: this.signal,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"[Exams] Examen almacenado correctamente\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Examen actualizado con exito\"\r\n              : \"Examen almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => this.props.history.goBack());\r\n          console.log(\"[Exams] Eliminando usuario en uso de localStorage\");\r\n          localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el examen\", \"error\");\r\n          console.error(\"[Exams] Error al almacenar datos de examen\", data);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getExam = (id) => {\r\n    if (id) {\r\n      //Variables\r\n      let { host, token, load } = this.state;\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      //Realiza la peticion del examen por el id\r\n      console.log(\"Descargando datos del examen\");\r\n      fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.data) {\r\n            console.log(\"Mostrando examenes\");\r\n            this.setState({\r\n              contact_id: data.data.paciente.id,\r\n              edad: data.data.edad,\r\n              id: data.data.id,\r\n              keratometriaoi: data.data.keratometriaoi,\r\n              keratometriaod: data.data.keratometriaod,\r\n              pantalleooi: data.data.pantalleooi,\r\n              pantalleood: data.data.pantalleood,\r\n              interrogatorio: data.data.interrogatorio,\r\n              cefalea: data.data.cefalea,\r\n              c_frecuencia: data.data.c_frecuencia,\r\n              c_intensidad: data.data.c_intensidad,\r\n              frontal: data.data.frontal,\r\n              temporal: data.data.temporal,\r\n              occipital: data.data.occipital,\r\n              generality: data.data.generality,\r\n              temporaoi: data.data.temporaoi,\r\n              temporaod: data.data.temporaod,\r\n              coa: data.data.coa,\r\n              aopp: data.data.aopp,\r\n              aopf: data.data.aopf,\r\n              avsloi: data.data.avsloi,\r\n              avslod: data.data.avslod,\r\n              avcgaoi: data.data.avcgaoi,\r\n              avcgaod: data.data.avcgaod,\r\n              cvoi: data.data.cvoi,\r\n              cvod: data.data.cvod,\r\n              oftalmoscopia: data.data.oftalmoscopia,\r\n              rsoi: data.data.rsoi,\r\n              rsod: data.data.rsod,\r\n              diagnostico: data.data.diagnostico,\r\n              presbicie: data.data.presbicie,\r\n              txoftalmico: data.data.txoftalmico,\r\n              esferaoi: data.data.esferaoi,\r\n              esferaod: data.data.esferaod,\r\n              cilindroi: data.data.cilindroi,\r\n              cilindrod: data.data.cilindrod,\r\n              ejeoi: data.data.ejeoi,\r\n              ejeod: data.data.ejeod,\r\n              adicioni: data.data.adicioni,\r\n              adiciond: data.data.adiciond,\r\n              adicion_media_od: data.data.adicion_media_od,\r\n              adicion_media_oi: data.data.adicion_media_oi,\r\n              dpoi: data.data.dpoi,\r\n              dpod: data.data.dpod,\r\n              avfoi: data.data.avfoi,\r\n              avfod: data.data.avfod,\r\n              avf2o: data.data.avf2o,\r\n              lcmarca: data.data.lcmarca,\r\n              lcgoi: data.data.lcgoi,\r\n              lcgod: data.data.lcgod,\r\n              txoptico: data.data.txoptico,\r\n              alturaoi: data.data.alturaoi,\r\n              alturaod: data.data.alturaod,\r\n              pioi: data.data.pioi,\r\n              piod: data.data.piod,\r\n              observaciones: data.data.observaciones,\r\n              pc: data.data.pc,\r\n              tablet: data.data.tablet,\r\n              movil: data.data.movil,\r\n              lap: data.data.lap,\r\n              lap_time: data.data.lap_time,\r\n              pc_time: data.data.pc_time,\r\n              tablet_time: data.data.tablet_time,\r\n              movil_time: data.data.movil_time,\r\n              d_time: data.data.d_time,\r\n              d_media: data.data.d_media,\r\n              d_test: data.data.d_test,\r\n              d_fclod: data.data.d_fclod,\r\n              d_fcloi: data.data.d_fcloi,\r\n              d_fclod_time: data.data.d_fclod_time,\r\n              d_fcloi_time: data.data.d_fcloi_time,\r\n              category_id: data.data.category_id ? data.data.category_id : 0,\r\n              category_ii: data.data.category_ii ? data.data.category_ii : 0,\r\n              item1: data.data.item1,\r\n              item2: data.data.item2,\r\n              order_id: data.data.order_id ? data.data.order_id : 0,\r\n              status: data.data.estado,\r\n              created_at: data.data.created_at,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\"Error\", \"Al descargar el examen\", \"error\");\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, status } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: paciente o # de orden\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Estado</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"status\"\r\n                    value={status}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">En proceso</option>\r\n                    <option value=\"1\">Laboratorio</option>\r\n                    <option value=\"2\">Bicelación</option>\r\n                    <option value=\"3\">Entregado</option>\r\n                    <option value=\"4\">Garantia</option>\r\n                    <option value=\"5\">Baja</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"status\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Contacts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusOrder\"));\r\n    this.state = {\r\n      pedidos: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"desc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      status: sdd ? sdd.status : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getPedidos();\r\n    console.log(\"[Orders] Eliminando datos de contacto en uso\");\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n    localStorage.setItem(\r\n      \"OrusOrder\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        status: this.state.status,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando pedidos\");\r\n      this.getPedidos();\r\n      localStorage.setItem(\r\n        \"OrusOrder\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          status: this.state.status,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { pedidos, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Folio\", type: \"id\", filter: true },\r\n        { name: \"Caja\" },\r\n        { name: \"Paciente\", type: \"contact_id\", filter: true },\r\n        { name: \"Detalles\" },\r\n        { name: \"Estado\" },\r\n        { name: \"Nota\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-warning card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-warning\">\r\n            <i className=\"fas fa-clipboard-list mr-1\"></i>\r\n            Listado de pedidos\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/pedidos/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={(e) => {\r\n                this.changePage(\"/pedidos/registro\");\r\n              }}\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={this.state.search}\r\n              status={this.state.status}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={pedidos.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(pedidos.data).length ? (\r\n                pedidos.data.map((pedido) => {\r\n                  return (\r\n                    <tr key={pedido.id}>\r\n                      <td>\r\n                        <span className=\"badge badge-warning text-capitalize\">\r\n                          {pedido.id}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {pedido.estado === 2 ? (\r\n                          <span>\r\n                            {pedido.caja ? pedido.caja : \"Sin asignar\"}\r\n                          </span>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        <Link to={\"/pedidos/registro/\" + pedido.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {pedido.paciente.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {pedido.estado === 1 ? (\r\n                          <div>\r\n                            <span className=\"text-danger mr-1\">\r\n                              {pedido.laboratorio\r\n                                ? pedido.laboratorio.nombre\r\n                                : \"Sin asignar\"}\r\n                            </span>\r\n                            {pedido.laboratorio ? \"/ \" + pedido.folio_lab : \"\"}\r\n                          </div>\r\n                        ) : pedido.estado === 2 ? (\r\n                          <small>\r\n                            {pedido.observaciones\r\n                              ? pedido.observaciones\r\n                              : \"sin observaciones\"}\r\n                          </small>\r\n                        ) : !pedido.estado ? (\r\n                          <small>\r\n                            {pedido.examen\r\n                              ? pedido.examen.estado === \"Terminado\"\r\n                                ? \"Examen completado\"\r\n                                : \"Examen no realizado\"\r\n                              : \"Examen no asignado\"}\r\n                          </small>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td>{this.setStatusString(pedido.estado)}</td>\r\n                      <td className=\"text-right\">\r\n                        {pedido.nota ? (\r\n                          <Link to={\"/notas/registro/\" + pedido.nota.id}>\r\n                            <span className=\"badge badge-success\">\r\n                              {pedido.nota.id}\r\n                            </span>\r\n                          </Link>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td>{moment(pedido.updated_at).fromNow()}</td>\r\n                      <td>{moment(pedido.created_at).format(\"ll\")}</td>\r\n                      <Actions\r\n                        id={pedido.id}\r\n                        item={pedido.paciente.nombre}\r\n                        delete={\r\n                          !pedido.estado && !pedido.nota\r\n                            ? this.handleDelete\r\n                            : null\r\n                        }\r\n                        edit={\"/pedidos/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/pedidos/registro\"\r\n            className=\"btn btn-outline-warning\"\r\n            onClick={(e) => {\r\n              this.changePage(\"/pedidos/registro\");\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            <strong>Nuevo pedido</strong>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  setStatusString = (status) => {\r\n    switch (status) {\r\n      case 0:\r\n        return <span className=\"text-warning text-uppercase\">En proceso</span>;\r\n      case 1:\r\n        return <span className=\"text-info text-uppercase\">En laboratorio</span>;\r\n      case 2:\r\n        return <span className=\"text-primary text-uppercase\">Bicelación</span>;\r\n      case 3:\r\n        return <span className=\"text-success text-uppercase\">Entregado</span>;\r\n      case 4:\r\n        return <span className=\"text-info text-uppercase\">Garantia</span>;\r\n      default:\r\n        return <span className=\"text-secondary text-uppercase\">Baja</span>;\r\n    }\r\n  };\r\n  handleFilter = () => {\r\n    this.setState({\r\n      load: true,\r\n      page: 1,\r\n    });\r\n  };\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (id) => {\r\n    this.props.page(id);\r\n  };\r\n  handleDelete = (id, name) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el pedido de \" + name.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de order por API\");\r\n          return fetch(\"http://\" + host + \"/api/orders/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Pedido eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Pedido eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getPedidos());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getPedidos() {\r\n    //Variables en localStorage\r\n    let {\r\n        search,\r\n        status,\r\n        page,\r\n        order,\r\n        orderby,\r\n        host,\r\n        token,\r\n        load,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/orders\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      estado = status ? \"&status=\" + status : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de los contactos\r\n    console.log(\"Descargando ventas de API\");\r\n    fetch(url + pagina + ordenar + buscar + estado, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"[Order] Almacenando pedidos en state\");\r\n          this.setState({\r\n            pedidos: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"[Order] Error en los datos de pedido \\n\", data);\r\n          window.Swal.fire(\r\n            \"Error\",\r\n            \"al almacenar los datos de pedido\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\r\n          \"[Order] Error con el servidor al descargar pedidos \\n\",\r\n          e\r\n        );\r\n        window.Swal.fire(\"Servidor\", \"Verifique la conexion\", \"error\");\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Items extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      store_items_id: 0,\r\n      session: \"\",\r\n      cantidad: 1,\r\n      precio: 0,\r\n      subtotal: 0,\r\n      inStorage: 0,\r\n      producto: \"\",\r\n      out: 0,\r\n      descripcion: \"\",\r\n      itemNew: false,\r\n      itemsDb: [],\r\n      load: false,\r\n    };\r\n    this.total = 0;\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      session: this.props.session,\r\n    });\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (this.state.itemNew && this.state.producto.length === 0) {\r\n      this.inputItem.focus();\r\n    }\r\n    /*\r\n    if (this.state.itemNew && this.state.cant === 1 && this.state.id) {\r\n      this.inputCant.focus();\r\n    }\r\n    */\r\n  }\r\n\r\n  render() {\r\n    let { itemNew, itemsDb, load } = this.state;\r\n    let { items } = this.props;\r\n    this.total = 0;\r\n\r\n    return (\r\n      <table className=\"table table-sm table-striped  mt-2\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\" style={{ width: 64 }}>\r\n              Cantidad\r\n            </th>\r\n            <th scope=\"col\">Descripcion</th>\r\n            <th scope=\"col\" className=\"text-center\" style={{ width: 120 }}>\r\n              Precio\r\n            </th>\r\n            <th scope=\"col\" className=\"text-center\" style={{ width: 120 }}>\r\n              Subtotal\r\n            </th>\r\n            <th scope=\"col\" style={{ width: 60 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {itemNew ? (\r\n            <React.Fragment>\r\n              <tr>\r\n                <td>\r\n                  <input\r\n                    className={\r\n                      this.state.store_items_id\r\n                        ? \"form-control\"\r\n                        : \"form-control disabled\"\r\n                    }\r\n                    disabled={this.state.store_items_id ? false : true}\r\n                    type=\"number\"\r\n                    name=\"cantidad\"\r\n                    ref={(input) => {\r\n                      this.inputCant = input;\r\n                    }}\r\n                    value={this.state.cantidad}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    className={\r\n                      !this.state.store_items_id\r\n                        ? \"form-control\"\r\n                        : \"form-control disabled\"\r\n                    }\r\n                    disabled={!this.state.store_items_id ? false : true}\r\n                    type=\"text\"\r\n                    name=\"producto\"\r\n                    autoComplete=\"off\"\r\n                    ref={(input) => {\r\n                      this.inputItem = input;\r\n                    }}\r\n                    value={this.state.producto}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  {this.state.store_items_id ? (\r\n                    <input\r\n                      className=\"form-control\"\r\n                      type=\"text\"\r\n                      name=\"descripcion\"\r\n                      placeholder=\"Detalles\"\r\n                      value={this.state.descripcion}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  ) : null}\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    className={\r\n                      this.state.store_items_id\r\n                        ? \"form-control\"\r\n                        : \"form-control disabled\"\r\n                    }\r\n                    disabled={this.state.store_items_id ? false : true}\r\n                    type=\"number\"\r\n                    name=\"precio\"\r\n                    value={this.state.precio}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    className=\"form-control disabled\"\r\n                    type=\"number\"\r\n                    name=\"subtotal\"\r\n                    value={this.state.subtotal}\r\n                    readOnly={true}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    className=\"btn btn-outline-dark btn-sm\"\r\n                    onClick={this.addItem}\r\n                  >\r\n                    <i className=\"fas fa-save\"></i>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"5\">\r\n                    <div className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : itemsDb && itemsDb.length ? (\r\n                <tr>\r\n                  <td colSpan=\"5\">\r\n                    <div className=\"list-group\">\r\n                      {itemsDb.map((db) => {\r\n                        return (\r\n                          <a\r\n                            className=\"list-group-item list-group-item-action\"\r\n                            href={\"#\" + db.codigo}\r\n                            key={db.id}\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              this.handelClickItemDb(\r\n                                db.id,\r\n                                db.producto,\r\n                                db.precio,\r\n                                db.cantidades\r\n                              );\r\n                            }}\r\n                          >\r\n                            <div\r\n                              className=\"text-truncate\"\r\n                              style={{ maxWidth: \"90%\" }}\r\n                            >\r\n                              <span className=\"text-primary mr-2 text-uppercase\">\r\n                                ({db.codigo})\r\n                              </span>\r\n                              <label className=\"text-dark text-capitalize ml-2 mr-2\">\r\n                                {db.producto}\r\n                              </label>\r\n                              {db.marca ? (\r\n                                <span className=\"text-muted text-capitalize\">\r\n                                  / {db.marca.marca}\r\n                                </span>\r\n                              ) : null}\r\n                              {db.proveedor ? (\r\n                                <span className=\"text-muted text-capitaliz\">\r\n                                  / {db.proveedor.nombre}\r\n                                </span>\r\n                              ) : null}\r\n                            </div>\r\n                          </a>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : null}\r\n            </React.Fragment>\r\n          ) : null}\r\n          {items.length ? (\r\n            items.map((item, index) => {\r\n              this.total += item.subtotal * 1;\r\n              return (\r\n                <tr key={index}>\r\n                  <td className=\"text-right\">{item.cantidad}</td>\r\n                  <td>\r\n                    <span\r\n                      className={\r\n                        !item.inStorage\r\n                          ? \"badge badge-warning\"\r\n                          : \"badge badge-primary\"\r\n                      }\r\n                    >\r\n                      {item.producto}\r\n                      {item.descripcion ? \" (\" + item.descripcion + \")\" : null}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"text-right\">$ {item.precio.toFixed(2)}</td>\r\n                  <td className=\"text-right\">$ {item.subtotal.toFixed(2)}</td>\r\n                  <td className=\"d-print-none\">\r\n                    <button\r\n                      className={\r\n                        this.props.status\r\n                          ? \"btn btn-outline-light btn-sm disabled\"\r\n                          : \"btn btn-outline-light btn-sm\"\r\n                      }\r\n                      disabled={this.props.status ? true : false}\r\n                      onClick={(e) => {\r\n                        if (!this.props.status) this.deleteItem(index);\r\n                      }}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })\r\n          ) : (\r\n            <tr>\r\n              <td className=\"text-center\" colSpan=\"5\">\r\n                No hay articulos cargados\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n        <tfoot>\r\n          <tr>\r\n            <td className=\"text-right\" colSpan=\"2\">\r\n              {!this.props.status && !this.props.addCancel ? (\r\n                <button\r\n                  className={\r\n                    this.props.status\r\n                      ? \"btn btn-outline-warning btn-sm disabled\"\r\n                      : itemNew\r\n                      ? \"btn btn-outline-dark btn-sm\"\r\n                      : \"btn btn-outline-primary btn-sm\"\r\n                  }\r\n                  disabled={this.props.status ? true : false}\r\n                  onClick={this.handleNewItem}\r\n                >\r\n                  <i className={itemNew ? \"fas fa-undo\" : \"fas fa-plus\"}></i>\r\n                </button>\r\n              ) : null}\r\n            </td>\r\n            <th scope=\"row\" className=\"text-right\">\r\n              Subtotal\r\n            </th>\r\n            <td className=\"text-right\">$ {this.total.toFixed(2)}</td>\r\n            <td></td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    );\r\n  }\r\n\r\n  handelClickItemDb = (id, producto, precio, cant) => {\r\n    if (id) {\r\n      this.setState({\r\n        id: 0,\r\n        store_items_id: id,\r\n        producto,\r\n        precio,\r\n        subtotal: this.state.cantidad * precio,\r\n        //Verificando que exitan los productos en almacen\r\n        inStorage: cant >= this.state.cantidad ? 1 : 0,\r\n        out: cant,\r\n        itemsDb: [],\r\n      });\r\n    }\r\n  };\r\n  deleteItem = (id) => {\r\n    let { items } = this.props;\r\n    items.splice(id, 1);\r\n    this.props.ChangeInput(\"items\", items);\r\n  };\r\n  catchInputs = (e) => {\r\n    let { name, value, type } = e.target,\r\n      subtotal = 0;\r\n    if (name === \"cantidad\") {\r\n      value = value * 1;\r\n      subtotal = this.state.precio * value;\r\n    } else if (name === \"precio\") {\r\n      value = value * 1;\r\n      subtotal = this.state.cantidad * value;\r\n    } else if (name === \"descripcion\") {\r\n      subtotal = this.state.subtotal;\r\n    }\r\n    if (type === \"number\") {\r\n      value = value * 1;\r\n    }\r\n    if (name === \"producto\" && value.length > 3 && !this.state.store_items_id) {\r\n      let { load } = this.state;\r\n\r\n      //Revisamos que ya este cargando\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      if (this.timeSave) clearTimeout(this.timeSave);\r\n      this.timeSave = setTimeout(() => {\r\n        //Variables en localStorage\r\n        const varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n          url = \"http://\" + varLocalStorage.host + \"/api/store\",\r\n          search = \"?search=\" + value.replace(\"+\", \"%2b\"),\r\n          itemsPage = \"&itemsPage=6\";\r\n        //Realiza la peticion del usuario seun el id\r\n        console.log(\"Descargando datos del item\");\r\n        fetch(url + search + itemsPage, {\r\n          method: \"GET\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            Authorization: \"Bearer \" + varLocalStorage.token,\r\n          },\r\n        })\r\n          .then((response) => {\r\n            if (!response.ok) {\r\n              throw new Error(response.statusText);\r\n            }\r\n            return response.json();\r\n          })\r\n          .then((data) => {\r\n            if (data.data && data.data.length) {\r\n              console.log(\"Almacenando datos del item del DB\");\r\n              this.setState({\r\n                itemsDb: data.data,\r\n              });\r\n            } else if (data.message) {\r\n              console.log(\r\n                \"No hay articulos en la buscada de items\",\r\n                data.message\r\n              );\r\n            }\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          })\r\n          .catch((e) => {\r\n            console.error(e);\r\n            window.Swal.fire(\r\n              \"Fallo de conexion\",\r\n              \"Verifique la conexion al servidor\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          });\r\n      }, 1500);\r\n    }\r\n\r\n    this.setState({\r\n      [name]: value,\r\n      subtotal,\r\n    });\r\n  };\r\n  addItem = (e) => {\r\n    e.preventDefault();\r\n    let items = this.props.items,\r\n      item = this.state;\r\n\r\n    item.inStorage = item.out >= item.cantidad ? 1 : 0;\r\n    item.out = item.out >= item.cantidad ? 0 : item.cantidad - item.out;\r\n\r\n    delete item.itemNew;\r\n    delete item.itemsDb;\r\n    delete item.items;\r\n    items.push(item);\r\n\r\n    this.setState({\r\n      id: 0,\r\n      store_items_id: 0,\r\n      cantidad: 1,\r\n      producto: \"\",\r\n      precio: 0,\r\n      total: 0,\r\n      inStorage: 0,\r\n      out: 0,\r\n      itemNew: false,\r\n    });\r\n    this.props.ChangeInput(\"items\", items);\r\n  };\r\n  handleNewItem = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      itemNew: !this.state.itemNew,\r\n      store_items_id: 0,\r\n      cantidad: 1,\r\n      producto: \"\",\r\n      precio: 0,\r\n      subtotal: 0,\r\n      inStorage: 0,\r\n      out: 0,\r\n      itemsDb: [],\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class labOrder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      supplies: [],\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getContacts();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label>Laboratorio</label>\r\n            <select\r\n              className={\r\n                this.props.status > 1 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 1 ? true : false}\r\n              name=\"lab_id\"\r\n              value={this.props.lab_id}\r\n              onChange={this.changeInput}\r\n            >\r\n              <option value=\"0\">Seleccione un proveedor</option>\r\n              {this.state.supplies.length\r\n                ? this.state.supplies.map((s) => {\r\n                    return (\r\n                      <option key={s.id} value={s.id}>\r\n                        {s.nombre}\r\n                      </option>\r\n                    );\r\n                  })\r\n                : \"\"}\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label>Folio</label>\r\n            <input\r\n              type=\"text\"\r\n              className={\r\n                this.props.status > 1 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 1 ? true : false}\r\n              name=\"npedidolab\"\r\n              value={this.props.npedidolab}\r\n              onChange={this.changeInput}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n  getContacts = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n      type = \"&type=1&business=1\",\r\n      //search = word ? `&search=${word}` : \"\",\r\n      page = \"?page=1\";\r\n    console.log(\"Descargando proveedores de la API\");\r\n    //Realiza la peticion de los contactos\r\n    fetch(url + page + type, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenado proveedores\");\r\n          this.setState({\r\n            supplies: data.data,\r\n          });\r\n        }\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class statusOrder extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label htmlFor=\"lab\">Estado</label>\r\n            <select\r\n              className=\"form-control\"\r\n              name=\"status\"\r\n              value={this.props.status}\r\n              onChange={this.changeInput}\r\n            >\r\n              <option value=\"0\">En proceso</option>\r\n              <option value=\"1\">Laboratorio</option>\r\n              <option value=\"2\">Bicelación</option>\r\n              <option value=\"3\">Entregado</option>\r\n              <option value=\"4\">Garantia</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    value = value * 1;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class bicelacionOrder extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label htmlFor=\"lab\">Caja</label>\r\n            <input\r\n              type=\"text\"\r\n              className={\r\n                this.props.status > 2 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 2 ? true : false}\r\n              name=\"ncaja\"\r\n              value={this.props.ncaja ? this.props.ncaja : \"\"}\r\n              onChange={this.changeInput}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label>Observaciones</label>\r\n            <textarea\r\n              name=\"observaciones\"\r\n              className={\r\n                this.props.status > 2 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 2 ? true : false}\r\n              value={this.props.observaciones ? this.props.observaciones : \"\"}\r\n              onChange={this.changeInput}\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    if (name === \"caja\") value = value * 1;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class garantiaOrder extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label htmlFor=\"lab\">Garantia</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    value = value * 1;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport SearchContact from \"../Contacts/searchContactCard\";\r\nimport Items from \"./itemsOrder\";\r\nimport ListExam from \"../Exam/listsExams\";\r\nimport LabOrder from \"./labOrder\";\r\nimport Status from \"./statusOrder\";\r\nimport Bicelacion from \"./bicelacionOrder\";\r\nimport Garantia from \"./garantiaOrder\";\r\nimport Chat from \"../Layouts/messenger\";\r\n\r\nexport default class OrderAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Recogemos valores de registro previo\r\n    let contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    console.log(\r\n      \"[Order] Contacto en uso: \",\r\n      contact && contact.id ? \"Si\" : \"No\"\r\n    );\r\n\r\n    this.state = {\r\n      id: 0,\r\n      session:\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(10),\r\n      observaciones: \"\",\r\n      lab_id: 0,\r\n      npedidolab: \"\",\r\n      ncaja: 0,\r\n      items: [],\r\n      contact_id: contact && contact.id ? contact.id : 0,\r\n      usuario: \"\",\r\n      edad: 0,\r\n      exam_id: contact && contact.exam_id ? contact.exam_id : 0,\r\n      exam: {},\r\n      status: 0,\r\n      date: Date.now(),\r\n      load: true,\r\n      nota: 0,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    const id = this.props.match.params.id,\r\n      { exam_id, exam } = this.state;\r\n\r\n    if (id) {\r\n      this.getOrder(id);\r\n    } else {\r\n      if (exam_id && !exam.id) {\r\n        this.getExamById(exam_id);\r\n      }\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n        contact_id,\r\n        id,\r\n        load,\r\n        items,\r\n        nota,\r\n        status,\r\n        edad,\r\n        exam_id,\r\n        exam,\r\n      } = this.state,\r\n      { data } = this.props;\r\n    let showTabActive = true;\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-2\">\r\n          <SearchContact\r\n            contact={contact_id}\r\n            edad={parseInt(this.state.edad)}\r\n            status={nota ? true : status}\r\n            getIdContact={this.getIdContact}\r\n            changePage={this.changePage}\r\n          />\r\n          {contact_id ? (\r\n            <div className=\"card card-warning card-outline d-print-none mt-4\">\r\n              <div className=\"card-body\">\r\n                <Status status={status} ChangeInput={this.handleChangeInput} />\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"card card-warning card-outline\">\r\n            <div className=\"card-body\">\r\n              {contact_id && !load ? (\r\n                <React.Fragment>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-2\">\r\n                      <div className=\"border border-warning rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-warning mx-2\">\r\n                          Pedido\r\n                        </span>\r\n                        <strong className=\"text-primary\">\r\n                          {this.state.id ? this.state.id : \"Nuevo\"}\r\n                        </strong>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                      <div className=\"border border-warning rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-warning mx-2\">\r\n                          Creador\r\n                        </span>\r\n                        <strong>\r\n                          {this.state.usuario\r\n                            ? this.state.usuario\r\n                            : this.props.data.name}\r\n                        </strong>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-2\">\r\n                      <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-success mx-2\">\r\n                          Venta\r\n                        </span>\r\n                        <strong>\r\n                          {this.state.nota ? (\r\n                            <Link\r\n                              to={\"/notas/registro/\" + this.state.nota}\r\n                              className=\"text-dark\"\r\n                              onClick={(e) => {\r\n                                this.changePage(\"/notas/registro\");\r\n                              }}\r\n                            >\r\n                              {this.state.nota}\r\n                            </Link>\r\n                          ) : (\r\n                            \"--\"\r\n                          )}\r\n                        </strong>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                      <div className=\"border border-warning rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-warning mx-2\">\r\n                          Fecha\r\n                        </span>\r\n                        <strong>{moment(this.state.date).format(\"ll\")}</strong>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <ul className=\"nav nav-tabs mt-4\" id=\"myTab\" role=\"tablist\">\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          (!status || status === 3) && showTabActive\r\n                            ? \"nav-link active\"\r\n                            : \"nav-link\"\r\n                        }\r\n                        href=\"#pedido\"\r\n                        data-toggle=\"tab\"\r\n                      >\r\n                        Nota\r\n                      </a>\r\n                      {(showTabActive = !status || status === 3 ? false : true)}\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a className=\"nav-link\" data-toggle=\"tab\" href=\"#exam\">\r\n                        Examen\r\n                      </a>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          status === 1 && showTabActive\r\n                            ? \"nav-link active\"\r\n                            : !status\r\n                            ? \"nav-link disabled\"\r\n                            : \"nav-link\"\r\n                        }\r\n                        data-toggle=\"tab\"\r\n                        href=\"#lab\"\r\n                      >\r\n                        Laboratorio\r\n                      </a>\r\n                      {(showTabActive = status === 1 ? false : true)}\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          status === 2\r\n                            ? \"nav-link active\"\r\n                            : !status || status === 1\r\n                            ? \"nav-link disabled\"\r\n                            : \"nav-link\"\r\n                        }\r\n                        data-toggle=\"tab\"\r\n                        href=\"#bicelacion\"\r\n                      >\r\n                        Bicelación\r\n                      </a>\r\n                      {(showTabActive = status === 2 ? false : true)}\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          status === 4 ? \"nav-link active\" : \"nav-link disabled\"\r\n                        }\r\n                        data-toggle=\"tab\"\r\n                        href=\"#garantia\"\r\n                      >\r\n                        Garantia\r\n                      </a>\r\n                      {(showTabActive = status === 4 ? false : true)}\r\n                    </li>\r\n                  </ul>\r\n                  <div className=\"tab-content\" id=\"myTabContent\">\r\n                    <div\r\n                      className={\r\n                        !status || status === 3\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"pedido\"\r\n                    >\r\n                      <Items\r\n                        items={this.state.items}\r\n                        status={status}\r\n                        session={this.state.session}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div className=\"tab-pane fade pt-4\" id=\"exam\">\r\n                      <ListExam\r\n                        paciente={contact_id}\r\n                        edad={edad}\r\n                        exam={\r\n                          exam_id && exam.id && exam_id === exam.id ? exam : {}\r\n                        }\r\n                        page={this.changePage}\r\n                        datos={data}\r\n                        select={true}\r\n                        status={this.state.status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className={\r\n                        status === 1\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"lab\"\r\n                    >\r\n                      <LabOrder\r\n                        lab_id={this.state.lab_id ? this.state.lab_id : 0}\r\n                        npedidolab={\r\n                          this.state.npedidolab ? this.state.npedidolab : \"\"\r\n                        }\r\n                        status={status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className={\r\n                        status === 2\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"bicelacion\"\r\n                    >\r\n                      <Bicelacion\r\n                        ncaja={this.state.ncaja}\r\n                        observaciones={this.state.observaciones}\r\n                        status={this.state.status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className={\r\n                        status === 4\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"garantia\"\r\n                    >\r\n                      <Garantia\r\n                        status={status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </React.Fragment>\r\n              ) : this.state.load ? (\r\n                <div className=\"text-center\">\r\n                  <div className=\"spinner-border text-primary\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"alert alert-light\">\r\n                  <h4 className=\"alert-heading\">Nuevo pedido</h4>\r\n                  <p>\r\n                    <i className=\"fas fa-user mr-1\"></i> Primero seleccione al\r\n                    paciente!\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"card-footer d-print-none text-right\">\r\n              <div className=\"btn-group\" role=\"group\">\r\n                <Link\r\n                  to=\"/pedidos\"\r\n                  className=\"btn btn-dark\"\r\n                  onClick={(e) => this.changePage(\"/pedidos\")}\r\n                >\r\n                  <i\r\n                    className={\r\n                      id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                    }\r\n                  ></i>\r\n                  <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                </Link>\r\n                <button\r\n                  className=\"btn btn-dark\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    window.print();\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-print mr-2\"></i>\r\n                  Imprimir\r\n                </button>\r\n                <button\r\n                  className={\r\n                    contact_id && items.length\r\n                      ? \"btn btn-warning\"\r\n                      : \"btn btn-warning disabled\"\r\n                  }\r\n                  onClick={this.handleSave}\r\n                  disabled={contact_id && items.length ? false : true}\r\n                >\r\n                  <i className=\"fas fa-save mr-1\"></i>\r\n                  <strong>Guardar</strong>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {contact_id && id ? (\r\n          <div className=\"col-2 d-print-none\">\r\n            <Chat data={data} table=\"orders\" idRow={id} />\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getExamById = (id) => {\r\n    //host y token\r\n    const { host, token } = this.state;\r\n    //Realiza la peticion del examen por el id\r\n    console.log(\"Descargando examen\");\r\n    fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenando examenes\");\r\n          this.setState({\r\n            exam: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar el examen\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n  handleChangeInput = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  getIdContact = (contact_id, edad) => {\r\n    console.log(\"Edad change: \", contact_id, edad);\r\n    this.setState({\r\n      contact_id,\r\n      edad,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    console.log(\"[Order][form] Eliminando datos en contacto en uso\");\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n    this.props.page(e);\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { id } = this.state;\r\n\r\n    //Verificamos campos validos\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el pedido?\"\r\n        : \"¿Esta seguro de crear un nuevo pedido?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { host, token } = this.state,\r\n            url = id\r\n              ? \"http://\" + host + \"/api/orders/\" + id\r\n              : \"http://\" + host + \"/api/orders\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n          let body = {},\r\n            items = [];\r\n\r\n          this.state.items.map((item) => {\r\n            items.push({\r\n              cant: item.cantidad,\r\n              price: item.precio,\r\n              subtotal: item.subtotal,\r\n              inStorage: item.inStorage,\r\n              session: item.session,\r\n              out: item.out,\r\n              descripcion: item.descripcion,\r\n              store_items_id: item.store_items_id,\r\n            });\r\n            return false;\r\n          });\r\n          body = {\r\n            session: this.state.session,\r\n            observaciones: this.state.observaciones,\r\n            npedidolab: this.state.npedidolab,\r\n            ncaja: this.state.ncaja,\r\n            contact_id: this.state.contact_id,\r\n            status: this.state.status,\r\n            items: JSON.stringify(items),\r\n          };\r\n          if (this.state.exam_id) body.exam_id = this.state.exam_id;\r\n          if (this.state.lab_id) body.lab_id = this.state.lab_id;\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"[Order] Pedido almacenado con exito\");\r\n          console.log(\"[Order] Eliminando datos de contacto en uso\");\r\n          localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Pedido actualizado con exito\"\r\n              : \"Pedido almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.setState({\r\n              id: data.data.id,\r\n              nota: data.data.nota.id,\r\n            });\r\n            this.props.history.push(`/pedidos/registro/${data.data.id}`);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el pedido\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getOrder = (id) => {\r\n    if (id > 0) {\r\n      //Variables en state\r\n      let { host, token } = this.state;\r\n      //Realiza la peticion del pedido\r\n      console.log(\"Solicitando datos de pedido a la API\");\r\n      fetch(\"http://\" + host + \"/api/orders/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            console.log(\"[Order] Mostrando datos del pedido\");\r\n            this.setState({\r\n              id,\r\n              session: data.data.session,\r\n              observaciones: data.data.observaciones,\r\n              lab_id: data.data.laboratorio ? data.data.laboratorio.id : 0,\r\n              npedidolab: data.data.folio_lab,\r\n              ncaja: data.data.caja,\r\n              items: data.data.productos,\r\n              contact_id: data.data.paciente.id,\r\n              status: data.data.estado,\r\n              usuario: data.data.created,\r\n              exam_id: data.data.examen !== null ? data.data.examen.id : 0,\r\n              exam: data.data.examen !== null ? data.data.examen : {},\r\n              date: data.data.created_at,\r\n              nota: data.data.nota ? data.data.nota.id : 0,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\r\n              \"Error\",\r\n              \"Error al descargar los pedidos\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, type, date } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: paciente o # de venta\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Estado</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"type\"\r\n                    value={type}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Adeudos</option>\r\n                    <option value=\"1\">Pagados</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Fecha</label>\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"date\"\r\n                    name=\"date\"\r\n                    className=\"form-control\"\r\n                    value={date}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search || type\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"type\", \"\");\r\n    this.props.changeFilters(\"date\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Contacts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusSales\"));\r\n    this.state = {\r\n      ventas: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"desc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      type: sdd ? sdd.type : \"\",\r\n      date: sdd ? sdd.date : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getPedidos();\r\n    console.log(\"[Sales] Eliminando datos de contacto en uso\");\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n    localStorage.setItem(\r\n      \"OrusSales\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        type: this.state.type,\r\n        date: this.state.date,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando pedidos\");\r\n      this.getPedidos();\r\n      localStorage.setItem(\r\n        \"OrusSales\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          type: this.state.type,\r\n          date: this.state.date,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { ventas, load, search, type, date } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Folio\", type: \"id\", filter: true },\r\n        { name: \"Pedido\", type: \"pedido\", filter: false },\r\n        { name: \"Cliente\" },\r\n        { name: \"Total\", type: \"total\", filter: true },\r\n        { name: \"Abonado\" },\r\n        { name: \"Por pagar\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-success\">\r\n            <i className=\"fas fa-cash-register mr-1\"></i>\r\n            Listado de ventas\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/notas/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={(e) => {\r\n                this.changePage(\"/notas/registro\");\r\n              }}\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={search}\r\n              type={type}\r\n              date={date}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={ventas.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center p-4\">\r\n                    <div\r\n                      className=\"spinner-border text-primary mr-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                    <span className=\"font-weight-light font-italic\">\r\n                      Espere cargando datos de la venta\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(ventas.data).length ? (\r\n                ventas.data.map((venta) => {\r\n                  return (\r\n                    <tr key={venta.id}>\r\n                      <td>\r\n                        <span className=\"badge badge-success text-capitalize\">\r\n                          {venta.id}\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        {venta.pedido ? (\r\n                          <span className=\"badge badge-warning text-capitalize\">\r\n                            {venta.pedido}\r\n                          </span>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        <Link to={\"/notas/registro/\" + venta.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {venta.cliente.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-right\">$ {venta.total.toFixed(2)}</td>\r\n                      <td className=\"text-right\">\r\n                        $ {venta.pagado.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        {venta.total - venta.pagado <= 0 ? (\r\n                          <label className=\"text-success\">\r\n                            <i className=\"fas fa-check\"></i>\r\n                          </label>\r\n                        ) : (\r\n                          \"$ \" + (venta.total - venta.pagado).toFixed(2)\r\n                        )}\r\n                      </td>\r\n                      <td>{moment(venta.updated_at).fromNow()}</td>\r\n                      <td>{moment(venta.created_at).format(\"ll\")}</td>\r\n                      <Actions\r\n                        id={venta.id}\r\n                        item={venta.cliente.nombre}\r\n                        delete={venta.pagado ? null : this.handleDelete}\r\n                        edit={\"/notas/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/notas/registro\"\r\n            className=\"btn btn-outline-success\"\r\n            onClick={(e) => {\r\n              this.changePage(\"/notas/registro\");\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            <strong>Nueva venta</strong>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleFilter = () => {\r\n    this.setState({\r\n      load: true,\r\n      page: 1,\r\n    });\r\n  };\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (id) => {\r\n    this.props.page(id);\r\n  };\r\n  handleDelete = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar la venta de \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de venta por API\");\r\n          return fetch(\"http://\" + host + \"/api/sales/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Venta eliminada\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Venta eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getPedidos());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getPedidos = () => {\r\n    //Variables en localStorage\r\n    let {\r\n        host,\r\n        token,\r\n        order,\r\n        orderby,\r\n        search,\r\n        page,\r\n        type,\r\n        date,\r\n        load,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/sales\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\",\r\n      tipo = type === \"\" ? \"\" : \"&type=\" + type,\r\n      fecha = date === \"\" ? \"\" : \"&date=\" + date;\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de ventas\r\n    console.log(\"Descargando ventas de API\");\r\n    fetch(url + pagina + ordenar + buscar + tipo + fecha, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n          console.log(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(\"Descargando ventas\");\r\n        this.setState({\r\n          ventas: data,\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class AddAbono extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      metodopago: 1,\r\n      total: 0,\r\n      bank_id: 0,\r\n      auth: \"\",\r\n      details: \"\",\r\n      listBank: [],\r\n      token: props.data.token,\r\n      host: props.data.host,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentDidMount() {\r\n    this.getBaks();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (this.state.listBank === undefined || !this.state.listBank.length) {\r\n      this.getBaks();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { listBank, metodopago, total, bank_id, auth, details } = this.state;\r\n\r\n    return (\r\n      <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"abonos\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">Abono</h5>\r\n              <button\r\n                type=\"button\"\r\n                className=\"close\"\r\n                data-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n\r\n            <form className=\"modal-body\">\r\n              <div className=\"row mb-2\">\r\n                <div className=\"col\">\r\n                  <label>Fecha</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control-plaintext\"\r\n                    readOnly={true}\r\n                    value={moment().format(\"L\")}\r\n                  />\r\n                </div>\r\n                <div className=\"col\">\r\n                  <label>Usuario</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control-plaintext\"\r\n                    readOnly={true}\r\n                    value={this.props.user}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row mb-2\">\r\n                <div className=\"col\">\r\n                  <label>Metodo de pago</label>\r\n                  <select\r\n                    name=\"metodopago\"\r\n                    className=\"custom-select\"\r\n                    value={metodopago}\r\n                    onChange={this.onChangeValue}\r\n                  >\r\n                    <option value=\"1\">Efectivo</option>\r\n                    <option value=\"2\">Tarjeta de debito</option>\r\n                    <option value=\"3\">Tarjeta de credito</option>\r\n                    <option value=\"4\">La marina</option>\r\n                    <option value=\"5\">Cheque</option>\r\n                    <option value=\"6\">Transferencia</option>\r\n                    <option value=\"0\">Otro</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"col\">\r\n                  <label>Cantidad</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max={this.props.pay}\r\n                    className=\"form-control text-right\"\r\n                    name=\"total\"\r\n                    value={total ? total : \"\"}\r\n                    onChange={this.onChangeValue}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {metodopago !== 1 ? (\r\n                <div className=\"row mb-2\">\r\n                  <div className=\"col\">\r\n                    {metodopago &&\r\n                    metodopago !== 4 &&\r\n                    listBank &&\r\n                    listBank.length ? (\r\n                      <React.Fragment>\r\n                        <label>Banco</label>\r\n                        <select\r\n                          name=\"bank_id\"\r\n                          className=\"custom-select text-uppercase\"\r\n                          value={bank_id}\r\n                          onChange={this.onChangeValue}\r\n                        >\r\n                          <option value=\"0\">Seleccione un banco</option>\r\n                          {listBank.map((bank) => {\r\n                            return (\r\n                              <option\r\n                                key={bank.id}\r\n                                value={bank.id}\r\n                                className=\"text-uppercase\"\r\n                              >\r\n                                {bank.name}\r\n                              </option>\r\n                            );\r\n                          })}\r\n                        </select>\r\n                      </React.Fragment>\r\n                    ) : !metodopago ? (\r\n                      <React.Fragment>\r\n                        <label>Espesifique</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          name=\"details\"\r\n                          className=\"form-control\"\r\n                          value={details}\r\n                          onChange={this.onChangeValue}\r\n                        />\r\n                      </React.Fragment>\r\n                    ) : (\r\n                      <h4>LA MARINA</h4>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"col\">\r\n                    <label>N. Autorización</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"auth\"\r\n                      className=\"form-control\"\r\n                      value={auth}\r\n                      onChange={this.onChangeValue}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n            </form>\r\n\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-dark\"\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-success\"\r\n                onClick={this.handlePay}\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Abonar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getBaks = () => {\r\n    const { host, token } = this.state,\r\n      type = \"?name=bank\";\r\n\r\n    //Peticion ajax de listado de bancos\r\n    console.log(\"[Add pay]Descargando listado de bancos\");\r\n    fetch(\"http://\" + host + \"/api/config\" + type, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        if (data.meta && data.meta.total) {\r\n          console.log(\"[Add pay] Listado de bancos descargado\");\r\n          this.setState({\r\n            listBank: data.data,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"[Orus system] \", e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  handlePay = (e) => {\r\n    e.preventDefault();\r\n\r\n    //Verificamos campos validos\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de realizar el abono?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Guardar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let body = {\r\n              metodopago: this.state.metodopago,\r\n              total: this.state.total,\r\n              bank_id: this.state.bank_id,\r\n              auth: this.state.auth,\r\n              details: this.state.details,\r\n              //Agregamos parametros de identificación\r\n              sale_id: this.props.saleId,\r\n              contact_id: this.props.contactId,\r\n              order_id: this.props.order,\r\n            },\r\n            ls = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n            url = \"http://\" + ls.host + \"/api/payments\";\r\n\r\n          //Si la variable banco no esta definida la eliminamos no puede ir en cero\r\n          if (!body[\"bank_id\"]) delete body[\"bank_id\"];\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del pago a API para almacenar\");\r\n          return fetch(url, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText + \"(\" + back.message + \")\");\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"[abonodAdd] Abono almacenado\");\r\n          this.props.handleChange(this.state.total);\r\n          this.setState({\r\n            metodopago: 1,\r\n            total: 0,\r\n            banco: \"\",\r\n            auth: \"\",\r\n          });\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Abono almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el abono\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  onChangeValue = (e) => {\r\n    let { name, value, type } = e.target;\r\n    if (name === \"total\") {\r\n      value = parseInt(value);\r\n      if (value > this.props.pay) value = this.props.pay;\r\n      else if (value < 0) value = 0;\r\n    }\r\n    if (name === \"metodopago\" || type === \"number\") value = parseInt(value);\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class printPay extends Component {\r\n  render() {\r\n    const { id, client } = this.props;\r\n\r\n    return (\r\n      <div className=\"d-none d-print-block\" style={{ width: 340 }} id={id}>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card m-0\">\r\n              <div className=\"card-body\">\r\n                <h1 className=\"text-center\">\r\n                  <center>\r\n                    <strong>Óptica Madero</strong>\r\n                  </center>\r\n                </h1>\r\n                <h3>\r\n                  <em>\r\n                    Julio Cesar Cardenas Martinez\r\n                    <br />\r\n                    Tel: 312 312 5353\r\n                    <br />\r\n                    Av. Tecnologico 38-A, Vistahermosa, Colima, Col.\r\n                  </em>\r\n                </h3>\r\n                <hr />\r\n                <h4 className=\"text-uppercase\">\r\n                  {client && client.nombre ? client.nombre.toUpperCase() : null}\r\n                  <br />\r\n                  {client.telefonos\r\n                    ? client.telefonos[0]\r\n                      ? client.telefonos[0]\r\n                      : client.telefonos[2]\r\n                    : \"--\"}\r\n                </h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <center>\r\n              <h2 className=\"text-center\">Abono</h2>\r\n            </center>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport AddAbono from \"./abonoAdd\";\r\nimport Print from \"./print_pay\";\r\n\r\nexport default class ListAbonos extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      abonos: [],\r\n      total: 0,\r\n      load: true,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentDidMount() {\r\n    this.getPayments();\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { abonos, total, load } = this.state;\r\n    const {\r\n      id,\r\n      date,\r\n      contact,\r\n      order,\r\n      pay,\r\n      user,\r\n      sale,\r\n      cliente,\r\n      data,\r\n    } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">Fecha</th>\r\n              <th scope=\"col\">Metodo de pago</th>\r\n              <th scope=\"col\">Cantidad</th>\r\n              <th scope=\"col\">Recibio</th>\r\n              <th scope=\"col\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {abonos.length && !load ? (\r\n              <React.Fragment>\r\n                {abonos.map((abono) => {\r\n                  return (\r\n                    <tr key={abono.id}>\r\n                      <td>{moment(abono.created_at).format(\"L\")}</td>\r\n                      <td>\r\n                        {this.SetMethodPayment(abono.metodo)}\r\n                        {abono.metodo !== 1 ? (\r\n                          <span className=\"ml-4\">\r\n                            {abono.banco ? abono.banco : \"--\"} /{\" \"}\r\n                            {abono.Autorizacion ? abono.Autorizacion : \"--\"}\r\n                          </span>\r\n                        ) : null}\r\n                      </td>\r\n                      <td className=\"text-right\">$ {abono.total.toFixed(2)}</td>\r\n                      <td>{abono.created_user}</td>\r\n                      <td className=\"text-right\">\r\n                        {moment(new Date()).isSame(abono.created_at, \"day\") ? (\r\n                          <button\r\n                            className=\"btn btn-black btn-sm\"\r\n                            onClick={() => {\r\n                              this.delete(abono.id);\r\n                            }}\r\n                          >\r\n                            <i className=\"fas fa-trash\"></i>\r\n                          </button>\r\n                        ) : null}\r\n\r\n                        <button\r\n                          className=\"btn btn-outline-light btn-sm\"\r\n                          onClick={() => {\r\n                            this.print(\r\n                              abono.total,\r\n                              moment(abono.created_at).format(\"L\"),\r\n                              abono.id\r\n                            );\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-print\"></i>\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </React.Fragment>\r\n            ) : load ? (\r\n              <tr>\r\n                <td colSpan=\"5\" className=\"text-center p-4\">\r\n                  <div\r\n                    className=\"spinner-border text-primary mr-4\"\r\n                    role=\"status\"\r\n                  >\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                  <span className=\"font-weight-light font-italic\">\r\n                    Espere cargando datos de la venta\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"5\" className=\"text-center\">\r\n                  No hay abonos registrados\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <th scope=\"row\" colSpan=\"3\" className=\"text-right\">\r\n                {this.props.pay ? (\r\n                  <a\r\n                    href=\"#abonos\"\r\n                    className={\r\n                      this.props.pay\r\n                        ? \"btn btn-outline-success btn-sm mr-2\"\r\n                        : \"btn btn-outline-success btn-sm mr-2 disabled\"\r\n                    }\r\n                    data-toggle=\"modal\"\r\n                    data-target=\"#abonos\"\r\n                    aria-disabled={this.props.pay ? false : true}\r\n                  >\r\n                    <i className=\"fas fa-money-bill-wave-alt\"></i>\r\n                  </a>\r\n                ) : null}\r\n                Total: $ {total.toFixed(2)}\r\n              </th>\r\n              <td colSpan=\"2\"></td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n        <AddAbono\r\n          pay={pay}\r\n          user={user}\r\n          saleId={sale}\r\n          contactId={contact}\r\n          order={order}\r\n          data={data}\r\n          handleChange={this.handleChange}\r\n          handleLoad={this.handleLoad}\r\n        />\r\n        <Print\r\n          folio={id}\r\n          date={date}\r\n          contact={contact}\r\n          client={cliente}\r\n          id=\"print_pay\"\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  delete = (id) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el abono?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          let ls = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de venta por API\");\r\n          return fetch(\"http://\" + ls.host + \"/api/payments/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Abono eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Abono eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getPayments());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  print = (total, date, id) => {\r\n    let content = document.getElementById(\"print_pay\"),\r\n      pri = document.getElementById(\"ifmcontentstoprint\").contentWindow;\r\n\r\n    pri.document.open();\r\n    pri.document.write(content.innerHTML);\r\n    pri.document.write(\"<fieldset><h3>\");\r\n    pri.document.write(\"Fecha: \" + date);\r\n    pri.document.write(\"<br/>Folio: \" + id);\r\n    pri.document.write(\"<br/>Monto: $ \" + total.toFixed(2));\r\n    pri.document.write(\"</h3></fieldset>\");\r\n    pri.document.close();\r\n    pri.focus();\r\n    pri.print();\r\n  };\r\n  handleLoad = (load) => {\r\n    this.setState({\r\n      load,\r\n    });\r\n  };\r\n  handleChange = (total) => {\r\n    this.setState({\r\n      total: this.state.total + total,\r\n    });\r\n    this.getPayments();\r\n  };\r\n  SetMethodPayment = (status) => {\r\n    switch (status) {\r\n      case 1:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">Efectivo</span>\r\n        );\r\n      case 2:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">\r\n            Tarjeta debito\r\n          </span>\r\n        );\r\n      case 3:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">\r\n            Tarjeta Credito\r\n          </span>\r\n        );\r\n      case 4:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">La marina</span>\r\n        );\r\n      case 5:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">Cheque</span>\r\n        );\r\n      case 6:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">\r\n            Transferencia\r\n          </span>\r\n        );\r\n      default:\r\n        return <span className=\"badge badge-success text-uppercase\">Otro</span>;\r\n    }\r\n  };\r\n  getPayments = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      order = \"&order=desc\",\r\n      sale = \"?sale=\" + this.props.sale;\r\n\r\n    //Mandamos señal de procesamiento\r\n    if (!this.state.load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Realiza la peticion del usuario seun el id\r\n    console.log(\"Descargando datos de los pagos\");\r\n    fetch(\"http://\" + varLocalStorage.host + \"/api/payments\" + sale + order, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n          console.log(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.meta && data.meta.total) {\r\n          console.log(\"[Payments] Almacenando abonos\");\r\n          let total = 0;\r\n          for (var i = 0; i < data.data.length; i++) {\r\n            total += data.data[i].total;\r\n          }\r\n          this.props.handleChange(\"pagado\", total * 1);\r\n          this.setState({\r\n            abonos: data.data,\r\n            total,\r\n            load: false,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class printSale extends Component {\r\n  render() {\r\n    const {\r\n      items,\r\n      descuento,\r\n      total,\r\n      saldo,\r\n      abonado,\r\n      folio,\r\n      date,\r\n      id,\r\n    } = this.props;\r\n    let totalItems = 0,\r\n      client = this.props.cliente;\r\n\r\n    return (\r\n      <div className=\"d-none d-print-block\" style={{ width: 340 }} id={id}>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card m-0\">\r\n              <div className=\"card-body\">\r\n                <h4\r\n                  className=\"text-right\"\r\n                  style={{ fontSize: 28, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <i>\r\n                    Folio: <strong>{folio}</strong>\r\n                  </i>\r\n                </h4>\r\n                <h6\r\n                  className=\"text-right mb-2\"\r\n                  style={{ fontSize: 18, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <strong>{moment(date).format(\"LL\")}</strong>\r\n                </h6>\r\n                <h2\r\n                  className=\"text-center\"\r\n                  style={{ fontSize: 54, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <center>\r\n                    <strong>Óptica Madero</strong>\r\n                  </center>\r\n                </h2>\r\n                <h4\r\n                  className=\"text-center mb-4\"\r\n                  style={{ fontSize: 22, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <em>\r\n                    Julio Cesar Cardenas Martinez\r\n                    <br />\r\n                    Tel: 312 312 5353\r\n                    <br />\r\n                    Av. Tecnologico 38-A, Vistahermosa, Colima, Col.\r\n                  </em>\r\n                </h4>\r\n                <h4\r\n                  className=\"text-uppercase text-center mb-1\"\r\n                  style={{ fontSize: 20, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  {client && client.nombre\r\n                    ? client.nombre\r\n                    : \"Venta de mostrador\"}\r\n                  <br />\r\n                  <strong>\r\n                    <em style={{ fontSize: 24 }}>\r\n                      {client && client.telefonos\r\n                        ? client.telefonos.t_movil\r\n                          ? client.telefonos.t_movil\r\n                          : client.telefonos.t_casa\r\n                          ? client.telefonos.t_casa\r\n                          : client.telefonos.t_oficina\r\n                        : \"--\"}\r\n                    </em>\r\n                  </strong>\r\n                </h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col text-center\">\r\n            <h2 style={{ fontSize: 36, fontFamily: \"sans-serif\" }}>\r\n              <strong>Pedido</strong>\r\n            </h2>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                    Cant\r\n                  </th>\r\n                  <th style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                    Descripcion\r\n                  </th>\r\n                  <th style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                    Total\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {items.map((item, index) => {\r\n                  const total = parseFloat(item.cantidad * item.precio);\r\n                  totalItems += total;\r\n                  return (\r\n                    <tr key={index} className=\"text-capitalize\">\r\n                      <td style={{ fontSize: 22, fontFamily: \"sans-serif\" }}>\r\n                        {item.cantidad}\r\n                      </td>\r\n                      <td style={{ fontSize: 22, fontFamily: \"sans-serif\" }}>\r\n                        {item.producto}\r\n                      </td>\r\n                      <td\r\n                        className=\"text-right\"\r\n                        style={{ fontSize: 24, fontFamily: \"sans-serif\" }}\r\n                      >\r\n                        {total.toFixed(2)}\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td className=\"text-right\" colSpan=\"3\">\r\n                    {descuento ? (\r\n                      <React.Fragment>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Subtotal: <label>$ {totalItems.toFixed(2)}</label>\r\n                        </h4>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Descuento: <label>$ {descuento.toFixed(2)}</label>\r\n                        </h4>\r\n                      </React.Fragment>\r\n                    ) : null}\r\n                    <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                      Total: <label>$ {total.toFixed(2)}</label>\r\n                    </h4>\r\n                    {abonado ? (\r\n                      <React.Fragment>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Abonado: <label>$ {abonado.toFixed(2)}</label>\r\n                        </h4>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Saldo: <label>$ {saldo.toFixed(2)}</label>\r\n                        </h4>\r\n                      </React.Fragment>\r\n                    ) : null}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-center\">\r\n          <em style={{ fontSize: 22, fontFamily: \"sans-serif\" }}>\r\n            Armazones usados, viejos y/o resecos son responsabilidad del cliente\r\n          </em>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getContact = (id) => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    //Realiza busqueda de contacto\r\n    fetch(\"http://\" + varLocalStorage.host + \"/api/contacts/\" + id, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(\"Descargando contacto: data\", data);\r\n        this.setState({\r\n          dataContact: data.data,\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class edoCuenta extends Component {\r\n  render() {\r\n    const { pay, descuento, subtotal, total, pagado } = this.props;\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title mb-4\">\r\n            <i className=\"fas fa-shield-alt mr-2\"></i>\r\n            Estado de cuenta\r\n            {!pay ? (\r\n              <span className=\"badge badge-success ml-2\">Cuenta liquidada</span>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </h5>\r\n\r\n          <div className=\"card-text form-group row\">\r\n            <label className=\"col-6\">Descuento</label>\r\n            <div className=\"col\">\r\n              <input\r\n                className={\r\n                  pagado\r\n                    ? \"form-control text-right text-success disabled\"\r\n                    : \"form-control text-right text-success\"\r\n                }\r\n                type=\"number\"\r\n                name=\"descuento\"\r\n                min=\"0\"\r\n                max={subtotal - descuento}\r\n                readOnly={pay && !pagado ? false : true}\r\n                value={descuento ? parseInt(descuento) : \"\"}\r\n                onChange={this.catchInputs}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"card-text form-group row\">\r\n            <label className=\"col-6\">Total</label>\r\n            <div className=\"col\">\r\n              <input\r\n                className=\"form-control text-right text-success\"\r\n                type=\"number\"\r\n                name=\"total\"\r\n                value={total.toFixed(2)}\r\n                onChange={this.catchInputs}\r\n                readOnly={true}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"card-text row\">\r\n            <label className=\"col-6 p-2\">Abonado</label>\r\n            <h3 className=\"col text-success p-2 text-right\">\r\n              $ {pagado.toFixed(2)}\r\n            </h3>\r\n          </div>\r\n          <div className=\"card-text row\">\r\n            <label className=\"col-6 p-2\">Saldo</label>\r\n            <h3 className=\"col text-success p-2 text-right\">\r\n              $ {pay.toFixed(2)}\r\n            </h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    this.props.catchInputs(e);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport SearchContact from \"../Contacts/searchContactCard\";\r\nimport Items from \"../Order/itemsOrder\";\r\nimport Abonos from \"./abonos\";\r\nimport Print from \"./print_sale\";\r\nimport EdoCuenta from \"./edoCuenta\";\r\nimport Chat from \"../Layouts/messenger\";\r\n\r\nexport default class SaleAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\")),\r\n      id = this.props.match.params.id,\r\n      contact_id = id ? 0 : 2;\r\n    console.log(\r\n      \"[Sales] Contacto en uso: \",\r\n      contact && contact.id ? \"Si\" : \"No\"\r\n    );\r\n\r\n    this.state = {\r\n      id: id,\r\n      session:\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(10),\r\n      descuento: 0,\r\n      subtotal: 0,\r\n      total: 0,\r\n      items: [],\r\n      contact_id: contact && contact.id ? contact.id : contact_id,\r\n      cliente: {},\r\n      order_id: 0,\r\n      status: 0,\r\n      usuario: \"\",\r\n      date: Date.now(),\r\n      load: true,\r\n      pagado: 0,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.total = 0;\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    let { id } = this.state;\r\n    this.getSales(id);\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n  }\r\n\r\n  render() {\r\n    let {\r\n        contact_id,\r\n        cliente,\r\n        subtotal,\r\n        descuento,\r\n        pagado,\r\n        items,\r\n        status,\r\n        id,\r\n        session,\r\n        load,\r\n        date,\r\n        order_id,\r\n      } = this.state,\r\n      pay = subtotal - (descuento + pagado),\r\n      { data } = this.props,\r\n      chat = order_id ? (\r\n        <Chat data={data} table=\"orders\" idRow={order_id} pagado={pagado} />\r\n      ) : (\r\n        <Chat data={data} table=\"sales\" idRow={id} pagado={pagado} />\r\n      );\r\n\r\n    this.total = subtotal - descuento;\r\n    pay = pay > 0 ? pay : 0;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"row d-print-none\">\r\n          <div className=\"col-3\">\r\n            <SearchContact\r\n              contact={contact_id}\r\n              status={status}\r\n              getIdContact={this.getIdContact}\r\n              changePage={this.changePage}\r\n            />\r\n\r\n            {contact_id && items.length ? (\r\n              <EdoCuenta\r\n                pay={pay}\r\n                descuento={descuento}\r\n                subtotal={subtotal}\r\n                total={this.total}\r\n                pagado={pagado}\r\n                catchInputs={this.catchInputs}\r\n              />\r\n            ) : null}\r\n          </div>\r\n          <div className=\"col\">\r\n            <div className=\"card card-success card-outline\">\r\n              <div className=\"card-body\">\r\n                {contact_id && !load ? (\r\n                  <React.Fragment>\r\n                    <div className=\"row mb-4\">\r\n                      <div className=\"col-2\">\r\n                        <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                          <span className=\"badge badge-pill badge-success mx-2\">\r\n                            Venta\r\n                          </span>\r\n                          <strong>{id ? id : \"Nuevo\"}</strong>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col\">\r\n                        <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                          <span className=\"badge badge-pill badge-success mx-2\">\r\n                            Creador\r\n                          </span>\r\n                          <strong>\r\n                            {this.state.usuario\r\n                              ? this.state.usuario\r\n                              : this.props.data.name}\r\n                          </strong>\r\n                        </div>\r\n                      </div>\r\n                      {order_id ? (\r\n                        <div className=\"col-2\">\r\n                          <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                            <span className=\"badge badge-pill badge-warning mx-2\">\r\n                              Pedido\r\n                            </span>\r\n                            <strong>\r\n                              {order_id ? (\r\n                                <Link\r\n                                  to={\"/pedidos/registro/\" + order_id}\r\n                                  onClick={(e) => {\r\n                                    this.changePage(\"/pedidos/registro\");\r\n                                  }}\r\n                                >\r\n                                  {order_id}\r\n                                </Link>\r\n                              ) : null}\r\n                            </strong>\r\n                          </div>\r\n                        </div>\r\n                      ) : null}\r\n                      <div className=\"col\">\r\n                        <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                          <span className=\"badge badge-pill badge-success mx-2\">\r\n                            Fecha\r\n                          </span>\r\n                          <strong>{moment(date).format(\"ll\")}</strong>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <Items\r\n                      items={items}\r\n                      status={status && this.total === pagado ? true : false}\r\n                      session={session}\r\n                      ChangeInput={this.handleChangeInput}\r\n                      addCancel={order_id ? true : false}\r\n                    />\r\n                  </React.Fragment>\r\n                ) : load ? (\r\n                  <div className=\"text-center p-4\">\r\n                    <div\r\n                      className=\"spinner-border text-primary mr-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                    <span className=\"font-weight-light font-italic\">\r\n                      Espere cargando datos de la venta\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"alert alert-light\">\r\n                    <h4 className=\"alert-heading\">Nueva nota</h4>\r\n                    <p>\r\n                      <i className=\"fas fa-user mr-1\"></i> Primero seleccione al\r\n                      cliente!\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"card-footer text-right\">\r\n                <div className=\"btn-group\" role=\"group\">\r\n                  <Link\r\n                    to=\"/notas\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={(e) => {\r\n                      this.changePage(\"/notas\");\r\n                    }}\r\n                  >\r\n                    <i\r\n                      className={\r\n                        id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                      }\r\n                    ></i>\r\n                    <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                  </Link>\r\n                  <button\r\n                    className={\r\n                      contact_id && items.length\r\n                        ? \"btn btn-dark\"\r\n                        : \"btn btn-dark disabled\"\r\n                    }\r\n                    onClick={(e) => {\r\n                      window.print();\r\n                    }}\r\n                    disabled={contact_id && items.length ? false : true}\r\n                  >\r\n                    <i className=\"fas fa-print mr-2\"></i>\r\n                    <strong>Imprimir</strong>\r\n                  </button>\r\n                  <button\r\n                    className={\r\n                      contact_id && items.length && pay\r\n                        ? \"btn btn-success\"\r\n                        : \"btn btn-success disabled\"\r\n                    }\r\n                    onClick={this.handleSave}\r\n                    disabled={contact_id && items.length && pay ? false : true}\r\n                  >\r\n                    <i className=\"fas fa-save mr-2\"></i>\r\n                    <strong>Guardar</strong>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {contact_id && id ? (\r\n              <div className=\"card card-success card-outline\">\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title mb-4\">\r\n                    <i className=\"fas fa-money-bill mr-2\"></i>\r\n                    Ultimos Abonos\r\n                  </h5>\r\n                  <Abonos\r\n                    abonos={parseInt(pagado)}\r\n                    sale={parseInt(id)}\r\n                    contact={contact_id}\r\n                    cliente={cliente}\r\n                    pay={parseInt(pay)}\r\n                    order={parseInt(order_id)}\r\n                    data={data}\r\n                    user={this.props.data.name}\r\n                    handleChange={this.handleChangeInput}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          {id && contact_id ? (\r\n            <div className=\"col-3 d-print-none\">{chat}</div>\r\n          ) : null}\r\n        </div>\r\n        <Print\r\n          id=\"print_sale\"\r\n          folio={order_id ? \"P-\" + order_id : \"V-\" + id}\r\n          date={date}\r\n          items={items}\r\n          descuento={descuento}\r\n          total={this.total}\r\n          saldo={pay}\r\n          abonado={pagado}\r\n          contact={contact_id}\r\n          cliente={cliente}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  handleChangeInput = (key, value) => {\r\n    let subtotal = 0;\r\n    if (key === \"items\") {\r\n      for (var i = 0; i < value.length; i++) {\r\n        subtotal += value[i].cantidad * value[i].precio;\r\n      }\r\n    } else {\r\n      subtotal = this.state.subtotal;\r\n    }\r\n    this.setState({\r\n      [key]: value,\r\n      subtotal,\r\n    });\r\n  };\r\n  catchInputs = (e) => {\r\n    let { name, value, type } = e.target;\r\n    if (type === \"number\") value = value * 1;\r\n    if (name === \"descuento\") {\r\n      if (value >= this.state.subtotal - this.state.descuento) {\r\n        value = this.state.subtotal - 1;\r\n      }\r\n    }\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getIdContact = (contact_id, edad) => {\r\n    this.setState({\r\n      contact_id,\r\n      edad,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { id } = this.state;\r\n\r\n    //Verificamos campos validos\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar la venta?\"\r\n        : \"¿Esta seguro de crear una nueva venta?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          let { host, token } = this.state,\r\n            url = id\r\n              ? \"http://\" + host + \"/api/sales/\" + id\r\n              : \"http://\" + host + \"/api/sales\",\r\n            method = id ? \"PUT\" : \"POST\",\r\n            body = {},\r\n            items = [];\r\n\r\n          this.state.items.map((item) => {\r\n            items.push({\r\n              cant: item.cantidad,\r\n              price: item.precio,\r\n              subtotal: item.subtotal,\r\n              inStorage: item.inStorage,\r\n              out: item.out,\r\n              session: item.session,\r\n              store_items_id: item.store_items_id,\r\n              descripcion: item.descripcion,\r\n            });\r\n            return false;\r\n          });\r\n          body = {\r\n            session: this.state.session,\r\n            descuento: this.state.descuento,\r\n            subtotal: this.state.subtotal,\r\n            total: this.state.subtotal - this.state.descuento,\r\n            contact_id: this.state.contact_id,\r\n            order_id: this.state.order_id ? this.state.order_id : \"\",\r\n            pagado: this.state.pagado,\r\n            items: JSON.stringify(items),\r\n          };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Venta almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Venta actualizada con exito\"\r\n              : \"Venta almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.setState({\r\n              id: data.data.id,\r\n              //order_id: data.data.pedido,\r\n            });\r\n            this.props.history.push(`/notas/registro/${data.data.id}`);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la venta\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getSales = (id) => {\r\n    if (id > 0) {\r\n      //Variables en state\r\n      let { host, token } = this.state;\r\n      //Realiza la peticion del pedido\r\n      console.log(\"Solicitando datos de pedido a la API\");\r\n      fetch(\"http://\" + host + \"/api/sales/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            const { rol } = this.props.data;\r\n            console.log(\"Mostrando datos del pedido\");\r\n            this.setState({\r\n              id: data.data.id,\r\n              session: data.data.session\r\n                ? data.data.session\r\n                : this.state.session,\r\n              items: data.data.productos,\r\n              descuento: data.data.descuento,\r\n              subtotal: data.data.subtotal,\r\n              total: data.data.total,\r\n              contact_id: data.data.cliente.id,\r\n              cliente: data.data.cliente,\r\n              usuario: data.data.created,\r\n              date: data.data.created_at,\r\n              status: !rol ? 0 : 1,\r\n              order_id: data.data.pedido,\r\n              pagado: data.data.pagado,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\"Error\", data.message, \"error\");\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class ReportPaymentsDetails extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      rol: props.data.rol,\r\n      token: props.data.token,\r\n      payments: [],\r\n      meta: {},\r\n      page: 1,\r\n      load: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getSaleDay();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (\r\n      props.date !== this.props.date ||\r\n      props.user !== this.props.user ||\r\n      state.page !== this.state.page\r\n    ) {\r\n      console.log(\"[reportPaymentsDetails] Recarga datos\");\r\n      this.getSaleDay();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data } = this.props;\r\n    const { payments, meta, page, load } = this.state;\r\n\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-success\">\r\n            {data.rol\r\n              ? \"Mis pagos del dia [Detallado]\"\r\n              : \"Pagos del dia [Detallado]\"}\r\n          </h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <table className=\"table table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>Metodo</th>\r\n                <th>Cliente</th>\r\n                <th>Nota</th>\r\n                <th>Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"4\" className=\"text-center p-4\">\r\n                    <div\r\n                      className=\"spinner-border text-primary mr-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                    <span className=\"font-weight-light font-italic\">\r\n                      Espere cargando datos de pagos\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ) : payments.length ? (\r\n                payments.map((pay) => {\r\n                  return (\r\n                    <tr key={pay.id}>\r\n                      <th className=\"text-uppercase\">{pay.metodoname}</th>\r\n                      <td className=\"text-capitalize\">\r\n                        {pay.sale.cliente.nombre}\r\n                      </td>\r\n                      <td>\r\n                        <span\r\n                          className=\"badge badge-primary\"\r\n                          alt={\"Cobrado por: \" + pay.created_user}\r\n                          title={\"Cobrado por: \" + pay.created_user}\r\n                        >\r\n                          {pay.sale.id}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-right\">$ {pay.total.toFixed(2)}</td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"4\" className=\"text-center\">\r\n                    <h6 className=\"text-warning\">\r\n                      <i className=\"fas fa-info mr-2\"></i>\r\n                      No hay datos para este dia\r\n                    </h6>\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {meta.total ? (\r\n          <div className=\"card-footer\">\r\n            {meta.current_page === 1 ? (\r\n              <a href=\"#next\" onClick={(e) => e.preventDefault()}>\r\n                <i className=\"fas fa-step-backward text-dark\"></i>\r\n              </a>\r\n            ) : (\r\n              <a\r\n                href=\"#next\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.setState({\r\n                    page: page - 1,\r\n                  });\r\n                }}\r\n              >\r\n                <i className=\"fas fa-step-backward\"></i>\r\n              </a>\r\n            )}\r\n            {\" \" + page + \" / \" + meta.last_page + \" \"}\r\n            {meta.current_page === meta.last_page ? (\r\n              <a href=\"#next\" onClick={(e) => e.preventDefault()}>\r\n                <i className=\"fas fa-step-forward text-dark\"></i>\r\n              </a>\r\n            ) : (\r\n              <a\r\n                href=\"#next\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.setState({\r\n                    page: page + 1,\r\n                  });\r\n                }}\r\n              >\r\n                <i className=\"fas fa-step-forward\"></i>\r\n              </a>\r\n            )}\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getSaleDay = () => {\r\n    //Variables en localStorage\r\n    let { host, token, page } = this.state,\r\n      { date, user } = this.props,\r\n      url = \"http://\" + host + \"/api/payments\",\r\n      saleDay = \"?date=\" + date,\r\n      pagina = page > 0 ? \"&page=\" + page : \"&page=1\",\r\n      itemsShow = \"&itemsPage=10\",\r\n      saleUser = user ? \"&user=\" + user : \"\";\r\n\r\n    if (token && host) {\r\n      //Realiza la peticion del pedido\r\n      console.log(\"[ReportPaymentsDetails] Solicitando datos a la API\");\r\n      this.setState({\r\n        load: true,\r\n      });\r\n      fetch(url + saleDay + saleUser + itemsShow + pagina, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            console.log(res);\r\n            throw new Error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then(async (data) => {\r\n          if (!data.message) {\r\n            console.log(\r\n              \"[ReportPayments] Almacenando datos de la venta del dia\"\r\n            );\r\n            if (data.data) {\r\n              this.setState({\r\n                payments: data.data,\r\n                meta: data.meta,\r\n                load: false,\r\n              });\r\n            }\r\n          } else {\r\n            throw new Error(data.message);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error de procesamiento, intentelo mas tarde\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"Ok\",\r\n          });\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class ReportPay extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      rol: props.data.rol,\r\n      token: props.data.token,\r\n      total: 0,\r\n      efectivo: 0,\r\n    };\r\n    this.char = null;\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getSaleDay();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.date !== this.props.date || props.user !== this.props.user) {\r\n      console.log(\"[reportPays] Recarga datos de char\");\r\n      this.getSaleDay();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { total, efectivo, rol } = this.state;\r\n    const { data } = this.props;\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-success\">\r\n            {data.rol\r\n              ? \"Mis ventas del dia por metodo de pago\"\r\n              : \"Ventas del dia por metodo de pago\"}\r\n          </h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <canvas id=\"donutChart\"></canvas>\r\n          <p>\r\n            {!rol ? (\r\n              <React.Fragment>\r\n                Venta: <strong>$ {total.toFixed(2)}</strong>\r\n                <br />\r\n              </React.Fragment>\r\n            ) : null}\r\n            Efectivo: <strong>$ {efectivo.toFixed(2)}</strong>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    if (name === \"user\") value = value * 1;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getSaleDay = () => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state,\r\n      { date, user } = this.props,\r\n      url = \"http://\" + host + \"/api/saleday\",\r\n      saleDay = \"?date=\" + date,\r\n      saleUser = user ? \"&user=\" + user : \"\";\r\n\r\n    if (token && host) {\r\n      //Realiza la peticion del pedido\r\n      console.log(\"[ReportPay] Solicitando datos a la API\");\r\n      fetch(url + saleDay + saleUser, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Ups!\\n Hubo un error al descargar las ventas\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Ok\",\r\n            });\r\n            console.log(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then(async (data) => {\r\n          var donutChartCanvas = window\r\n              .$(\"#donutChart\")\r\n              .get(0)\r\n              .getContext(\"2d\"),\r\n            donutOptions = {\r\n              maintainAspectRatio: true,\r\n              responsive: true,\r\n            },\r\n            labels = [],\r\n            values = [],\r\n            total = 0,\r\n            efectivo = 0,\r\n            donutData = {};\r\n          if (this.char) this.char.destroy();\r\n\r\n          if (!data.message) {\r\n            console.log(\"[ReportPay] Almacenando datos de la venta del dia\");\r\n            if (data && data.length) {\r\n              await data.map((mp) => {\r\n                labels.push(this.SetMethodPayment(mp.metodopago));\r\n                values.push(mp.total.toFixed(2));\r\n                if (mp.metodopago === 1) {\r\n                  this.props.changeState(\"ventas\", mp.total);\r\n                  efectivo = mp.total;\r\n                }\r\n                total += mp.total;\r\n                return null;\r\n              });\r\n            } else {\r\n              labels = [\"No hay datos\"];\r\n              values = [100];\r\n            }\r\n\r\n            this.setState({\r\n              total,\r\n              efectivo,\r\n            });\r\n          } else {\r\n            console.error(\r\n              \"[ORUS] Error al cargar la venta del dia\",\r\n              data.message\r\n            );\r\n            labels = [\"No hay datos\"];\r\n            values = [100];\r\n          }\r\n          donutData = {\r\n            labels: labels,\r\n            datasets: [\r\n              {\r\n                data: values,\r\n                backgroundColor: [\r\n                  \"#f56954\",\r\n                  \"#00a65a\",\r\n                  \"#f39c12\",\r\n                  \"#00c0ef\",\r\n                  \"#3c8dbc\",\r\n                  \"#d2d6de\",\r\n                  \"#000\",\r\n                ],\r\n              },\r\n            ],\r\n          };\r\n          this.char = new window.Chart(donutChartCanvas, {\r\n            type: \"pie\",\r\n            data: donutData,\r\n            options: donutOptions,\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error de usuario, intentelo mas tarde\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"Ok\",\r\n          });\r\n        });\r\n    }\r\n  };\r\n  SetMethodPayment = (status) => {\r\n    switch (status) {\r\n      case 1:\r\n        return \"Efectivo\";\r\n      case 2:\r\n        return \"Tarjeta debito\";\r\n      case 3:\r\n        return \"Tarjeta de credito\";\r\n      case 4:\r\n        return \"La marina\";\r\n      case 5:\r\n        return \"Cheque\";\r\n      case 6:\r\n        return \"Transferencia\";\r\n      default:\r\n        return \"Otro\";\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class ReportBank extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      listBank: [],\r\n      data: [],\r\n      load: false,\r\n    };\r\n    this.char = null;\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getSaleDay();\r\n    this.getBaks();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.date !== this.props.date || props.user !== this.props.user) {\r\n      console.log(\"[ReportBank] Recarga datos de char\");\r\n      this.getSaleDay();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { listBank, data, load } = this.state;\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-success\">\r\n            Detallado de pagos bancarios\r\n          </h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {load ? (\r\n            <div>\r\n              <div className=\"spinner-border text-primary mr-4\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n              <span className=\"font-weight-light font-italic\">\r\n                Espere cargando datos de banco\r\n              </span>\r\n            </div>\r\n          ) : (\r\n            <ul className=\"list-group\">\r\n              {data.length ? (\r\n                data.map((bank) => {\r\n                  return (\r\n                    <li\r\n                      className=\"list-group-item d-flex justify-content-between align-items-center\"\r\n                      key={bank.bank_id}\r\n                    >\r\n                      <label className=\"text-uppercase\">\r\n                        {listBank.map((bankname) => {\r\n                          if (bankname.id === bank.bank_id)\r\n                            return bankname.name;\r\n                          else return null;\r\n                        })}\r\n                      </label>\r\n                      <span className=\"badge badge-primary badge-pill\">\r\n                        $ {bank.total.toFixed(2)}\r\n                      </span>\r\n                    </li>\r\n                  );\r\n                })\r\n              ) : (\r\n                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                  <h6 className=\"text-warning\">\r\n                    <i className=\"fas fa-info mr-2\"></i>\r\n                    No hay datos para este dia\r\n                  </h6>\r\n                </li>\r\n              )}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    if (name === \"user\") value = value * 1;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getSaleDay = () => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state,\r\n      { date, user } = this.props,\r\n      url = \"http://\" + host + \"/api/bankdetails\",\r\n      saleDay = \"?date=\" + date,\r\n      saleUser = user ? \"&user=\" + user : \"\";\r\n\r\n    if (token && host) {\r\n      //Realiza la peticion del pedido\r\n      console.log(\"Solicitando datos a la API\");\r\n      this.setState({\r\n        load: true,\r\n      });\r\n      fetch(url + saleDay + saleUser, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then(async (response) => {\r\n          let back = {};\r\n          if (response.status !== 204) back = await response.json();\r\n          if (!response.ok) {\r\n            throw new Error(back.message);\r\n          }\r\n          return back;\r\n        })\r\n        .then(async (data) => {\r\n          if (!data.message) {\r\n            console.log(\r\n              \"[reportBank] Almacenando detalles bancarios\",\r\n              data.data\r\n            );\r\n            this.setState({\r\n              data,\r\n              load: false,\r\n            });\r\n          } else {\r\n            throw new Error(data.message);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"[reportBank] \" + e);\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error en la consulta, revise la conexion\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"Ok\",\r\n          });\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    }\r\n  };\r\n  getBaks = () => {\r\n    const { host, token } = this.state,\r\n      type = \"?name=bank\";\r\n\r\n    //Peticion ajax de listado de bancos\r\n    console.log(\"[reportBank] Descargando listado de bancos\");\r\n    fetch(\"http://\" + host + \"/api/config\" + type, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        if (data.meta && data.meta.total) {\r\n          console.log(\"[reportBank] Listado de bancos descargado\");\r\n          this.setState({\r\n            listBank: data.data,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"[Orus system] \", e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nexport default class Cash extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      atms: [],\r\n      efectivo: 0,\r\n      tipo: 1,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentDidMount() {\r\n    this.getAtms();\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.date !== this.props.date || props.user !== this.props.user) {\r\n      this.getAtms();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { atms, efectivo, tipo } = this.state;\r\n    let total = 0;\r\n    return (\r\n      <div className=\"card card-dark card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-dark\">Movimientos de caja</h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <table className=\"table table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>Hora</th>\r\n                <th>Usuario</th>\r\n                <th>Tipo</th>\r\n                <th>Monto</th>\r\n                <th>D</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {atms.length ? (\r\n                atms.map((atm) => {\r\n                  total += atm.efectivo;\r\n                  return (\r\n                    <tr\r\n                      key={atm.id}\r\n                      className={\r\n                        atm.efectivo > 0 ? \"text-success\" : \"text-danger\"\r\n                      }\r\n                    >\r\n                      <td>{moment(atm.created_at).format(\"LT\")}</td>\r\n                      <td>{atm.created_user}</td>\r\n                      <td>{atm.tipo ? \"Ingreso\" : \"Egreso\"}</td>\r\n                      <td className=\"text-right\">\r\n                        $\r\n                        {atm.efectivo > 0\r\n                          ? atm.efectivo.toFixed(2)\r\n                          : (atm.efectivo * -1).toFixed(2)}\r\n                      </td>\r\n                      <th className=\"text-right\">\r\n                        <a\r\n                          href=\"#delete\"\r\n                          className=\"text-dark\"\r\n                          onClick={(e) => {\r\n                            e.preventDefault();\r\n                            this.deleteAtm(\r\n                              atm.id,\r\n                              atm.tipo,\r\n                              atm.efectivo.toFixed(2)\r\n                            );\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-trash\"></i>\r\n                        </a>\r\n                      </th>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"5\" className=\"text-center\">\r\n                    No hay datos\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td colSpan=\"3\" className=\"text-right\">\r\n                  <label>Total</label>\r\n                </td>\r\n                <td className=\"text-right\">$ {total.toFixed(2)}</td>\r\n                <td></td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer\">\r\n          <div className=\"form-group row\">\r\n            <label className=\"col-4 col-form-label\">Efectivo</label>\r\n            <div className=\"col\">\r\n              <select\r\n                className=\"form-control\"\r\n                name=\"tipo\"\r\n                value={tipo}\r\n                onChange={this.changeState}\r\n              >\r\n                <option value=\"1\">Ingresos</option>\r\n                <option value=\"0\">Egreso</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"col\">\r\n              <input\r\n                type=\"number\"\r\n                name=\"efectivo\"\r\n                className=\"form-control text-right\"\r\n                min=\"0\"\r\n                max=\"10000\"\r\n                value={efectivo}\r\n                onChange={this.changeState}\r\n              />\r\n            </div>\r\n            <div className=\"col\">\r\n              <button\r\n                className=\"btn btn-dark\"\r\n                onClick={this.sendAtm}\r\n                disabled={efectivo > 0 ? false : true}\r\n              >\r\n                Enviar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  deleteAtm = (id, tipo, efectivo) => {\r\n    efectivo = efectivo > 0 ? efectivo : efectivo * -1;\r\n    tipo = tipo ? \"la ENTRADA\" : \"el EGRESO\";\r\n\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar \" + tipo + \" de \" + efectivo + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        let { host, token } = this.state;\r\n\r\n        if (confirm && efectivo) {\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos ATM a API\");\r\n          return fetch(\"http://\" + host + \"/api/atms/\" + id, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Entrada eliminada\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Entrada eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getAtms());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    if (name === \"tipo\") value = value * 1;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  sendAtm = () => {\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de agregar un movimiento a la caja?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        let { host, token, efectivo, tipo } = this.state,\r\n          body = {\r\n            efectivo: tipo ? efectivo : efectivo * -1,\r\n            type: tipo,\r\n          },\r\n          url = \"http://\" + host + \"/api/atms\";\r\n        if (confirm && efectivo) {\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos ATM a API\");\r\n          return fetch(url, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"ATM almacenado\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Movimiento almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => this.getAtms());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el movimiento\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getAtms = () => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state,\r\n      { date, user } = this.props,\r\n      url = \"http://\" + host + \"/api/atms\",\r\n      atmDate = \"?date=\" + date,\r\n      atmUser = user ? \"&user=\" + user : \"\";\r\n\r\n    //Realiza la peticion de los productos faltantes\r\n    console.log(\"Descargando datos de efectivo\");\r\n    fetch(url + atmDate + atmUser, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok && res.status !== 401) {\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error, intentelo mas tarde\",\r\n            icon: \"error\",\r\n          });\r\n          console.log(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(async (data) => {\r\n        console.log(\"Almacenando datos de efectivo\");\r\n        if (!data.message) {\r\n          let efectivo = 0;\r\n          await data.data.map((atm) => {\r\n            efectivo += atm.efectivo;\r\n            return null;\r\n          });\r\n          this.props.changeState(\"caja\", efectivo);\r\n          this.setState({\r\n            atms: data.data,\r\n            efectivo: 0,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire({\r\n          title: \"Error!\",\r\n          text: \"Ups!\\n Hubo un error, intentelo mas tarde\",\r\n          icon: \"error\",\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class DateUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      date: moment().format(\"YYYY-MM-DD\"),\r\n      user: !props.data.rol ? 0 : props.data.idUser,\r\n      users: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getUsers();\r\n  }\r\n\r\n  render() {\r\n    const { date, user, users } = this.state;\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-body bg-light\">\r\n          <div className=\"row mb-4\">\r\n            <h5 className=\"card-title text-secondary\">Filtros</h5>\r\n          </div>\r\n          <div className=\"form-group row\">\r\n            <label className=\"col col-form-label\">Fecha</label>\r\n            <div className=\"col\">\r\n              <input\r\n                type=\"date\"\r\n                name=\"date\"\r\n                className=\"form-control\"\r\n                value={date}\r\n                onChange={this.changeState}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group row\">\r\n            <label className=\"col col-form-label\">Usuario</label>\r\n            <div className=\"col\">\r\n              <select\r\n                name=\"user\"\r\n                className=\"form-control\"\r\n                value={user}\r\n                onChange={this.changeState}\r\n              >\r\n                <option value=\"0\">Todos</option>\r\n                {users.map((user) => {\r\n                  return (\r\n                    <option key={user.id} value={user.id}>\r\n                      {user.name}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n    this.props.changeState(name, value);\r\n  };\r\n  getUsers = () => {\r\n    let { host, token } = this.state,\r\n      url = \"http://\" + host + \"/api/users\",\r\n      orderby = \"&orderby=username&order=asc\",\r\n      rol = \"&rol=10\",\r\n      page = \"?page=1\";\r\n\r\n    //Realiza la peticion de los usuarios\r\n    console.log(\"Descargando usuarios de API\");\r\n    fetch(url + page + orderby + rol, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error al descargar usuarios de sistema\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"Ok\",\r\n          });\r\n          console.error(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (!data.message) {\r\n          console.log(\"Almacenando usuarios\");\r\n          this.setState({\r\n            users: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Error en la descarga de usuarios\", data.message);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire({\r\n          title: \"Error!\",\r\n          text: \"Ups!\\n Hubo un error de usuario, intentelo mas tarde\",\r\n          icon: \"error\",\r\n          confirmButtonText: \"Ok\",\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class BoxCut extends Component {\r\n  render() {\r\n    const { caja, ventas } = this.props;\r\n    const total = caja + ventas;\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-body bg-light text-right\">\r\n          <h5 className=\"card-title text-secondary\">Corte de caja</h5>\r\n          <p className=\"card-text\">\r\n            <label>caja:</label> ${caja.toFixed(2)}\r\n          </p>\r\n          <p className=\"card-text\">\r\n            <label>Efectivo:</label> ${ventas.toFixed(2)}\r\n          </p>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <label>Total:</label> ${total.toFixed(2)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport PaymentsDetails from \"../Sales/reportPaymentsDetails\";\r\nimport ReportPays from \"../Sales/reportPays\";\r\nimport ReportBank from \"../Sales/reportBank\";\r\nimport Caja from \"./cash\";\r\nimport DateUser from \"./dateUser\";\r\nimport BoxCut from \"./boxCut\";\r\n\r\nexport default class Dashboard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      user: !props.data.rol ? \"\" : props.data.idUser,\r\n      date: moment().format(\"YYYY-MM-DD\"),\r\n      caja: 0,\r\n      ventas: 0,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { user, date, caja, ventas } = this.state;\r\n    const { data } = this.props;\r\n    return (\r\n      <div className=\"content\">\r\n        <div className=\"row\">\r\n          <div className=\"col col-md-3 col-lg-3\">\r\n            <ReportPays\r\n              data={data}\r\n              user={user}\r\n              date={date}\r\n              changeState={this.changeState}\r\n            />\r\n            <ReportBank\r\n              data={data}\r\n              user={user}\r\n              date={date}\r\n              changeState={this.changeState}\r\n            />\r\n          </div>\r\n          <div className=\"col\">\r\n            <PaymentsDetails\r\n              data={data}\r\n              user={user}\r\n              date={date}\r\n              changeState={this.changeState}\r\n            />\r\n          </div>\r\n          {!data.rol ? (\r\n            <div className=\"col\">\r\n              <div className=\"row\">\r\n                <div className=\"col\">\r\n                  <DateUser data={data} changeState={this.changeState} />\r\n                </div>\r\n                <div className=\"col\">\r\n                  <BoxCut caja={caja} ventas={ventas} />\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <Caja\r\n                  data={data}\r\n                  user={user}\r\n                  date={date}\r\n                  changeState={this.changeState}\r\n                />\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (name, value) => {\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class NotifyAll extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let notify = JSON.parse(localStorage.getItem(\"OrusNotify\"));\r\n    this.state = {\r\n      notifications: notify.notifications.length ? notify.notifications : [],\r\n      rol: notify ? notify.rol : -1,\r\n      count: notify ? notify.count : 0,\r\n      load: false,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { notifications, load } = this.state;\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h5 className=\"card-title\">\r\n            <i className=\"fas fa-bell mr-2\"></i>\r\n            <label>Mis notificaciones</label>\r\n          </h5>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {!load ? (\r\n            <React.Fragment>\r\n              {notifications.length ? (\r\n                <div className=\"list-group\">\r\n                  {notifications.map((notify) => {\r\n                    const type = notify.type.split(\"\\\\\");\r\n                    let url = \"\";\r\n                    if (type.length === 3 && type[2] === \"ExamNotification\") {\r\n                      url = \"/consultorio/registro/\" + notify.data.id;\r\n                    }\r\n                    return (\r\n                      <a\r\n                        href={url}\r\n                        className={\r\n                          notify.read_at\r\n                            ? \"list-group-item list-group-item-action flex-column align-items-start\"\r\n                            : \"list-group-item list-group-item-action flex-column align-items-start active\"\r\n                        }\r\n                        key={notify.id}\r\n                        onClick={(e) =>\r\n                          this.handleClickViewNotify(e, url, notify.id)\r\n                        }\r\n                      >\r\n                        <div className=\"d-flex w-100 justify-content-between\">\r\n                          <h5 className=\"mb-1\">{type[2] === \"\" ? \"\" : \"\"}</h5>\r\n                          <small>{moment(notify.created_at).fromNow()}</small>\r\n                        </div>\r\n                        <p className=\"mb-1 text-capitalize\">\r\n                          <strong>{notify.data.paciente}</strong>\r\n                        </p>\r\n                        <small className=\"text-capitalize\">\r\n                          {notify.data.user}\r\n                        </small>\r\n                      </a>\r\n                    );\r\n                  })}\r\n                </div>\r\n              ) : (\r\n                <p className=\"card-text\">Sin notificaciones</p>\r\n              )}\r\n            </React.Fragment>\r\n          ) : (\r\n            <div className=\"card-text text-center\">\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleClickViewNotify = (e, url, id) => {\r\n    const { page } = this.props,\r\n      seccion = url.split(\"/\");\r\n    e.preventDefault();\r\n\r\n    //Constantes\r\n    const { host, token } = this.props.data;\r\n\r\n    console.log(\"Enviando datos de leidos\");\r\n    fetch(\"http://\" + host + \"/api/user/readAllNotifications\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        id,\r\n      }),\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((notify) => {\r\n        if (notify.success) {\r\n          console.log(\"[Orus] Notificaciones leeidas\");\r\n        } else {\r\n          console.log(\"[Orus] Sin notificaciones\");\r\n        }\r\n        page(seccion[1]);\r\n        if (url) this.props.history.push(url);\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"[Orus] Notify error \\n\", e);\r\n        window.Swal.fire(\r\n          \"Notificaciones\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  checkNotify = () => {\r\n    //Constantes de logueo\r\n    const { data } = this.props,\r\n      { host, token } = data;\r\n\r\n    if (token !== \"\" && host !== \"\") {\r\n      fetch(\"http://\" + host + \"/api/user\", {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then(async (response) => {\r\n          let back = {};\r\n          if (response.status !== 204) back = await response.json();\r\n          if (!response.ok) {\r\n            throw new Error(back.message);\r\n          }\r\n          return back;\r\n        })\r\n        .then((notify) => {\r\n          this.setState({\r\n            notifications: notify.data ? notify.data.notifications : [],\r\n            rol: notify.data.rol,\r\n            load: false,\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"[Orus] User session in API error \\n\", e);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n          window.Swal.fire(\r\n            \"Notificaciones\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport Navtop from \"./components/Layouts/navtop\";\r\nimport Menu from \"./components/Layouts/menu\";\r\nimport Breadcrumb from \"./components/Layouts/breadcrumb\";\r\nimport Footer from \"./components/Layouts/footer\";\r\nimport Users from \"./components/Users/index\";\r\nimport UserAdd from \"./components/Users/add\";\r\nimport Store from \"./components/Store/index\";\r\nimport StoreAdd from \"./components/Store/add\";\r\nimport Categories from \"./components/Store/categories\";\r\nimport Brands from \"./components/Store/brands\";\r\nimport Inventory from \"./components/Store/inventory\";\r\nimport Contacts from \"./components/Contacts/index\";\r\nimport ContactsAdd from \"./components/Contacts/add\";\r\nimport AddByContact from \"./components/Contacts/addByContact\";\r\nimport Tools from \"./components/Layouts/tools\";\r\nimport Exam from \"./components/Exam/index\";\r\nimport ExamAdd from \"./components/Exam/add\";\r\nimport Order from \"./components/Order/index\";\r\nimport OrderAdd from \"./components/Order/add\";\r\nimport Sales from \"./components/Sales/index\";\r\nimport SalesAdd from \"./components/Sales/add\";\r\nimport Dashboard from \"./components/Dashboard/index\";\r\nimport NotifyAllShow from \"./components/Layouts/notifyAll\";\r\n\r\nexport default class Routers extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      page: this.handleTitleSection(window.location.pathname),\r\n      company: props.data.company,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    //Verificamos permisos\r\n    const dir = window.location.pathname,\r\n      rol = this.props.data.rol;\r\n\r\n    if (\r\n      rol === 1 &&\r\n      (dir.match(/^\\/usuarios/g) ||\r\n        dir.match(/^\\/almacen/g) ||\r\n        dir.match(/^\\/configuraciones/g))\r\n    ) {\r\n      window.location.href = \"/\";\r\n    }\r\n    if (\r\n      rol === 2 &&\r\n      (dir.match(/^\\/pedidos/g) ||\r\n        dir.match(/^\\/usuarios/g) ||\r\n        dir.match(/^\\/almacen/g) ||\r\n        dir.match(/^\\/notas/g) ||\r\n        dir.match(/^\\/configuraciones/g))\r\n    ) {\r\n      window.location.href = \"/\";\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data, logOut } = this.props,\r\n      { page } = this.state;\r\n\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <Navtop logOut={logOut} data={data} page={this.handlePage} />\r\n        <Menu\r\n          companyName={this.state.company}\r\n          user={data}\r\n          page={this.handlePage}\r\n          logOut={logOut}\r\n          active={page}\r\n        />\r\n        <div className=\"content-wrapper\">\r\n          <Breadcrumb title={page} />\r\n          <div className=\"content\">\r\n            <div className=\"container-fluid\">\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-12\">\r\n                  <Switch>\r\n                    <Route\r\n                      path=\"/usuarios/registro/:id?\"\r\n                      render={(props) => (\r\n                        <UserAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/usuarios\"\r\n                      render={(props) => (\r\n                        <Users {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      path=\"/almacen/registro/:id?\"\r\n                      render={(props) => (\r\n                        <StoreAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen/categorias\"\r\n                      render={(props) => (\r\n                        <Categories\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen/marcas\"\r\n                      render={(props) => (\r\n                        <Brands {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen/inventario\"\r\n                      render={(props) => (\r\n                        <Inventory\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen\"\r\n                      render={(props) => (\r\n                        <Store {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      path=\"/contactos/registro/:id?\"\r\n                      render={(props) => (\r\n                        <ContactsAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/contactos/add\"\r\n                      render={(props) => (\r\n                        <AddByContact\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/contactos\"\r\n                      render={(props) => (\r\n                        <Contacts\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/consultorio/registro/:id?\"\r\n                      render={(props) => (\r\n                        <ExamAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/consultorio\"\r\n                      render={(props) => (\r\n                        <Exam {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/configuraciones\"\r\n                      render={(props) => (\r\n                        <Tools {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/pedidos/registro/:id?\"\r\n                      render={(props) => (\r\n                        <OrderAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/pedidos\"\r\n                      render={(props) => (\r\n                        <Order {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/notas/registro/:id?\"\r\n                      render={(props) => (\r\n                        <SalesAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/notas\"\r\n                      render={(props) => (\r\n                        <Sales {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/notificaciones\"\r\n                      render={(props) => (\r\n                        <NotifyAllShow\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/\"\r\n                      render={(props) => (\r\n                        <Dashboard\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                  </Switch>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handlePage = (title) => {\r\n    let page = this.handleTitleSection(title);\r\n    this.setState({\r\n      page,\r\n    });\r\n  };\r\n  handleTitleSection = (page) => {\r\n    //Verificamos que la variable no este vacia\r\n    page = page ? page : window.location.pathname;\r\n    //Maneja el renderiazado del componentes cuando se cambíe el componentes\r\n    if (page === \"\" || typeof page === \"undefined\" || typeof page === \"object\")\r\n      page = \"/\";\r\n    let locations = page.split(\"/\");\r\n    if (locations[1] === \"\") {\r\n      return \"dashboard\";\r\n    } else {\r\n      return locations[1];\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Main extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      host: props.host,\r\n      hostShow: false,\r\n      load: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { load, username, password, hostShow, host } = this.state,\r\n      { company } = this.props;\r\n    return (\r\n      <div className=\"login-page\">\r\n        <div className=\"login-box\">\r\n          <div className=\"login-logo\">\r\n            <a href=\".\">\r\n              <b className=\"text-primary\">Orus</b> LTE\r\n            </a>\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <div className=\"card-body login-card-body\">\r\n              <p className=\"login-box-msg\">{company}</p>\r\n              <form onSubmit={this.handleLogin}>\r\n                <div className=\"input-group mb-3\">\r\n                  <input\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Usuario\"\r\n                    name=\"username\"\r\n                    required=\"required\"\r\n                    autoFocus={hostShow ? false : true}\r\n                    onChange={this.catchInputs}\r\n                    value={username}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <div className=\"input-group-text\">\r\n                      <span className=\"fas fa-user\"></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"input-group mb-3\">\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Contraseña\"\r\n                    name=\"password\"\r\n                    required=\"required\"\r\n                    minLength=\"8\"\r\n                    maxLength=\"16\"\r\n                    pattern=\"^(?=.*[A-Z])(?=.*[!@#$&\\.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$\"\r\n                    autoComplete=\"off\"\r\n                    onChange={this.catchInputs}\r\n                    value={password}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <div className=\"input-group-text\">\r\n                      <span className=\"fas fa-lock\"></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12 mb-4\">\r\n                    <a\r\n                      href=\"#tools\"\r\n                      onClick={this.showTools}\r\n                      className=\"text-muted\"\r\n                    >\r\n                      <i className=\"fas fa-wifi\"></i> Servidor\r\n                    </a>\r\n                    {hostShow ? (\r\n                      <div className=\"input-group mb-3\">\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Servidor\"\r\n                          name=\"host\"\r\n                          autoComplete=\"off\"\r\n                          autoFocus={hostShow ? true : false}\r\n                          onChange={this.catchInputs}\r\n                          value={host}\r\n                          onKeyPress={this.pressEnter}\r\n                        />\r\n                        <div className=\"input-group-append\">\r\n                          <div className=\"input-group-text\">\r\n                            <span className=\"fas fa-server\"></span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12 text-center\">\r\n                    {load ? (\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    ) : (\r\n                      <button\r\n                        type=\"submit\"\r\n                        className=\"btn btn-primary btn-block\"\r\n                      >\r\n                        Iniciar sesion\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  pressEnter = (e) => {\r\n    e.preventDefault();\r\n    if (e.key === \"Enter\") {\r\n      let { host } = this.state;\r\n      window.Swal.fire({\r\n        icon: \"success\",\r\n        title: \"La conexion al servidor fue actualizada con exito: \" + host,\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      }).then((res) => {\r\n        this.setState({\r\n          hostShow: false,\r\n        });\r\n        this.props.changeState(\"host\", host);\r\n      });\r\n    }\r\n  };\r\n  showTools = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      hostShow: !this.state.hostShow,\r\n    });\r\n  };\r\n  validInputs() {\r\n    //Valida los campos del formulario\r\n    let { username, password } = this.state;\r\n    const regexUser = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n      regexPass = /^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$/;\r\n\r\n    username = username.replace(/\\s/g, \"\").toLowerCase();\r\n\r\n    if (regexUser.test(username) && regexPass.test(password)) {\r\n      return true;\r\n    } else {\r\n      window.Swal.fire(\"Inicio de sesion\", \"Los datos no son validos\", \"error\");\r\n      return false;\r\n    }\r\n  }\r\n  handleLogin = (e) => {\r\n    e.preventDefault();\r\n    const { host, username, password, load } = this.state;\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    if (host) {\r\n      //Manejamos el inicio de sesion aqui, declaramos primero las variables\r\n      //sobre todo la de localstorage donde viene el host a conectar\r\n      //La variable body con los datos de inicio\r\n      let valid = this.validInputs(),\r\n        body = {\r\n          email: username,\r\n          password,\r\n        };\r\n\r\n      //Si los datos de usuario son correctos manda la informacion al servidor\r\n      if (valid) {\r\n        console.log(\"[Login] Enviado credenciales al servidor\");\r\n        fetch(\"http://\" + host + \"/api/users/login\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(body),\r\n          signal: this.signal,\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        })\r\n          .then(async (response) => {\r\n            let back = {};\r\n\r\n            if (response.status !== 204 && response.status)\r\n              back = await response.json();\r\n            if (!response.ok) {\r\n              console.error(\"[Login] error status\\n\", response);\r\n              if (response.status === 401) {\r\n                window.Swal.fire(\r\n                  \"Inicio de sesion\",\r\n                  \"Las credenciales no son correctas\",\r\n                  \"error\"\r\n                );\r\n                this.setState({\r\n                  load: false,\r\n                });\r\n              } else {\r\n                throw new Error(back.errors);\r\n              }\r\n            }\r\n            return back;\r\n          })\r\n          .then((response) => {\r\n            if (response.data) {\r\n              console.log(\"[Login] Credenciales validadas\", response);\r\n              if (\"serviceWorker\" in navigator && \"PushManager\" in window) {\r\n                console.log(\"[ORUS] Verificando permisos de Push\");\r\n                if (Notification.permission !== \"denied\") {\r\n                  const title = \"Orus bot\",\r\n                    options = {\r\n                      body: `Sesion iniciada: ${response.data.username}`,\r\n                    };\r\n                  navigator.serviceWorker\r\n                    .getRegistration()\r\n                    .then(function (reg) {\r\n                      reg.showNotification(title, options);\r\n                    });\r\n                }\r\n              }\r\n              this.props.loginFunction(response);\r\n            }\r\n          })\r\n          .catch((message) => {\r\n            console.error(\r\n              \"[Login] Error de conexion con el servidor\\n\",\r\n              message\r\n            );\r\n            window.Swal.fire(\r\n              \"Inicio de sesion\",\r\n              \"Error de conexion con el servidor\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          });\r\n      } else {\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      }\r\n    } else {\r\n      console.error(\"[Login] No existe un valor para host\");\r\n      this.setState({\r\n        hostShow: true,\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    //console.log(name, \":\", value);\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport Routers from \"./Routers\";\r\nimport Login from \"./components/Layouts/login\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let storage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    //Agregamos los datos a state\r\n    this.state = {\r\n      isLogged: storage ? storage.isLogged : false,\r\n      token: storage ? storage.token : \"\",\r\n      idUser: storage ? storage.idUser : 0,\r\n      username: storage ? storage.username : \"\",\r\n      name: storage ? storage.name : \"\",\r\n      rol: storage ? storage.rol : 0,\r\n      email: storage ? storage.email : \"\",\r\n      host: storage ? storage.host : window.location.hostname,\r\n      company: storage ? storage.company : \"Optica Madero\",\r\n    };\r\n    console.log(\"[Orus] Navegador:\\n\", navigator.userAgent);\r\n  }\r\n  componentDidMount() {\r\n    /*Almacenamos el state en el storage*/\r\n    console.log(\"[Orus] Cargando datos de sesion en localStorage\");\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(this.state));\r\n  }\r\n  componentDidUpdate() {\r\n    //Cada que el componnte es redenrizado almacenamos la variables del\r\n    //state en localstorage\r\n    console.log(\"[Orus] Actualizando datos de sesion en localStorage\");\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(this.state));\r\n  }\r\n\r\n  render() {\r\n    //Mostramos el componente de login si isLogged no tiene sesion\r\n    //De lo contrario nos dirigimos al compenente de routers\r\n    //donde nos muestra el componente segun el path\r\n    return (\r\n      <Router>\r\n        <main>\r\n          {this.state.isLogged ? (\r\n            <Routers data={this.state} logOut={this.logOut} />\r\n          ) : (\r\n            <Login\r\n              company={this.state.company}\r\n              host={this.state.host}\r\n              loginFunction={this.login}\r\n              changeState={this.changeState}\r\n            />\r\n          )}\r\n        </main>\r\n      </Router>\r\n    );\r\n  }\r\n\r\n  changeState = (name, value) => {\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  login = (s) => {\r\n    //Funcion que maneja el cambio de sesion en el state\r\n    this.setState({\r\n      isLogged: s.data.id ? true : false,\r\n      idUser: s.data.id,\r\n      username: s.data.username,\r\n      name: s.data.name,\r\n      email: s.data.email,\r\n      rol: s.data.rol,\r\n      token: s.token,\r\n    });\r\n  };\r\n  logOut = () => {\r\n    let session = {\r\n      isLogged: false,\r\n      token: \"\",\r\n      idUser: 0,\r\n      username: \"\",\r\n      name: \"\",\r\n      rol: 0,\r\n      email: \"\",\r\n      host: this.state.host,\r\n      company: this.state.company,\r\n    };\r\n\r\n    if (\"serviceWorker\" in navigator && \"PushManager\" in window) {\r\n      console.log(\"[ORUS] Verificando permisos de Push\");\r\n      if (Notification.permission !== \"denied\") {\r\n        const title = \"Orus bot\",\r\n          options = {\r\n            body: `Sesion cerrada correctamente`,\r\n          };\r\n        navigator.serviceWorker.getRegistration().then(function (reg) {\r\n          reg.showNotification(title, options);\r\n        });\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(session));\r\n    localStorage.removeItem(\"OrusContactInUse\");\r\n    localStorage.removeItem(\"OrusContacts\");\r\n    localStorage.removeItem(\"OrusNotify\");\r\n    localStorage.removeItem(\"OrusOrder\");\r\n    localStorage.removeItem(\"OrusSales\");\r\n    localStorage.removeItem(\"OrusExam\");\r\n    localStorage.removeItem(\"OrusStore\");\r\n    localStorage.removeItem(\"OrusUsers\");\r\n\r\n    window.location.href = \"/\";\r\n  };\r\n}\r\n\r\nrender(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}