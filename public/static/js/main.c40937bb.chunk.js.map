{"version":3,"sources":["components/Layouts/notify.jsx","components/Layouts/navtop.jsx","components/Layouts/menu.jsx","components/Layouts/breadcrumb.jsx","components/Layouts/footer.jsx","components/Layouts/headerTable.jsx","components/Layouts/pagination.jsx","components/Users/index_filter.jsx","components/Layouts/actionsTable.jsx","components/Users/index.jsx","components/Users/userNameInput.jsx","components/Users/userEmailInput.jsx","components/Users/add.jsx","components/Store/index_filter.jsx","components/Store/index.jsx","components/Store/add_lote.jsx","components/Store/input_category.jsx","components/Store/input_suppliers.jsx","components/Store/input_brand.jsx","components/Layouts/codeLentString.jsx","components/Store/add.jsx","components/Store/category_list.jsx","components/Store/categories.jsx","components/Store/brands.jsx","components/Store/inventory.jsx","components/Contacts/index_filter.jsx","components/Contacts/index.jsx","components/Contacts/mapa.jsx","components/Exam/graduacionExam.jsx","components/Exam/recomendaciones.jsx","components/Exam/listsExams.jsx","components/Contacts/nameInput.jsx","components/Contacts/emailInput.jsx","components/Contacts/add_personal.jsx","components/Contacts/add_domicilio.jsx","components/Contacts/add_telefonos.jsx","components/Contacts/add.jsx","components/Contacts/addByContact.jsx","components/Layouts/tools_category.jsx","components/Layouts/tools.jsx","components/Exam/index_filter.jsx","components/Exam/index.jsx","components/Contacts/easyContact.jsx","components/Contacts/searchContactCard.jsx","components/Exam/generalesExam.jsx","components/Exam/interrogatoriosExam.jsx","components/Exam/keraRetExam.jsx","components/Exam/diabetesExam.jsx","components/Exam/agudezaExam.jsx","components/Exam/diagnosticoExam.jsx","components/Exam/observacionesExam.jsx","components/Layouts/messenger.jsx","components/Exam/print_exam.jsx","components/Exam/add.jsx","components/Order/index_filter.jsx","components/Order/index.jsx","components/Order/itemsOrder.jsx","components/Order/labOrder.jsx","components/Order/statusOrder.jsx","components/Order/bicelacionOrder.jsx","components/Order/garantiaOrder.jsx","components/Order/add.jsx","components/Sales/index_filter.jsx","components/Sales/index.jsx","components/Sales/abonoAdd.jsx","components/Sales/print_pay.jsx","components/Sales/abonos.jsx","components/Sales/print_sale.jsx","components/Sales/edoCuenta.jsx","components/Sales/add.jsx","components/Sales/reportPays.jsx","components/Dashboard/cash.jsx","components/Dashboard/dateUser.jsx","components/Dashboard/boxCut.jsx","components/Dashboard/index.jsx","components/Layouts/notifyAll.jsx","Routers.jsx","components/Layouts/login.jsx","index.js"],"names":["Notify","props","handleClickRead","e","id","notify","data","host","token","preventDefault","console","log","fetch","method","body","JSON","stringify","signal","headers","Accept","Authorization","then","response","a","back","status","json","ok","Error","message","success","verifyUser","error","catch","window","Swal","fire","logOut","isLogged","res","statusText","setState","notifications","rol","username","state","controller","AbortController","this","abort","countNotify","length","className","data-toggle","href","map","notiFyType","type","split","title","icon","time","moment","created_at","fromNow","url","localStorage","setItem","contact_id","exam_id","to","key","onClick","Fragment","Component","Navtop","data-widget","role","$","toggleClass","Menu","changePage","page","handleLogOut","text","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","result","dismiss","value","companyName","user","active","avatar","idUser","src","alt","style","opacity","name","data-accordion","Breadcrumb","date","format","setInterval","Footer","HeaderTable","handleOrder","item","order","orderby","actions","col","index","filter","scope","cursor","Pagination","handleChangePage","meta","total","current_page","Math","ceil","per_page","toFixed","last_page","Filter","onKeyPressSearch","setFilters","onClickClean","changeFilters","modal","target","search","data-target","tabIndex","data-dismiss","aria-label","aria-hidden","placeholder","onChange","onKeyPress","ActionsTable","handleDelete","delete","edit","Users","load","toUpperCase","showLoaderOnConfirm","preConfirm","confirm","showConfirmButton","timer","getUsers","users","sdd","parse","getItem","colSpan","Object","keys","email","session","last_activity","updated_at","UserName","handleChange","x","replace","toLowerCase","test","validUser","bgColor","validate","varLocalStorage","timeFetch","clearTimeout","setTimeout","searchUser","alert","autoComplete","autoFocus","required","minLength","maxLength","pattern","validEmail","UserAdd","catchInputs","handleSave","validUserName","validUserEmail","password","history","goBack","getUser","match","params","send","onSubmit","disabled","ip_address","user_agent","user_data","Store","onchangeSearch","getItems","items","codigo","marca","producto","unidad","cantidades","precio","proveedor","nombre","lotes","ordenar","buscar","pagina","errors","StoreLote","tr","parentNode","classList","add","ls","deleteColor","clearInterval","remove","loteNew","handelGetLots","refresh","bill","cost","price","amount","lote","handleNewLote","bind","pages","i","push","width","lot","factura","costo","min","validInputs","store_items_id","InputCategory","handleChangeCategory","categoryData","parseInt","category","find","categoryName","textSelect","categoryRef","ref","cat","categoria","SuppliersInput","getSuppliers","suppliers_data","supplier","handleChangeSupplier","supplierRef","sp","InputBrand","handleChangeBrand","getBrands","brands","brandsName","brand","brandRef","string","StoreAdd","handleNameLent","grad","stringcode","category2","current","Codestring","options","selectedIndex","trim","category3","category4","toString","handleCodeLent","handleCodeString","code","setNew","codebar","brand_id","unit","cant","category_id","category_id1","category_id2","category_id3","category_id4","category_list2","category_list3","category_list4","getCategory","category_list1","codeRef","nameRef","depende_de","hijos","c_barra","graduacion","category_data","category1","React","createRef","next","codeValue","nameValue","CategoryList","handleClickDelete","category_raiz","indexCat","splice","handleClickSave","nameInput","focus","getCategoriesMain","CategoryData","undefined","categoryid","ppage","handleClickAdd","categoryDataName","categorySelect","last","input","Categories","handleChangeState","category_hijos1","category_hijos2","category_hijos3","category_hijos4","Brands","deleteBrand","indexItem","saveBrand","changeInput","Inventory","catid","handleClickCat","catData_1","catData_2","sons","catid_1","catid_2","catid_3","catData_3","getCategories","header","parseFloat","cil","rangoInf","rangoSup","row","zero","children","h","business","Contacts","getContacts","contacts","contact","rfc","tipo","telefonos","t_movil","enUso","negocio","Mapa","eventLoadMap","request","query","calle","colonia","municipio","estado","cp","fields","service","google","maps","places","PlacesService","findPlaceFromQuery","results","markers","setMap","place","marker","Marker","position","geometry","location","formatted_address","addListener","address","changeAddress","setCenter","googlePlaceAPILoad1","mapCenter","LatLng","Map","document","getElementById","center","zoom","height","GraduacionExam","checked","val","onChangeInput","readOnly","max","step","esferaod","cilindrod","ejeod","adiciond","dpod","alturaod","esferaoi","cilindroi","ejeoi","adicioni","dpoi","alturaoi","lcmarca","lcgod","lcgoi","Recomendaciones","handleCodeName","handleClickCategory","nameCategory","category_id_2","category_id_3","category_list_2","category_list_3","handleCategoryChange","gradod","gradoi","category_list","update","ListsExams","handleSaveExam","paciente","edad","handleDataExam","exam","handleChangeInput","ChangeInput","handleClickDeleteExam","handleClickSelect","handleNewOrder","getExams","handleNewExam","client","examEdit","select","datos","utc","local","observaciones","category_ii","Date","isSame","examToday","newExam","NameInput","eraseTilde","RegExp","stringOk","contacto","validName","list","EmailInput","emailOriginal","emailContact","AddPersonal","birthday","AddDomicilio","AddTelefonos","t_casa","t_oficina","verify","ContactsAdd","domicilio","telnumbers","empresa","f_nacimiento","timeSave","AddContact","ToolsCategory","category_select","category_hijos","category_hijos_3","newItem","padre","clickSave","company","server","clickSaveUser","Exam","handleFilter","exams","order_id","fecha","easyContact","changeValue","setContac","storage","searchContact","sendAge","dataContact","getIdContact","getContact","handleClickChange","handleClickContact","word","handleSearcContact","contactInput","onBlur","GeneralesExam","aria-expanded","aria-controls","aria-labelledby","data-parent","pc","htmlFor","pc_time","tablet","tablet_time","movil","movil_time","lap","lap_time","frontal","occipital","generality","cefalea","temporaod","temporaoi","c_frecuencia","c_intensidad","InterrogatorioExam","interrogatorio","coa","rows","aopp","aopf","KeraRetExam","keratometriaod","keratometriaoi","rsod","rsoi","DiabetesExam","d_fclod","d_fcloi","d_time","d_media","d_test","d_fclod_time","d_fcloi_time","oftalmoscopia","AgudezaExam","cvod","cvoi","avslod","avsloi","avcgaod","avcgaoi","avfod","avfoi","avf2o","DiagnosticoExam","diagnostico","presbicie","piod","pioi","txoftalmico","ObservacionesExam","messenger","handleMessege","sendMessenger","table","idRow","getMessengers","messages","pagado","created_user","mensaje","printExam","ExamAdd","handleStatus","getExam","pantalleooi","pantalleood","temporal","txoptico","item1","item2","hoy","now","registro","toDay","nameItem","obj","print","setStatusString","getPedidos","pedidos","pedido","caja","laboratorio","folio_lab","examen","nota","Items","handelClickItemDb","subtotal","cantidad","inStorage","out","itemsDb","deleteItem","addItem","itemNew","handleNewItem","descripcion","inputItem","inputCant","db","maxWidth","addCancel","labOrder","supplies","lab_id","s","npedidolab","statusOrder","bicelacionOrder","ncaja","garantiaOrder","OrderAdd","getExamById","getOrder","productos","usuario","created","random","substring","showTabActive","cliente","descuento","AddAbono","handlePay","saleId","contactId","metodopago","banco","auth","onChangeValue","pay","printPay","ListAbonos","getPayments","content","pri","contentWindow","open","write","innerHTML","close","handleLoad","SetMethodPayment","sale","abonos","abono","metodo","Autorizacion","aria-disabled","folio","printSale","saldo","abonado","totalItems","fontSize","fontFamily","edoCuenta","SaleAdd","getSales","chat","ReportPay","changeState","getSaleDay","saleDay","saleUser","donutChartCanvas","get","getContext","donutOptions","maintainAspectRatio","responsive","labels","values","efectivo","donutData","char","destroy","mp","datasets","backgroundColor","Chart","Cash","deleteAtm","getAtms","sendAtm","atmDate","atmUser","atm","atms","DateUser","BoxCut","ventas","Dashboard","NotifyAll","Routers","handlePage","handleTitleSection","pathname","locations","dir","path","render","extric","Main","pressEnter","hostShow","showTools","handleLogin","loginFunction","App","login","hostname"],"mappings":"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","file":"static/js/main.c40937bb.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Notify extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      notifications: [],\r\n      rol: -1,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.verifyUser();\r\n  }\r\n\r\n  render() {\r\n    const { notifications, rol } = this.state,\r\n      countNotify = notifications ? notifications.length : 0;\r\n    return (\r\n      <li className=\"nav-item dropdown\">\r\n        <a className=\"nav-link\" data-toggle=\"dropdown\" href=\"#end\">\r\n          <i className=\"far fa-bell\"></i>\r\n          {countNotify ? (\r\n            <span className=\"badge badge-warning navbar-badge\">\r\n              {countNotify}\r\n            </span>\r\n          ) : null}\r\n        </a>\r\n        <div className=\"dropdown-menu dropdown-menu-lg dropdown-menu-right\">\r\n          <span className=\"dropdown-header\">{countNotify} Notificaciones</span>\r\n          <div className=\"dropdown-divider\"></div>\r\n          {notifications.map((notify) => {\r\n            const notiFyType = notify.type.split(\"\\\\\", 3);\r\n            let title = \"general\",\r\n              icon = \"fa-file\",\r\n              time = moment(notify.created_at).fromNow(),\r\n              url = \"#end\";\r\n            if (notiFyType[2] === \"ExamNotification\") {\r\n              if (rol === 2) {\r\n                title = \"Examen creado\";\r\n                url = \"/consultorio/registro/\" + notify.data.id;\r\n              } else {\r\n                title = \"Examen actualizado\";\r\n                url = \"/pedidos/registro\";\r\n                localStorage.setItem(\r\n                  \"OrusContactInUse\",\r\n                  JSON.stringify({\r\n                    id: notify.data.contact_id,\r\n                    exam_id: notify.data.id,\r\n                  })\r\n                );\r\n              }\r\n              icon = \"fa-file-alt\";\r\n            }\r\n            //console.log(\"Notify:\", notify.read_at);\r\n            return (\r\n              <Link\r\n                to={url}\r\n                className=\"dropdown-item\"\r\n                key={notify.id}\r\n                onClick={(e) => this.handleClickRead(e, notify.id)}\r\n              >\r\n                <i className={\"fas \" + icon + \" mr-1\"}></i> {title}\r\n                <span className=\"float-right text-muted text-sm\">{time}</span>\r\n              </Link>\r\n            );\r\n          })}\r\n          {countNotify ? (\r\n            <React.Fragment>\r\n              <div className=\"dropdown-divider\"></div>\r\n              <a\r\n                href=\"#end\"\r\n                className=\"dropdown-item dropdown-footer\"\r\n                onClick={(e) => this.handleClickRead(e, -1)}\r\n              >\r\n                Marcar como leído.\r\n              </a>\r\n            </React.Fragment>\r\n          ) : null}\r\n          <Link to=\"/notificaciones\" className=\"dropdown-item dropdown-footer\">\r\n            Ver todas\r\n          </Link>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  handleClickRead = (e, id, notify) => {\r\n    //Constantes\r\n    const { host, token } = this.props.data;\r\n    if (id === -1) e.preventDefault();\r\n\r\n    console.log(\"Enviando datos de leidos\");\r\n    fetch(\"http://\" + host + \"/api/user/readAllNotifications\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        id,\r\n      }),\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((notify) => {\r\n        if (notify.success) {\r\n          console.log(\"Notificaciones leeidas\");\r\n          this.verifyUser();\r\n        } else {\r\n          console.error(\"Sin notificaciones\", notify);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus fetch\", e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  verifyUser = () => {\r\n    //Constantes de logueo\r\n    const { data, logOut } = this.props,\r\n      { host, isLogged, token } = data;\r\n\r\n    //Solo realizamos la verificacion si hay sesion\r\n    if (isLogged && host && token) {\r\n      console.log(\"Verificando usuario\");\r\n      //Realizando verificación de usuarios\r\n      if (token !== \"\" && host !== \"\") {\r\n        fetch(\"http://\" + host + \"/api/user\", {\r\n          method: \"GET\",\r\n          signal: this.signal,\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n        })\r\n          .then((res) => {\r\n            if (!res.ok && token !== \"\") {\r\n              console.error(\"Usuario invalido:\", res.statusText);\r\n              logOut();\r\n            }\r\n            return res.json();\r\n          })\r\n          .then((data) => {\r\n            if (data.data && !data.data.message) {\r\n              this.setState({\r\n                notifications: data.data.notifications,\r\n                rol: data.data.rol,\r\n              });\r\n              console.log(\"Usuario valido:\", data.data.username);\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      console.error(\"La sesion ya no esta activa o se perdio el host\");\r\n      logOut();\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Notify from \"./notify\";\r\n\r\nexport default class Navtop extends Component {\r\n  render() {\r\n    const { logOut, data } = this.props;\r\n    return (\r\n      <nav className=\"main-header navbar navbar-expand navbar-dark navbar-lightblue\">\r\n        <ul className=\"navbar-nav\">\r\n          <li className=\"nav-item\">\r\n            <a\r\n              className=\"nav-link\"\r\n              data-widget=\"pushmenu\"\r\n              href=\"#end\"\r\n              role=\"button\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                window.$(\"#body\").toggleClass(\"sidebar-open\");\r\n                window.$(\"#body\").toggleClass(\"sidebar-collapse\");\r\n              }}\r\n            >\r\n              <i className=\"fas fa-bars\"></i>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n        <ul className=\"navbar-nav ml-auto\">\r\n          <li className=\"nav-item dropdown\">\r\n            <a href=\"#end\" className=\"nav-link\" data-toggle=\"dropdown\">\r\n              <i className=\"far fa-comments\"></i>\r\n            </a>\r\n            <div className=\"dropdown-menu dropdown-menu-lg dropdown-menu-right\">\r\n              <span className=\"dropdown-header\">Sin comentarios</span>\r\n              <div className=\"dropdown-divider\"></div>\r\n            </div>\r\n          </li>\r\n          <Notify logOut={logOut} data={data} />\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Menu extends Component {\r\n  render() {\r\n    const { companyName, user, active } = this.props;\r\n    let avatar = \"/img/avatars/avatar5.png\";\r\n    if (user.rol === 1) avatar = \"/img/avatars/avatar2.png\";\r\n    if (!user.rol) avatar = \"/img/avatars/avatar3.png\";\r\n    if (user.idUser === 2) avatar = \"/img/avatars/avatar4.png\";\r\n\r\n    return (\r\n      <aside className=\"main-sidebar sidebar-dark-primary\">\r\n        <Link\r\n          to=\"/\"\r\n          className=\"brand-link\"\r\n          onClick={(e) => {\r\n            this.changePage(\"/\");\r\n          }}\r\n        >\r\n          <img\r\n            src=\"/img/AdminLTELogo.png\"\r\n            alt={companyName + \" logo \"}\r\n            className=\"brand-image img-circle elevation-3\"\r\n            style={{ opacity: 0.8 }}\r\n          />\r\n          <span className=\"brand-text font-weight-light text-uppercase\">\r\n            {companyName}\r\n          </span>\r\n        </Link>\r\n        <div className=\"sidebar\">\r\n          <div className=\"user-panel mt-3 pb-3 mb-3 d-flex\">\r\n            <div className=\"image\">\r\n              <img\r\n                src={avatar}\r\n                className=\"img-circle elevation-2\"\r\n                alt={user.name}\r\n              />\r\n            </div>\r\n            <div className=\"info\">\r\n              <a href=\"#end\" className=\"d-block text-capitalize\">\r\n                {user.name}\r\n                <small className=\"text-lowercase\">({user.username})</small>\r\n                <br />\r\n                <span className=\"badge badge-light\">\r\n                  {user.rol > 0\r\n                    ? user.rol === 1\r\n                      ? \"Ventas\"\r\n                      : \"Optometrista\"\r\n                    : \"Administrador\"}\r\n                </span>\r\n              </a>\r\n            </div>\r\n          </div>\r\n          <nav className=\"mt-2\">\r\n            <ul\r\n              className=\"nav nav-pills nav-sidebar flex-column\"\r\n              data-widget=\"treeview\"\r\n              role=\"menu\"\r\n              data-accordion=\"false\"\r\n            >\r\n              {user.rol !== 2 ? (\r\n                <li className=\"nav-item\">\r\n                  <Link\r\n                    to=\"/\"\r\n                    className={\r\n                      active === \"dashboard\" ? \"nav-link active\" : \"nav-link\"\r\n                    }\r\n                    onClick={(e) => {\r\n                      this.changePage(\"/\");\r\n                    }}\r\n                  >\r\n                    <i className=\"nav-icon fas fa-tachometer-alt\"></i>\r\n                    <p>\r\n                      Dashboard\r\n                      <i className=\"right fas fa-angle-left\"></i>\r\n                    </p>\r\n                  </Link>\r\n                </li>\r\n              ) : null}\r\n              <li className=\"nav-item\">\r\n                <Link\r\n                  to=\"/contactos\"\r\n                  className={\r\n                    active === \"contactos\" ? \"nav-link active\" : \"nav-link\"\r\n                  }\r\n                  onClick={(e) => {\r\n                    this.changePage(\"/contactos\");\r\n                  }}\r\n                >\r\n                  <i className=\"nav-icon fas fa-address-book\"></i>\r\n                  <p>\r\n                    Contactos\r\n                    <i className=\"right fas fa-angle-left\"></i>\r\n                  </p>\r\n                </Link>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <Link\r\n                  to=\"/consultorio\"\r\n                  className={\r\n                    active === \"consultorio\" ? \"nav-link active\" : \"nav-link\"\r\n                  }\r\n                  onClick={(e) => {\r\n                    this.changePage(\"/consultorio\");\r\n                  }}\r\n                >\r\n                  <i className=\"nav-icon fas fa-notes-medical\"></i>\r\n                  <p>\r\n                    Examenes\r\n                    <i className=\"right fas fa-angle-left\"></i>\r\n                  </p>\r\n                </Link>\r\n              </li>\r\n\r\n              {user.rol <= 1 ? (\r\n                <React.Fragment>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/pedidos\"\r\n                      className={\r\n                        active === \"pedidos\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/pedidos\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-clipboard-list\"></i>\r\n                      <p>\r\n                        Pedidos\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/notas\"\r\n                      className={\r\n                        active === \"notas\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/notas\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-cash-register\"></i>\r\n                      <p>\r\n                        Ventas\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                </React.Fragment>\r\n              ) : null}\r\n\r\n              {!user.rol ? (\r\n                <React.Fragment>\r\n                  <li\r\n                    className={\r\n                      active === \"almacen\"\r\n                        ? \"nav-item has-treeview menu-open\"\r\n                        : \"nav-item has-treeview \"\r\n                    }\r\n                  >\r\n                    <a\r\n                      href=\"#a!\"\r\n                      className={\r\n                        active === \"almacen\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        this.changePage(\"/almacen\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-database\"></i>\r\n                      <p>\r\n                        Almacen\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </a>\r\n                    <ul className=\"nav nav-treeview\">\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Productos</p>\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen/categorias\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen/categorias\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Categorias</p>\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen/marcas\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen/marcas\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Marcas</p>\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen/inventario\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen/marcas\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Inventario</p>\r\n                        </Link>\r\n                      </li>\r\n                    </ul>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/usuarios\"\r\n                      className={\r\n                        active === \"usuarios\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/usuarios\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-user\"></i>\r\n                      <p>\r\n                        Usuarios\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/configuraciones\"\r\n                      className={\r\n                        active === \"configuraciones\"\r\n                          ? \"nav-link active\"\r\n                          : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/configuraciones\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-tools\"></i>\r\n                      <p>\r\n                        Configuraciones\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                </React.Fragment>\r\n              ) : null}\r\n\r\n              <li className=\"nav-item\">\r\n                <Link to=\"/\" className=\"nav-link\" onClick={this.handleLogOut}>\r\n                  <i className=\"nav-icon fas fa-sign-out-alt\"></i>\r\n                  <p>Cerrar sesion</p>\r\n                </Link>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n\r\n  handleLogOut = (e) => {\r\n    e.preventDefault();\r\n    window.Swal.fire({\r\n      title: \"Session\",\r\n      text: \"¿Esta seguro de cerrar la sesion?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Si\",\r\n      cancelButtonText: \"Cancelar\",\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        this.props.logOut();\r\n        this.changePage(\"/\");\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport default Menu;\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nexport default class Breadcrumb extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: moment().format(\"LLLL\"),\r\n    };\r\n    setInterval(() => {\r\n      console.log(\"Actualizando hora de sistema\");\r\n      this.setState({\r\n        date: moment().format(\"LLLL\"),\r\n      });\r\n    }, 60000);\r\n  }\r\n  render() {\r\n    const { title } = this.props;\r\n    return (\r\n      <div className=\"content-header\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6\">\r\n              <h1 className=\"m-0 text-dark text-capitalize\">{title}</h1>\r\n            </div>\r\n            <div className=\"col\">\r\n              <h6 className=\"text-dark text-right\">{this.state.date}</h6>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nclass Footer extends Component {\r\n  render() {\r\n    return (\r\n      <footer className=\"main-footer d-print-none\">\r\n        <div className=\"float-right d-none d-sm-inline\">V2.0</div>\r\n        <strong>\r\n          Copyright &copy; 2015-2020 <a href=\"#end\">Orus</a>.\r\n        </strong>{\" \"}\r\n        Todos los derechos reservados.\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Footer;\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class HeaderTable extends Component {\r\n  render() {\r\n    let { data, order, orderby, actions } = this.props;\r\n\r\n    if (data.length) {\r\n      return (\r\n        <thead className=\"thead-light\">\r\n          <tr>\r\n            {data.map((col, index) => {\r\n              if (col.filter) {\r\n                return (\r\n                  <th\r\n                    scope=\"col\"\r\n                    key={index}\r\n                    onClick={() => {\r\n                      this.handleOrder(col.type);\r\n                    }}\r\n                    style={{\r\n                      cursor: order === \"desc\" ? \"n-resize\" : \"s-resize\",\r\n                    }}\r\n                  >\r\n                    {col.name}\r\n                    {orderby === col.type ? (\r\n                      <span className=\"ml-2\">\r\n                        <i className=\"fas fa-sort text-primary\"></i>\r\n                      </span>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </th>\r\n                );\r\n              } else {\r\n                return (\r\n                  <th scope=\"col\" key={index}>\r\n                    {col.name}\r\n                  </th>\r\n                );\r\n              }\r\n            })}\r\n            {actions ? <th className=\"text-center\">Acciones</th> : \"\"}\r\n          </tr>\r\n        </thead>\r\n      );\r\n    } else {\r\n      return (\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\" className=\"text-center\">\r\n              No hay datos de columnas\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleOrder = (item) => {\r\n    this.props.handleOrder(item);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Pagination extends Component {\r\n  render() {\r\n    let { meta } = this.props;\r\n    if (meta.total > 10) {\r\n      return (\r\n        <div className=\"btn-group\">\r\n          <ul className=\"pagination pagination-sm\">\r\n            <li\r\n              className={\r\n                meta.current_page === 1 ? \"page-item disabled\" : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === 1\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(1);\r\n                }}\r\n              >\r\n                Primero\r\n              </a>\r\n            </li>\r\n\r\n            <li\r\n              className={\r\n                meta.current_page === 1 ? \"page-item disabled\" : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === 1\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(meta.current_page - 1);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-step-backward\"></i>\r\n              </a>\r\n            </li>\r\n\r\n            <li className=\"page-item\">\r\n              <span className=\"page-link\">\r\n                {meta.current_page} /{\" \"}\r\n                {Math.ceil(meta.total / meta.per_page).toFixed(0)}\r\n              </span>\r\n            </li>\r\n\r\n            <li\r\n              className={\r\n                meta.current_page === meta.last_page\r\n                  ? \"page-item disabled\"\r\n                  : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === meta.last_page\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(meta.current_page + 1);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-step-forward\"></i>\r\n              </a>\r\n            </li>\r\n\r\n            <li\r\n              className={\r\n                meta.current_page === meta.last_page\r\n                  ? \"page-item disabled\"\r\n                  : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === meta.last_page\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(meta.last_page);\r\n                }}\r\n              >\r\n                Ultimo\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      );\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  handleChangePage = (page) => {\r\n    this.props.handleChangePage(page);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, rol } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: nombre, usuario o email\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Rol</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"rol\"\r\n                    value={rol}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Administrador</option>\r\n                    <option value=\"1\">Ventas</option>\r\n                    <option value=\"2\">Optometrista</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      this.props.search || this.props.rol\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"rol\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class ActionsTable extends Component {\r\n  render() {\r\n    const { item, edit, id } = this.props;\r\n    return (\r\n      <td className=\"text-right\">\r\n        {this.props.delete ? (\r\n          <a\r\n            className=\"btn-flat text-dark mr-4\"\r\n            href=\"#delete\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              this.handleDelete(id, item);\r\n            }}\r\n          >\r\n            <i className=\"fas fa-trash\"></i>\r\n          </a>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {edit ? (\r\n          <Link className=\"btn-flat text-dark\" to={edit + id}>\r\n            <i className=\"fas fa-pencil-alt\"></i>\r\n          </Link>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </td>\r\n    );\r\n  }\r\n\r\n  handleDelete = (id, item) => {\r\n    this.props.delete(id, item);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Filters from \"./index_filter\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Users extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusUsers\"));\r\n    this.state = {\r\n      users: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"asc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      rol: sdd ? sdd.rol : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getUsers();\r\n    localStorage.setItem(\r\n      \"OrusUsers\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        rol: this.state.rol,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando usuarios y almacenando configuracion\");\r\n      localStorage.setItem(\r\n        \"OrusUsers\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          rol: this.state.rol,\r\n        })\r\n      );\r\n      this.getUsers();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { users, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"usuario\", type: \"username\", filter: true },\r\n        { name: \"nombre\", type: \"name\", filter: true },\r\n        { name: \"e-mail\", type: \"email\", filter: true },\r\n        { name: \"Rol\", type: \"rol\", filter: true },\r\n        { name: \"Actividad\", type: \"session\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-header\">\r\n          <h2 className=\"card-title text-primary\">\r\n            <i className=\"fas fa-user mr-1\"></i>\r\n            Usuarios registrados\r\n          </h2>\r\n          <div className=\"card-tools\">\r\n            <Filters\r\n              search={this.state.search}\r\n              rol={this.state.rol}\r\n              changeFilters={this.changeFilters}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={users.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"9\" className=\"alert alert-light text-center p-4\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(users.data).length ? (\r\n                users.data.map((user) => {\r\n                  return (\r\n                    <tr key={user.id}>\r\n                      <th scope=\"row\">\r\n                        <span className=\"text-capitalize text-primary\">\r\n                          {user.username}\r\n                        </span>\r\n                      </th>\r\n                      <td>\r\n                        <Link to={\"/usuarios/registro/\" + user.id}>\r\n                          <span className=\"badge badge-primary text-capitalize p-1\">\r\n                            {user.name}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td>{user.email}</td>\r\n                      <td>\r\n                        {user.rol > 0 ? (\r\n                          user.rol === 1 ? (\r\n                            <span className=\"text-capitalize text-success\">\r\n                              <i className=\"fas fa-user-tag mr-2\"></i>\r\n                              Ventas\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"text-capitalize text-primary\">\r\n                              <i className=\"fas fa-user-tie mr-2\"></i>\r\n                              Optometrista\r\n                            </span>\r\n                          )\r\n                        ) : (\r\n                          <span className=\"text-capitalize text-danger\">\r\n                            <i className=\"fas fa-user-shield mr-2\"></i>\r\n                            Administrador\r\n                          </span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {user.session\r\n                          ? moment(user.session.last_activity).fromNow()\r\n                          : \"--\"}\r\n                      </td>\r\n                      <td>{moment(user.updated_at).fromNow()}</td>\r\n                      <td className=\"text-right\">\r\n                        {moment(user.created_at).format(\"ll\")}\r\n                      </td>\r\n                      <Actions\r\n                        id={user.id}\r\n                        item={user.username}\r\n                        delete={this.handleDelete}\r\n                        edit={\"/usuarios/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"8\" className=\"alert alert-info text-center\">\r\n                    <i className=\"fas fa-info mr-2\"></i>\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/usuarios/registro\"\r\n            className=\"btn btn-outline-primary btn-lg\"\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            Nuevo usuario\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeFilters = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (page) => {\r\n    this.setState({\r\n      page,\r\n      load: true,\r\n    });\r\n  };\r\n  handleDelete = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el usuario \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de usuario por API\");\r\n          return fetch(\"http://\" + host + \"/api/users/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Usuario eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Usuario eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getUsers());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getUsers = () => {\r\n    let { load, host, token } = this.state,\r\n      url = \"http://\" + host + \"/api/users\",\r\n      orderby = `&orderby=${this.state.orderby}&order=${this.state.order}`,\r\n      search = this.state.search ? `&search=${this.state.search}` : \"\",\r\n      rol = this.state.rol.length > 0 ? `&rol=${this.state.rol}` : \"\",\r\n      page = this.state.page > 0 ? \"?page=\" + this.state.page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de los usuarios\r\n    console.log(\"Solicitando usuarios a la API\");\r\n    fetch(url + page + orderby + search + rol, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Descargando usuarios\");\r\n          this.setState({\r\n            users: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar usuarios\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class UserName extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: \"bg-blue\",\r\n      validate: \"\",\r\n      text: \"Debe de tener al menos 4 caracteres.\",\r\n      searchUser: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { col, username } = this.props;\r\n    let { bgColor, validate, text, searchUser } = this.state;\r\n\r\n    return (\r\n      <div className={\"col-\" + col}>\r\n        {username.length ? (\r\n          <small>\r\n            <label>Usuario</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              {searchUser ? (\r\n                <i className=\"fas fa-spinner\"></i>\r\n              ) : (\r\n                <i className=\"fas fa-user-check\"></i>\r\n              )}\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className={\"form-control\" + validate}\r\n            placeholder=\"Usuario\"\r\n            name=\"username\"\r\n            autoComplete=\"off\"\r\n            autoFocus=\"autofocus\"\r\n            value={username}\r\n            onChange={this.handleChange}\r\n            required=\"required\"\r\n            minLength=\"4\"\r\n            maxLength=\"16\"\r\n            pattern=\"^[\\w]{4,16}$\"\r\n          />\r\n        </div>\r\n        {validate ? <small className=\"text-muted\">{text}</small> : \"\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    let regex = /^[\\w]{4,16}$/,\r\n      x = {\r\n        target: {\r\n          name: \"validUserName\",\r\n          value: \"\",\r\n        },\r\n      };\r\n    e.target.value = value.replace(/ /g, \"\").toLowerCase();\r\n\r\n    if (regex.test(value)) {\r\n      this.validUser(e.target.value, x);\r\n    } else {\r\n      if (value.length > 4) {\r\n        this.setState({\r\n          bgColor: \"bg-red\",\r\n          validate: \" border border-danger\",\r\n          text: \"No tiene el formato de usuario\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      } else if (!value.length) {\r\n        this.setState({\r\n          bgColor: \"bg-blue\",\r\n          validate: \" border border-danger\",\r\n          text: \"Debe de tener de 4 a 16 caracteres alfanumericos.\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      }\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validUser = (name, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/users\",\r\n      username = \"?username=\" + name;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de los usuarios\r\n      this.setState({\r\n        searchUser: true,\r\n      });\r\n      fetch(url + username, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            if (\r\n              data.data.length &&\r\n              data.data[0].username.toLowerCase() === name\r\n            ) {\r\n              this.setState({\r\n                bgColor: \"bg-red\",\r\n                validate: \" border border-danger\",\r\n                text: \"El usuario ya esta registrado.\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = false;\r\n              this.props.onChange(x);\r\n            } else {\r\n              this.setState({\r\n                bgColor: \"bg-blue\",\r\n                validate: \"\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = true;\r\n              this.props.onChange(x);\r\n            }\r\n          } else {\r\n            console.error(\"Error en la descarga de usuarios\", data.message);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class UserName extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: \"bg-blue\",\r\n      validate: \"\",\r\n      text: \"No tiene el formato de un email\",\r\n      searchUser: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { col, email } = this.props;\r\n    let { bgColor, validate, text } = this.state;\r\n\r\n    return (\r\n      <div className={\"col-\" + col}>\r\n        {email.length ? (\r\n          <small>\r\n            <label>Usuario</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              <i className=\"fas fa-at\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"email\"\r\n            className={\"form-control\" + validate}\r\n            placeholder=\"email\"\r\n            name=\"email\"\r\n            autoComplete=\"off\"\r\n            value={email}\r\n            onChange={this.handleChange}\r\n            required=\"required\"\r\n          />\r\n        </div>\r\n        {validate ? <small className=\"text-muted\">{text}</small> : \"\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    let regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n      x = {\r\n        target: {\r\n          name: \"validUserEmail\",\r\n          value: true,\r\n        },\r\n      };\r\n    e.target.value = value.replace(/\\s/g, \"\").toLowerCase();\r\n    if (regex.test(value)) {\r\n      this.validEmail(e.target.value, x);\r\n    } else {\r\n      if (value.length > 8) {\r\n        this.setState({\r\n          bgColor: \"bg-red\",\r\n          validate: \" border border-danger\",\r\n          text: \"No tiene el formato de un email\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      } else if (!value.length) {\r\n        this.setState({\r\n          bgColor: \"bg-blue\",\r\n          validate: \"\",\r\n          text: \"No tiene el formato de un email\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      }\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validEmail = (search, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/users\",\r\n      email = \"?email=\" + search;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de los usuarios\r\n      this.setState({\r\n        searchUser: true,\r\n      });\r\n      //Realiza la peticion de los usuarios\r\n      fetch(url + email, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            if (\r\n              data.data.length &&\r\n              data.data[0].email.toLowerCase() === search\r\n            ) {\r\n              this.setState({\r\n                bgColor: \"bg-red\",\r\n                validate: \" border border-danger\",\r\n                text: \"El email ya esta registrado.\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = false;\r\n              this.props.onChange(x);\r\n            } else {\r\n              this.setState({\r\n                bgColor: \"bg-blue\",\r\n                validate: \"\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = true;\r\n              this.props.onChange(x);\r\n            }\r\n          } else {\r\n            console.error(\"Error en la descarga de usuarios\", data.message);\r\n            this.setState({\r\n              bgColor: \"bg-red\",\r\n              validate: \" border border-danger\",\r\n              text: \"Error en la consulta\",\r\n              searchUser: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport UserName from \"./userNameInput\";\r\nimport UserEmail from \"./userEmailInput\";\r\n\r\nexport default class UserAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      rol: 1,\r\n      username: \"\",\r\n      validUserName: false,\r\n      name: \"\",\r\n      email: \"\",\r\n      validUserEmail: false,\r\n      password: \"\",\r\n      updated_at: \"\",\r\n      created_at: \"\",\r\n      session: {},\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    let id = this.props.match.params.id;\r\n    if (id) {\r\n      this.getUser(id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let {\r\n        load,\r\n        id,\r\n        rol,\r\n        username,\r\n        name,\r\n        email,\r\n        password,\r\n        updated_at,\r\n        created_at,\r\n        session,\r\n        validUserName,\r\n        validUserEmail,\r\n      } = this.state,\r\n      send =\r\n        !load && validUserName && name.length && validUserEmail ? false : true;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <form\r\n            className=\"card card-primary card-outline\"\r\n            onSubmit={this.handleSave}\r\n          >\r\n            <div className=\"card-header\">\r\n              <h1 className=\"card-title text-primary\">\r\n                <i className=\"fas fa-user mr-2\"></i>\r\n                {id ? \"Editar usuario\" : \"Registrar nuevo usuario\"}\r\n              </h1>\r\n            </div>\r\n            <div className=\"card-body was-validated\">\r\n              {load ? (\r\n                <div className=\"alert alert-light text-center p-4\">\r\n                  <div className=\"spinner-border text-primary\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <React.Fragment>\r\n                  <div className=\"row mb-3\">\r\n                    <UserName\r\n                      username={username}\r\n                      col={6}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                    <div className=\"col-6\">\r\n                      {name.length ? (\r\n                        <small>\r\n                          <label>Nombre completo</label>\r\n                        </small>\r\n                      ) : (\r\n                        <br />\r\n                      )}\r\n                      <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                          <span className=\"input-group-text bg-blue\">\r\n                            <i className=\"fas fa-user-tag\"></i>\r\n                          </span>\r\n                        </div>\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control text-capitalize\"\r\n                          placeholder=\"Nombre completo\"\r\n                          name=\"name\"\r\n                          autoComplete=\"off\"\r\n                          value={name}\r\n                          onChange={this.catchInputs}\r\n                          required=\"required\"\r\n                          minLength=\"8\"\r\n                          pattern=\"^[a-zA-Z]{2,20}[\\s]{1}[a-zA-Z]{2,20}.*\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                      {password.length || id ? (\r\n                        <small>\r\n                          <label>Contraseña</label>\r\n                          {id ? (\r\n                            \"\"\r\n                          ) : (\r\n                            <span className=\"ml-2\">\r\n                              De 8 a 16 caracteres, por lo menos una mayuscula,\r\n                              un numero y un caracter especial\r\n                            </span>\r\n                          )}\r\n                        </small>\r\n                      ) : (\r\n                        <br />\r\n                      )}\r\n                      <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                          <span className=\"input-group-text bg-blue\">\r\n                            <i className=\"fas fa-lock\"></i>\r\n                          </span>\r\n                        </div>\r\n                        <input\r\n                          type=\"password\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Contraseña\"\r\n                          name=\"password\"\r\n                          autoComplete=\"off\"\r\n                          value={password}\r\n                          onChange={this.catchInputs}\r\n                          required={id ? false : true}\r\n                          minLength=\"8\"\r\n                          maxLength=\"16\"\r\n                          pattern=\"^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <UserEmail\r\n                      email={email}\r\n                      col={6}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                      <small>\r\n                        <label>Rol</label>\r\n                      </small>\r\n                      <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                          <span className=\"input-group-text bg-blue\">\r\n                            <i className=\"fas fa-id-card\"></i>\r\n                          </span>\r\n                        </div>\r\n                        <select\r\n                          className=\"custom-select\"\r\n                          name=\"rol\"\r\n                          value={rol}\r\n                          onChange={this.catchInputs}\r\n                        >\r\n                          <option value=\"0\">Administrador</option>\r\n                          <option value=\"1\">Ventas</option>\r\n                          <option value=\"2\">Optometrista</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </React.Fragment>\r\n              )}\r\n            </div>\r\n            <div className=\"card-footer\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12 text-right\">\r\n                  <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                    <Link\r\n                      to=\"/usuarios\"\r\n                      className=\"btn btn-dark\"\r\n                      onClick={this.changePage}\r\n                      id=\"/usuarios\"\r\n                    >\r\n                      <i className=\"fas fa-ban mr-1\"></i>\r\n                      Cancelar\r\n                    </Link>\r\n                    <button\r\n                      type=\"submit\"\r\n                      className={\r\n                        load ? \"btn btn-primary disabled\" : \"btn btn-primary\"\r\n                      }\r\n                      disabled={send ? true : false}\r\n                    >\r\n                      <i className=\"fas fa-save mr-1\"></i>\r\n                      Guardar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        {id ? (\r\n          <div className=\"col\">\r\n            <div className=\"card card-primary card-outline\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title text-primary\">\r\n                  <i className=\"fas fa-database mr-2\"></i>\r\n                  Metadata\r\n                </h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                {session ? (\r\n                  <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                      <h6>Datos del usuario</h6>\r\n                      <div className=\"row\">\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">Registrado</span>\r\n                          <p>{moment(created_at).fromNow()}</p>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">\r\n                            Ultima actualizacion\r\n                          </span>\r\n                          <p>{moment(updated_at).fromNow()}</p>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                      <h6>Actividad</h6>\r\n                      <div className=\"row\">\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">IP</span>\r\n                          <p>{session.ip_address}</p>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">Ultima actividad</span>\r\n                          <p>{moment(session.last_activity).fromNow()}</p>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                      <span className=\"text-primary\">Navegador y OS</span>\r\n                      <p>{session.user_agent}</p>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                      <span className=\"text-primary\">Token</span>\r\n                      <p>{session.user_data}</p>\r\n                    </li>\r\n                  </ul>\r\n                ) : (\r\n                  <p>Usuario no ha registrado actividad.</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changePage = (e) => {\r\n    this.props.page(e.target.id);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n\r\n    let { id, validUserName, validUserEmail } = this.state;\r\n\r\n    //Verificamos campos validos\r\n    if (!validUserName) {\r\n      window.Swal.fire({\r\n        icon: \"error\",\r\n        title: \"El nombre de usuario ya esta en uso\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n      return false;\r\n    }\r\n    if (!validUserEmail) {\r\n      window.Swal.fire({\r\n        icon: \"error\",\r\n        title: \"El correo ya esta en uso\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el usuario?\"\r\n        : \"¿Esta seguro de crear un nuevo usuario?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let {\r\n              host,\r\n              token,\r\n              id,\r\n              name,\r\n              username,\r\n              rol,\r\n              password,\r\n              email,\r\n            } = this.state,\r\n            body = {\r\n              name,\r\n              username,\r\n              rol,\r\n              email,\r\n            },\r\n            url = id\r\n              ? \"http://\" + host + \"/api/users/\" + id\r\n              : \"http://\" + host + \"/api/users\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n\r\n          //Agregamos el password si no esta vacio\r\n          if (password.length > 8) body.password = password;\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del usuario a API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Usuario almacenado\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Usuario actualizado con exito\"\r\n              : \"Usuario almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => this.props.history.goBack());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el usuario\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getUser = (id) => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state;\r\n    if (id > 0) {\r\n      fetch(\"http://\" + host + \"/api/users/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.data) {\r\n            console.log(\"Cargando datos de usuario\");\r\n            this.setState({\r\n              id: data.data.id,\r\n              rol: data.data.rol,\r\n              username: data.data.username,\r\n              name: data.data.name,\r\n              email: data.data.email,\r\n              updated_at: data.data.updated_at,\r\n              created_at: data.data.created_at,\r\n              session: data.data.session,\r\n              load: false,\r\n              validUserName: true,\r\n              validUserEmail: true,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\r\n              \"Error\",\r\n              \"Error en el sistema, comuniquese con el administrador de sistema\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: codigo o producto\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Store extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusStore\"));\r\n    this.state = {\r\n      items: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"desc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getItems();\r\n    localStorage.setItem(\r\n      \"OrusStore\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando productos\");\r\n      this.getItems();\r\n      localStorage.setItem(\r\n        \"OrusStore\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { items, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Codigo\" },\r\n        { name: \"Marca\", type: \"brand\", filter: true },\r\n        { name: \"Producto\", type: \"name\", filter: true },\r\n        { name: \"PS\" },\r\n        { name: \"UND\" },\r\n        { name: \"Precio\", type: \"price\", filter: true },\r\n        { name: \"Proveedor\", type: \"contact_id \", filter: true },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-primary\">\r\n            <i className=\"fas fa-database mr-1\"></i>\r\n            Productos en almacen\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/almacen/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={this.changePage}\r\n              id=\"/almacen/registro\"\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={this.state.search}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={items.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center\">\r\n                    <span className=\"text-primary\">Cargando productos</span>\r\n                    <div\r\n                      className=\"spinner-border text-primary ml-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(items.data).length ? (\r\n                items.data.map((item) => {\r\n                  return (\r\n                    <tr key={item.id}>\r\n                      <td>\r\n                        <span className=\"text-primary text-uppercase\">\r\n                          {item.codigo}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {item.marca !== null ? item.marca.marca : \"--\"}\r\n                      </td>\r\n                      <td>\r\n                        <Link to={\"/almacen/registro/\" + item.id}>\r\n                          <span className=\"badge badge-primary text-capitalize p-1\">\r\n                            {item.producto}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-right\">{item.unidad}</td>\r\n                      <td>\r\n                        <span\r\n                          className={\r\n                            item.cantidades > 0 ? \"text-success\" : \"text-danger\"\r\n                          }\r\n                        >\r\n                          {item.cantidades > 0 ? item.cantidades : 0}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-right\">$ {item.precio.toFixed(2)}</td>\r\n                      <td className=\"text-capitalize\">\r\n                        {item.proveedor !== null\r\n                          ? item.proveedor.nombre.split(\" \").length\r\n                            ? item.proveedor.nombre.split(\" \")[0]\r\n                            : item.proveedor.nombre\r\n                          : \"--\"}\r\n                      </td>\r\n                      <td className=\"text-capitalize\">\r\n                        {moment(item.updated_at).fromNow()}\r\n                      </td>\r\n                      <td className=\"text-capitalize\">\r\n                        {moment(item.created_at).format(\"LL\")}\r\n                      </td>\r\n                      <Actions\r\n                        id={item.id}\r\n                        item={item.producto}\r\n                        delete={\r\n                          item.lotes || item.cantidades\r\n                            ? null\r\n                            : this.handleDelete\r\n                        }\r\n                        edit={\"/almacen/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"btn-group\" role=\"group\">\r\n                <Link\r\n                  to=\"/almacen/registro\"\r\n                  className=\"btn btn-outline-primary\"\r\n                  onClick={this.changePage}\r\n                  id=\"/almacen/registro\"\r\n                >\r\n                  <i className=\"fas fa-plus mr-1\"></i>\r\n                  Nuevo producto\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e.target.id);\r\n  };\r\n  handleDelete = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el producto \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de producto por API\");\r\n          return fetch(\"http://\" + host + \"/api/store/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Producto eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Producto eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getItems());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getItems() {\r\n    //Variables\r\n    const { load, orderby, order, search, page, host, token } = this.state,\r\n      url = \"http://\" + host + \"/api/store\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search.replace(\"+\", \"%2b\")}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de los contactos\r\n    console.log(\"Descargando productos de API\");\r\n    fetch(url + pagina + ordenar + buscar, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenando productos\");\r\n          this.setState({\r\n            items: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message, data.errors);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nclass StoreLote extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      bill: \"\",\r\n      cost: 0,\r\n      price: this.props.price,\r\n      amount: 0,\r\n      lote: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      loteNew: false,\r\n      load: true,\r\n      page: 1,\r\n    };\r\n    this.handleNewLote = this.handleNewLote.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.catchInputs = this.catchInputs.bind(this);\r\n    this.handelGetLots = this.handelGetLots.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.handelGetLots(this.state.page);\r\n  }\r\n\r\n  render() {\r\n    let { lote, load } = this.state,\r\n      pages = [];\r\n    if (this.state.lote.meta.total > 10) {\r\n      for (var i = 1; i <= this.state.lote.meta.last_page; i++) {\r\n        pages.push(\r\n          <li\r\n            key={i}\r\n            className={\r\n              this.state.lote.meta.current_page === i\r\n                ? \"page-item disabled\"\r\n                : \"page-item\"\r\n            }\r\n          >\r\n            <a\r\n              href=\"#e\"\r\n              id={i}\r\n              className=\"page-link\"\r\n              onClick={this.handleChangePage.bind(this)}\r\n            >\r\n              {i}\r\n            </a>\r\n          </li>\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-primary\">\r\n            <i className=\"fas fa-list\"></i>\r\n            Listado de lotes\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            {this.state.lote.meta.total > 10 ? (\r\n              <div className=\"btn-group\">\r\n                <ul className=\"pagination pagination-sm\">{pages}</ul>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-hover table-nowrap\">\r\n            <thead>\r\n              <tr>\r\n                <th>Registrado</th>\r\n                <th style={{ width: 140 }}>Factura</th>\r\n                <th className=\"text-right\" style={{ width: 90 }}>\r\n                  Unidades\r\n                </th>\r\n                <th className=\"text-right\" style={{ width: 110 }}>\r\n                  Costo\r\n                </th>\r\n                <th className=\"text-right\" style={{ width: 110 }}>\r\n                  Precio\r\n                </th>\r\n                <th>Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"6\" className=\"text-center\">\r\n                    <span className=\"text-primary mr-4\">Cargando lotes</span>\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(lote.data).length ? (\r\n                lote.data.map((lot) => {\r\n                  return (\r\n                    <tr key={lot.id}>\r\n                      <td>{lot.created_at}</td>\r\n                      <td className=\"text-uppercase\">\r\n                        {lot.factura ? lot.factura : \"XXXX\"}\r\n                      </td>\r\n                      <td className=\"text-right\">{lot.cantidades}</td>\r\n                      <td className=\"text-right\">\r\n                        $ {lot.costo ? lot.costo : 0}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {lot.precio ? lot.precio : 0}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        <a\r\n                          className=\"btn-flat text-dark\"\r\n                          href=\"#delete\"\r\n                          onClick={(e) => {\r\n                            this.handleDelete(e, lot.id, lot.factura);\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-trash\"></i>\r\n                        </a>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"6\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n              {this.state.loteNew ? (\r\n                <tr>\r\n                  <th>Nuevo</th>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-uppercase\"\r\n                      type=\"text\"\r\n                      name=\"bill\"\r\n                      value={this.state.bill}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-right\"\r\n                      type=\"number\"\r\n                      name=\"amount\"\r\n                      min=\"1\"\r\n                      value={this.state.amount}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-right\"\r\n                      type=\"number\"\r\n                      name=\"cost\"\r\n                      value={this.state.cost}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-right\"\r\n                      type=\"number\"\r\n                      name=\"price\"\r\n                      value={this.state.price}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td className=\"text-right\">\r\n                    <div className=\"btn-group\" role=\"group\">\r\n                      <button\r\n                        className=\"btn btn-outline-primary btn-sm\"\r\n                        onClick={this.handleSave}\r\n                      >\r\n                        <i className=\"fas fa-save\"></i>\r\n                      </button>\r\n                      <button\r\n                        className=\"btn btn-outline-dark btn-sm\"\r\n                        onClick={this.handleNewLote}\r\n                      >\r\n                        <i className=\"fas fa-undo\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                <tr></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"btn-group float-right\" role=\"group\">\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={this.handleNewLote}\r\n                >\r\n                  Nuevo lote\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangePage(e) {\r\n    e.preventDefault();\r\n    this.setState({\r\n      page: e.target.id,\r\n    });\r\n    this.handelGetLots(e.target.id);\r\n  }\r\n  handleNewLote() {\r\n    this.setState({\r\n      loteNew: !this.state.loteNew,\r\n    });\r\n  }\r\n  catchInputs(e) {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  }\r\n  validInputs() {\r\n    //Datos del formulario\r\n    let { bill, price, amount } = this.state;\r\n    if (!bill.length) {\r\n      bill = \"XXXX\";\r\n    }\r\n    if (!price) {\r\n      price = 1000;\r\n    }\r\n    if (!amount) {\r\n      window.alert(\"La cantidad de articulos no puede ser cero\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  handleSave(e) {\r\n    e.preventDefault();\r\n\r\n    //Verificamos campos validos\r\n    if (!this.validInputs()) {\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de almacenar un nuevo lote?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Guardar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let ls = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n            { id, bill, cost, price, amount } = this.state,\r\n            body = {\r\n              bill,\r\n              cost,\r\n              price,\r\n              amount,\r\n              store_items_id: id,\r\n            };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del producto a API\");\r\n          return fetch(\"http://\" + ls.host + \"/api/items\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Lote almacenada\");\r\n          this.setState({\r\n            load: true,\r\n            loteNew: false,\r\n          });\r\n          window.Swal.fire(\"Lote guardado con exito\", \"\", \"success\").then(\r\n            (res) => {\r\n              this.handelGetLots(this.state.page);\r\n              this.props.refresh();\r\n            }\r\n          );\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el lote\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  handelGetLots(page) {\r\n    //Variables\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      id = this.props.id,\r\n      url =\r\n        \"http://\" + varLocalStorage.host + \"/api/items?store_items_id=\" + id;\r\n    fetch(url + \"&page=\" + page, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(\"Descargando lotes\");\r\n        this.setState({\r\n          id,\r\n          lote: data,\r\n          load: false,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n  handleDelete = (e, id, item) => {\r\n    e.preventDefault();\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el lote \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          const tr = e.target.parentNode.parentNode.parentNode;\r\n          tr.classList.add(\"bg-danger\");\r\n\r\n          let ls = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n            deleteColor = setInterval(() => {\r\n              clearInterval(deleteColor);\r\n              tr.classList.remove(\"bg-danger\");\r\n            }, 6500);\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de lote por API\");\r\n          return fetch(\"http://\" + ls.host + \"/api/items/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Producto eliminado\");\r\n        this.setState({\r\n          load: true,\r\n          loteNew: false,\r\n        });\r\n        window.Swal.fire(\"Lote eliminado con exito\", \"\", \"success\").then(\r\n          (res) => {\r\n            this.handelGetLots(this.state.page);\r\n            this.props.refresh();\r\n          }\r\n        );\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport default StoreLote;\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class InputCategory extends Component {\r\n  render() {\r\n    const {\r\n      categoryData,\r\n      categoryName,\r\n      category,\r\n      textSelect,\r\n      categoryRef,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"input-group mb-3\">\r\n        <div className=\"input-group-prepend\">\r\n          <span\r\n            className={\r\n              category\r\n                ? \"input-group-text bg-primary\"\r\n                : \"input-group-text bg-warning\"\r\n            }\r\n          >\r\n            <i className=\"fas fa-sort-amount-down\"></i>\r\n          </span>\r\n        </div>\r\n        <select\r\n          className=\"custom-select text-uppercase\"\r\n          name={categoryName}\r\n          value={category}\r\n          onChange={this.handleChangeCategory}\r\n          ref={categoryRef}\r\n        >\r\n          <option value=\"0\">{textSelect}</option>\r\n          {categoryData.map((cat) => {\r\n            return (\r\n              <option value={cat.id} key={cat.id}>\r\n                {cat.categoria ? cat.categoria : cat.name}\r\n              </option>\r\n            );\r\n          })}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangeCategory = (e) => {\r\n    const { value } = e.target,\r\n      { categoryData, handleChangeCategory } = this.props;\r\n    let search = parseInt(value),\r\n      category = categoryData.find((i) => i.id === search);\r\n    if (!search) {\r\n      category = {\r\n        id: 0,\r\n      };\r\n    }\r\n\r\n    handleChangeCategory(category);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class SuppliersInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      suppliers_data: [],\r\n      text: \"\",\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      suppliers_data: [],\r\n    });\r\n    this.getSuppliers();\r\n  }\r\n  render() {\r\n    const { suppliers_data } = this.state,\r\n      { supplier, handleChangeSupplier, supplierRef } = this.props;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <small>\r\n            <label>Proveedor</label>\r\n          </small>\r\n          {suppliers_data.length ? (\r\n            <div className=\"input-group mb-3\">\r\n              <div className=\"input-group-prepend\">\r\n                <span\r\n                  className={\r\n                    supplier\r\n                      ? \"input-group-text bg-primary\"\r\n                      : \"input-group-text bg-warning\"\r\n                  }\r\n                >\r\n                  <i className=\"fas fa-address-book\"></i>\r\n                </span>\r\n              </div>\r\n              <select\r\n                className=\"custom-select text-uppercase\"\r\n                name=\"supplier\"\r\n                value={supplier}\r\n                ref={supplierRef}\r\n                onChange={(e) => {\r\n                  const { value } = e.target;\r\n                  handleChangeSupplier(parseInt(value));\r\n                }}\r\n              >\r\n                <option value=\"0\">Seleccione un Proveedor</option>\r\n                {suppliers_data.map((sp) => {\r\n                  return (\r\n                    <option value={sp.id} key={sp.id}>\r\n                      {sp.nombre}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-left\">\r\n              <span className=\"text-dark\">Descargando proveedores</span>\r\n              <div className=\"spinner-border text-primary ml-4\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getSuppliers = () => {\r\n    //Variables\r\n    let { host, token } = this.state;\r\n\r\n    console.log(\"solicitando proveedores al API\");\r\n    fetch(\"http://\" + host + \"/api/contacts?type=1\", {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data !== null) {\r\n          console.log(\"Cargando proveedores\");\r\n          this.setState({\r\n            suppliers_data: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\r\n            \"Error\",\r\n            \"Error al descargar los proveedores\",\r\n            \"error\"\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class InputBrand extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      brands: [],\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getBrands();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.supplier !== this.props.supplier) {\r\n      this.setState({\r\n        brands: [],\r\n      });\r\n      this.getBrands();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { brandsName, brand, textSelect, brandRef } = this.props,\r\n      { brands } = this.state;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <small>\r\n            <label>Marca</label>\r\n          </small>\r\n          {brands.length ? (\r\n            <div className=\"input-group mb-3\">\r\n              <div className=\"input-group-prepend\">\r\n                <span\r\n                  className={\r\n                    brand\r\n                      ? \"input-group-text bg-primary\"\r\n                      : \"input-group-text bg-warning\"\r\n                  }\r\n                >\r\n                  <i className=\"fas fa-copyright\"></i>\r\n                </span>\r\n              </div>\r\n              <select\r\n                className=\"custom-select text-uppercase\"\r\n                name={brandsName}\r\n                value={brand}\r\n                ref={brandRef}\r\n                onChange={this.handleChangeCategory}\r\n              >\r\n                <option value=\"0\">{textSelect}</option>\r\n                {brands.map((brand) => {\r\n                  return (\r\n                    <option value={brand.id} key={brand.id}>\r\n                      {brand.nombre}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-left\">\r\n              <span className=\"text-dark\">Descargando marcas</span>\r\n              <div className=\"spinner-border text-primary ml-4\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangeCategory = (e) => {\r\n    const { value } = e.target,\r\n      { handleChangeBrand } = this.props;\r\n    handleChangeBrand(parseInt(value));\r\n  };\r\n  getBrands = () => {\r\n    //Constantes\r\n    const { host, token } = this.state,\r\n      { supplier } = this.props;\r\n\r\n    console.log(\"solicitando marcas al API\");\r\n    fetch(\"http://\" + host + \"/api/brands?supplier=\" + supplier, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        if (data.data !== null) {\r\n          console.log(\"descargando marcas\");\r\n          this.setState({\r\n            brands: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Error al descargar las marcas\", \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","export default (string) => {\r\n  switch (string) {\r\n    case \"monofocales\":\r\n      return \"MF\";\r\n    case \"bifocales\":\r\n      return \"BF\";\r\n    case \"progresivo basico\":\r\n    case \"progresivo-basico\":\r\n      return \"PB\";\r\n    case \"progresivo digital\":\r\n    case \"progresivo-digital\":\r\n      return \"PD\";\r\n    case \"plastico\":\r\n      return \"CR\";\r\n    case \"policarbonato\":\r\n      return \"PL\";\r\n    case \"hi-index\":\r\n    case \"hi index\":\r\n      return \"HI\";\r\n    case \"antirreflejantes\":\r\n      return \"AR\";\r\n    case \"photo\":\r\n      return \"PH\";\r\n    case \"ar & photo\":\r\n    case \"antirreflejante-photo\":\r\n      return \"ARPH\";\r\n    case \"blanco\":\r\n      return \"BL\";\r\n    case \"polarizado\":\r\n      return \"PO\";\r\n    case \"bifocal invisible\":\r\n    case \"bifocal-invisible\":\r\n      return \"BI\";\r\n    case \"monofocal drivesafe\":\r\n    case \"monofocal-drivesafe\":\r\n    case \"monofocal digital drivesafe\":\r\n    case \"monofocal digital DriveSafe\":\r\n      return \"MDSF\";\r\n    case \"monofocal superb\":\r\n    case \"monofocal-superb\":\r\n    case \"monofocal digital superb\":\r\n      return \"MDSU\";\r\n    case \"monofocal individual\":\r\n    case \"monofocal-individual\":\r\n    case \"monofocal digital individual\":\r\n      return \"MDIN\";\r\n    default:\r\n      return \"XX\";\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StoreLote from \"./add_lote\";\r\nimport InputCategory from \"./input_category\";\r\nimport Suppliers from \"./input_suppliers\";\r\nimport Brands from \"./input_brand\";\r\nimport Codestring from \"../Layouts/codeLentString\";\r\n\r\nexport default class StoreAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const id = this.props.match.params.id;\r\n    this.state = {\r\n      id: id ? id : 0,\r\n      code: \"\",\r\n      codebar: \"\",\r\n      grad: \"\",\r\n      brand_id: 0,\r\n      name: \"\",\r\n      unit: \"PZ\",\r\n      cant: 1,\r\n      price: 1,\r\n      supplier: 0,\r\n      category_id: 0,\r\n      category_data: {},\r\n      category_id1: 0,\r\n      category_id2: 0,\r\n      category_id3: 0,\r\n      category_id4: 0,\r\n      category_list1: [],\r\n      category_list2: [],\r\n      category_list3: [],\r\n      category_list4: [],\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.category1 = React.createRef(); //Primera categoria\r\n    this.category2 = React.createRef(); //Segunda categoria\r\n    this.category3 = React.createRef(); //Tercera categoria\r\n    this.category4 = React.createRef(); //Cuarta categoria\r\n    this.supplierRef = React.createRef(); //Referencia de proveedor\r\n    this.brandRef = React.createRef(); //Referencia de proveedor\r\n    this.codeRef = React.createRef(); //Referencia del codigo\r\n    this.nameRef = React.createRef(); //REferencia del nombre del producto\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    const { id } = this.state;\r\n    this.getItem(id);\r\n    this.getCategory();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    const {\r\n      category_list1,\r\n      category_id,\r\n      category_id1,\r\n      category_id2,\r\n      category_id3,\r\n    } = this.state;\r\n\r\n    if (state.category_id !== category_id) {\r\n      if (state.category_id1 !== category_id1 && category_id1 !== 0) {\r\n        const next = category_list1.find((e) => e.id === category_id1);\r\n        if (next) {\r\n          this.setState({\r\n            category_list2: next.hijos,\r\n          });\r\n        }\r\n      }\r\n      if (state.category_id2 !== category_id2 && category_id2 !== 0) {\r\n        const next = category_list1.find((e) => e.id === category_id2);\r\n        if (next) {\r\n          this.setState({\r\n            category_list3: next.hijos,\r\n          });\r\n        }\r\n      }\r\n      if (state.category_id3 !== category_id3 && category_id3 !== 0) {\r\n        const next = category_list1.find((e) => e.id === category_id3);\r\n        if (next) {\r\n          this.setState({\r\n            category_list4: next.hijos,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      load,\r\n      supplier,\r\n      category_id,\r\n      category_id1,\r\n      category_id2,\r\n      category_id3,\r\n      category_id4,\r\n      category_list1,\r\n      category_list2,\r\n      category_list3,\r\n      category_list4,\r\n      brand_id,\r\n      code,\r\n      name,\r\n      grad,\r\n      unit,\r\n      cant,\r\n      price,\r\n    } = this.state;\r\n    let codeValue = code,\r\n      nameValue = name;\r\n\r\n    if (\r\n      this.category1.current !== null &&\r\n      this.category1.current.value * 1 === 2\r\n    ) {\r\n      if (name.length <= 3) {\r\n        nameValue = this.handleCodeString(codeValue);\r\n      }\r\n    } else if (\r\n      this.category1.current !== null &&\r\n      this.category1.current.value * 1 === 1\r\n    ) {\r\n      if (code.length <= 3) {\r\n        codeValue = this.handleCodeLent(grad);\r\n      }\r\n      if (name.length <= 3) {\r\n        nameValue = this.handleNameLent(grad);\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className={id ? \"col-5\" : \"col-6\"}>\r\n          <form\r\n            className=\"card card-primary card-outline\"\r\n            onSubmit={this.handleSave}\r\n          >\r\n            <div className=\"card-header\">\r\n              <h3 className=\"card-title text-primary\">\r\n                <i className=\"fas fa-database mr-1\"></i>\r\n                {id ? \"Editar producto\" : \"Registrar nuevo producto\"}\r\n              </h3>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {category_list1 && category_list1.length && !load ? (\r\n                <React.Fragment>\r\n                  <div className=\"row\">\r\n                    <div className=\"col\">\r\n                      <fieldset>\r\n                        <small className=\"mr-2\">\r\n                          <label>Categoria</label>\r\n                        </small>\r\n\r\n                        <InputCategory\r\n                          data={this.props.data}\r\n                          category={category_id1}\r\n                          categoryName=\"category_id1\"\r\n                          categoryData={category_list1}\r\n                          textSelect=\"Seleciona la categoria\"\r\n                          categoryRef={this.category1}\r\n                          handleChangeCategory={(data) => {\r\n                            this.setState({\r\n                              category_id: data.id,\r\n                              category_id1: data.id,\r\n                              category_id2: 0,\r\n                              category_list2: data.hijos,\r\n                              category_id3: 0,\r\n                              category_list3: [],\r\n                              category_id4: 0,\r\n                              category_list4: [],\r\n                              supplier: 0,\r\n                            });\r\n                          }}\r\n                        />\r\n\r\n                        {category_id1 &&\r\n                        category_list2 &&\r\n                        category_list2.length ? (\r\n                          <InputCategory\r\n                            data={this.props.data}\r\n                            category={category_id2}\r\n                            categoryName=\"category_id2\"\r\n                            categoryData={category_list2}\r\n                            textSelect=\"Seleciona el tipo\"\r\n                            categoryRef={this.category2}\r\n                            handleChangeCategory={(data) => {\r\n                              this.setState({\r\n                                category_id: data.id,\r\n                                category_id2: data.id,\r\n                                category_id3: 0,\r\n                                category_list3: data.hijos,\r\n                                category_id4: 0,\r\n                                category_list4: [],\r\n                              });\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n\r\n                        {category_id2 &&\r\n                        category_list3 &&\r\n                        category_list3.length ? (\r\n                          <InputCategory\r\n                            data={this.props.data}\r\n                            category={category_id3}\r\n                            categoryName=\"category_id3\"\r\n                            categoryData={category_list3}\r\n                            textSelect=\"Seleciona el material\"\r\n                            categoryRef={this.category3}\r\n                            handleChangeCategory={(data) => {\r\n                              this.setState({\r\n                                category_id: data.id,\r\n                                category_id3: data.id,\r\n                                category_id4: 0,\r\n                                category_list4: data.hijos,\r\n                              });\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n\r\n                        {category_id3 &&\r\n                        category_list4 &&\r\n                        category_list4.length ? (\r\n                          <InputCategory\r\n                            data={this.props.data}\r\n                            category={category_id4}\r\n                            categoryName=\"category_id4\"\r\n                            categoryData={category_list4}\r\n                            textSelect=\"Seleciona el tratamiento\"\r\n                            categoryRef={this.category4}\r\n                            handleChangeCategory={(data) => {\r\n                              this.setState({\r\n                                category_id: data.id,\r\n                                category_id4: data.id,\r\n                              });\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n                      </fieldset>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {category_id1 && category_id1 !== 1 ? (\r\n                    <Suppliers\r\n                      data={this.props.data}\r\n                      supplier={supplier}\r\n                      textSelect=\"Selecione el proveedor\"\r\n                      supplierRef={this.supplierRef}\r\n                      handleChangeSupplier={(e) => {\r\n                        this.setState({\r\n                          supplier: e,\r\n                        });\r\n                      }}\r\n                    />\r\n                  ) : null}\r\n\r\n                  {category_id1 && category_id1 !== 1 && supplier ? (\r\n                    <Brands\r\n                      data={this.props.data}\r\n                      brand={brand_id}\r\n                      supplier={supplier}\r\n                      textSelect=\"Selecione la marca\"\r\n                      brandRef={this.brandRef}\r\n                      handleChangeBrand={(e) => {\r\n                        this.setState({\r\n                          brand_id: e,\r\n                        });\r\n                      }}\r\n                    />\r\n                  ) : null}\r\n\r\n                  {category_id ? (\r\n                    <React.Fragment>\r\n                      <div className=\"row\">\r\n                        <div className=\"col-5\">\r\n                          {codeValue ? (\r\n                            <small>\r\n                              <label>Codigo</label>\r\n                            </small>\r\n                          ) : (\r\n                            <br />\r\n                          )}\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  codeValue\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-code\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control text-uppercase\"\r\n                              placeholder=\"Codigo\"\r\n                              name=\"code\"\r\n                              ref={this.codeRef}\r\n                              value={codeValue}\r\n                              onChange={this.catchInputs}\r\n                              autoComplete=\"off\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <small>\r\n                            <label>Codigo de barras</label>\r\n                          </small>\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span className=\"input-group-text bg-primary\">\r\n                                <i className=\"fas fa-barcode\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Codigo de barras\"\r\n                              name=\"codebar\"\r\n                              value={this.state.codebar}\r\n                              onChange={this.catchInputs}\r\n                              autoComplete=\"off\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"row\">\r\n                        {category_id1 === 1 ? (\r\n                          <div className=\"col-3\">\r\n                            <small>\r\n                              <label>Graduacion</label>\r\n                            </small>\r\n                            <div className=\"input-group mb-3\">\r\n                              <div className=\"input-group-prepend\">\r\n                                <span\r\n                                  className={\r\n                                    grad\r\n                                      ? \"input-group-text bg-primary\"\r\n                                      : \"input-group-text bg-warning\"\r\n                                  }\r\n                                >\r\n                                  <i className=\"fas fa-glasses\"></i>\r\n                                </span>\r\n                              </div>\r\n                              <input\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                placeholder=\"+100100\"\r\n                                name=\"grad\"\r\n                                value={grad}\r\n                                onChange={this.catchInputs}\r\n                                autoComplete=\"off\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        ) : null}\r\n                        <div className=\"col\">\r\n                          {nameValue ? (\r\n                            <small>\r\n                              <label>Nombre del producto</label>\r\n                            </small>\r\n                          ) : (\r\n                            <br />\r\n                          )}\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  nameValue\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-archive\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control text-uppercase\"\r\n                              placeholder=\"Nombre del producto\"\r\n                              name=\"name\"\r\n                              ref={this.nameRef}\r\n                              value={nameValue}\r\n                              onChange={this.catchInputs}\r\n                              autoComplete=\"off\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"row\">\r\n                        <div className=\"col\">\r\n                          {this.state.unit ? (\r\n                            <small>\r\n                              <label>Unidad de presentacion</label>\r\n                            </small>\r\n                          ) : (\r\n                            <br />\r\n                          )}\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  unit\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-balance-scale\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Unidad de presentación\"\r\n                              name=\"unit\"\r\n                              value={unit}\r\n                              onChange={this.catchInputs}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <small>\r\n                            <label>Cantidad en existencia</label>\r\n                          </small>\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  cant\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-database\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"number\"\r\n                              className=\"form-control text-right\"\r\n                              placeholder=\"Cantidades en existencia\"\r\n                              name=\"cant\"\r\n                              value={cant}\r\n                              onChange={this.catchInputs}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <small>\r\n                            <label>Precio</label>\r\n                          </small>\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  price\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-money-bill\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"number\"\r\n                              className=\"form-control text-right\"\r\n                              placeholder=\"Precio\"\r\n                              name=\"price\"\r\n                              value={price}\r\n                              onChange={this.catchInputs}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </React.Fragment>\r\n                  ) : (\r\n                    <div className=\"row\">\r\n                      <div className=\"col\">\r\n                        <h6 className=\"text-warning\">\r\n                          Seleccione primero una categoría.\r\n                        </h6>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </React.Fragment>\r\n              ) : (\r\n                <div className=\"text-center\">\r\n                  <span className=\"text-primary\">Cargando formulario</span>\r\n                  <div\r\n                    className=\"spinner-border text-primary ml-4\"\r\n                    role=\"status\"\r\n                  >\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"card-footer text-right\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"btn-group\" role=\"group\">\r\n                    <Link\r\n                      to=\"/almacen/registro\"\r\n                      className=\"btn btn-dark\"\r\n                      onClick={this.setNew}\r\n                    >\r\n                      <i className=\"fas fa-plus mr-1\"></i>\r\n                      Nuevo\r\n                    </Link>\r\n                    <Link\r\n                      to=\"/almacen\"\r\n                      className=\"btn btn-dark\"\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/almacen\");\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className={id ? \"fas fa-ban mr-1\" : \"fas fa-undo mr-1\"}\r\n                      ></i>\r\n                      {id ? \"Cerrar\" : \"Cancelar\"}\r\n                    </Link>\r\n                    <button type=\"submit\" className=\"btn btn-primary\">\r\n                      <i className=\"fas fa-save mr-1\"></i>\r\n                      Guardar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        {id ? (\r\n          <div className=\"col\">\r\n            <StoreLote\r\n              id={id}\r\n              price={this.state.price}\r\n              refresh={this.getItem}\r\n            />\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleNameLent = (grad) => {\r\n    let stringcode = \"lente\";\r\n    stringcode +=\r\n      this.category2.current !== null\r\n        ? \" \" +\r\n          Codestring(\r\n            this.category2.current.options[\r\n              this.category2.current.selectedIndex\r\n            ].text.trim()\r\n          )\r\n        : \"\";\r\n    stringcode +=\r\n      this.category3.current !== null\r\n        ? \" \" +\r\n          this.category3.current.options[\r\n            this.category3.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.category4.current !== null\r\n        ? \" \" +\r\n          this.category4.current.options[\r\n            this.category4.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n\r\n    stringcode += \" \" + grad.toString();\r\n    return stringcode.toLowerCase();\r\n  };\r\n  handleCodeLent = (grad) => {\r\n    let stringcode =\r\n      this.category2.current !== null\r\n        ? Codestring(\r\n            this.category2.current.options[this.category2.current.selectedIndex]\r\n              .text\r\n          )\r\n        : \"\";\r\n    stringcode +=\r\n      this.category3.current !== null\r\n        ? Codestring(\r\n            this.category3.current.options[this.category3.current.selectedIndex]\r\n              .text\r\n          )\r\n        : \"\";\r\n    stringcode +=\r\n      this.category4.current !== null\r\n        ? Codestring(\r\n            this.category4.current.options[this.category4.current.selectedIndex]\r\n              .text\r\n          )\r\n        : \"\";\r\n    return stringcode + grad.toString();\r\n  };\r\n  handleCodeString = (code) => {\r\n    let stringcode = \"armazon\";\r\n    stringcode +=\r\n      this.category2.current !== null\r\n        ? \" \" +\r\n          this.category2.current.options[\r\n            this.category2.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.brandRef.current !== null\r\n        ? \" \" +\r\n          this.brandRef.current.options[\r\n            this.brandRef.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.supplierRef.current !== null\r\n        ? \" \" +\r\n          this.supplierRef.current.options[\r\n            this.supplierRef.current.selectedIndex\r\n          ].text\r\n            .trim()\r\n            .split(\" \")[0]\r\n        : \"\";\r\n\r\n    stringcode += \" \" + code.toString();\r\n    return stringcode.toLowerCase();\r\n  };\r\n  setNew = (e) => {\r\n    this.setState({\r\n      id: 0,\r\n      code: \"\",\r\n      codebar: \"\",\r\n      grad: \"\",\r\n      brand_id: 0,\r\n      name: \"\",\r\n      unit: \"PZ\",\r\n      cant: 1,\r\n      price: 1,\r\n      supplier: 0,\r\n      brand: 0,\r\n      category_id: 0,\r\n      category_id1: 0,\r\n      category_id2: 0,\r\n      category_id3: 0,\r\n      category_id4: 0,\r\n      category_list2: [],\r\n      category_list3: [],\r\n      category_list4: [],\r\n      load: false,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, type } = e.target;\r\n    let { value } = e.target;\r\n\r\n    if (type === \"text\") value = value.toLowerCase();\r\n    if (type === \"number\") value = parseInt(value);\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getCategory = () => {\r\n    //Variables\r\n    let { host, token } = this.state;\r\n\r\n    console.log(\"solicitando categorias al API\");\r\n    fetch(\"http://\" + host + \"/api/categories?categoryid=raiz\", {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data !== null) {\r\n          console.log(\"Almacenando categorias\");\r\n          this.setState({\r\n            category_list1: cat.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", cat.message);\r\n          window.Swal.fire(\r\n            \"Error\",\r\n            \"Error al descargar las categorias\",\r\n            \"error\"\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  handleSave = async (e) => {\r\n    e.preventDefault();\r\n    const {\r\n      id,\r\n      category_id,\r\n      category_id1,\r\n      category_id2,\r\n      category_id4,\r\n      supplier,\r\n      brand_id,\r\n      code,\r\n    } = this.state;\r\n    //Verificamos campos validos\r\n    if (!category_id) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Selecione una categoria primero\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    } else {\r\n      if (category_id1 === 1 && category_id4 !== category_id) {\r\n        window.Swal.fire(\r\n          \"Verificación\",\r\n          \"Selecione una categoria valida para lentes\",\r\n          \"warning\"\r\n        );\r\n        return false;\r\n      } else if (category_id1 === 2 && category_id2 !== category_id) {\r\n        window.Swal.fire(\r\n          \"Verificación\",\r\n          \"Selecione una categoria valida para armazones\",\r\n          \"warning\"\r\n        );\r\n        return false;\r\n      }\r\n    }\r\n    if (category_id1 === 2 && !supplier) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Selecione un PROVEEDOR valido primero\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (category_id1 === 2 && !brand_id) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Selecione una MARCA valida primero\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (!code && !this.codeRef.current.value) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Escriba una CODIGO para este producto\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el producto?\"\r\n        : \"¿Esta seguro de crear un nuevo producto?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const {\r\n              id,\r\n              code,\r\n              codebar,\r\n              brand_id,\r\n              name,\r\n              unit,\r\n              cant,\r\n              price,\r\n              category_id,\r\n              token,\r\n              host,\r\n              supplier,\r\n              grad,\r\n            } = this.state,\r\n            url = id\r\n              ? \"http://\" + host + \"/api/store/\" + id\r\n              : \"http://\" + host + \"/api/store\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n          let body = {\r\n            code: code ? code : this.codeRef.current.value,\r\n            codebar,\r\n            name: name ? name : this.nameRef.current.value,\r\n            unit,\r\n            cant,\r\n            price,\r\n            category_id,\r\n            grad: grad ? grad : \"+000000\",\r\n            brand_id: brand_id ? brand_id : \"\",\r\n            contact_id: supplier ? supplier : \"\",\r\n          };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del producto a API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          }).then(async (response) => {\r\n            let back = {};\r\n            if (response.status !== 204) back = await response.json();\r\n            if (!response.ok) {\r\n              console.error(\"Orus res: \", back.message, back.errors);\r\n              if (back.errors && back.errors.code) {\r\n                window.Swal.fire(\r\n                  \"Validacion\",\r\n                  \"El CODIGO ya esta registrado\",\r\n                  \"warning\"\r\n                );\r\n              } else if (back.errors && back.errors.name) {\r\n                window.Swal.fire(\r\n                  \"Validacion\",\r\n                  \"El nombre del PRODUCTO ya esta registrado\",\r\n                  \"warning\"\r\n                );\r\n              } else\r\n                window.Swal.fire(\"Error\", \"al almacenar el producto\", \"error\");\r\n            }\r\n            return back;\r\n          });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Producto almacenado\", data.data);\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Producto actualizado con exito\"\r\n              : \"Producto almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            if (id) {\r\n              this.props.history.push(`/almacen`);\r\n            } else {\r\n              this.setState({\r\n                id: data.data.id,\r\n              });\r\n              this.props.history.push(`/almacen/registro/${data.data.id}`);\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getItem = (id) => {\r\n    if (id > 0) {\r\n      //Variables\r\n      let { host, token } = this.state;\r\n      //Realiza la peticion al API\r\n      console.log(\"Solicitando datos de producto a la API\");\r\n      fetch(\"http://\" + host + \"/api/store/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then(async (data) => {\r\n          if (data.data) {\r\n            let category_id1 = 0,\r\n              category_list2 = [],\r\n              category_list3 = [],\r\n              category_list4 = [],\r\n              category_id2 = 0,\r\n              category_id3 = 0,\r\n              category_id4 = 0;\r\n\r\n            if (data.data.categoria && data.data.categoria.depende_de) {\r\n              if (\r\n                data.data.categoria.depende_de &&\r\n                data.data.categoria.depende_de.depende_de\r\n              ) {\r\n                if (\r\n                  data.data.categoria.depende_de.depende_de &&\r\n                  data.data.categoria.depende_de.depende_de.depende_de\r\n                ) {\r\n                  category_id1 =\r\n                    data.data.categoria.depende_de.depende_de.depende_de.id;\r\n                  category_id2 = data.data.categoria.depende_de.depende_de.id;\r\n                  category_id3 = data.data.categoria.depende_de.id;\r\n                  category_id4 = data.data.categoria.id;\r\n                  //Listas\r\n                  category_list2 =\r\n                    data.data.categoria.depende_de.depende_de.depende_de.hijos;\r\n                  category_list3 =\r\n                    data.data.categoria.depende_de.depende_de.hijos;\r\n                  category_list4 = data.data.categoria.depende_de.hijos;\r\n                } else {\r\n                  category_id1 = data.data.categoria.depende_de.depende_de.id;\r\n                  category_id2 = data.data.categoria.depende_de.id;\r\n                  category_id3 = data.data.categoria.id;\r\n                  //Lista\r\n                  category_list2 =\r\n                    data.data.categoria.depende_de.depende_de.hijos;\r\n                  category_list3 = data.data.categoria.depende_de.hijos;\r\n                }\r\n              } else {\r\n                category_id1 = data.data.categoria.depende_de.id;\r\n                category_id2 = data.data.categoria.id;\r\n                //Lista\r\n                category_list2 = data.data.categoria.depende_de.hijos;\r\n              }\r\n            } else {\r\n              category_id1 = data.data.categoria.id;\r\n              //Lista\r\n              category_list2 = data.data.categoria.hijos;\r\n            }\r\n            /*console.log(\r\n              \"CAT principal\",\r\n              \"Nombre: \" + data.data.categoria.categoria,\r\n              \"Hijos: \" + data.data.categoria.hijos.length,\r\n              \"Padre: \",\r\n              data.data.categoria.depende_de\r\n            );*/\r\n\r\n            this.setState({\r\n              id: data.data.id,\r\n              code: data.data.codigo,\r\n              codebar: data.data.c_barra,\r\n              brand_id: data.data.marca ? data.data.marca.id : 0,\r\n              grad: data.data.graduacion ? data.data.graduacion : \"\",\r\n              name: data.data.producto,\r\n              unit: data.data.unidad,\r\n              cant: data.data.cantidades,\r\n              price: data.data.precio,\r\n              category_id: data.data.categoria.id,\r\n              category_id1,\r\n              category_list2,\r\n              category_list3,\r\n              category_list4,\r\n              category_id2,\r\n              category_id3,\r\n              category_id4,\r\n              category_data: data.data.categoria,\r\n              supplier: data.data.proveedor ? data.data.proveedor.id : 0,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\r\n              \"Error\",\r\n              \"Error en el sistema, comuniquese con el administrador de sistema\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Pagination from \"../Layouts/pagination\";\r\n\r\nexport default class CategoryList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      meta: {},\r\n      add: false,\r\n      name: \"\",\r\n      category_raiz: [],\r\n      category_id: props.category,\r\n      page: 1,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      load: true,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getCategoriesMain();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    const { category } = this.props;\r\n    if (props.category !== category) {\r\n      this.getCategoriesMain();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { category_raiz, category_id, name, add, meta, load } = this.state,\r\n      {\r\n        categoryName,\r\n        categoryDataName,\r\n        categorySelect,\r\n        category,\r\n        last,\r\n      } = this.props;\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-body\">\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Nombre</th>\r\n                <th style={{ width: 16 }} className=\"text-center\">\r\n                  E\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {!load && category_raiz ? (\r\n                <React.Fragment>\r\n                  <tr\r\n                    className={category_id === category ? \"table-success\" : \"\"}\r\n                    onClick={(e) => {\r\n                      this.setState({\r\n                        category_id: parseInt(category) ? category : 0,\r\n                      });\r\n                      categorySelect({\r\n                        [categoryName]: 0,\r\n                        [categoryDataName]: [],\r\n                        category_id: category,\r\n                      });\r\n                    }}\r\n                  >\r\n                    <td\r\n                      colSpan=\"2\"\r\n                      className=\"text-capitalize\"\r\n                      style={{ cursor: \"pointer\" }}\r\n                    >\r\n                      Raiz\r\n                    </td>\r\n                  </tr>\r\n                  {category_raiz.map((cat) => {\r\n                    return (\r\n                      <tr\r\n                        key={cat.id}\r\n                        className={\r\n                          cat.id === category_id ? \"table-success\" : \"\"\r\n                        }\r\n                        style={{ cursor: \"pointer\" }}\r\n                        onClick={(e) => {\r\n                          if (last) {\r\n                            this.setState({\r\n                              category_id: parseInt(category) ? category : 0,\r\n                            });\r\n                            categorySelect({\r\n                              [categoryName]: 0,\r\n                              [categoryDataName]: [],\r\n                              category_id: category,\r\n                            });\r\n                          } else {\r\n                            categorySelect({\r\n                              [categoryName]: cat.id,\r\n                              [categoryDataName]: cat.hijos,\r\n                              category_id: cat.id,\r\n                            });\r\n                            this.setState({\r\n                              category_id: cat.id,\r\n                            });\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td className=\"text-capitalize\">\r\n                          <a\r\n                            href={\"#select!\" + cat.id}\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              this.setState({\r\n                                category_id: cat.id,\r\n                              });\r\n                            }}\r\n                          >\r\n                            {cat.categoria}\r\n                          </a>\r\n                        </td>\r\n                        <td>\r\n                          {!cat.hijos.length ? (\r\n                            <button\r\n                              className=\"btn btn-outline-dark btn-sm\"\r\n                              onClick={(e) => {\r\n                                this.handleClickDelete(cat.id, cat.categoria);\r\n                              }}\r\n                            >\r\n                              <i className=\"fas fa-trash\"></i>\r\n                            </button>\r\n                          ) : null}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </React.Fragment>\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"8\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n            {add && !load ? (\r\n              <tfoot>\r\n                <tr>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      className=\"form-control text-capitalize\"\r\n                      autoComplete=\"off\"\r\n                      value={name}\r\n                      onChange={this.catchInputs}\r\n                      ref={(input) => {\r\n                        this.nameInput = input;\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-dark btn-sm\"\r\n                      onClick={this.handleClickSave}\r\n                    >\r\n                      <i className=\"fas fa-save\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            ) : (\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan=\"3\">\r\n                    <Pagination\r\n                      meta={meta}\r\n                      handleChangePage={this.handleChangePage}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            )}\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={this.handleClickAdd}\r\n          >\r\n            {this.state.add ? (\r\n              <i className=\"fas fa-undo\"></i>\r\n            ) : (\r\n              <i className=\"fas fa-plus\"></i>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n    });\r\n  };\r\n  handleClickDelete = (id, name) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar la categoria \" + name.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          const { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de categoria por API\");\r\n          return fetch(\"http://\" + host + \"/api/categories/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Categoria eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Categoria eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => {\r\n          //Proceso de eliminacion de categoria del array\r\n          const { category } = this.props;\r\n          let { category_raiz } = this.state,\r\n            indexCat = 0;\r\n\r\n          if (category_raiz.length) {\r\n            category_raiz.filter((cat, i) => {\r\n              if (cat.id === id) indexCat = i;\r\n              return false;\r\n            });\r\n            category_raiz.splice(indexCat, 1);\r\n            this.setState({\r\n              category_raiz,\r\n              category_id: category,\r\n            });\r\n          }\r\n          //fin del proceso\r\n        });\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  handleClickSave = () => {\r\n    //Verificamos campos validos\r\n    if (this.state.name.length < 4) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Debe de escribir el nombre de la categoria\",\r\n        \"warning\"\r\n      );\r\n      this.nameInput.focus();\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva categoria?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          const { host, token, category_id, name } = this.state,\r\n            { category } = this.props,\r\n            body = {\r\n              name,\r\n              category_id: parseInt(category_id)\r\n                ? parseInt(category_id)\r\n                : parseInt(category)\r\n                ? parseInt(category)\r\n                : \"\",\r\n            };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(\"http://\" + host + \"/api/categories\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        const data = result.value,\r\n          { category_raiz, category_id } = this.state,\r\n          { category } = this.props;\r\n\r\n        if (data.data) {\r\n          console.log(\"Categoria almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Categoria almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then(async (res) => {\r\n            //Resultado actualizando datos\r\n            if (parseInt(category) === category_id) {\r\n              category_raiz.push(data.data);\r\n            } else {\r\n              await category_raiz.find((cat) => {\r\n                if (cat.id === category_id) {\r\n                  cat.hijos.push(data.data);\r\n                  return cat;\r\n                } else return false;\r\n              });\r\n            }\r\n\r\n            this.setState({\r\n              category_raiz,\r\n              name: \"\",\r\n              add: !this.state.add,\r\n              category_id: data.data.id,\r\n            });\r\n            //Fin de resultado\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la categoria\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getCategoriesMain = () => {\r\n    //Variables props\r\n    const { category, CategoryData } = this.props;\r\n\r\n    if (CategoryData === undefined || !CategoryData.length) {\r\n      //Variables en localStorage\r\n      const { host, token, page, load } = this.state,\r\n        url = \"http://\" + host + \"/api/categories\",\r\n        categoryid = category ? \"&categoryid=\" + category : \"&categoryid=raiz\",\r\n        ppage = page > 0 ? \"?page=\" + page : \"?page=1\";\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      //Categories main\r\n      fetch(url + ppage + categoryid, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((cat) => {\r\n          this.setState({\r\n            category_raiz: cat.data !== null ? cat.data : [],\r\n            category_id: category,\r\n            load: false,\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus: \" + e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    } else {\r\n      this.setState({\r\n        category_raiz: CategoryData ? CategoryData : [],\r\n        category_id: category,\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n  handleClickAdd = () => {\r\n    this.setState({\r\n      add: !this.state.add,\r\n      name: \"\",\r\n    });\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Catalogo from \"./category_list\";\r\n\r\nexport default class Categories extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      category_id: 0,\r\n      category_id1: 0,\r\n      category_hijos1: [],\r\n      category_id2: 0,\r\n      category_hijos2: [],\r\n      category_id3: 0,\r\n      category_hijos3: [],\r\n      category_id4: 0,\r\n      category_hijos4: [],\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      category_id1,\r\n      category_hijos1,\r\n      category_id2,\r\n      category_hijos2,\r\n      category_id3,\r\n      category_hijos3,\r\n    } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <h5>Categorias de productos</h5>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <Catalogo\r\n              data={this.props.data}\r\n              category={0}\r\n              categoryName=\"category_id1\"\r\n              categoryDataName=\"category_hijos1\"\r\n              categorySelect={this.handleChangeState}\r\n            />\r\n          </div>\r\n          {category_id1 && category_hijos1.length ? (\r\n            <div className=\"col\">\r\n              <Catalogo\r\n                data={this.props.data}\r\n                category={category_id1}\r\n                CategoryData={category_hijos1}\r\n                categoryName=\"category_id2\"\r\n                categoryDataName=\"category_hijos2\"\r\n                categorySelect={this.handleChangeState}\r\n                last={category_id1 === 2 ? true : false}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {category_id2 && category_hijos2.length ? (\r\n            <div className=\"col\">\r\n              <Catalogo\r\n                data={this.props.data}\r\n                category={category_id2}\r\n                CategoryData={category_hijos2}\r\n                categoryName=\"category_id3\"\r\n                categoryDataName=\"category_hijos3\"\r\n                categorySelect={this.handleChangeState}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {category_id3 && category_hijos3.length ? (\r\n            <div className=\"col\">\r\n              <Catalogo\r\n                data={this.props.data}\r\n                category={category_id3}\r\n                CategoryData={category_hijos3}\r\n                categoryName=\"category_id4\"\r\n                categoryDataName=\"category_hijos4\"\r\n                categorySelect={this.handleChangeState}\r\n                last={true}\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  handleChangeState = (data) => {\r\n    if (data.category_id1 !== undefined && data.category_id1) {\r\n      data.category_id2 = 0;\r\n      data.category_id3 = 0;\r\n      data.category_id4 = 0;\r\n    } else if (data.category_id2 !== undefined && data.category_id2) {\r\n      data.category_id3 = 0;\r\n      data.category_id4 = 0;\r\n    } else if (data.category_id3 !== undefined && data.category_id3) {\r\n      data.category_id4 = 0;\r\n    }\r\n    this.setState(data);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Suppliers from \"./input_suppliers\";\r\n\r\nexport default class Brands extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      supplier: 0,\r\n      brands: [],\r\n      name: \"\",\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(props, state) {\r\n    if (state.supplier !== this.state.supplier && this.state.supplier) {\r\n      this.getBrands();\r\n    }\r\n  }\r\n  render() {\r\n    const { supplier, name, brands } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <h5>Marcas para productos</h5>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card card-primary card-outline\">\r\n              <div className=\"card-body\">\r\n                <Suppliers\r\n                  data={this.props.data}\r\n                  supplier={supplier}\r\n                  handleChangeSupplier={(e) => {\r\n                    this.setState({\r\n                      supplier: e,\r\n                    });\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col\">\r\n            <div className=\"card card-primary card-outline\">\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title text-primary mb-4\">\r\n                  {supplier\r\n                    ? \"Listado de marcas\"\r\n                    : \"Primero seleccione a un proveedor\"}\r\n                </h5>\r\n                {supplier ? (\r\n                  <ul className=\"card-text list-group\">\r\n                    {!brands.length ? (\r\n                      <li className=\"list-group-item\">\r\n                        No hay marcas registradas para este proveedor\r\n                      </li>\r\n                    ) : (\r\n                      brands.map((brand) => {\r\n                        return (\r\n                          <li\r\n                            className=\"list-group-item d-flex justify-content-between align-items-center\"\r\n                            key={brand.id}\r\n                          >\r\n                            <span className=\"text-primary\">{brand.nombre}</span>\r\n                            <span\r\n                              className=\"badge badge-dark badge-pill\"\r\n                              style={{ cursor: \"pointer\" }}\r\n                              onClick={(e) => {\r\n                                this.deleteBrand(brand.id, brand.nombre);\r\n                              }}\r\n                            >\r\n                              <i className=\"fas fa-trash\"></i>\r\n                            </span>\r\n                          </li>\r\n                        );\r\n                      })\r\n                    )}\r\n                  </ul>\r\n                ) : null}\r\n              </div>\r\n              {supplier ? (\r\n                <div className=\"card-footer\">\r\n                  <form onSubmit={this.saveBrand}>\r\n                    <div className=\"input-group\">\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"form-control mr-1\"\r\n                        name=\"name\"\r\n                        value={name}\r\n                        onChange={this.changeInput}\r\n                      />\r\n                      <button className=\"btn btn-dark\">\r\n                        <i className=\"fas fa-save\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  deleteBrand = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el producto \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de marca por API\");\r\n          return fetch(\"http://\" + host + \"/api/brands/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Marca eliminada\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Marca eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => {\r\n          //Eliminar el item del array\r\n          let { brands } = this.state,\r\n            indexItem = 0;\r\n\r\n          if (brands.length) {\r\n            brands.filter((item, i) => {\r\n              if (item.id === id) indexItem = i;\r\n              return false;\r\n            });\r\n            brands.splice(indexItem, 1);\r\n            this.setState({\r\n              brands,\r\n            });\r\n          }\r\n        });\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  saveBrand = (e) => {\r\n    e.preventDefault();\r\n    const { name, supplier } = this.state;\r\n\r\n    if (name.length < 3) {\r\n      window.Swal.fire(\r\n        \"Error\",\r\n        \"El nombre de la marca debe de tener por lo menos 3 caracteres\",\r\n        \"error\"\r\n      );\r\n      return false;\r\n    } else if (!supplier) {\r\n      window.Swal.fire(\r\n        \"Error\",\r\n        \"Debe de elegir a un proveedor primero\",\r\n        \"error\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva marca?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { name, supplier, token, host } = this.state;\r\n          let body = {\r\n            name,\r\n            contact_id: supplier,\r\n          };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos de la marca a API\");\r\n          return fetch(\"http://\" + host + \"/api/brands\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Marca almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Marca almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            //Actualizando con la nueva marca\r\n            let { brands } = this.state;\r\n\r\n            brands.push(data.data);\r\n            this.setState({\r\n              brands,\r\n              name: \"\",\r\n            });\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la marca\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  changeInput = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getBrands = () => {\r\n    //Constantes\r\n    const { supplier, host, token } = this.state;\r\n\r\n    console.log(\"solicitando marcas al API\");\r\n    fetch(\"http://\" + host + \"/api/brands?supplier=\" + supplier, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        if (data.data !== null) {\r\n          console.log(\"descargando marcas\");\r\n          this.setState({\r\n            brands: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Error al descargar las marcas\", \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Inventory extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      catData_1: [],\r\n      catData_2: [],\r\n      catData_3: [],\r\n      catid_1: 0,\r\n      catid_2: 0,\r\n      catid_3: 0,\r\n      load: false,\r\n      items: [],\r\n      meta: {},\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.catid_3 !== this.state.catid_3) {\r\n      this.getItems(this.state.catid_3);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      catid_1,\r\n      catData_1,\r\n      catid_2,\r\n      catData_2,\r\n      catid_3,\r\n      catData_3,\r\n      load,\r\n      items,\r\n      meta,\r\n    } = this.state;\r\n    let header = [],\r\n      body = [],\r\n      i = 0;\r\n\r\n    do {\r\n      header.push(<th key={i}>{i.toFixed(2)}</th>);\r\n      i = i - 0.25;\r\n    } while (i > parseFloat(meta.cil) - 0.25);\r\n\r\n    i = parseFloat(meta.rangoInf);\r\n    do {\r\n      if (i === 0)\r\n        body.push(\r\n          <td>\r\n            <label>0.00</label>\r\n          </td>\r\n        );\r\n      else body.push(<td>{i.toFixed(2)}</td>);\r\n      i = i + 0.25;\r\n    } while (i < parseFloat(meta.rangoSup) + 0.25);\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <div className=\"row\">\r\n                <div className=\"col\">\r\n                  <select\r\n                    className=\"custom-select\"\r\n                    name=\"catid_1\"\r\n                    value={catid_1}\r\n                    onChange={this.handleClickCat}\r\n                  >\r\n                    <option value=\"0\">Seleccione un tipo</option>\r\n                    {catData_1.map((cat) => {\r\n                      return (\r\n                        <option key={cat.id} value={cat.id}>\r\n                          {cat.categoria}\r\n                        </option>\r\n                      );\r\n                    })}\r\n                  </select>\r\n                </div>\r\n\r\n                {catid_1 && catData_2.length ? (\r\n                  <div className=\"col\">\r\n                    <select\r\n                      className=\"custom-select\"\r\n                      name=\"catid_2\"\r\n                      value={catid_2}\r\n                      onChange={this.handleClickCat}\r\n                    >\r\n                      <option value=\"0\">Seleccione un material</option>\r\n                      {catData_2.map((cat) => {\r\n                        return (\r\n                          <option key={cat.id} value={cat.id}>\r\n                            {cat.categoria}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n\r\n                {catid_2 && catData_3.length ? (\r\n                  <div className=\"col\">\r\n                    <div\r\n                      className=\"btn-group\"\r\n                      role=\"group\"\r\n                      aria-label=\"Basic example\"\r\n                    >\r\n                      {catData_3.map((cat) => {\r\n                        return (\r\n                          <button\r\n                            key={cat.id}\r\n                            className={\r\n                              catid_3 === cat.id\r\n                                ? \"btn btn-primary\"\r\n                                : \"btn btn-secondary\"\r\n                            }\r\n                            onClick={(e) => {\r\n                              this.setState({\r\n                                catid_3: cat.id,\r\n                                load: true,\r\n                              });\r\n                            }}\r\n                          >\r\n                            {cat.categoria}\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {catid_3 ? (\r\n                <React.Fragment>\r\n                  {load ? (\r\n                    <div className=\"text-center\">\r\n                      <span className=\"text-primary\">Cargando productos</span>\r\n                      <div\r\n                        className=\"spinner-border text-primary ml-4\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <React.Fragment>\r\n                      <div className=\"text-center\">\r\n                        Productos: {items.length}\r\n                      </div>\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-sm table-bordered table-hover\">\r\n                          <thead>\r\n                            <tr>\r\n                              <th>/</th>\r\n                              {header}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {body.map((row, i) => {\r\n                              const zero =\r\n                                row.props.children.type === \"label\"\r\n                                  ? true\r\n                                  : false;\r\n                              return (\r\n                                <tr\r\n                                  className={zero ? \"table-secondary\" : \"\"}\r\n                                  key={i}\r\n                                >\r\n                                  {row}\r\n                                  {header.map((h, i) => {\r\n                                    let grad = zero\r\n                                      ? parseFloat(\r\n                                          row.props.children.props.children\r\n                                        )\r\n                                          .toFixed(2)\r\n                                          .replace(\".\", \"\")\r\n                                      : parseFloat(row.props.children)\r\n                                          .toFixed(2)\r\n                                          .replace(\".\", \"\");\r\n                                    if (parseInt(grad) >= 0) grad = \"+\" + grad;\r\n                                    grad += parseFloat(h.props.children)\r\n                                      .toFixed(2)\r\n                                      .replace(/[-.]/g, \"\");\r\n\r\n                                    //console.log(\"G\", grad);\r\n                                    return (\r\n                                      <td key={i} className=\"text-center\">\r\n                                        {items.length ? (\r\n                                          items.map((item) => {\r\n                                            //console.log(\"comp: \");\r\n                                            return grad === item.graduacion ? (\r\n                                              <React.Fragment>\r\n                                                {item.cantidades ? (\r\n                                                  <span\r\n                                                    key={item.id}\r\n                                                    className={\r\n                                                      item.cantidades > 0\r\n                                                        ? \"badge badge-success\"\r\n                                                        : \"badge badge-danger\"\r\n                                                    }\r\n                                                  >\r\n                                                    <Link\r\n                                                      to={\r\n                                                        \"/almacen/registro/\" +\r\n                                                        item.id\r\n                                                      }\r\n                                                      className=\"text-light\"\r\n                                                    >\r\n                                                      {item.cantidades}\r\n                                                    </Link>\r\n                                                  </span>\r\n                                                ) : null}\r\n                                              </React.Fragment>\r\n                                            ) : null;\r\n                                          })\r\n                                        ) : (\r\n                                          <Link to=\"/almacen/registro\">\r\n                                            <i className=\"fas fa-plus text-secondary\"></i>\r\n                                          </Link>\r\n                                        )}\r\n                                      </td>\r\n                                    );\r\n                                  })}\r\n                                </tr>\r\n                              );\r\n                            })}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </React.Fragment>\r\n                  )}\r\n                </React.Fragment>\r\n              ) : (\r\n                <div className=\"alert alert-warning text-light\" role=\"alert\">\r\n                  <h4 className=\"alert-heading\">\r\n                    <i className=\"fas fa-exclamation\"></i> Seleccion.\r\n                  </h4>\r\n                  <hr />\r\n                  <ul>\r\n                    {!catid_1 ? (\r\n                      <li>Selecciones primero el tipo de lente</li>\r\n                    ) : null}\r\n                    {!catid_2 ? <li>Despues el material</li> : null}\r\n                    <li>Por ultimo el tratamiento</li>\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getItems = (catid) => {\r\n    //Variables en localStorage\r\n    const { data } = this.props,\r\n      { load } = this.state,\r\n      url = \"http://\" + data.host + \"/api/store?cat=\" + catid;\r\n\r\n    //Cargando\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Categories main\r\n    fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + data.token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(\"Descarga de producto exitosa\");\r\n        this.setState({\r\n          items: res.data && res.data.length ? res.data : [],\r\n          load: false,\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n  handleClickCat = (e) => {\r\n    const { name, value } = e.target,\r\n      { catData_1, catData_2 } = this.state;\r\n    let sons = [],\r\n      meta = {};\r\n\r\n    if (name === \"catid_1\") {\r\n      catData_1.map((cat) => {\r\n        if (cat.id === parseInt(value)) {\r\n          sons = cat.hijos;\r\n          meta = cat.meta;\r\n          return true;\r\n        } else return false;\r\n      });\r\n      //console.log(\"Meta: \", meta);\r\n\r\n      this.setState({\r\n        catid_1: parseInt(value),\r\n        catid_2: 0,\r\n        catid_3: 0,\r\n        catData_2: sons,\r\n        catData_3: [],\r\n        meta,\r\n      });\r\n    } else if (name === \"catid_2\") {\r\n      catData_2.map((cat) => {\r\n        if (cat.id === parseInt(value)) {\r\n          sons = cat.hijos;\r\n          return true;\r\n        } else return false;\r\n      });\r\n\r\n      this.setState({\r\n        catid_2: parseInt(value),\r\n        catid_3: 0,\r\n        catData_3: sons,\r\n      });\r\n    }\r\n  };\r\n  getCategories = () => {\r\n    //Variables en localStorage\r\n    const { data } = this.props,\r\n      url = \"http://\" + data.host + \"/api/categories/1\";\r\n\r\n    //Categories main\r\n    fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + data.token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data && cat.data.hijos.length) {\r\n          console.log(\"Descarga de categoria exitos\");\r\n          this.setState({\r\n            catData_1: cat.data.hijos,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, type, business } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: nombre, RFC o email\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Tipo de contacto</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"type\"\r\n                    value={type}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Clientes</option>\r\n                    <option value=\"1\">Proveedores</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>¿Es una empresa?</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-building\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"business\"\r\n                    value={business}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"1\">Si</option>\r\n                    <option value=\"0\">No</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search || type || business\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"type\", \"\");\r\n    this.props.changeFilters(\"business\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Contacts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusContacts\"));\r\n    this.state = {\r\n      contacts: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd && sdd.orderby ? sdd.orderby : \"created_at\",\r\n      order: sdd && sdd.order ? sdd.order : \"desc\",\r\n      search: sdd && sdd.search ? sdd.search : \"\",\r\n      type: sdd && sdd.type ? sdd.type : \"\",\r\n      business: sdd && sdd.business ? sdd.business : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getContacts();\r\n    localStorage.setItem(\r\n      \"OrusContacts\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        type: this.state.type,\r\n        business: this.state.business,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando contactos\");\r\n      this.getContacts();\r\n      localStorage.setItem(\r\n        \"OrusContacts\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          type: this.state.type,\r\n          business: this.state.business,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { contacts, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Nombre\", type: \"name\", filter: true },\r\n        { name: \"RFC\", type: \"name\", filter: true },\r\n        { name: \"E-mail\", type: \"email\", filter: true },\r\n        { name: \"Tipo\", type: \"type\", filter: true },\r\n        { name: \"Telefono\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-danger card-outline\">\r\n        <div className=\"card-header\">\r\n          <h2 className=\"card-title text-danger\">\r\n            <i className=\"fas fa-address-book mr-1\"></i>\r\n            Lista de contactos\r\n          </h2>\r\n          <div className=\"card-tools\">\r\n            <Filter\r\n              search={this.state.search}\r\n              type={this.state.type}\r\n              business={this.state.business}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={contacts.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-danger\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(contacts.data).length ? (\r\n                contacts.data.map((contact) => {\r\n                  return (\r\n                    <tr key={contact.id}>\r\n                      <td>\r\n                        <Link to={\"/contactos/registro/\" + contact.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {contact.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {contact.rfc ? contact.rfc : \"--\"}\r\n                      </td>\r\n                      <td className=\"text-lowercase\">\r\n                        {contact.email ? contact.email : \"--\"}\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {contact.tipo ? (\r\n                          <span className=\"text-purple\">Proveedor</span>\r\n                        ) : (\r\n                          <span className=\"text-green\">Cliente</span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {contact.telefonos && contact.telefonos.t_movil\r\n                          ? contact.telefonos.t_movil\r\n                          : \"--\"}\r\n                      </td>\r\n                      <td>{moment(contact.updated_at).fromNow()}</td>\r\n                      <td>{moment(contact.created_at).format(\"ll\")}</td>\r\n                      <Actions\r\n                        id={contact.id}\r\n                        item={contact.nombre}\r\n                        delete={contact.enUso ? null : this.handleDelete}\r\n                        edit={\"/contactos/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/contactos/registro\"\r\n            className=\"btn btn-outline-danger\"\r\n            onClick={this.changePage}\r\n            id=\"/contactos/registro\"\r\n          >\r\n            <i className=\"fas fa-plus\" id=\"/contactos/registro\"></i>\r\n            &nbsp; Nuevo contacto\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e.target.id);\r\n  };\r\n  handleDelete = (id, item) => {\r\n    //Confirmación de eliminacion\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el contacto \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación por API\");\r\n          return fetch(\"http://\" + host + \"/api/contacts/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Contacto eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getContacts());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getContacts() {\r\n    //Variables\r\n    let {\r\n        host,\r\n        token,\r\n        order,\r\n        orderby,\r\n        search,\r\n        page,\r\n        type,\r\n        business,\r\n        load,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/contacts\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\",\r\n      tipo = type === \"\" ? \"\" : \"&type=\" + type,\r\n      negocio = business === \"\" ? \"\" : \"&business=\" + business;\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Realiza la peticion de los contactos\r\n    console.log(\"Descargando contactos del API\");\r\n    fetch(url + pagina + ordenar + buscar + tipo + negocio, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenando contactos\");\r\n          this.setState({\r\n            contacts: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar contactos\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Mapa extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      load: true,\r\n    };\r\n    this.markers = [];\r\n    this.map = \"\";\r\n  }\r\n  componentDidMount() {\r\n    const googlePlaceAPILoad1 = setInterval(() => {\r\n      if (window.google) {\r\n        this.google = window.google;\r\n        clearInterval(googlePlaceAPILoad1);\r\n        console.log(\"Cargando mapa\");\r\n        const mapCenter = new this.google.maps.LatLng(19.2487072, -103.747381);\r\n        this.map = new this.google.maps.Map(\r\n          document.getElementById(\"gmapContainer\"),\r\n          {\r\n            center: mapCenter,\r\n            zoom: 16,\r\n          }\r\n        );\r\n        if (this.props.calle.length > 6) {\r\n          console.log(\"Cargando Marker\");\r\n          this.eventLoadMap();\r\n        }\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      }\r\n    }, 100);\r\n  }\r\n  componentDidUpdate() {\r\n    if (this.props.calle.length > 6) {\r\n      console.log(\"Cargando Marker\");\r\n      this.eventLoadMap();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"card card-danger card-outline\">\r\n        <div className=\"card-header\">\r\n          <i className=\"fas fa-map-marked mr-1\"></i>\r\n          Mapa\r\n        </div>\r\n        <div\r\n          className=\"card-body\"\r\n          id=\"gmapContainer\"\r\n          style={{ height: 400 }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  eventLoadMap = () => {\r\n    let input =\r\n      this.props.calle +\r\n      \",\" +\r\n      this.props.colonia +\r\n      \",\" +\r\n      this.props.municipio +\r\n      \",\" +\r\n      this.props.estado +\r\n      \",\" +\r\n      this.props.cp;\r\n    const request = {\r\n      query: input,\r\n      fields: [\"formatted_address\", \"geometry\"],\r\n    };\r\n    this.service = new this.google.maps.places.PlacesService(this.map);\r\n    this.service.findPlaceFromQuery(request, (results, status) => {\r\n      if (status === \"OK\") {\r\n        if (this.markers.length) {\r\n          this.markers[0].setMap(null);\r\n          this.markers = [];\r\n        }\r\n        results.map((place) => {\r\n          this.marker = new this.google.maps.Marker({\r\n            position: place.geometry.location,\r\n            title: place.formatted_address,\r\n            map: this.map,\r\n          });\r\n          this.marker.addListener(\"click\", () => {\r\n            let address = this.marker.title.split(\",\"),\r\n              add = address[2].split(/(\\d{5})/g);\r\n\r\n            if (!add.length) {\r\n              add = address[3].split(/(\\d{5})/g);\r\n            }\r\n            this.props.changeAddress({\r\n              calle: address[0].trim(),\r\n              colonia: address[1].trim(),\r\n              municipio: add[2] ? add[2].trim() : this.props.municipio,\r\n              estado: address[3].trim(),\r\n              cp: add[1] ? add[1].trim() : this.props.cp,\r\n            });\r\n          });\r\n          this.markers.push(this.marker);\r\n          this.markers[0].setMap(this.map);\r\n          this.map.setCenter(this.markers[0].position);\r\n          return null;\r\n        });\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class GraduacionExam extends Component {\r\n  render() {\r\n    const { readOnly } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <table className=\"table table-bordered table-hover\">\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Esfera</th>\r\n              <th>Cilindro</th>\r\n              <th>Eje</th>\r\n              <th>Adici&oacute;n</th>\r\n              <th>D/P</th>\r\n              <th>Altura</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                <label>D</label>\r\n                <i className=\"fa fa-eye\"></i>\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"esferaod\"\r\n                  min=\"-20\"\r\n                  max=\"20\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={\r\n                    this.props.esferaod ? this.props.esferaod.toFixed(2) : \"\"\r\n                  }\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"cilindrod\"\r\n                  min=\"-20\"\r\n                  max=\"0\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={\r\n                    this.props.cilindrod ? this.props.cilindrod.toFixed(2) : \"\"\r\n                  }\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"ejeod\"\r\n                  min=\"0\"\r\n                  max=\"180\"\r\n                  step=\"1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  placeholder=\"°\"\r\n                  value={this.props.ejeod ? parseInt(this.props.ejeod) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adiciond\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={\r\n                    this.props.adiciond ? this.props.adiciond.toFixed(2) : \"\"\r\n                  }\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"dpod\"\r\n                  min=\"40\"\r\n                  max=\"80\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={this.props.dpod ? this.props.dpod.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"alturaod\"\r\n                  min=\"0\"\r\n                  max=\"35\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={\r\n                    this.props.alturaod ? this.props.alturaod.toFixed(1) : \"\"\r\n                  }\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>\r\n                <label>I</label>\r\n                <i className=\"fa fa-eye\"></i>\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"esferaoi\"\r\n                  min=\"-20\"\r\n                  max=\"20\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={\r\n                    this.props.esferaoi ? this.props.esferaoi.toFixed(2) : \"\"\r\n                  }\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"cilindroi\"\r\n                  min=\"-20\"\r\n                  max=\"0\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={\r\n                    this.props.cilindroi ? this.props.cilindroi.toFixed(2) : \"\"\r\n                  }\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"ejeoi\"\r\n                  min=\"0\"\r\n                  max=\"180\"\r\n                  step=\"1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  placeholder=\"°\"\r\n                  value={this.props.ejeoi ? parseInt(this.props.ejeoi) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adicioni\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={\r\n                    this.props.adicioni ? this.props.adicioni.toFixed(2) : \"\"\r\n                  }\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"dpoi\"\r\n                  min=\"40\"\r\n                  max=\"80\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={this.props.dpoi ? this.props.dpoi.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"alturaoi\"\r\n                  min=\"0\"\r\n                  max=\"35\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={\r\n                    this.props.alturaoi ? this.props.alturaoi.toFixed(1) : \"\"\r\n                  }\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <ul className=\"list-group d-print-none mt-4\">\r\n          <li className=\"list-group-item\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12\">\r\n                Lente de contacto\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lcmarca\"\r\n                  maxLength=\"70\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={this.props.lcmarca}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lcgod\"\r\n                  maxLength=\"30\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={this.props.lcgod ? this.props.lcgod : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lcgoi\"\r\n                  maxLength=\"30\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={this.props.lcgoi ? this.props.lcgoi : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name, type, value, checked } = e.target;\r\n    let val = value;\r\n\r\n    if (type === \"checkbox\") val = checked;\r\n    if (type === \"text\") val = value.toLowerCase();\r\n    if (type === \"number\") {\r\n      if (name === \"ejeod\" || name === \"ejeoi\") {\r\n        val = parseInt(value);\r\n      } else {\r\n        val = parseFloat(value);\r\n        val = val.toFixed(2);\r\n        val = parseFloat(val);\r\n      }\r\n    }\r\n    this.props.onChangeInput(name, val);\r\n  };\r\n}\r\n","import React, { Component, Fragment } from \"react\";\r\n//import Codestring from \"../Layouts/codeLentString\";\r\n\r\nexport default class Recomendaciones extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      category_list: [],\r\n      meta: {},\r\n      category_list_2: [],\r\n      category_list_3: [],\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      category: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.category_id !== this.props.category_id) {\r\n      console.log(\"Recargando recomendacion\");\r\n      this.getCategories();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n        category_id,\r\n        title,\r\n        esferaod,\r\n        esferaoi,\r\n        cilindrod,\r\n        cilindroi,\r\n      } = this.props,\r\n      { category } = this.state;\r\n    let code =\r\n        category_id && Object.keys(category).length\r\n          ? this.handleCodeName(category)\r\n          : \"XX\",\r\n      gradod = \"+000000\",\r\n      gradoi = \"+000000\";\r\n\r\n    if (cilindrod || esferaod) {\r\n      gradod = esferaod > 0 ? \"+\" : \"\";\r\n      gradod +=\r\n        esferaod.toFixed(2).toString().replace(\".\", \"\") +\r\n        cilindrod.toFixed(2).toString().replace(\"-\", \"\").replace(\".\", \"\");\r\n    }\r\n    if (cilindroi || esferaoi) {\r\n      gradoi = esferaoi > 0 ? \"+\" : \"\";\r\n      gradoi +=\r\n        esferaoi.toFixed(2).toString().replace(\".\", \"\") +\r\n        cilindroi.toFixed(2).toString().replace(\"-\", \"\").replace(\".\", \"\");\r\n    }\r\n    //console.log(\"GRAD CIL: \", cilindrod, cilindroi);\r\n\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-body\">\r\n          <h3 className=\"card-title text-success m-2\">{title}</h3>\r\n          {!category_id ? (\r\n            this.state.category_list.length ? (\r\n              <Fragment>\r\n                {this.state.category_list.length ? (\r\n                  <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\">Tipo</span>\r\n                    </div>\r\n                    <select\r\n                      name=\"category_id\"\r\n                      className=\"custom-select\"\r\n                      value={this.state.category_id}\r\n                      onChange={this.handleCategoryChange}\r\n                    >\r\n                      <option value=\"0\">Seleccione el tipo</option>\r\n                      {this.state.category_list.map((cat) => {\r\n                        if (\r\n                          cat.meta &&\r\n                          cat.meta.rangoInf <= esferaod &&\r\n                          esferaod <= cat.meta.rangoSup &&\r\n                          cat.meta.rangoInf <= esferaoi &&\r\n                          esferaoi <= cat.meta.rangoSup &&\r\n                          cat.meta.cil <= cilindrod &&\r\n                          cat.meta.cil <= cilindroi\r\n                        ) {\r\n                          return (\r\n                            <option value={cat.id} key={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        } else return false;\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n\r\n                {this.state.category_id && this.state.category_list_2.length ? (\r\n                  <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\">Material</span>\r\n                    </div>\r\n                    <select\r\n                      name=\"category_id_2\"\r\n                      className=\"custom-select\"\r\n                      value={this.state.category_id_2}\r\n                      onChange={this.handleCategoryChange}\r\n                    >\r\n                      <option value=\"0\">Seleccione el material</option>\r\n                      {this.state.category_list_2.map((cat) => {\r\n                        console.log(\"Material: \", cat);\r\n                        if (\r\n                          cat.meta &&\r\n                          cat.meta.rangoInf <= esferaod &&\r\n                          esferaod <= cat.meta.rangoSup &&\r\n                          cat.meta.rangoInf <= esferaoi &&\r\n                          esferaoi <= cat.meta.rangoSup\r\n                        ) {\r\n                          return (\r\n                            <option value={cat.id} key={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        } else return false;\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n\r\n                {this.state.category_id &&\r\n                this.state.category_id_2 &&\r\n                this.state.category_list_3.length ? (\r\n                  <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\">Tratamiento</span>\r\n                    </div>\r\n                    <select\r\n                      name=\"category_id_3\"\r\n                      className=\"custom-select\"\r\n                      value={this.state.category_id_3}\r\n                      onChange={(e) => {\r\n                        this.handleCategoryChange(e, gradod, gradoi);\r\n                      }}\r\n                    >\r\n                      <option value=\"0\">Seleccione el tratamiento</option>\r\n                      {this.state.category_list_3.map((cat) => {\r\n                        return (\r\n                          <option value={cat.id} key={cat.id}>\r\n                            {cat.categoria}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n              </Fragment>\r\n            ) : (\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            )\r\n          ) : (\r\n            <Fragment>\r\n              {code + gradod === code + gradoi ? (\r\n                <p className=\"card-text\">\r\n                  <label>Lente</label>: {code + gradod}\r\n                </p>\r\n              ) : (\r\n                <div className=\"row card-text\">\r\n                  <div className=\"col\">\r\n                    <label>Lente Derecho</label>\r\n                    <br /> {code + gradod}\r\n                  </div>\r\n                  <div className=\"col\">\r\n                    <label>Lente Izquierdo</label>\r\n                    <br /> {code + gradoi}\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {this.props.update ? (\r\n                <p className=\"card-text text-right\">\r\n                  <button\r\n                    className=\"btn btn-outline-info btn-sm card-link mt-2\"\r\n                    onClick={this.handleClickCategory}\r\n                  >\r\n                    Cambiar\r\n                  </button>\r\n                </p>\r\n              ) : null}\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleCodeName = (category) => {\r\n    let code = \"\";\r\n    if (category.depende_de) {\r\n      if (category.depende_de.depende_de) {\r\n        code = category.depende_de.depende_de.meta.code;\r\n        code += category.depende_de.meta.code;\r\n        code += category.meta.code;\r\n      } else {\r\n        code = category.depende_de.meta.code;\r\n        code += category.meta.code;\r\n      }\r\n    } else {\r\n      code = category.meta.code;\r\n    }\r\n    return code;\r\n  };\r\n  handleClickCategory = (e) => {\r\n    e.preventDefault();\r\n    const { onChangeInput, nameCategory } = this.props;\r\n    this.setState({\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      category_list_2: [],\r\n      category_list_3: [],\r\n    });\r\n    onChangeInput({\r\n      [nameCategory]: 0,\r\n    });\r\n  };\r\n  handleCategoryChange = (e, gradod, gradoi) => {\r\n    const { name, value } = e.target,\r\n      { onChangeInput, nameCategory } = this.props;\r\n\r\n    if (name === \"category_id\") {\r\n      if (value) {\r\n        this.state.category_list.map((cat) => {\r\n          if (cat.id === parseInt(value)) {\r\n            this.setState({\r\n              category_id_3: 0,\r\n              category_list_2: cat.hijos,\r\n              category_list_3: [],\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n    if (name === \"category_id_2\") {\r\n      if (value) {\r\n        this.state.category_list_2.map((cat) => {\r\n          if (cat.id === value * 1) {\r\n            this.setState({\r\n              category_list_3: cat.hijos,\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      [name]: parseInt(value),\r\n    });\r\n\r\n    if (name === \"category_id_3\") {\r\n      onChangeInput({\r\n        [nameCategory]: parseInt(value),\r\n      });\r\n    }\r\n  };\r\n  getCategories = () => {\r\n    //Variables\r\n    const { host, token } = this.props.data,\r\n      { category_id } = this.props;\r\n\r\n    //console.log(\"Tipo de descarga\", nameCategory, category_id);\r\n    if (category_id) {\r\n      console.log(\"Descargando categoria para recomendacion\");\r\n      fetch(\"http://\" + host + \"/api/categories/\" + category_id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((cat) => {\r\n          if (cat.data) {\r\n            console.log(\"Recomendacion descargada\");\r\n            this.setState({\r\n              category: cat.data,\r\n              category_id,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus: \" + e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    } else {\r\n      console.log(\"Descargando lista de recomendaciones raiz\");\r\n      fetch(\"http://\" + host + \"/api/categories/1\", {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((cat) => {\r\n          if (cat.data) {\r\n            console.log(\"Lista de recomendaciones descargadas\");\r\n            this.setState({\r\n              category_list: cat.data.hijos,\r\n              meta: cat.meta,\r\n              category_id: 0,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus: \" + e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Graduacion from \"../Exam/graduacionExam\";\r\nimport Recomendaciones from \"../Exam/recomendaciones\";\r\nimport moment from \"moment\";\r\n\r\nexport default class ListsExams extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let ls = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    this.state = {\r\n      id: 0,\r\n      data: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      exam: {},\r\n      examEdit: false,\r\n      load: true,\r\n      page: 0,\r\n      host: ls.host,\r\n      token: ls.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.exam && !this.props.exam.id) {\r\n      this.getExams();\r\n    } else {\r\n      this.setState({\r\n        id: this.props.exam.id,\r\n        exam: this.props.exam,\r\n        load: false,\r\n      });\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (\r\n      this.props.exam &&\r\n      !this.props.exam.id &&\r\n      this.props.exam.id !== props.exam.id\r\n    ) {\r\n      this.getExams();\r\n    }\r\n    if (this.props.exam && this.props.exam.id !== props.exam.id) {\r\n      this.setState({\r\n        id: this.props.exam.id,\r\n        exam: this.props.exam,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data, load, id, exam, examEdit } = this.state,\r\n      { select, datos } = this.props;\r\n\r\n    if (select) {\r\n      return (\r\n        <React.Fragment>\r\n          {id ? (\r\n            <React.Fragment>\r\n              <div className=\"row d-print-none mb-4\">\r\n                <div className=\"col-2\">\r\n                  <div className=\"border border-info rounded p-2 d-flex justify-content-between align-items-center\">\r\n                    <span className=\"badge badge-pill badge-info mx-2\">\r\n                      Folio\r\n                    </span>\r\n                    <strong>{id}</strong>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col\">\r\n                  <div className=\"border border-info rounded p-2 d-flex justify-content-between align-items-center\">\r\n                    <span className=\"badge badge-pill badge-info mx-2\">\r\n                      Estado\r\n                    </span>\r\n                    <strong>\r\n                      {exam.estado ? \"Terminado\" : \"En proceso...\"}\r\n                    </strong>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col\">\r\n                  <div className=\"border border-info rounded p-2 d-flex justify-content-between align-items-center\">\r\n                    <span className=\"badge badge-pill badge-info mx-2\">\r\n                      Fecha\r\n                    </span>\r\n                    <strong>\r\n                      {moment.utc(exam.created_at).local().format(\"LL\")}\r\n                    </strong>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-2 d-print-none text-right\">\r\n                  <button\r\n                    className={\r\n                      this.props.status\r\n                        ? \"btn btn-info disabled\"\r\n                        : \"btn btn-info\"\r\n                    }\r\n                    disabled={this.props.status ? true : false}\r\n                    onClick={this.handleClickDeleteExam}\r\n                  >\r\n                    Cambiar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <Graduacion\r\n                esferaod={exam.esferaod ? exam.esferaod : 0}\r\n                esferaoi={exam.esferaoi ? exam.esferaoi : 0}\r\n                cilindrod={exam.cilindrod ? exam.cilindrod : 0}\r\n                cilindroi={exam.cilindroi ? exam.cilindroi : 0}\r\n                ejeod={exam.ejeod ? exam.ejeod : 0}\r\n                ejeoi={exam.ejeoi ? exam.ejeoi : 0}\r\n                adiciond={exam.adiciond ? exam.adiciond : 0}\r\n                adicioni={exam.adicioni ? exam.adicioni : 0}\r\n                dpod={exam.dpod ? exam.dpod : 0}\r\n                dpoi={exam.dpoi ? exam.dpoi : 0}\r\n                alturaod={exam.alturaod ? exam.alturaod : 0}\r\n                alturaoi={exam.alturaoi ? exam.alturaoi : 0}\r\n                lcmarca={exam.lcmarca ? exam.lcmarca : 0}\r\n                lcgod={exam.lcgod ? exam.lcgod : 0}\r\n                lcgoi={exam.lcgoi ? exam.lcgoi : 0}\r\n                readOnly={!examEdit}\r\n                onChangeInput={this.handleDataExam}\r\n              />\r\n\r\n              <div className=\"row d-print-none\">\r\n                <div className=\"col p-2\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-body\">\r\n                      <label className=\"card-title text-success\">\r\n                        Observaciones\r\n                      </label>\r\n                      <p className=\"card-text text-muted text-uppercase\">\r\n                        {exam.observaciones ? exam.observaciones : \"--\"}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {exam.category_id ? (\r\n                  <React.Fragment>\r\n                    <div className=\"col p-2\">\r\n                      <Recomendaciones\r\n                        category_id={exam.category_id}\r\n                        title=\"Recomendacion principal\"\r\n                        esferaod={exam.esferaod ? exam.esferaod : 0}\r\n                        esferaoi={exam.esferaoi ? exam.esferaoi : 0}\r\n                        cilindrod={exam.cilindrod ? exam.cilindrod : 0}\r\n                        cilindroi={exam.cilindroi ? exam.cilindroi : 0}\r\n                        data={datos}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    {exam.category_ii ? (\r\n                      <div className=\"col p-2\">\r\n                        <Recomendaciones\r\n                          category_id={exam.category_ii}\r\n                          title=\"Recomendacion adicional\"\r\n                          esferaod={exam.esferaod ? exam.esferaod : 0}\r\n                          esferaoi={exam.esferaoi ? exam.esferaoi : 0}\r\n                          cilindrod={exam.cilindrod ? exam.cilindrod : 0}\r\n                          cilindroi={exam.cilindroi ? exam.cilindroi : 0}\r\n                          data={datos}\r\n                          onChangeInput={this.handleChangeInput}\r\n                        />\r\n                      </div>\r\n                    ) : null}\r\n                  </React.Fragment>\r\n                ) : null}\r\n              </div>\r\n\r\n              <div className=\"row d-print-none\">\r\n                <div className=\"col text-right pt-2\">\r\n                  <button\r\n                    className={examEdit ? \"btn btn-dark\" : \"btn btn-info\"}\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      if (examEdit) {\r\n                        this.handleSaveExam(exam);\r\n                      }\r\n                      this.setState({\r\n                        examEdit: !examEdit,\r\n                      });\r\n                    }}\r\n                  >\r\n                    {examEdit ? (\r\n                      <React.Fragment>\r\n                        <i className=\"fas fa-save mr-2\"></i> Guardar\r\n                      </React.Fragment>\r\n                    ) : (\r\n                      <React.Fragment>\r\n                        <i className=\"fas fa-pencil-alt mr-2\"></i> Editar\r\n                      </React.Fragment>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          ) : (\r\n            <table className=\"table table-hover table-nowrap\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Folio</th>\r\n                  <th>Fecha</th>\r\n                  <th>Edad</th>\r\n                  <th>Estado</th>\r\n                  <th>&nbsp;</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {load ? (\r\n                  <tr>\r\n                    <td colSpan=\"5\" className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : Object.keys(data.data).length ? (\r\n                  data.data.map((row) => {\r\n                    return (\r\n                      <tr\r\n                        key={row.id}\r\n                        className={\r\n                          moment\r\n                            .utc(new Date())\r\n                            .isSame(moment.utc(row.created_at), \"day\")\r\n                            ? \"table-success\"\r\n                            : \"\"\r\n                        }\r\n                      >\r\n                        <td>\r\n                          <span className=\"badge badge-info\">{row.id}</span>\r\n                        </td>\r\n                        <td>\r\n                          {moment.utc(row.created_at).local().format(\"L\")}\r\n                          <br />\r\n                          {moment(new Date()).isSame(row.created_at)}\r\n                        </td>\r\n                        <td>{row.edad}</td>\r\n                        <td>\r\n                          {row.estado ? (\r\n                            <span className=\"badge badge-secondary\">\r\n                              Terminado\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"badge badge-success\">Activo</span>\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          <button\r\n                            className=\"btn btn-outline-dark btn-sm\"\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              this.handleClickSelect(row);\r\n                            }}\r\n                          >\r\n                            <i className=\"fas fa-check\"></i>\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <tr>\r\n                    <th colSpan=\"5\" className=\"text-center\">\r\n                      Aun no tiene examenes\r\n                      <button\r\n                        className=\"btn btn-outline-info btn-sm ml-4\"\r\n                        onClick={this.handleNewExam}\r\n                      >\r\n                        <i className=\"fas fa-plus\"></i>\r\n                      </button>\r\n                    </th>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      let examToday = false,\r\n        newExam = false;\r\n      return (\r\n        <div className=\"card card-info card-outline\">\r\n          <div className=\"card-header\">\r\n            <i className=\"fas fa-notes-medical mr-1\"></i>\r\n            Examenes realizados\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <table className=\"table table-hover table-nowrap\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Folio</th>\r\n                  <th>Fecha</th>\r\n                  <th>Edad</th>\r\n                  <th>Estado</th>\r\n                  <th className=\"text-center\">Acciones</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {load ? (\r\n                  <tr>\r\n                    <td colSpan=\"8\" className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : Object.keys(data.data).length ? (\r\n                  data.data.map((row) => {\r\n                    examToday = moment(new Date()).isSame(\r\n                      moment(row.created_at),\r\n                      \"day\"\r\n                    );\r\n                    newExam = newExam ? true : examToday;\r\n                    console.log(\"Hoy: \", examToday, newExam);\r\n                    return (\r\n                      <tr\r\n                        key={row.id}\r\n                        className={examToday ? \"table-success\" : \"\"}\r\n                      >\r\n                        <td>\r\n                          <span className=\"badge badge-info\">{row.id}</span>\r\n                        </td>\r\n                        <td>{moment(row.created_at).format(\"L\")}</td>\r\n                        <td>{row.edad}</td>\r\n                        <td>\r\n                          {row.estado ? (\r\n                            <span className=\"badge badge-secondary\">\r\n                              Terminado\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"badge badge-success\">Activo</span>\r\n                          )}\r\n                        </td>\r\n                        <td className=\"text-right\">\r\n                          <Link\r\n                            className=\"btn btn-outline-info btn-sm\"\r\n                            to={\"/consultorio/registro/\" + row.id}\r\n                            onClick={(e) => {\r\n                              this.changePage(\"/consultorio/registro/\");\r\n                            }}\r\n                            alt=\"Ver examen\"\r\n                          >\r\n                            <i className=\"fas fa-share\"></i> Ver examen\r\n                          </Link>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <tr>\r\n                    <th colSpan=\"5\" className=\"text-center\">\r\n                      Aun no tiene examenes\r\n                    </th>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"card-footer\">\r\n            {!newExam ? (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-info float-right\"\r\n                onClick={this.handleNewExam}\r\n              >\r\n                <i className=\"fas fa-plus\"></i>\r\n              </button>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleSaveExam = (data) => {\r\n    const { id } = data,\r\n      { paciente, edad } = this.props;\r\n    delete data.id;\r\n    data.contact_id = paciente;\r\n    data.edad = edad;\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de actualizar el examen?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Actualizar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Actualiza el examen según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n            method: \"PUT\",\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Examen almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Examen actualizado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el pedido\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  handleDataExam = (key, value) => {\r\n    let { exam } = this.state;\r\n    exam[key] = value;\r\n    this.setState({\r\n      exam,\r\n    });\r\n  };\r\n  handleChangeInput = (key, value) => {\r\n    this.props.ChangeInput(key, value);\r\n  };\r\n  handleClickDeleteExam = (e) => {\r\n    e.preventDefault();\r\n    if (window.confirm(\"¿Realmente desea cambiar de examen?\")) {\r\n      this.props.ChangeInput(\"exam_id\", 0);\r\n      this.props.ChangeInput(\"exam\", {});\r\n    }\r\n  };\r\n  handleClickSelect = (exam) => {\r\n    this.props.ChangeInput(\"exam_id\", exam.id);\r\n    this.props.ChangeInput(\"exam\", exam);\r\n  };\r\n  handleNewOrder = (id) => {\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva orden?\",\r\n      icon: \"info\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Si\",\r\n      cancelButtonText: \"No\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables en localStorage\r\n          let { host, token } = this.state,\r\n            { paciente } = this.props,\r\n            body = {\r\n              contact_id: paciente,\r\n              exam_id: id,\r\n              items: JSON.stringify([]),\r\n            };\r\n          //Crear o modificar examen\r\n          console.log(\"Enviando datos del pedido a la API\");\r\n          return fetch(\"http://\" + host + \"/api/orders\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Orden almacenada\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n          window.Swal.fire(\r\n            \"Orden creada con exito\",\r\n            \"\",\r\n            \"success\"\r\n          ).then((res) => this.getExams());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la orden\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  handleNewExam = (e) => {\r\n    e.preventDefault();\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear un nueva examen?\",\r\n      icon: \"info\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Si\",\r\n      cancelButtonText: \"No\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables en localStorage\r\n          let { host, token } = this.state,\r\n            { paciente, edad } = this.props,\r\n            body = {\r\n              contact_id: paciente,\r\n              edad,\r\n            };\r\n          //Crear examen\r\n          console.log(\"Enviando datos del examen a la API\");\r\n          return fetch(\"http://\" + host + \"/api/exams\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Examen almacenado\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Examen creado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.getExams();\r\n            this.props.ChangeInput(\"exam_id\", data.data.id);\r\n            this.props.ChangeInput(\"exam\", data.data);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el examen\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  getExams = () => {\r\n    const { load, host, token } = this.state;\r\n    const { paciente } = this.props;\r\n\r\n    if (paciente) {\r\n      //Variables en localStorage\r\n      const url = \"http://\" + host + \"/api/exams\",\r\n        page = this.state.page > 0 ? \"?page=\" + this.state.page : \"?page=1\",\r\n        orderby = \"&orderby=created_at&order=desc\",\r\n        client = \"&paciente=\" + paciente;\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n\r\n      //Realiza la peticion de examenes a la API\r\n      console.log(\"Descargando examenes del contacto\");\r\n      fetch(url + page + client + orderby, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            this.setState({\r\n              load: false,\r\n            });\r\n            console.log(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          console.log(\"Examenes almacenados\");\r\n          this.setState({\r\n            data: !data.message ? data : [],\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class NameInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: props.validName ? \"bg-blue\" : \"bg-red\",\r\n      validate: props.validName ? \"\" : \" border border-danger\",\r\n      text: \"Debe de tener por lo menos nombre y apellido\",\r\n      searchUser: false,\r\n      contacts: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidUpdate(props) {\r\n    if (props.validName !== this.props.validName) {\r\n      this.setState({\r\n        bgColor: this.props.validName ? \"bg-blue\" : \"bg-red\",\r\n        validate: this.props.validName ? \"\" : \" border border-danger\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { name, validName } = this.props;\r\n    let { bgColor, validate, text, searchUser, contacts } = this.state;\r\n    if (!name) name = \"\";\r\n    return (\r\n      <React.Fragment>\r\n        {name ? (\r\n          <div className=\"ml-2 mt-1\">\r\n            <small>\r\n              <label>Nombre completo</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              {searchUser ? (\r\n                <i className=\"fas fa-spinner\"></i>\r\n              ) : (\r\n                <i className=\"fas fa-id-card-alt\"></i>\r\n              )}\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className={\"form-control text-capitalize\" + validate}\r\n            placeholder=\"Nombre completo\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={this.handleChange}\r\n            autoFocus={!name.length ? true : false}\r\n            autoComplete=\"off\"\r\n            required=\"required\"\r\n            pattern=\"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*\"\r\n            minLength=\"8\"\r\n            list=\"contactos_db\"\r\n          />\r\n        </div>\r\n        {contacts.length ? (\r\n          <datalist id=\"contactos_db\">\r\n            {contacts.map((contact) => {\r\n              return (\r\n                <option\r\n                  key={contact.id}\r\n                  value={this.eraseTilde(contact.nombre)}\r\n                />\r\n              );\r\n            })}\r\n          </datalist>\r\n        ) : null}\r\n        {!validName ? (\r\n          <div className=\"p-0\">\r\n            <small className=\"text-danger\">{text}</small>\r\n          </div>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  eraseTilde = (string) => {\r\n    string = string.replace(new RegExp(/[àáâãäå]/g), \"a\");\r\n    string = string.replace(new RegExp(/[èéêë]/g), \"e\");\r\n    string = string.replace(new RegExp(/[ìíîï]/g), \"i\");\r\n    string = string.replace(new RegExp(/[òóôõö]/g), \"o\");\r\n    string = string.replace(new RegExp(/[ùúûü]/g), \"u\");\r\n    return string;\r\n  };\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    let regex = /^[a-z.]{2,20}[\\s]{1}[a-z.]{2,20}.*/,\r\n      x = {\r\n        target: {\r\n          name: \"validName\",\r\n          value: \"\",\r\n          target: \"\",\r\n        },\r\n      },\r\n      stringOk = this.eraseTilde(value.toLowerCase());\r\n    e.target.value = stringOk;\r\n\r\n    if (regex.test(value)) {\r\n      this.setState({\r\n        bgColor: \"bg-blue\",\r\n        validate: \"\",\r\n      });\r\n      x.target.value = true;\r\n      this.props.onChange(x);\r\n      this.validUser(e.target.value, x);\r\n    } else {\r\n      this.setState({\r\n        bgColor: \"bg-red\",\r\n        validate: \" border border-danger\",\r\n        text: \"No tiene el formato de nombre de persona\",\r\n        contacts: [],\r\n      });\r\n      x.target.value = false;\r\n      this.props.onChange(x);\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validUser = (search, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n      name = \"?name=\" + search;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de contactos\r\n      this.setState({\r\n        searchUser: true,\r\n      });\r\n      fetch(url + name, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            data.data.map((contacto) => {\r\n              let nombre = this.eraseTilde(contacto.nombre);\r\n              if (nombre === search) {\r\n                console.log(\"Contacto registrado \");\r\n                this.setState({\r\n                  bgColor: \"bg-red\",\r\n                  validate: \" border border-danger\",\r\n                  text: \"El contacto ya esta registrado\",\r\n                  searchUser: false,\r\n                  contacts: [],\r\n                });\r\n                x.target.value = false;\r\n                this.props.onChange(x);\r\n              }\r\n              return false;\r\n            });\r\n            this.setState({\r\n              searchUser: false,\r\n              contacts: data.data,\r\n            });\r\n          } else {\r\n            console.error(\"Error en la descarga de contactos\", data.message);\r\n            this.setState({\r\n              searchUser: false,\r\n            });\r\n            x.target.value = false;\r\n            this.props.onChange(x);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          this.setState({\r\n            searchUser: false,\r\n          });\r\n          x.target.value = false;\r\n          this.props.onChange(x);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class EmailInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: props.validEmail ? \"bg-blue\" : \"bg-red\",\r\n      validate: props.validEmail ? \"\" : \" border border-danger\",\r\n      text: \"No es un email correcto\",\r\n      emailContact: false,\r\n      contacts: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n    this.emailOriginal = props.email;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidUpdate(props) {\r\n    if (props.validEmail !== this.props.validEmail) {\r\n      this.setState({\r\n        bgColor: this.props.validEmail ? \"bg-blue\" : \"bg-red\",\r\n        validate: this.props.validEmail ? \"\" : \" border border-danger\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { email, validEmail } = this.props;\r\n    let { bgColor, validate, text, emailContact, contacts } = this.state;\r\n    if (!email) email = \"\";\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {email ? (\r\n          <div className=\"ml-2 mt-1\">\r\n            <small>\r\n              <label>Correo electronico</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mt-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              {emailContact ? (\r\n                <i className=\"fas fa-spinner\"></i>\r\n              ) : (\r\n                <i className=\"fas fa-at\"></i>\r\n              )}\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"email\"\r\n            className={\"form-control\" + validate}\r\n            placeholder=\"Correo electronico\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={this.handleChange}\r\n            autoComplete=\"off\"\r\n            minLength=\"8\"\r\n            list=\"email_db\"\r\n          />\r\n          {contacts.length ? (\r\n            <datalist id=\"email_db\">\r\n              {contacts.map((contact) => {\r\n                return <option key={contact.id} value={contact.email} />;\r\n              })}\r\n            </datalist>\r\n          ) : null}\r\n        </div>\r\n        {!validEmail ? (\r\n          <div className=\"p-0\">\r\n            <small className=\"text-danger\">{text}</small>\r\n          </div>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  eraseTilde = (string) => {\r\n    string = string.replace(new RegExp(/[àáâãäå]/g), \"a\");\r\n    string = string.replace(new RegExp(/[èéêë]/g), \"e\");\r\n    string = string.replace(new RegExp(/[ìíîï]/g), \"i\");\r\n    string = string.replace(new RegExp(/[òóôõö]/g), \"o\");\r\n    string = string.replace(new RegExp(/[ùúûü]/g), \"u\");\r\n    return string;\r\n  };\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    const { id } = this.props;\r\n    let regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n      x = {\r\n        target: {\r\n          name: \"validEmail\",\r\n          value: \"\",\r\n          target: \"\",\r\n        },\r\n      },\r\n      stringOk = this.eraseTilde(value.toLowerCase());\r\n    e.target.value = stringOk;\r\n\r\n    if (regex.test(value)) {\r\n      this.setState({\r\n        bgColor: \"bg-blue\",\r\n        validate: \"\",\r\n      });\r\n      x.target.value = true;\r\n      this.props.onChange(x);\r\n      if (!id) {\r\n        if (this.emailOriginal !== e.target.value)\r\n          this.validUser(e.target.value, x);\r\n      } else {\r\n        this.validUser(e.target.value, x);\r\n      }\r\n    } else {\r\n      this.setState({\r\n        bgColor: \"bg-red\",\r\n        validate: \" border border-danger\",\r\n        text: \"No es un email correcto\",\r\n        contacts: [],\r\n      });\r\n      x.target.value = false;\r\n      this.props.onChange(x);\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validUser = (search, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n      name = \"?email=\" + search;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de contactos\r\n      this.setState({\r\n        emailContact: true,\r\n      });\r\n      fetch(url + name, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            data.data.map((contacto) => {\r\n              if (contacto.email === search) {\r\n                this.setState({\r\n                  bgColor: \"bg-red\",\r\n                  validate: \" border border-danger\",\r\n                  text: \"El email ya esta registrado\",\r\n                  emailContact: false,\r\n                  contacts: [],\r\n                });\r\n                x.target.value = false;\r\n                this.props.onChange(x);\r\n              }\r\n              return false;\r\n            });\r\n            this.setState({\r\n              emailContact: false,\r\n              contacts: data.data,\r\n            });\r\n          } else {\r\n            console.error(\"Error en la descarga de contactos\", data.message);\r\n            this.setState({\r\n              emailContact: false,\r\n            });\r\n            x.target.value = false;\r\n            this.props.onChange(x);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          this.setState({\r\n            emailContact: false,\r\n          });\r\n          x.target.value = false;\r\n          this.props.onChange(x);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport NameInput from \"./nameInput\";\r\nimport EmailInput from \"./emailInput\";\r\n\r\nexport default class AddPersonal extends Component {\r\n  render() {\r\n    let {\r\n      type,\r\n      business,\r\n      name,\r\n      rfc,\r\n      email,\r\n      birthday,\r\n      validName,\r\n      validEmail,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"col \">\r\n        <small>\r\n          <label>Tipo de cliente</label>\r\n        </small>\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-clipboard-check\"></i>\r\n            </span>\r\n          </div>\r\n          <select\r\n            className=\"custom-select\"\r\n            name=\"type\"\r\n            value={type}\r\n            onChange={this.catchInputs}\r\n          >\r\n            <option value=\"0\">Cliente</option>\r\n            <option value=\"1\">Proveedor</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <input\r\n              type=\"checkbox\"\r\n              name=\"business\"\r\n              className=\"mr-2\"\r\n              checked={business}\r\n              onChange={this.catchInputs}\r\n            />\r\n            <small>\r\n              <label>¿Es una empresa?</label>\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <NameInput\r\n          name={name}\r\n          validName={validName}\r\n          onChange={this.catchInputs}\r\n        />\r\n\r\n        {rfc ? (\r\n          <div className=\"ml-2 mt-1\">\r\n            <small>\r\n              <label>RFC</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-file-invoice-dollar\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-uppercase\"\r\n            placeholder=\"RFC\"\r\n            name=\"rfc\"\r\n            value={rfc ? rfc : \"\"}\r\n            onChange={this.catchInputs}\r\n            required={false}\r\n            minLength=\"10\"\r\n          />\r\n        </div>\r\n\r\n        <EmailInput\r\n          email={email}\r\n          validEmail={validEmail}\r\n          onChange={this.catchInputs}\r\n        />\r\n\r\n        {!business && !type ? (\r\n          <React.Fragment>\r\n            {birthday ? (\r\n              <div className=\"ml-2 mt-1\">\r\n                <small>\r\n                  <label>Fecha de nacimiento</label>\r\n                </small>\r\n              </div>\r\n            ) : (\r\n              <br />\r\n            )}\r\n            <div className=\"input-group mb-1\">\r\n              <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\">\r\n                  <i className=\"fas fa-calendar-check\"></i>\r\n                </span>\r\n              </div>\r\n              <input\r\n                type=\"date\"\r\n                className=\"form-control\"\r\n                placeholder=\"Fecha de nacimiento\"\r\n                name=\"birthday\"\r\n                value={birthday ? birthday : \"\"}\r\n                onChange={this.catchInputs}\r\n              />\r\n            </div>\r\n          </React.Fragment>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (x) => {\r\n    this.props.onChange(x);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AddDomicilio extends Component {\r\n  render() {\r\n    let { calle, colonia, municipio, estado, cp } = this.props;\r\n    return (\r\n      <div className=\"col\">\r\n        {calle ? (\r\n          <small>\r\n            <label>Calle y numero</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-road\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Calle y numero\"\r\n            name=\"calle\"\r\n            value={calle}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {colonia ? (\r\n          <small>\r\n            <label>Colonia</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-location-arrow\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Colonia\"\r\n            name=\"colonia\"\r\n            value={colonia}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {municipio ? (\r\n          <small>\r\n            <label>Municipio</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-location-arrow\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Municipio\"\r\n            name=\"municipio\"\r\n            value={municipio}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {estado ? (\r\n          <small>\r\n            <label>Estado</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-map-marker\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Estado\"\r\n            name=\"estado\"\r\n            value={estado}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {cp ? (\r\n          <small>\r\n            <label>Codigo postal</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-map-marker\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Codigo Postal\"\r\n            name=\"cp\"\r\n            value={cp}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (x) => {\r\n    this.props.onChange(x);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AddTelefonos extends Component {\r\n  render() {\r\n    let { t_casa, t_oficina, t_movil } = this.props,\r\n      verify =\r\n        t_casa.length === 10 ||\r\n        t_movil.length === 10 ||\r\n        t_oficina.length === 10;\r\n\r\n    return (\r\n      <div className=\"col\">\r\n        {t_casa ? (\r\n          <div className=\"ml-1 mt-1\">\r\n            <small>\r\n              <label>Telefono de casa</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-phone\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Telefono de casa\"\r\n            name=\"t_casa\"\r\n            value={t_casa}\r\n            onChange={this.catchInputs}\r\n            pattern=\"^[\\d]{10}$\"\r\n            maxLength=\"10\"\r\n          />\r\n        </div>\r\n        {t_oficina ? (\r\n          <div className=\"ml-1 mt-1\">\r\n            <small>\r\n              <label>Telefono de oficina</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-phone-alt\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Telefono de oficina\"\r\n            name=\"t_oficina\"\r\n            value={t_oficina}\r\n            onChange={this.catchInputs}\r\n            pattern=\"^[\\d]{10}$\"\r\n            maxLength=\"10\"\r\n          />\r\n        </div>\r\n        {t_movil ? (\r\n          <div className=\"ml-1 mt-1\">\r\n            <small>\r\n              <label>Telefono celular</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-mobile-alt\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Telefono celular\"\r\n            name=\"t_movil\"\r\n            value={t_movil}\r\n            onChange={this.catchInputs}\r\n            pattern=\"^[\\d]{10}$\"\r\n            required={\r\n              t_casa.length !== 10 && t_oficina.length !== 10 ? true : false\r\n            }\r\n            maxLength=\"10\"\r\n          />\r\n        </div>\r\n        {!verify ? (\r\n          <div className=\"mt-2 p-0 text-danger\">\r\n            <small>Por lo menos capture un telefono</small>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (x) => {\r\n    this.props.onChange(x);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Mapa from \"./mapa\";\r\nimport ListExam from \"../Exam/listsExams\";\r\nimport Personal from \"./add_personal\";\r\nimport Domicilio from \"./add_domicilio\";\r\nimport Telefono from \"./add_telefonos\";\r\n\r\nexport default class ContactsAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Recogemos valores de registro previo\r\n    let contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    this.state = {\r\n      id: 0,\r\n      name: contact && contact.name ? contact.name : \"\",\r\n      validName: false,\r\n      rfc: \"\",\r\n      email: \"\",\r\n      validEmail: false,\r\n      type: 0,\r\n      birthday: \"\",\r\n      calle: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      estado: \"\",\r\n      cp: \"\",\r\n      t_casa: \"\",\r\n      t_oficina: \"\",\r\n      t_movil: \"\",\r\n      business: false,\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeSave = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    let id = this.props.match.params.id,\r\n      //Recogemos valores de registro inconcluso\r\n      data = JSON.parse(localStorage.getItem(\"OrusContactNew\"));\r\n\r\n    if (id) {\r\n      this.getUser(id);\r\n    } else {\r\n      //Si existe un usuario previo\r\n      if (\r\n        data &&\r\n        data.name &&\r\n        data.name.length > 4 &&\r\n        window.confirm(\r\n          \"Existe un registro previo de \" +\r\n            data.name.toUpperCase() +\r\n            \", \\n ¿Desea Cargar los datos?\"\r\n        )\r\n      ) {\r\n        this.setState({\r\n          name: data.name,\r\n          validName: true,\r\n          rfc: data.rfc,\r\n          email: data.email,\r\n          validEmail: true,\r\n          type: data.type,\r\n          birthday: data.birthday,\r\n          calle: data.calle,\r\n          colonia: data.colonia,\r\n          municipio: data.municipio,\r\n          estado: data.estado,\r\n          cp: data.cp,\r\n          t_casa: data.t_casa,\r\n          t_oficina: data.t_oficina,\r\n          t_movil: data.t_movil,\r\n        });\r\n      }\r\n      localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (\r\n      !this.state.id &&\r\n      !this.state.load &&\r\n      this.state.validName &&\r\n      this.state.validEmail\r\n    ) {\r\n      if (this.timeSave) clearTimeout(this.timeSave);\r\n      this.timeSave = setTimeout(() => {\r\n        localStorage.setItem(\r\n          \"OrusContactNew\",\r\n          JSON.stringify({\r\n            name: this.state.name,\r\n            rfc: this.state.rfc,\r\n            email: this.state.email,\r\n            type: this.state.type,\r\n            birthday: this.state.birthday,\r\n            calle: this.state.calle,\r\n            colonia: this.state.colonia,\r\n            municipio: this.state.municipio,\r\n            estado: this.state.estado,\r\n            cp: this.state.cp,\r\n            t_casa: this.state.t_casa,\r\n            t_oficina: this.state.t_oficina,\r\n            t_movil: this.state.t_movil,\r\n          })\r\n        );\r\n      }, 1500);\r\n    } else {\r\n      localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      id,\r\n      name,\r\n      rfc,\r\n      email,\r\n      type,\r\n      birthday,\r\n      calle,\r\n      colonia,\r\n      municipio,\r\n      estado,\r\n      cp,\r\n      t_casa,\r\n      t_oficina,\r\n      t_movil,\r\n      business,\r\n      load,\r\n      validName,\r\n      validEmail,\r\n    } = this.state;\r\n\r\n    return (\r\n      <form onSubmit={this.handleSave}>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12\">\r\n            <div className=\"card card-danger card-outline\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title text-danger\">\r\n                  <i className=\"fas fa-address-book mr-2\"></i>\r\n                  {id ? \"Editar contacto\" : \"Registrar nuevo contacto\"}\r\n                  {validName && validEmail ? (\r\n                    <span className=\"ml-2 text-muted\">\r\n                      <small>(Almacenado automatico)</small>\r\n                    </span>\r\n                  ) : null}\r\n                </h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row was-validated\">\r\n                  <Personal\r\n                    id={id}\r\n                    name={name}\r\n                    rfc={rfc}\r\n                    email={email}\r\n                    type={type}\r\n                    birthday={birthday}\r\n                    business={business}\r\n                    validName={validName}\r\n                    validEmail={validEmail}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n\r\n                  <Domicilio\r\n                    calle={calle}\r\n                    colonia={colonia}\r\n                    municipio={municipio}\r\n                    estado={estado}\r\n                    cp={cp}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n\r\n                  <Telefono\r\n                    t_casa={t_casa}\r\n                    t_movil={t_movil}\r\n                    t_oficina={t_oficina}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"card-footer\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-12\">\r\n                    {load ? (\r\n                      <div className=\"text-center\">\r\n                        <div\r\n                          className=\"spinner-border text-primary\"\r\n                          role=\"status\"\r\n                        >\r\n                          <span className=\"sr-only\">Loading...</span>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"btn-group float-right\" role=\"group\">\r\n                        <Link\r\n                          to=\"/contactos\"\r\n                          className=\"btn btn-dark\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/contactos\");\r\n                          }}\r\n                        >\r\n                          <i\r\n                            className={\r\n                              id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                            }\r\n                          ></i>\r\n                          <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                        </Link>\r\n                        <button\r\n                          type=\"submit\"\r\n                          className={\r\n                            validName &&\r\n                            validEmail &&\r\n                            (t_casa || t_oficina || t_movil)\r\n                              ? \"btn btn-danger\"\r\n                              : \"btn btn-danger disabled\"\r\n                          }\r\n                          disabled={\r\n                            validName &&\r\n                            validEmail &&\r\n                            (t_casa || t_oficina || t_movil)\r\n                              ? \"\"\r\n                              : \"disabled\"\r\n                          }\r\n                        >\r\n                          <i className=\"fas fa-save mr-1\"></i>\r\n                          Guardar\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          {this.state.calle && !this.state.type ? (\r\n            <div className=\"col\">\r\n              <Mapa\r\n                calle={this.state.calle}\r\n                colonia={this.state.colonia}\r\n                municipio={this.state.municipio}\r\n                estado={this.state.estado}\r\n                cp={this.state.cp}\r\n                changeAddress={this.changeAddress}\r\n              />\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {this.state.id && !this.state.type ? (\r\n            <div className=\"col\">\r\n              <ListExam\r\n                paciente={this.state.id}\r\n                exam={{}}\r\n                page={this.changePage}\r\n                edad={\r\n                  moment(this.state.birthday)\r\n                    .fromNow(true)\r\n                    .replace(/[a-zA-ZñÑ]/gi, \"\") * 1\r\n                }\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  changeAddress = (json) => {\r\n    this.setState(json);\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value = e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { validName, validEmail, id } = this.state;\r\n\r\n    //Verificamos campos validos\r\n    if (!validName) {\r\n      window.Swal.fire(\r\n        \"Base de datos\",\r\n        \"El contacto ya esta registrado\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (!validEmail) {\r\n      window.Swal.fire(\r\n        \"Base de datos\",\r\n        \"El email ya esta registrado\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar al contacto?\"\r\n        : \"¿Esta seguro de crear un nuevo contacto?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let {\r\n              name,\r\n              rfc,\r\n              email,\r\n              type,\r\n              birthday,\r\n              calle,\r\n              colonia,\r\n              municipio,\r\n              estado,\r\n              cp,\r\n              t_casa,\r\n              t_oficina,\r\n              t_movil,\r\n              business,\r\n              host,\r\n              token,\r\n            } = this.state,\r\n            //Creamos el body\r\n            body = {\r\n              name,\r\n              rfc,\r\n              email,\r\n              type,\r\n              birthday: business ? \"\" : birthday,\r\n              business,\r\n              domicilio: JSON.stringify({\r\n                calle,\r\n                colonia,\r\n                municipio,\r\n                estado,\r\n                cp,\r\n              }),\r\n              telnumbers: JSON.stringify({\r\n                t_casa,\r\n                t_oficina,\r\n                t_movil,\r\n              }),\r\n            },\r\n            //Identificamos la URL y el metodo segun sea el caso (Actualizar o agregar)\r\n            url = id\r\n              ? \"http://\" + host + \"/api/contacts/\" + id\r\n              : \"http://\" + host + \"/api/contacts\",\r\n            //Actualiza el contacto o creamos el contacto\r\n            method = id ? \"PUT\" : \"POST\";\r\n\r\n          //Enviamos datos al API\r\n          console.log(\"Enviando datos del contacto a la API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Contacto almacenado\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n          localStorage.setItem(\r\n            \"OrusContactInUse\",\r\n            JSON.stringify({ id: data.data.id })\r\n          );\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Contacto actualizado con exito\"\r\n              : \"Contacto almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.props.history.goBack();\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el contacto\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getUser = (id) => {\r\n    if (id > 0) {\r\n      //Variables en localStorage\r\n      let { load, host, token } = this.state;\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      //Realiza la peticion al API\r\n      console.log(\"Descargando datos del contacto del API\");\r\n      fetch(\"http://\" + host + \"/api/contacts/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.data) {\r\n            let { domicilio, telefonos } = data.data;\r\n            console.log(\"Almacenando datos del contacto\");\r\n            this.setState({\r\n              id: data.data.id,\r\n              name: data.data.nombre,\r\n              rfc: data.data.rfc,\r\n              email: data.data.email,\r\n              type: data.data.tipo,\r\n              business: data.data.empresa,\r\n              birthday: data.data.f_nacimiento,\r\n              calle: domicilio && domicilio.calle ? domicilio.calle : \"\",\r\n              colonia: domicilio && domicilio.colonia ? domicilio.colonia : \"\",\r\n              municipio:\r\n                domicilio && domicilio.municipio ? domicilio.municipio : \"\",\r\n              estado: domicilio && domicilio.estado ? domicilio.estado : \"\",\r\n              cp: domicilio && domicilio.cp ? domicilio.cp : \"\",\r\n              t_casa: telefonos && telefonos.t_casa ? telefonos.t_casa : \"\",\r\n              t_oficina:\r\n                telefonos && telefonos.t_oficina ? telefonos.t_oficina : \"\",\r\n              t_movil: telefonos && telefonos.t_movil ? telefonos.t_movil : \"\",\r\n              validName: true,\r\n              validEmail: true,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\"Error\", \"Al descargar el contacto\", \"error\");\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AddContact extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Recogemos valores de registro previo\r\n    this.state = {\r\n      name: \"\",\r\n      validName: false,\r\n      rfc: \"\",\r\n      email: \"\",\r\n      validEmail: false,\r\n      type: 0,\r\n      birthday: \"\",\r\n      t_casa: \"\",\r\n      t_oficina: \"\",\r\n      t_movil: \"\",\r\n      business: false,\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeSave = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      name,\r\n      email,\r\n      birthday,\r\n      t_casa,\r\n      t_oficina,\r\n      t_movil,\r\n      load,\r\n      validName,\r\n      validEmail,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card card-danger card-outline\">\r\n            <div className=\"card-header\">\r\n              <h3 className=\"card-title text-danger\">\r\n                <i className=\"fas fa-address-book mr-2\"></i>\r\n                Pacientes\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"card-body\">\r\n              <div className=\"row was-validated\">\r\n                <div className=\"input-group mb-1\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className={\"input-group-text \"}>\r\n                      <i className=\"fas fa-id-card-alt\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    className={\"form-control text-capitalize\"}\r\n                    placeholder=\"Nombre completo\"\r\n                    name=\"name\"\r\n                    value={name}\r\n                    onChange={this.handleChange}\r\n                    autoFocus={!name.length ? true : false}\r\n                    autoComplete=\"off\"\r\n                    required=\"required\"\r\n                    pattern=\"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*\"\r\n                    minLength=\"8\"\r\n                    list=\"contactos_db\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-1\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className={\"input-group-text \"}>\r\n                      <i className=\"fas fa-at\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"email\"\r\n                    className={\"form-control\"}\r\n                    placeholder=\"Correo electronico\"\r\n                    name=\"email\"\r\n                    value={email}\r\n                    onChange={this.handleChange}\r\n                    autoComplete=\"off\"\r\n                    minLength=\"8\"\r\n                    list=\"email_db\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-1\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-phone\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"tel\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Telefono\"\r\n                    name=\"t_movil\"\r\n                    value={t_movil}\r\n                    onChange={this.catchInputs}\r\n                    pattern=\"^[\\d]{10}$\"\r\n                    maxLength=\"10\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"input-group mb-1\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-calendar-check\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Fecha de nacimiento\"\r\n                  name=\"birthday\"\r\n                  value={birthday ? birthday : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"card-footer\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                  {load ? (\r\n                    <div className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"btn-group float-right\" role=\"group\">\r\n                      <button\r\n                        type=\"submit\"\r\n                        className={\r\n                          validName &&\r\n                          validEmail &&\r\n                          (t_casa || t_oficina || t_movil)\r\n                            ? \"btn btn-danger\"\r\n                            : \"btn btn-danger disabled\"\r\n                        }\r\n                        disabled={\r\n                          validName &&\r\n                          validEmail &&\r\n                          (t_casa || t_oficina || t_movil)\r\n                            ? \"\"\r\n                            : \"disabled\"\r\n                        }\r\n                      >\r\n                        <i className=\"fas fa-save mr-1\"></i>\r\n                        Guardar\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Pagination from \"./pagination\";\r\n\r\nexport default class ToolsCategory extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      category_list: [],\r\n      category_select: [],\r\n      category_hijos: [],\r\n      category_hijos_3: [],\r\n      meta: {},\r\n      add: false,\r\n      name: \"\",\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      newItem: 0,\r\n      page: 1,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      load: true,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.page !== this.state.page) {\r\n      console.log(\"Recargando categorias\");\r\n      this.getCategories();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { category_list, meta, load } = this.state,\r\n      category_hijos = this.state.category_hijos,\r\n      category_hijos_3 = this.state.category_hijos_3;\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">Categorias</h5>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Nombre</th>\r\n                <th>Padre</th>\r\n                <th>Eliminar</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {!load ? (\r\n                category_list.map((cat) => {\r\n                  let padre = \"\";\r\n\r\n                  if (cat.depende_de != null) {\r\n                    if (cat.depende_de.depende_de != null) {\r\n                      padre = cat.depende_de.depende_de.categoria;\r\n                    }\r\n                    padre = padre\r\n                      ? padre + \"/\" + cat.depende_de.categoria\r\n                      : cat.depende_de.categoria;\r\n                  }\r\n                  padre = padre ? padre : \"--\";\r\n\r\n                  return (\r\n                    <tr\r\n                      key={cat.id}\r\n                      className={\r\n                        cat.id === this.state.newItem ? \"table-success\" : \"\"\r\n                      }\r\n                    >\r\n                      <td className=\"text-capitalize\">{cat.categoria}</td>\r\n                      <td className=\"text-capitalize\">{padre}</td>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn btn-outline-light btn-sm\"\r\n                          onClick={(e) => {\r\n                            this.handleClickDelete(cat.id, cat.categoria);\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-trash\"></i>\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"8\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n            {this.state.add && !load ? (\r\n              <tfoot>\r\n                <tr>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      className=\"form-control\"\r\n                      autoComplete=\"off\"\r\n                      value={this.state.name}\r\n                      onChange={this.catchInputs}\r\n                      ref={(input) => {\r\n                        this.nameInput = input;\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <select\r\n                      name=\"category_id\"\r\n                      className=\"form-control\"\r\n                      value={this.state.category_id}\r\n                      onChange={this.handleCategoryChange}\r\n                    >\r\n                      <option value=\"0\">Inicial</option>\r\n                      {this.state.category_select.map((cat) => {\r\n                        return (\r\n                          <option key={cat.id} value={cat.id}>\r\n                            {cat.categoria}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                    {category_hijos.length ? (\r\n                      <select\r\n                        name=\"category_id_2\"\r\n                        className=\"form-control mt-2\"\r\n                        value={this.state.category_id_2}\r\n                        onChange={this.handleCategoryChange}\r\n                      >\r\n                        <option value=\"0\">Raiz</option>\r\n                        {this.state.category_hijos.map((cat) => {\r\n                          return (\r\n                            <option key={cat.id} value={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        })}\r\n                      </select>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    {category_hijos_3.length ? (\r\n                      <select\r\n                        name=\"category_id_3\"\r\n                        className=\"form-control mt-2\"\r\n                        value={this.state.category_id_3}\r\n                        onChange={this.handleCategoryChange}\r\n                      >\r\n                        <option value=\"0\">Raiz</option>\r\n                        {this.state.category_hijos_3.map((cat) => {\r\n                          return (\r\n                            <option key={cat.id} value={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        })}\r\n                      </select>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-dark btn-sm\"\r\n                      onClick={this.handleClickSave}\r\n                    >\r\n                      <i className=\"fas fa-save\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            ) : (\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan=\"3\">\r\n                    <Pagination\r\n                      meta={meta}\r\n                      handleChangePage={this.handleChangePage}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            )}\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={this.handleClickAdd}\r\n          >\r\n            {this.state.add ? (\r\n              <i className=\"fas fa-undo\"></i>\r\n            ) : (\r\n              <i className=\"fas fa-plus\"></i>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleCategoryChange = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"category_id\") {\r\n      if (value) {\r\n        this.state.category_select.map((cat) => {\r\n          if (cat.id === value * 1) {\r\n            this.setState({\r\n              category_hijos: cat.hijos,\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n    if (name === \"category_id_2\") {\r\n      if (value) {\r\n        this.state.category_hijos.map((cat) => {\r\n          if (cat.id === value * 1) {\r\n            this.setState({\r\n              category_hijos_3: cat.hijos,\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n    });\r\n  };\r\n  handleClickDelete = (id, name) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar la categoria \" + name.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de categoria por API\");\r\n          return fetch(\"http://\" + host + \"/api/categories/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Categoria eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Categoria eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getCategories());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  handleClickSave = () => {\r\n    //Verificamos campos validos\r\n    if (this.state.name.length < 4) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Debe de escribir el nombre de la categoria\",\r\n        \"warning\"\r\n      );\r\n      this.nameInput.focus();\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva categoria?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          let { host, token } = this.state,\r\n            body = {\r\n              name: this.state.name,\r\n              category_id: this.state.category_id_3\r\n                ? this.state.category_id_3\r\n                : this.state.category_id_2\r\n                ? this.state.category_id_2\r\n                : this.state.category_id,\r\n            };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(\"http://\" + host + \"/api/categories\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Categoria almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Categoria almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.setState({\r\n              newItem: data.data.id,\r\n            });\r\n            this.getCategories();\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la categoria\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getCategories = () => {\r\n    //Variables en localStorage\r\n    let { host, token, load } = this.state,\r\n      url = \"http://\" + host + \"/api/categories\",\r\n      categoryid = \"&categoryid=raiz\",\r\n      page = this.state.page > 0 ? \"?page=\" + this.state.page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    console.log(\"Descargando lista de categorias\");\r\n    fetch(url + page, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data) {\r\n          console.log(\"Lista de categorias descargadas\");\r\n          this.setState({\r\n            category_list: cat.data,\r\n            meta: cat.meta,\r\n            newItem: 0,\r\n            add: false,\r\n            category_id: 0,\r\n            name: \"\",\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n    //Category_select\r\n    fetch(url + page + categoryid, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data) {\r\n          this.setState({\r\n            category_select: cat.data,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  handleClickAdd = () => {\r\n    this.setState({\r\n      add: !this.state.add,\r\n      name: \"\",\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      category_hijos: [],\r\n      category_hijos_3: [],\r\n    });\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Category from \"./tools_category\";\r\n//import { Link } from 'react-router-dom';\r\n\r\nexport default class StoreAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      server: \"\",\r\n      company: \"\",\r\n      email: \"\",\r\n      name: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      category_list: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    this.setState({\r\n      server: varLocalStorage.host\r\n        ? varLocalStorage.host\r\n        : window.location.host.split(\":\")[0],\r\n      company: varLocalStorage.company ? varLocalStorage.company : \"\",\r\n      email: varLocalStorage.email ? varLocalStorage.email : \"\",\r\n      name: varLocalStorage.name ? varLocalStorage.name : \"\",\r\n      username: varLocalStorage.username ? varLocalStorage.username : \"\",\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { data } = this.props;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-6\">\r\n          <div className=\"card card-primary card-outline\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Generales</h5>\r\n              <p>&nbsp;</p>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-server\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Servidor\"\r\n                  name=\"server\"\r\n                  value={this.state.server}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-building\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control text-capitalize\"\r\n                  placeholder=\"Nombre de la empresa\"\r\n                  name=\"company\"\r\n                  value={this.state.company}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"card-footer text-right\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.clickSave}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <Category data={data} />\r\n        </div>\r\n        <div className=\"col-6\">\r\n          <div className=\"card card-primary card-outline\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Usuario</h5>\r\n              <p>&nbsp;</p>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-at\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Email\"\r\n                  name=\"email\"\r\n                  value={this.state.email}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-user-tag\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control text-capitalize\"\r\n                  placeholder=\"Nombre completo\"\r\n                  name=\"name\"\r\n                  value={this.state.name}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <hr />\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-user-check\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Usuario\"\r\n                  name=\"username\"\r\n                  value={this.state.username}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-lock\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Contraseña\"\r\n                  name=\"password\"\r\n                  value={this.state.password}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"card-footer text-right\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.clickSaveUser}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  clickSave = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    varLocalStorage.company = this.state.company;\r\n    varLocalStorage.host = this.state.server;\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(varLocalStorage));\r\n  };\r\n  clickSaveUser = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    varLocalStorage.email = this.state.email;\r\n    varLocalStorage.name = this.state.name;\r\n    varLocalStorage.username = this.state.username;\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(varLocalStorage));\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, status, date } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: paciente\"\r\n                    value={search ? search : \"\"}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Estado</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-toggle-on\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"status\"\r\n                    value={status}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Activo</option>\r\n                    <option value=\"1\">Terminado</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Fecha</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-calendar-alt\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"form-control\"\r\n                    name=\"date\"\r\n                    value={date}\r\n                    onChange={this.changeFilters}\r\n                  />\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search || date || status\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"status\", 0);\r\n    this.props.changeFilters(\"date\", moment(new Date()).format(\"YYYY-MM-DD\"));\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Exam extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusExam\"));\r\n    this.state = {\r\n      exams: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd && sdd.orderby ? sdd.orderby : \"created_at\",\r\n      order: sdd && sdd.order ? sdd.order : \"desc\",\r\n      search: sdd && sdd.search ? sdd.search : \"\",\r\n      status: sdd && sdd.status >= 0 ? sdd.status : \"\",\r\n      date: sdd && sdd.date ? sdd.date : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getExams();\r\n    localStorage.setItem(\r\n      \"OrusExam\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        status: this.state.status,\r\n        date: this.state.date,\r\n      })\r\n    );\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando examenes\");\r\n      this.getExams();\r\n      localStorage.setItem(\r\n        \"OrusExam\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          status: this.state.status,\r\n          date: this.state.date,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { exams, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Paciente\", type: \"name\", filter: true },\r\n        { name: \"Edad\" },\r\n        { name: \"Estado\" },\r\n        { name: \"Esfera\" },\r\n        { name: \"Cilindro\" },\r\n        { name: \"Eje\" },\r\n        { name: \"Adicion\" },\r\n        { name: \"D/P\" },\r\n        { name: \"Altura\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-info card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-info\">\r\n            <i className=\"fas fa-notes-medical mr-2\"></i>\r\n            Examanes de la vista\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/consultorio/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={this.changePage}\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={this.state.search}\r\n              status={this.state.status}\r\n              date={this.state.date}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={exams.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"12\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(exams.data).length ? (\r\n                exams.data.map((exam) => {\r\n                  return (\r\n                    <tr\r\n                      key={exam.id}\r\n                      className={\r\n                        exam.estado\r\n                          ? \"table-secondary\"\r\n                          : moment\r\n                              .utc(new Date())\r\n                              .isSame(moment.utc(exam.created_at), \"hour\")\r\n                          ? \"table-success\"\r\n                          : \"\"\r\n                      }\r\n                    >\r\n                      <td>\r\n                        <Link to={\"/consultorio/registro/\" + exam.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {exam.paciente.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td>{exam.edad ? exam.edad : \"--\"}</td>\r\n                      <td className=\"text-uppercase\">\r\n                        {exam.estado ? (\r\n                          <span className=\"text-secondary\">Terminado</span>\r\n                        ) : (\r\n                          <span className=\"text-success\">Activo</span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {exam.esferaod}/{exam.esferaoi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.cilindrod}/{exam.cilindroi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.ejeod}/{exam.ejeoi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.adiciond}/{exam.adicioni}\r\n                      </td>\r\n                      <td>\r\n                        {exam.dpod}/{exam.dpoi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.alturaod}/{exam.alturaoi}\r\n                      </td>\r\n                      <td>\r\n                        {moment(exam.updated_at, \"YYYY-MM-DD\").format(\"ll\")}\r\n                      </td>\r\n                      <td>{moment(exam.created_at, \"YYYY-MM-DD\").fromNow()}</td>\r\n                      <Actions\r\n                        id={exam.id}\r\n                        item={exam.paciente.nombre}\r\n                        delete={\r\n                          exam.estado || exam.order_id\r\n                            ? null\r\n                            : this.handleDelete\r\n                        }\r\n                        edit={\"/consultorio/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"12\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/consultorio/registro\"\r\n            className=\"btn btn-outline-info\"\r\n            onClick={this.changePage}\r\n            id=\"/consultorio/registro\"\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            Nuevo examen\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleFilter = () => {\r\n    this.setState({\r\n      load: true,\r\n      page: 1,\r\n    });\r\n  };\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  handleDelete = (id, item) => {\r\n    //Confirmación de eliminacion\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text:\r\n        \"¿Esta seguro de eliminar el examen del paciente \" +\r\n        item.toUpperCase() +\r\n        \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          return fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Examen eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Examen eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getExams());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getExams() {\r\n    //Variables\r\n    let {\r\n        host,\r\n        token,\r\n        order,\r\n        orderby,\r\n        search,\r\n        page,\r\n        status,\r\n        load,\r\n        date,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/exams\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\",\r\n      fecha = date === \"\" ? \"\" : \"&date=\" + date,\r\n      estado = status === \"\" ? \"\" : \"&status=\" + status;\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Realiza la peticion de los contactos\r\n    fetch(url + pagina + ordenar + estado + fecha + buscar, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Examenes descargados\");\r\n          this.setState({\r\n            exams: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar examenes\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class easyContact extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let storage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    this.state = {\r\n      name: \"\",\r\n      t_movil: \"\",\r\n      birthday: \"\",\r\n      email: \"\",\r\n      host: storage.host,\r\n      token: storage.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { name } = this.props;\r\n    if (name) {\r\n      this.setState({\r\n        name,\r\n      });\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.name !== this.props.name && this.props.name !== this.state.name) {\r\n      this.setState({\r\n        name: this.props.name,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { name, t_movil, birthday, email } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"form-group\">\r\n          <label>Nuevo paciente</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-uppercase\"\r\n            placeholder=\"Nombre del paciente\"\r\n            name=\"name\"\r\n            autoComplete=\"off\"\r\n            required=\"required\"\r\n            pattern=\"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*\"\r\n            minLength=\"8\"\r\n            value={name}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Telefono celular</label>\r\n          <input\r\n            type=\"tel\"\r\n            placeholder=\"Telefono celular\"\r\n            className=\"form-control\"\r\n            name=\"t_movil\"\r\n            pattern=\"^[\\d]{10}$\"\r\n            maxLength=\"10\"\r\n            value={t_movil}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>E-mail</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Fecha de naciemiento</label>\r\n          <input\r\n            type=\"date\"\r\n            className=\"form-control\"\r\n            name=\"birthday\"\r\n            value={birthday}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group text-right\">\r\n          <button className=\"btn btn-danger\" onClick={this.handleSave}>\r\n            Registrar\r\n          </button>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  changeValue = (e) => {\r\n    const { name, value, type } = e.target;\r\n    let val = value;\r\n    console.log(name, value);\r\n    if (type === \"text\" || type === \"email\") val = value.toLowerCase();\r\n    this.setState({\r\n      [name]: val,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { name, t_movil } = this.state;\r\n    console.log(\"Verificacion\", name.length, t_movil.length);\r\n    //Verificamos campos validos\r\n    if (name.length < 5) {\r\n      window.Swal.fire(\r\n        \"Verificacion\",\r\n        \"El nombre del paciente no es correcto\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (t_movil.length !== 10) {\r\n      window.Swal.fire(\r\n        \"Verificacion\",\r\n        \"El numero telefonico no es correcto\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear un nuevo contacto?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { name, birthday, t_movil, email, host, token } = this.state,\r\n            //Creamos el body\r\n            body = {\r\n              name,\r\n              email: email\r\n                ? email\r\n                : name.replace(/\\s/g, \"\") +\r\n                  birthday.replace(/-/g, \"\").replace(/\\//g, \"\") +\r\n                  \"@domain\",\r\n              type: 0,\r\n              birthday,\r\n              business: 0,\r\n              domicilio: JSON.stringify({\r\n                calle: \"\",\r\n                colonia: \"\",\r\n                municipio: \"Colima\",\r\n                estado: \"Colima\",\r\n                cp: \"28000\",\r\n              }),\r\n              telnumbers: JSON.stringify({\r\n                t_casa: \"\",\r\n                t_oficina: \"\",\r\n                t_movil,\r\n              }),\r\n            },\r\n            //Identificamos la URL y el metodo segun sea el caso (Actualizar o agregar)\r\n            url = \"http://\" + host + \"/api/contacts\",\r\n            //Actualiza el contacto o creamos el contacto\r\n            method = \"POST\";\r\n\r\n          //Enviamos datos al API\r\n          console.log(\"Enviando datos del contacto a la API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Contacto almacenado\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n          localStorage.setItem(\r\n            \"OrusContactInUse\",\r\n            JSON.stringify({ id: data.data.id })\r\n          );\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Contacto almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.props.setContac(data.data.id, data.data.birthday);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el contacto\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Easycontact from \"./easyContact\";\r\nimport moment from \"moment\";\r\n//import \"moment/locale/es\";\r\n\r\nexport default class searchContact extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      contacto: \"\",\r\n      data: [],\r\n      dataContact: {},\r\n      load: false,\r\n      edad: 30,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    //identificador del contacto\r\n    let id = this.props.contact;\r\n    if (id) {\r\n      this.getContact(id);\r\n    } else {\r\n      this.contactInput.focus();\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.contacto !== this.state.contacto) {\r\n      if (this.state.contacto.length > 2) {\r\n        this.getContacts(this.state.contacto);\r\n      } else {\r\n        this.setState({\r\n          data: [],\r\n        });\r\n      }\r\n    }\r\n    if (props.contact !== this.props.contact && this.props.contact) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n      this.getContact(this.props.contact);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { load } = this.state;\r\n\r\n    if (this.props.contact) {\r\n      if (load) {\r\n        return (\r\n          <div className=\"card card-danger card-outline d-print-none\">\r\n            <div className=\"card-body box-profile\">\r\n              <div className=\"text-center\">\r\n                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                  <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      } else if (Object.keys(this.state.dataContact).length) {\r\n        const {\r\n            nombre,\r\n            telefonos,\r\n            domicilio,\r\n            id,\r\n            f_nacimiento,\r\n          } = this.state.dataContact,\r\n          edad =\r\n            typeof this.props.edad === \"number\" && this.props.edad\r\n              ? this.props.edad + \" años\"\r\n              : f_nacimiento\r\n              ? moment(f_nacimiento).fromNow(true)\r\n              : 0;\r\n\r\n        return (\r\n          <div className=\"card card-danger card-outline\">\r\n            <div className=\"card-body box-profile\">\r\n              <div className=\"text-center\">\r\n                <img\r\n                  className=\"profile-user-img img-fluid img-circle\"\r\n                  src=\"/img/avatars/no-avatar.png\"\r\n                  alt=\"User Avatar\"\r\n                />\r\n              </div>\r\n\r\n              <h3 className=\"profile-username text-center text-capitalize\">\r\n                {nombre}\r\n              </h3>\r\n              <h6 className=\"text-muted text-center\">\r\n                {telefonos.t_movil ? (\r\n                  <span>Movil: {telefonos.t_movil}</span>\r\n                ) : telefonos.t_casa ? (\r\n                  <span>Casa: {telefonos.t_casa}</span>\r\n                ) : telefonos.t_oficina ? (\r\n                  <span>Oficina: {telefonos.t_oficina}</span>\r\n                ) : (\r\n                  <span className=\"text-danger\">Capture el telefono</span>\r\n                )}\r\n              </h6>\r\n              <p className=\"text-muted text-center\">\r\n                {domicilio && domicilio.calle.length > 6\r\n                  ? domicilio.calle\r\n                  : null}\r\n              </p>\r\n\r\n              <ul className=\"list-group list-group-unbordered mb-3\">\r\n                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                  <b>Edad:</b>\r\n\r\n                  {edad ? (\r\n                    <span className=\"badge badge-primary badge-pill\">\r\n                      {edad}\r\n                    </span>\r\n                  ) : (\r\n                    <input\r\n                      type=\"number\"\r\n                      name=\"edad\"\r\n                      className=\"form-control\"\r\n                      value={this.state.edad}\r\n                      onChange={this.handleSearcContact}\r\n                      onBlur={this.sendAge}\r\n                      onKeyPress={(e) => {\r\n                        if (e.key === \"Enter\") {\r\n                          this.sendAge(e);\r\n                        }\r\n                      }}\r\n                    />\r\n                  )}\r\n                </li>\r\n                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                  <b>#Contacto:</b>\r\n                  <span className=\"badge badge-primary badge-pill\">{id}</span>\r\n                </li>\r\n              </ul>\r\n              {!this.props.status ? (\r\n                <div className=\"btn-group btn-block\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={this.handleClickChange}\r\n                  >\r\n                    <i className=\"fas fa-exchange-alt mr-1\"></i>\r\n                    <b>Cambiar</b>\r\n                  </button>\r\n                  <Link\r\n                    to={\"/contactos/registro/\" + id}\r\n                    className=\"btn btn-danger\"\r\n                    onClick={(e) => {\r\n                      this.handleChangePage(\"/contactos/registro/\");\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-edit mr-1\"></i>\r\n                    <b>Editar</b>\r\n                  </Link>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      return (\r\n        <div className=\"card card-danger card-outline d-print-none\">\r\n          <div className=\"card-body\">\r\n            <label>Buscar paciente</label>\r\n            <div className=\"input-group mb-3\">\r\n              <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\">\r\n                  <i className=\"fas fa-user\"></i>\r\n                </span>\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control text-capitalize\"\r\n                placeholder=\"Nombre del paciente\"\r\n                name=\"contacto\"\r\n                autoComplete=\"off\"\r\n                value={this.state.contacto}\r\n                onChange={this.handleSearcContact}\r\n                ref={(input) => {\r\n                  this.contactInput = input;\r\n                }}\r\n              />\r\n            </div>\r\n            {this.state.data.length ? (\r\n              <ul className=\"list-group\">\r\n                {this.state.data.map((contact) => {\r\n                  return (\r\n                    <li key={contact.id} className=\"list-group-item\">\r\n                      <a\r\n                        href=\"#contact\"\r\n                        className={\r\n                          !contact.id\r\n                            ? \"text-danger text-capitalize\"\r\n                            : \"text-muted text-capitalize\"\r\n                        }\r\n                        onClick={(e) => {\r\n                          this.handleClickContact(e, contact.id);\r\n                        }}\r\n                      >\r\n                        <i className=\"fas fa-user mr-1\"></i>\r\n                        {contact.nombre}\r\n                      </a>\r\n                      {!contact.id ? (\r\n                        <Easycontact\r\n                          name={this.state.contacto}\r\n                          setContac={(id, date) => {\r\n                            let edad =\r\n                              moment(date)\r\n                                .fromNow(true)\r\n                                .replace(/[a-zA-ZñÑ]/gi, \"\") * 1;\r\n                            this.setState({\r\n                              contacto: \"\",\r\n                              data: [],\r\n                              dataContact: {},\r\n                            });\r\n                            localStorage.setItem(\r\n                              \"OrusContactInUse\",\r\n                              JSON.stringify({})\r\n                            );\r\n                            this.props.getIdContact(id, edad);\r\n                          }}\r\n                        />\r\n                      ) : null}\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            ) : load ? (\r\n              <div className=\"text-center\">\r\n                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                  <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  sendAge = (e) => {\r\n    const { value } = e.target,\r\n      { id } = this.state.dataContact;\r\n\r\n    if (value > 0 && value < 110 && id) {\r\n      this.props.getIdContact(id, value * 1);\r\n    }\r\n  };\r\n  getContact = (id) => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    //Realiza busqueda de contacto\r\n    fetch(\"http://\" + varLocalStorage.host + \"/api/contacts/\" + id, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        console.log(\"Descargando contacto\");\r\n        this.setState({\r\n          dataContact: data.data,\r\n          load: false,\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n  handleChangePage = (page) => {\r\n    this.props.changePage(page);\r\n  };\r\n  handleClickChange = (e) => {\r\n    e.preventDefault();\r\n    if (window.confirm(\"¿Esta seguro?\")) {\r\n      this.setState({\r\n        contacto: \"\",\r\n        data: [],\r\n        dataContact: {},\r\n      });\r\n      localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n      this.props.getIdContact(0);\r\n    }\r\n  };\r\n  handleClickContact = (e, id) => {\r\n    if (e) e.preventDefault();\r\n    this.state.data.map((contact) => {\r\n      if (contact.id === id) {\r\n        this.setState({\r\n          contacto: \"\",\r\n          data: [],\r\n          dataContact: contact,\r\n        });\r\n        let edad =\r\n          moment(contact.f_nacimiento)\r\n            .fromNow(true)\r\n            .replace(/[a-zA-ZñÑ]/gi, \"\") * 1;\r\n        this.props.getIdContact(id, edad);\r\n        localStorage.setItem(\"OrusContactInUse\", JSON.stringify({ id }));\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    });\r\n  };\r\n  getContacts = (word) => {\r\n    let { load } = this.state;\r\n\r\n    //Revisamos que ya este cargando\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    if (this.timeSave) clearTimeout(this.timeSave);\r\n    this.timeSave = setTimeout(() => {\r\n      //Variables en localStorage\r\n      let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n        url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n        type = \"&type=0\",\r\n        search = word ? `&search=${word}` : \"\",\r\n        page = \"?page=1&itemsPage=4\";\r\n      console.log(\"Descargando contactos de la API\");\r\n      //Realiza la peticion de los contactos\r\n      fetch(url + page + search + type, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then(async (response) => {\r\n          let back = {};\r\n          if (response.status !== 204) back = await response.json();\r\n          if (!response.ok) {\r\n            throw new Error(back.message);\r\n          }\r\n          return back;\r\n        })\r\n        .then((data) => {\r\n          if (data.data && data.data.length) {\r\n            console.log(\"Mostrando información del contacto\");\r\n            this.setState({\r\n              data: data.data,\r\n              load: false,\r\n            });\r\n          } else {\r\n            this.setState({\r\n              data: [\r\n                {\r\n                  id: 0,\r\n                  nombre: \"No hay contactos para: \" + word,\r\n                },\r\n              ],\r\n              load: false,\r\n            });\r\n            localStorage.setItem(\r\n              \"OrusContactInUse\",\r\n              JSON.stringify({ name: word.toLowerCase() })\r\n            );\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus fetch\", e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    }, 1500);\r\n  };\r\n  handleSearcContact = (e) => {\r\n    const { name, value, type } = e.target;\r\n    let val = value;\r\n    if (type === \"number\") val = parseInt(value);\r\n    if (type === \"text\") val = value.toLowerCase();\r\n    this.setState({\r\n      [name]: val,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class GeneralesExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"headingOne\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#collapseOne\"\r\n              aria-expanded=\"true\"\r\n              aria-controls=\"collapseOne\"\r\n            >\r\n              Generales\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"collapseOne\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingOne\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"pc\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"pc\"\r\n                    checked={this.props.pc}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"pc\">\r\n                    <i className=\"fas fa-desktop\"></i> PC\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"pc_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.pc_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.pc ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"tablet\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"tablet\"\r\n                    checked={this.props.tablet}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"tablet\">\r\n                    <i className=\"fas fa-tablet-alt\"></i> Tablet\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"tablet_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.tablet_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.tablet ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"movil\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"movil\"\r\n                    checked={this.props.movil}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"movil\">\r\n                    <i className=\"fas fa-mobile-alt\"></i> Telefono\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"movil_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.movil_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.movil ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"lap\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"lap\"\r\n                    checked={this.props.lap}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"lap\">\r\n                    <i className=\"fas fa-laptop\"></i> Laptop\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lap_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.lap_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.lap ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-1\">\r\n              <div className=\"col-md-6\">\r\n                <ul className=\"list-group\">\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"frontal\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"frontal\"\r\n                        checked={this.props.frontal}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label className=\"custom-control-label\" htmlFor=\"frontal\">\r\n                        Frontal\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"occipital\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"occipital\"\r\n                        checked={this.props.occipital}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label\r\n                        className=\"custom-control-label\"\r\n                        htmlFor=\"occipital\"\r\n                      >\r\n                        Occipital\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"generality\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"generality\"\r\n                        checked={this.props.generality}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label\r\n                        className=\"custom-control-label\"\r\n                        htmlFor=\"generality\"\r\n                      >\r\n                        General\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"cefalea\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"cefalea\"\r\n                        checked={this.props.cefalea}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label className=\"custom-control-label\" htmlFor=\"cefalea\">\r\n                        Cefalea\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <ul className=\"list-group\">\r\n                  <li className=\"list-group-item\">\r\n                    Temporal\r\n                    <br />\r\n                    <div className=\"row mt-2\">\r\n                      <div className=\"col\">\r\n                        <div className=\"custom-control custom-switch\">\r\n                          <input\r\n                            name=\"temporaod\"\r\n                            type=\"checkbox\"\r\n                            className=\"custom-control-input\"\r\n                            id=\"temporaod\"\r\n                            checked={this.props.temporaod}\r\n                            onChange={this.catchInputs}\r\n                          />\r\n                          <label\r\n                            className=\"custom-control-label\"\r\n                            htmlFor=\"temporaod\"\r\n                          >\r\n                            <i className=\"fa fa-eye\"></i> Derecho\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col\">\r\n                        <div className=\"custom-control custom-switch\">\r\n                          <input\r\n                            name=\"temporaoi\"\r\n                            type=\"checkbox\"\r\n                            className=\"custom-control-input\"\r\n                            id=\"temporaoi\"\r\n                            checked={this.props.temporaoi}\r\n                            onChange={this.catchInputs}\r\n                          />\r\n                          <label\r\n                            className=\"custom-control-label\"\r\n                            htmlFor=\"temporaoi\"\r\n                          >\r\n                            <i className=\"fa fa-eye\"></i> Izquierdo\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item\">\r\n                    Frecuencia\r\n                    <span className=\"badge badge-pill\">\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"c_frecuencia\"\r\n                        maxLength=\"60\"\r\n                        className=\"form-control input-xs\"\r\n                        value={this.props.c_frecuencia}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                    </span>\r\n                  </li>\r\n                  <li className=\"list-group-item\">\r\n                    <label htmlFor=\"c_intensidad\">Intensidad</label>\r\n                    <input\r\n                      type=\"range\"\r\n                      name=\"c_intensidad\"\r\n                      className=\"custom-range custom-range-info\"\r\n                      id=\"c_intensidad\"\r\n                      min=\"0\"\r\n                      max=\"4\"\r\n                      value={this.props.c_intensidad}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class InterrogatorioExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"headingThree\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#collapseThree\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"collapseThree\"\r\n            >\r\n              Interrogatorios\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"collapseThree\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <label>Interrogatorio inicial</label>\r\n                <textarea\r\n                  name=\"interrogatorio\"\r\n                  className=\"form-control\"\r\n                  value={this.props.interrogatorio}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-12\">\r\n                <label>Cirugias oculares</label>\r\n                <textarea\r\n                  name=\"coa\"\r\n                  className=\"form-control\"\r\n                  value={this.props.coa}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-12\">\r\n                <label>Antecedentes oculares patologicas personales</label>\r\n                <textarea\r\n                  name=\"aopp\"\r\n                  className=\"form-control\"\r\n                  rows=\"2\"\r\n                  value={this.props.aopp}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-12\">\r\n                <label>Antecedentes oculares patologicas familiares</label>\r\n                <textarea\r\n                  name=\"aopf\"\r\n                  className=\"form-control\"\r\n                  rows=\"2\"\r\n                  value={this.props.aopf}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class KeraRetExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#panel_100\"\r\n              aria-expanded=\"true\"\r\n              aria-controls=\"panel_100\"\r\n            >\r\n              Keratrometria y Retinoscopia\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"panel_100\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingOne\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-6\">Keratometria</div>\r\n              <div className=\"col-6\">Retinoscopia</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fas fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"keratometriaod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.keratometriaod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <i className=\"fas fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"keratometriaoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.keratometriaoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"rsod\"\r\n                  maxLength=\"16\"\r\n                  className=\"form-control\"\r\n                  value={this.props.rsod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"rsoi\"\r\n                  maxLength=\"16\"\r\n                  className=\"form-control\"\r\n                  value={this.props.rsoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class DiabetesExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading4\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja4\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja4\"\r\n            >\r\n              Diabetes\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja4\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8\">\r\n                <label>Diab&eacute;tico</label>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <label>Fotocoagulaci&oacute;n laser</label>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">Fecha</div>\r\n              <div className=\"col-2\">Rango de glucosa</div>\r\n              <div className=\"col-3\">Ultimo examen</div>\r\n              <div className=\"col-2\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"d_fclod\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"d_fclod\"\r\n                    checked={this.props.d_fclod}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"d_fclod\">\r\n                    <i className=\"fa fa-eye\"></i> Derecho\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-2\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"d_fcloi\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"d_fcloi\"\r\n                    checked={this.props.d_fcloi}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"d_fcloi\">\r\n                    <i className=\"fa fa-eye\"></i> Izquierdo\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"d_time\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_time}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"d_media\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_media}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"d_test\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_test}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"d_fclod_time\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_fclod_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.d_fclod ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"d_fcloi_time\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_fcloi_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.d_fcloi ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <label>Oftalmoscopia</label>\r\n                <textarea\r\n                  name=\"oftalmoscopia\"\r\n                  className=\"form-control\"\r\n                  value={this.props.oftalmoscopia}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AgudezaExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading5\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja5\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja5\"\r\n            >\r\n              Capacidad y agudeza visual\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja5\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">Capacidad visual</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"cvod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.cvod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"cvoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.cvoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-md-6\">Agudeza visual (Sin lentes)</div>\r\n              <div className=\"col-md-6\">\r\n                Agudeza visual (con la graduaci&oacute;n anterior)\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avslod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avslod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avsloi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avsloi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avcgaod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.avcgaod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avcgaoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.avcgaoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">Agudeza visual final</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avfod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avfod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avfoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avfoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <i className=\"fa fa-eye\"></i>\r\n                <i className=\"fa fa-eye\"></i> <label>Ambos</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avf2o\"\r\n                  maxLength=\"25\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avf2o}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class DiagnosticoExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading6\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja6\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja6\"\r\n            >\r\n              Diagnostico\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja6\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\"></div>\r\n              <div className=\"col-md-6\">Tensi&oacute;n ocular</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                Diagnostico\r\n                <select\r\n                  name=\"diagnostico\"\r\n                  className=\"form-control\"\r\n                  value={this.props.diagnostico}\r\n                  onChange={this.catchInputs}\r\n                >\r\n                  <option value=\"Emetrope\">Em&eacute;trope</option>\r\n                  <option value=\"hipermetropia\">Hipermetrop&iacute;a</option>\r\n                  <option value=\"hipermetropia-astigmatismo\">\r\n                    Hipermetrop&iacute;a y astigmatismo\r\n                  </option>\r\n                  <option value=\"hipermetropia-miopia\">\r\n                    Hipermetrop&iacute;a y miop&iacute;a\r\n                  </option>\r\n                  <option value=\"astigmatismo-regla\">\r\n                    Astigmatismo con la regla\r\n                  </option>\r\n                  <option value=\"astigmatismo-contra-regla\">\r\n                    Astigmatismo contra la regla\r\n                  </option>\r\n                  <option value=\"astigmatismo-oblicuo\">\r\n                    Astigmatismo oblicuo\r\n                  </option>\r\n                  <option value=\"astigmatismo-miopia\">\r\n                    Astigmatismo/m&iacute;opico\r\n                  </option>\r\n                  <option value=\"miopia\">Miop&iacute;a</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"presbicie\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"presbicie\"\r\n                    checked={this.props.presbicie}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"presbicie\">\r\n                    Presbicie\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"piod\"\r\n                  min=\"0\"\r\n                  max=\"40\"\r\n                  step=\"1\"\r\n                  className=\"form-control\"\r\n                  value={this.props.piod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"pioi\"\r\n                  min=\"0\"\r\n                  max=\"40\"\r\n                  step=\"1\"\r\n                  className=\"form-control\"\r\n                  value={this.props.pioi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <label>Tratamiento oftalmico</label>\r\n                <textarea\r\n                  name=\"txoftalmico\"\r\n                  className=\"form-control\"\r\n                  value={this.props.txoftalmico}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class ObservacionesExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading8\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja8\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja8\"\r\n            >\r\n              Observaciones\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja8\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <textarea\r\n              name=\"observaciones\"\r\n              className=\"form-control\"\r\n              value={this.props.observaciones}\r\n              onChange={this.catchInputs}\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nexport default class messenger extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      messages: [],\r\n      message: \"\",\r\n      load: true,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getMessengers();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    //window.$(\"#boxchat\").scrollTop(window.$(\"#boxchat\").prop(\"scrollHeight\"));\r\n    if (props.pagado !== this.props.pagado) {\r\n      console.log(\"Recargando chat\");\r\n      this.getMessengers();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data } = this.props,\r\n      { messages, load, message } = this.state,\r\n      user = data.idUser;\r\n\r\n    return (\r\n      <div className=\"card direct-chat direct-chat-primary d-print-none\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title\">\r\n            <i className=\"fas fa-comments mr-1\"></i>\r\n            Chat\r\n          </h3>\r\n        </div>\r\n\r\n        {load ? (\r\n          <div className=\"card-body\">\r\n            <div className=\"card-text text-center p-4\">\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : messages.length ? (\r\n          <React.Fragment>\r\n            <div className=\"card-body\">\r\n              <div className=\"direct-chat-messages\" id=\"boxchat\">\r\n                {messages.map((message) => {\r\n                  let avatar = \"/img/avatars/avatar5.png\";\r\n\r\n                  if (message.created_user.rol === 1)\r\n                    avatar = \"/img/avatars/avatar2.png\";\r\n                  if (!message.created_user.rol)\r\n                    avatar = \"/img/avatars/avatar3.png\";\r\n                  if (message.created_user.id === 2)\r\n                    avatar = \"/img/avatars/avatar4.png\";\r\n                  return (\r\n                    <div\r\n                      className={\r\n                        message.created_user.id === user\r\n                          ? \"direct-chat-msg right\"\r\n                          : \"direct-chat-msg\"\r\n                      }\r\n                      key={message.id}\r\n                    >\r\n                      <div className=\"direct-chat-infos clearfix\">\r\n                        <span\r\n                          className={\r\n                            message.created_user.id === user\r\n                              ? \"direct-chat-name float-right\"\r\n                              : \"direct-chat-name float-left\"\r\n                          }\r\n                        >\r\n                          {message.created_user.name}\r\n                        </span>\r\n                        <span\r\n                          className={\r\n                            message.created_user.id === user\r\n                              ? \"direct-chat-timestamp float-left\"\r\n                              : \"direct-chat-timestamp float-right\"\r\n                          }\r\n                        >\r\n                          {moment(message.updated_at).format(\"lll\")}\r\n                        </span>\r\n                      </div>\r\n                      <img\r\n                        className=\"direct-chat-img\"\r\n                        src={\r\n                          message.created_user.id === 1\r\n                            ? \"/img/avatars/OrusBot.png\"\r\n                            : avatar\r\n                        }\r\n                        alt=\"message user image1\"\r\n                      />\r\n                      <div className=\"direct-chat-text\">{message.mensaje}</div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </React.Fragment>\r\n        ) : (\r\n          <div className=\"card-body\">\r\n            <div className=\"card-text text-center p-4\">\r\n              <h5>\r\n                <i className=\"fas fa-comment-slash mr-1\"></i>\r\n                No hay mensajes aun\r\n              </h5>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"card-footer\">\r\n          <div className=\"input-group\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"message\"\r\n              placeholder=\"Escriba un mensaje ...\"\r\n              className=\"form-control\"\r\n              value={message}\r\n              onChange={this.handleMessege}\r\n            />\r\n            <span className=\"input-group-append\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.sendMessenger}\r\n                disabled={message.length > 5 ? false : true}\r\n              >\r\n                Enviar\r\n              </button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleMessege = (e) => {\r\n    let { value, name } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n  sendMessenger = () => {\r\n    const { message, load, host, token } = this.state,\r\n      { table, idRow } = this.props,\r\n      url = \"http://\" + host + \"/api/messengers\",\r\n      body = {\r\n        table,\r\n        idRow,\r\n        user: \"\",\r\n        message,\r\n      };\r\n\r\n    //Mandamos señal de procesamiento\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    console.log(\"Enviando mensajes a la API\");\r\n    //Realiza la peticion de los contactos\r\n    fetch(url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(body),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenado mensajes\");\r\n          this.getMessengers();\r\n        } else {\r\n          console.error(data.message);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n  getMessengers = () => {\r\n    //Variables en localStorage\r\n    const { load, host, token } = this.state,\r\n      { table, idRow } = this.props,\r\n      url = \"http://\" + host + \"/api/messengers\",\r\n      type = \"&table=\" + table + \"&idRow=\" + idRow,\r\n      page = \"?page=1\";\r\n\r\n    //Mandamos señal de procesamiento\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    console.log(\"Solicitando mensajes de la API\");\r\n    //Realiza la peticion de los contactos\r\n    fetch(url + page + type, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenado mensajes\");\r\n          this.setState({\r\n            messages: data.data,\r\n            message: \"\",\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(data.message);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport Graduacion from \"./graduacionExam\";\r\n\r\nexport default class printExam extends Component {\r\n  render() {\r\n    const {\r\n      esferaod,\r\n      esferaoi,\r\n      cilindrod,\r\n      cilindroi,\r\n      ejeod,\r\n      ejeoi,\r\n      adiciond,\r\n      adicioni,\r\n      dpod,\r\n      dpoi,\r\n      alturaod,\r\n      alturaoi,\r\n      diagnostico,\r\n      presbicie,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"card d-none d-print-block\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h5>\r\n              Optica Madero\r\n              <br />\r\n              <small>312 312 5353</small>\r\n            </h5>\r\n          </div>\r\n          <div className=\"col-3\">{moment().format(\"LLL\")}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <label className=\"mr-2\">Diagnostico:</label>\r\n            {diagnostico}\r\n          </div>\r\n          <div className=\"col-4\">\r\n            <label className=\"mr-2\">presbicie:</label>\r\n            {presbicie ? \"SI\" : \"NO\"}\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <Graduacion\r\n              esferaod={esferaod}\r\n              esferaoi={esferaoi}\r\n              cilindrod={cilindrod}\r\n              cilindroi={cilindroi}\r\n              ejeod={ejeod}\r\n              ejeoi={ejeoi}\r\n              adiciond={adiciond}\r\n              adicioni={adicioni}\r\n              dpod={dpod}\r\n              dpoi={dpoi}\r\n              alturaod={alturaod}\r\n              alturaoi={alturaoi}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <p className=\"card-text text-center\">\r\n              Julio Cárdenas Martinez\r\n              <br />\r\n              Optometrista contactologo\r\n              <br />\r\n              UAG\r\n              <br />\r\n              CED PROF. 2413419\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport SearchContact from \"../Contacts/searchContactCard\";\r\nimport Recomendaciones from \"./recomendaciones\";\r\nimport Generales from \"./generalesExam\";\r\nimport Interrogatorios from \"./interrogatoriosExam\";\r\nimport KeraRet from \"./keraRetExam\";\r\nimport Diabetes from \"./diabetesExam\";\r\nimport Agudeza from \"./agudezaExam\";\r\nimport Diagnostico from \"./diagnosticoExam\";\r\nimport Graduacion from \"./graduacionExam\";\r\nimport Observaciones from \"./observacionesExam\";\r\nimport Chat from \"../Layouts/messenger\";\r\nimport PrintExam from \"./print_exam\";\r\n\r\nexport default class ExamAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    this.state = {\r\n      id: 0,\r\n      edad: 0,\r\n      keratometriaoi: \"\",\r\n      keratometriaod: \"\",\r\n      pantalleooi: \"\",\r\n      pantalleood: \"\",\r\n      interrogatorio: \"\",\r\n      cefalea: false,\r\n      c_frecuencia: \"\",\r\n      c_intensidad: 0,\r\n      frontal: false,\r\n      temporal: false,\r\n      occipital: false,\r\n      generality: false,\r\n      temporaoi: false,\r\n      temporaod: false,\r\n      coa: \"\",\r\n      aopp: \"\",\r\n      aopf: \"\",\r\n      avsloi: \"\",\r\n      avslod: \"\",\r\n      avcgaoi: \"\",\r\n      avcgaod: \"\",\r\n      cvoi: \"\",\r\n      cvod: \"\",\r\n      oftalmoscopia: \"\",\r\n      rsoi: \"\",\r\n      rsod: \"\",\r\n      diagnostico: \"Hemetrope\",\r\n      presbicie: true,\r\n      txoftalmico: \"\",\r\n      esferaoi: 0,\r\n      esferaod: 0,\r\n      cilindroi: 0,\r\n      cilindrod: 0,\r\n      ejeoi: 0,\r\n      ejeod: 0,\r\n      adicioni: 0,\r\n      adiciond: 0,\r\n      dpoi: 0,\r\n      dpod: 0,\r\n      avfoi: \"\",\r\n      avfod: \"\",\r\n      avf2o: \"\",\r\n      lcmarca: \"\",\r\n      lcgoi: \"\",\r\n      lcgod: \"\",\r\n      txoptico: \"\",\r\n      alturaoi: 0,\r\n      alturaod: 0,\r\n      pioi: 0,\r\n      piod: 0,\r\n      observaciones: \"\",\r\n      pc: false,\r\n      tablet: false,\r\n      movil: false,\r\n      lap: false,\r\n      lap_time: \"00:00\",\r\n      pc_time: \"00:00\",\r\n      tablet_time: \"00:00\",\r\n      movil_time: \"00:00\",\r\n      d_time: \"00:00\",\r\n      d_media: \"\",\r\n      d_test: \"\",\r\n      d_fclod: false,\r\n      d_fcloi: false,\r\n      d_fclod_time: \"00:00\",\r\n      d_fcloi_time: \"00:00\",\r\n      category_id: 0,\r\n      category_ii: 0,\r\n      item1: 0,\r\n      item2: 0,\r\n      contact_id: contact && contact.id ? contact.id : 0,\r\n      order_id: 0,\r\n      status: 0,\r\n      created_at: \"\",\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    //Variables\r\n    let id = this.props.match.params.id;\r\n    if (id) {\r\n      this.getExam(id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n        contact_id,\r\n        id,\r\n        order_id,\r\n        edad,\r\n        status,\r\n        created_at,\r\n        category_id,\r\n        category_ii,\r\n        cilindrod,\r\n        cilindroi,\r\n        esferaod,\r\n        esferaoi,\r\n      } = this.state,\r\n      { data } = this.props,\r\n      hoy = moment(Date.now()),\r\n      registro = moment(created_at),\r\n      toDay = moment(hoy).isSame(registro, \"day\");\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <form className=\"row\">\r\n          <div className=\"col-3\">\r\n            <SearchContact\r\n              contact={contact_id}\r\n              edad={edad}\r\n              status={status || id ? !toDay : true || order_id ? false : true}\r\n              getIdContact={this.getIdContact}\r\n              changePage={this.changePage}\r\n            />\r\n            {contact_id && order_id ? (\r\n              <Chat data={data} table=\"orders\" idRow={order_id} />\r\n            ) : null}\r\n          </div>\r\n          <div className=\"col\">\r\n            <PrintExam\r\n              esferaod={esferaod}\r\n              esferaoi={esferaoi}\r\n              cilindrod={cilindrod}\r\n              cilindroi={cilindroi}\r\n              ejeod={this.state.ejeod}\r\n              ejeoi={this.state.ejeoi}\r\n              adiciond={this.state.adiciond}\r\n              adicioni={this.state.adicioni}\r\n              dpod={this.state.dpod}\r\n              dpoi={this.state.dpoi}\r\n              alturaod={this.state.alturaod}\r\n              alturaoi={this.state.alturaoi}\r\n              lcmarca={this.state.lcmarca}\r\n              lcgod={this.state.lcgod}\r\n              lcgoi={this.state.lcgoi}\r\n              diagnostico={this.state.diagnostico}\r\n              presbicie={this.state.presbicie}\r\n            />\r\n            <div className=\"card card-info card-outline d-print-none\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title\">\r\n                  <i className=\"fas fa-notes-medical mr-1\"></i>\r\n                  {this.state.id ? \"Examen\" : \"Nuevo examen\"}\r\n                </h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"accordion\" id=\"accordionExample\">\r\n                  {contact_id ? (\r\n                    <React.Fragment>\r\n                      <Generales\r\n                        pc={this.state.pc}\r\n                        tablet={this.state.tablet}\r\n                        movil={this.state.movil}\r\n                        lap={this.state.lap}\r\n                        lap_time={this.state.lap_time}\r\n                        pc_time={this.state.pc_time}\r\n                        tablet_time={this.state.tablet_time}\r\n                        movil_time={this.state.movil_time}\r\n                        cefalea={this.state.cefalea}\r\n                        c_frecuencia={this.state.c_frecuencia}\r\n                        c_intensidad={this.state.c_intensidad}\r\n                        frontal={this.state.frontal}\r\n                        temporal={this.state.temporal}\r\n                        occipital={this.state.occipital}\r\n                        generality={this.state.generality}\r\n                        temporaoi={this.state.temporaoi}\r\n                        temporaod={this.state.temporaod}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Interrogatorios\r\n                        interrogatorio={this.state.interrogatorio}\r\n                        coa={this.state.coa}\r\n                        aopp={this.state.aopp}\r\n                        aopf={this.state.aopf}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <KeraRet\r\n                        keratometriaoi={this.state.keratometriaoi}\r\n                        keratometriaod={this.state.keratometriaod}\r\n                        rsoi={this.state.rsoi}\r\n                        rsod={this.state.rsod}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Diabetes\r\n                        d_time={this.state.d_time}\r\n                        d_media={this.state.d_media}\r\n                        d_test={this.state.d_test}\r\n                        d_fclod={this.state.d_fclod}\r\n                        d_fclod_time={this.state.d_fclod_time}\r\n                        d_fcloi={this.state.d_fcloi}\r\n                        d_fcloi_time={this.state.d_fcloi_time}\r\n                        oftalmoscopia={this.state.oftalmoscopia}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Agudeza\r\n                        cvod={this.state.cvod}\r\n                        cvoi={this.state.cvoi}\r\n                        avslod={this.state.avslod}\r\n                        avsloi={this.state.avsloi}\r\n                        avcgaod={this.state.avcgaod}\r\n                        avcgaoi={this.state.avcgaoi}\r\n                        avfod={this.state.avfod}\r\n                        avfoi={this.state.avfoi}\r\n                        avf2o={this.state.avf2o}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Diagnostico\r\n                        diagnostico={this.state.diagnostico}\r\n                        presbicie={this.state.presbicie}\r\n                        piod={this.state.piod}\r\n                        pioi={this.state.pioi}\r\n                        txoftalmico={this.state.txoftalmico}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"card-header d-print-none\" id=\"heading7\">\r\n                          <h2 className=\"mb-0\">\r\n                            <button\r\n                              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n                              type=\"button\"\r\n                              data-toggle=\"collapse\"\r\n                              data-target=\"#caja7\"\r\n                              aria-expanded=\"false\"\r\n                              aria-controls=\"caja7\"\r\n                            >\r\n                              Graduaci&oacute;n\r\n                            </button>\r\n                          </h2>\r\n                        </div>\r\n                        <div\r\n                          id=\"caja7\"\r\n                          className=\"collapse\"\r\n                          aria-labelledby=\"headingThree\"\r\n                          data-parent=\"#accordionExample\"\r\n                        >\r\n                          <div className=\"card-body p-1\">\r\n                            <div className=\"d-none d-print-block mb-2\">\r\n                              <div className=\"row border\">\r\n                                <div className=\"col-3\">\r\n                                  <label>Diagnostico</label>\r\n                                </div>\r\n                                <div className=\"col\">\r\n                                  <p className=\"card-text\">\r\n                                    {this.state.diagnostico}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            <Graduacion\r\n                              esferaod={esferaod}\r\n                              esferaoi={esferaoi}\r\n                              cilindrod={cilindrod}\r\n                              cilindroi={cilindroi}\r\n                              ejeod={this.state.ejeod}\r\n                              ejeoi={this.state.ejeoi}\r\n                              adiciond={this.state.adiciond}\r\n                              adicioni={this.state.adicioni}\r\n                              dpod={this.state.dpod}\r\n                              dpoi={this.state.dpoi}\r\n                              alturaod={this.state.alturaod}\r\n                              alturaoi={this.state.alturaoi}\r\n                              lcmarca={this.state.lcmarca}\r\n                              lcgod={this.state.lcgod}\r\n                              lcgoi={this.state.lcgoi}\r\n                              onChangeInput={this.handleChangeInput}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <Observaciones\r\n                        observaciones={this.state.observaciones}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"card-header d-print-none\" id=\"heading9\">\r\n                          <h2 className=\"mb-0\">\r\n                            <button\r\n                              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n                              type=\"button\"\r\n                              data-toggle=\"collapse\"\r\n                              data-target=\"#caja9\"\r\n                              aria-expanded=\"false\"\r\n                              aria-controls=\"caja9\"\r\n                            >\r\n                              Recomendaciones\r\n                            </button>\r\n                          </h2>\r\n                        </div>\r\n                        <div id=\"caja9\" className=\"collapse p-2\">\r\n                          <div className=\"row\">\r\n                            <div className=\"col\">\r\n                              <Recomendaciones\r\n                                category_id={parseInt(category_id)}\r\n                                esferaod={esferaod}\r\n                                esferaoi={esferaoi}\r\n                                cilindrod={cilindrod}\r\n                                cilindroi={cilindroi}\r\n                                nameCategory=\"category_id\"\r\n                                nameItem=\"item1\"\r\n                                title=\"Recomendacion principal\"\r\n                                data={data}\r\n                                onChangeInput={(obj) => {\r\n                                  if (typeof obj === \"object\") {\r\n                                    this.setState(obj);\r\n                                  }\r\n                                }}\r\n                                update={true}\r\n                              />\r\n                            </div>\r\n                            {category_id ? (\r\n                              <div className=\"col\">\r\n                                <Recomendaciones\r\n                                  category_id={parseInt(category_ii)}\r\n                                  esferaod={esferaod}\r\n                                  esferaoi={esferaoi}\r\n                                  cilindrod={cilindrod}\r\n                                  cilindroi={cilindroi}\r\n                                  nameCategory=\"category_ii\"\r\n                                  nameItem=\"item2\"\r\n                                  title=\"Recomendacion adicional\"\r\n                                  data={data}\r\n                                  onChangeInput={(obj) => {\r\n                                    if (typeof obj === \"object\") {\r\n                                      this.setState(obj);\r\n                                    }\r\n                                  }}\r\n                                  update={true}\r\n                                />\r\n                              </div>\r\n                            ) : null}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </React.Fragment>\r\n                  ) : (\r\n                    <div className=\"card\">\r\n                      <div className=\"card-body text-info\">\r\n                        <i className=\"fas fa-exclamation-triangle mr-2\"></i>\r\n                        <label>Elija primero un paciente</label>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"card-footer text-right\">\r\n                <div className=\"btn-group d-print-none\" role=\"group\">\r\n                  <Link\r\n                    to=\"/consultorio\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={(e) => {\r\n                      this.changePage(\"/consultorio\");\r\n                    }}\r\n                  >\r\n                    <i\r\n                      className={\r\n                        id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                      }\r\n                    ></i>\r\n                    <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                  </Link>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={this.handleStatus}\r\n                  >\r\n                    <i\r\n                      className={\r\n                        this.state.status\r\n                          ? \"fas fa-lock-open mr-1\"\r\n                          : \"fas fa-lock mr-1\"\r\n                      }\r\n                    ></i>\r\n                    <strong>\r\n                      {this.state.status ? \"Activar\" : \"Terminar\"}\r\n                    </strong>\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-dark\"\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      window.print();\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-print mr-2\"></i>\r\n                    Imprimir\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      contact_id ? \"btn btn-info\" : \"btn btn-info disabled\"\r\n                    }\r\n                    onClick={this.handleSave}\r\n                    disabled={contact_id ? \"\" : \"disabled\"}\r\n                  >\r\n                    <i className=\"fas fa-save mr-1\"></i>\r\n                    <strong>Guardar</strong>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  handleChangeInput = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleStatus = () => {\r\n    this.setState({\r\n      status: !this.state.status,\r\n    });\r\n  };\r\n  getIdContact = (id, edad) => {\r\n    this.setState({\r\n      contact_id: id,\r\n      edad,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { host, token, id } = this.state;\r\n\r\n    //Verificar si los datos son validos.\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el examen?\"\r\n        : \"¿Esta seguro de crear un nuevo examen?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          let body = this.state,\r\n            //Identificamos la URL y el metodo segun sea el caso (Actualizar o agregar)\r\n            url = id\r\n              ? \"http://\" + host + \"/api/exams/\" + id\r\n              : \"http://\" + host + \"/api/exams\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n          if (!body.category_id) delete body.category_id;\r\n          if (!body.category_ii) delete body.category_ii;\r\n\r\n          //Crear o modificar examen\r\n          console.log(\"Enviando datos del examen a la API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            signal: this.signal,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Examen almacenado\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Examen actualizado con exito\"\r\n              : \"Examen almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => this.props.history.goBack());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el examen\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getExam = (id) => {\r\n    if (id) {\r\n      //Variables\r\n      let { host, token, load } = this.state;\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      //Realiza la peticion del examen por el id\r\n      console.log(\"Descargando datos del examen\");\r\n      fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.data) {\r\n            console.log(\"Mostrando examenes\");\r\n            this.setState({\r\n              contact_id: data.data.paciente.id,\r\n              edad: data.data.edad,\r\n              id: data.data.id,\r\n              keratometriaoi: data.data.keratometriaoi,\r\n              keratometriaod: data.data.keratometriaod,\r\n              pantalleooi: data.data.pantalleooi,\r\n              pantalleood: data.data.pantalleood,\r\n              interrogatorio: data.data.interrogatorio,\r\n              cefalea: data.data.cefalea,\r\n              c_frecuencia: data.data.c_frecuencia,\r\n              c_intensidad: data.data.c_intensidad,\r\n              frontal: data.data.frontal,\r\n              temporal: data.data.temporal,\r\n              occipital: data.data.occipital,\r\n              generality: data.data.generality,\r\n              temporaoi: data.data.temporaoi,\r\n              temporaod: data.data.temporaod,\r\n              coa: data.data.coa,\r\n              aopp: data.data.aopp,\r\n              aopf: data.data.aopf,\r\n              avsloi: data.data.avsloi,\r\n              avslod: data.data.avslod,\r\n              avcgaoi: data.data.avcgaoi,\r\n              avcgaod: data.data.avcgaod,\r\n              cvoi: data.data.cvoi,\r\n              cvod: data.data.cvod,\r\n              oftalmoscopia: data.data.oftalmoscopia,\r\n              rsoi: data.data.rsoi,\r\n              rsod: data.data.rsod,\r\n              diagnostico: data.data.diagnostico,\r\n              presbicie: data.data.presbicie,\r\n              txoftalmico: data.data.txoftalmico,\r\n              esferaoi: data.data.esferaoi,\r\n              esferaod: data.data.esferaod,\r\n              cilindroi: data.data.cilindroi,\r\n              cilindrod: data.data.cilindrod,\r\n              ejeoi: data.data.ejeoi,\r\n              ejeod: data.data.ejeod,\r\n              adicioni: data.data.adicioni,\r\n              adiciond: data.data.adiciond,\r\n              dpoi: data.data.dpoi,\r\n              dpod: data.data.dpod,\r\n              avfoi: data.data.avfoi,\r\n              avfod: data.data.avfod,\r\n              avf2o: data.data.avf2o,\r\n              lcmarca: data.data.lcmarca,\r\n              lcgoi: data.data.lcgoi,\r\n              lcgod: data.data.lcgod,\r\n              txoptico: data.data.txoptico,\r\n              alturaoi: data.data.alturaoi,\r\n              alturaod: data.data.alturaod,\r\n              pioi: data.data.pioi,\r\n              piod: data.data.piod,\r\n              observaciones: data.data.observaciones,\r\n              pc: data.data.pc,\r\n              tablet: data.data.tablet,\r\n              movil: data.data.movil,\r\n              lap: data.data.lap,\r\n              lap_time: data.data.lap_time,\r\n              pc_time: data.data.pc_time,\r\n              tablet_time: data.data.tablet_time,\r\n              movil_time: data.data.movil_time,\r\n              d_time: data.data.d_time,\r\n              d_media: data.data.d_media,\r\n              d_test: data.data.d_test,\r\n              d_fclod: data.data.d_fclod,\r\n              d_fcloi: data.data.d_fcloi,\r\n              d_fclod_time: data.data.d_fclod_time,\r\n              d_fcloi_time: data.data.d_fcloi_time,\r\n              category_id: data.data.category_id ? data.data.category_id : 0,\r\n              category_ii: data.data.category_ii ? data.data.category_ii : 0,\r\n              item1: data.data.item1,\r\n              item2: data.data.item2,\r\n              order_id: data.data.order_id ? data.data.order_id : 0,\r\n              status: data.data.estado,\r\n              created_at: data.data.created_at,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\"Error\", \"Al descargar el examen\", \"error\");\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, status } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: paciente o # de orden\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Estado</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"status\"\r\n                    value={status}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">En proceso</option>\r\n                    <option value=\"1\">Laboratorio</option>\r\n                    <option value=\"2\">Bicelación</option>\r\n                    <option value=\"3\">Terminado</option>\r\n                    <option value=\"4\">Garantia</option>\r\n                    <option value=\"5\">Baja</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"status\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Contacts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusOrder\"));\r\n    this.state = {\r\n      pedidos: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"desc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      status: sdd ? sdd.status : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getPedidos();\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n    localStorage.setItem(\r\n      \"OrusOrder\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        status: this.state.status,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando pedidos\");\r\n      this.getPedidos();\r\n      localStorage.setItem(\r\n        \"OrusOrder\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          status: this.state.status,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { pedidos, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Folio\", type: \"id\", filter: true },\r\n        { name: \"Caja\" },\r\n        { name: \"Paciente\", type: \"contact_id\", filter: true },\r\n        { name: \"Detalles\" },\r\n        { name: \"Estado\" },\r\n        { name: \"Nota\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-warning card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-warning\">\r\n            <i className=\"fas fa-clipboard-list mr-1\"></i>\r\n            Listado de pedidos\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/pedidos/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={(e) => {\r\n                this.changePage(\"/pedidos/registro\");\r\n              }}\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={this.state.search}\r\n              status={this.state.status}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={pedidos.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(pedidos.data).length ? (\r\n                pedidos.data.map((pedido) => {\r\n                  return (\r\n                    <tr key={pedido.id}>\r\n                      <td>\r\n                        <span className=\"badge badge-warning text-capitalize\">\r\n                          {pedido.id}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {pedido.estado === 2 ? (\r\n                          <span>\r\n                            {pedido.caja ? pedido.caja : \"Sin asignar\"}\r\n                          </span>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        <Link to={\"/pedidos/registro/\" + pedido.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {pedido.paciente.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {pedido.estado === 1 ? (\r\n                          <div>\r\n                            <span className=\"text-danger mr-1\">\r\n                              {pedido.laboratorio\r\n                                ? pedido.laboratorio.nombre\r\n                                : \"Sin asignar\"}\r\n                            </span>\r\n                            {pedido.laboratorio ? \"/ \" + pedido.folio_lab : \"\"}\r\n                          </div>\r\n                        ) : pedido.estado === 2 ? (\r\n                          <small>\r\n                            {pedido.observaciones\r\n                              ? pedido.observaciones\r\n                              : \"sin observaciones\"}\r\n                          </small>\r\n                        ) : !pedido.estado ? (\r\n                          <small>\r\n                            {pedido.examen\r\n                              ? pedido.examen.estado === \"Terminado\"\r\n                                ? \"Examen completado\"\r\n                                : \"Examen no realizado\"\r\n                              : \"Examen no asignado\"}\r\n                          </small>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td>{this.setStatusString(pedido.estado)}</td>\r\n                      <td className=\"text-right\">\r\n                        {pedido.nota ? (\r\n                          <Link to={\"/notas/registro/\" + pedido.nota.id}>\r\n                            <span className=\"badge badge-success\">\r\n                              {pedido.nota.id}\r\n                            </span>\r\n                          </Link>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td>{moment(pedido.updated_at).fromNow()}</td>\r\n                      <td>{moment(pedido.created_at).format(\"ll\")}</td>\r\n                      <Actions\r\n                        id={pedido.id}\r\n                        item={pedido.paciente.nombre}\r\n                        delete={\r\n                          !pedido.estado && !pedido.nota\r\n                            ? this.handleDelete\r\n                            : null\r\n                        }\r\n                        edit={\"/pedidos/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/pedidos/registro\"\r\n            className=\"btn btn-outline-warning\"\r\n            onClick={(e) => {\r\n              this.changePage(\"/pedidos/registro\");\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            <strong>Nuevo pedido</strong>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  setStatusString = (status) => {\r\n    switch (status) {\r\n      case 0:\r\n        return <span className=\"text-warning text-uppercase\">En proceso</span>;\r\n      case 1:\r\n        return <span className=\"text-info text-uppercase\">En laboratorio</span>;\r\n      case 2:\r\n        return <span className=\"text-primary text-uppercase\">Bicelación</span>;\r\n      case 3:\r\n        return <span className=\"text-success text-uppercase\">Terminado</span>;\r\n      case 4:\r\n        return <span className=\"text-info text-uppercase\">Garantia</span>;\r\n      default:\r\n        return <span className=\"text-secondary text-uppercase\">Baja</span>;\r\n    }\r\n  };\r\n  handleFilter = () => {\r\n    this.setState({\r\n      load: true,\r\n      page: 1,\r\n    });\r\n  };\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (id) => {\r\n    this.props.page(id);\r\n  };\r\n  handleDelete = (id, name) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el pedido de \" + name.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de order por API\");\r\n          return fetch(\"http://\" + host + \"/api/orders/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Pedido eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Pedido eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getPedidos());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getPedidos() {\r\n    //Variables en localStorage\r\n    let {\r\n        search,\r\n        status,\r\n        page,\r\n        order,\r\n        orderby,\r\n        host,\r\n        token,\r\n        load,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/orders\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      estado = status ? \"&status=\" + status : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de los contactos\r\n    console.log(\"Descargando ventas de API\");\r\n    fetch(url + pagina + ordenar + buscar + estado, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Mostrando lista de pedidos\");\r\n          this.setState({\r\n            pedidos: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar pedidos\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Items extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      store_items_id: 0,\r\n      session: \"\",\r\n      cantidad: 1,\r\n      precio: 0,\r\n      subtotal: 0,\r\n      inStorage: 0,\r\n      producto: \"\",\r\n      out: 0,\r\n      descripcion: \"\",\r\n      itemNew: false,\r\n      itemsDb: [],\r\n      load: false,\r\n    };\r\n    this.total = 0;\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      session: this.props.session,\r\n    });\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (this.state.itemNew && this.state.producto.length === 0) {\r\n      this.inputItem.focus();\r\n    }\r\n    /*\r\n    if (this.state.itemNew && this.state.cant === 1 && this.state.id) {\r\n      this.inputCant.focus();\r\n    }\r\n    */\r\n  }\r\n\r\n  render() {\r\n    let { itemNew, itemsDb, load } = this.state;\r\n    let { items } = this.props;\r\n    this.total = 0;\r\n\r\n    return (\r\n      <table className=\"table table-sm table-striped  mt-2\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\" style={{ width: 64 }}>\r\n              Cantidad\r\n            </th>\r\n            <th scope=\"col\">Descripcion</th>\r\n            <th scope=\"col\" className=\"text-center\" style={{ width: 120 }}>\r\n              Precio\r\n            </th>\r\n            <th scope=\"col\" className=\"text-center\" style={{ width: 120 }}>\r\n              Subtotal\r\n            </th>\r\n            <th scope=\"col\" style={{ width: 60 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {itemNew ? (\r\n            <React.Fragment>\r\n              <tr>\r\n                <td>\r\n                  <input\r\n                    className={\r\n                      this.state.store_items_id\r\n                        ? \"form-control\"\r\n                        : \"form-control disabled\"\r\n                    }\r\n                    disabled={this.state.store_items_id ? false : true}\r\n                    type=\"number\"\r\n                    name=\"cantidad\"\r\n                    ref={(input) => {\r\n                      this.inputCant = input;\r\n                    }}\r\n                    value={this.state.cantidad}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    className={\r\n                      !this.state.store_items_id\r\n                        ? \"form-control\"\r\n                        : \"form-control disabled\"\r\n                    }\r\n                    disabled={!this.state.store_items_id ? false : true}\r\n                    type=\"text\"\r\n                    name=\"producto\"\r\n                    autoComplete=\"off\"\r\n                    ref={(input) => {\r\n                      this.inputItem = input;\r\n                    }}\r\n                    value={this.state.producto}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  {this.state.store_items_id ? (\r\n                    <input\r\n                      className=\"form-control\"\r\n                      type=\"text\"\r\n                      name=\"descripcion\"\r\n                      placeholder=\"Detalles\"\r\n                      value={this.state.descripcion}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  ) : null}\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    className={\r\n                      this.state.store_items_id\r\n                        ? \"form-control\"\r\n                        : \"form-control disabled\"\r\n                    }\r\n                    disabled={this.state.store_items_id ? false : true}\r\n                    type=\"number\"\r\n                    name=\"precio\"\r\n                    value={this.state.precio}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    className=\"form-control disabled\"\r\n                    type=\"number\"\r\n                    name=\"subtotal\"\r\n                    value={this.state.subtotal}\r\n                    readOnly={true}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    className=\"btn btn-outline-dark btn-sm\"\r\n                    onClick={this.addItem}\r\n                  >\r\n                    <i className=\"fas fa-plus\"></i>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"5\">\r\n                    <div className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : itemsDb && itemsDb.length ? (\r\n                <tr>\r\n                  <td colSpan=\"5\">\r\n                    <div className=\"list-group\">\r\n                      {itemsDb.map((db) => {\r\n                        return (\r\n                          <a\r\n                            className=\"list-group-item list-group-item-action\"\r\n                            href={\"#\" + db.codigo}\r\n                            key={db.id}\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              this.handelClickItemDb(\r\n                                db.id,\r\n                                db.producto,\r\n                                db.precio,\r\n                                db.cantidades\r\n                              );\r\n                            }}\r\n                          >\r\n                            <div\r\n                              className=\"text-truncate\"\r\n                              style={{ maxWidth: \"90%\" }}\r\n                            >\r\n                              <span className=\"text-primary mr-2 text-uppercase\">\r\n                                ({db.codigo})\r\n                              </span>\r\n                              <label className=\"text-dark text-capitalize ml-2 mr-2\">\r\n                                {db.producto}\r\n                              </label>\r\n                              {db.marca ? (\r\n                                <span className=\"text-muted text-capitalize\">\r\n                                  / {db.marca.marca}\r\n                                </span>\r\n                              ) : null}\r\n                              {db.proveedor ? (\r\n                                <span className=\"text-muted text-capitaliz\">\r\n                                  / {db.proveedor.nombre}\r\n                                </span>\r\n                              ) : null}\r\n                            </div>\r\n                          </a>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : null}\r\n            </React.Fragment>\r\n          ) : null}\r\n          {items.length ? (\r\n            items.map((item, index) => {\r\n              this.total += item.subtotal * 1;\r\n              return (\r\n                <tr key={index}>\r\n                  <td className=\"text-right\">{item.cantidad}</td>\r\n                  <td>\r\n                    <span\r\n                      className={\r\n                        !item.inStorage\r\n                          ? \"badge badge-warning\"\r\n                          : \"badge badge-primary\"\r\n                      }\r\n                    >\r\n                      {item.producto}\r\n                      {item.descripcion ? \" (\" + item.descripcion + \")\" : null}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"text-right\">$ {item.precio.toFixed(2)}</td>\r\n                  <td className=\"text-right\">$ {item.subtotal.toFixed(2)}</td>\r\n                  <td className=\"d-print-none\">\r\n                    <button\r\n                      className={\r\n                        this.props.status\r\n                          ? \"btn btn-outline-light btn-sm disabled\"\r\n                          : \"btn btn-outline-light btn-sm\"\r\n                      }\r\n                      disabled={this.props.status ? true : false}\r\n                      onClick={(e) => {\r\n                        if (!this.props.status) this.deleteItem(index);\r\n                      }}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })\r\n          ) : (\r\n            <tr>\r\n              <td className=\"text-center\" colSpan=\"5\">\r\n                No hay articulos cargados\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n        <tfoot>\r\n          <tr>\r\n            <td className=\"text-right\" colSpan=\"2\">\r\n              {!this.props.status && !this.props.addCancel ? (\r\n                <button\r\n                  className={\r\n                    this.props.status\r\n                      ? \"btn btn-outline-success btn-sm disabled\"\r\n                      : \"btn btn-outline-success btn-sm\"\r\n                  }\r\n                  disabled={this.props.status ? true : false}\r\n                  onClick={this.handleNewItem}\r\n                >\r\n                  <i\r\n                    className={itemNew ? \"fas fa-times-circle\" : \"fas fa-plus\"}\r\n                  ></i>\r\n                </button>\r\n              ) : null}\r\n            </td>\r\n            <th scope=\"row\" className=\"text-right\">\r\n              Subtotal\r\n            </th>\r\n            <td className=\"text-right\">$ {this.total.toFixed(2)}</td>\r\n            <td></td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    );\r\n  }\r\n\r\n  handelClickItemDb = (id, producto, precio, cant) => {\r\n    if (id) {\r\n      this.setState({\r\n        id: 0,\r\n        store_items_id: id,\r\n        producto,\r\n        precio,\r\n        subtotal: this.state.cantidad * precio,\r\n        //Verificando que exitan los productos en almacen\r\n        inStorage: cant >= this.state.cantidad ? 1 : 0,\r\n        out: cant,\r\n        itemsDb: [],\r\n      });\r\n    }\r\n  };\r\n  deleteItem = (id) => {\r\n    let { items } = this.props;\r\n    items.splice(id, 1);\r\n    this.props.ChangeInput(\"items\", items);\r\n  };\r\n  catchInputs = (e) => {\r\n    let { name, value, type } = e.target,\r\n      subtotal = 0;\r\n    if (name === \"cantidad\") {\r\n      value = value * 1;\r\n      subtotal = this.state.precio * value;\r\n    } else if (name === \"precio\") {\r\n      value = value * 1;\r\n      subtotal = this.state.cantidad * value;\r\n    } else if (name === \"descripcion\") {\r\n      subtotal = this.state.subtotal;\r\n    }\r\n    if (type === \"number\") {\r\n      value = value * 1;\r\n    }\r\n    if (name === \"producto\" && value.length > 3 && !this.state.store_items_id) {\r\n      let { load } = this.state;\r\n\r\n      //Revisamos que ya este cargando\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      if (this.timeSave) clearTimeout(this.timeSave);\r\n      this.timeSave = setTimeout(() => {\r\n        //Variables en localStorage\r\n        const varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n          url = \"http://\" + varLocalStorage.host + \"/api/store\",\r\n          search = \"?search=\" + value.replace(\"+\", \"%2b\"),\r\n          itemsPage = \"&itemsPage=6\";\r\n        //Realiza la peticion del usuario seun el id\r\n        console.log(\"Descargando datos del item\");\r\n        fetch(url + search + itemsPage, {\r\n          method: \"GET\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            Authorization: \"Bearer \" + varLocalStorage.token,\r\n          },\r\n        })\r\n          .then((response) => {\r\n            if (!response.ok) {\r\n              throw new Error(response.statusText);\r\n            }\r\n            return response.json();\r\n          })\r\n          .then((data) => {\r\n            if (data.data && data.data.length) {\r\n              console.log(\"Almacenando datos del item del DB\");\r\n              this.setState({\r\n                itemsDb: data.data,\r\n              });\r\n            } else if (data.message) {\r\n              console.log(\r\n                \"No hay articulos en la buscada de items\",\r\n                data.message\r\n              );\r\n            }\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          })\r\n          .catch((e) => {\r\n            console.error(e);\r\n            window.Swal.fire(\r\n              \"Fallo de conexion\",\r\n              \"Verifique la conexion al servidor\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          });\r\n      }, 1500);\r\n    }\r\n\r\n    this.setState({\r\n      [name]: value,\r\n      subtotal,\r\n    });\r\n  };\r\n  addItem = (e) => {\r\n    e.preventDefault();\r\n    let items = this.props.items,\r\n      item = this.state;\r\n\r\n    item.inStorage = item.out >= item.cantidad ? 1 : 0;\r\n    item.out = item.out >= item.cantidad ? 0 : item.cantidad - item.out;\r\n\r\n    delete item.itemNew;\r\n    delete item.itemsDb;\r\n    delete item.items;\r\n    items.push(item);\r\n\r\n    this.setState({\r\n      id: 0,\r\n      store_items_id: 0,\r\n      cantidad: 1,\r\n      producto: \"\",\r\n      precio: 0,\r\n      total: 0,\r\n      inStorage: 0,\r\n      out: 0,\r\n      itemNew: false,\r\n    });\r\n    this.props.ChangeInput(\"items\", items);\r\n  };\r\n  handleNewItem = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      itemNew: !this.state.itemNew,\r\n      store_items_id: 0,\r\n      cantidad: 1,\r\n      producto: \"\",\r\n      precio: 0,\r\n      subtotal: 0,\r\n      inStorage: 0,\r\n      out: 0,\r\n      itemsDb: [],\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class labOrder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      supplies: [],\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getContacts();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label>Laboratorio</label>\r\n            <select\r\n              className={\r\n                this.props.status > 1 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 1 ? true : false}\r\n              name=\"lab_id\"\r\n              value={this.props.lab_id}\r\n              onChange={this.changeInput}\r\n            >\r\n              <option value=\"0\">Seleccione un proveedor</option>\r\n              {this.state.supplies.length\r\n                ? this.state.supplies.map((s) => {\r\n                    return (\r\n                      <option key={s.id} value={s.id}>\r\n                        {s.nombre}\r\n                      </option>\r\n                    );\r\n                  })\r\n                : \"\"}\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label>Folio</label>\r\n            <input\r\n              type=\"text\"\r\n              className={\r\n                this.props.status > 1 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 1 ? true : false}\r\n              name=\"npedidolab\"\r\n              value={this.props.npedidolab}\r\n              onChange={this.changeInput}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n  getContacts = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n      type = \"&type=1&business=1\",\r\n      //search = word ? `&search=${word}` : \"\",\r\n      page = \"?page=1\";\r\n    console.log(\"Descargando proveedores de la API\");\r\n    //Realiza la peticion de los contactos\r\n    fetch(url + page + type, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenado proveedores\");\r\n          this.setState({\r\n            supplies: data.data,\r\n          });\r\n        }\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class statusOrder extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label htmlFor=\"lab\">Estado</label>\r\n            <select\r\n              className=\"form-control\"\r\n              name=\"status\"\r\n              value={this.props.status}\r\n              onChange={this.changeInput}\r\n            >\r\n              <option value=\"0\">En proceso</option>\r\n              <option value=\"1\">Laboratorio</option>\r\n              <option value=\"2\">Bicelación</option>\r\n              <option value=\"3\">Terminado</option>\r\n              <option value=\"4\">Garantia</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    value = value * 1;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class bicelacionOrder extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label htmlFor=\"lab\">Caja</label>\r\n            <input\r\n              type=\"text\"\r\n              className={\r\n                this.props.status > 2 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 2 ? true : false}\r\n              name=\"ncaja\"\r\n              value={this.props.ncaja ? this.props.ncaja : \"\"}\r\n              onChange={this.changeInput}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label>Observaciones</label>\r\n            <textarea\r\n              name=\"observaciones\"\r\n              className={\r\n                this.props.status > 2 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 2 ? true : false}\r\n              value={this.props.observaciones ? this.props.observaciones : \"\"}\r\n              onChange={this.changeInput}\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    if (name === \"caja\") value = value * 1;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class garantiaOrder extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label htmlFor=\"lab\">Garantia</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    value = value * 1;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport SearchContact from \"../Contacts/searchContactCard\";\r\nimport Items from \"./itemsOrder\";\r\nimport ListExam from \"../Exam/listsExams\";\r\nimport LabOrder from \"./labOrder\";\r\nimport Status from \"./statusOrder\";\r\nimport Bicelacion from \"./bicelacionOrder\";\r\nimport Garantia from \"./garantiaOrder\";\r\nimport Chat from \"../Layouts/messenger\";\r\n\r\nexport default class OrderAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Recogemos valores de registro previo\r\n    let contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    console.log(\"Contacto en uso: \", contact.exam_id ? \"Si\" : \"No\");\r\n    this.state = {\r\n      id: 0,\r\n      session:\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(10),\r\n      observaciones: \"\",\r\n      lab_id: 0,\r\n      npedidolab: \"\",\r\n      ncaja: 0,\r\n      items: [],\r\n      contact_id: contact && contact.id ? contact.id : 0,\r\n      usuario: \"\",\r\n      edad: 0,\r\n      exam_id: contact && contact.exam_id ? contact.exam_id : 0,\r\n      exam: {},\r\n      status: 0,\r\n      date: Date.now(),\r\n      load: true,\r\n      nota: 0,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    const id = this.props.match.params.id,\r\n      { exam_id, exam } = this.state;\r\n\r\n    if (id) {\r\n      this.getOrder(id);\r\n    } else {\r\n      if (exam_id && !exam.id) {\r\n        this.getExamById(exam_id);\r\n      }\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n    //localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n  }\r\n  getExamById = (id) => {\r\n    //host y token\r\n    const { host, token } = this.state;\r\n    //Realiza la peticion del examen por el id\r\n    console.log(\"Descargando examen\");\r\n    fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenando examenes\");\r\n          this.setState({\r\n            exam: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar el examen\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n        contact_id,\r\n        id,\r\n        load,\r\n        items,\r\n        nota,\r\n        status,\r\n        edad,\r\n        exam_id,\r\n        exam,\r\n      } = this.state,\r\n      { data } = this.props;\r\n    let showTabActive = true;\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-3\">\r\n          <SearchContact\r\n            contact={contact_id}\r\n            edad={this.state.edad}\r\n            status={nota ? true : status}\r\n            getIdContact={this.getIdContact}\r\n            changePage={this.changePage}\r\n          />\r\n          {contact_id ? (\r\n            <div className=\"card card-warning card-outline d-print-none mt-4\">\r\n              <div className=\"card-body\">\r\n                <Status status={status} ChangeInput={this.handleChangeInput} />\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"card card-warning card-outline\">\r\n            <div className=\"card-body\">\r\n              {contact_id && !load ? (\r\n                <React.Fragment>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-2\">\r\n                      <div className=\"border border-warning rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-warning mx-2\">\r\n                          Pedido\r\n                        </span>\r\n                        <strong className=\"text-primary\">\r\n                          {this.state.id ? this.state.id : \"Nuevo\"}\r\n                        </strong>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                      <div className=\"border border-warning rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-warning mx-2\">\r\n                          Creador\r\n                        </span>\r\n                        <strong>\r\n                          {this.state.usuario\r\n                            ? this.state.usuario\r\n                            : this.props.data.name}\r\n                        </strong>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-2\">\r\n                      <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-success mx-2\">\r\n                          Venta\r\n                        </span>\r\n                        <strong>\r\n                          {this.state.nota ? (\r\n                            <Link\r\n                              to={\"/notas/registro/\" + this.state.nota}\r\n                              className=\"text-dark\"\r\n                              onClick={(e) => {\r\n                                this.changePage(\"/notas/registro\");\r\n                              }}\r\n                            >\r\n                              {this.state.nota}\r\n                            </Link>\r\n                          ) : (\r\n                            \"--\"\r\n                          )}\r\n                        </strong>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                      <div className=\"border border-warning rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-warning mx-2\">\r\n                          Fecha\r\n                        </span>\r\n                        <strong>{moment(this.state.date).format(\"ll\")}</strong>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <ul className=\"nav nav-tabs mt-4\" id=\"myTab\" role=\"tablist\">\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          (!status || status === 3) && showTabActive\r\n                            ? \"nav-link active\"\r\n                            : \"nav-link\"\r\n                        }\r\n                        href=\"#pedido\"\r\n                        data-toggle=\"tab\"\r\n                      >\r\n                        Nota\r\n                      </a>\r\n                      {(showTabActive = !status || status === 3 ? false : true)}\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a className=\"nav-link\" data-toggle=\"tab\" href=\"#exam\">\r\n                        Examen\r\n                      </a>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          status === 1 && showTabActive\r\n                            ? \"nav-link active\"\r\n                            : !status\r\n                            ? \"nav-link disabled\"\r\n                            : \"nav-link\"\r\n                        }\r\n                        data-toggle=\"tab\"\r\n                        href=\"#lab\"\r\n                      >\r\n                        Laboratorio\r\n                      </a>\r\n                      {(showTabActive = status === 1 ? false : true)}\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          status === 2\r\n                            ? \"nav-link active\"\r\n                            : !status || status === 1\r\n                            ? \"nav-link disabled\"\r\n                            : \"nav-link\"\r\n                        }\r\n                        data-toggle=\"tab\"\r\n                        href=\"#bicelacion\"\r\n                      >\r\n                        Bicelación\r\n                      </a>\r\n                      {(showTabActive = status === 2 ? false : true)}\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          status === 4 ? \"nav-link active\" : \"nav-link disabled\"\r\n                        }\r\n                        data-toggle=\"tab\"\r\n                        href=\"#garantia\"\r\n                      >\r\n                        Garantia\r\n                      </a>\r\n                      {(showTabActive = status === 4 ? false : true)}\r\n                    </li>\r\n                  </ul>\r\n                  <div className=\"tab-content\" id=\"myTabContent\">\r\n                    <div\r\n                      className={\r\n                        !status || status === 3\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"pedido\"\r\n                    >\r\n                      <Items\r\n                        items={this.state.items}\r\n                        status={status}\r\n                        session={this.state.session}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div className=\"tab-pane fade pt-4\" id=\"exam\">\r\n                      <ListExam\r\n                        paciente={contact_id}\r\n                        edad={edad}\r\n                        exam={\r\n                          exam_id && exam.id && exam_id === exam.id ? exam : {}\r\n                        }\r\n                        page={this.changePage}\r\n                        datos={data}\r\n                        select={true}\r\n                        status={this.state.status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className={\r\n                        status === 1\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"lab\"\r\n                    >\r\n                      <LabOrder\r\n                        lab_id={this.state.lab_id ? this.state.lab_id : 0}\r\n                        npedidolab={\r\n                          this.state.npedidolab ? this.state.npedidolab : \"\"\r\n                        }\r\n                        status={status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className={\r\n                        status === 2\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"bicelacion\"\r\n                    >\r\n                      <Bicelacion\r\n                        ncaja={this.state.ncaja}\r\n                        observaciones={this.state.observaciones}\r\n                        status={this.state.status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className={\r\n                        status === 4\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"garantia\"\r\n                    >\r\n                      <Garantia\r\n                        status={status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </React.Fragment>\r\n              ) : this.state.load ? (\r\n                <div className=\"text-center\">\r\n                  <div className=\"spinner-border text-primary\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"alert alert-light\">\r\n                  <h4 className=\"alert-heading\">Nuevo pedido</h4>\r\n                  <p>\r\n                    <i className=\"fas fa-user mr-1\"></i> Primero seleccione al\r\n                    paciente!\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"card-footer d-print-none text-right\">\r\n              <div className=\"btn-group\" role=\"group\">\r\n                <Link\r\n                  to=\"/pedidos\"\r\n                  className=\"btn btn-dark\"\r\n                  onClick={(e) => {\r\n                    this.changePage(\"/pedidos\");\r\n                  }}\r\n                >\r\n                  <i\r\n                    className={\r\n                      id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                    }\r\n                  ></i>\r\n                  <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                </Link>\r\n                <button\r\n                  className=\"btn btn-dark\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    window.print();\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-print mr-2\"></i>\r\n                  Imprimir\r\n                </button>\r\n                <button\r\n                  className={\r\n                    contact_id && items.length\r\n                      ? \"btn btn-warning\"\r\n                      : \"btn btn-warning disabled\"\r\n                  }\r\n                  onClick={this.handleSave}\r\n                  disabled={contact_id && items.length ? false : true}\r\n                >\r\n                  <i className=\"fas fa-save mr-1\"></i>\r\n                  <strong>Guardar</strong>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {contact_id && id ? (\r\n          <div className=\"col-3 d-print-none\">\r\n            <Chat data={data} table=\"orders\" idRow={id} />\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangeInput = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  getIdContact = (contact_id, edad) => {\r\n    this.setState({\r\n      contact_id,\r\n      edad,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { id } = this.state;\r\n\r\n    //Verificamos campos validos\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el pedido?\"\r\n        : \"¿Esta seguro de crear un nuevo pedido?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { host, token } = this.state,\r\n            url = id\r\n              ? \"http://\" + host + \"/api/orders/\" + id\r\n              : \"http://\" + host + \"/api/orders\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n          let body = {},\r\n            items = [];\r\n\r\n          this.state.items.map((item) => {\r\n            items.push({\r\n              cant: item.cantidad,\r\n              price: item.precio,\r\n              subtotal: item.subtotal,\r\n              inStorage: item.inStorage,\r\n              session: item.session,\r\n              out: item.out,\r\n              descripcion: item.descripcion,\r\n              store_items_id: item.store_items_id,\r\n            });\r\n            return false;\r\n          });\r\n          body = {\r\n            session: this.state.session,\r\n            observaciones: this.state.observaciones,\r\n            npedidolab: this.state.npedidolab,\r\n            ncaja: this.state.ncaja,\r\n            contact_id: this.state.contact_id,\r\n            status: this.state.status,\r\n            items: JSON.stringify(items),\r\n          };\r\n          if (this.state.exam_id) body.exam_id = this.state.exam_id;\r\n          if (this.state.lab_id) body.lab_id = this.state.lab_id;\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Pedido almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Pedido actualizado con exito\"\r\n              : \"Pedido almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.setState({\r\n              id: data.data.id,\r\n              nota: data.data.nota.id,\r\n            });\r\n            this.props.history.push(`/pedidos/registro/${data.data.id}`);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el pedido\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getOrder = (id) => {\r\n    if (id > 0) {\r\n      //Variables en state\r\n      let { host, token } = this.state;\r\n      //Realiza la peticion del pedido\r\n      console.log(\"Solicitando datos de pedido a la API\");\r\n      fetch(\"http://\" + host + \"/api/orders/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            console.log(\"Mostrando datos del pedido\");\r\n            this.setState({\r\n              id,\r\n              session: data.data.session,\r\n              observaciones: data.data.observaciones,\r\n              lab_id: data.data.laboratorio ? data.data.laboratorio.id : 0,\r\n              npedidolab: data.data.folio_lab,\r\n              ncaja: data.data.caja,\r\n              items: data.data.productos,\r\n              contact_id: data.data.paciente.id,\r\n              status: data.data.estado,\r\n              usuario: data.data.created,\r\n              exam_id: data.data.examen !== null ? data.data.examen.id : 0,\r\n              exam: data.data.examen !== null ? data.data.examen : {},\r\n              date: data.data.created_at,\r\n              nota: data.data.nota ? data.data.nota.id : 0,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\r\n              \"Error\",\r\n              \"Error al descargar los pedidos\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, type, date } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: paciente o # de venta\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Estado</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"type\"\r\n                    value={type}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Adeudos</option>\r\n                    <option value=\"1\">Pagados</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Fecha</label>\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"date\"\r\n                    name=\"date\"\r\n                    className=\"form-control\"\r\n                    value={date}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search || type\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"type\", \"\");\r\n    this.props.changeFilters(\"date\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Contacts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusSales\"));\r\n    this.state = {\r\n      pedidos: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"desc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      type: sdd ? sdd.type : \"\",\r\n      date: sdd ? sdd.date : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getPedidos();\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n    localStorage.setItem(\r\n      \"OrusSales\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        type: this.state.type,\r\n        date: this.state.date,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando pedidos\");\r\n      this.getPedidos();\r\n      localStorage.setItem(\r\n        \"OrusSales\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          type: this.state.type,\r\n          date: this.state.date,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { pedidos, load, search, type, date } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Folio\", type: \"id\", filter: true },\r\n        { name: \"Cliente\" },\r\n        { name: \"Sub-total\" },\r\n        { name: \"Descuento\" },\r\n        { name: \"Total\", type: \"total\", filter: true },\r\n        { name: \"Abonos\" },\r\n        { name: \"Por pagar\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-success\">\r\n            <i className=\"fas fa-cash-register mr-1\"></i>\r\n            Listado de notas\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/notas/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={(e) => {\r\n                this.changePage(\"/notas/registro\");\r\n              }}\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={search}\r\n              type={type}\r\n              date={date}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={pedidos.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center p-4\">\r\n                    <div\r\n                      className=\"spinner-border text-primary mr-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                    <span className=\"font-weight-light font-italic\">\r\n                      Espere cargando datos de la venta\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(pedidos.data).length ? (\r\n                pedidos.data.map((pedido) => {\r\n                  return (\r\n                    <tr key={pedido.id}>\r\n                      <td>\r\n                        <span className=\"badge badge-success text-capitalize\">\r\n                          {pedido.id}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        <Link to={\"/notas/registro/\" + pedido.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {pedido.cliente.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {pedido.subtotal.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {pedido.descuento.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {pedido.total.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {pedido.pagado.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        {pedido.total - pedido.pagado <= 0 ? (\r\n                          <label className=\"text-success\">\r\n                            <i className=\"fas fa-check\"></i>\r\n                          </label>\r\n                        ) : (\r\n                          \"$ \" + (pedido.total - pedido.pagado).toFixed(2)\r\n                        )}\r\n                      </td>\r\n                      <td>{moment(pedido.updated_at).fromNow()}</td>\r\n                      <td>{moment(pedido.created_at).format(\"ll\")}</td>\r\n                      <Actions\r\n                        id={pedido.id}\r\n                        item={pedido.cliente.nombre}\r\n                        delete={pedido.pagado ? null : this.handleDelete}\r\n                        edit={\"/notas/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/notas/registro\"\r\n            className=\"btn btn-outline-success\"\r\n            onClick={(e) => {\r\n              this.changePage(\"/notas/registro\");\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            <strong>Nueva nota</strong>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleFilter = () => {\r\n    this.setState({\r\n      load: true,\r\n      page: 1,\r\n    });\r\n  };\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (id) => {\r\n    this.props.page(id);\r\n  };\r\n  handleDelete = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar la venta de \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de venta por API\");\r\n          return fetch(\"http://\" + host + \"/api/sales/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Venta eliminada\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Venta eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getPedidos());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getPedidos = () => {\r\n    //Variables en localStorage\r\n    let {\r\n        host,\r\n        token,\r\n        order,\r\n        orderby,\r\n        search,\r\n        page,\r\n        type,\r\n        date,\r\n        load,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/sales\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\",\r\n      tipo = type === \"\" ? \"\" : \"&type=\" + type,\r\n      fecha = date === \"\" ? \"\" : \"&date=\" + date;\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de ventas\r\n    console.log(\"Descargando ventas de API\");\r\n    fetch(url + pagina + ordenar + buscar + tipo + fecha, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n          console.log(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(\"Descargando ventas\");\r\n        this.setState({\r\n          pedidos: data,\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class AddAbono extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      metodopago: 1,\r\n      total: 0,\r\n      banco: \"\",\r\n      auth: \"\",\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"abonos\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">Abono</h5>\r\n              <button\r\n                type=\"button\"\r\n                className=\"close\"\r\n                data-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n\r\n            <form className=\"modal-body\">\r\n              <div className=\"row mb-2\">\r\n                <div className=\"col\">\r\n                  <label>Fecha</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control-plaintext\"\r\n                    readOnly={true}\r\n                    value={moment().format(\"L\")}\r\n                  />\r\n                </div>\r\n                <div className=\"col\">\r\n                  <label>Usuario</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control-plaintext\"\r\n                    readOnly={true}\r\n                    value={this.props.user}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row mb-2\">\r\n                <div className=\"col\">\r\n                  <label>Metodo de pago</label>\r\n                  <select\r\n                    name=\"metodopago\"\r\n                    className=\"custom-select\"\r\n                    value={this.state.metodopago}\r\n                    onChange={this.onChangeValue}\r\n                  >\r\n                    <option value=\"1\">Efectivo</option>\r\n                    <option value=\"2\">Tarjeta de debito</option>\r\n                    <option value=\"3\">Tarjeta de credito</option>\r\n                    <option value=\"4\">La marina</option>\r\n                    <option value=\"5\">Cheque</option>\r\n                    <option value=\"6\">Transferencia</option>\r\n                    <option value=\"0\">Otro</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"col\">\r\n                  <label>Cantidad</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max={this.props.pay}\r\n                    className=\"form-control text-right\"\r\n                    name=\"total\"\r\n                    value={this.state.total ? this.state.total : \"\"}\r\n                    onChange={this.onChangeValue}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {this.state.metodopago !== 1 ? (\r\n                <div className=\"row mb-2\">\r\n                  <div className=\"col\">\r\n                    <label>Banco</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"banco\"\r\n                      className=\"form-control\"\r\n                      value={\r\n                        this.state.metodopago === 4\r\n                          ? \"La marina\"\r\n                          : this.state.banco\r\n                      }\r\n                      disabled={this.state.metodopago === 4 ? true : false}\r\n                      onChange={this.onChangeValue}\r\n                    />\r\n                  </div>\r\n                  <div className=\"col\">\r\n                    <label>N. Autorización</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"auth\"\r\n                      className=\"form-control\"\r\n                      value={this.state.auth}\r\n                      onChange={this.onChangeValue}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n            </form>\r\n\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-dark\"\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-success\"\r\n                onClick={this.handlePay}\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Abonar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handlePay = (e) => {\r\n    e.preventDefault();\r\n\r\n    //Verificamos campos validos\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de realizar el abono?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Guardar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let body = this.state,\r\n            ls = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n            url = \"http://\" + ls.host + \"/api/payments\";\r\n\r\n          //Agregamos parametros de identificación\r\n          body[\"sale_id\"] = this.props.saleId;\r\n          body[\"contact_id\"] = this.props.contactId;\r\n          body[\"order_id\"] = this.props.order;\r\n\r\n          //this.props.handleLoad(true);\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del pago a API para almacenar\");\r\n          return fetch(url, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText + \"(\" + back.message + \")\");\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Abono almacenado\");\r\n          this.props.handleChange(this.state.total);\r\n          this.setState({\r\n            metodopago: 1,\r\n            total: 0,\r\n            banco: \"\",\r\n            auth: \"\",\r\n          });\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Abono almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el abono\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  onChangeValue = (e) => {\r\n    let { name, value, type } = e.target;\r\n    if (name === \"total\") {\r\n      value = value * 1;\r\n      if (value > this.props.pay) value = this.props.pay;\r\n      else if (value < 0) value = 0;\r\n    }\r\n    if (name === \"metodopago\" || type === \"number\") value = value * 1;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class printPay extends Component {\r\n  render() {\r\n    const { id, client } = this.props;\r\n\r\n    return (\r\n      <div className=\"d-none d-print-block\" style={{ width: 340 }} id={id}>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card m-0\">\r\n              <div className=\"card-body\">\r\n                <h1 className=\"text-center\">\r\n                  <center>\r\n                    <strong>Óptica Madero</strong>\r\n                  </center>\r\n                </h1>\r\n                <h3>\r\n                  <em>\r\n                    Julio Cesar Cardenas Martinez\r\n                    <br />\r\n                    Tel: 312 312 5353\r\n                    <br />\r\n                    Av. Tecnologico 38-A, Vistahermosa, Colima, Col.\r\n                  </em>\r\n                </h3>\r\n                <hr />\r\n                <h4 className=\"text-uppercase\">\r\n                  {client && client.nombre ? client.nombre.toUpperCase() : null}\r\n                  <br />\r\n                  {client.telefonos\r\n                    ? client.telefonos[0]\r\n                      ? client.telefonos[0]\r\n                      : client.telefonos[2]\r\n                    : \"--\"}\r\n                </h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <center>\r\n              <h2 className=\"text-center\">Abono</h2>\r\n            </center>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport AddAbono from \"./abonoAdd\";\r\nimport Print from \"./print_pay\";\r\n\r\nexport default class ListAbonos extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      abonos: [],\r\n      total: 0,\r\n      load: true,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentDidMount() {\r\n    this.getPayments();\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { abonos, total, load } = this.state;\r\n    const { id, date, contact, order, pay, user, sale, cliente } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">Fecha</th>\r\n              <th scope=\"col\">Metodo de pago</th>\r\n              <th scope=\"col\">Cantidad</th>\r\n              <th scope=\"col\">Recibio</th>\r\n              <th scope=\"col\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {abonos.length && !load ? (\r\n              <React.Fragment>\r\n                {abonos.map((abono) => {\r\n                  return (\r\n                    <tr key={abono.id}>\r\n                      <td>{moment(abono.created_at).format(\"L\")}</td>\r\n                      <td>\r\n                        {this.SetMethodPayment(abono.metodo)}\r\n                        {abono.metodo !== 1 ? (\r\n                          <span className=\"ml-4\">\r\n                            {abono.banco ? abono.banco : \"--\"} /{\" \"}\r\n                            {abono.Autorizacion ? abono.Autorizacion : \"--\"}\r\n                          </span>\r\n                        ) : null}\r\n                      </td>\r\n                      <td className=\"text-right\">$ {abono.total.toFixed(2)}</td>\r\n                      <td>{abono.created_user}</td>\r\n                      <td className=\"text-right\">\r\n                        {moment(new Date()).isSame(abono.created_at, \"day\") ? (\r\n                          <button\r\n                            className=\"btn btn-black btn-sm\"\r\n                            onClick={() => {\r\n                              this.delete(abono.id);\r\n                            }}\r\n                          >\r\n                            <i className=\"fas fa-trash\"></i>\r\n                          </button>\r\n                        ) : null}\r\n\r\n                        <button\r\n                          className=\"btn btn-outline-light btn-sm\"\r\n                          onClick={() => {\r\n                            this.print(\r\n                              abono.total,\r\n                              moment(abono.created_at).format(\"L\"),\r\n                              abono.id\r\n                            );\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-print\"></i>\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </React.Fragment>\r\n            ) : load ? (\r\n              <tr>\r\n                <td colSpan=\"5\" className=\"text-center p-4\">\r\n                  <div\r\n                    className=\"spinner-border text-primary mr-4\"\r\n                    role=\"status\"\r\n                  >\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                  <span className=\"font-weight-light font-italic\">\r\n                    Espere cargando datos de la venta\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"5\" className=\"text-center\">\r\n                  No hay abonos registrados\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <th scope=\"row\" colSpan=\"3\" className=\"text-right\">\r\n                {this.props.pay ? (\r\n                  <a\r\n                    href=\"#abonos\"\r\n                    className={\r\n                      this.props.pay\r\n                        ? \"btn btn-outline-success btn-sm mr-2\"\r\n                        : \"btn btn-outline-success btn-sm mr-2 disabled\"\r\n                    }\r\n                    data-toggle=\"modal\"\r\n                    data-target=\"#abonos\"\r\n                    aria-disabled={this.props.pay ? false : true}\r\n                  >\r\n                    <i className=\"fas fa-money-bill-wave-alt\"></i>\r\n                  </a>\r\n                ) : null}\r\n                Total: $ {total.toFixed(2)}\r\n              </th>\r\n              <td colSpan=\"2\"></td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n        <AddAbono\r\n          pay={pay}\r\n          user={user}\r\n          saleId={sale}\r\n          contactId={contact}\r\n          order={order}\r\n          handleChange={this.handleChange}\r\n          handleLoad={this.handleLoad}\r\n        />\r\n        <Print\r\n          folio={id}\r\n          date={date}\r\n          contact={contact}\r\n          client={cliente}\r\n          id=\"print_pay\"\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  delete = (id) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el abono?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          let ls = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de venta por API\");\r\n          return fetch(\"http://\" + ls.host + \"/api/payments/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Abono eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Abono eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getPayments());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  print = (total, date, id) => {\r\n    let content = document.getElementById(\"print_pay\"),\r\n      pri = document.getElementById(\"ifmcontentstoprint\").contentWindow;\r\n\r\n    pri.document.open();\r\n    pri.document.write(content.innerHTML);\r\n    pri.document.write(\"<fieldset><h3>\");\r\n    pri.document.write(\"Fecha: \" + date);\r\n    pri.document.write(\"<br/>Folio: \" + id);\r\n    pri.document.write(\"<br/>Monto: $ \" + total.toFixed(2));\r\n    pri.document.write(\"</h3></fieldset>\");\r\n    pri.document.close();\r\n    pri.focus();\r\n    pri.print();\r\n  };\r\n  handleLoad = (load) => {\r\n    this.setState({\r\n      load,\r\n    });\r\n  };\r\n  handleChange = (total) => {\r\n    this.setState({\r\n      total: this.state.total + total,\r\n    });\r\n    this.getPayments();\r\n  };\r\n  SetMethodPayment = (status) => {\r\n    switch (status) {\r\n      case 1:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">Efectivo</span>\r\n        );\r\n      case 2:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">\r\n            Tarjeta debito\r\n          </span>\r\n        );\r\n      case 3:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">\r\n            Tarjeta Credito\r\n          </span>\r\n        );\r\n      case 4:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">La marina</span>\r\n        );\r\n      case 5:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">Cheque</span>\r\n        );\r\n      case 6:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">\r\n            Transferencia\r\n          </span>\r\n        );\r\n      default:\r\n        return <span className=\"badge badge-success text-uppercase\">Otro</span>;\r\n    }\r\n  };\r\n  getPayments = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      order = \"&order=desc\",\r\n      sale = \"?sale=\" + this.props.sale;\r\n\r\n    //Mandamos señal de procesamiento\r\n    if (!this.state.load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Realiza la peticion del usuario seun el id\r\n    console.log(\"Descargando datos de los pagos\");\r\n    fetch(\"http://\" + varLocalStorage.host + \"/api/payments\" + sale + order, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n          console.log(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.meta && data.meta.total) {\r\n          console.log(\"Almacenando abonos\");\r\n          let total = 0;\r\n          for (var i = 0; i < data.data.length; i++) {\r\n            total += data.data[i].total;\r\n          }\r\n          this.props.handleChange(\"pagado\", total * 1);\r\n          this.setState({\r\n            abonos: data.data,\r\n            total,\r\n            load: false,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class printSale extends Component {\r\n  render() {\r\n    const {\r\n      items,\r\n      descuento,\r\n      total,\r\n      saldo,\r\n      abonado,\r\n      folio,\r\n      date,\r\n      id,\r\n    } = this.props;\r\n    let totalItems = 0,\r\n      client = this.props.cliente;\r\n\r\n    return (\r\n      <div className=\"d-none d-print-block\" style={{ width: 340 }} id={id}>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card m-0\">\r\n              <div className=\"card-body\">\r\n                <h4\r\n                  className=\"text-right\"\r\n                  style={{ fontSize: 28, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <i>\r\n                    Folio: <strong>{folio}</strong>\r\n                  </i>\r\n                </h4>\r\n                <h6\r\n                  className=\"text-right mb-2\"\r\n                  style={{ fontSize: 18, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <strong>{moment(date).format(\"LL\")}</strong>\r\n                </h6>\r\n                <h2\r\n                  className=\"text-center\"\r\n                  style={{ fontSize: 54, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <center>\r\n                    <strong>Óptica Madero</strong>\r\n                  </center>\r\n                </h2>\r\n                <h4\r\n                  className=\"text-center mb-4\"\r\n                  style={{ fontSize: 22, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <em>\r\n                    Julio Cesar Cardenas Martinez\r\n                    <br />\r\n                    Tel: 312 312 5353\r\n                    <br />\r\n                    Av. Tecnologico 38-A, Vistahermosa, Colima, Col.\r\n                  </em>\r\n                </h4>\r\n                <h4\r\n                  className=\"text-uppercase text-center mb-1\"\r\n                  style={{ fontSize: 20, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  {client && client.nombre\r\n                    ? client.nombre\r\n                    : \"Venta de mostrador\"}\r\n                  <br />\r\n                  <strong>\r\n                    <em style={{ fontSize: 24 }}>\r\n                      {client && client.telefonos\r\n                        ? client.telefonos.t_movil\r\n                          ? client.telefonos.t_movil\r\n                          : client.telefonos.t_casa\r\n                          ? client.telefonos.t_casa\r\n                          : client.telefonos.t_oficina\r\n                        : \"--\"}\r\n                    </em>\r\n                  </strong>\r\n                </h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col text-center\">\r\n            <h2 style={{ fontSize: 36, fontFamily: \"sans-serif\" }}>\r\n              <strong>Pedido</strong>\r\n            </h2>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                    Cant\r\n                  </th>\r\n                  <th style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                    Descripcion\r\n                  </th>\r\n                  <th style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                    Total\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {items.map((item, index) => {\r\n                  const total = parseFloat(item.cantidad * item.precio);\r\n                  totalItems += total;\r\n                  return (\r\n                    <tr key={index} className=\"text-capitalize\">\r\n                      <td style={{ fontSize: 22, fontFamily: \"sans-serif\" }}>\r\n                        {item.cantidad}\r\n                      </td>\r\n                      <td style={{ fontSize: 22, fontFamily: \"sans-serif\" }}>\r\n                        {item.producto}\r\n                      </td>\r\n                      <td\r\n                        className=\"text-right\"\r\n                        style={{ fontSize: 24, fontFamily: \"sans-serif\" }}\r\n                      >\r\n                        {total.toFixed(2)}\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td className=\"text-right\" colSpan=\"3\">\r\n                    {descuento ? (\r\n                      <React.Fragment>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Subtotal: <label>$ {totalItems.toFixed(2)}</label>\r\n                        </h4>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Descuento: <label>$ {descuento.toFixed(2)}</label>\r\n                        </h4>\r\n                      </React.Fragment>\r\n                    ) : null}\r\n                    <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                      Total: <label>$ {total.toFixed(2)}</label>\r\n                    </h4>\r\n                    {abonado ? (\r\n                      <React.Fragment>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Abonado: <label>$ {abonado.toFixed(2)}</label>\r\n                        </h4>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Saldo: <label>$ {saldo.toFixed(2)}</label>\r\n                        </h4>\r\n                      </React.Fragment>\r\n                    ) : null}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-center\">\r\n          <em style={{ fontSize: 22, fontFamily: \"sans-serif\" }}>\r\n            Armazones usados, viejos y/o resecos son responsabilidad del cliente\r\n          </em>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getContact = (id) => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    //Realiza busqueda de contacto\r\n    fetch(\"http://\" + varLocalStorage.host + \"/api/contacts/\" + id, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(\"Descargando contacto: data\", data);\r\n        this.setState({\r\n          dataContact: data.data,\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class edoCuenta extends Component {\r\n  render() {\r\n    const { pay, descuento, subtotal, total, pagado } = this.props;\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title mb-4\">\r\n            <i className=\"fas fa-shield-alt mr-2\"></i>\r\n            Estado de cuenta\r\n            {!pay ? (\r\n              <span className=\"badge badge-success ml-2\">Cuenta liquidada</span>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </h5>\r\n\r\n          <div className=\"card-text form-group row\">\r\n            <label className=\"col-6\">Descuento</label>\r\n            <div className=\"col\">\r\n              <input\r\n                className={\r\n                  pagado\r\n                    ? \"form-control text-right text-success disabled\"\r\n                    : \"form-control text-right text-success\"\r\n                }\r\n                type=\"number\"\r\n                name=\"descuento\"\r\n                min=\"0\"\r\n                max={subtotal - descuento}\r\n                readOnly={pay && !pagado ? false : true}\r\n                value={descuento ? descuento.toFixed(2) : \"\"}\r\n                onChange={this.catchInputs}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"card-text form-group row\">\r\n            <label className=\"col-6\">Total</label>\r\n            <div className=\"col\">\r\n              <input\r\n                className=\"form-control text-right text-success\"\r\n                type=\"number\"\r\n                name=\"total\"\r\n                value={total.toFixed(2)}\r\n                onChange={this.catchInputs}\r\n                readOnly={true}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"card-text row\">\r\n            <label className=\"col-6 p-2\">Abonado</label>\r\n            <h3 className=\"col text-success p-2 text-right\">\r\n              $ {pagado.toFixed(2)}\r\n            </h3>\r\n          </div>\r\n          <div className=\"card-text row\">\r\n            <label className=\"col-6 p-2\">Saldo</label>\r\n            <h3 className=\"col text-success p-2 text-right\">\r\n              $ {pay.toFixed(2)}\r\n            </h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    this.props.catchInputs(e);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport SearchContact from \"../Contacts/searchContactCard\";\r\nimport Items from \"../Order/itemsOrder\";\r\nimport Abonos from \"./abonos\";\r\nimport Print from \"./print_sale\";\r\nimport EdoCuenta from \"./edoCuenta\";\r\nimport Chat from \"../Layouts/messenger\";\r\n\r\nexport default class SaleAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\")),\r\n      id = this.props.match.params.id,\r\n      contact_id = id ? 0 : 2;\r\n\r\n    this.state = {\r\n      id: id,\r\n      session:\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(10),\r\n      descuento: 0,\r\n      subtotal: 0,\r\n      total: 0,\r\n      items: [],\r\n      contact_id: contact && contact.id ? contact.id : contact_id,\r\n      cliente: {},\r\n      order_id: 0,\r\n      status: 0,\r\n      usuario: \"\",\r\n      date: Date.now(),\r\n      load: true,\r\n      pagado: 0,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.total = 0;\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    let { id } = this.state;\r\n    this.getSales(id);\r\n  }\r\n\r\n  render() {\r\n    let {\r\n        contact_id,\r\n        cliente,\r\n        subtotal,\r\n        descuento,\r\n        pagado,\r\n        items,\r\n        status,\r\n        id,\r\n        session,\r\n        load,\r\n        date,\r\n        order_id,\r\n      } = this.state,\r\n      pay = subtotal - (descuento + pagado),\r\n      { data } = this.props,\r\n      chat = order_id ? (\r\n        <Chat data={data} table=\"orders\" idRow={order_id} pagado={pagado} />\r\n      ) : (\r\n        <Chat data={data} table=\"sales\" idRow={id} pagado={pagado} />\r\n      );\r\n\r\n    this.total = subtotal - descuento;\r\n    pay = pay > 0 ? pay : 0;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"row d-print-none\">\r\n          <div className=\"col-3\">\r\n            <SearchContact\r\n              contact={contact_id}\r\n              status={status}\r\n              getIdContact={this.getIdContact}\r\n              changePage={this.changePage}\r\n            />\r\n\r\n            {contact_id && items.length ? (\r\n              <EdoCuenta\r\n                pay={pay}\r\n                descuento={descuento}\r\n                subtotal={subtotal}\r\n                total={this.total}\r\n                pagado={pagado}\r\n                catchInputs={this.catchInputs}\r\n              />\r\n            ) : null}\r\n          </div>\r\n          <div className=\"col\">\r\n            <div className=\"card card-success card-outline\">\r\n              <div className=\"card-body\">\r\n                {contact_id && !load ? (\r\n                  <React.Fragment>\r\n                    <div className=\"row mb-4\">\r\n                      <div className=\"col-2\">\r\n                        <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                          <span className=\"badge badge-pill badge-success mx-2\">\r\n                            Venta\r\n                          </span>\r\n                          <strong>{id ? id : \"Nuevo\"}</strong>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col\">\r\n                        <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                          <span className=\"badge badge-pill badge-success mx-2\">\r\n                            Creador\r\n                          </span>\r\n                          <strong>\r\n                            {this.state.usuario\r\n                              ? this.state.usuario\r\n                              : this.props.data.name}\r\n                          </strong>\r\n                        </div>\r\n                      </div>\r\n                      {order_id ? (\r\n                        <div className=\"col-2\">\r\n                          <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                            <span className=\"badge badge-pill badge-warning mx-2\">\r\n                              Pedido\r\n                            </span>\r\n                            <strong>\r\n                              {order_id ? (\r\n                                <Link\r\n                                  to={\"/pedidos/registro/\" + order_id}\r\n                                  onClick={(e) => {\r\n                                    this.changePage(\"/pedidos/registro\");\r\n                                  }}\r\n                                >\r\n                                  {order_id}\r\n                                </Link>\r\n                              ) : null}\r\n                            </strong>\r\n                          </div>\r\n                        </div>\r\n                      ) : null}\r\n                      <div className=\"col\">\r\n                        <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                          <span className=\"badge badge-pill badge-success mx-2\">\r\n                            Fecha\r\n                          </span>\r\n                          <strong>{moment(date).format(\"ll\")}</strong>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <Items\r\n                      items={items}\r\n                      status={status && this.total === pagado ? true : false}\r\n                      session={session}\r\n                      ChangeInput={this.handleChangeInput}\r\n                      addCancel={order_id ? true : false}\r\n                    />\r\n                  </React.Fragment>\r\n                ) : load ? (\r\n                  <div className=\"text-center p-4\">\r\n                    <div\r\n                      className=\"spinner-border text-primary mr-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                    <span className=\"font-weight-light font-italic\">\r\n                      Espere cargando datos de la venta\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"alert alert-light\">\r\n                    <h4 className=\"alert-heading\">Nueva nota</h4>\r\n                    <p>\r\n                      <i className=\"fas fa-user mr-1\"></i> Primero seleccione al\r\n                      cliente!\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"card-footer text-right\">\r\n                <div className=\"btn-group\" role=\"group\">\r\n                  <Link\r\n                    to=\"/notas\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={(e) => {\r\n                      this.changePage(\"/notas\");\r\n                    }}\r\n                  >\r\n                    <i\r\n                      className={\r\n                        id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                      }\r\n                    ></i>\r\n                    <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                  </Link>\r\n                  <button\r\n                    className={\r\n                      contact_id && items.length\r\n                        ? \"btn btn-dark\"\r\n                        : \"btn btn-dark disabled\"\r\n                    }\r\n                    onClick={(e) => {\r\n                      window.print();\r\n                    }}\r\n                    disabled={contact_id && items.length ? false : true}\r\n                  >\r\n                    <i className=\"fas fa-print mr-2\"></i>\r\n                    <strong>Imprimir</strong>\r\n                  </button>\r\n                  <button\r\n                    className={\r\n                      contact_id && items.length && pay\r\n                        ? \"btn btn-success\"\r\n                        : \"btn btn-success disabled\"\r\n                    }\r\n                    onClick={this.handleSave}\r\n                    disabled={contact_id && items.length && pay ? false : true}\r\n                  >\r\n                    <i className=\"fas fa-save mr-2\"></i>\r\n                    <strong>Guardar</strong>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {contact_id && id ? (\r\n              <div className=\"card card-success card-outline\">\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title mb-4\">\r\n                    <i className=\"fas fa-money-bill mr-2\"></i>\r\n                    Ultimos Abonos\r\n                  </h5>\r\n                  <Abonos\r\n                    abonos={pagado * 1}\r\n                    sale={id * 1}\r\n                    contact={contact_id}\r\n                    cliente={cliente}\r\n                    pay={pay * 1}\r\n                    order={order_id * 1}\r\n                    user={this.props.data.name}\r\n                    handleChange={this.handleChangeInput}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          {id && contact_id ? (\r\n            <div className=\"col-3 d-print-none\">{chat}</div>\r\n          ) : null}\r\n        </div>\r\n        <Print\r\n          id=\"print_sale\"\r\n          folio={order_id ? \"P-\" + order_id : \"V-\" + id}\r\n          date={date}\r\n          items={items}\r\n          descuento={descuento}\r\n          total={this.total}\r\n          saldo={pay}\r\n          abonado={pagado}\r\n          contact={contact_id}\r\n          cliente={cliente}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  handleChangeInput = (key, value) => {\r\n    let subtotal = 0;\r\n    if (key === \"items\") {\r\n      for (var i = 0; i < value.length; i++) {\r\n        subtotal += value[i].cantidad * value[i].precio;\r\n      }\r\n    } else {\r\n      subtotal = this.state.subtotal;\r\n    }\r\n    this.setState({\r\n      [key]: value,\r\n      subtotal,\r\n    });\r\n  };\r\n  catchInputs = (e) => {\r\n    let { name, value, type } = e.target;\r\n    if (type === \"number\") value = value * 1;\r\n    if (name === \"descuento\") {\r\n      if (value >= this.state.subtotal - this.state.descuento) {\r\n        value = this.state.subtotal - 1;\r\n      }\r\n    }\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getIdContact = (contact_id, edad) => {\r\n    this.setState({\r\n      contact_id,\r\n      edad,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { id } = this.state;\r\n\r\n    //Verificamos campos validos\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar la venta?\"\r\n        : \"¿Esta seguro de crear una nueva venta?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          let { host, token } = this.state,\r\n            url = id\r\n              ? \"http://\" + host + \"/api/sales/\" + id\r\n              : \"http://\" + host + \"/api/sales\",\r\n            method = id ? \"PUT\" : \"POST\",\r\n            body = {},\r\n            items = [];\r\n\r\n          this.state.items.map((item) => {\r\n            items.push({\r\n              cant: item.cantidad,\r\n              price: item.precio,\r\n              subtotal: item.subtotal,\r\n              inStorage: item.inStorage,\r\n              out: item.out,\r\n              session: item.session,\r\n              store_items_id: item.store_items_id,\r\n              descripcion: item.descripcion,\r\n            });\r\n            return false;\r\n          });\r\n          body = {\r\n            session: this.state.session,\r\n            descuento: this.state.descuento,\r\n            subtotal: this.state.subtotal,\r\n            total: this.state.subtotal - this.state.descuento,\r\n            contact_id: this.state.contact_id,\r\n            order_id: this.state.order_id ? this.state.order_id : \"\",\r\n            pagado: this.state.pagado,\r\n            items: JSON.stringify(items),\r\n          };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Venta almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Venta actualizada con exito\"\r\n              : \"Venta almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.setState({\r\n              id: data.data.id,\r\n              //order_id: data.data.pedido,\r\n            });\r\n            this.props.history.push(`/notas/registro/${data.data.id}`);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la venta\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getSales = (id) => {\r\n    if (id > 0) {\r\n      //Variables en state\r\n      let { host, token } = this.state;\r\n      //Realiza la peticion del pedido\r\n      console.log(\"Solicitando datos de pedido a la API\");\r\n      fetch(\"http://\" + host + \"/api/sales/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            const { rol } = this.props.data;\r\n            console.log(\"Mostrando datos del pedido\");\r\n            this.setState({\r\n              id: data.data.id,\r\n              session: data.data.session\r\n                ? data.data.session\r\n                : this.state.session,\r\n              items: data.data.productos,\r\n              descuento: data.data.descuento,\r\n              subtotal: data.data.subtotal,\r\n              total: data.data.total,\r\n              contact_id: data.data.cliente.id,\r\n              cliente: data.data.cliente,\r\n              usuario: data.data.created,\r\n              date: data.data.created_at,\r\n              status: !rol ? 0 : 1,\r\n              order_id: data.data.pedido,\r\n              pagado: data.data.pagado,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\"Error\", data.message, \"error\");\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class ReportPay extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      rol: props.data.rol,\r\n      token: props.data.token,\r\n      total: 0,\r\n      efectivo: 0,\r\n    };\r\n    this.char = null;\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getSaleDay();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.date !== this.props.date || props.user !== this.props.user) {\r\n      console.log(\"Recarga datos de char\");\r\n      this.getSaleDay();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { total, efectivo, rol } = this.state;\r\n    const { data } = this.props;\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-success\">\r\n            {data.rol ? \"Mis ventas del dia\" : \"Ventas del dia\"}\r\n          </h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <canvas id=\"donutChart\"></canvas>\r\n          <p>\r\n            {!rol ? (\r\n              <React.Fragment>\r\n                Venta: <strong>$ {total.toFixed(2)}</strong>\r\n                <br />\r\n              </React.Fragment>\r\n            ) : null}\r\n            Efectivo: <strong>$ {efectivo.toFixed(2)}</strong>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    if (name === \"user\") value = value * 1;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getSaleDay = () => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state,\r\n      { date, user } = this.props,\r\n      url = \"http://\" + host + \"/api/saleday\",\r\n      saleDay = \"?date=\" + date,\r\n      saleUser = user ? \"&user=\" + user : \"\";\r\n\r\n    if (token && host) {\r\n      //Realiza la peticion del pedido\r\n      console.log(\"Solicitando datos a la API\");\r\n      fetch(url + saleDay + saleUser, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Ups!\\n Hubo un error al descargar las ventas\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Ok\",\r\n            });\r\n            console.log(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then(async (data) => {\r\n          var donutChartCanvas = window\r\n              .$(\"#donutChart\")\r\n              .get(0)\r\n              .getContext(\"2d\"),\r\n            donutOptions = {\r\n              maintainAspectRatio: true,\r\n              responsive: true,\r\n            },\r\n            labels = [],\r\n            values = [],\r\n            total = 0,\r\n            efectivo = 0,\r\n            donutData = {};\r\n          if (this.char) this.char.destroy();\r\n\r\n          if (!data.message) {\r\n            console.log(\"Mostrando datos de la venta del dia\");\r\n            if (data && data.length) {\r\n              await data.map((mp) => {\r\n                labels.push(this.SetMethodPayment(mp.metodopago));\r\n                values.push(mp.total.toFixed(2));\r\n                if (mp.metodopago === 1) {\r\n                  this.props.changeState(\"ventas\", mp.total);\r\n                  efectivo = mp.total;\r\n                }\r\n                total += mp.total;\r\n                return null;\r\n              });\r\n            } else {\r\n              labels = [\"No hay datos\"];\r\n              values = [100];\r\n            }\r\n\r\n            this.setState({\r\n              total,\r\n              efectivo,\r\n            });\r\n          } else {\r\n            console.error(\"Error al cargar la venta del dia\", data.message);\r\n            labels = [\"No hay datos\"];\r\n            values = [100];\r\n          }\r\n          donutData = {\r\n            labels: labels,\r\n            datasets: [\r\n              {\r\n                data: values,\r\n                backgroundColor: [\r\n                  \"#f56954\",\r\n                  \"#00a65a\",\r\n                  \"#f39c12\",\r\n                  \"#00c0ef\",\r\n                  \"#3c8dbc\",\r\n                  \"#d2d6de\",\r\n                  \"#000\",\r\n                ],\r\n              },\r\n            ],\r\n          };\r\n          this.char = new window.Chart(donutChartCanvas, {\r\n            type: \"pie\",\r\n            data: donutData,\r\n            options: donutOptions,\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error de usuario, intentelo mas tarde\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"Ok\",\r\n          });\r\n        });\r\n    }\r\n  };\r\n  SetMethodPayment = (status) => {\r\n    switch (status) {\r\n      case 1:\r\n        return \"Efectivo\";\r\n      case 2:\r\n        return \"Tarjeta debito\";\r\n      case 3:\r\n        return \"Tarjeta de credito\";\r\n      case 4:\r\n        return \"La marina\";\r\n      case 5:\r\n        return \"Cheque\";\r\n      case 6:\r\n        return \"Transferencia\";\r\n      default:\r\n        return \"Otro\";\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nexport default class Cash extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      atms: [],\r\n      efectivo: 0,\r\n      tipo: 1,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentDidMount() {\r\n    this.getAtms();\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.date !== this.props.date || props.user !== this.props.user) {\r\n      this.getAtms();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { atms, efectivo, tipo } = this.state;\r\n    let total = 0;\r\n    return (\r\n      <div className=\"card card-dark card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-dark\">Movimientos de caja</h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <table className=\"table table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>Hora</th>\r\n                <th>Usuario</th>\r\n                <th>Tipo</th>\r\n                <th>Monto</th>\r\n                <th>D</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {atms.length ? (\r\n                atms.map((atm) => {\r\n                  total += atm.efectivo;\r\n                  return (\r\n                    <tr\r\n                      key={atm.id}\r\n                      className={\r\n                        atm.efectivo > 0 ? \"text-success\" : \"text-danger\"\r\n                      }\r\n                    >\r\n                      <td>{moment(atm.created_at).format(\"LT\")}</td>\r\n                      <td>{atm.created_user}</td>\r\n                      <td>{atm.tipo ? \"Ingreso\" : \"Egreso\"}</td>\r\n                      <td className=\"text-right\">\r\n                        $\r\n                        {atm.efectivo > 0\r\n                          ? atm.efectivo.toFixed(2)\r\n                          : (atm.efectivo * -1).toFixed(2)}\r\n                      </td>\r\n                      <th className=\"text-right\">\r\n                        <a\r\n                          href=\"#delete\"\r\n                          className=\"text-dark\"\r\n                          onClick={(e) => {\r\n                            e.preventDefault();\r\n                            this.deleteAtm(\r\n                              atm.id,\r\n                              atm.tipo,\r\n                              atm.efectivo.toFixed(2)\r\n                            );\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-trash\"></i>\r\n                        </a>\r\n                      </th>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"5\" className=\"text-center\">\r\n                    No hay datos\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td colSpan=\"3\" className=\"text-right\">\r\n                  <label>Total</label>\r\n                </td>\r\n                <td className=\"text-right\">$ {total.toFixed(2)}</td>\r\n                <td></td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer\">\r\n          <div className=\"form-group row\">\r\n            <label className=\"col-4 col-form-label\">Efectivo</label>\r\n            <div className=\"col\">\r\n              <select\r\n                className=\"form-control\"\r\n                name=\"tipo\"\r\n                value={tipo}\r\n                onChange={this.changeState}\r\n              >\r\n                <option value=\"1\">Ingresos</option>\r\n                <option value=\"0\">Egreso</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"col\">\r\n              <input\r\n                type=\"number\"\r\n                name=\"efectivo\"\r\n                className=\"form-control text-right\"\r\n                min=\"0\"\r\n                max=\"10000\"\r\n                value={efectivo}\r\n                onChange={this.changeState}\r\n              />\r\n            </div>\r\n            <div className=\"col\">\r\n              <button\r\n                className=\"btn btn-dark\"\r\n                onClick={this.sendAtm}\r\n                disabled={efectivo > 0 ? false : true}\r\n              >\r\n                Enviar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  deleteAtm = (id, tipo, efectivo) => {\r\n    efectivo = efectivo > 0 ? efectivo : efectivo * -1;\r\n    tipo = tipo ? \"la ENTRADA\" : \"el EGRESO\";\r\n\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar \" + tipo + \" de \" + efectivo + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        let { host, token } = this.state;\r\n\r\n        if (confirm && efectivo) {\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos ATM a API\");\r\n          return fetch(\"http://\" + host + \"/api/atms/\" + id, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Entrada eliminada\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Entrada eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getAtms());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    if (name === \"tipo\") value = value * 1;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  sendAtm = () => {\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de agregar un movimiento a la caja?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        let { host, token, efectivo, tipo } = this.state,\r\n          body = {\r\n            efectivo: tipo ? efectivo : efectivo * -1,\r\n            type: tipo,\r\n          },\r\n          url = \"http://\" + host + \"/api/atms\";\r\n        if (confirm && efectivo) {\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos ATM a API\");\r\n          return fetch(url, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"ATM almacenado\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Movimiento almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => this.getAtms());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el movimiento\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getAtms = () => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state,\r\n      { date, user } = this.props,\r\n      url = \"http://\" + host + \"/api/atms\",\r\n      atmDate = \"?date=\" + date,\r\n      atmUser = user ? \"&user=\" + user : \"\";\r\n\r\n    //Realiza la peticion de los productos faltantes\r\n    console.log(\"Descargando datos de efectivo\");\r\n    fetch(url + atmDate + atmUser, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok && res.status !== 401) {\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error, intentelo mas tarde\",\r\n            icon: \"error\",\r\n          });\r\n          console.log(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(async (data) => {\r\n        console.log(\"Almacenando datos de efectivo\");\r\n        if (!data.message) {\r\n          let efectivo = 0;\r\n          await data.data.map((atm) => {\r\n            efectivo += atm.efectivo;\r\n            return null;\r\n          });\r\n          this.props.changeState(\"caja\", efectivo);\r\n          this.setState({\r\n            atms: data.data,\r\n            efectivo: 0,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire({\r\n          title: \"Error!\",\r\n          text: \"Ups!\\n Hubo un error, intentelo mas tarde\",\r\n          icon: \"error\",\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class DateUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      date: moment().format(\"YYYY-MM-DD\"),\r\n      user: !props.data.rol ? 0 : props.data.idUser,\r\n      users: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getUsers();\r\n  }\r\n\r\n  render() {\r\n    const { date, user, users } = this.state;\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-body bg-light\">\r\n          <div className=\"row mb-4\">\r\n            <h5 className=\"card-title text-secondary\">Filtros</h5>\r\n          </div>\r\n          <div className=\"form-group row\">\r\n            <label className=\"col col-form-label\">Fecha</label>\r\n            <div className=\"col\">\r\n              <input\r\n                type=\"date\"\r\n                name=\"date\"\r\n                className=\"form-control\"\r\n                value={date}\r\n                onChange={this.changeState}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group row\">\r\n            <label className=\"col col-form-label\">Usuario</label>\r\n            <div className=\"col\">\r\n              <select\r\n                name=\"user\"\r\n                className=\"form-control\"\r\n                value={user}\r\n                onChange={this.changeState}\r\n              >\r\n                <option value=\"0\">Todos</option>\r\n                {users.map((user) => {\r\n                  return (\r\n                    <option key={user.id} value={user.id}>\r\n                      {user.name}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n    this.props.changeState(name, value);\r\n  };\r\n  getUsers = () => {\r\n    let { host, token } = this.state,\r\n      url = \"http://\" + host + \"/api/users\",\r\n      orderby = \"&orderby=username&order=asc\",\r\n      rol = \"&rol=10\",\r\n      page = \"?page=1\";\r\n\r\n    //Realiza la peticion de los usuarios\r\n    console.log(\"Descargando usuarios de API\");\r\n    fetch(url + page + orderby + rol, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error al descargar usuarios de sistema\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"Ok\",\r\n          });\r\n          console.error(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (!data.message) {\r\n          console.log(\"Almacenando usuarios\");\r\n          this.setState({\r\n            users: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Error en la descarga de usuarios\", data.message);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire({\r\n          title: \"Error!\",\r\n          text: \"Ups!\\n Hubo un error de usuario, intentelo mas tarde\",\r\n          icon: \"error\",\r\n          confirmButtonText: \"Ok\",\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class BoxCut extends Component {\r\n  render() {\r\n    const { caja, ventas } = this.props;\r\n    const total = caja + ventas;\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-body bg-light text-right\">\r\n          <h5 className=\"card-title text-secondary\">Corte de caja</h5>\r\n          <p className=\"card-text\">\r\n            <label>caja:</label> ${caja.toFixed(2)}\r\n          </p>\r\n          <p className=\"card-text\">\r\n            <label>Efectivo:</label> ${ventas.toFixed(2)}\r\n          </p>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <label>Total:</label> ${total.toFixed(2)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n//import SalesOutStock from \"../Sales/salesOutStock\";\r\nimport ReportPays from \"../Sales/reportPays\";\r\nimport Caja from \"./cash\";\r\nimport DateUser from \"./dateUser\";\r\nimport BoxCut from \"./boxCut\";\r\n\r\nexport default class Dashboard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      user: !props.data.rol ? \"\" : props.data.idUser,\r\n      date: moment().format(\"YYYY-MM-DD\"),\r\n      caja: 0,\r\n      ventas: 0,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { user, date, caja, ventas } = this.state;\r\n    const { data } = this.props;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <ReportPays\r\n            data={data}\r\n            user={user}\r\n            date={date}\r\n            changeState={this.changeState}\r\n          />\r\n        </div>\r\n        <div className=\"col\">\r\n          <Caja\r\n            data={data}\r\n            user={user}\r\n            date={date}\r\n            changeState={this.changeState}\r\n          />\r\n        </div>\r\n        {!data.rol ? (\r\n          <div className=\"col-3\">\r\n            <DateUser data={data} changeState={this.changeState} />\r\n            <BoxCut caja={caja} ventas={ventas} />\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (name, value) => {\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class NotifyAll extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">Notificaciones de usuario</div>\r\n        <div className=\"card-body\">Var todas las notificaciones</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport Navtop from \"./components/Layouts/navtop\";\r\nimport Menu from \"./components/Layouts/menu\";\r\nimport Breadcrumb from \"./components/Layouts/breadcrumb\";\r\nimport Footer from \"./components/Layouts/footer\";\r\nimport Users from \"./components/Users/index\";\r\nimport UserAdd from \"./components/Users/add\";\r\nimport Store from \"./components/Store/index\";\r\nimport StoreAdd from \"./components/Store/add\";\r\nimport Categories from \"./components/Store/categories\";\r\nimport Brands from \"./components/Store/brands\";\r\nimport Inventory from \"./components/Store/inventory\";\r\nimport Contacts from \"./components/Contacts/index\";\r\nimport ContactsAdd from \"./components/Contacts/add\";\r\nimport AddByContact from \"./components/Contacts/addByContact\";\r\nimport Tools from \"./components/Layouts/tools\";\r\nimport Exam from \"./components/Exam/index\";\r\nimport ExamAdd from \"./components/Exam/add\";\r\nimport Order from \"./components/Order/index\";\r\nimport OrderAdd from \"./components/Order/add\";\r\nimport Sales from \"./components/Sales/index\";\r\nimport SalesAdd from \"./components/Sales/add\";\r\nimport Dashboard from \"./components/Dashboard/index\";\r\nimport NotifyAllShow from \"./components/Layouts/notifyAll\";\r\n\r\nexport default class Routers extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      page: this.handleTitleSection(window.location.pathname),\r\n      company: props.data.company,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    //Verificamos permisos\r\n    const dir = window.location.pathname,\r\n      rol = this.props.data.rol;\r\n\r\n    if (\r\n      rol === 1 &&\r\n      (dir.match(/^\\/usuarios/g) ||\r\n        dir.match(/^\\/almacen/g) ||\r\n        dir.match(/^\\/configuraciones/g))\r\n    ) {\r\n      window.location.href = \"/\";\r\n    }\r\n    if (\r\n      rol === 2 &&\r\n      (dir.match(/^\\/pedidos/g) ||\r\n        dir.match(/^\\/usuarios/g) ||\r\n        dir.match(/^\\/almacen/g) ||\r\n        dir.match(/^\\/notas/g) ||\r\n        dir.match(/^\\/configuraciones/g))\r\n    ) {\r\n      window.location.href = \"/\";\r\n    }\r\n  }\r\n  componentDidUpdate() {\r\n    console.log(\"Recargando router: \", window.location.pathname);\r\n  }\r\n\r\n  render() {\r\n    const { data, logOut } = this.props,\r\n      { page } = this.state;\r\n\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <Navtop logOut={logOut} data={data} />\r\n        <Menu\r\n          companyName={this.state.company}\r\n          user={data}\r\n          page={this.handlePage}\r\n          logOut={logOut}\r\n          active={page}\r\n        />\r\n        <div className=\"content-wrapper\">\r\n          <Breadcrumb title={this.state.page} />\r\n          <div className=\"content\">\r\n            <div className=\"container-fluid\">\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-12\">\r\n                  <Switch>\r\n                    <Route\r\n                      path=\"/usuarios/registro/:id?\"\r\n                      render={(props) => (\r\n                        <UserAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/usuarios\"\r\n                      render={(props) => (\r\n                        <Users {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      path=\"/almacen/registro/:id?\"\r\n                      render={(props) => (\r\n                        <StoreAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen/categorias\"\r\n                      render={(props) => (\r\n                        <Categories\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen/marcas\"\r\n                      render={(props) => (\r\n                        <Brands {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen/inventario\"\r\n                      render={(props) => (\r\n                        <Inventory\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen\"\r\n                      render={(props) => (\r\n                        <Store {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      path=\"/contactos/registro/:id?\"\r\n                      render={(props) => (\r\n                        <ContactsAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/contactos/add\"\r\n                      render={(props) => (\r\n                        <AddByContact\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/contactos\"\r\n                      render={(props) => (\r\n                        <Contacts\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/consultorio/registro/:id?\"\r\n                      render={(props) => (\r\n                        <ExamAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/consultorio\"\r\n                      render={(props) => (\r\n                        <Exam {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/configuraciones\"\r\n                      render={(props) => (\r\n                        <Tools {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/pedidos/registro/:id?\"\r\n                      render={(props) => (\r\n                        <OrderAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/pedidos\"\r\n                      render={(props) => (\r\n                        <Order {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/notas/registro/:id?\"\r\n                      render={(props) => (\r\n                        <SalesAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/notas\"\r\n                      render={(props) => (\r\n                        <Sales {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/notificaciones\"\r\n                      render={(props) => (\r\n                        <NotifyAllShow\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/\"\r\n                      render={(props) => (\r\n                        <Dashboard\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                  </Switch>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handlePage = (title) => {\r\n    let page = this.handleTitleSection(title);\r\n    this.setState({\r\n      page,\r\n    });\r\n  };\r\n  handleTitleSection = (page) => {\r\n    //Verificamos que la variable no este vacia\r\n    page = page ? page : window.location.pathname;\r\n    //Maneja el renderiazado del componentes cuando se cambíe el componentes\r\n    if (page === \"\" || typeof page === \"undefined\" || typeof page === \"object\")\r\n      page = \"/\";\r\n    let locations = page.split(\"/\");\r\n    if (locations[1] === \"\") {\r\n      return \"dashboard\";\r\n    } else {\r\n      return locations[1];\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Main extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      host: props.host,\r\n      hostShow: false,\r\n      load: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { load, username, password, hostShow, host } = this.state,\r\n      { company } = this.props;\r\n    return (\r\n      <div className=\"login-page\">\r\n        <div className=\"login-box\">\r\n          <div className=\"login-logo\">\r\n            <a href=\".\">\r\n              <b className=\"text-primary\">Orus</b> LTE\r\n            </a>\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <div className=\"card-body login-card-body\">\r\n              <p className=\"login-box-msg\">{company}</p>\r\n              <form onSubmit={this.handleLogin}>\r\n                <div className=\"input-group mb-3\">\r\n                  <input\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Usuario\"\r\n                    name=\"username\"\r\n                    required=\"required\"\r\n                    autoFocus={hostShow ? false : true}\r\n                    onChange={this.catchInputs}\r\n                    value={username}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <div className=\"input-group-text\">\r\n                      <span className=\"fas fa-user\"></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"input-group mb-3\">\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Contraseña\"\r\n                    name=\"password\"\r\n                    required=\"required\"\r\n                    minLength=\"8\"\r\n                    maxLength=\"16\"\r\n                    pattern=\"^(?=.*[A-Z])(?=.*[!@#$&\\.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$\"\r\n                    autoComplete=\"off\"\r\n                    onChange={this.catchInputs}\r\n                    value={password}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <div className=\"input-group-text\">\r\n                      <span className=\"fas fa-lock\"></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12 mb-4\">\r\n                    <a\r\n                      href=\"#tools\"\r\n                      onClick={this.showTools}\r\n                      className=\"text-muted\"\r\n                    >\r\n                      <i className=\"fas fa-wifi\"></i> Servidor\r\n                    </a>\r\n                    {hostShow ? (\r\n                      <div className=\"input-group mb-3\">\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Servidor\"\r\n                          name=\"host\"\r\n                          autoComplete=\"off\"\r\n                          autoFocus={hostShow ? true : false}\r\n                          onChange={this.catchInputs}\r\n                          value={host}\r\n                          onKeyPress={this.pressEnter}\r\n                        />\r\n                        <div className=\"input-group-append\">\r\n                          <div className=\"input-group-text\">\r\n                            <span className=\"fas fa-server\"></span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12 text-center\">\r\n                    {load ? (\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    ) : (\r\n                      <button\r\n                        type=\"submit\"\r\n                        className=\"btn btn-primary btn-block\"\r\n                      >\r\n                        Iniciar sesion\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  pressEnter = (e) => {\r\n    e.preventDefault();\r\n    if (e.key === \"Enter\") {\r\n      let { host } = this.state;\r\n      window.Swal.fire({\r\n        icon: \"success\",\r\n        title: \"La conexion al servidor fue actualizada con exito: \" + host,\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      }).then((res) => {\r\n        this.setState({\r\n          hostShow: false,\r\n        });\r\n        this.props.changeState(\"host\", host);\r\n      });\r\n    }\r\n  };\r\n  showTools = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      hostShow: !this.state.hostShow,\r\n    });\r\n  };\r\n  validInputs() {\r\n    //Valida los campos del formulario\r\n    let { username, password } = this.state;\r\n    const regexUser = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n      regexPass = /^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$/;\r\n\r\n    username = username.replace(/\\s/g, \"\").toLowerCase();\r\n\r\n    if (regexUser.test(username) && regexPass.test(password)) {\r\n      return true;\r\n    } else {\r\n      alert(\"Los datos ingresados no son validos\");\r\n      return false;\r\n    }\r\n  }\r\n  handleLogin = (e) => {\r\n    e.preventDefault();\r\n    const { host, username, password, load } = this.state;\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    if (host) {\r\n      //Manejamos el inicio de sesion aqui, declaramos primero las variables\r\n      //sobre todo la de localstorage donde viene el host a conectar\r\n      //La variable body con los datos de inicio\r\n      let valid = this.validInputs(),\r\n        body = {\r\n          email: username,\r\n          password,\r\n        };\r\n\r\n      //Si los datos de usuario son correctos manda la informacion al servidor\r\n      if (valid) {\r\n        console.log(\"Enviado credenciales al servidor\");\r\n        fetch(\"http://\" + host + \"/api/users/login\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(body),\r\n          signal: this.signal,\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        })\r\n          .then(async (response) => {\r\n            let back = {};\r\n            if (response.status !== 204) back = await response.json();\r\n            if (!response.ok) {\r\n              console.error(response, back);\r\n              throw new Error(back.message);\r\n            }\r\n            return back;\r\n          })\r\n          .then((response) => {\r\n            if (response.data) {\r\n              console.log(\"Loggin: realizado con exito\");\r\n              this.props.loginFunction(response);\r\n            }\r\n          })\r\n          .catch((message) => {\r\n            console.error(\"Orus fetch: \", message);\r\n            window.Swal.fire(\r\n              \"Fallo de servidor\",\r\n              \"Los datos no son correctos\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          });\r\n      } else {\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      }\r\n    } else {\r\n      console.error(\"No existe un valor para host\");\r\n      this.setState({\r\n        hostShow: true,\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport Routers from \"./Routers\";\r\nimport Login from \"./components/Layouts/login\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let storage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    //Agregamos los datos a state\r\n    this.state = {\r\n      isLogged: storage ? storage.isLogged : false,\r\n      token: storage ? storage.token : \"\",\r\n      idUser: storage ? storage.idUser : 0,\r\n      username: storage ? storage.username : \"\",\r\n      name: storage ? storage.name : \"\",\r\n      rol: storage ? storage.rol : 0,\r\n      email: storage ? storage.email : \"\",\r\n      host: storage ? storage.host : window.location.hostname,\r\n      company: storage ? storage.company : \"Optica Madero\",\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    /*Almacenamos el state en el storage*/\r\n    console.log(\"Cargando data a storage\");\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(this.state));\r\n  }\r\n  componentDidUpdate() {\r\n    //Cada que el componnte es redenrizado almacenamos la variables del\r\n    //state en localstorage\r\n    console.log(\"Actualizando data a storage\");\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(this.state));\r\n  }\r\n\r\n  render() {\r\n    //Mostramos el componente de login si isLogged no tiene sesion\r\n    //De lo contrario nos dirigimos al compenente de routers\r\n    //donde nos muestra el componente segun el path\r\n    return (\r\n      <Router>\r\n        <main>\r\n          {this.state.isLogged ? (\r\n            <Routers data={this.state} logOut={this.logOut} />\r\n          ) : (\r\n            <Login\r\n              company={this.state.company}\r\n              host={this.state.host}\r\n              loginFunction={this.login}\r\n              changeState={this.changeState}\r\n            />\r\n          )}\r\n        </main>\r\n      </Router>\r\n    );\r\n  }\r\n\r\n  changeState = (name, value) => {\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  login = (s) => {\r\n    //Funcion que maneja el cambio de sesion en el state\r\n    this.setState({\r\n      isLogged: s.data.id ? true : false,\r\n      idUser: s.data.id,\r\n      username: s.data.username,\r\n      name: s.data.name,\r\n      email: s.data.email,\r\n      rol: s.data.rol,\r\n      token: s.token,\r\n    });\r\n  };\r\n  logOut = () => {\r\n    let session = {\r\n      isLogged: false,\r\n      token: \"\",\r\n      idUser: 0,\r\n      username: \"\",\r\n      name: \"\",\r\n      rol: 0,\r\n      email: \"\",\r\n      host: this.state.host,\r\n      company: this.state.company,\r\n    };\r\n    console.log(\"La session ha sido cerrada\");\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(session));\r\n    window.location.href = \"/\";\r\n  };\r\n}\r\n\r\nrender(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}