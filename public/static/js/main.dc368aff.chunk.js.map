{"version":3,"sources":["components/Layouts/notify.jsx","components/Layouts/navtop.jsx","components/Layouts/menu.jsx","components/Layouts/breadcrumb.jsx","components/Layouts/footer.jsx","components/Layouts/headerTable.jsx","components/Layouts/pagination.jsx","components/Users/index_filter.jsx","components/Layouts/actionsTable.jsx","components/Users/index.jsx","components/Users/userNameInput.jsx","components/Users/userEmailInput.jsx","components/Users/add.jsx","components/Store/index_filter.jsx","components/Store/index.jsx","components/Store/add_lote.jsx","components/Store/input_category.jsx","components/Store/input_suppliers.jsx","components/Store/input_brand.jsx","components/Layouts/codeLentString.jsx","components/Store/add.jsx","components/Store/category_list.jsx","components/Store/categories.jsx","components/Store/brands.jsx","components/Store/inventory.jsx","components/Contacts/index_filter.jsx","components/Contacts/index.jsx","components/Contacts/mapa.jsx","components/Exam/graduacionExam.jsx","components/Exam/recomendaciones.jsx","components/Exam/listsExams.jsx","components/Contacts/nameInput.jsx","components/Contacts/emailInput.jsx","components/Contacts/add_personal.jsx","components/Contacts/add_domicilio.jsx","components/Contacts/add_telefonos.jsx","components/Contacts/add.jsx","components/Contacts/addByContact.jsx","components/Layouts/tools_category.jsx","components/Layouts/tools.jsx","components/Exam/index_filter.jsx","components/Exam/index.jsx","components/Contacts/easyContact.jsx","components/Contacts/searchContactCard.jsx","components/Exam/generalesExam.jsx","components/Exam/interrogatoriosExam.jsx","components/Exam/keraRetExam.jsx","components/Exam/diabetesExam.jsx","components/Exam/agudezaExam.jsx","components/Exam/diagnosticoExam.jsx","components/Exam/observacionesExam.jsx","components/Layouts/messenger.jsx","components/Contacts/contactDataVertical.jsx","components/Exam/print_exam.jsx","components/Exam/add.jsx","components/Order/index_filter.jsx","components/Order/index.jsx","components/Order/itemsOrder.jsx","components/Order/labOrder.jsx","components/Order/statusOrder.jsx","components/Order/bicelacionOrder.jsx","components/Order/garantiaOrder.jsx","components/Order/add.jsx","components/Sales/index_filter.jsx","components/Sales/index.jsx","components/Sales/abonoAdd.jsx","components/Sales/print_pay.jsx","components/Sales/abonos.jsx","components/Sales/print_sale.jsx","components/Sales/edoCuenta.jsx","components/Sales/add.jsx","components/Sales/reportPays.jsx","components/Dashboard/cash.jsx","components/Dashboard/dateUser.jsx","components/Dashboard/boxCut.jsx","components/Dashboard/index.jsx","components/Layouts/notifyAll.jsx","Routers.jsx","components/Layouts/login.jsx","index.js"],"names":["Notify","props","handleClickRead","e","id","notify","data","host","token","preventDefault","console","log","fetch","method","body","JSON","stringify","signal","headers","Accept","Authorization","then","response","a","back","status","json","ok","Error","message","success","verifyUser","error","catch","window","Swal","fire","logOut","isLogged","res","exception","username","setState","notifications","unreadNotifications","rol","state","controller","AbortController","this","abort","countNotify","length","className","data-toggle","href","map","notiFyType","type","split","title","icon","time","moment","created_at","fromNow","url","page","localStorage","setItem","contact_id","exam_id","to","key","onClick","Fragment","Component","Navtop","data-widget","role","$","toggleClass","Menu","changePage","handleLogOut","text","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","result","dismiss","value","companyName","user","active","avatar","idUser","src","alt","style","opacity","name","data-accordion","Breadcrumb","date","format","setInterval","Footer","HeaderTable","handleOrder","item","order","orderby","actions","col","index","filter","scope","cursor","Pagination","handleChangePage","meta","total","current_page","Math","ceil","per_page","toFixed","last_page","Filter","onKeyPressSearch","setFilters","onClickClean","changeFilters","modal","target","search","data-target","tabIndex","data-dismiss","aria-label","aria-hidden","placeholder","onChange","onKeyPress","ActionsTable","handleDelete","delete","edit","Users","load","toUpperCase","showLoaderOnConfirm","preConfirm","confirm","showConfirmButton","timer","getUsers","statusText","users","sdd","parse","getItem","colSpan","Object","keys","email","session","last_activity","updated_at","UserName","handleChange","x","replace","toLowerCase","test","validUser","bgColor","validate","varLocalStorage","timeFetch","clearTimeout","setTimeout","searchUser","alert","autoComplete","autoFocus","required","minLength","maxLength","pattern","validEmail","UserAdd","catchInputs","handleSave","validUserName","validUserEmail","password","history","goBack","getUser","match","params","send","onSubmit","disabled","ip_address","user_agent","user_data","Store","onchangeSearch","getItems","items","codigo","marca","producto","unidad","cantidades","precio","proveedor","nombre","lotes","ordenar","buscar","pagina","errors","StoreLote","tr","parentNode","classList","add","ls","deleteColor","clearInterval","remove","loteNew","handelGetLots","refresh","bill","cost","price","amount","lote","handleNewLote","bind","pages","i","push","width","lot","factura","costo","min","validInputs","store_items_id","InputCategory","handleChangeCategory","categoryData","parseInt","category","find","categoryName","textSelect","categoryRef","ref","cat","categoria","SuppliersInput","getSuppliers","suppliers_data","supplier","handleChangeSupplier","supplierRef","sp","InputBrand","handleChangeBrand","getBrands","brands","brandsName","brand","brandRef","string","StoreAdd","handleNameLent","grad","stringcode","category2","current","Codestring","options","selectedIndex","trim","category3","category4","toString","handleCodeLent","handleCodeString","code","setNew","codebar","brand_id","unit","cant","category_id","category_id1","category_id2","category_id3","category_id4","category_list2","category_list3","category_list4","getCategory","category_list1","codeRef","nameRef","depende_de","hijos","c_barra","graduacion","category_data","category1","React","createRef","next","codeValue","nameValue","CategoryList","handleClickDelete","category_raiz","indexCat","splice","handleClickSave","nameInput","focus","getCategoriesMain","CategoryData","undefined","categoryid","ppage","handleClickAdd","categoryDataName","categorySelect","last","input","Categories","handleChangeState","category_hijos1","category_hijos2","category_hijos3","category_hijos4","Brands","deleteBrand","indexItem","saveBrand","changeInput","Inventory","catid","handleClickCat","catData_1","catData_2","sons","catid_1","catid_2","catid_3","catData_3","getCategories","header","parseFloat","cil","rangoInf","rangoSup","row","zero","children","h","business","Contacts","getContacts","contacts","contact","rfc","tipo","telefonos","t_movil","enUso","negocio","Mapa","eventLoadMap","request","query","calle","colonia","municipio","estado","cp","fields","service","google","maps","places","PlacesService","findPlaceFromQuery","results","markers","setMap","place","marker","Marker","position","geometry","location","formatted_address","addListener","address","changeAddress","setCenter","googlePlaceAPILoad1","mapCenter","LatLng","Map","document","getElementById","center","zoom","height","GraduacionExam","checked","val","onChangeInput","readOnly","cilindrod","cilindroi","esferaod","esferaoi","ejeod","ejeoi","adiciond","adicioni","adicion_media_od","adicion_media_oi","dpod","dpoi","alturaod","alturaoi","lcmarca","lcgod","lcgoi","max","step","Recomendaciones","handleCodeName","handleClickCategory","nameCategory","category_id_2","category_id_3","category_list_2","category_list_3","handleCategoryChange","gradod","gradoi","category_list","update","ListsExams","handleSaveExam","paciente","edad","handleDataExam","exam","handleChangeInput","ChangeInput","handleClickDeleteExam","handleClickSelect","handleNewOrder","getExams","handleNewExam","client","examEdit","select","datos","utc","local","observaciones","category_ii","Date","isSame","examToday","newExam","NameInput","eraseTilde","RegExp","stringOk","contacto","validName","list","EmailInput","emailOriginal","emailContact","AddPersonal","birthday","AddDomicilio","AddTelefonos","t_casa","t_oficina","verify","ContactsAdd","domicilio","telnumbers","empresa","f_nacimiento","timeSave","AddContact","ToolsCategory","category_select","category_hijos","category_hijos_3","newItem","padre","clickSave","company","server","clickSaveUser","Exam","handleFilter","exams","order_id","fecha","easyContact","changeValue","setContac","storage","searchContact","sendAge","dataContact","getIdContact","getContact","handleClickChange","handleClickContact","word","handleSearcContact","contactInput","onBlur","GeneralesExam","aria-expanded","aria-controls","aria-labelledby","data-parent","pc","htmlFor","pc_time","tablet","tablet_time","movil","movil_time","lap","lap_time","frontal","occipital","generality","cefalea","temporaod","temporaoi","c_frecuencia","c_intensidad","InterrogatorioExam","interrogatorio","coa","rows","aopp","aopf","KeraRetExam","keratometriaod","keratometriaoi","rsod","rsoi","DiabetesExam","d_fclod","d_fcloi","d_time","d_media","d_test","d_fclod_time","d_fcloi_time","oftalmoscopia","AgudezaExam","cvod","cvoi","avslod","avsloi","avcgaod","avcgaoi","avfod","avfoi","avf2o","DiagnosticoExam","diagnostico","presbicie","piod","pioi","txoftalmico","ObservacionesExam","messenger","handleMessege","sendMessenger","table","idRow","getMessengers","messages","pagado","created_user","mensaje","contactDataVertical","printExam","ExamAdd","handleStatus","getExam","pantalleooi","pantalleood","temporal","txoptico","item1","item2","hoy","now","registro","toDay","nameItem","obj","print","setStatusString","getPedidos","pedidos","pedido","caja","laboratorio","folio_lab","examen","nota","Items","handelClickItemDb","subtotal","cantidad","inStorage","out","itemsDb","deleteItem","addItem","itemNew","handleNewItem","descripcion","inputItem","inputCant","db","maxWidth","addCancel","labOrder","supplies","lab_id","s","npedidolab","statusOrder","bicelacionOrder","ncaja","garantiaOrder","OrderAdd","getExamById","getOrder","productos","usuario","created","random","substring","showTabActive","cliente","descuento","AddAbono","handlePay","saleId","contactId","metodopago","banco","auth","onChangeValue","pay","printPay","ListAbonos","getPayments","content","pri","contentWindow","open","write","innerHTML","close","handleLoad","SetMethodPayment","sale","abonos","abono","metodo","Autorizacion","aria-disabled","folio","printSale","saldo","abonado","totalItems","fontSize","fontFamily","edoCuenta","SaleAdd","getSales","chat","ReportPay","changeState","getSaleDay","saleDay","saleUser","donutChartCanvas","get","getContext","donutOptions","maintainAspectRatio","responsive","labels","values","efectivo","donutData","char","destroy","mp","datasets","backgroundColor","Chart","Cash","deleteAtm","getAtms","sendAtm","atmDate","atmUser","atm","atms","DateUser","BoxCut","ventas","Dashboard","NotifyAll","handleClickViewNotify","read_at","Routers","handlePage","handleTitleSection","pathname","locations","dir","path","render","extric","Main","pressEnter","hostShow","showTools","handleLogin","loginFunction","App","login","hostname"],"mappings":"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","file":"static/js/main.dc368aff.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Notify extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      notifications: [],\r\n      rol: -1,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.verifyUser();\r\n  }\r\n\r\n  render() {\r\n    const { notifications, rol } = this.state,\r\n      countNotify = notifications ? notifications.length : 0;\r\n\r\n    return (\r\n      <li className=\"nav-item dropdown\">\r\n        <a className=\"nav-link\" data-toggle=\"dropdown\" href=\"#end\">\r\n          <i className=\"far fa-bell\"></i>\r\n          {countNotify ? (\r\n            <span className=\"badge badge-warning navbar-badge\">\r\n              {countNotify}\r\n            </span>\r\n          ) : null}\r\n        </a>\r\n        <div className=\"dropdown-menu dropdown-menu-lg dropdown-menu-right\">\r\n          <span className=\"dropdown-header\">{countNotify} Notificaciones</span>\r\n          <div className=\"dropdown-divider\"></div>\r\n          {notifications.map((notify) => {\r\n            const notiFyType = notify.type.split(\"\\\\\", 3);\r\n            let title = \"general\",\r\n              icon = \"fa-file\",\r\n              time = moment(notify.created_at).fromNow(),\r\n              url = \"#end\",\r\n              page = \"/\";\r\n            if (notiFyType[2] === \"ExamNotification\") {\r\n              if (rol === 2) {\r\n                title = \"Examen creado\";\r\n                url = \"/consultorio/registro/\" + notify.data.id;\r\n                page = \"/consultorio\";\r\n              } else {\r\n                title = \"Examen actualizado\";\r\n                url = \"/pedidos/registro\";\r\n                localStorage.setItem(\r\n                  \"OrusContactInUse\",\r\n                  JSON.stringify({\r\n                    id: notify.data.contact_id,\r\n                    exam_id: notify.data.id,\r\n                  })\r\n                );\r\n                page = \"/pedidos\";\r\n              }\r\n              icon = \"fa-file-alt\";\r\n            }\r\n            //console.log(\"Notify:\", notify.read_at);\r\n            return (\r\n              <Link\r\n                to={url}\r\n                className=\"dropdown-item\"\r\n                key={notify.id}\r\n                onClick={(e) => {\r\n                  this.props.page(page);\r\n                  this.handleClickRead(e, notify.id);\r\n                }}\r\n              >\r\n                <i className={\"fas \" + icon + \" mr-1\"}></i> {title}\r\n                <span className=\"float-right text-muted text-sm\">{time}</span>\r\n              </Link>\r\n            );\r\n          })}\r\n          {countNotify ? (\r\n            <React.Fragment>\r\n              <div className=\"dropdown-divider\"></div>\r\n              <a\r\n                href=\"#end\"\r\n                className=\"dropdown-item dropdown-footer\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleClickRead(e, -1);\r\n                }}\r\n              >\r\n                Marcar como leído.\r\n              </a>\r\n            </React.Fragment>\r\n          ) : null}\r\n          <Link\r\n            to=\"/notificaciones\"\r\n            className=\"dropdown-item dropdown-footer\"\r\n            onClick={(e) => {\r\n              this.props.page(\"/notificaciones\");\r\n            }}\r\n          >\r\n            Ver todas\r\n          </Link>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  handleClickRead = (e, id, notify) => {\r\n    //Constantes\r\n    const { host, token } = this.props.data;\r\n    if (id === -1) e.preventDefault();\r\n\r\n    console.log(\"Enviando datos de leidos\");\r\n    fetch(\"http://\" + host + \"/api/user/readAllNotifications\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        id,\r\n      }),\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((notify) => {\r\n        if (notify.success) {\r\n          console.log(\"Notificaciones leeidas\");\r\n          this.verifyUser();\r\n        } else {\r\n          console.error(\"Sin notificaciones\", notify);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus fetch\", e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  verifyUser = () => {\r\n    //Constantes de logueo\r\n    const { data, logOut } = this.props,\r\n      { host, isLogged, token } = data;\r\n\r\n    //Solo realizamos la verificacion si hay sesion\r\n    if (isLogged && host && token) {\r\n      console.log(\"Verificando usuario\");\r\n      //Realizando verificación de usuarios\r\n      if (token !== \"\" && host !== \"\") {\r\n        fetch(\"http://\" + host + \"/api/user\", {\r\n          method: \"GET\",\r\n          signal: this.signal,\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n        })\r\n          .then((res) => {\r\n            if (!res.ok && token !== \"\") {\r\n              console.error(\"Usuario invalido:\", res);\r\n            }\r\n            return res.json();\r\n          })\r\n          .then((data) => {\r\n            if (data.exception || data.message) {\r\n              logOut();\r\n            } else {\r\n              console.log(\"Usuario validado: \", data.data.username);\r\n              this.setState({\r\n                notifications: data.data ? data.data.unreadNotifications : [],\r\n                rol: data.data.rol,\r\n              });\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      console.error(\"La sesion ya no esta activa o se perdio el host\");\r\n      logOut();\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Notify from \"./notify\";\r\n\r\nexport default class Navtop extends Component {\r\n  render() {\r\n    const { logOut, data, page } = this.props;\r\n    return (\r\n      <nav className=\"main-header navbar navbar-expand navbar-dark navbar-lightblue\">\r\n        <ul className=\"navbar-nav\">\r\n          <li className=\"nav-item\">\r\n            <a\r\n              className=\"nav-link\"\r\n              data-widget=\"pushmenu\"\r\n              href=\"#end\"\r\n              role=\"button\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                window.$(\"#body\").toggleClass(\"sidebar-open\");\r\n                window.$(\"#body\").toggleClass(\"sidebar-collapse\");\r\n              }}\r\n            >\r\n              <i className=\"fas fa-bars\"></i>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n        <ul className=\"navbar-nav ml-auto\">\r\n          <li className=\"nav-item dropdown\">\r\n            <a href=\"#end\" className=\"nav-link\" data-toggle=\"dropdown\">\r\n              <i className=\"far fa-comments\"></i>\r\n            </a>\r\n            <div className=\"dropdown-menu dropdown-menu-lg dropdown-menu-right\">\r\n              <span className=\"dropdown-header\">Sin comentarios</span>\r\n              <div className=\"dropdown-divider\"></div>\r\n            </div>\r\n          </li>\r\n          <Notify logOut={logOut} data={data} page={page} />\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Menu extends Component {\r\n  render() {\r\n    const { companyName, user, active } = this.props;\r\n    let avatar = \"/img/avatars/avatar5.png\";\r\n    if (user.rol === 1) avatar = \"/img/avatars/avatar2.png\";\r\n    if (!user.rol) avatar = \"/img/avatars/avatar3.png\";\r\n    if (user.idUser === 2) avatar = \"/img/avatars/avatar4.png\";\r\n\r\n    return (\r\n      <aside className=\"main-sidebar sidebar-dark-primary\">\r\n        <Link\r\n          to=\"/\"\r\n          className=\"brand-link\"\r\n          onClick={(e) => {\r\n            this.changePage(\"/\");\r\n          }}\r\n        >\r\n          <img\r\n            src=\"/img/AdminLTELogo.png\"\r\n            alt={companyName + \" logo \"}\r\n            className=\"brand-image img-circle elevation-3\"\r\n            style={{ opacity: 0.8 }}\r\n          />\r\n          <span className=\"brand-text font-weight-light text-uppercase\">\r\n            {companyName}\r\n          </span>\r\n        </Link>\r\n        <div className=\"sidebar\">\r\n          <div className=\"user-panel mt-3 pb-3 mb-3 d-flex\">\r\n            <div className=\"image\">\r\n              <img\r\n                src={avatar}\r\n                className=\"img-circle elevation-2\"\r\n                alt={user.name}\r\n              />\r\n            </div>\r\n            <div className=\"info\">\r\n              <a href=\"#end\" className=\"d-block text-capitalize\">\r\n                {user.name}\r\n                <small className=\"text-lowercase\">({user.username})</small>\r\n                <br />\r\n                <span className=\"badge badge-light\">\r\n                  {user.rol > 0\r\n                    ? user.rol === 1\r\n                      ? \"Ventas\"\r\n                      : \"Optometrista\"\r\n                    : \"Administrador\"}\r\n                </span>\r\n              </a>\r\n            </div>\r\n          </div>\r\n          <nav className=\"mt-2\">\r\n            <ul\r\n              className=\"nav nav-pills nav-sidebar flex-column\"\r\n              data-widget=\"treeview\"\r\n              role=\"menu\"\r\n              data-accordion=\"false\"\r\n            >\r\n              {user.rol !== 2 ? (\r\n                <li className=\"nav-item\">\r\n                  <Link\r\n                    to=\"/\"\r\n                    className={\r\n                      active === \"dashboard\" ? \"nav-link active\" : \"nav-link\"\r\n                    }\r\n                    onClick={(e) => {\r\n                      this.changePage(\"/\");\r\n                    }}\r\n                  >\r\n                    <i className=\"nav-icon fas fa-tachometer-alt\"></i>\r\n                    <p>\r\n                      Dashboard\r\n                      <i className=\"right fas fa-angle-left\"></i>\r\n                    </p>\r\n                  </Link>\r\n                </li>\r\n              ) : null}\r\n              <li className=\"nav-item\">\r\n                <Link\r\n                  to=\"/contactos\"\r\n                  className={\r\n                    active === \"contactos\" ? \"nav-link active\" : \"nav-link\"\r\n                  }\r\n                  onClick={(e) => {\r\n                    this.changePage(\"/contactos\");\r\n                  }}\r\n                >\r\n                  <i className=\"nav-icon fas fa-address-book\"></i>\r\n                  <p>\r\n                    Contactos\r\n                    <i className=\"right fas fa-angle-left\"></i>\r\n                  </p>\r\n                </Link>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <Link\r\n                  to=\"/consultorio\"\r\n                  className={\r\n                    active === \"consultorio\" ? \"nav-link active\" : \"nav-link\"\r\n                  }\r\n                  onClick={(e) => {\r\n                    this.changePage(\"/consultorio\");\r\n                  }}\r\n                >\r\n                  <i className=\"nav-icon fas fa-notes-medical\"></i>\r\n                  <p>\r\n                    Examenes\r\n                    <i className=\"right fas fa-angle-left\"></i>\r\n                  </p>\r\n                </Link>\r\n              </li>\r\n\r\n              {user.rol <= 1 ? (\r\n                <React.Fragment>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/pedidos\"\r\n                      className={\r\n                        active === \"pedidos\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/pedidos\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-clipboard-list\"></i>\r\n                      <p>\r\n                        Pedidos\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/notas\"\r\n                      className={\r\n                        active === \"notas\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/notas\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-cash-register\"></i>\r\n                      <p>\r\n                        Ventas\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                </React.Fragment>\r\n              ) : null}\r\n\r\n              {!user.rol ? (\r\n                <React.Fragment>\r\n                  <li\r\n                    className={\r\n                      active === \"almacen\"\r\n                        ? \"nav-item has-treeview menu-open\"\r\n                        : \"nav-item has-treeview \"\r\n                    }\r\n                  >\r\n                    <a\r\n                      href=\"#a!\"\r\n                      className={\r\n                        active === \"almacen\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        this.changePage(\"/almacen\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-database\"></i>\r\n                      <p>\r\n                        Almacen\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </a>\r\n                    <ul className=\"nav nav-treeview\">\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Productos</p>\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen/categorias\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen/categorias\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Categorias</p>\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen/marcas\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen/marcas\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Marcas</p>\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          to=\"/almacen/inventario\"\r\n                          className=\"nav-link\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/almacen/marcas\");\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-angle-right nav-icon\"></i>\r\n                          <p>Inventario</p>\r\n                        </Link>\r\n                      </li>\r\n                    </ul>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/usuarios\"\r\n                      className={\r\n                        active === \"usuarios\" ? \"nav-link active\" : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/usuarios\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-user\"></i>\r\n                      <p>\r\n                        Usuarios\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      to=\"/configuraciones\"\r\n                      className={\r\n                        active === \"configuraciones\"\r\n                          ? \"nav-link active\"\r\n                          : \"nav-link\"\r\n                      }\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/configuraciones\");\r\n                      }}\r\n                    >\r\n                      <i className=\"nav-icon fas fa-tools\"></i>\r\n                      <p>\r\n                        Configuraciones\r\n                        <i className=\"right fas fa-angle-left\"></i>\r\n                      </p>\r\n                    </Link>\r\n                  </li>\r\n                </React.Fragment>\r\n              ) : null}\r\n\r\n              <li className=\"nav-item\">\r\n                <Link to=\"/\" className=\"nav-link\" onClick={this.handleLogOut}>\r\n                  <i className=\"nav-icon fas fa-sign-out-alt\"></i>\r\n                  <p>Cerrar sesion</p>\r\n                </Link>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n        </div>\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n\r\n  handleLogOut = (e) => {\r\n    e.preventDefault();\r\n    window.Swal.fire({\r\n      title: \"Session\",\r\n      text: \"¿Esta seguro de cerrar la sesion?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Si\",\r\n      cancelButtonText: \"Cancelar\",\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        this.props.logOut();\r\n        this.changePage(\"/\");\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport default Menu;\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class Breadcrumb extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: moment().format(\"LLLL\"),\r\n    };\r\n    setInterval(() => {\r\n      console.log(\"Actualizando hora de sistema\");\r\n      this.setState({\r\n        date: moment().format(\"LLLL\"),\r\n      });\r\n    }, 60000);\r\n  }\r\n\r\n  render() {\r\n    const { title } = this.props;\r\n    const { date } = this.state;\r\n    return (\r\n      <div className=\"content-header\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <div className=\"col-6\">\r\n              <h1 className=\"m-0 text-dark text-capitalize\">{title}</h1>\r\n            </div>\r\n            <div className=\"col\">\r\n              <h6 className=\"text-dark text-right\">{date}</h6>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nclass Footer extends Component {\r\n  render() {\r\n    return (\r\n      <footer className=\"main-footer d-print-none\">\r\n        <div className=\"float-right d-none d-sm-inline\">V2.0</div>\r\n        <strong>\r\n          Copyright &copy; 2015-2020 <a href=\"#end\">Orus</a>.\r\n        </strong>{\" \"}\r\n        Todos los derechos reservados.\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Footer;\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class HeaderTable extends Component {\r\n  render() {\r\n    let { data, order, orderby, actions } = this.props;\r\n\r\n    if (data.length) {\r\n      return (\r\n        <thead className=\"thead-light\">\r\n          <tr>\r\n            {data.map((col, index) => {\r\n              if (col.filter) {\r\n                return (\r\n                  <th\r\n                    scope=\"col\"\r\n                    key={index}\r\n                    onClick={() => {\r\n                      this.handleOrder(col.type);\r\n                    }}\r\n                    style={{\r\n                      cursor: order === \"desc\" ? \"n-resize\" : \"s-resize\",\r\n                    }}\r\n                  >\r\n                    {col.name}\r\n                    {orderby === col.type ? (\r\n                      <span className=\"ml-2\">\r\n                        <i className=\"fas fa-sort text-primary\"></i>\r\n                      </span>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </th>\r\n                );\r\n              } else {\r\n                return (\r\n                  <th scope=\"col\" key={index}>\r\n                    {col.name}\r\n                  </th>\r\n                );\r\n              }\r\n            })}\r\n            {actions ? <th className=\"text-center\">Acciones</th> : \"\"}\r\n          </tr>\r\n        </thead>\r\n      );\r\n    } else {\r\n      return (\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\" className=\"text-center\">\r\n              No hay datos de columnas\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleOrder = (item) => {\r\n    this.props.handleOrder(item);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Pagination extends Component {\r\n  render() {\r\n    let { meta } = this.props;\r\n    if (meta.total > 10) {\r\n      return (\r\n        <div className=\"btn-group\">\r\n          <ul className=\"pagination pagination-sm\">\r\n            <li\r\n              className={\r\n                meta.current_page === 1 ? \"page-item disabled\" : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === 1\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(1);\r\n                }}\r\n              >\r\n                Primero\r\n              </a>\r\n            </li>\r\n\r\n            <li\r\n              className={\r\n                meta.current_page === 1 ? \"page-item disabled\" : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === 1\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(meta.current_page - 1);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-step-backward\"></i>\r\n              </a>\r\n            </li>\r\n\r\n            <li className=\"page-item\">\r\n              <span className=\"page-link\">\r\n                {meta.current_page} /{\" \"}\r\n                {Math.ceil(meta.total / meta.per_page).toFixed(0)}\r\n              </span>\r\n            </li>\r\n\r\n            <li\r\n              className={\r\n                meta.current_page === meta.last_page\r\n                  ? \"page-item disabled\"\r\n                  : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === meta.last_page\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(meta.current_page + 1);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-step-forward\"></i>\r\n              </a>\r\n            </li>\r\n\r\n            <li\r\n              className={\r\n                meta.current_page === meta.last_page\r\n                  ? \"page-item disabled\"\r\n                  : \"page-item\"\r\n              }\r\n            >\r\n              <a\r\n                className={\r\n                  meta.current_page === meta.last_page\r\n                    ? \"page-link text-dark\"\r\n                    : \"page-link text-primary\"\r\n                }\r\n                href=\"#pageBefore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  this.handleChangePage(meta.last_page);\r\n                }}\r\n              >\r\n                Ultimo\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      );\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  handleChangePage = (page) => {\r\n    this.props.handleChangePage(page);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, rol } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: nombre, usuario o email\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Rol</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"rol\"\r\n                    value={rol}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Administrador</option>\r\n                    <option value=\"1\">Ventas</option>\r\n                    <option value=\"2\">Optometrista</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      this.props.search || this.props.rol\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"rol\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class ActionsTable extends Component {\r\n  render() {\r\n    const { item, edit, id } = this.props;\r\n    return (\r\n      <td className=\"text-right\">\r\n        {this.props.delete ? (\r\n          <a\r\n            className=\"btn-flat text-dark mr-4\"\r\n            href=\"#delete\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              this.handleDelete(id, item);\r\n            }}\r\n          >\r\n            <i className=\"fas fa-trash\"></i>\r\n          </a>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {edit ? (\r\n          <Link className=\"btn-flat text-dark\" to={edit + id}>\r\n            <i className=\"fas fa-pencil-alt\"></i>\r\n          </Link>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </td>\r\n    );\r\n  }\r\n\r\n  handleDelete = (id, item) => {\r\n    this.props.delete(id, item);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Filters from \"./index_filter\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Users extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusUsers\"));\r\n    this.state = {\r\n      users: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"asc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      rol: sdd ? sdd.rol : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getUsers();\r\n    localStorage.setItem(\r\n      \"OrusUsers\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        rol: this.state.rol,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando usuarios y almacenando configuracion\");\r\n      localStorage.setItem(\r\n        \"OrusUsers\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          rol: this.state.rol,\r\n        })\r\n      );\r\n      this.getUsers();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { users, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"usuario\", type: \"username\", filter: true },\r\n        { name: \"nombre\", type: \"name\", filter: true },\r\n        { name: \"e-mail\", type: \"email\", filter: true },\r\n        { name: \"Rol\", type: \"rol\", filter: true },\r\n        { name: \"Actividad\", type: \"session\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-header\">\r\n          <h2 className=\"card-title text-primary\">\r\n            <i className=\"fas fa-user mr-1\"></i>\r\n            Usuarios registrados\r\n          </h2>\r\n          <div className=\"card-tools\">\r\n            <Filters\r\n              search={this.state.search}\r\n              rol={this.state.rol}\r\n              changeFilters={this.changeFilters}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={users.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"9\" className=\"alert alert-light text-center p-4\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(users.data).length ? (\r\n                users.data.map((user) => {\r\n                  return (\r\n                    <tr key={user.id}>\r\n                      <th scope=\"row\">\r\n                        <span className=\"text-capitalize text-primary\">\r\n                          {user.username}\r\n                        </span>\r\n                      </th>\r\n                      <td>\r\n                        <Link to={\"/usuarios/registro/\" + user.id}>\r\n                          <span className=\"badge badge-primary text-capitalize p-1\">\r\n                            {user.name}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td>{user.email}</td>\r\n                      <td>\r\n                        {user.rol > 0 ? (\r\n                          user.rol === 1 ? (\r\n                            <span className=\"text-capitalize text-success\">\r\n                              <i className=\"fas fa-user-tag mr-2\"></i>\r\n                              Ventas\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"text-capitalize text-primary\">\r\n                              <i className=\"fas fa-user-tie mr-2\"></i>\r\n                              Optometrista\r\n                            </span>\r\n                          )\r\n                        ) : (\r\n                          <span className=\"text-capitalize text-danger\">\r\n                            <i className=\"fas fa-user-shield mr-2\"></i>\r\n                            Administrador\r\n                          </span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {user.session\r\n                          ? moment(user.session.last_activity).fromNow()\r\n                          : \"--\"}\r\n                      </td>\r\n                      <td>{moment(user.updated_at).fromNow()}</td>\r\n                      <td className=\"text-right\">\r\n                        {moment(user.created_at).format(\"ll\")}\r\n                      </td>\r\n                      <Actions\r\n                        id={user.id}\r\n                        item={user.username}\r\n                        delete={this.handleDelete}\r\n                        edit={\"/usuarios/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"8\" className=\"alert alert-info text-center\">\r\n                    <i className=\"fas fa-info mr-2\"></i>\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/usuarios/registro\"\r\n            className=\"btn btn-outline-primary btn-lg\"\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            Nuevo usuario\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeFilters = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (page) => {\r\n    this.setState({\r\n      page,\r\n      load: true,\r\n    });\r\n  };\r\n  handleDelete = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el usuario \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de usuario por API\");\r\n          return fetch(\"http://\" + host + \"/api/users/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Usuario eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Usuario eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getUsers());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getUsers = () => {\r\n    let { load, host, token } = this.state,\r\n      url = \"http://\" + host + \"/api/users\",\r\n      orderby = `&orderby=${this.state.orderby}&order=${this.state.order}`,\r\n      search = this.state.search ? `&search=${this.state.search}` : \"\",\r\n      rol = this.state.rol.length > 0 ? `&rol=${this.state.rol}` : \"\",\r\n      page = this.state.page > 0 ? \"?page=\" + this.state.page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de los usuarios\r\n    console.log(\"Solicitando usuarios a la API\");\r\n    fetch(url + page + orderby + search + rol, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Descargando usuarios\");\r\n          this.setState({\r\n            users: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar usuarios\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class UserName extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: \"bg-blue\",\r\n      validate: \"\",\r\n      text: \"Debe de tener al menos 4 caracteres.\",\r\n      searchUser: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { col, username } = this.props;\r\n    let { bgColor, validate, text, searchUser } = this.state;\r\n\r\n    return (\r\n      <div className={\"col-\" + col}>\r\n        {username.length ? (\r\n          <small>\r\n            <label>Usuario</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              {searchUser ? (\r\n                <i className=\"fas fa-spinner\"></i>\r\n              ) : (\r\n                <i className=\"fas fa-user-check\"></i>\r\n              )}\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className={\"form-control\" + validate}\r\n            placeholder=\"Usuario\"\r\n            name=\"username\"\r\n            autoComplete=\"off\"\r\n            autoFocus=\"autofocus\"\r\n            value={username}\r\n            onChange={this.handleChange}\r\n            required=\"required\"\r\n            minLength=\"4\"\r\n            maxLength=\"16\"\r\n            pattern=\"^[\\w]{4,16}$\"\r\n          />\r\n        </div>\r\n        {validate ? <small className=\"text-muted\">{text}</small> : \"\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    let regex = /^[\\w]{4,16}$/,\r\n      x = {\r\n        target: {\r\n          name: \"validUserName\",\r\n          value: \"\",\r\n        },\r\n      };\r\n    e.target.value = value.replace(/ /g, \"\").toLowerCase();\r\n\r\n    if (regex.test(value)) {\r\n      this.validUser(e.target.value, x);\r\n    } else {\r\n      if (value.length > 4) {\r\n        this.setState({\r\n          bgColor: \"bg-red\",\r\n          validate: \" border border-danger\",\r\n          text: \"No tiene el formato de usuario\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      } else if (!value.length) {\r\n        this.setState({\r\n          bgColor: \"bg-blue\",\r\n          validate: \" border border-danger\",\r\n          text: \"Debe de tener de 4 a 16 caracteres alfanumericos.\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      }\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validUser = (name, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/users\",\r\n      username = \"?username=\" + name;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de los usuarios\r\n      this.setState({\r\n        searchUser: true,\r\n      });\r\n      fetch(url + username, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            if (\r\n              data.data.length &&\r\n              data.data[0].username.toLowerCase() === name\r\n            ) {\r\n              this.setState({\r\n                bgColor: \"bg-red\",\r\n                validate: \" border border-danger\",\r\n                text: \"El usuario ya esta registrado.\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = false;\r\n              this.props.onChange(x);\r\n            } else {\r\n              this.setState({\r\n                bgColor: \"bg-blue\",\r\n                validate: \"\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = true;\r\n              this.props.onChange(x);\r\n            }\r\n          } else {\r\n            console.error(\"Error en la descarga de usuarios\", data.message);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class UserName extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: \"bg-blue\",\r\n      validate: \"\",\r\n      text: \"No tiene el formato de un email\",\r\n      searchUser: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { col, email } = this.props;\r\n    let { bgColor, validate, text } = this.state;\r\n\r\n    return (\r\n      <div className={\"col-\" + col}>\r\n        {email.length ? (\r\n          <small>\r\n            <label>Usuario</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              <i className=\"fas fa-at\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"email\"\r\n            className={\"form-control\" + validate}\r\n            placeholder=\"email\"\r\n            name=\"email\"\r\n            autoComplete=\"off\"\r\n            value={email}\r\n            onChange={this.handleChange}\r\n            required=\"required\"\r\n          />\r\n        </div>\r\n        {validate ? <small className=\"text-muted\">{text}</small> : \"\"}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    let regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n      x = {\r\n        target: {\r\n          name: \"validUserEmail\",\r\n          value: true,\r\n        },\r\n      };\r\n    e.target.value = value.replace(/\\s/g, \"\").toLowerCase();\r\n    if (regex.test(value)) {\r\n      this.validEmail(e.target.value, x);\r\n    } else {\r\n      if (value.length > 8) {\r\n        this.setState({\r\n          bgColor: \"bg-red\",\r\n          validate: \" border border-danger\",\r\n          text: \"No tiene el formato de un email\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      } else if (!value.length) {\r\n        this.setState({\r\n          bgColor: \"bg-blue\",\r\n          validate: \"\",\r\n          text: \"No tiene el formato de un email\",\r\n        });\r\n        x.target.value = false;\r\n        this.props.onChange(x);\r\n      }\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validEmail = (search, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/users\",\r\n      email = \"?email=\" + search;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de los usuarios\r\n      this.setState({\r\n        searchUser: true,\r\n      });\r\n      //Realiza la peticion de los usuarios\r\n      fetch(url + email, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            if (\r\n              data.data.length &&\r\n              data.data[0].email.toLowerCase() === search\r\n            ) {\r\n              this.setState({\r\n                bgColor: \"bg-red\",\r\n                validate: \" border border-danger\",\r\n                text: \"El email ya esta registrado.\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = false;\r\n              this.props.onChange(x);\r\n            } else {\r\n              this.setState({\r\n                bgColor: \"bg-blue\",\r\n                validate: \"\",\r\n                searchUser: false,\r\n              });\r\n              x.target.value = true;\r\n              this.props.onChange(x);\r\n            }\r\n          } else {\r\n            console.error(\"Error en la descarga de usuarios\", data.message);\r\n            this.setState({\r\n              bgColor: \"bg-red\",\r\n              validate: \" border border-danger\",\r\n              text: \"Error en la consulta\",\r\n              searchUser: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport UserName from \"./userNameInput\";\r\nimport UserEmail from \"./userEmailInput\";\r\n\r\nexport default class UserAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      rol: 1,\r\n      username: \"\",\r\n      validUserName: false,\r\n      name: \"\",\r\n      email: \"\",\r\n      validUserEmail: false,\r\n      password: \"\",\r\n      updated_at: \"\",\r\n      created_at: \"\",\r\n      session: {},\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    let id = this.props.match.params.id;\r\n    if (id) {\r\n      this.getUser(id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let {\r\n        load,\r\n        id,\r\n        rol,\r\n        username,\r\n        name,\r\n        email,\r\n        password,\r\n        updated_at,\r\n        created_at,\r\n        session,\r\n        validUserName,\r\n        validUserEmail,\r\n      } = this.state,\r\n      send =\r\n        !load && validUserName && name.length && validUserEmail ? false : true;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <form\r\n            className=\"card card-primary card-outline\"\r\n            onSubmit={this.handleSave}\r\n          >\r\n            <div className=\"card-header\">\r\n              <h1 className=\"card-title text-primary\">\r\n                <i className=\"fas fa-user mr-2\"></i>\r\n                {id ? \"Editar usuario\" : \"Registrar nuevo usuario\"}\r\n              </h1>\r\n            </div>\r\n            <div className=\"card-body was-validated\">\r\n              {load ? (\r\n                <div className=\"alert alert-light text-center p-4\">\r\n                  <div className=\"spinner-border text-primary\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <React.Fragment>\r\n                  <div className=\"row mb-3\">\r\n                    <UserName\r\n                      username={username}\r\n                      col={6}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                    <div className=\"col-6\">\r\n                      {name.length ? (\r\n                        <small>\r\n                          <label>Nombre completo</label>\r\n                        </small>\r\n                      ) : (\r\n                        <br />\r\n                      )}\r\n                      <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                          <span className=\"input-group-text bg-blue\">\r\n                            <i className=\"fas fa-user-tag\"></i>\r\n                          </span>\r\n                        </div>\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control text-capitalize\"\r\n                          placeholder=\"Nombre completo\"\r\n                          name=\"name\"\r\n                          autoComplete=\"off\"\r\n                          value={name}\r\n                          onChange={this.catchInputs}\r\n                          required=\"required\"\r\n                          minLength=\"8\"\r\n                          pattern=\"^[a-zA-Z]{2,20}[\\s]{1}[a-zA-Z]{2,20}.*\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                      {password.length || id ? (\r\n                        <small>\r\n                          <label>Contraseña</label>\r\n                          {id ? (\r\n                            \"\"\r\n                          ) : (\r\n                            <span className=\"ml-2\">\r\n                              De 8 a 16 caracteres, por lo menos una mayuscula,\r\n                              un numero y un caracter especial\r\n                            </span>\r\n                          )}\r\n                        </small>\r\n                      ) : (\r\n                        <br />\r\n                      )}\r\n                      <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                          <span className=\"input-group-text bg-blue\">\r\n                            <i className=\"fas fa-lock\"></i>\r\n                          </span>\r\n                        </div>\r\n                        <input\r\n                          type=\"password\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Contraseña\"\r\n                          name=\"password\"\r\n                          autoComplete=\"off\"\r\n                          value={password}\r\n                          onChange={this.catchInputs}\r\n                          required={id ? false : true}\r\n                          minLength=\"8\"\r\n                          maxLength=\"16\"\r\n                          pattern=\"^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <UserEmail\r\n                      email={email}\r\n                      col={6}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                      <small>\r\n                        <label>Rol</label>\r\n                      </small>\r\n                      <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                          <span className=\"input-group-text bg-blue\">\r\n                            <i className=\"fas fa-id-card\"></i>\r\n                          </span>\r\n                        </div>\r\n                        <select\r\n                          className=\"custom-select\"\r\n                          name=\"rol\"\r\n                          value={rol}\r\n                          onChange={this.catchInputs}\r\n                        >\r\n                          <option value=\"0\">Administrador</option>\r\n                          <option value=\"1\">Ventas</option>\r\n                          <option value=\"2\">Optometrista</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </React.Fragment>\r\n              )}\r\n            </div>\r\n            <div className=\"card-footer\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12 text-right\">\r\n                  <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                    <Link\r\n                      to=\"/usuarios\"\r\n                      className=\"btn btn-dark\"\r\n                      onClick={this.changePage}\r\n                      id=\"/usuarios\"\r\n                    >\r\n                      <i className=\"fas fa-ban mr-1\"></i>\r\n                      Cancelar\r\n                    </Link>\r\n                    <button\r\n                      type=\"submit\"\r\n                      className={\r\n                        load ? \"btn btn-primary disabled\" : \"btn btn-primary\"\r\n                      }\r\n                      disabled={send ? true : false}\r\n                    >\r\n                      <i className=\"fas fa-save mr-1\"></i>\r\n                      Guardar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        {id ? (\r\n          <div className=\"col\">\r\n            <div className=\"card card-primary card-outline\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title text-primary\">\r\n                  <i className=\"fas fa-database mr-2\"></i>\r\n                  Metadata\r\n                </h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                {session ? (\r\n                  <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                      <h6>Datos del usuario</h6>\r\n                      <div className=\"row\">\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">Registrado</span>\r\n                          <p>{moment(created_at).fromNow()}</p>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">\r\n                            Ultima actualizacion\r\n                          </span>\r\n                          <p>{moment(updated_at).fromNow()}</p>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                      <h6>Actividad</h6>\r\n                      <div className=\"row\">\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">IP</span>\r\n                          <p>{session.ip_address}</p>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <span className=\"text-primary\">Ultima actividad</span>\r\n                          <p>{moment(session.last_activity).fromNow()}</p>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                      <span className=\"text-primary\">Navegador y OS</span>\r\n                      <p>{session.user_agent}</p>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                      <span className=\"text-primary\">Token</span>\r\n                      <p>{session.user_data}</p>\r\n                    </li>\r\n                  </ul>\r\n                ) : (\r\n                  <p>Usuario no ha registrado actividad.</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changePage = (e) => {\r\n    this.props.page(e.target.id);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n\r\n    let { id, validUserName, validUserEmail } = this.state;\r\n\r\n    //Verificamos campos validos\r\n    if (!validUserName) {\r\n      window.Swal.fire({\r\n        icon: \"error\",\r\n        title: \"El nombre de usuario ya esta en uso\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n      return false;\r\n    }\r\n    if (!validUserEmail) {\r\n      window.Swal.fire({\r\n        icon: \"error\",\r\n        title: \"El correo ya esta en uso\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el usuario?\"\r\n        : \"¿Esta seguro de crear un nuevo usuario?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let {\r\n              host,\r\n              token,\r\n              id,\r\n              name,\r\n              username,\r\n              rol,\r\n              password,\r\n              email,\r\n            } = this.state,\r\n            body = {\r\n              name,\r\n              username,\r\n              rol,\r\n              email,\r\n            },\r\n            url = id\r\n              ? \"http://\" + host + \"/api/users/\" + id\r\n              : \"http://\" + host + \"/api/users\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n\r\n          //Agregamos el password si no esta vacio\r\n          if (password.length > 8) body.password = password;\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del usuario a API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Usuario almacenado\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Usuario actualizado con exito\"\r\n              : \"Usuario almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => this.props.history.goBack());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el usuario\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getUser = (id) => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state;\r\n    if (id > 0) {\r\n      fetch(\"http://\" + host + \"/api/users/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.data) {\r\n            console.log(\"Cargando datos de usuario\");\r\n            this.setState({\r\n              id: data.data.id,\r\n              rol: data.data.rol,\r\n              username: data.data.username,\r\n              name: data.data.name,\r\n              email: data.data.email,\r\n              updated_at: data.data.updated_at,\r\n              created_at: data.data.created_at,\r\n              session: data.data.session,\r\n              load: false,\r\n              validUserName: true,\r\n              validUserEmail: true,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\r\n              \"Error\",\r\n              \"Error en el sistema, comuniquese con el administrador de sistema\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: codigo o producto\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Store extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusStore\"));\r\n    this.state = {\r\n      items: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"desc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getItems();\r\n    localStorage.setItem(\r\n      \"OrusStore\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando productos\");\r\n      this.getItems();\r\n      localStorage.setItem(\r\n        \"OrusStore\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { items, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Codigo\" },\r\n        { name: \"Marca\", type: \"brand\", filter: true },\r\n        { name: \"Producto\", type: \"name\", filter: true },\r\n        { name: \"PS\" },\r\n        { name: \"UND\" },\r\n        { name: \"Precio\", type: \"price\", filter: true },\r\n        { name: \"Proveedor\", type: \"contact_id \", filter: true },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-primary\">\r\n            <i className=\"fas fa-database mr-1\"></i>\r\n            Productos en almacen\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/almacen/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={this.changePage}\r\n              id=\"/almacen/registro\"\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={this.state.search}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={items.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center\">\r\n                    <span className=\"text-primary\">Cargando productos</span>\r\n                    <div\r\n                      className=\"spinner-border text-primary ml-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(items.data).length ? (\r\n                items.data.map((item) => {\r\n                  return (\r\n                    <tr key={item.id}>\r\n                      <td>\r\n                        <span className=\"text-primary text-uppercase\">\r\n                          {item.codigo}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {item.marca !== null ? item.marca.marca : \"--\"}\r\n                      </td>\r\n                      <td>\r\n                        <Link to={\"/almacen/registro/\" + item.id}>\r\n                          <span className=\"badge badge-primary text-capitalize p-1\">\r\n                            {item.producto}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-right\">{item.unidad}</td>\r\n                      <td>\r\n                        <span\r\n                          className={\r\n                            item.cantidades > 0 ? \"text-success\" : \"text-danger\"\r\n                          }\r\n                        >\r\n                          {item.cantidades > 0 ? item.cantidades : 0}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-right\">$ {item.precio.toFixed(2)}</td>\r\n                      <td className=\"text-capitalize\">\r\n                        {item.proveedor !== null\r\n                          ? item.proveedor.nombre.split(\" \").length\r\n                            ? item.proveedor.nombre.split(\" \")[0]\r\n                            : item.proveedor.nombre\r\n                          : \"--\"}\r\n                      </td>\r\n                      <td className=\"text-capitalize\">\r\n                        {moment(item.updated_at).fromNow()}\r\n                      </td>\r\n                      <td className=\"text-capitalize\">\r\n                        {moment(item.created_at).format(\"LL\")}\r\n                      </td>\r\n                      <Actions\r\n                        id={item.id}\r\n                        item={item.producto}\r\n                        delete={\r\n                          item.lotes || item.cantidades\r\n                            ? null\r\n                            : this.handleDelete\r\n                        }\r\n                        edit={\"/almacen/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"btn-group\" role=\"group\">\r\n                <Link\r\n                  to=\"/almacen/registro\"\r\n                  className=\"btn btn-outline-primary\"\r\n                  onClick={this.changePage}\r\n                  id=\"/almacen/registro\"\r\n                >\r\n                  <i className=\"fas fa-plus mr-1\"></i>\r\n                  Nuevo producto\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e.target.id);\r\n  };\r\n  handleDelete = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el producto \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de producto por API\");\r\n          return fetch(\"http://\" + host + \"/api/store/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Producto eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Producto eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getItems());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getItems() {\r\n    //Variables\r\n    const { load, orderby, order, search, page, host, token } = this.state,\r\n      url = \"http://\" + host + \"/api/store\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search.replace(\"+\", \"%2b\")}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de los contactos\r\n    console.log(\"Descargando productos de API\");\r\n    fetch(url + pagina + ordenar + buscar, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenando productos\");\r\n          this.setState({\r\n            items: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message, data.errors);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nclass StoreLote extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      bill: \"\",\r\n      cost: 0,\r\n      price: this.props.price,\r\n      amount: 0,\r\n      lote: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      loteNew: false,\r\n      load: true,\r\n      page: 1,\r\n    };\r\n    this.handleNewLote = this.handleNewLote.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.catchInputs = this.catchInputs.bind(this);\r\n    this.handelGetLots = this.handelGetLots.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.handelGetLots(this.state.page);\r\n  }\r\n\r\n  render() {\r\n    let { lote, load } = this.state,\r\n      pages = [];\r\n    if (this.state.lote.meta.total > 10) {\r\n      for (var i = 1; i <= this.state.lote.meta.last_page; i++) {\r\n        pages.push(\r\n          <li\r\n            key={i}\r\n            className={\r\n              this.state.lote.meta.current_page === i\r\n                ? \"page-item disabled\"\r\n                : \"page-item\"\r\n            }\r\n          >\r\n            <a\r\n              href=\"#e\"\r\n              id={i}\r\n              className=\"page-link\"\r\n              onClick={this.handleChangePage.bind(this)}\r\n            >\r\n              {i}\r\n            </a>\r\n          </li>\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-primary\">\r\n            <i className=\"fas fa-list\"></i>\r\n            Listado de lotes\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            {this.state.lote.meta.total > 10 ? (\r\n              <div className=\"btn-group\">\r\n                <ul className=\"pagination pagination-sm\">{pages}</ul>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-hover table-nowrap\">\r\n            <thead>\r\n              <tr>\r\n                <th>Registrado</th>\r\n                <th style={{ width: 140 }}>Factura</th>\r\n                <th className=\"text-right\" style={{ width: 90 }}>\r\n                  Unidades\r\n                </th>\r\n                <th className=\"text-right\" style={{ width: 110 }}>\r\n                  Costo\r\n                </th>\r\n                <th className=\"text-right\" style={{ width: 110 }}>\r\n                  Precio\r\n                </th>\r\n                <th>Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"6\" className=\"text-center\">\r\n                    <span className=\"text-primary mr-4\">Cargando lotes</span>\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(lote.data).length ? (\r\n                lote.data.map((lot) => {\r\n                  return (\r\n                    <tr key={lot.id}>\r\n                      <td>{lot.created_at}</td>\r\n                      <td className=\"text-uppercase\">\r\n                        {lot.factura ? lot.factura : \"XXXX\"}\r\n                      </td>\r\n                      <td className=\"text-right\">{lot.cantidades}</td>\r\n                      <td className=\"text-right\">\r\n                        $ {lot.costo ? lot.costo : 0}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {lot.precio ? lot.precio : 0}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        <a\r\n                          className=\"btn-flat text-dark\"\r\n                          href=\"#delete\"\r\n                          onClick={(e) => {\r\n                            this.handleDelete(e, lot.id, lot.factura);\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-trash\"></i>\r\n                        </a>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"6\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n              {this.state.loteNew ? (\r\n                <tr>\r\n                  <th>Nuevo</th>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-uppercase\"\r\n                      type=\"text\"\r\n                      name=\"bill\"\r\n                      value={this.state.bill}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-right\"\r\n                      type=\"number\"\r\n                      name=\"amount\"\r\n                      min=\"1\"\r\n                      value={this.state.amount}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-right\"\r\n                      type=\"number\"\r\n                      name=\"cost\"\r\n                      value={this.state.cost}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control text-right\"\r\n                      type=\"number\"\r\n                      name=\"price\"\r\n                      value={this.state.price}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </td>\r\n                  <td className=\"text-right\">\r\n                    <div className=\"btn-group\" role=\"group\">\r\n                      <button\r\n                        className=\"btn btn-outline-primary btn-sm\"\r\n                        onClick={this.handleSave}\r\n                      >\r\n                        <i className=\"fas fa-save\"></i>\r\n                      </button>\r\n                      <button\r\n                        className=\"btn btn-outline-dark btn-sm\"\r\n                        onClick={this.handleNewLote}\r\n                      >\r\n                        <i className=\"fas fa-undo\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                <tr></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"btn-group float-right\" role=\"group\">\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={this.handleNewLote}\r\n                >\r\n                  Nuevo lote\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangePage(e) {\r\n    e.preventDefault();\r\n    this.setState({\r\n      page: e.target.id,\r\n    });\r\n    this.handelGetLots(e.target.id);\r\n  }\r\n  handleNewLote() {\r\n    this.setState({\r\n      loteNew: !this.state.loteNew,\r\n    });\r\n  }\r\n  catchInputs(e) {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  }\r\n  validInputs() {\r\n    //Datos del formulario\r\n    let { bill, price, amount } = this.state;\r\n    if (!bill.length) {\r\n      bill = \"XXXX\";\r\n    }\r\n    if (!price) {\r\n      price = 1000;\r\n    }\r\n    if (!amount) {\r\n      window.alert(\"La cantidad de articulos no puede ser cero\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  handleSave(e) {\r\n    e.preventDefault();\r\n\r\n    //Verificamos campos validos\r\n    if (!this.validInputs()) {\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de almacenar un nuevo lote?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Guardar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let ls = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n            { id, bill, cost, price, amount } = this.state,\r\n            body = {\r\n              bill,\r\n              cost,\r\n              price,\r\n              amount,\r\n              store_items_id: id,\r\n            };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del producto a API\");\r\n          return fetch(\"http://\" + ls.host + \"/api/items\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Lote almacenada\");\r\n          this.setState({\r\n            load: true,\r\n            loteNew: false,\r\n          });\r\n          window.Swal.fire(\"Lote guardado con exito\", \"\", \"success\").then(\r\n            (res) => {\r\n              this.handelGetLots(this.state.page);\r\n              this.props.refresh();\r\n            }\r\n          );\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el lote\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  handelGetLots(page) {\r\n    //Variables\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      id = this.props.id,\r\n      url =\r\n        \"http://\" + varLocalStorage.host + \"/api/items?store_items_id=\" + id;\r\n    fetch(url + \"&page=\" + page, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(\"Descargando lotes\");\r\n        this.setState({\r\n          id,\r\n          lote: data,\r\n          load: false,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n  handleDelete = (e, id, item) => {\r\n    e.preventDefault();\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el lote \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          const tr = e.target.parentNode.parentNode.parentNode;\r\n          tr.classList.add(\"bg-danger\");\r\n\r\n          let ls = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n            deleteColor = setInterval(() => {\r\n              clearInterval(deleteColor);\r\n              tr.classList.remove(\"bg-danger\");\r\n            }, 6500);\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de lote por API\");\r\n          return fetch(\"http://\" + ls.host + \"/api/items/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Producto eliminado\");\r\n        this.setState({\r\n          load: true,\r\n          loteNew: false,\r\n        });\r\n        window.Swal.fire(\"Lote eliminado con exito\", \"\", \"success\").then(\r\n          (res) => {\r\n            this.handelGetLots(this.state.page);\r\n            this.props.refresh();\r\n          }\r\n        );\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nexport default StoreLote;\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class InputCategory extends Component {\r\n  render() {\r\n    const {\r\n      categoryData,\r\n      categoryName,\r\n      category,\r\n      textSelect,\r\n      categoryRef,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"input-group mb-3\">\r\n        <div className=\"input-group-prepend\">\r\n          <span\r\n            className={\r\n              category\r\n                ? \"input-group-text bg-primary\"\r\n                : \"input-group-text bg-warning\"\r\n            }\r\n          >\r\n            <i className=\"fas fa-sort-amount-down\"></i>\r\n          </span>\r\n        </div>\r\n        <select\r\n          className=\"custom-select text-uppercase\"\r\n          name={categoryName}\r\n          value={category}\r\n          onChange={this.handleChangeCategory}\r\n          ref={categoryRef}\r\n        >\r\n          <option value=\"0\">{textSelect}</option>\r\n          {categoryData.map((cat) => {\r\n            return (\r\n              <option value={cat.id} key={cat.id}>\r\n                {cat.categoria ? cat.categoria : cat.name}\r\n              </option>\r\n            );\r\n          })}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangeCategory = (e) => {\r\n    const { value } = e.target,\r\n      { categoryData, handleChangeCategory } = this.props;\r\n    let search = parseInt(value),\r\n      category = categoryData.find((i) => i.id === search);\r\n    if (!search) {\r\n      category = {\r\n        id: 0,\r\n      };\r\n    }\r\n\r\n    handleChangeCategory(category);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class SuppliersInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      suppliers_data: [],\r\n      text: \"\",\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      suppliers_data: [],\r\n    });\r\n    this.getSuppliers();\r\n  }\r\n  render() {\r\n    const { suppliers_data } = this.state,\r\n      { supplier, handleChangeSupplier, supplierRef } = this.props;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <small>\r\n            <label>Proveedor</label>\r\n          </small>\r\n          {suppliers_data.length ? (\r\n            <div className=\"input-group mb-3\">\r\n              <div className=\"input-group-prepend\">\r\n                <span\r\n                  className={\r\n                    supplier\r\n                      ? \"input-group-text bg-primary\"\r\n                      : \"input-group-text bg-warning\"\r\n                  }\r\n                >\r\n                  <i className=\"fas fa-address-book\"></i>\r\n                </span>\r\n              </div>\r\n              <select\r\n                className=\"custom-select text-uppercase\"\r\n                name=\"supplier\"\r\n                value={supplier}\r\n                ref={supplierRef}\r\n                onChange={(e) => {\r\n                  const { value } = e.target;\r\n                  handleChangeSupplier(parseInt(value));\r\n                }}\r\n              >\r\n                <option value=\"0\">Seleccione un Proveedor</option>\r\n                {suppliers_data.map((sp) => {\r\n                  return (\r\n                    <option value={sp.id} key={sp.id}>\r\n                      {sp.nombre}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-left\">\r\n              <span className=\"text-dark\">Descargando proveedores</span>\r\n              <div className=\"spinner-border text-primary ml-4\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getSuppliers = () => {\r\n    //Variables\r\n    let { host, token } = this.state;\r\n\r\n    console.log(\"solicitando proveedores al API\");\r\n    fetch(\"http://\" + host + \"/api/contacts?type=1\", {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data !== null) {\r\n          console.log(\"Cargando proveedores\");\r\n          this.setState({\r\n            suppliers_data: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\r\n            \"Error\",\r\n            \"Error al descargar los proveedores\",\r\n            \"error\"\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class InputBrand extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      brands: [],\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getBrands();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.supplier !== this.props.supplier) {\r\n      this.setState({\r\n        brands: [],\r\n      });\r\n      this.getBrands();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { brandsName, brand, textSelect, brandRef } = this.props,\r\n      { brands } = this.state;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <small>\r\n            <label>Marca</label>\r\n          </small>\r\n          {brands.length ? (\r\n            <div className=\"input-group mb-3\">\r\n              <div className=\"input-group-prepend\">\r\n                <span\r\n                  className={\r\n                    brand\r\n                      ? \"input-group-text bg-primary\"\r\n                      : \"input-group-text bg-warning\"\r\n                  }\r\n                >\r\n                  <i className=\"fas fa-copyright\"></i>\r\n                </span>\r\n              </div>\r\n              <select\r\n                className=\"custom-select text-uppercase\"\r\n                name={brandsName}\r\n                value={brand}\r\n                ref={brandRef}\r\n                onChange={this.handleChangeCategory}\r\n              >\r\n                <option value=\"0\">{textSelect}</option>\r\n                {brands.map((brand) => {\r\n                  return (\r\n                    <option value={brand.id} key={brand.id}>\r\n                      {brand.nombre}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-left\">\r\n              <span className=\"text-dark\">Descargando marcas</span>\r\n              <div className=\"spinner-border text-primary ml-4\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangeCategory = (e) => {\r\n    const { value } = e.target,\r\n      { handleChangeBrand } = this.props;\r\n    handleChangeBrand(parseInt(value));\r\n  };\r\n  getBrands = () => {\r\n    //Constantes\r\n    const { host, token } = this.state,\r\n      { supplier } = this.props;\r\n\r\n    console.log(\"solicitando marcas al API\");\r\n    fetch(\"http://\" + host + \"/api/brands?supplier=\" + supplier, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        if (data.data !== null) {\r\n          console.log(\"descargando marcas\");\r\n          this.setState({\r\n            brands: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Error al descargar las marcas\", \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","export default (string) => {\r\n  switch (string) {\r\n    case \"monofocales\":\r\n      return \"MF\";\r\n    case \"bifocales\":\r\n      return \"BF\";\r\n    case \"progresivo basico\":\r\n    case \"progresivo-basico\":\r\n      return \"PB\";\r\n    case \"progresivo digital\":\r\n    case \"progresivo-digital\":\r\n      return \"PD\";\r\n    case \"plastico\":\r\n      return \"CR\";\r\n    case \"policarbonato\":\r\n      return \"PL\";\r\n    case \"hi-index\":\r\n    case \"hi index\":\r\n      return \"HI\";\r\n    case \"antirreflejantes\":\r\n      return \"AR\";\r\n    case \"photo\":\r\n      return \"PH\";\r\n    case \"ar & photo\":\r\n    case \"antirreflejante-photo\":\r\n      return \"ARPH\";\r\n    case \"blanco\":\r\n      return \"BL\";\r\n    case \"polarizado\":\r\n      return \"PO\";\r\n    case \"bifocal invisible\":\r\n    case \"bifocal-invisible\":\r\n      return \"BI\";\r\n    case \"monofocal drivesafe\":\r\n    case \"monofocal-drivesafe\":\r\n    case \"monofocal digital drivesafe\":\r\n    case \"monofocal digital DriveSafe\":\r\n      return \"MDSF\";\r\n    case \"monofocal superb\":\r\n    case \"monofocal-superb\":\r\n    case \"monofocal digital superb\":\r\n      return \"MDSU\";\r\n    case \"monofocal individual\":\r\n    case \"monofocal-individual\":\r\n    case \"monofocal digital individual\":\r\n      return \"MDIN\";\r\n    default:\r\n      return \"XX\";\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StoreLote from \"./add_lote\";\r\nimport InputCategory from \"./input_category\";\r\nimport Suppliers from \"./input_suppliers\";\r\nimport Brands from \"./input_brand\";\r\nimport Codestring from \"../Layouts/codeLentString\";\r\n\r\nexport default class StoreAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const id = this.props.match.params.id;\r\n    this.state = {\r\n      id: id ? id : 0,\r\n      code: \"\",\r\n      codebar: \"\",\r\n      grad: \"\",\r\n      brand_id: 0,\r\n      name: \"\",\r\n      unit: \"PZ\",\r\n      cant: 1,\r\n      price: 1,\r\n      supplier: 0,\r\n      category_id: 0,\r\n      category_data: {},\r\n      category_id1: 0,\r\n      category_id2: 0,\r\n      category_id3: 0,\r\n      category_id4: 0,\r\n      category_list1: [],\r\n      category_list2: [],\r\n      category_list3: [],\r\n      category_list4: [],\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.category1 = React.createRef(); //Primera categoria\r\n    this.category2 = React.createRef(); //Segunda categoria\r\n    this.category3 = React.createRef(); //Tercera categoria\r\n    this.category4 = React.createRef(); //Cuarta categoria\r\n    this.supplierRef = React.createRef(); //Referencia de proveedor\r\n    this.brandRef = React.createRef(); //Referencia de proveedor\r\n    this.codeRef = React.createRef(); //Referencia del codigo\r\n    this.nameRef = React.createRef(); //REferencia del nombre del producto\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    const { id } = this.state;\r\n    this.getItem(id);\r\n    this.getCategory();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    const {\r\n      category_list1,\r\n      category_id,\r\n      category_id1,\r\n      category_id2,\r\n      category_id3,\r\n    } = this.state;\r\n\r\n    if (state.category_id !== category_id) {\r\n      if (state.category_id1 !== category_id1 && category_id1 !== 0) {\r\n        const next = category_list1.find((e) => e.id === category_id1);\r\n        if (next) {\r\n          this.setState({\r\n            category_list2: next.hijos,\r\n          });\r\n        }\r\n      }\r\n      if (state.category_id2 !== category_id2 && category_id2 !== 0) {\r\n        const next = category_list1.find((e) => e.id === category_id2);\r\n        if (next) {\r\n          this.setState({\r\n            category_list3: next.hijos,\r\n          });\r\n        }\r\n      }\r\n      if (state.category_id3 !== category_id3 && category_id3 !== 0) {\r\n        const next = category_list1.find((e) => e.id === category_id3);\r\n        if (next) {\r\n          this.setState({\r\n            category_list4: next.hijos,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      load,\r\n      supplier,\r\n      category_id,\r\n      category_id1,\r\n      category_id2,\r\n      category_id3,\r\n      category_id4,\r\n      category_list1,\r\n      category_list2,\r\n      category_list3,\r\n      category_list4,\r\n      brand_id,\r\n      code,\r\n      name,\r\n      grad,\r\n      unit,\r\n      cant,\r\n      price,\r\n    } = this.state;\r\n    let codeValue = code,\r\n      nameValue = name;\r\n\r\n    if (\r\n      this.category1.current !== null &&\r\n      this.category1.current.value * 1 === 2\r\n    ) {\r\n      if (name.length <= 3) {\r\n        nameValue = this.handleCodeString(codeValue);\r\n      }\r\n    } else if (\r\n      this.category1.current !== null &&\r\n      this.category1.current.value * 1 === 1\r\n    ) {\r\n      if (code.length <= 3) {\r\n        codeValue = this.handleCodeLent(grad);\r\n      }\r\n      if (name.length <= 3) {\r\n        nameValue = this.handleNameLent(grad);\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className={id ? \"col-5\" : \"col-6\"}>\r\n          <form\r\n            className=\"card card-primary card-outline\"\r\n            onSubmit={this.handleSave}\r\n          >\r\n            <div className=\"card-header\">\r\n              <h3 className=\"card-title text-primary\">\r\n                <i className=\"fas fa-database mr-1\"></i>\r\n                {id ? \"Editar producto\" : \"Registrar nuevo producto\"}\r\n              </h3>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {category_list1 && category_list1.length && !load ? (\r\n                <React.Fragment>\r\n                  <div className=\"row\">\r\n                    <div className=\"col\">\r\n                      <fieldset>\r\n                        <small className=\"mr-2\">\r\n                          <label>Categoria</label>\r\n                        </small>\r\n\r\n                        <InputCategory\r\n                          data={this.props.data}\r\n                          category={category_id1}\r\n                          categoryName=\"category_id1\"\r\n                          categoryData={category_list1}\r\n                          textSelect=\"Seleciona la categoria\"\r\n                          categoryRef={this.category1}\r\n                          handleChangeCategory={(data) => {\r\n                            this.setState({\r\n                              category_id: data.id,\r\n                              category_id1: data.id,\r\n                              category_id2: 0,\r\n                              category_list2: data.hijos,\r\n                              category_id3: 0,\r\n                              category_list3: [],\r\n                              category_id4: 0,\r\n                              category_list4: [],\r\n                              supplier: 0,\r\n                            });\r\n                          }}\r\n                        />\r\n\r\n                        {category_id1 &&\r\n                        category_list2 &&\r\n                        category_list2.length ? (\r\n                          <InputCategory\r\n                            data={this.props.data}\r\n                            category={category_id2}\r\n                            categoryName=\"category_id2\"\r\n                            categoryData={category_list2}\r\n                            textSelect=\"Seleciona el tipo\"\r\n                            categoryRef={this.category2}\r\n                            handleChangeCategory={(data) => {\r\n                              this.setState({\r\n                                category_id: data.id,\r\n                                category_id2: data.id,\r\n                                category_id3: 0,\r\n                                category_list3: data.hijos,\r\n                                category_id4: 0,\r\n                                category_list4: [],\r\n                              });\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n\r\n                        {category_id2 &&\r\n                        category_list3 &&\r\n                        category_list3.length ? (\r\n                          <InputCategory\r\n                            data={this.props.data}\r\n                            category={category_id3}\r\n                            categoryName=\"category_id3\"\r\n                            categoryData={category_list3}\r\n                            textSelect=\"Seleciona el material\"\r\n                            categoryRef={this.category3}\r\n                            handleChangeCategory={(data) => {\r\n                              this.setState({\r\n                                category_id: data.id,\r\n                                category_id3: data.id,\r\n                                category_id4: 0,\r\n                                category_list4: data.hijos,\r\n                              });\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n\r\n                        {category_id3 &&\r\n                        category_list4 &&\r\n                        category_list4.length ? (\r\n                          <InputCategory\r\n                            data={this.props.data}\r\n                            category={category_id4}\r\n                            categoryName=\"category_id4\"\r\n                            categoryData={category_list4}\r\n                            textSelect=\"Seleciona el tratamiento\"\r\n                            categoryRef={this.category4}\r\n                            handleChangeCategory={(data) => {\r\n                              this.setState({\r\n                                category_id: data.id,\r\n                                category_id4: data.id,\r\n                              });\r\n                            }}\r\n                          />\r\n                        ) : null}\r\n                      </fieldset>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {category_id1 && category_id1 !== 1 ? (\r\n                    <Suppliers\r\n                      data={this.props.data}\r\n                      supplier={supplier}\r\n                      textSelect=\"Selecione el proveedor\"\r\n                      supplierRef={this.supplierRef}\r\n                      handleChangeSupplier={(e) => {\r\n                        this.setState({\r\n                          supplier: e,\r\n                        });\r\n                      }}\r\n                    />\r\n                  ) : null}\r\n\r\n                  {category_id1 && category_id1 !== 1 && supplier ? (\r\n                    <Brands\r\n                      data={this.props.data}\r\n                      brand={brand_id}\r\n                      supplier={supplier}\r\n                      textSelect=\"Selecione la marca\"\r\n                      brandRef={this.brandRef}\r\n                      handleChangeBrand={(e) => {\r\n                        this.setState({\r\n                          brand_id: e,\r\n                        });\r\n                      }}\r\n                    />\r\n                  ) : null}\r\n\r\n                  {category_id ? (\r\n                    <React.Fragment>\r\n                      <div className=\"row\">\r\n                        <div className=\"col-5\">\r\n                          {codeValue ? (\r\n                            <small>\r\n                              <label>Codigo</label>\r\n                            </small>\r\n                          ) : (\r\n                            <br />\r\n                          )}\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  codeValue\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-code\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control text-uppercase\"\r\n                              placeholder=\"Codigo\"\r\n                              name=\"code\"\r\n                              ref={this.codeRef}\r\n                              value={codeValue}\r\n                              onChange={this.catchInputs}\r\n                              autoComplete=\"off\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <small>\r\n                            <label>Codigo de barras</label>\r\n                          </small>\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span className=\"input-group-text bg-primary\">\r\n                                <i className=\"fas fa-barcode\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Codigo de barras\"\r\n                              name=\"codebar\"\r\n                              value={this.state.codebar}\r\n                              onChange={this.catchInputs}\r\n                              autoComplete=\"off\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"row\">\r\n                        {category_id1 === 1 ? (\r\n                          <div className=\"col-3\">\r\n                            <small>\r\n                              <label>Graduacion</label>\r\n                            </small>\r\n                            <div className=\"input-group mb-3\">\r\n                              <div className=\"input-group-prepend\">\r\n                                <span\r\n                                  className={\r\n                                    grad\r\n                                      ? \"input-group-text bg-primary\"\r\n                                      : \"input-group-text bg-warning\"\r\n                                  }\r\n                                >\r\n                                  <i className=\"fas fa-glasses\"></i>\r\n                                </span>\r\n                              </div>\r\n                              <input\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                placeholder=\"+100100\"\r\n                                name=\"grad\"\r\n                                value={grad}\r\n                                onChange={this.catchInputs}\r\n                                autoComplete=\"off\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        ) : null}\r\n                        <div className=\"col\">\r\n                          {nameValue ? (\r\n                            <small>\r\n                              <label>Nombre del producto</label>\r\n                            </small>\r\n                          ) : (\r\n                            <br />\r\n                          )}\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  nameValue\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-archive\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control text-uppercase\"\r\n                              placeholder=\"Nombre del producto\"\r\n                              name=\"name\"\r\n                              ref={this.nameRef}\r\n                              value={nameValue}\r\n                              onChange={this.catchInputs}\r\n                              autoComplete=\"off\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"row\">\r\n                        <div className=\"col\">\r\n                          {this.state.unit ? (\r\n                            <small>\r\n                              <label>Unidad de presentacion</label>\r\n                            </small>\r\n                          ) : (\r\n                            <br />\r\n                          )}\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  unit\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-balance-scale\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"text\"\r\n                              className=\"form-control\"\r\n                              placeholder=\"Unidad de presentación\"\r\n                              name=\"unit\"\r\n                              value={unit}\r\n                              onChange={this.catchInputs}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <small>\r\n                            <label>Cantidad en existencia</label>\r\n                          </small>\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  cant\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-database\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"number\"\r\n                              className=\"form-control text-right\"\r\n                              placeholder=\"Cantidades en existencia\"\r\n                              name=\"cant\"\r\n                              value={cant}\r\n                              onChange={this.catchInputs}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                          <small>\r\n                            <label>Precio</label>\r\n                          </small>\r\n                          <div className=\"input-group mb-3\">\r\n                            <div className=\"input-group-prepend\">\r\n                              <span\r\n                                className={\r\n                                  price\r\n                                    ? \"input-group-text bg-primary\"\r\n                                    : \"input-group-text bg-warning\"\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-money-bill\"></i>\r\n                              </span>\r\n                            </div>\r\n                            <input\r\n                              type=\"number\"\r\n                              className=\"form-control text-right\"\r\n                              placeholder=\"Precio\"\r\n                              name=\"price\"\r\n                              value={price}\r\n                              onChange={this.catchInputs}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </React.Fragment>\r\n                  ) : (\r\n                    <div className=\"row\">\r\n                      <div className=\"col\">\r\n                        <h6 className=\"text-warning\">\r\n                          Seleccione primero una categoría.\r\n                        </h6>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </React.Fragment>\r\n              ) : (\r\n                <div className=\"text-center\">\r\n                  <span className=\"text-primary\">Cargando formulario</span>\r\n                  <div\r\n                    className=\"spinner-border text-primary ml-4\"\r\n                    role=\"status\"\r\n                  >\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"card-footer text-right\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"btn-group\" role=\"group\">\r\n                    <Link\r\n                      to=\"/almacen/registro\"\r\n                      className=\"btn btn-dark\"\r\n                      onClick={this.setNew}\r\n                    >\r\n                      <i className=\"fas fa-plus mr-1\"></i>\r\n                      Nuevo\r\n                    </Link>\r\n                    <Link\r\n                      to=\"/almacen\"\r\n                      className=\"btn btn-dark\"\r\n                      onClick={(e) => {\r\n                        this.changePage(\"/almacen\");\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className={id ? \"fas fa-ban mr-1\" : \"fas fa-undo mr-1\"}\r\n                      ></i>\r\n                      {id ? \"Cerrar\" : \"Cancelar\"}\r\n                    </Link>\r\n                    <button type=\"submit\" className=\"btn btn-primary\">\r\n                      <i className=\"fas fa-save mr-1\"></i>\r\n                      Guardar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        {id ? (\r\n          <div className=\"col\">\r\n            <StoreLote\r\n              id={id}\r\n              price={this.state.price}\r\n              refresh={this.getItem}\r\n            />\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleNameLent = (grad) => {\r\n    let stringcode = \"lente\";\r\n    stringcode +=\r\n      this.category2.current !== null\r\n        ? \" \" +\r\n          Codestring(\r\n            this.category2.current.options[\r\n              this.category2.current.selectedIndex\r\n            ].text.trim()\r\n          )\r\n        : \"\";\r\n    stringcode +=\r\n      this.category3.current !== null\r\n        ? \" \" +\r\n          this.category3.current.options[\r\n            this.category3.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.category4.current !== null\r\n        ? \" \" +\r\n          this.category4.current.options[\r\n            this.category4.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n\r\n    stringcode += \" \" + grad.toString();\r\n    return stringcode.toLowerCase();\r\n  };\r\n  handleCodeLent = (grad) => {\r\n    let stringcode =\r\n      this.category2.current !== null\r\n        ? Codestring(\r\n            this.category2.current.options[this.category2.current.selectedIndex]\r\n              .text\r\n          )\r\n        : \"\";\r\n    stringcode +=\r\n      this.category3.current !== null\r\n        ? Codestring(\r\n            this.category3.current.options[this.category3.current.selectedIndex]\r\n              .text\r\n          )\r\n        : \"\";\r\n    stringcode +=\r\n      this.category4.current !== null\r\n        ? Codestring(\r\n            this.category4.current.options[this.category4.current.selectedIndex]\r\n              .text\r\n          )\r\n        : \"\";\r\n    return stringcode + grad.toString();\r\n  };\r\n  handleCodeString = (code) => {\r\n    let stringcode = \"armazon\";\r\n    stringcode +=\r\n      this.category2.current !== null\r\n        ? \" \" +\r\n          this.category2.current.options[\r\n            this.category2.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.brandRef.current !== null\r\n        ? \" \" +\r\n          this.brandRef.current.options[\r\n            this.brandRef.current.selectedIndex\r\n          ].text.trim()\r\n        : \"\";\r\n    stringcode +=\r\n      this.supplierRef.current !== null\r\n        ? \" \" +\r\n          this.supplierRef.current.options[\r\n            this.supplierRef.current.selectedIndex\r\n          ].text\r\n            .trim()\r\n            .split(\" \")[0]\r\n        : \"\";\r\n\r\n    stringcode += \" \" + code.toString();\r\n    return stringcode.toLowerCase();\r\n  };\r\n  setNew = (e) => {\r\n    this.setState({\r\n      id: 0,\r\n      code: \"\",\r\n      codebar: \"\",\r\n      grad: \"\",\r\n      brand_id: 0,\r\n      name: \"\",\r\n      unit: \"PZ\",\r\n      cant: 1,\r\n      price: 1,\r\n      supplier: 0,\r\n      brand: 0,\r\n      category_id: 0,\r\n      category_id1: 0,\r\n      category_id2: 0,\r\n      category_id3: 0,\r\n      category_id4: 0,\r\n      category_list2: [],\r\n      category_list3: [],\r\n      category_list4: [],\r\n      load: false,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, type } = e.target;\r\n    let { value } = e.target;\r\n\r\n    if (type === \"text\") value = value.toLowerCase();\r\n    if (type === \"number\") value = parseInt(value);\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getCategory = () => {\r\n    //Variables\r\n    let { host, token } = this.state;\r\n\r\n    console.log(\"solicitando categorias al API\");\r\n    fetch(\"http://\" + host + \"/api/categories?categoryid=raiz\", {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data !== null) {\r\n          console.log(\"Almacenando categorias\");\r\n          this.setState({\r\n            category_list1: cat.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", cat.message);\r\n          window.Swal.fire(\r\n            \"Error\",\r\n            \"Error al descargar las categorias\",\r\n            \"error\"\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  handleSave = async (e) => {\r\n    e.preventDefault();\r\n    const {\r\n      id,\r\n      category_id,\r\n      category_id1,\r\n      category_id2,\r\n      category_id4,\r\n      supplier,\r\n      brand_id,\r\n      code,\r\n    } = this.state;\r\n    //Verificamos campos validos\r\n    if (!category_id) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Selecione una categoria primero\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    } else {\r\n      if (category_id1 === 1 && category_id4 !== category_id) {\r\n        window.Swal.fire(\r\n          \"Verificación\",\r\n          \"Selecione una categoria valida para lentes\",\r\n          \"warning\"\r\n        );\r\n        return false;\r\n      } else if (category_id1 === 2 && category_id2 !== category_id) {\r\n        window.Swal.fire(\r\n          \"Verificación\",\r\n          \"Selecione una categoria valida para armazones\",\r\n          \"warning\"\r\n        );\r\n        return false;\r\n      }\r\n    }\r\n    if (category_id1 === 2 && !supplier) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Selecione un PROVEEDOR valido primero\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (category_id1 === 2 && !brand_id) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Selecione una MARCA valida primero\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (!code && !this.codeRef.current.value) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Escriba una CODIGO para este producto\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el producto?\"\r\n        : \"¿Esta seguro de crear un nuevo producto?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const {\r\n              id,\r\n              code,\r\n              codebar,\r\n              brand_id,\r\n              name,\r\n              unit,\r\n              cant,\r\n              price,\r\n              category_id,\r\n              token,\r\n              host,\r\n              supplier,\r\n              grad,\r\n            } = this.state,\r\n            url = id\r\n              ? \"http://\" + host + \"/api/store/\" + id\r\n              : \"http://\" + host + \"/api/store\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n          let body = {\r\n            code: code ? code : this.codeRef.current.value,\r\n            codebar,\r\n            name: name ? name : this.nameRef.current.value,\r\n            unit,\r\n            cant,\r\n            price,\r\n            category_id,\r\n            grad: grad ? grad : \"+000000\",\r\n            brand_id: brand_id ? brand_id : \"\",\r\n            contact_id: supplier ? supplier : \"\",\r\n          };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del producto a API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          }).then(async (response) => {\r\n            let back = {};\r\n            if (response.status !== 204) back = await response.json();\r\n            if (!response.ok) {\r\n              console.error(\"Orus res: \", back.message, back.errors);\r\n              if (back.errors && back.errors.code) {\r\n                window.Swal.fire(\r\n                  \"Validacion\",\r\n                  \"El CODIGO ya esta registrado\",\r\n                  \"warning\"\r\n                );\r\n              } else if (back.errors && back.errors.name) {\r\n                window.Swal.fire(\r\n                  \"Validacion\",\r\n                  \"El nombre del PRODUCTO ya esta registrado\",\r\n                  \"warning\"\r\n                );\r\n              } else\r\n                window.Swal.fire(\"Error\", \"al almacenar el producto\", \"error\");\r\n            }\r\n            return back;\r\n          });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Producto almacenado\", data.data);\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Producto actualizado con exito\"\r\n              : \"Producto almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            if (id) {\r\n              this.props.history.push(`/almacen`);\r\n            } else {\r\n              this.setState({\r\n                id: data.data.id,\r\n              });\r\n              this.props.history.push(`/almacen/registro/${data.data.id}`);\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getItem = (id) => {\r\n    if (id > 0) {\r\n      //Variables\r\n      let { host, token } = this.state;\r\n      //Realiza la peticion al API\r\n      console.log(\"Solicitando datos de producto a la API\");\r\n      fetch(\"http://\" + host + \"/api/store/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then(async (data) => {\r\n          if (data.data) {\r\n            let category_id1 = 0,\r\n              category_list2 = [],\r\n              category_list3 = [],\r\n              category_list4 = [],\r\n              category_id2 = 0,\r\n              category_id3 = 0,\r\n              category_id4 = 0;\r\n\r\n            if (data.data.categoria && data.data.categoria.depende_de) {\r\n              if (\r\n                data.data.categoria.depende_de &&\r\n                data.data.categoria.depende_de.depende_de\r\n              ) {\r\n                if (\r\n                  data.data.categoria.depende_de.depende_de &&\r\n                  data.data.categoria.depende_de.depende_de.depende_de\r\n                ) {\r\n                  category_id1 =\r\n                    data.data.categoria.depende_de.depende_de.depende_de.id;\r\n                  category_id2 = data.data.categoria.depende_de.depende_de.id;\r\n                  category_id3 = data.data.categoria.depende_de.id;\r\n                  category_id4 = data.data.categoria.id;\r\n                  //Listas\r\n                  category_list2 =\r\n                    data.data.categoria.depende_de.depende_de.depende_de.hijos;\r\n                  category_list3 =\r\n                    data.data.categoria.depende_de.depende_de.hijos;\r\n                  category_list4 = data.data.categoria.depende_de.hijos;\r\n                } else {\r\n                  category_id1 = data.data.categoria.depende_de.depende_de.id;\r\n                  category_id2 = data.data.categoria.depende_de.id;\r\n                  category_id3 = data.data.categoria.id;\r\n                  //Lista\r\n                  category_list2 =\r\n                    data.data.categoria.depende_de.depende_de.hijos;\r\n                  category_list3 = data.data.categoria.depende_de.hijos;\r\n                }\r\n              } else {\r\n                category_id1 = data.data.categoria.depende_de.id;\r\n                category_id2 = data.data.categoria.id;\r\n                //Lista\r\n                category_list2 = data.data.categoria.depende_de.hijos;\r\n              }\r\n            } else {\r\n              category_id1 = data.data.categoria.id;\r\n              //Lista\r\n              category_list2 = data.data.categoria.hijos;\r\n            }\r\n            /*console.log(\r\n              \"CAT principal\",\r\n              \"Nombre: \" + data.data.categoria.categoria,\r\n              \"Hijos: \" + data.data.categoria.hijos.length,\r\n              \"Padre: \",\r\n              data.data.categoria.depende_de\r\n            );*/\r\n\r\n            this.setState({\r\n              id: data.data.id,\r\n              code: data.data.codigo,\r\n              codebar: data.data.c_barra,\r\n              brand_id: data.data.marca ? data.data.marca.id : 0,\r\n              grad: data.data.graduacion ? data.data.graduacion : \"\",\r\n              name: data.data.producto,\r\n              unit: data.data.unidad,\r\n              cant: data.data.cantidades,\r\n              price: data.data.precio,\r\n              category_id: data.data.categoria.id,\r\n              category_id1,\r\n              category_list2,\r\n              category_list3,\r\n              category_list4,\r\n              category_id2,\r\n              category_id3,\r\n              category_id4,\r\n              category_data: data.data.categoria,\r\n              supplier: data.data.proveedor ? data.data.proveedor.id : 0,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\r\n              \"Error\",\r\n              \"Error en el sistema, comuniquese con el administrador de sistema\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Pagination from \"../Layouts/pagination\";\r\n\r\nexport default class CategoryList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      meta: {},\r\n      add: false,\r\n      name: \"\",\r\n      category_raiz: [],\r\n      category_id: props.category,\r\n      page: 1,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      load: true,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getCategoriesMain();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    const { category } = this.props;\r\n    if (props.category !== category) {\r\n      this.getCategoriesMain();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { category_raiz, category_id, name, add, meta, load } = this.state,\r\n      {\r\n        categoryName,\r\n        categoryDataName,\r\n        categorySelect,\r\n        category,\r\n        last,\r\n      } = this.props;\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-body\">\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Nombre</th>\r\n                <th style={{ width: 16 }} className=\"text-center\">\r\n                  E\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {!load && category_raiz ? (\r\n                <React.Fragment>\r\n                  <tr\r\n                    className={category_id === category ? \"table-success\" : \"\"}\r\n                    onClick={(e) => {\r\n                      this.setState({\r\n                        category_id: parseInt(category) ? category : 0,\r\n                      });\r\n                      categorySelect({\r\n                        [categoryName]: 0,\r\n                        [categoryDataName]: [],\r\n                        category_id: category,\r\n                      });\r\n                    }}\r\n                  >\r\n                    <td\r\n                      colSpan=\"2\"\r\n                      className=\"text-capitalize\"\r\n                      style={{ cursor: \"pointer\" }}\r\n                    >\r\n                      Raiz\r\n                    </td>\r\n                  </tr>\r\n                  {category_raiz.map((cat) => {\r\n                    return (\r\n                      <tr\r\n                        key={cat.id}\r\n                        className={\r\n                          cat.id === category_id ? \"table-success\" : \"\"\r\n                        }\r\n                        style={{ cursor: \"pointer\" }}\r\n                        onClick={(e) => {\r\n                          if (last) {\r\n                            this.setState({\r\n                              category_id: parseInt(category) ? category : 0,\r\n                            });\r\n                            categorySelect({\r\n                              [categoryName]: 0,\r\n                              [categoryDataName]: [],\r\n                              category_id: category,\r\n                            });\r\n                          } else {\r\n                            categorySelect({\r\n                              [categoryName]: cat.id,\r\n                              [categoryDataName]: cat.hijos,\r\n                              category_id: cat.id,\r\n                            });\r\n                            this.setState({\r\n                              category_id: cat.id,\r\n                            });\r\n                          }\r\n                        }}\r\n                      >\r\n                        <td className=\"text-capitalize\">\r\n                          <a\r\n                            href={\"#select!\" + cat.id}\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              this.setState({\r\n                                category_id: cat.id,\r\n                              });\r\n                            }}\r\n                          >\r\n                            {cat.categoria}\r\n                          </a>\r\n                        </td>\r\n                        <td>\r\n                          {!cat.hijos.length ? (\r\n                            <button\r\n                              className=\"btn btn-outline-dark btn-sm\"\r\n                              onClick={(e) => {\r\n                                this.handleClickDelete(cat.id, cat.categoria);\r\n                              }}\r\n                            >\r\n                              <i className=\"fas fa-trash\"></i>\r\n                            </button>\r\n                          ) : null}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </React.Fragment>\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"8\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n            {add && !load ? (\r\n              <tfoot>\r\n                <tr>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      className=\"form-control text-capitalize\"\r\n                      autoComplete=\"off\"\r\n                      value={name}\r\n                      onChange={this.catchInputs}\r\n                      ref={(input) => {\r\n                        this.nameInput = input;\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-dark btn-sm\"\r\n                      onClick={this.handleClickSave}\r\n                    >\r\n                      <i className=\"fas fa-save\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            ) : (\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan=\"3\">\r\n                    <Pagination\r\n                      meta={meta}\r\n                      handleChangePage={this.handleChangePage}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            )}\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={this.handleClickAdd}\r\n          >\r\n            {this.state.add ? (\r\n              <i className=\"fas fa-undo\"></i>\r\n            ) : (\r\n              <i className=\"fas fa-plus\"></i>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n    });\r\n  };\r\n  handleClickDelete = (id, name) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar la categoria \" + name.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          const { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de categoria por API\");\r\n          return fetch(\"http://\" + host + \"/api/categories/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Categoria eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Categoria eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => {\r\n          //Proceso de eliminacion de categoria del array\r\n          const { category } = this.props;\r\n          let { category_raiz } = this.state,\r\n            indexCat = 0;\r\n\r\n          if (category_raiz.length) {\r\n            category_raiz.filter((cat, i) => {\r\n              if (cat.id === id) indexCat = i;\r\n              return false;\r\n            });\r\n            category_raiz.splice(indexCat, 1);\r\n            this.setState({\r\n              category_raiz,\r\n              category_id: category,\r\n            });\r\n          }\r\n          //fin del proceso\r\n        });\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  handleClickSave = () => {\r\n    //Verificamos campos validos\r\n    if (this.state.name.length < 4) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Debe de escribir el nombre de la categoria\",\r\n        \"warning\"\r\n      );\r\n      this.nameInput.focus();\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva categoria?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          const { host, token, category_id, name } = this.state,\r\n            { category } = this.props,\r\n            body = {\r\n              name,\r\n              category_id: parseInt(category_id)\r\n                ? parseInt(category_id)\r\n                : parseInt(category)\r\n                ? parseInt(category)\r\n                : \"\",\r\n            };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(\"http://\" + host + \"/api/categories\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        const data = result.value,\r\n          { category_raiz, category_id } = this.state,\r\n          { category } = this.props;\r\n\r\n        if (data.data) {\r\n          console.log(\"Categoria almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Categoria almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then(async (res) => {\r\n            //Resultado actualizando datos\r\n            if (parseInt(category) === category_id) {\r\n              category_raiz.push(data.data);\r\n            } else {\r\n              await category_raiz.find((cat) => {\r\n                if (cat.id === category_id) {\r\n                  cat.hijos.push(data.data);\r\n                  return cat;\r\n                } else return false;\r\n              });\r\n            }\r\n\r\n            this.setState({\r\n              category_raiz,\r\n              name: \"\",\r\n              add: !this.state.add,\r\n              category_id: data.data.id,\r\n            });\r\n            //Fin de resultado\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la categoria\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getCategoriesMain = () => {\r\n    //Variables props\r\n    const { category, CategoryData } = this.props;\r\n\r\n    if (CategoryData === undefined || !CategoryData.length) {\r\n      //Variables en localStorage\r\n      const { host, token, page, load } = this.state,\r\n        url = \"http://\" + host + \"/api/categories\",\r\n        categoryid = category ? \"&categoryid=\" + category : \"&categoryid=raiz\",\r\n        ppage = page > 0 ? \"?page=\" + page : \"?page=1\";\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      //Categories main\r\n      fetch(url + ppage + categoryid, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((cat) => {\r\n          this.setState({\r\n            category_raiz: cat.data !== null ? cat.data : [],\r\n            category_id: category,\r\n            load: false,\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus: \" + e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    } else {\r\n      this.setState({\r\n        category_raiz: CategoryData ? CategoryData : [],\r\n        category_id: category,\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n  handleClickAdd = () => {\r\n    this.setState({\r\n      add: !this.state.add,\r\n      name: \"\",\r\n    });\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Catalogo from \"./category_list\";\r\n\r\nexport default class Categories extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      category_id: 0,\r\n      category_id1: 0,\r\n      category_hijos1: [],\r\n      category_id2: 0,\r\n      category_hijos2: [],\r\n      category_id3: 0,\r\n      category_hijos3: [],\r\n      category_id4: 0,\r\n      category_hijos4: [],\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      category_id1,\r\n      category_hijos1,\r\n      category_id2,\r\n      category_hijos2,\r\n      category_id3,\r\n      category_hijos3,\r\n    } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <h5>Categorias de productos</h5>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <Catalogo\r\n              data={this.props.data}\r\n              category={0}\r\n              categoryName=\"category_id1\"\r\n              categoryDataName=\"category_hijos1\"\r\n              categorySelect={this.handleChangeState}\r\n            />\r\n          </div>\r\n          {category_id1 && category_hijos1.length ? (\r\n            <div className=\"col\">\r\n              <Catalogo\r\n                data={this.props.data}\r\n                category={category_id1}\r\n                CategoryData={category_hijos1}\r\n                categoryName=\"category_id2\"\r\n                categoryDataName=\"category_hijos2\"\r\n                categorySelect={this.handleChangeState}\r\n                last={category_id1 === 2 ? true : false}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {category_id2 && category_hijos2.length ? (\r\n            <div className=\"col\">\r\n              <Catalogo\r\n                data={this.props.data}\r\n                category={category_id2}\r\n                CategoryData={category_hijos2}\r\n                categoryName=\"category_id3\"\r\n                categoryDataName=\"category_hijos3\"\r\n                categorySelect={this.handleChangeState}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {category_id3 && category_hijos3.length ? (\r\n            <div className=\"col\">\r\n              <Catalogo\r\n                data={this.props.data}\r\n                category={category_id3}\r\n                CategoryData={category_hijos3}\r\n                categoryName=\"category_id4\"\r\n                categoryDataName=\"category_hijos4\"\r\n                categorySelect={this.handleChangeState}\r\n                last={true}\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  handleChangeState = (data) => {\r\n    if (data.category_id1 !== undefined && data.category_id1) {\r\n      data.category_id2 = 0;\r\n      data.category_id3 = 0;\r\n      data.category_id4 = 0;\r\n    } else if (data.category_id2 !== undefined && data.category_id2) {\r\n      data.category_id3 = 0;\r\n      data.category_id4 = 0;\r\n    } else if (data.category_id3 !== undefined && data.category_id3) {\r\n      data.category_id4 = 0;\r\n    }\r\n    this.setState(data);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Suppliers from \"./input_suppliers\";\r\n\r\nexport default class Brands extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      supplier: 0,\r\n      brands: [],\r\n      name: \"\",\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(props, state) {\r\n    if (state.supplier !== this.state.supplier && this.state.supplier) {\r\n      this.getBrands();\r\n    }\r\n  }\r\n  render() {\r\n    const { supplier, name, brands } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <h5>Marcas para productos</h5>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card card-primary card-outline\">\r\n              <div className=\"card-body\">\r\n                <Suppliers\r\n                  data={this.props.data}\r\n                  supplier={supplier}\r\n                  handleChangeSupplier={(e) => {\r\n                    this.setState({\r\n                      supplier: e,\r\n                    });\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col\">\r\n            <div className=\"card card-primary card-outline\">\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title text-primary mb-4\">\r\n                  {supplier\r\n                    ? \"Listado de marcas\"\r\n                    : \"Primero seleccione a un proveedor\"}\r\n                </h5>\r\n                {supplier ? (\r\n                  <ul className=\"card-text list-group\">\r\n                    {!brands.length ? (\r\n                      <li className=\"list-group-item\">\r\n                        No hay marcas registradas para este proveedor\r\n                      </li>\r\n                    ) : (\r\n                      brands.map((brand) => {\r\n                        return (\r\n                          <li\r\n                            className=\"list-group-item d-flex justify-content-between align-items-center\"\r\n                            key={brand.id}\r\n                          >\r\n                            <span className=\"text-primary\">{brand.nombre}</span>\r\n                            <span\r\n                              className=\"badge badge-dark badge-pill\"\r\n                              style={{ cursor: \"pointer\" }}\r\n                              onClick={(e) => {\r\n                                this.deleteBrand(brand.id, brand.nombre);\r\n                              }}\r\n                            >\r\n                              <i className=\"fas fa-trash\"></i>\r\n                            </span>\r\n                          </li>\r\n                        );\r\n                      })\r\n                    )}\r\n                  </ul>\r\n                ) : null}\r\n              </div>\r\n              {supplier ? (\r\n                <div className=\"card-footer\">\r\n                  <form onSubmit={this.saveBrand}>\r\n                    <div className=\"input-group\">\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"form-control mr-1\"\r\n                        name=\"name\"\r\n                        value={name}\r\n                        onChange={this.changeInput}\r\n                      />\r\n                      <button className=\"btn btn-dark\">\r\n                        <i className=\"fas fa-save\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  deleteBrand = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el producto \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de marca por API\");\r\n          return fetch(\"http://\" + host + \"/api/brands/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Marca eliminada\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Marca eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => {\r\n          //Eliminar el item del array\r\n          let { brands } = this.state,\r\n            indexItem = 0;\r\n\r\n          if (brands.length) {\r\n            brands.filter((item, i) => {\r\n              if (item.id === id) indexItem = i;\r\n              return false;\r\n            });\r\n            brands.splice(indexItem, 1);\r\n            this.setState({\r\n              brands,\r\n            });\r\n          }\r\n        });\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  saveBrand = (e) => {\r\n    e.preventDefault();\r\n    const { name, supplier } = this.state;\r\n\r\n    if (name.length < 3) {\r\n      window.Swal.fire(\r\n        \"Error\",\r\n        \"El nombre de la marca debe de tener por lo menos 3 caracteres\",\r\n        \"error\"\r\n      );\r\n      return false;\r\n    } else if (!supplier) {\r\n      window.Swal.fire(\r\n        \"Error\",\r\n        \"Debe de elegir a un proveedor primero\",\r\n        \"error\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva marca?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { name, supplier, token, host } = this.state;\r\n          let body = {\r\n            name,\r\n            contact_id: supplier,\r\n          };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos de la marca a API\");\r\n          return fetch(\"http://\" + host + \"/api/brands\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Marca almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Marca almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            //Actualizando con la nueva marca\r\n            let { brands } = this.state;\r\n\r\n            brands.push(data.data);\r\n            this.setState({\r\n              brands,\r\n              name: \"\",\r\n            });\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la marca\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  changeInput = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getBrands = () => {\r\n    //Constantes\r\n    const { supplier, host, token } = this.state;\r\n\r\n    console.log(\"solicitando marcas al API\");\r\n    fetch(\"http://\" + host + \"/api/brands?supplier=\" + supplier, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        if (data.data !== null) {\r\n          console.log(\"descargando marcas\");\r\n          this.setState({\r\n            brands: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Error al descargar las marcas\", \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Orus:\", error);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Inventory extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      catData_1: [],\r\n      catData_2: [],\r\n      catData_3: [],\r\n      catid_1: 0,\r\n      catid_2: 0,\r\n      catid_3: 0,\r\n      load: false,\r\n      items: [],\r\n      meta: {},\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.catid_3 !== this.state.catid_3) {\r\n      this.getItems(this.state.catid_3);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      catid_1,\r\n      catData_1,\r\n      catid_2,\r\n      catData_2,\r\n      catid_3,\r\n      catData_3,\r\n      load,\r\n      items,\r\n      meta,\r\n    } = this.state;\r\n    let header = [],\r\n      body = [],\r\n      i = 0;\r\n\r\n    do {\r\n      header.push(<th key={i}>{i.toFixed(2)}</th>);\r\n      i = i - 0.25;\r\n    } while (i > parseFloat(meta.cil) - 0.25);\r\n\r\n    i = parseFloat(meta.rangoInf);\r\n    do {\r\n      if (i === 0)\r\n        body.push(\r\n          <td>\r\n            <label>0.00</label>\r\n          </td>\r\n        );\r\n      else body.push(<td>{i.toFixed(2)}</td>);\r\n      i = i + 0.25;\r\n    } while (i < parseFloat(meta.rangoSup) + 0.25);\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <div className=\"row\">\r\n                <div className=\"col\">\r\n                  <select\r\n                    className=\"custom-select\"\r\n                    name=\"catid_1\"\r\n                    value={catid_1}\r\n                    onChange={this.handleClickCat}\r\n                  >\r\n                    <option value=\"0\">Seleccione un tipo</option>\r\n                    {catData_1.map((cat) => {\r\n                      return (\r\n                        <option key={cat.id} value={cat.id}>\r\n                          {cat.categoria}\r\n                        </option>\r\n                      );\r\n                    })}\r\n                  </select>\r\n                </div>\r\n\r\n                {catid_1 && catData_2.length ? (\r\n                  <div className=\"col\">\r\n                    <select\r\n                      className=\"custom-select\"\r\n                      name=\"catid_2\"\r\n                      value={catid_2}\r\n                      onChange={this.handleClickCat}\r\n                    >\r\n                      <option value=\"0\">Seleccione un material</option>\r\n                      {catData_2.map((cat) => {\r\n                        return (\r\n                          <option key={cat.id} value={cat.id}>\r\n                            {cat.categoria}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n\r\n                {catid_2 && catData_3.length ? (\r\n                  <div className=\"col\">\r\n                    <div\r\n                      className=\"btn-group\"\r\n                      role=\"group\"\r\n                      aria-label=\"Basic example\"\r\n                    >\r\n                      {catData_3.map((cat) => {\r\n                        return (\r\n                          <button\r\n                            key={cat.id}\r\n                            className={\r\n                              catid_3 === cat.id\r\n                                ? \"btn btn-primary\"\r\n                                : \"btn btn-secondary\"\r\n                            }\r\n                            onClick={(e) => {\r\n                              this.setState({\r\n                                catid_3: cat.id,\r\n                                load: true,\r\n                              });\r\n                            }}\r\n                          >\r\n                            {cat.categoria}\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {catid_3 ? (\r\n                <React.Fragment>\r\n                  {load ? (\r\n                    <div className=\"text-center\">\r\n                      <span className=\"text-primary\">Cargando productos</span>\r\n                      <div\r\n                        className=\"spinner-border text-primary ml-4\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <React.Fragment>\r\n                      <div className=\"text-center\">\r\n                        Productos: {items.length}\r\n                      </div>\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-sm table-bordered table-hover\">\r\n                          <thead>\r\n                            <tr>\r\n                              <th>/</th>\r\n                              {header}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {body.map((row, i) => {\r\n                              const zero =\r\n                                row.props.children.type === \"label\"\r\n                                  ? true\r\n                                  : false;\r\n                              return (\r\n                                <tr\r\n                                  className={zero ? \"table-secondary\" : \"\"}\r\n                                  key={i}\r\n                                >\r\n                                  {row}\r\n                                  {header.map((h, i) => {\r\n                                    let grad = zero\r\n                                      ? parseFloat(\r\n                                          row.props.children.props.children\r\n                                        )\r\n                                          .toFixed(2)\r\n                                          .replace(\".\", \"\")\r\n                                      : parseFloat(row.props.children)\r\n                                          .toFixed(2)\r\n                                          .replace(\".\", \"\");\r\n                                    if (parseInt(grad) >= 0) grad = \"+\" + grad;\r\n                                    grad += parseFloat(h.props.children)\r\n                                      .toFixed(2)\r\n                                      .replace(/[-.]/g, \"\");\r\n\r\n                                    //console.log(\"G\", grad);\r\n                                    return (\r\n                                      <td key={i} className=\"text-center\">\r\n                                        {items.length ? (\r\n                                          items.map((item) => {\r\n                                            //console.log(\"comp: \");\r\n                                            return grad === item.graduacion ? (\r\n                                              <React.Fragment>\r\n                                                {item.cantidades ? (\r\n                                                  <span\r\n                                                    key={item.id}\r\n                                                    className={\r\n                                                      item.cantidades > 0\r\n                                                        ? \"badge badge-success\"\r\n                                                        : \"badge badge-danger\"\r\n                                                    }\r\n                                                  >\r\n                                                    <Link\r\n                                                      to={\r\n                                                        \"/almacen/registro/\" +\r\n                                                        item.id\r\n                                                      }\r\n                                                      className=\"text-light\"\r\n                                                    >\r\n                                                      {item.cantidades}\r\n                                                    </Link>\r\n                                                  </span>\r\n                                                ) : null}\r\n                                              </React.Fragment>\r\n                                            ) : null;\r\n                                          })\r\n                                        ) : (\r\n                                          <Link to=\"/almacen/registro\">\r\n                                            <i className=\"fas fa-plus text-secondary\"></i>\r\n                                          </Link>\r\n                                        )}\r\n                                      </td>\r\n                                    );\r\n                                  })}\r\n                                </tr>\r\n                              );\r\n                            })}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </React.Fragment>\r\n                  )}\r\n                </React.Fragment>\r\n              ) : (\r\n                <div className=\"alert alert-warning text-light\" role=\"alert\">\r\n                  <h4 className=\"alert-heading\">\r\n                    <i className=\"fas fa-exclamation\"></i> Seleccion.\r\n                  </h4>\r\n                  <hr />\r\n                  <ul>\r\n                    {!catid_1 ? (\r\n                      <li>Selecciones primero el tipo de lente</li>\r\n                    ) : null}\r\n                    {!catid_2 ? <li>Despues el material</li> : null}\r\n                    <li>Por ultimo el tratamiento</li>\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getItems = (catid) => {\r\n    //Variables en localStorage\r\n    const { data } = this.props,\r\n      { load } = this.state,\r\n      url = \"http://\" + data.host + \"/api/store?cat=\" + catid;\r\n\r\n    //Cargando\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Categories main\r\n    fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + data.token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(\"Descarga de producto exitosa\");\r\n        this.setState({\r\n          items: res.data && res.data.length ? res.data : [],\r\n          load: false,\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n  handleClickCat = (e) => {\r\n    const { name, value } = e.target,\r\n      { catData_1, catData_2 } = this.state;\r\n    let sons = [],\r\n      meta = {};\r\n\r\n    if (name === \"catid_1\") {\r\n      catData_1.map((cat) => {\r\n        if (cat.id === parseInt(value)) {\r\n          sons = cat.hijos;\r\n          meta = cat.meta;\r\n          return true;\r\n        } else return false;\r\n      });\r\n      //console.log(\"Meta: \", meta);\r\n\r\n      this.setState({\r\n        catid_1: parseInt(value),\r\n        catid_2: 0,\r\n        catid_3: 0,\r\n        catData_2: sons,\r\n        catData_3: [],\r\n        meta,\r\n      });\r\n    } else if (name === \"catid_2\") {\r\n      catData_2.map((cat) => {\r\n        if (cat.id === parseInt(value)) {\r\n          sons = cat.hijos;\r\n          return true;\r\n        } else return false;\r\n      });\r\n\r\n      this.setState({\r\n        catid_2: parseInt(value),\r\n        catid_3: 0,\r\n        catData_3: sons,\r\n      });\r\n    }\r\n  };\r\n  getCategories = () => {\r\n    //Variables en localStorage\r\n    const { data } = this.props,\r\n      url = \"http://\" + data.host + \"/api/categories/1\";\r\n\r\n    //Categories main\r\n    fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + data.token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data && cat.data.hijos.length) {\r\n          console.log(\"Descarga de categoria exitos\");\r\n          this.setState({\r\n            catData_1: cat.data.hijos,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, type, business } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: nombre, RFC o email\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Tipo de contacto</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"type\"\r\n                    value={type}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Clientes</option>\r\n                    <option value=\"1\">Proveedores</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>¿Es una empresa?</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-building\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"business\"\r\n                    value={business}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"1\">Si</option>\r\n                    <option value=\"0\">No</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search || type || business\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"type\", \"\");\r\n    this.props.changeFilters(\"business\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Contacts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusContacts\"));\r\n    this.state = {\r\n      contacts: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd && sdd.orderby ? sdd.orderby : \"created_at\",\r\n      order: sdd && sdd.order ? sdd.order : \"desc\",\r\n      search: sdd && sdd.search ? sdd.search : \"\",\r\n      type: sdd && sdd.type ? sdd.type : \"\",\r\n      business: sdd && sdd.business ? sdd.business : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getContacts();\r\n    localStorage.setItem(\r\n      \"OrusContacts\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        type: this.state.type,\r\n        business: this.state.business,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando contactos\");\r\n      this.getContacts();\r\n      localStorage.setItem(\r\n        \"OrusContacts\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          type: this.state.type,\r\n          business: this.state.business,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { contacts, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Nombre\", type: \"name\", filter: true },\r\n        { name: \"RFC\", type: \"name\", filter: true },\r\n        { name: \"E-mail\", type: \"email\", filter: true },\r\n        { name: \"Tipo\", type: \"type\", filter: true },\r\n        { name: \"Telefono\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-danger card-outline\">\r\n        <div className=\"card-header\">\r\n          <h2 className=\"card-title text-danger\">\r\n            <i className=\"fas fa-address-book mr-1\"></i>\r\n            Lista de contactos\r\n          </h2>\r\n          <div className=\"card-tools\">\r\n            <Filter\r\n              search={this.state.search}\r\n              type={this.state.type}\r\n              business={this.state.business}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={contacts.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-danger\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(contacts.data).length ? (\r\n                contacts.data.map((contact) => {\r\n                  return (\r\n                    <tr key={contact.id}>\r\n                      <td>\r\n                        <Link to={\"/contactos/registro/\" + contact.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {contact.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {contact.rfc ? contact.rfc : \"--\"}\r\n                      </td>\r\n                      <td className=\"text-lowercase\">\r\n                        {contact.email ? contact.email : \"--\"}\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {contact.tipo ? (\r\n                          <span className=\"text-purple\">Proveedor</span>\r\n                        ) : (\r\n                          <span className=\"text-green\">Cliente</span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {contact.telefonos && contact.telefonos.t_movil\r\n                          ? contact.telefonos.t_movil\r\n                          : \"--\"}\r\n                      </td>\r\n                      <td>{moment(contact.updated_at).fromNow()}</td>\r\n                      <td>{moment(contact.created_at).format(\"ll\")}</td>\r\n                      <Actions\r\n                        id={contact.id}\r\n                        item={contact.nombre}\r\n                        delete={contact.enUso ? null : this.handleDelete}\r\n                        edit={\"/contactos/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/contactos/registro\"\r\n            className=\"btn btn-outline-danger\"\r\n            onClick={this.changePage}\r\n            id=\"/contactos/registro\"\r\n          >\r\n            <i className=\"fas fa-plus\" id=\"/contactos/registro\"></i>\r\n            &nbsp; Nuevo contacto\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e.target.id);\r\n  };\r\n  handleDelete = (id, item) => {\r\n    //Confirmación de eliminacion\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el contacto \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación por API\");\r\n          return fetch(\"http://\" + host + \"/api/contacts/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Contacto eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getContacts());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getContacts() {\r\n    //Variables\r\n    let {\r\n        host,\r\n        token,\r\n        order,\r\n        orderby,\r\n        search,\r\n        page,\r\n        type,\r\n        business,\r\n        load,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/contacts\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\",\r\n      tipo = type === \"\" ? \"\" : \"&type=\" + type,\r\n      negocio = business === \"\" ? \"\" : \"&business=\" + business;\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Realiza la peticion de los contactos\r\n    console.log(\"Descargando contactos del API\");\r\n    fetch(url + pagina + ordenar + buscar + tipo + negocio, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenando contactos\");\r\n          this.setState({\r\n            contacts: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar contactos\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Mapa extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      load: true,\r\n    };\r\n    this.markers = [];\r\n    this.map = \"\";\r\n  }\r\n  componentDidMount() {\r\n    const googlePlaceAPILoad1 = setInterval(() => {\r\n      if (window.google) {\r\n        this.google = window.google;\r\n        clearInterval(googlePlaceAPILoad1);\r\n        console.log(\"Cargando mapa\");\r\n        const mapCenter = new this.google.maps.LatLng(19.2487072, -103.747381);\r\n        this.map = new this.google.maps.Map(\r\n          document.getElementById(\"gmapContainer\"),\r\n          {\r\n            center: mapCenter,\r\n            zoom: 16,\r\n          }\r\n        );\r\n        if (this.props.calle.length > 6) {\r\n          console.log(\"Cargando Marker\");\r\n          this.eventLoadMap();\r\n        }\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      }\r\n    }, 100);\r\n  }\r\n  componentDidUpdate() {\r\n    if (this.props.calle.length > 6) {\r\n      console.log(\"Cargando Marker\");\r\n      this.eventLoadMap();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"card card-danger card-outline\">\r\n        <div className=\"card-header\">\r\n          <i className=\"fas fa-map-marked mr-1\"></i>\r\n          Mapa\r\n        </div>\r\n        <div\r\n          className=\"card-body\"\r\n          id=\"gmapContainer\"\r\n          style={{ height: 400 }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  eventLoadMap = () => {\r\n    let input =\r\n      this.props.calle +\r\n      \",\" +\r\n      this.props.colonia +\r\n      \",\" +\r\n      this.props.municipio +\r\n      \",\" +\r\n      this.props.estado +\r\n      \",\" +\r\n      this.props.cp;\r\n    const request = {\r\n      query: input,\r\n      fields: [\"formatted_address\", \"geometry\"],\r\n    };\r\n    this.service = new this.google.maps.places.PlacesService(this.map);\r\n    this.service.findPlaceFromQuery(request, (results, status) => {\r\n      if (status === \"OK\") {\r\n        if (this.markers.length) {\r\n          this.markers[0].setMap(null);\r\n          this.markers = [];\r\n        }\r\n        results.map((place) => {\r\n          this.marker = new this.google.maps.Marker({\r\n            position: place.geometry.location,\r\n            title: place.formatted_address,\r\n            map: this.map,\r\n          });\r\n          this.marker.addListener(\"click\", () => {\r\n            let address = this.marker.title.split(\",\"),\r\n              add = address[2].split(/(\\d{5})/g);\r\n\r\n            if (!add.length) {\r\n              add = address[3].split(/(\\d{5})/g);\r\n            }\r\n            this.props.changeAddress({\r\n              calle: address[0].trim(),\r\n              colonia: address[1].trim(),\r\n              municipio: add[2] ? add[2].trim() : this.props.municipio,\r\n              estado: address[3].trim(),\r\n              cp: add[1] ? add[1].trim() : this.props.cp,\r\n            });\r\n          });\r\n          this.markers.push(this.marker);\r\n          this.markers[0].setMap(this.map);\r\n          this.map.setCenter(this.markers[0].position);\r\n          return null;\r\n        });\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class GraduacionExam extends Component {\r\n  render() {\r\n    const {\r\n      readOnly,\r\n      cilindrod,\r\n      cilindroi,\r\n      esferaod,\r\n      esferaoi,\r\n      ejeod,\r\n      ejeoi,\r\n      adiciond,\r\n      adicioni,\r\n      adicion_media_od,\r\n      adicion_media_oi,\r\n      dpod,\r\n      dpoi,\r\n      alturaod,\r\n      alturaoi,\r\n      lcmarca,\r\n      lcgod,\r\n      lcgoi,\r\n    } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <table className=\"table table-bordered table-hover\">\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Esfera</th>\r\n              <th>Cilindro</th>\r\n              <th>Eje</th>\r\n              <th>Adici&oacute;n</th>\r\n              <th>Adici&oacute;n media</th>\r\n              <th>D/P</th>\r\n              <th>Altura</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                <label>D</label>\r\n                <i className=\"fa fa-eye\"></i>\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"esferaod\"\r\n                  min=\"-20\"\r\n                  max=\"20\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={esferaod ? esferaod.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"cilindrod\"\r\n                  min=\"-20\"\r\n                  max=\"0\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={cilindrod ? cilindrod.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"ejeod\"\r\n                  min=\"0\"\r\n                  max=\"180\"\r\n                  step=\"1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  placeholder=\"°\"\r\n                  value={ejeod ? parseInt(ejeod) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adiciond\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={adiciond ? adiciond.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adicion_media_od\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={adicion_media_od ? adicion_media_od.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"dpod\"\r\n                  min=\"40\"\r\n                  max=\"80\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={dpod ? dpod.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"alturaod\"\r\n                  min=\"0\"\r\n                  max=\"35\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={alturaod ? alturaod.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>\r\n                <label>I</label>\r\n                <i className=\"fa fa-eye\"></i>\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"esferaoi\"\r\n                  min=\"-20\"\r\n                  max=\"20\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={esferaoi ? esferaoi.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"cilindroi\"\r\n                  min=\"-20\"\r\n                  max=\"0\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={cilindroi ? cilindroi.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"ejeoi\"\r\n                  min=\"0\"\r\n                  max=\"180\"\r\n                  step=\"1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  placeholder=\"°\"\r\n                  value={ejeoi ? parseInt(ejeoi) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adicioni\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={adicioni ? adicioni.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"adicion_media_oi\"\r\n                  min=\"0\"\r\n                  max=\"3\"\r\n                  step=\".25\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={adicion_media_oi ? adicion_media_oi.toFixed(2) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"dpoi\"\r\n                  min=\"40\"\r\n                  max=\"80\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={dpoi ? dpoi.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"alturaoi\"\r\n                  min=\"0\"\r\n                  max=\"35\"\r\n                  step=\".1\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={alturaoi ? alturaoi.toFixed(1) : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <ul className=\"list-group d-print-none mt-4\">\r\n          <li className=\"list-group-item\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-12\">\r\n                Lente de contacto\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lcmarca\"\r\n                  maxLength=\"70\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={lcmarca}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lcgod\"\r\n                  maxLength=\"30\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={lcgod ? lcgod : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lcgoi\"\r\n                  maxLength=\"30\"\r\n                  className={\r\n                    readOnly ? \"form-control disabled\" : \"form-control\"\r\n                  }\r\n                  disabled={readOnly ? true : false}\r\n                  value={lcgoi ? lcgoi : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name, type, value, checked } = e.target;\r\n    let val = value;\r\n\r\n    if (type === \"checkbox\") val = checked;\r\n    if (type === \"text\") val = value.toLowerCase();\r\n    if (type === \"number\") {\r\n      if (name === \"ejeod\" || name === \"ejeoi\") {\r\n        val = parseInt(value);\r\n      } else {\r\n        val = parseFloat(value);\r\n        val = val.toFixed(2);\r\n        val = parseFloat(val);\r\n      }\r\n    }\r\n    this.props.onChangeInput(name, val);\r\n  };\r\n}\r\n","import React, { Component, Fragment } from \"react\";\r\n//import Codestring from \"../Layouts/codeLentString\";\r\n\r\nexport default class Recomendaciones extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      category_list: [],\r\n      meta: {},\r\n      category_list_2: [],\r\n      category_list_3: [],\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      category: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.category_id !== this.props.category_id) {\r\n      console.log(\"Recargando recomendacion\");\r\n      this.getCategories();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n        category_id,\r\n        title,\r\n        esferaod,\r\n        esferaoi,\r\n        cilindrod,\r\n        cilindroi,\r\n      } = this.props,\r\n      { category } = this.state;\r\n    let code =\r\n        category_id && Object.keys(category).length\r\n          ? this.handleCodeName(category)\r\n          : \"XX\",\r\n      gradod = \"+000000\",\r\n      gradoi = \"+000000\";\r\n\r\n    if (cilindrod || esferaod) {\r\n      gradod = esferaod > 0 ? \"+\" : \"\";\r\n      gradod +=\r\n        esferaod.toFixed(2).toString().replace(\".\", \"\") +\r\n        cilindrod.toFixed(2).toString().replace(\"-\", \"\").replace(\".\", \"\");\r\n    }\r\n    if (cilindroi || esferaoi) {\r\n      gradoi = esferaoi > 0 ? \"+\" : \"\";\r\n      gradoi +=\r\n        esferaoi.toFixed(2).toString().replace(\".\", \"\") +\r\n        cilindroi.toFixed(2).toString().replace(\"-\", \"\").replace(\".\", \"\");\r\n    }\r\n    //console.log(\"GRAD CIL: \", cilindrod, cilindroi);\r\n\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-body\">\r\n          <h3 className=\"card-title text-success m-2\">{title}</h3>\r\n          {!category_id ? (\r\n            this.state.category_list.length ? (\r\n              <Fragment>\r\n                {this.state.category_list.length ? (\r\n                  <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\">Tipo</span>\r\n                    </div>\r\n                    <select\r\n                      name=\"category_id\"\r\n                      className=\"custom-select\"\r\n                      value={this.state.category_id}\r\n                      onChange={this.handleCategoryChange}\r\n                    >\r\n                      <option value=\"0\">Seleccione el tipo</option>\r\n                      {this.state.category_list.map((cat) => {\r\n                        if (\r\n                          cat.meta &&\r\n                          cat.meta.rangoInf <= esferaod &&\r\n                          esferaod <= cat.meta.rangoSup &&\r\n                          cat.meta.rangoInf <= esferaoi &&\r\n                          esferaoi <= cat.meta.rangoSup &&\r\n                          cat.meta.cil <= cilindrod &&\r\n                          cat.meta.cil <= cilindroi\r\n                        ) {\r\n                          return (\r\n                            <option value={cat.id} key={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        } else return false;\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n\r\n                {this.state.category_id && this.state.category_list_2.length ? (\r\n                  <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\">Material</span>\r\n                    </div>\r\n                    <select\r\n                      name=\"category_id_2\"\r\n                      className=\"custom-select\"\r\n                      value={this.state.category_id_2}\r\n                      onChange={this.handleCategoryChange}\r\n                    >\r\n                      <option value=\"0\">Seleccione el material</option>\r\n                      {this.state.category_list_2.map((cat) => {\r\n                        console.log(\"Material: \", cat);\r\n                        if (\r\n                          cat.meta &&\r\n                          cat.meta.rangoInf <= esferaod &&\r\n                          esferaod <= cat.meta.rangoSup &&\r\n                          cat.meta.rangoInf <= esferaoi &&\r\n                          esferaoi <= cat.meta.rangoSup\r\n                        ) {\r\n                          return (\r\n                            <option value={cat.id} key={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        } else return false;\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n\r\n                {this.state.category_id &&\r\n                this.state.category_id_2 &&\r\n                this.state.category_list_3.length ? (\r\n                  <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\">Tratamiento</span>\r\n                    </div>\r\n                    <select\r\n                      name=\"category_id_3\"\r\n                      className=\"custom-select\"\r\n                      value={this.state.category_id_3}\r\n                      onChange={(e) => {\r\n                        this.handleCategoryChange(e, gradod, gradoi);\r\n                      }}\r\n                    >\r\n                      <option value=\"0\">Seleccione el tratamiento</option>\r\n                      {this.state.category_list_3.map((cat) => {\r\n                        return (\r\n                          <option value={cat.id} key={cat.id}>\r\n                            {cat.categoria}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                ) : null}\r\n              </Fragment>\r\n            ) : (\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            )\r\n          ) : (\r\n            <Fragment>\r\n              {code + gradod === code + gradoi ? (\r\n                <p className=\"card-text\">\r\n                  <label>Lente</label>: {code + gradod}\r\n                </p>\r\n              ) : (\r\n                <div className=\"row card-text\">\r\n                  <div className=\"col\">\r\n                    <label>Lente Derecho</label>\r\n                    <br /> {code + gradod}\r\n                  </div>\r\n                  <div className=\"col\">\r\n                    <label>Lente Izquierdo</label>\r\n                    <br /> {code + gradoi}\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {this.props.update ? (\r\n                <p className=\"card-text text-right\">\r\n                  <button\r\n                    className=\"btn btn-outline-info btn-sm card-link mt-2\"\r\n                    onClick={this.handleClickCategory}\r\n                  >\r\n                    Cambiar\r\n                  </button>\r\n                </p>\r\n              ) : null}\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleCodeName = (category) => {\r\n    let code = \"\";\r\n    if (category.depende_de) {\r\n      if (category.depende_de.depende_de) {\r\n        code = category.depende_de.depende_de.meta.code;\r\n        code += category.depende_de.meta.code;\r\n        code += category.meta.code;\r\n      } else {\r\n        code = category.depende_de.meta.code;\r\n        code += category.meta.code;\r\n      }\r\n    } else {\r\n      code = category.meta.code;\r\n    }\r\n    return code;\r\n  };\r\n  handleClickCategory = (e) => {\r\n    e.preventDefault();\r\n    const { onChangeInput, nameCategory } = this.props;\r\n    this.setState({\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      category_list_2: [],\r\n      category_list_3: [],\r\n    });\r\n    onChangeInput({\r\n      [nameCategory]: 0,\r\n    });\r\n  };\r\n  handleCategoryChange = (e, gradod, gradoi) => {\r\n    const { name, value } = e.target,\r\n      { onChangeInput, nameCategory } = this.props;\r\n\r\n    if (name === \"category_id\") {\r\n      if (value) {\r\n        this.state.category_list.map((cat) => {\r\n          if (cat.id === parseInt(value)) {\r\n            this.setState({\r\n              category_id_3: 0,\r\n              category_list_2: cat.hijos,\r\n              category_list_3: [],\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n    if (name === \"category_id_2\") {\r\n      if (value) {\r\n        this.state.category_list_2.map((cat) => {\r\n          if (cat.id === value * 1) {\r\n            this.setState({\r\n              category_list_3: cat.hijos,\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      [name]: parseInt(value),\r\n    });\r\n\r\n    if (name === \"category_id_3\") {\r\n      onChangeInput({\r\n        [nameCategory]: parseInt(value),\r\n      });\r\n    }\r\n  };\r\n  getCategories = () => {\r\n    //Variables\r\n    const { host, token } = this.props.data,\r\n      { category_id } = this.props;\r\n\r\n    //console.log(\"Tipo de descarga\", nameCategory, category_id);\r\n    if (category_id) {\r\n      console.log(\"Descargando categoria para recomendacion\");\r\n      fetch(\"http://\" + host + \"/api/categories/\" + category_id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((cat) => {\r\n          if (cat.data) {\r\n            console.log(\"Recomendacion descargada\");\r\n            this.setState({\r\n              category: cat.data,\r\n              category_id,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus: \" + e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    } else {\r\n      console.log(\"Descargando lista de recomendaciones raiz\");\r\n      fetch(\"http://\" + host + \"/api/categories/1\", {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((cat) => {\r\n          if (cat.data) {\r\n            console.log(\"Lista de recomendaciones descargadas\");\r\n            this.setState({\r\n              category_list: cat.data.hijos,\r\n              meta: cat.meta,\r\n              category_id: 0,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus: \" + e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Graduacion from \"../Exam/graduacionExam\";\r\nimport Recomendaciones from \"../Exam/recomendaciones\";\r\nimport moment from \"moment\";\r\n\r\nexport default class ListsExams extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let ls = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    this.state = {\r\n      id: 0,\r\n      data: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      exam: {},\r\n      examEdit: false,\r\n      load: true,\r\n      page: 0,\r\n      host: ls.host,\r\n      token: ls.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.exam && !this.props.exam.id) {\r\n      this.getExams();\r\n    } else {\r\n      this.setState({\r\n        id: this.props.exam.id,\r\n        exam: this.props.exam,\r\n        load: false,\r\n      });\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (\r\n      this.props.exam &&\r\n      !this.props.exam.id &&\r\n      this.props.exam.id !== props.exam.id\r\n    ) {\r\n      this.getExams();\r\n    }\r\n    if (this.props.exam && this.props.exam.id !== props.exam.id) {\r\n      this.setState({\r\n        id: this.props.exam.id,\r\n        exam: this.props.exam,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data, load, id, exam, examEdit } = this.state,\r\n      { select, datos } = this.props;\r\n\r\n    if (select) {\r\n      return (\r\n        <React.Fragment>\r\n          {id ? (\r\n            <React.Fragment>\r\n              <div className=\"row d-print-none mb-4\">\r\n                <div className=\"col-2\">\r\n                  <div className=\"border border-info rounded p-2 d-flex justify-content-between align-items-center\">\r\n                    <span className=\"badge badge-pill badge-info mx-2\">\r\n                      Folio\r\n                    </span>\r\n                    <strong>{id}</strong>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col\">\r\n                  <div className=\"border border-info rounded p-2 d-flex justify-content-between align-items-center\">\r\n                    <span className=\"badge badge-pill badge-info mx-2\">\r\n                      Estado\r\n                    </span>\r\n                    <strong>\r\n                      {exam.estado ? \"Terminado\" : \"En proceso...\"}\r\n                    </strong>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col\">\r\n                  <div className=\"border border-info rounded p-2 d-flex justify-content-between align-items-center\">\r\n                    <span className=\"badge badge-pill badge-info mx-2\">\r\n                      Fecha\r\n                    </span>\r\n                    <strong>\r\n                      {moment.utc(exam.created_at).local().format(\"LL\")}\r\n                    </strong>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-2 d-print-none text-right\">\r\n                  <button\r\n                    className={\r\n                      this.props.status\r\n                        ? \"btn btn-info disabled\"\r\n                        : \"btn btn-info\"\r\n                    }\r\n                    disabled={this.props.status ? true : false}\r\n                    onClick={this.handleClickDeleteExam}\r\n                  >\r\n                    Cambiar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <Graduacion\r\n                esferaod={exam.esferaod ? exam.esferaod : 0}\r\n                esferaoi={exam.esferaoi ? exam.esferaoi : 0}\r\n                cilindrod={exam.cilindrod ? exam.cilindrod : 0}\r\n                cilindroi={exam.cilindroi ? exam.cilindroi : 0}\r\n                ejeod={exam.ejeod ? exam.ejeod : 0}\r\n                ejeoi={exam.ejeoi ? exam.ejeoi : 0}\r\n                adiciond={exam.adiciond ? exam.adiciond : 0}\r\n                adicioni={exam.adicioni ? exam.adicioni : 0}\r\n                dpod={exam.dpod ? exam.dpod : 0}\r\n                dpoi={exam.dpoi ? exam.dpoi : 0}\r\n                alturaod={exam.alturaod ? exam.alturaod : 0}\r\n                alturaoi={exam.alturaoi ? exam.alturaoi : 0}\r\n                lcmarca={exam.lcmarca ? exam.lcmarca : 0}\r\n                lcgod={exam.lcgod ? exam.lcgod : 0}\r\n                lcgoi={exam.lcgoi ? exam.lcgoi : 0}\r\n                readOnly={!examEdit}\r\n                onChangeInput={this.handleDataExam}\r\n              />\r\n\r\n              <div className=\"row d-print-none\">\r\n                <div className=\"col p-2\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-body\">\r\n                      <label className=\"card-title text-success\">\r\n                        Observaciones\r\n                      </label>\r\n                      <p className=\"card-text text-muted text-uppercase\">\r\n                        {exam.observaciones ? exam.observaciones : \"--\"}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {exam.category_id ? (\r\n                  <React.Fragment>\r\n                    <div className=\"col p-2\">\r\n                      <Recomendaciones\r\n                        category_id={exam.category_id}\r\n                        title=\"Recomendacion principal\"\r\n                        esferaod={exam.esferaod ? exam.esferaod : 0}\r\n                        esferaoi={exam.esferaoi ? exam.esferaoi : 0}\r\n                        cilindrod={exam.cilindrod ? exam.cilindrod : 0}\r\n                        cilindroi={exam.cilindroi ? exam.cilindroi : 0}\r\n                        data={datos}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    {exam.category_ii ? (\r\n                      <div className=\"col p-2\">\r\n                        <Recomendaciones\r\n                          category_id={exam.category_ii}\r\n                          title=\"Recomendacion adicional\"\r\n                          esferaod={exam.esferaod ? exam.esferaod : 0}\r\n                          esferaoi={exam.esferaoi ? exam.esferaoi : 0}\r\n                          cilindrod={exam.cilindrod ? exam.cilindrod : 0}\r\n                          cilindroi={exam.cilindroi ? exam.cilindroi : 0}\r\n                          data={datos}\r\n                          onChangeInput={this.handleChangeInput}\r\n                        />\r\n                      </div>\r\n                    ) : null}\r\n                  </React.Fragment>\r\n                ) : null}\r\n              </div>\r\n\r\n              <div className=\"row d-print-none\">\r\n                <div className=\"col text-right pt-2\">\r\n                  <button\r\n                    className={examEdit ? \"btn btn-dark\" : \"btn btn-info\"}\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      if (examEdit) {\r\n                        this.handleSaveExam(exam);\r\n                      }\r\n                      this.setState({\r\n                        examEdit: !examEdit,\r\n                      });\r\n                    }}\r\n                  >\r\n                    {examEdit ? (\r\n                      <React.Fragment>\r\n                        <i className=\"fas fa-save mr-2\"></i> Guardar\r\n                      </React.Fragment>\r\n                    ) : (\r\n                      <React.Fragment>\r\n                        <i className=\"fas fa-pencil-alt mr-2\"></i> Editar\r\n                      </React.Fragment>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          ) : (\r\n            <table className=\"table table-hover table-nowrap\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Folio</th>\r\n                  <th>Fecha</th>\r\n                  <th>Edad</th>\r\n                  <th>Estado</th>\r\n                  <th>&nbsp;</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {load ? (\r\n                  <tr>\r\n                    <td colSpan=\"5\" className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : Object.keys(data.data).length ? (\r\n                  data.data.map((row) => {\r\n                    return (\r\n                      <tr\r\n                        key={row.id}\r\n                        className={\r\n                          moment\r\n                            .utc(new Date())\r\n                            .isSame(moment.utc(row.created_at), \"day\")\r\n                            ? \"table-success\"\r\n                            : \"\"\r\n                        }\r\n                      >\r\n                        <td>\r\n                          <span className=\"badge badge-info\">{row.id}</span>\r\n                        </td>\r\n                        <td>\r\n                          {moment.utc(row.created_at).local().format(\"L\")}\r\n                          <br />\r\n                          {moment(new Date()).isSame(row.created_at)}\r\n                        </td>\r\n                        <td>{row.edad}</td>\r\n                        <td>\r\n                          {row.estado ? (\r\n                            <span className=\"badge badge-secondary\">\r\n                              Terminado\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"badge badge-success\">Activo</span>\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          <button\r\n                            className=\"btn btn-outline-dark btn-sm\"\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              this.handleClickSelect(row);\r\n                            }}\r\n                          >\r\n                            <i className=\"fas fa-check\"></i>\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <tr>\r\n                    <th colSpan=\"5\" className=\"text-center\">\r\n                      Aun no tiene examenes\r\n                      <button\r\n                        className=\"btn btn-outline-info btn-sm ml-4\"\r\n                        onClick={this.handleNewExam}\r\n                      >\r\n                        <i className=\"fas fa-plus\"></i>\r\n                      </button>\r\n                    </th>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      let examToday = false,\r\n        newExam = false;\r\n      return (\r\n        <div className=\"card card-info card-outline\">\r\n          <div className=\"card-header\">\r\n            <i className=\"fas fa-notes-medical mr-1\"></i>\r\n            Examenes realizados\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <table className=\"table table-hover table-nowrap\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Folio</th>\r\n                  <th>Fecha</th>\r\n                  <th>Edad</th>\r\n                  <th>Estado</th>\r\n                  <th className=\"text-center\">Acciones</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {load ? (\r\n                  <tr>\r\n                    <td colSpan=\"8\" className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : Object.keys(data.data).length ? (\r\n                  data.data.map((row) => {\r\n                    examToday = moment(new Date()).isSame(\r\n                      moment(row.created_at),\r\n                      \"day\"\r\n                    );\r\n                    newExam = newExam ? true : examToday;\r\n                    console.log(\"Hoy: \", examToday, newExam);\r\n                    return (\r\n                      <tr\r\n                        key={row.id}\r\n                        className={examToday ? \"table-success\" : \"\"}\r\n                      >\r\n                        <td>\r\n                          <span className=\"badge badge-info\">{row.id}</span>\r\n                        </td>\r\n                        <td>{moment(row.created_at).format(\"L\")}</td>\r\n                        <td>{row.edad}</td>\r\n                        <td>\r\n                          {row.estado ? (\r\n                            <span className=\"badge badge-secondary\">\r\n                              Terminado\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"badge badge-success\">Activo</span>\r\n                          )}\r\n                        </td>\r\n                        <td className=\"text-right\">\r\n                          <Link\r\n                            className=\"btn btn-outline-info btn-sm\"\r\n                            to={\"/consultorio/registro/\" + row.id}\r\n                            onClick={(e) => {\r\n                              this.changePage(\"/consultorio/registro/\");\r\n                            }}\r\n                            alt=\"Ver examen\"\r\n                          >\r\n                            <i className=\"fas fa-share\"></i> Ver examen\r\n                          </Link>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <tr>\r\n                    <th colSpan=\"5\" className=\"text-center\">\r\n                      Aun no tiene examenes\r\n                    </th>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"card-footer\">\r\n            {!newExam ? (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-info float-right\"\r\n                onClick={this.handleNewExam}\r\n              >\r\n                <i className=\"fas fa-plus\"></i>\r\n              </button>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleSaveExam = (data) => {\r\n    const { id } = data,\r\n      { paciente, edad } = this.props;\r\n    delete data.id;\r\n    data.contact_id = paciente;\r\n    data.edad = edad;\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de actualizar el examen?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Actualizar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Actualiza el examen según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n            method: \"PUT\",\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Examen almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Examen actualizado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el pedido\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  handleDataExam = (key, value) => {\r\n    let { exam } = this.state;\r\n    exam[key] = value;\r\n    this.setState({\r\n      exam,\r\n    });\r\n  };\r\n  handleChangeInput = (key, value) => {\r\n    this.props.ChangeInput(key, value);\r\n  };\r\n  handleClickDeleteExam = (e) => {\r\n    e.preventDefault();\r\n    if (window.confirm(\"¿Realmente desea cambiar de examen?\")) {\r\n      this.props.ChangeInput(\"exam_id\", 0);\r\n      this.props.ChangeInput(\"exam\", {});\r\n    }\r\n  };\r\n  handleClickSelect = (exam) => {\r\n    this.props.ChangeInput(\"exam_id\", exam.id);\r\n    this.props.ChangeInput(\"exam\", exam);\r\n  };\r\n  handleNewOrder = (id) => {\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva orden?\",\r\n      icon: \"info\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Si\",\r\n      cancelButtonText: \"No\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables en localStorage\r\n          let { host, token } = this.state,\r\n            { paciente } = this.props,\r\n            body = {\r\n              contact_id: paciente,\r\n              exam_id: id,\r\n              items: JSON.stringify([]),\r\n            };\r\n          //Crear o modificar examen\r\n          console.log(\"Enviando datos del pedido a la API\");\r\n          return fetch(\"http://\" + host + \"/api/orders\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Orden almacenada\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n          window.Swal.fire(\r\n            \"Orden creada con exito\",\r\n            \"\",\r\n            \"success\"\r\n          ).then((res) => this.getExams());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la orden\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  handleNewExam = (e) => {\r\n    e.preventDefault();\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear un nueva examen?\",\r\n      icon: \"info\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Si\",\r\n      cancelButtonText: \"No\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables en localStorage\r\n          let { host, token } = this.state,\r\n            { paciente, edad } = this.props,\r\n            body = {\r\n              contact_id: paciente,\r\n              edad,\r\n            };\r\n          //Crear examen\r\n          console.log(\"Enviando datos del examen a la API\");\r\n          return fetch(\"http://\" + host + \"/api/exams\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Examen almacenado\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Examen creado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.getExams();\r\n            this.props.ChangeInput(\"exam_id\", data.data.id);\r\n            this.props.ChangeInput(\"exam\", data.data);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el examen\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  getExams = () => {\r\n    const { load, host, token } = this.state;\r\n    const { paciente } = this.props;\r\n\r\n    if (paciente) {\r\n      //Variables en localStorage\r\n      const url = \"http://\" + host + \"/api/exams\",\r\n        page = this.state.page > 0 ? \"?page=\" + this.state.page : \"?page=1\",\r\n        orderby = \"&orderby=created_at&order=desc\",\r\n        client = \"&paciente=\" + paciente;\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n\r\n      //Realiza la peticion de examenes a la API\r\n      console.log(\"Descargando examenes del contacto\");\r\n      fetch(url + page + client + orderby, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            this.setState({\r\n              load: false,\r\n            });\r\n            console.log(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          console.log(\"Examenes almacenados\");\r\n          this.setState({\r\n            data: !data.message ? data : [],\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class NameInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: props.validName ? \"bg-blue\" : \"bg-red\",\r\n      validate: props.validName ? \"\" : \" border border-danger\",\r\n      text: \"Debe de tener por lo menos nombre y apellido\",\r\n      searchUser: false,\r\n      contacts: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidUpdate(props) {\r\n    if (props.validName !== this.props.validName) {\r\n      this.setState({\r\n        bgColor: this.props.validName ? \"bg-blue\" : \"bg-red\",\r\n        validate: this.props.validName ? \"\" : \" border border-danger\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { name, validName } = this.props;\r\n    let { bgColor, validate, text, searchUser, contacts } = this.state;\r\n    if (!name) name = \"\";\r\n    return (\r\n      <React.Fragment>\r\n        {name ? (\r\n          <div className=\"ml-2 mt-1\">\r\n            <small>\r\n              <label>Nombre completo</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              {searchUser ? (\r\n                <i className=\"fas fa-spinner\"></i>\r\n              ) : (\r\n                <i className=\"fas fa-id-card-alt\"></i>\r\n              )}\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className={\"form-control text-capitalize\" + validate}\r\n            placeholder=\"Nombre completo\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={this.handleChange}\r\n            autoFocus={!name.length ? true : false}\r\n            autoComplete=\"off\"\r\n            required=\"required\"\r\n            pattern=\"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*\"\r\n            minLength=\"8\"\r\n            list=\"contactos_db\"\r\n          />\r\n        </div>\r\n        {contacts.length ? (\r\n          <datalist id=\"contactos_db\">\r\n            {contacts.map((contact) => {\r\n              return (\r\n                <option\r\n                  key={contact.id}\r\n                  value={this.eraseTilde(contact.nombre)}\r\n                />\r\n              );\r\n            })}\r\n          </datalist>\r\n        ) : null}\r\n        {!validName ? (\r\n          <div className=\"p-0\">\r\n            <small className=\"text-danger\">{text}</small>\r\n          </div>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  eraseTilde = (string) => {\r\n    string = string.replace(new RegExp(/[àáâãäå]/g), \"a\");\r\n    string = string.replace(new RegExp(/[èéêë]/g), \"e\");\r\n    string = string.replace(new RegExp(/[ìíîï]/g), \"i\");\r\n    string = string.replace(new RegExp(/[òóôõö]/g), \"o\");\r\n    string = string.replace(new RegExp(/[ùúûü]/g), \"u\");\r\n    return string;\r\n  };\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    let regex = /^[a-z.]{2,20}[\\s]{1}[a-z.]{2,20}.*/,\r\n      x = {\r\n        target: {\r\n          name: \"validName\",\r\n          value: \"\",\r\n          target: \"\",\r\n        },\r\n      },\r\n      stringOk = this.eraseTilde(value.toLowerCase());\r\n    e.target.value = stringOk;\r\n\r\n    if (regex.test(value)) {\r\n      this.setState({\r\n        bgColor: \"bg-blue\",\r\n        validate: \"\",\r\n      });\r\n      x.target.value = true;\r\n      this.props.onChange(x);\r\n      this.validUser(e.target.value, x);\r\n    } else {\r\n      this.setState({\r\n        bgColor: \"bg-red\",\r\n        validate: \" border border-danger\",\r\n        text: \"No tiene el formato de nombre de persona\",\r\n        contacts: [],\r\n      });\r\n      x.target.value = false;\r\n      this.props.onChange(x);\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validUser = (search, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n      name = \"?name=\" + search;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de contactos\r\n      this.setState({\r\n        searchUser: true,\r\n      });\r\n      fetch(url + name, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            data.data.map((contacto) => {\r\n              let nombre = this.eraseTilde(contacto.nombre);\r\n              if (nombre === search) {\r\n                console.log(\"Contacto registrado \");\r\n                this.setState({\r\n                  bgColor: \"bg-red\",\r\n                  validate: \" border border-danger\",\r\n                  text: \"El contacto ya esta registrado\",\r\n                  searchUser: false,\r\n                  contacts: [],\r\n                });\r\n                x.target.value = false;\r\n                this.props.onChange(x);\r\n              }\r\n              return false;\r\n            });\r\n            this.setState({\r\n              searchUser: false,\r\n              contacts: data.data,\r\n            });\r\n          } else {\r\n            console.error(\"Error en la descarga de contactos\", data.message);\r\n            this.setState({\r\n              searchUser: false,\r\n            });\r\n            x.target.value = false;\r\n            this.props.onChange(x);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          this.setState({\r\n            searchUser: false,\r\n          });\r\n          x.target.value = false;\r\n          this.props.onChange(x);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class EmailInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bgColor: props.validEmail ? \"bg-blue\" : \"bg-red\",\r\n      validate: props.validEmail ? \"\" : \" border border-danger\",\r\n      text: \"No es un email correcto\",\r\n      emailContact: false,\r\n      contacts: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeFetch = null;\r\n    this.emailOriginal = props.email;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidUpdate(props) {\r\n    if (props.validEmail !== this.props.validEmail) {\r\n      this.setState({\r\n        bgColor: this.props.validEmail ? \"bg-blue\" : \"bg-red\",\r\n        validate: this.props.validEmail ? \"\" : \" border border-danger\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { email, validEmail } = this.props;\r\n    let { bgColor, validate, text, emailContact, contacts } = this.state;\r\n    if (!email) email = \"\";\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {email ? (\r\n          <div className=\"ml-2 mt-1\">\r\n            <small>\r\n              <label>Correo electronico</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mt-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className={\"input-group-text \" + bgColor}>\r\n              {emailContact ? (\r\n                <i className=\"fas fa-spinner\"></i>\r\n              ) : (\r\n                <i className=\"fas fa-at\"></i>\r\n              )}\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"email\"\r\n            className={\"form-control\" + validate}\r\n            placeholder=\"Correo electronico\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={this.handleChange}\r\n            autoComplete=\"off\"\r\n            minLength=\"8\"\r\n            list=\"email_db\"\r\n          />\r\n          {contacts.length ? (\r\n            <datalist id=\"email_db\">\r\n              {contacts.map((contact) => {\r\n                return <option key={contact.id} value={contact.email} />;\r\n              })}\r\n            </datalist>\r\n          ) : null}\r\n        </div>\r\n        {!validEmail ? (\r\n          <div className=\"p-0\">\r\n            <small className=\"text-danger\">{text}</small>\r\n          </div>\r\n        ) : null}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  eraseTilde = (string) => {\r\n    string = string.replace(new RegExp(/[àáâãäå]/g), \"a\");\r\n    string = string.replace(new RegExp(/[èéêë]/g), \"e\");\r\n    string = string.replace(new RegExp(/[ìíîï]/g), \"i\");\r\n    string = string.replace(new RegExp(/[òóôõö]/g), \"o\");\r\n    string = string.replace(new RegExp(/[ùúûü]/g), \"u\");\r\n    return string;\r\n  };\r\n  handleChange = (e) => {\r\n    const { value } = e.target;\r\n    const { id } = this.props;\r\n    let regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n      x = {\r\n        target: {\r\n          name: \"validEmail\",\r\n          value: \"\",\r\n          target: \"\",\r\n        },\r\n      },\r\n      stringOk = this.eraseTilde(value.toLowerCase());\r\n    e.target.value = stringOk;\r\n\r\n    if (regex.test(value)) {\r\n      this.setState({\r\n        bgColor: \"bg-blue\",\r\n        validate: \"\",\r\n      });\r\n      x.target.value = true;\r\n      this.props.onChange(x);\r\n      if (!id) {\r\n        if (this.emailOriginal !== e.target.value)\r\n          this.validUser(e.target.value, x);\r\n      } else {\r\n        this.validUser(e.target.value, x);\r\n      }\r\n    } else {\r\n      this.setState({\r\n        bgColor: \"bg-red\",\r\n        validate: \" border border-danger\",\r\n        text: \"No es un email correcto\",\r\n        contacts: [],\r\n      });\r\n      x.target.value = false;\r\n      this.props.onChange(x);\r\n    }\r\n    this.props.onChange(e);\r\n  };\r\n  validUser = (search, x) => {\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n      name = \"?email=\" + search;\r\n\r\n    if (this.timeFetch) clearTimeout(this.timeFetch);\r\n    this.timeFetch = setTimeout(() => {\r\n      //Realiza la peticion de contactos\r\n      this.setState({\r\n        emailContact: true,\r\n      });\r\n      fetch(url + name, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n            console.error(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            data.data.map((contacto) => {\r\n              if (contacto.email === search) {\r\n                this.setState({\r\n                  bgColor: \"bg-red\",\r\n                  validate: \" border border-danger\",\r\n                  text: \"El email ya esta registrado\",\r\n                  emailContact: false,\r\n                  contacts: [],\r\n                });\r\n                x.target.value = false;\r\n                this.props.onChange(x);\r\n              }\r\n              return false;\r\n            });\r\n            this.setState({\r\n              emailContact: false,\r\n              contacts: data.data,\r\n            });\r\n          } else {\r\n            console.error(\"Error en la descarga de contactos\", data.message);\r\n            this.setState({\r\n              emailContact: false,\r\n            });\r\n            x.target.value = false;\r\n            this.props.onChange(x);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          this.setState({\r\n            emailContact: false,\r\n          });\r\n          x.target.value = false;\r\n          this.props.onChange(x);\r\n        });\r\n    }, 1000);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport NameInput from \"./nameInput\";\r\nimport EmailInput from \"./emailInput\";\r\n\r\nexport default class AddPersonal extends Component {\r\n  render() {\r\n    let {\r\n      type,\r\n      business,\r\n      name,\r\n      rfc,\r\n      email,\r\n      birthday,\r\n      validName,\r\n      validEmail,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"col \">\r\n        <small>\r\n          <label>Tipo de cliente</label>\r\n        </small>\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-clipboard-check\"></i>\r\n            </span>\r\n          </div>\r\n          <select\r\n            className=\"custom-select\"\r\n            name=\"type\"\r\n            value={type}\r\n            onChange={this.catchInputs}\r\n          >\r\n            <option value=\"0\">Cliente</option>\r\n            <option value=\"1\">Proveedor</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <input\r\n              type=\"checkbox\"\r\n              name=\"business\"\r\n              className=\"mr-2\"\r\n              checked={business}\r\n              onChange={this.catchInputs}\r\n            />\r\n            <small>\r\n              <label>¿Es una empresa?</label>\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        <NameInput\r\n          name={name}\r\n          validName={validName}\r\n          onChange={this.catchInputs}\r\n        />\r\n\r\n        {rfc ? (\r\n          <div className=\"ml-2 mt-1\">\r\n            <small>\r\n              <label>RFC</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-file-invoice-dollar\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-uppercase\"\r\n            placeholder=\"RFC\"\r\n            name=\"rfc\"\r\n            value={rfc ? rfc : \"\"}\r\n            onChange={this.catchInputs}\r\n            required={false}\r\n            minLength=\"10\"\r\n          />\r\n        </div>\r\n\r\n        <EmailInput\r\n          email={email}\r\n          validEmail={validEmail}\r\n          onChange={this.catchInputs}\r\n        />\r\n\r\n        {!business && !type ? (\r\n          <React.Fragment>\r\n            {birthday ? (\r\n              <div className=\"ml-2 mt-1\">\r\n                <small>\r\n                  <label>Fecha de nacimiento</label>\r\n                </small>\r\n              </div>\r\n            ) : (\r\n              <br />\r\n            )}\r\n            <div className=\"input-group mb-1\">\r\n              <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\">\r\n                  <i className=\"fas fa-calendar-check\"></i>\r\n                </span>\r\n              </div>\r\n              <input\r\n                type=\"date\"\r\n                className=\"form-control\"\r\n                placeholder=\"Fecha de nacimiento\"\r\n                name=\"birthday\"\r\n                value={birthday ? birthday : \"\"}\r\n                onChange={this.catchInputs}\r\n              />\r\n            </div>\r\n          </React.Fragment>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (x) => {\r\n    this.props.onChange(x);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AddDomicilio extends Component {\r\n  render() {\r\n    let { calle, colonia, municipio, estado, cp } = this.props;\r\n    return (\r\n      <div className=\"col\">\r\n        {calle ? (\r\n          <small>\r\n            <label>Calle y numero</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-road\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Calle y numero\"\r\n            name=\"calle\"\r\n            value={calle}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {colonia ? (\r\n          <small>\r\n            <label>Colonia</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-location-arrow\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Colonia\"\r\n            name=\"colonia\"\r\n            value={colonia}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {municipio ? (\r\n          <small>\r\n            <label>Municipio</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-location-arrow\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Municipio\"\r\n            name=\"municipio\"\r\n            value={municipio}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {estado ? (\r\n          <small>\r\n            <label>Estado</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-map-marker\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-capitalize\"\r\n            placeholder=\"Estado\"\r\n            name=\"estado\"\r\n            value={estado}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n        {cp ? (\r\n          <small>\r\n            <label>Codigo postal</label>\r\n          </small>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-map-marker\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Codigo Postal\"\r\n            name=\"cp\"\r\n            value={cp}\r\n            onChange={this.catchInputs}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (x) => {\r\n    this.props.onChange(x);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AddTelefonos extends Component {\r\n  render() {\r\n    let { t_casa, t_oficina, t_movil } = this.props,\r\n      verify =\r\n        t_casa.length === 10 ||\r\n        t_movil.length === 10 ||\r\n        t_oficina.length === 10;\r\n\r\n    return (\r\n      <div className=\"col\">\r\n        {t_casa ? (\r\n          <div className=\"ml-1 mt-1\">\r\n            <small>\r\n              <label>Telefono de casa</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-phone\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Telefono de casa\"\r\n            name=\"t_casa\"\r\n            value={t_casa}\r\n            onChange={this.catchInputs}\r\n            pattern=\"^[\\d]{10}$\"\r\n            maxLength=\"10\"\r\n          />\r\n        </div>\r\n        {t_oficina ? (\r\n          <div className=\"ml-1 mt-1\">\r\n            <small>\r\n              <label>Telefono de oficina</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-phone-alt\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Telefono de oficina\"\r\n            name=\"t_oficina\"\r\n            value={t_oficina}\r\n            onChange={this.catchInputs}\r\n            pattern=\"^[\\d]{10}$\"\r\n            maxLength=\"10\"\r\n          />\r\n        </div>\r\n        {t_movil ? (\r\n          <div className=\"ml-1 mt-1\">\r\n            <small>\r\n              <label>Telefono celular</label>\r\n            </small>\r\n          </div>\r\n        ) : (\r\n          <br />\r\n        )}\r\n        <div className=\"input-group mb-1\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"fas fa-mobile-alt\"></i>\r\n            </span>\r\n          </div>\r\n          <input\r\n            type=\"tel\"\r\n            className=\"form-control\"\r\n            placeholder=\"Telefono celular\"\r\n            name=\"t_movil\"\r\n            value={t_movil}\r\n            onChange={this.catchInputs}\r\n            pattern=\"^[\\d]{10}$\"\r\n            required={\r\n              t_casa.length !== 10 && t_oficina.length !== 10 ? true : false\r\n            }\r\n            maxLength=\"10\"\r\n          />\r\n        </div>\r\n        {!verify ? (\r\n          <div className=\"mt-2 p-0 text-danger\">\r\n            <small>Por lo menos capture un telefono</small>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (x) => {\r\n    this.props.onChange(x);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Mapa from \"./mapa\";\r\nimport ListExam from \"../Exam/listsExams\";\r\nimport Personal from \"./add_personal\";\r\nimport Domicilio from \"./add_domicilio\";\r\nimport Telefono from \"./add_telefonos\";\r\n\r\nexport default class ContactsAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Recogemos valores de registro previo\r\n    let contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    this.state = {\r\n      id: 0,\r\n      name: contact && contact.name ? contact.name : \"\",\r\n      validName: false,\r\n      rfc: \"\",\r\n      email: \"\",\r\n      validEmail: false,\r\n      type: 0,\r\n      birthday: \"\",\r\n      calle: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      estado: \"\",\r\n      cp: \"\",\r\n      t_casa: \"\",\r\n      t_oficina: \"\",\r\n      t_movil: \"\",\r\n      business: false,\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeSave = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    let id = this.props.match.params.id,\r\n      //Recogemos valores de registro inconcluso\r\n      data = JSON.parse(localStorage.getItem(\"OrusContactNew\"));\r\n\r\n    if (id) {\r\n      this.getUser(id);\r\n    } else {\r\n      //Si existe un usuario previo\r\n      if (\r\n        data &&\r\n        data.name &&\r\n        data.name.length > 4 &&\r\n        window.confirm(\r\n          \"Existe un registro previo de \" +\r\n            data.name.toUpperCase() +\r\n            \", \\n ¿Desea Cargar los datos?\"\r\n        )\r\n      ) {\r\n        this.setState({\r\n          name: data.name,\r\n          validName: true,\r\n          rfc: data.rfc,\r\n          email: data.email,\r\n          validEmail: true,\r\n          type: data.type,\r\n          birthday: data.birthday,\r\n          calle: data.calle,\r\n          colonia: data.colonia,\r\n          municipio: data.municipio,\r\n          estado: data.estado,\r\n          cp: data.cp,\r\n          t_casa: data.t_casa,\r\n          t_oficina: data.t_oficina,\r\n          t_movil: data.t_movil,\r\n        });\r\n      }\r\n      localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (\r\n      !this.state.id &&\r\n      !this.state.load &&\r\n      this.state.validName &&\r\n      this.state.validEmail\r\n    ) {\r\n      if (this.timeSave) clearTimeout(this.timeSave);\r\n      this.timeSave = setTimeout(() => {\r\n        localStorage.setItem(\r\n          \"OrusContactNew\",\r\n          JSON.stringify({\r\n            name: this.state.name,\r\n            rfc: this.state.rfc,\r\n            email: this.state.email,\r\n            type: this.state.type,\r\n            birthday: this.state.birthday,\r\n            calle: this.state.calle,\r\n            colonia: this.state.colonia,\r\n            municipio: this.state.municipio,\r\n            estado: this.state.estado,\r\n            cp: this.state.cp,\r\n            t_casa: this.state.t_casa,\r\n            t_oficina: this.state.t_oficina,\r\n            t_movil: this.state.t_movil,\r\n          })\r\n        );\r\n      }, 1500);\r\n    } else {\r\n      localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      id,\r\n      name,\r\n      rfc,\r\n      email,\r\n      type,\r\n      birthday,\r\n      calle,\r\n      colonia,\r\n      municipio,\r\n      estado,\r\n      cp,\r\n      t_casa,\r\n      t_oficina,\r\n      t_movil,\r\n      business,\r\n      load,\r\n      validName,\r\n      validEmail,\r\n    } = this.state;\r\n\r\n    return (\r\n      <form onSubmit={this.handleSave}>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12\">\r\n            <div className=\"card card-danger card-outline\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title text-danger\">\r\n                  <i className=\"fas fa-address-book mr-2\"></i>\r\n                  {id ? \"Editar contacto\" : \"Registrar nuevo contacto\"}\r\n                  {validName && validEmail ? (\r\n                    <span className=\"ml-2 text-muted\">\r\n                      <small>(Almacenado automatico)</small>\r\n                    </span>\r\n                  ) : null}\r\n                </h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"row was-validated\">\r\n                  <Personal\r\n                    id={id}\r\n                    name={name}\r\n                    rfc={rfc}\r\n                    email={email}\r\n                    type={type}\r\n                    birthday={birthday}\r\n                    business={business}\r\n                    validName={validName}\r\n                    validEmail={validEmail}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n\r\n                  <Domicilio\r\n                    calle={calle}\r\n                    colonia={colonia}\r\n                    municipio={municipio}\r\n                    estado={estado}\r\n                    cp={cp}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n\r\n                  <Telefono\r\n                    t_casa={t_casa}\r\n                    t_movil={t_movil}\r\n                    t_oficina={t_oficina}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"card-footer\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-12\">\r\n                    {load ? (\r\n                      <div className=\"text-center\">\r\n                        <div\r\n                          className=\"spinner-border text-primary\"\r\n                          role=\"status\"\r\n                        >\r\n                          <span className=\"sr-only\">Loading...</span>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"btn-group float-right\" role=\"group\">\r\n                        <Link\r\n                          to=\"/contactos\"\r\n                          className=\"btn btn-dark\"\r\n                          onClick={(e) => {\r\n                            this.changePage(\"/contactos\");\r\n                          }}\r\n                        >\r\n                          <i\r\n                            className={\r\n                              id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                            }\r\n                          ></i>\r\n                          <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                        </Link>\r\n                        <button\r\n                          type=\"submit\"\r\n                          className={\r\n                            validName &&\r\n                            validEmail &&\r\n                            (t_casa || t_oficina || t_movil)\r\n                              ? \"btn btn-danger\"\r\n                              : \"btn btn-danger disabled\"\r\n                          }\r\n                          disabled={\r\n                            validName &&\r\n                            validEmail &&\r\n                            (t_casa || t_oficina || t_movil)\r\n                              ? \"\"\r\n                              : \"disabled\"\r\n                          }\r\n                        >\r\n                          <i className=\"fas fa-save mr-1\"></i>\r\n                          Guardar\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          {this.state.calle && !this.state.type ? (\r\n            <div className=\"col\">\r\n              <Mapa\r\n                calle={this.state.calle}\r\n                colonia={this.state.colonia}\r\n                municipio={this.state.municipio}\r\n                estado={this.state.estado}\r\n                cp={this.state.cp}\r\n                changeAddress={this.changeAddress}\r\n              />\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {this.state.id && !this.state.type ? (\r\n            <div className=\"col\">\r\n              <ListExam\r\n                paciente={this.state.id}\r\n                exam={{}}\r\n                page={this.changePage}\r\n                edad={\r\n                  moment(this.state.birthday)\r\n                    .fromNow(true)\r\n                    .replace(/[a-zA-ZñÑ]/gi, \"\") * 1\r\n                }\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  changeAddress = (json) => {\r\n    this.setState(json);\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value = e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { validName, validEmail, id } = this.state;\r\n\r\n    //Verificamos campos validos\r\n    if (!validName) {\r\n      window.Swal.fire(\r\n        \"Base de datos\",\r\n        \"El contacto ya esta registrado\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (!validEmail) {\r\n      window.Swal.fire(\r\n        \"Base de datos\",\r\n        \"El email ya esta registrado\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar al contacto?\"\r\n        : \"¿Esta seguro de crear un nuevo contacto?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let {\r\n              name,\r\n              rfc,\r\n              email,\r\n              type,\r\n              birthday,\r\n              calle,\r\n              colonia,\r\n              municipio,\r\n              estado,\r\n              cp,\r\n              t_casa,\r\n              t_oficina,\r\n              t_movil,\r\n              business,\r\n              host,\r\n              token,\r\n            } = this.state,\r\n            //Creamos el body\r\n            body = {\r\n              name,\r\n              rfc,\r\n              email,\r\n              type,\r\n              birthday: business ? \"\" : birthday,\r\n              business,\r\n              domicilio: JSON.stringify({\r\n                calle,\r\n                colonia,\r\n                municipio,\r\n                estado,\r\n                cp,\r\n              }),\r\n              telnumbers: JSON.stringify({\r\n                t_casa,\r\n                t_oficina,\r\n                t_movil,\r\n              }),\r\n            },\r\n            //Identificamos la URL y el metodo segun sea el caso (Actualizar o agregar)\r\n            url = id\r\n              ? \"http://\" + host + \"/api/contacts/\" + id\r\n              : \"http://\" + host + \"/api/contacts\",\r\n            //Actualiza el contacto o creamos el contacto\r\n            method = id ? \"PUT\" : \"POST\";\r\n\r\n          //Enviamos datos al API\r\n          console.log(\"Enviando datos del contacto a la API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Contacto almacenado\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n          localStorage.setItem(\r\n            \"OrusContactInUse\",\r\n            JSON.stringify({ id: data.data.id })\r\n          );\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Contacto actualizado con exito\"\r\n              : \"Contacto almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.props.history.goBack();\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el contacto\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getUser = (id) => {\r\n    if (id > 0) {\r\n      //Variables en localStorage\r\n      let { load, host, token } = this.state;\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      //Realiza la peticion al API\r\n      console.log(\"Descargando datos del contacto del API\");\r\n      fetch(\"http://\" + host + \"/api/contacts/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.data) {\r\n            let { domicilio, telefonos } = data.data;\r\n            console.log(\"Almacenando datos del contacto\");\r\n            this.setState({\r\n              id: data.data.id,\r\n              name: data.data.nombre,\r\n              rfc: data.data.rfc,\r\n              email: data.data.email,\r\n              type: data.data.tipo,\r\n              business: data.data.empresa,\r\n              birthday: data.data.f_nacimiento,\r\n              calle: domicilio && domicilio.calle ? domicilio.calle : \"\",\r\n              colonia: domicilio && domicilio.colonia ? domicilio.colonia : \"\",\r\n              municipio:\r\n                domicilio && domicilio.municipio ? domicilio.municipio : \"\",\r\n              estado: domicilio && domicilio.estado ? domicilio.estado : \"\",\r\n              cp: domicilio && domicilio.cp ? domicilio.cp : \"\",\r\n              t_casa: telefonos && telefonos.t_casa ? telefonos.t_casa : \"\",\r\n              t_oficina:\r\n                telefonos && telefonos.t_oficina ? telefonos.t_oficina : \"\",\r\n              t_movil: telefonos && telefonos.t_movil ? telefonos.t_movil : \"\",\r\n              validName: true,\r\n              validEmail: true,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\"Error\", \"Al descargar el contacto\", \"error\");\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AddContact extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Recogemos valores de registro previo\r\n    this.state = {\r\n      name: \"\",\r\n      validName: false,\r\n      rfc: \"\",\r\n      email: \"\",\r\n      validEmail: false,\r\n      type: 0,\r\n      birthday: \"\",\r\n      t_casa: \"\",\r\n      t_oficina: \"\",\r\n      t_movil: \"\",\r\n      business: false,\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n    this.timeSave = null;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      name,\r\n      email,\r\n      birthday,\r\n      t_casa,\r\n      t_oficina,\r\n      t_movil,\r\n      load,\r\n      validName,\r\n      validEmail,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card card-danger card-outline\">\r\n            <div className=\"card-header\">\r\n              <h3 className=\"card-title text-danger\">\r\n                <i className=\"fas fa-address-book mr-2\"></i>\r\n                Pacientes\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"card-body\">\r\n              <div className=\"row was-validated\">\r\n                <div className=\"input-group mb-1\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className={\"input-group-text \"}>\r\n                      <i className=\"fas fa-id-card-alt\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    className={\"form-control text-capitalize\"}\r\n                    placeholder=\"Nombre completo\"\r\n                    name=\"name\"\r\n                    value={name}\r\n                    onChange={this.handleChange}\r\n                    autoFocus={!name.length ? true : false}\r\n                    autoComplete=\"off\"\r\n                    required=\"required\"\r\n                    pattern=\"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*\"\r\n                    minLength=\"8\"\r\n                    list=\"contactos_db\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-1\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className={\"input-group-text \"}>\r\n                      <i className=\"fas fa-at\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"email\"\r\n                    className={\"form-control\"}\r\n                    placeholder=\"Correo electronico\"\r\n                    name=\"email\"\r\n                    value={email}\r\n                    onChange={this.handleChange}\r\n                    autoComplete=\"off\"\r\n                    minLength=\"8\"\r\n                    list=\"email_db\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-1\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-phone\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"tel\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Telefono\"\r\n                    name=\"t_movil\"\r\n                    value={t_movil}\r\n                    onChange={this.catchInputs}\r\n                    pattern=\"^[\\d]{10}$\"\r\n                    maxLength=\"10\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"input-group mb-1\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-calendar-check\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Fecha de nacimiento\"\r\n                  name=\"birthday\"\r\n                  value={birthday ? birthday : \"\"}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"card-footer\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                  {load ? (\r\n                    <div className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"btn-group float-right\" role=\"group\">\r\n                      <button\r\n                        type=\"submit\"\r\n                        className={\r\n                          validName &&\r\n                          validEmail &&\r\n                          (t_casa || t_oficina || t_movil)\r\n                            ? \"btn btn-danger\"\r\n                            : \"btn btn-danger disabled\"\r\n                        }\r\n                        disabled={\r\n                          validName &&\r\n                          validEmail &&\r\n                          (t_casa || t_oficina || t_movil)\r\n                            ? \"\"\r\n                            : \"disabled\"\r\n                        }\r\n                      >\r\n                        <i className=\"fas fa-save mr-1\"></i>\r\n                        Guardar\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Pagination from \"./pagination\";\r\n\r\nexport default class ToolsCategory extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      category_list: [],\r\n      category_select: [],\r\n      category_hijos: [],\r\n      category_hijos_3: [],\r\n      meta: {},\r\n      add: false,\r\n      name: \"\",\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      newItem: 0,\r\n      page: 1,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      load: true,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.page !== this.state.page) {\r\n      console.log(\"Recargando categorias\");\r\n      this.getCategories();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { category_list, meta, load } = this.state,\r\n      category_hijos = this.state.category_hijos,\r\n      category_hijos_3 = this.state.category_hijos_3;\r\n\r\n    return (\r\n      <div className=\"card card-primary card-outline\">\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">Categorias</h5>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Nombre</th>\r\n                <th>Padre</th>\r\n                <th>Eliminar</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {!load ? (\r\n                category_list.map((cat) => {\r\n                  let padre = \"\";\r\n\r\n                  if (cat.depende_de != null) {\r\n                    if (cat.depende_de.depende_de != null) {\r\n                      padre = cat.depende_de.depende_de.categoria;\r\n                    }\r\n                    padre = padre\r\n                      ? padre + \"/\" + cat.depende_de.categoria\r\n                      : cat.depende_de.categoria;\r\n                  }\r\n                  padre = padre ? padre : \"--\";\r\n\r\n                  return (\r\n                    <tr\r\n                      key={cat.id}\r\n                      className={\r\n                        cat.id === this.state.newItem ? \"table-success\" : \"\"\r\n                      }\r\n                    >\r\n                      <td className=\"text-capitalize\">{cat.categoria}</td>\r\n                      <td className=\"text-capitalize\">{padre}</td>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn btn-outline-light btn-sm\"\r\n                          onClick={(e) => {\r\n                            this.handleClickDelete(cat.id, cat.categoria);\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-trash\"></i>\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"8\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n            {this.state.add && !load ? (\r\n              <tfoot>\r\n                <tr>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      className=\"form-control\"\r\n                      autoComplete=\"off\"\r\n                      value={this.state.name}\r\n                      onChange={this.catchInputs}\r\n                      ref={(input) => {\r\n                        this.nameInput = input;\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <select\r\n                      name=\"category_id\"\r\n                      className=\"form-control\"\r\n                      value={this.state.category_id}\r\n                      onChange={this.handleCategoryChange}\r\n                    >\r\n                      <option value=\"0\">Inicial</option>\r\n                      {this.state.category_select.map((cat) => {\r\n                        return (\r\n                          <option key={cat.id} value={cat.id}>\r\n                            {cat.categoria}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                    {category_hijos.length ? (\r\n                      <select\r\n                        name=\"category_id_2\"\r\n                        className=\"form-control mt-2\"\r\n                        value={this.state.category_id_2}\r\n                        onChange={this.handleCategoryChange}\r\n                      >\r\n                        <option value=\"0\">Raiz</option>\r\n                        {this.state.category_hijos.map((cat) => {\r\n                          return (\r\n                            <option key={cat.id} value={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        })}\r\n                      </select>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    {category_hijos_3.length ? (\r\n                      <select\r\n                        name=\"category_id_3\"\r\n                        className=\"form-control mt-2\"\r\n                        value={this.state.category_id_3}\r\n                        onChange={this.handleCategoryChange}\r\n                      >\r\n                        <option value=\"0\">Raiz</option>\r\n                        {this.state.category_hijos_3.map((cat) => {\r\n                          return (\r\n                            <option key={cat.id} value={cat.id}>\r\n                              {cat.categoria}\r\n                            </option>\r\n                          );\r\n                        })}\r\n                      </select>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-dark btn-sm\"\r\n                      onClick={this.handleClickSave}\r\n                    >\r\n                      <i className=\"fas fa-save\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            ) : (\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan=\"3\">\r\n                    <Pagination\r\n                      meta={meta}\r\n                      handleChangePage={this.handleChangePage}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            )}\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={this.handleClickAdd}\r\n          >\r\n            {this.state.add ? (\r\n              <i className=\"fas fa-undo\"></i>\r\n            ) : (\r\n              <i className=\"fas fa-plus\"></i>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleCategoryChange = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"category_id\") {\r\n      if (value) {\r\n        this.state.category_select.map((cat) => {\r\n          if (cat.id === value * 1) {\r\n            this.setState({\r\n              category_hijos: cat.hijos,\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n    if (name === \"category_id_2\") {\r\n      if (value) {\r\n        this.state.category_hijos.map((cat) => {\r\n          if (cat.id === value * 1) {\r\n            this.setState({\r\n              category_hijos_3: cat.hijos,\r\n            });\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n    }\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n    });\r\n  };\r\n  handleClickDelete = (id, name) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar la categoria \" + name.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de categoria por API\");\r\n          return fetch(\"http://\" + host + \"/api/categories/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Categoria eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Categoria eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getCategories());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  handleClickSave = () => {\r\n    //Verificamos campos validos\r\n    if (this.state.name.length < 4) {\r\n      window.Swal.fire(\r\n        \"Verificación\",\r\n        \"Debe de escribir el nombre de la categoria\",\r\n        \"warning\"\r\n      );\r\n      this.nameInput.focus();\r\n      return false;\r\n    }\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear una nueva categoria?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          let { host, token } = this.state,\r\n            body = {\r\n              name: this.state.name,\r\n              category_id: this.state.category_id_3\r\n                ? this.state.category_id_3\r\n                : this.state.category_id_2\r\n                ? this.state.category_id_2\r\n                : this.state.category_id,\r\n            };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(\"http://\" + host + \"/api/categories\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Categoria almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Categoria almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.setState({\r\n              newItem: data.data.id,\r\n            });\r\n            this.getCategories();\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la categoria\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getCategories = () => {\r\n    //Variables en localStorage\r\n    let { host, token, load } = this.state,\r\n      url = \"http://\" + host + \"/api/categories\",\r\n      categoryid = \"&categoryid=raiz\",\r\n      page = this.state.page > 0 ? \"?page=\" + this.state.page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    console.log(\"Descargando lista de categorias\");\r\n    fetch(url + page, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data) {\r\n          console.log(\"Lista de categorias descargadas\");\r\n          this.setState({\r\n            category_list: cat.data,\r\n            meta: cat.meta,\r\n            newItem: 0,\r\n            add: false,\r\n            category_id: 0,\r\n            name: \"\",\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n    //Category_select\r\n    fetch(url + page + categoryid, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((cat) => {\r\n        if (cat.data) {\r\n          this.setState({\r\n            category_select: cat.data,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n      });\r\n  };\r\n  handleClickAdd = () => {\r\n    this.setState({\r\n      add: !this.state.add,\r\n      name: \"\",\r\n      category_id: 0,\r\n      category_id_2: 0,\r\n      category_id_3: 0,\r\n      category_hijos: [],\r\n      category_hijos_3: [],\r\n    });\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Category from \"./tools_category\";\r\n//import { Link } from 'react-router-dom';\r\n\r\nexport default class StoreAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      server: \"\",\r\n      company: \"\",\r\n      email: \"\",\r\n      name: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      category_list: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    this.setState({\r\n      server: varLocalStorage.host\r\n        ? varLocalStorage.host\r\n        : window.location.host.split(\":\")[0],\r\n      company: varLocalStorage.company ? varLocalStorage.company : \"\",\r\n      email: varLocalStorage.email ? varLocalStorage.email : \"\",\r\n      name: varLocalStorage.name ? varLocalStorage.name : \"\",\r\n      username: varLocalStorage.username ? varLocalStorage.username : \"\",\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { data } = this.props;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-6\">\r\n          <div className=\"card card-primary card-outline\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Generales</h5>\r\n              <p>&nbsp;</p>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-server\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Servidor\"\r\n                  name=\"server\"\r\n                  value={this.state.server}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-building\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control text-capitalize\"\r\n                  placeholder=\"Nombre de la empresa\"\r\n                  name=\"company\"\r\n                  value={this.state.company}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"card-footer text-right\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.clickSave}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <Category data={data} />\r\n        </div>\r\n        <div className=\"col-6\">\r\n          <div className=\"card card-primary card-outline\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Usuario</h5>\r\n              <p>&nbsp;</p>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-at\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Email\"\r\n                  name=\"email\"\r\n                  value={this.state.email}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-user-tag\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control text-capitalize\"\r\n                  placeholder=\"Nombre completo\"\r\n                  name=\"name\"\r\n                  value={this.state.name}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <hr />\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-user-check\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Usuario\"\r\n                  name=\"username\"\r\n                  value={this.state.username}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"input-group mb-3\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-lock\"></i>\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Contraseña\"\r\n                  name=\"password\"\r\n                  value={this.state.password}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"card-footer text-right\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.clickSaveUser}\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  clickSave = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    varLocalStorage.company = this.state.company;\r\n    varLocalStorage.host = this.state.server;\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(varLocalStorage));\r\n  };\r\n  clickSaveUser = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    varLocalStorage.email = this.state.email;\r\n    varLocalStorage.name = this.state.name;\r\n    varLocalStorage.username = this.state.username;\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(varLocalStorage));\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, status, date } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: paciente\"\r\n                    value={search ? search : \"\"}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Estado</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-toggle-on\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"status\"\r\n                    value={status}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Activo</option>\r\n                    <option value=\"1\">Terminado</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Fecha</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-calendar-alt\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"form-control\"\r\n                    name=\"date\"\r\n                    value={date}\r\n                    onChange={this.changeFilters}\r\n                  />\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search || date || status\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"status\", 0);\r\n    this.props.changeFilters(\"date\", moment(new Date()).format(\"YYYY-MM-DD\"));\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Exam extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusExam\"));\r\n    this.state = {\r\n      exams: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd && sdd.orderby ? sdd.orderby : \"created_at\",\r\n      order: sdd && sdd.order ? sdd.order : \"desc\",\r\n      search: sdd && sdd.search ? sdd.search : \"\",\r\n      status: sdd && sdd.status >= 0 ? sdd.status : \"\",\r\n      date: sdd && sdd.date ? sdd.date : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getExams();\r\n    localStorage.setItem(\r\n      \"OrusExam\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        status: this.state.status,\r\n        date: this.state.date,\r\n      })\r\n    );\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando examenes\");\r\n      this.getExams();\r\n      localStorage.setItem(\r\n        \"OrusExam\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          status: this.state.status,\r\n          date: this.state.date,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { exams, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Paciente\", type: \"name\", filter: true },\r\n        { name: \"Edad\" },\r\n        { name: \"Estado\" },\r\n        { name: \"Esfera\" },\r\n        { name: \"Cilindro\" },\r\n        { name: \"Eje\" },\r\n        { name: \"Adicion\" },\r\n        { name: \"Ad Media\" },\r\n        { name: \"D/P\" },\r\n        { name: \"Altura\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-info card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-info\">\r\n            <i className=\"fas fa-notes-medical mr-2\"></i>\r\n            Examanes de la vista\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/consultorio/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={this.changePage}\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={this.state.search}\r\n              status={this.state.status}\r\n              date={this.state.date}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={exams.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"12\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(exams.data).length ? (\r\n                exams.data.map((exam) => {\r\n                  return (\r\n                    <tr\r\n                      key={exam.id}\r\n                      className={\r\n                        exam.estado\r\n                          ? \"table-secondary\"\r\n                          : moment\r\n                              .utc(new Date())\r\n                              .isSame(moment.utc(exam.created_at), \"hour\")\r\n                          ? \"table-success\"\r\n                          : \"\"\r\n                      }\r\n                    >\r\n                      <td>\r\n                        <Link to={\"/consultorio/registro/\" + exam.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {exam.paciente.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td>{exam.edad ? exam.edad : \"--\"}</td>\r\n                      <td className=\"text-uppercase\">\r\n                        {exam.estado ? (\r\n                          <span className=\"text-secondary\">Terminado</span>\r\n                        ) : (\r\n                          <span className=\"text-success\">Activo</span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {exam.esferaod}/{exam.esferaoi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.cilindrod}/{exam.cilindroi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.ejeod}/{exam.ejeoi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.adiciond}/{exam.adicioni}\r\n                      </td>\r\n                      <td>\r\n                        {exam.adicion_media_od}/{exam.adicion_media_oi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.dpod}/{exam.dpoi}\r\n                      </td>\r\n                      <td>\r\n                        {exam.alturaod}/{exam.alturaoi}\r\n                      </td>\r\n                      <td>\r\n                        {moment(exam.updated_at, \"YYYY-MM-DD\").format(\"ll\")}\r\n                      </td>\r\n                      <td>{moment(exam.created_at, \"YYYY-MM-DD\").fromNow()}</td>\r\n                      <Actions\r\n                        id={exam.id}\r\n                        item={exam.paciente.nombre}\r\n                        delete={\r\n                          exam.estado || exam.order_id\r\n                            ? null\r\n                            : this.handleDelete\r\n                        }\r\n                        edit={\"/consultorio/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"12\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/consultorio/registro\"\r\n            className=\"btn btn-outline-info\"\r\n            onClick={this.changePage}\r\n            id=\"/consultorio/registro\"\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            Nuevo examen\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleFilter = () => {\r\n    this.setState({\r\n      load: true,\r\n      page: 1,\r\n    });\r\n  };\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  handleDelete = (id, item) => {\r\n    //Confirmación de eliminacion\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text:\r\n        \"¿Esta seguro de eliminar el examen del paciente \" +\r\n        item.toUpperCase() +\r\n        \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          return fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Examen eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Examen eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getExams());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getExams() {\r\n    //Variables\r\n    let {\r\n        host,\r\n        token,\r\n        order,\r\n        orderby,\r\n        search,\r\n        page,\r\n        status,\r\n        load,\r\n        date,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/exams\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\",\r\n      fecha = date === \"\" ? \"\" : \"&date=\" + date,\r\n      estado = status === \"\" ? \"\" : \"&status=\" + status;\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Realiza la peticion de los contactos\r\n    fetch(url + pagina + ordenar + estado + fecha + buscar, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Examenes descargados\");\r\n          this.setState({\r\n            exams: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar examenes\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class easyContact extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let storage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    this.state = {\r\n      name: \"\",\r\n      t_movil: \"\",\r\n      birthday: \"\",\r\n      email: \"\",\r\n      host: storage.host,\r\n      token: storage.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { name } = this.props;\r\n    if (name) {\r\n      this.setState({\r\n        name,\r\n      });\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.name !== this.props.name && this.props.name !== this.state.name) {\r\n      this.setState({\r\n        name: this.props.name,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { name, t_movil, birthday, email } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"form-group\">\r\n          <label>Nuevo paciente</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control text-uppercase\"\r\n            placeholder=\"Nombre del paciente\"\r\n            name=\"name\"\r\n            autoComplete=\"off\"\r\n            required=\"required\"\r\n            pattern=\"^[a-zA-Z.]{2,20}[\\s]{1}[a-zA-Z.]{2,20}.*\"\r\n            minLength=\"8\"\r\n            value={name}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Telefono celular</label>\r\n          <input\r\n            type=\"tel\"\r\n            placeholder=\"Telefono celular\"\r\n            className=\"form-control\"\r\n            name=\"t_movil\"\r\n            pattern=\"^[\\d]{10}$\"\r\n            maxLength=\"10\"\r\n            value={t_movil}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>E-mail</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Fecha de naciemiento</label>\r\n          <input\r\n            type=\"date\"\r\n            className=\"form-control\"\r\n            name=\"birthday\"\r\n            value={birthday}\r\n            onChange={this.changeValue}\r\n          />\r\n        </div>\r\n        <div className=\"form-group text-right\">\r\n          <button className=\"btn btn-danger\" onClick={this.handleSave}>\r\n            Registrar\r\n          </button>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  changeValue = (e) => {\r\n    const { name, value, type } = e.target;\r\n    let val = value;\r\n    console.log(name, value);\r\n    if (type === \"text\" || type === \"email\") val = value.toLowerCase();\r\n    this.setState({\r\n      [name]: val,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { name, t_movil } = this.state;\r\n    console.log(\"Verificacion\", name.length, t_movil.length);\r\n    //Verificamos campos validos\r\n    if (name.length < 5) {\r\n      window.Swal.fire(\r\n        \"Verificacion\",\r\n        \"El nombre del paciente no es correcto\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n    if (t_movil.length !== 10) {\r\n      window.Swal.fire(\r\n        \"Verificacion\",\r\n        \"El numero telefonico no es correcto\",\r\n        \"warning\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de crear un nuevo contacto?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { name, birthday, t_movil, email, host, token } = this.state,\r\n            //Creamos el body\r\n            body = {\r\n              name,\r\n              email: email\r\n                ? email\r\n                : name.replace(/\\s/g, \"\") +\r\n                  birthday.replace(/-/g, \"\").replace(/\\//g, \"\") +\r\n                  \"@domain\",\r\n              type: 0,\r\n              birthday,\r\n              business: 0,\r\n              domicilio: JSON.stringify({\r\n                calle: \"\",\r\n                colonia: \"\",\r\n                municipio: \"Colima\",\r\n                estado: \"Colima\",\r\n                cp: \"28000\",\r\n              }),\r\n              telnumbers: JSON.stringify({\r\n                t_casa: \"\",\r\n                t_oficina: \"\",\r\n                t_movil,\r\n              }),\r\n            },\r\n            //Identificamos la URL y el metodo segun sea el caso (Actualizar o agregar)\r\n            url = \"http://\" + host + \"/api/contacts\",\r\n            //Actualiza el contacto o creamos el contacto\r\n            method = \"POST\";\r\n\r\n          //Enviamos datos al API\r\n          console.log(\"Enviando datos del contacto a la API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Contacto almacenado\");\r\n          localStorage.setItem(\"OrusContactNew\", JSON.stringify({}));\r\n          localStorage.setItem(\r\n            \"OrusContactInUse\",\r\n            JSON.stringify({ id: data.data.id })\r\n          );\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Contacto almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.props.setContac(data.data.id, data.data.birthday);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el contacto\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Easycontact from \"./easyContact\";\r\nimport moment from \"moment\";\r\n//import \"moment/locale/es\";\r\n\r\nexport default class searchContact extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      contacto: \"\",\r\n      data: [],\r\n      dataContact: {},\r\n      load: false,\r\n      edad: 30,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    //identificador del contacto\r\n    let id = this.props.contact;\r\n    if (id) {\r\n      this.getContact(id);\r\n    } else {\r\n      this.contactInput.focus();\r\n    }\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.contacto !== this.state.contacto) {\r\n      if (this.state.contacto.length > 2) {\r\n        this.getContacts(this.state.contacto);\r\n      } else {\r\n        this.setState({\r\n          data: [],\r\n        });\r\n      }\r\n    }\r\n    if (props.contact !== this.props.contact && this.props.contact) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n      this.getContact(this.props.contact);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { load } = this.state;\r\n\r\n    if (this.props.contact) {\r\n      if (load) {\r\n        return (\r\n          <div className=\"card card-danger card-outline d-print-none\">\r\n            <div className=\"card-body box-profile\">\r\n              <div className=\"text-center\">\r\n                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                  <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      } else if (Object.keys(this.state.dataContact).length) {\r\n        const {\r\n            nombre,\r\n            telefonos,\r\n            domicilio,\r\n            id,\r\n            f_nacimiento,\r\n          } = this.state.dataContact,\r\n          edad =\r\n            typeof this.props.edad === \"number\" && this.props.edad\r\n              ? this.props.edad + \" años\"\r\n              : f_nacimiento\r\n              ? moment(f_nacimiento).fromNow(true)\r\n              : 0;\r\n\r\n        return (\r\n          <div className=\"card card-danger card-outline\">\r\n            <div className=\"card-body box-profile\">\r\n              <div className=\"text-center\">\r\n                <img\r\n                  className=\"profile-user-img img-fluid img-circle\"\r\n                  src=\"/img/avatars/no-avatar.png\"\r\n                  alt=\"User Avatar\"\r\n                />\r\n              </div>\r\n\r\n              <h3 className=\"profile-username text-center text-capitalize\">\r\n                {nombre}\r\n              </h3>\r\n              <h6 className=\"text-muted text-center\">\r\n                {telefonos.t_movil ? (\r\n                  <span>Movil: {telefonos.t_movil}</span>\r\n                ) : telefonos.t_casa ? (\r\n                  <span>Casa: {telefonos.t_casa}</span>\r\n                ) : telefonos.t_oficina ? (\r\n                  <span>Oficina: {telefonos.t_oficina}</span>\r\n                ) : (\r\n                  <span className=\"text-danger\">Capture el telefono</span>\r\n                )}\r\n              </h6>\r\n              <p className=\"text-muted text-center\">\r\n                {domicilio && domicilio.calle.length > 6\r\n                  ? domicilio.calle\r\n                  : null}\r\n              </p>\r\n\r\n              <ul className=\"list-group list-group-unbordered mb-3\">\r\n                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                  <b>Edad:</b>\r\n\r\n                  {edad ? (\r\n                    <span className=\"badge badge-primary badge-pill\">\r\n                      {edad}\r\n                    </span>\r\n                  ) : (\r\n                    <input\r\n                      type=\"number\"\r\n                      name=\"edad\"\r\n                      className=\"form-control\"\r\n                      value={this.state.edad}\r\n                      onChange={this.handleSearcContact}\r\n                      onBlur={this.sendAge}\r\n                      onKeyPress={(e) => {\r\n                        if (e.key === \"Enter\") {\r\n                          this.sendAge(e);\r\n                        }\r\n                      }}\r\n                    />\r\n                  )}\r\n                </li>\r\n                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                  <b>#Contacto:</b>\r\n                  <span className=\"badge badge-primary badge-pill\">{id}</span>\r\n                </li>\r\n              </ul>\r\n              {!this.props.status ? (\r\n                <div className=\"btn-group btn-block d-print-none\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={this.handleClickChange}\r\n                  >\r\n                    <i className=\"fas fa-exchange-alt mr-1\"></i>\r\n                    <b>Cambiar</b>\r\n                  </button>\r\n                  <Link\r\n                    to={\"/contactos/registro/\" + id}\r\n                    className=\"btn btn-danger\"\r\n                    onClick={(e) => {\r\n                      this.handleChangePage(\"/contactos/registro/\");\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-edit mr-1\"></i>\r\n                    <b>Editar</b>\r\n                  </Link>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      return (\r\n        <div className=\"card card-danger card-outline d-print-none\">\r\n          <div className=\"card-body\">\r\n            <label>Buscar paciente</label>\r\n            <div className=\"input-group mb-3\">\r\n              <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\">\r\n                  <i className=\"fas fa-user\"></i>\r\n                </span>\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control text-capitalize\"\r\n                placeholder=\"Nombre del paciente\"\r\n                name=\"contacto\"\r\n                autoComplete=\"off\"\r\n                value={this.state.contacto}\r\n                onChange={this.handleSearcContact}\r\n                ref={(input) => {\r\n                  this.contactInput = input;\r\n                }}\r\n              />\r\n            </div>\r\n            {this.state.data.length ? (\r\n              <ul className=\"list-group\">\r\n                {this.state.data.map((contact) => {\r\n                  return (\r\n                    <li key={contact.id} className=\"list-group-item\">\r\n                      <a\r\n                        href=\"#contact\"\r\n                        className={\r\n                          !contact.id\r\n                            ? \"text-danger text-capitalize\"\r\n                            : \"text-muted text-capitalize\"\r\n                        }\r\n                        onClick={(e) => {\r\n                          this.handleClickContact(e, contact.id);\r\n                        }}\r\n                      >\r\n                        <i className=\"fas fa-user mr-1\"></i>\r\n                        {contact.nombre}\r\n                      </a>\r\n                      {!contact.id ? (\r\n                        <Easycontact\r\n                          name={this.state.contacto}\r\n                          setContac={(id, date) => {\r\n                            let edad =\r\n                              moment(date)\r\n                                .fromNow(true)\r\n                                .replace(/[a-zA-ZñÑ]/gi, \"\") * 1;\r\n                            this.setState({\r\n                              contacto: \"\",\r\n                              data: [],\r\n                              dataContact: {},\r\n                            });\r\n                            localStorage.setItem(\r\n                              \"OrusContactInUse\",\r\n                              JSON.stringify({})\r\n                            );\r\n                            this.props.getIdContact(id, edad);\r\n                          }}\r\n                        />\r\n                      ) : null}\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            ) : load ? (\r\n              <div className=\"text-center\">\r\n                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                  <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  sendAge = (e) => {\r\n    const { value } = e.target,\r\n      { id } = this.state.dataContact;\r\n\r\n    if (value > 0 && value < 110 && id) {\r\n      this.props.getIdContact(id, value * 1);\r\n    }\r\n  };\r\n  getContact = (id) => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    //Realiza busqueda de contacto\r\n    fetch(\"http://\" + varLocalStorage.host + \"/api/contacts/\" + id, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then(async (response) => {\r\n        let back = {};\r\n        if (response.status !== 204) back = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(back.message);\r\n        }\r\n        return back;\r\n      })\r\n      .then((data) => {\r\n        console.log(\"Descargando contacto\");\r\n        this.setState({\r\n          dataContact: data.data,\r\n          load: false,\r\n        });\r\n        localStorage.setItem(\"OrusContactInUse\", JSON.stringify(data.data));\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n  handleChangePage = (page) => {\r\n    this.props.changePage(page);\r\n  };\r\n  handleClickChange = (e) => {\r\n    e.preventDefault();\r\n    if (window.confirm(\"¿Esta seguro?\")) {\r\n      this.setState({\r\n        contacto: \"\",\r\n        data: [],\r\n        dataContact: {},\r\n      });\r\n      localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n      this.props.getIdContact(0);\r\n    }\r\n  };\r\n  handleClickContact = (e, id) => {\r\n    if (e) e.preventDefault();\r\n    this.state.data.map((contact) => {\r\n      if (contact.id === id) {\r\n        this.setState({\r\n          contacto: \"\",\r\n          data: [],\r\n          dataContact: contact,\r\n        });\r\n        let edad =\r\n          moment(contact.f_nacimiento)\r\n            .fromNow(true)\r\n            .replace(/[a-zA-ZñÑ]/gi, \"\") * 1;\r\n        this.props.getIdContact(id, edad);\r\n        localStorage.setItem(\"OrusContactInUse\", JSON.stringify({ id }));\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    });\r\n  };\r\n  getContacts = (word) => {\r\n    let { load } = this.state;\r\n\r\n    //Revisamos que ya este cargando\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    if (this.timeSave) clearTimeout(this.timeSave);\r\n    this.timeSave = setTimeout(() => {\r\n      //Variables en localStorage\r\n      let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n        url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n        type = \"&type=0\",\r\n        search = word ? `&search=${word}` : \"\",\r\n        page = \"?page=1&itemsPage=4\";\r\n      console.log(\"Descargando contactos de la API\");\r\n      //Realiza la peticion de los contactos\r\n      fetch(url + page + search + type, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + varLocalStorage.token,\r\n        },\r\n      })\r\n        .then(async (response) => {\r\n          let back = {};\r\n          if (response.status !== 204) back = await response.json();\r\n          if (!response.ok) {\r\n            throw new Error(back.message);\r\n          }\r\n          return back;\r\n        })\r\n        .then((data) => {\r\n          if (data.data && data.data.length) {\r\n            console.log(\"Mostrando información del contacto\");\r\n            this.setState({\r\n              data: data.data,\r\n              load: false,\r\n            });\r\n          } else {\r\n            this.setState({\r\n              data: [\r\n                {\r\n                  id: 0,\r\n                  nombre: \"No hay contactos para: \" + word,\r\n                },\r\n              ],\r\n              load: false,\r\n            });\r\n            localStorage.setItem(\r\n              \"OrusContactInUse\",\r\n              JSON.stringify({ name: word.toLowerCase() })\r\n            );\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus fetch\", e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    }, 1500);\r\n  };\r\n  handleSearcContact = (e) => {\r\n    const { name, value, type } = e.target;\r\n    let val = value;\r\n    if (type === \"number\") val = parseInt(value);\r\n    if (type === \"text\") val = value.toLowerCase();\r\n    this.setState({\r\n      [name]: val,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class GeneralesExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"headingOne\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#collapseOne\"\r\n              aria-expanded=\"true\"\r\n              aria-controls=\"collapseOne\"\r\n            >\r\n              Generales\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"collapseOne\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingOne\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"pc\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"pc\"\r\n                    checked={this.props.pc}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"pc\">\r\n                    <i className=\"fas fa-desktop\"></i> PC\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"pc_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.pc_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.pc ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"tablet\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"tablet\"\r\n                    checked={this.props.tablet}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"tablet\">\r\n                    <i className=\"fas fa-tablet-alt\"></i> Tablet\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"tablet_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.tablet_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.tablet ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"movil\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"movil\"\r\n                    checked={this.props.movil}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"movil\">\r\n                    <i className=\"fas fa-mobile-alt\"></i> Telefono\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"movil_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.movil_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.movil ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"lap\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"lap\"\r\n                    checked={this.props.lap}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"lap\">\r\n                    <i className=\"fas fa-laptop\"></i> Laptop\r\n                  </label>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lap_time\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.lap_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.lap ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-1\">\r\n              <div className=\"col-md-6\">\r\n                <ul className=\"list-group\">\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"frontal\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"frontal\"\r\n                        checked={this.props.frontal}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label className=\"custom-control-label\" htmlFor=\"frontal\">\r\n                        Frontal\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"occipital\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"occipital\"\r\n                        checked={this.props.occipital}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label\r\n                        className=\"custom-control-label\"\r\n                        htmlFor=\"occipital\"\r\n                      >\r\n                        Occipital\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"generality\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"generality\"\r\n                        checked={this.props.generality}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label\r\n                        className=\"custom-control-label\"\r\n                        htmlFor=\"generality\"\r\n                      >\r\n                        General\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                    <div className=\"custom-control custom-switch\">\r\n                      <input\r\n                        name=\"cefalea\"\r\n                        type=\"checkbox\"\r\n                        className=\"custom-control-input\"\r\n                        id=\"cefalea\"\r\n                        checked={this.props.cefalea}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                      <label className=\"custom-control-label\" htmlFor=\"cefalea\">\r\n                        Cefalea\r\n                      </label>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <ul className=\"list-group\">\r\n                  <li className=\"list-group-item\">\r\n                    Temporal\r\n                    <br />\r\n                    <div className=\"row mt-2\">\r\n                      <div className=\"col\">\r\n                        <div className=\"custom-control custom-switch\">\r\n                          <input\r\n                            name=\"temporaod\"\r\n                            type=\"checkbox\"\r\n                            className=\"custom-control-input\"\r\n                            id=\"temporaod\"\r\n                            checked={this.props.temporaod}\r\n                            onChange={this.catchInputs}\r\n                          />\r\n                          <label\r\n                            className=\"custom-control-label\"\r\n                            htmlFor=\"temporaod\"\r\n                          >\r\n                            <i className=\"fa fa-eye\"></i> Derecho\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col\">\r\n                        <div className=\"custom-control custom-switch\">\r\n                          <input\r\n                            name=\"temporaoi\"\r\n                            type=\"checkbox\"\r\n                            className=\"custom-control-input\"\r\n                            id=\"temporaoi\"\r\n                            checked={this.props.temporaoi}\r\n                            onChange={this.catchInputs}\r\n                          />\r\n                          <label\r\n                            className=\"custom-control-label\"\r\n                            htmlFor=\"temporaoi\"\r\n                          >\r\n                            <i className=\"fa fa-eye\"></i> Izquierdo\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                  <li className=\"list-group-item\">\r\n                    Frecuencia\r\n                    <span className=\"badge badge-pill\">\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"c_frecuencia\"\r\n                        maxLength=\"60\"\r\n                        className=\"form-control input-xs\"\r\n                        value={this.props.c_frecuencia}\r\n                        onChange={this.catchInputs}\r\n                      />\r\n                    </span>\r\n                  </li>\r\n                  <li className=\"list-group-item\">\r\n                    <label htmlFor=\"c_intensidad\">Intensidad</label>\r\n                    <input\r\n                      type=\"range\"\r\n                      name=\"c_intensidad\"\r\n                      className=\"custom-range custom-range-info\"\r\n                      id=\"c_intensidad\"\r\n                      min=\"0\"\r\n                      max=\"4\"\r\n                      value={this.props.c_intensidad}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class InterrogatorioExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"headingThree\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#collapseThree\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"collapseThree\"\r\n            >\r\n              Interrogatorios\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"collapseThree\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <label>Interrogatorio inicial</label>\r\n                <textarea\r\n                  name=\"interrogatorio\"\r\n                  className=\"form-control\"\r\n                  value={this.props.interrogatorio}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-12\">\r\n                <label>Cirugias oculares</label>\r\n                <textarea\r\n                  name=\"coa\"\r\n                  className=\"form-control\"\r\n                  value={this.props.coa}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-12\">\r\n                <label>Antecedentes oculares patologicas personales</label>\r\n                <textarea\r\n                  name=\"aopp\"\r\n                  className=\"form-control\"\r\n                  rows=\"2\"\r\n                  value={this.props.aopp}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-12\">\r\n                <label>Antecedentes oculares patologicas familiares</label>\r\n                <textarea\r\n                  name=\"aopf\"\r\n                  className=\"form-control\"\r\n                  rows=\"2\"\r\n                  value={this.props.aopf}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class KeraRetExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#panel_100\"\r\n              aria-expanded=\"true\"\r\n              aria-controls=\"panel_100\"\r\n            >\r\n              Keratrometria y Retinoscopia\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"panel_100\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingOne\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-6\">Keratometria</div>\r\n              <div className=\"col-6\">Retinoscopia</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fas fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"keratometriaod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.keratometriaod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <i className=\"fas fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"keratometriaoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.keratometriaoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"rsod\"\r\n                  maxLength=\"16\"\r\n                  className=\"form-control\"\r\n                  value={this.props.rsod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"rsoi\"\r\n                  maxLength=\"16\"\r\n                  className=\"form-control\"\r\n                  value={this.props.rsoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class DiabetesExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading4\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja4\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja4\"\r\n            >\r\n              Diabetes\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja4\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8\">\r\n                <label>Diab&eacute;tico</label>\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <label>Fotocoagulaci&oacute;n laser</label>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">Fecha</div>\r\n              <div className=\"col-2\">Rango de glucosa</div>\r\n              <div className=\"col-3\">Ultimo examen</div>\r\n              <div className=\"col-2\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"d_fclod\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"d_fclod\"\r\n                    checked={this.props.d_fclod}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"d_fclod\">\r\n                    <i className=\"fa fa-eye\"></i> Derecho\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-2\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"d_fcloi\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"d_fcloi\"\r\n                    checked={this.props.d_fcloi}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"d_fcloi\">\r\n                    <i className=\"fa fa-eye\"></i> Izquierdo\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"d_time\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_time}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"d_media\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_media}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"d_test\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_test}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"d_fclod_time\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_fclod_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.d_fclod ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"d_fcloi_time\"\r\n                  className=\"form-control\"\r\n                  value={this.props.d_fcloi_time}\r\n                  onChange={this.catchInputs}\r\n                  readOnly={this.props.d_fcloi ? \"\" : \"readonly\"}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <label>Oftalmoscopia</label>\r\n                <textarea\r\n                  name=\"oftalmoscopia\"\r\n                  className=\"form-control\"\r\n                  value={this.props.oftalmoscopia}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class AgudezaExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading5\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja5\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja5\"\r\n            >\r\n              Capacidad y agudeza visual\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja5\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">Capacidad visual</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"cvod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.cvod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"cvoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.cvoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-2\">\r\n              <div className=\"col-md-6\">Agudeza visual (Sin lentes)</div>\r\n              <div className=\"col-md-6\">\r\n                Agudeza visual (con la graduaci&oacute;n anterior)\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avslod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avslod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avsloi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avsloi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avcgaod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.avcgaod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avcgaoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control input-xs\"\r\n                  value={this.props.avcgaoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">Agudeza visual final</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avfod\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avfod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avfoi\"\r\n                  maxLength=\"12\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avfoi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <i className=\"fa fa-eye\"></i>\r\n                <i className=\"fa fa-eye\"></i> <label>Ambos</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"avf2o\"\r\n                  maxLength=\"25\"\r\n                  className=\"form-control\"\r\n                  value={this.props.avf2o}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class DiagnosticoExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading6\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja6\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja6\"\r\n            >\r\n              Diagnostico\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja6\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\"></div>\r\n              <div className=\"col-md-6\">Tensi&oacute;n ocular</div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-3\">\r\n                Diagnostico\r\n                <select\r\n                  name=\"diagnostico\"\r\n                  className=\"form-control\"\r\n                  value={this.props.diagnostico}\r\n                  onChange={this.catchInputs}\r\n                >\r\n                  <option value=\"Emetrope\">Em&eacute;trope</option>\r\n                  <option value=\"hipermetropia\">Hipermetrop&iacute;a</option>\r\n                  <option value=\"hipermetropia-astigmatismo\">\r\n                    Hipermetrop&iacute;a y astigmatismo\r\n                  </option>\r\n                  <option value=\"hipermetropia-miopia\">\r\n                    Hipermetrop&iacute;a y miop&iacute;a\r\n                  </option>\r\n                  <option value=\"astigmatismo-regla\">\r\n                    Astigmatismo con la regla\r\n                  </option>\r\n                  <option value=\"astigmatismo-contra-regla\">\r\n                    Astigmatismo contra la regla\r\n                  </option>\r\n                  <option value=\"astigmatismo-oblicuo\">\r\n                    Astigmatismo oblicuo\r\n                  </option>\r\n                  <option value=\"astigmatismo-miopia\">\r\n                    Astigmatismo/m&iacute;opico\r\n                  </option>\r\n                  <option value=\"miopia\">Miop&iacute;a</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <div className=\"custom-control custom-switch\">\r\n                  <input\r\n                    name=\"presbicie\"\r\n                    type=\"checkbox\"\r\n                    className=\"custom-control-input\"\r\n                    id=\"presbicie\"\r\n                    checked={this.props.presbicie}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  <label className=\"custom-control-label\" htmlFor=\"presbicie\">\r\n                    Presbicie\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Derecho</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"piod\"\r\n                  min=\"0\"\r\n                  max=\"40\"\r\n                  step=\"1\"\r\n                  className=\"form-control\"\r\n                  value={this.props.piod}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <i className=\"fa fa-eye\"></i> <label>Izquierdo</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"pioi\"\r\n                  min=\"0\"\r\n                  max=\"40\"\r\n                  step=\"1\"\r\n                  className=\"form-control\"\r\n                  value={this.props.pioi}\r\n                  onChange={this.catchInputs}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <label>Tratamiento oftalmico</label>\r\n                <textarea\r\n                  name=\"txoftalmico\"\r\n                  className=\"form-control\"\r\n                  value={this.props.txoftalmico}\r\n                  onChange={this.catchInputs}\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class ObservacionesExam extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card d-print-none\">\r\n        <div className=\"card-header\" id=\"heading8\">\r\n          <h2 className=\"mb-0\">\r\n            <button\r\n              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#caja8\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"caja8\"\r\n            >\r\n              Observaciones\r\n            </button>\r\n          </h2>\r\n        </div>\r\n        <div\r\n          id=\"caja8\"\r\n          className=\"collapse\"\r\n          aria-labelledby=\"headingThree\"\r\n          data-parent=\"#accordionExample\"\r\n        >\r\n          <div className=\"card-body\">\r\n            <textarea\r\n              name=\"observaciones\"\r\n              className=\"form-control\"\r\n              value={this.props.observaciones}\r\n              onChange={this.catchInputs}\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.props.onChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nexport default class messenger extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      messages: [],\r\n      message: \"\",\r\n      load: true,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getMessengers();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    //window.$(\"#boxchat\").scrollTop(window.$(\"#boxchat\").prop(\"scrollHeight\"));\r\n    if (props.pagado !== this.props.pagado) {\r\n      console.log(\"Recargando chat\");\r\n      this.getMessengers();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data } = this.props,\r\n      { messages, load, message } = this.state,\r\n      user = data.idUser;\r\n\r\n    return (\r\n      <div className=\"card direct-chat direct-chat-primary d-print-none\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title\">\r\n            <i className=\"fas fa-comments mr-1\"></i>\r\n            Chat\r\n          </h3>\r\n        </div>\r\n\r\n        {load ? (\r\n          <div className=\"card-body\">\r\n            <div className=\"card-text text-center p-4\">\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : messages.length ? (\r\n          <React.Fragment>\r\n            <div className=\"card-body\">\r\n              <div className=\"direct-chat-messages\" id=\"boxchat\">\r\n                {messages.map((message) => {\r\n                  let avatar = \"/img/avatars/avatar5.png\";\r\n\r\n                  if (message.created_user.rol === 1)\r\n                    avatar = \"/img/avatars/avatar2.png\";\r\n                  if (!message.created_user.rol)\r\n                    avatar = \"/img/avatars/avatar3.png\";\r\n                  if (message.created_user.id === 2)\r\n                    avatar = \"/img/avatars/avatar4.png\";\r\n                  return (\r\n                    <div\r\n                      className={\r\n                        message.created_user.id === user\r\n                          ? \"direct-chat-msg right\"\r\n                          : \"direct-chat-msg\"\r\n                      }\r\n                      key={message.id}\r\n                    >\r\n                      <div className=\"direct-chat-infos clearfix\">\r\n                        <span\r\n                          className={\r\n                            message.created_user.id === user\r\n                              ? \"direct-chat-name float-right\"\r\n                              : \"direct-chat-name float-left\"\r\n                          }\r\n                        >\r\n                          {message.created_user.name}\r\n                        </span>\r\n                        <span\r\n                          className={\r\n                            message.created_user.id === user\r\n                              ? \"direct-chat-timestamp float-left\"\r\n                              : \"direct-chat-timestamp float-right\"\r\n                          }\r\n                        >\r\n                          {moment(message.updated_at).format(\"lll\")}\r\n                        </span>\r\n                      </div>\r\n                      <img\r\n                        className=\"direct-chat-img\"\r\n                        src={\r\n                          message.created_user.id === 1\r\n                            ? \"/img/avatars/OrusBot.png\"\r\n                            : avatar\r\n                        }\r\n                        alt=\"message user image1\"\r\n                      />\r\n                      <div className=\"direct-chat-text\">{message.mensaje}</div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </React.Fragment>\r\n        ) : (\r\n          <div className=\"card-body\">\r\n            <div className=\"card-text text-center p-4\">\r\n              <h5>\r\n                <i className=\"fas fa-comment-slash mr-1\"></i>\r\n                No hay mensajes aun\r\n              </h5>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"card-footer\">\r\n          <div className=\"input-group\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"message\"\r\n              placeholder=\"Escriba un mensaje ...\"\r\n              className=\"form-control\"\r\n              value={message}\r\n              onChange={this.handleMessege}\r\n            />\r\n            <span className=\"input-group-append\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.sendMessenger}\r\n                disabled={message.length > 5 ? false : true}\r\n              >\r\n                Enviar\r\n              </button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleMessege = (e) => {\r\n    let { value, name } = e.target;\r\n    this.setState({\r\n      [name]: value.toLowerCase(),\r\n    });\r\n  };\r\n  sendMessenger = () => {\r\n    const { message, load, host, token } = this.state,\r\n      { table, idRow } = this.props,\r\n      url = \"http://\" + host + \"/api/messengers\",\r\n      body = {\r\n        table,\r\n        idRow,\r\n        user: \"\",\r\n        message,\r\n      };\r\n\r\n    //Mandamos señal de procesamiento\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    console.log(\"Enviando mensajes a la API\");\r\n    //Realiza la peticion de los contactos\r\n    fetch(url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(body),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenado mensajes\");\r\n          this.getMessengers();\r\n        } else {\r\n          console.error(data.message);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n  getMessengers = () => {\r\n    //Variables en localStorage\r\n    const { load, host, token } = this.state,\r\n      { table, idRow } = this.props,\r\n      url = \"http://\" + host + \"/api/messengers\",\r\n      type = \"&table=\" + table + \"&idRow=\" + idRow,\r\n      page = \"?page=1\";\r\n\r\n    //Mandamos señal de procesamiento\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    console.log(\"Solicitando mensajes de la API\");\r\n    //Realiza la peticion de los contactos\r\n    fetch(url + page + type, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenado mensajes\");\r\n          this.setState({\r\n            messages: data.data,\r\n            message: \"\",\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(data.message);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class contactDataVertical extends Component {\r\n  render() {\r\n    const contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n\r\n    return (\r\n      <div className=\"col\">\r\n        <label>Nombre de paciente: </label>\r\n        <span className=\"ml-2 text-capitalize\">{contact.nombre}</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport Graduacion from \"./graduacionExam\";\r\nimport Contacto from \"../Contacts/contactDataVertical\";\r\n\r\nexport default class printExam extends Component {\r\n  render() {\r\n    const {\r\n      esferaod,\r\n      esferaoi,\r\n      cilindrod,\r\n      cilindroi,\r\n      ejeod,\r\n      ejeoi,\r\n      adiciond,\r\n      adicioni,\r\n      adicion_media_od,\r\n      adicion_media_oi,\r\n      dpod,\r\n      dpoi,\r\n      alturaod,\r\n      alturaoi,\r\n      diagnostico,\r\n      presbicie,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"card d-none d-print-block\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h5>\r\n              Optica Madero\r\n              <br />\r\n              <small>312 312 5353</small>\r\n            </h5>\r\n          </div>\r\n          <div className=\"col-3 text-right\">{moment().format(\"LLL\")}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <Contacto />\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <label className=\"mr-2\">Diagnostico:</label>\r\n            {diagnostico}\r\n          </div>\r\n          <div className=\"col-4\">\r\n            <label className=\"mr-2\">presbicie:</label>\r\n            {presbicie ? \"SI\" : \"NO\"}\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <Graduacion\r\n              esferaod={esferaod}\r\n              esferaoi={esferaoi}\r\n              cilindrod={cilindrod}\r\n              cilindroi={cilindroi}\r\n              ejeod={ejeod}\r\n              ejeoi={ejeoi}\r\n              adiciond={adiciond}\r\n              adicioni={adicioni}\r\n              adicion_media_od={adicion_media_od}\r\n              adicion_media_oi={adicion_media_oi}\r\n              dpod={dpod}\r\n              dpoi={dpoi}\r\n              alturaod={alturaod}\r\n              alturaoi={alturaoi}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <p className=\"card-text text-center\">\r\n              Julio Cárdenas Martinez\r\n              <br />\r\n              Optometrista contactologo\r\n              <br />\r\n              UAG\r\n              <br />\r\n              CED PROF. 2413419\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport SearchContact from \"../Contacts/searchContactCard\";\r\nimport Recomendaciones from \"./recomendaciones\";\r\nimport Generales from \"./generalesExam\";\r\nimport Interrogatorios from \"./interrogatoriosExam\";\r\nimport KeraRet from \"./keraRetExam\";\r\nimport Diabetes from \"./diabetesExam\";\r\nimport Agudeza from \"./agudezaExam\";\r\nimport Diagnostico from \"./diagnosticoExam\";\r\nimport Graduacion from \"./graduacionExam\";\r\nimport Observaciones from \"./observacionesExam\";\r\nimport Chat from \"../Layouts/messenger\";\r\nimport PrintExam from \"./print_exam\";\r\n\r\nexport default class ExamAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    this.state = {\r\n      id: 0,\r\n      edad: 0,\r\n      keratometriaoi: \"\",\r\n      keratometriaod: \"\",\r\n      pantalleooi: \"\",\r\n      pantalleood: \"\",\r\n      interrogatorio: \"\",\r\n      cefalea: false,\r\n      c_frecuencia: \"\",\r\n      c_intensidad: 0,\r\n      frontal: false,\r\n      temporal: false,\r\n      occipital: false,\r\n      generality: false,\r\n      temporaoi: false,\r\n      temporaod: false,\r\n      coa: \"\",\r\n      aopp: \"\",\r\n      aopf: \"\",\r\n      avsloi: \"\",\r\n      avslod: \"\",\r\n      avcgaoi: \"\",\r\n      avcgaod: \"\",\r\n      cvoi: \"\",\r\n      cvod: \"\",\r\n      oftalmoscopia: \"\",\r\n      rsoi: \"\",\r\n      rsod: \"\",\r\n      diagnostico: \"Hemetrope\",\r\n      presbicie: true,\r\n      txoftalmico: \"\",\r\n      esferaoi: 0,\r\n      esferaod: 0,\r\n      cilindroi: 0,\r\n      cilindrod: 0,\r\n      ejeoi: 0,\r\n      ejeod: 0,\r\n      adicioni: 0,\r\n      adiciond: 0,\r\n      adicion_media_od: 0,\r\n      adicion_media_oi: 0,\r\n      dpoi: 0,\r\n      dpod: 0,\r\n      avfoi: \"\",\r\n      avfod: \"\",\r\n      avf2o: \"\",\r\n      lcmarca: \"\",\r\n      lcgoi: \"\",\r\n      lcgod: \"\",\r\n      txoptico: \"\",\r\n      alturaoi: 0,\r\n      alturaod: 0,\r\n      pioi: 0,\r\n      piod: 0,\r\n      observaciones: \"\",\r\n      pc: false,\r\n      tablet: false,\r\n      movil: false,\r\n      lap: false,\r\n      lap_time: \"00:00\",\r\n      pc_time: \"00:00\",\r\n      tablet_time: \"00:00\",\r\n      movil_time: \"00:00\",\r\n      d_time: \"00:00\",\r\n      d_media: \"\",\r\n      d_test: \"\",\r\n      d_fclod: false,\r\n      d_fcloi: false,\r\n      d_fclod_time: \"00:00\",\r\n      d_fcloi_time: \"00:00\",\r\n      category_id: 0,\r\n      category_ii: 0,\r\n      item1: 0,\r\n      item2: 0,\r\n      contact_id: contact && contact.id ? contact.id : 0,\r\n      order_id: 0,\r\n      status: 0,\r\n      created_at: \"\",\r\n      load: false,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    //Variables\r\n    let id = this.props.match.params.id;\r\n    if (id) {\r\n      this.getExam(id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n        contact_id,\r\n        id,\r\n        order_id,\r\n        edad,\r\n        status,\r\n        created_at,\r\n        category_id,\r\n        category_ii,\r\n        cilindrod,\r\n        cilindroi,\r\n        esferaod,\r\n        esferaoi,\r\n        ejeod,\r\n        ejeoi,\r\n        adiciond,\r\n        adicioni,\r\n        adicion_media_od,\r\n        adicion_media_oi,\r\n        dpod,\r\n        dpoi,\r\n        alturaod,\r\n        alturaoi,\r\n        lcmarca,\r\n        lcgod,\r\n        lcgoi,\r\n        diagnostico,\r\n        presbicie,\r\n      } = this.state,\r\n      { data } = this.props,\r\n      hoy = moment(Date.now()),\r\n      registro = moment(created_at),\r\n      toDay = moment(hoy).isSame(registro, \"day\");\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <form className=\"row\">\r\n          <div className=\"col-3 d-print-none\">\r\n            <SearchContact\r\n              contact={contact_id}\r\n              edad={edad}\r\n              status={status || id ? !toDay : true || order_id ? false : true}\r\n              getIdContact={this.getIdContact}\r\n              changePage={this.changePage}\r\n            />\r\n            {contact_id && order_id ? (\r\n              <Chat data={data} table=\"orders\" idRow={order_id} />\r\n            ) : null}\r\n          </div>\r\n          <div className=\"col\">\r\n            <PrintExam\r\n              esferaod={esferaod}\r\n              esferaoi={esferaoi}\r\n              cilindrod={cilindrod}\r\n              cilindroi={cilindroi}\r\n              ejeod={ejeod}\r\n              ejeoi={ejeoi}\r\n              adiciond={adiciond}\r\n              adicioni={adicioni}\r\n              adicion_media_od={adicion_media_od}\r\n              adicion_media_oi={adicion_media_oi}\r\n              dpod={dpod}\r\n              dpoi={dpoi}\r\n              alturaod={alturaod}\r\n              alturaoi={alturaoi}\r\n              lcmarca={lcmarca}\r\n              lcgod={lcgod}\r\n              lcgoi={lcgoi}\r\n              diagnostico={diagnostico}\r\n              presbicie={presbicie}\r\n            />\r\n            <div className=\"card card-info card-outline d-print-none\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title\">\r\n                  <i className=\"fas fa-notes-medical mr-1\"></i>\r\n                  {this.state.id ? \"Examen\" : \"Nuevo examen\"}\r\n                </h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <div className=\"accordion\" id=\"accordionExample\">\r\n                  {contact_id ? (\r\n                    <React.Fragment>\r\n                      <Generales\r\n                        pc={this.state.pc}\r\n                        tablet={this.state.tablet}\r\n                        movil={this.state.movil}\r\n                        lap={this.state.lap}\r\n                        lap_time={this.state.lap_time}\r\n                        pc_time={this.state.pc_time}\r\n                        tablet_time={this.state.tablet_time}\r\n                        movil_time={this.state.movil_time}\r\n                        cefalea={this.state.cefalea}\r\n                        c_frecuencia={this.state.c_frecuencia}\r\n                        c_intensidad={this.state.c_intensidad}\r\n                        frontal={this.state.frontal}\r\n                        temporal={this.state.temporal}\r\n                        occipital={this.state.occipital}\r\n                        generality={this.state.generality}\r\n                        temporaoi={this.state.temporaoi}\r\n                        temporaod={this.state.temporaod}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Interrogatorios\r\n                        interrogatorio={this.state.interrogatorio}\r\n                        coa={this.state.coa}\r\n                        aopp={this.state.aopp}\r\n                        aopf={this.state.aopf}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <KeraRet\r\n                        keratometriaoi={this.state.keratometriaoi}\r\n                        keratometriaod={this.state.keratometriaod}\r\n                        rsoi={this.state.rsoi}\r\n                        rsod={this.state.rsod}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Diabetes\r\n                        d_time={this.state.d_time}\r\n                        d_media={this.state.d_media}\r\n                        d_test={this.state.d_test}\r\n                        d_fclod={this.state.d_fclod}\r\n                        d_fclod_time={this.state.d_fclod_time}\r\n                        d_fcloi={this.state.d_fcloi}\r\n                        d_fcloi_time={this.state.d_fcloi_time}\r\n                        oftalmoscopia={this.state.oftalmoscopia}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Agudeza\r\n                        cvod={this.state.cvod}\r\n                        cvoi={this.state.cvoi}\r\n                        avslod={this.state.avslod}\r\n                        avsloi={this.state.avsloi}\r\n                        avcgaod={this.state.avcgaod}\r\n                        avcgaoi={this.state.avcgaoi}\r\n                        avfod={this.state.avfod}\r\n                        avfoi={this.state.avfoi}\r\n                        avf2o={this.state.avf2o}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <Diagnostico\r\n                        diagnostico={this.state.diagnostico}\r\n                        presbicie={this.state.presbicie}\r\n                        piod={this.state.piod}\r\n                        pioi={this.state.pioi}\r\n                        txoftalmico={this.state.txoftalmico}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"card-header d-print-none\" id=\"heading7\">\r\n                          <h2 className=\"mb-0\">\r\n                            <button\r\n                              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n                              type=\"button\"\r\n                              data-toggle=\"collapse\"\r\n                              data-target=\"#caja7\"\r\n                              aria-expanded=\"false\"\r\n                              aria-controls=\"caja7\"\r\n                            >\r\n                              Graduaci&oacute;n\r\n                            </button>\r\n                          </h2>\r\n                        </div>\r\n                        <div\r\n                          id=\"caja7\"\r\n                          className=\"collapse\"\r\n                          aria-labelledby=\"headingThree\"\r\n                          data-parent=\"#accordionExample\"\r\n                        >\r\n                          <div className=\"card-body p-1\">\r\n                            <div className=\"d-none d-print-block mb-2\">\r\n                              <div className=\"row border\">\r\n                                <div className=\"col-3\">\r\n                                  <label>Diagnostico</label>\r\n                                </div>\r\n                                <div className=\"col\">\r\n                                  <p className=\"card-text\">\r\n                                    {this.state.diagnostico}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            <Graduacion\r\n                              esferaod={esferaod}\r\n                              esferaoi={esferaoi}\r\n                              cilindrod={cilindrod}\r\n                              cilindroi={cilindroi}\r\n                              ejeod={ejeod}\r\n                              ejeoi={ejeoi}\r\n                              adiciond={adiciond}\r\n                              adicioni={adicioni}\r\n                              adicion_media_od={adicion_media_od}\r\n                              adicion_media_oi={adicion_media_oi}\r\n                              dpod={dpod}\r\n                              dpoi={dpoi}\r\n                              alturaod={alturaod}\r\n                              alturaoi={alturaoi}\r\n                              lcmarca={lcmarca}\r\n                              lcgod={lcgod}\r\n                              lcgoi={lcgoi}\r\n                              onChangeInput={this.handleChangeInput}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <Observaciones\r\n                        observaciones={this.state.observaciones}\r\n                        onChangeInput={this.handleChangeInput}\r\n                      />\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"card-header d-print-none\" id=\"heading9\">\r\n                          <h2 className=\"mb-0\">\r\n                            <button\r\n                              className=\"btn btn-link btn-block text-left text-info collapsed\"\r\n                              type=\"button\"\r\n                              data-toggle=\"collapse\"\r\n                              data-target=\"#caja9\"\r\n                              aria-expanded=\"false\"\r\n                              aria-controls=\"caja9\"\r\n                            >\r\n                              Recomendaciones\r\n                            </button>\r\n                          </h2>\r\n                        </div>\r\n                        <div id=\"caja9\" className=\"collapse p-2\">\r\n                          <div className=\"row\">\r\n                            <div className=\"col\">\r\n                              <Recomendaciones\r\n                                category_id={parseInt(category_id)}\r\n                                esferaod={esferaod}\r\n                                esferaoi={esferaoi}\r\n                                cilindrod={cilindrod}\r\n                                cilindroi={cilindroi}\r\n                                nameCategory=\"category_id\"\r\n                                nameItem=\"item1\"\r\n                                title=\"Recomendacion principal\"\r\n                                data={data}\r\n                                onChangeInput={(obj) => {\r\n                                  if (typeof obj === \"object\") {\r\n                                    this.setState(obj);\r\n                                  }\r\n                                }}\r\n                                update={true}\r\n                              />\r\n                            </div>\r\n                            {category_id ? (\r\n                              <div className=\"col\">\r\n                                <Recomendaciones\r\n                                  category_id={parseInt(category_ii)}\r\n                                  esferaod={esferaod}\r\n                                  esferaoi={esferaoi}\r\n                                  cilindrod={cilindrod}\r\n                                  cilindroi={cilindroi}\r\n                                  nameCategory=\"category_ii\"\r\n                                  nameItem=\"item2\"\r\n                                  title=\"Recomendacion adicional\"\r\n                                  data={data}\r\n                                  onChangeInput={(obj) => {\r\n                                    if (typeof obj === \"object\") {\r\n                                      this.setState(obj);\r\n                                    }\r\n                                  }}\r\n                                  update={true}\r\n                                />\r\n                              </div>\r\n                            ) : null}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </React.Fragment>\r\n                  ) : (\r\n                    <div className=\"card\">\r\n                      <div className=\"card-body text-info\">\r\n                        <i className=\"fas fa-exclamation-triangle mr-2\"></i>\r\n                        <label>Elija primero un paciente</label>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"card-footer text-right\">\r\n                <div className=\"btn-group d-print-none\" role=\"group\">\r\n                  <Link\r\n                    to=\"/consultorio\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={(e) => {\r\n                      this.changePage(\"/consultorio\");\r\n                    }}\r\n                  >\r\n                    <i\r\n                      className={\r\n                        id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                      }\r\n                    ></i>\r\n                    <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                  </Link>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={this.handleStatus}\r\n                  >\r\n                    <i\r\n                      className={\r\n                        this.state.status\r\n                          ? \"fas fa-lock-open mr-1\"\r\n                          : \"fas fa-lock mr-1\"\r\n                      }\r\n                    ></i>\r\n                    <strong>\r\n                      {this.state.status ? \"Activar\" : \"Terminar\"}\r\n                    </strong>\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-dark\"\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      window.print();\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-print mr-2\"></i>\r\n                    Imprimir\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      contact_id ? \"btn btn-info\" : \"btn btn-info disabled\"\r\n                    }\r\n                    onClick={this.handleSave}\r\n                    disabled={contact_id ? \"\" : \"disabled\"}\r\n                  >\r\n                    <i className=\"fas fa-save mr-1\"></i>\r\n                    <strong>Guardar</strong>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  handleChangeInput = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleStatus = () => {\r\n    this.setState({\r\n      status: !this.state.status,\r\n    });\r\n  };\r\n  getIdContact = (id, edad) => {\r\n    this.setState({\r\n      contact_id: id,\r\n      edad,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name } = e.target,\r\n      value =\r\n        e.target.type === \"checkbox\"\r\n          ? e.target.checked\r\n          : e.target.value.toLowerCase();\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { host, token, id, cilindrod, cilindroi, ejeod, ejeoi } = this.state;\r\n\r\n    //Verificar si los datos son validos.\r\n    if ((cilindrod < 0 && !ejeod) || (cilindroi < 0 && !ejeoi)) {\r\n      window.Swal.fire(\"Verificación\", \"El campo CILINDRO esta vacio\", \"error\");\r\n      return false;\r\n    }\r\n\r\n    //Confirmación de almacenamiento\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el examen?\"\r\n        : \"¿Esta seguro de crear un nuevo examen?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          let body = this.state,\r\n            //Identificamos la URL y el metodo segun sea el caso (Actualizar o agregar)\r\n            url = id\r\n              ? \"http://\" + host + \"/api/exams/\" + id\r\n              : \"http://\" + host + \"/api/exams\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n          if (!body.category_id) delete body.category_id;\r\n          if (!body.category_ii) delete body.category_ii;\r\n\r\n          //Crear o modificar examen\r\n          console.log(\"Enviando datos del examen a la API\");\r\n          return fetch(url, {\r\n            method: method,\r\n            signal: this.signal,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch: \", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n        if (data.data) {\r\n          console.log(\"Examen almacenado\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Examen actualizado con exito\"\r\n              : \"Examen almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => this.props.history.goBack());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el examen\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getExam = (id) => {\r\n    if (id) {\r\n      //Variables\r\n      let { host, token, load } = this.state;\r\n\r\n      //Mandamos señal de carga si no lo he hecho\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      //Realiza la peticion del examen por el id\r\n      console.log(\"Descargando datos del examen\");\r\n      fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (data.data) {\r\n            console.log(\"Mostrando examenes\");\r\n            this.setState({\r\n              contact_id: data.data.paciente.id,\r\n              edad: data.data.edad,\r\n              id: data.data.id,\r\n              keratometriaoi: data.data.keratometriaoi,\r\n              keratometriaod: data.data.keratometriaod,\r\n              pantalleooi: data.data.pantalleooi,\r\n              pantalleood: data.data.pantalleood,\r\n              interrogatorio: data.data.interrogatorio,\r\n              cefalea: data.data.cefalea,\r\n              c_frecuencia: data.data.c_frecuencia,\r\n              c_intensidad: data.data.c_intensidad,\r\n              frontal: data.data.frontal,\r\n              temporal: data.data.temporal,\r\n              occipital: data.data.occipital,\r\n              generality: data.data.generality,\r\n              temporaoi: data.data.temporaoi,\r\n              temporaod: data.data.temporaod,\r\n              coa: data.data.coa,\r\n              aopp: data.data.aopp,\r\n              aopf: data.data.aopf,\r\n              avsloi: data.data.avsloi,\r\n              avslod: data.data.avslod,\r\n              avcgaoi: data.data.avcgaoi,\r\n              avcgaod: data.data.avcgaod,\r\n              cvoi: data.data.cvoi,\r\n              cvod: data.data.cvod,\r\n              oftalmoscopia: data.data.oftalmoscopia,\r\n              rsoi: data.data.rsoi,\r\n              rsod: data.data.rsod,\r\n              diagnostico: data.data.diagnostico,\r\n              presbicie: data.data.presbicie,\r\n              txoftalmico: data.data.txoftalmico,\r\n              esferaoi: data.data.esferaoi,\r\n              esferaod: data.data.esferaod,\r\n              cilindroi: data.data.cilindroi,\r\n              cilindrod: data.data.cilindrod,\r\n              ejeoi: data.data.ejeoi,\r\n              ejeod: data.data.ejeod,\r\n              adicioni: data.data.adicioni,\r\n              adiciond: data.data.adiciond,\r\n              adicion_media_od: data.data.adicion_media_od,\r\n              adicion_media_oi: data.data.adicion_media_oi,\r\n              dpoi: data.data.dpoi,\r\n              dpod: data.data.dpod,\r\n              avfoi: data.data.avfoi,\r\n              avfod: data.data.avfod,\r\n              avf2o: data.data.avf2o,\r\n              lcmarca: data.data.lcmarca,\r\n              lcgoi: data.data.lcgoi,\r\n              lcgod: data.data.lcgod,\r\n              txoptico: data.data.txoptico,\r\n              alturaoi: data.data.alturaoi,\r\n              alturaod: data.data.alturaod,\r\n              pioi: data.data.pioi,\r\n              piod: data.data.piod,\r\n              observaciones: data.data.observaciones,\r\n              pc: data.data.pc,\r\n              tablet: data.data.tablet,\r\n              movil: data.data.movil,\r\n              lap: data.data.lap,\r\n              lap_time: data.data.lap_time,\r\n              pc_time: data.data.pc_time,\r\n              tablet_time: data.data.tablet_time,\r\n              movil_time: data.data.movil_time,\r\n              d_time: data.data.d_time,\r\n              d_media: data.data.d_media,\r\n              d_test: data.data.d_test,\r\n              d_fclod: data.data.d_fclod,\r\n              d_fcloi: data.data.d_fcloi,\r\n              d_fclod_time: data.data.d_fclod_time,\r\n              d_fcloi_time: data.data.d_fcloi_time,\r\n              category_id: data.data.category_id ? data.data.category_id : 0,\r\n              category_ii: data.data.category_ii ? data.data.category_ii : 0,\r\n              item1: data.data.item1,\r\n              item2: data.data.item2,\r\n              order_id: data.data.order_id ? data.data.order_id : 0,\r\n              status: data.data.estado,\r\n              created_at: data.data.created_at,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\"Error\", \"Al descargar el examen\", \"error\");\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, status } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: paciente o # de orden\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Estado</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"status\"\r\n                    value={status}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">En proceso</option>\r\n                    <option value=\"1\">Laboratorio</option>\r\n                    <option value=\"2\">Bicelación</option>\r\n                    <option value=\"3\">Terminado</option>\r\n                    <option value=\"4\">Garantia</option>\r\n                    <option value=\"5\">Baja</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"status\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Contacts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusOrder\"));\r\n    this.state = {\r\n      pedidos: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"desc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      status: sdd ? sdd.status : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getPedidos();\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n    localStorage.setItem(\r\n      \"OrusOrder\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        status: this.state.status,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando pedidos\");\r\n      this.getPedidos();\r\n      localStorage.setItem(\r\n        \"OrusOrder\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          status: this.state.status,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { pedidos, load } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Folio\", type: \"id\", filter: true },\r\n        { name: \"Caja\" },\r\n        { name: \"Paciente\", type: \"contact_id\", filter: true },\r\n        { name: \"Detalles\" },\r\n        { name: \"Estado\" },\r\n        { name: \"Nota\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-warning card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-warning\">\r\n            <i className=\"fas fa-clipboard-list mr-1\"></i>\r\n            Listado de pedidos\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/pedidos/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={(e) => {\r\n                this.changePage(\"/pedidos/registro\");\r\n              }}\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={this.state.search}\r\n              status={this.state.status}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={pedidos.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center\">\r\n                    <div className=\"spinner-border text-primary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(pedidos.data).length ? (\r\n                pedidos.data.map((pedido) => {\r\n                  return (\r\n                    <tr key={pedido.id}>\r\n                      <td>\r\n                        <span className=\"badge badge-warning text-capitalize\">\r\n                          {pedido.id}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {pedido.estado === 2 ? (\r\n                          <span>\r\n                            {pedido.caja ? pedido.caja : \"Sin asignar\"}\r\n                          </span>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        <Link to={\"/pedidos/registro/\" + pedido.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {pedido.paciente.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        {pedido.estado === 1 ? (\r\n                          <div>\r\n                            <span className=\"text-danger mr-1\">\r\n                              {pedido.laboratorio\r\n                                ? pedido.laboratorio.nombre\r\n                                : \"Sin asignar\"}\r\n                            </span>\r\n                            {pedido.laboratorio ? \"/ \" + pedido.folio_lab : \"\"}\r\n                          </div>\r\n                        ) : pedido.estado === 2 ? (\r\n                          <small>\r\n                            {pedido.observaciones\r\n                              ? pedido.observaciones\r\n                              : \"sin observaciones\"}\r\n                          </small>\r\n                        ) : !pedido.estado ? (\r\n                          <small>\r\n                            {pedido.examen\r\n                              ? pedido.examen.estado === \"Terminado\"\r\n                                ? \"Examen completado\"\r\n                                : \"Examen no realizado\"\r\n                              : \"Examen no asignado\"}\r\n                          </small>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td>{this.setStatusString(pedido.estado)}</td>\r\n                      <td className=\"text-right\">\r\n                        {pedido.nota ? (\r\n                          <Link to={\"/notas/registro/\" + pedido.nota.id}>\r\n                            <span className=\"badge badge-success\">\r\n                              {pedido.nota.id}\r\n                            </span>\r\n                          </Link>\r\n                        ) : (\r\n                          \"--\"\r\n                        )}\r\n                      </td>\r\n                      <td>{moment(pedido.updated_at).fromNow()}</td>\r\n                      <td>{moment(pedido.created_at).format(\"ll\")}</td>\r\n                      <Actions\r\n                        id={pedido.id}\r\n                        item={pedido.paciente.nombre}\r\n                        delete={\r\n                          !pedido.estado && !pedido.nota\r\n                            ? this.handleDelete\r\n                            : null\r\n                        }\r\n                        edit={\"/pedidos/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/pedidos/registro\"\r\n            className=\"btn btn-outline-warning\"\r\n            onClick={(e) => {\r\n              this.changePage(\"/pedidos/registro\");\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            <strong>Nuevo pedido</strong>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  setStatusString = (status) => {\r\n    switch (status) {\r\n      case 0:\r\n        return <span className=\"text-warning text-uppercase\">En proceso</span>;\r\n      case 1:\r\n        return <span className=\"text-info text-uppercase\">En laboratorio</span>;\r\n      case 2:\r\n        return <span className=\"text-primary text-uppercase\">Bicelación</span>;\r\n      case 3:\r\n        return <span className=\"text-success text-uppercase\">Terminado</span>;\r\n      case 4:\r\n        return <span className=\"text-info text-uppercase\">Garantia</span>;\r\n      default:\r\n        return <span className=\"text-secondary text-uppercase\">Baja</span>;\r\n    }\r\n  };\r\n  handleFilter = () => {\r\n    this.setState({\r\n      load: true,\r\n      page: 1,\r\n    });\r\n  };\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (id) => {\r\n    this.props.page(id);\r\n  };\r\n  handleDelete = (id, name) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el pedido de \" + name.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de order por API\");\r\n          return fetch(\"http://\" + host + \"/api/orders/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Pedido eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Pedido eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getPedidos());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getPedidos() {\r\n    //Variables en localStorage\r\n    let {\r\n        search,\r\n        status,\r\n        page,\r\n        order,\r\n        orderby,\r\n        host,\r\n        token,\r\n        load,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/orders\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      estado = status ? \"&status=\" + status : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\";\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de los contactos\r\n    console.log(\"Descargando ventas de API\");\r\n    fetch(url + pagina + ordenar + buscar + estado, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Mostrando lista de pedidos\");\r\n          this.setState({\r\n            pedidos: data,\r\n            load: false,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar pedidos\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(\"Orus: \" + e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Items extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: 0,\r\n      store_items_id: 0,\r\n      session: \"\",\r\n      cantidad: 1,\r\n      precio: 0,\r\n      subtotal: 0,\r\n      inStorage: 0,\r\n      producto: \"\",\r\n      out: 0,\r\n      descripcion: \"\",\r\n      itemNew: false,\r\n      itemsDb: [],\r\n      load: false,\r\n    };\r\n    this.total = 0;\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      session: this.props.session,\r\n    });\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (this.state.itemNew && this.state.producto.length === 0) {\r\n      this.inputItem.focus();\r\n    }\r\n    /*\r\n    if (this.state.itemNew && this.state.cant === 1 && this.state.id) {\r\n      this.inputCant.focus();\r\n    }\r\n    */\r\n  }\r\n\r\n  render() {\r\n    let { itemNew, itemsDb, load } = this.state;\r\n    let { items } = this.props;\r\n    this.total = 0;\r\n\r\n    return (\r\n      <table className=\"table table-sm table-striped  mt-2\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\" style={{ width: 64 }}>\r\n              Cantidad\r\n            </th>\r\n            <th scope=\"col\">Descripcion</th>\r\n            <th scope=\"col\" className=\"text-center\" style={{ width: 120 }}>\r\n              Precio\r\n            </th>\r\n            <th scope=\"col\" className=\"text-center\" style={{ width: 120 }}>\r\n              Subtotal\r\n            </th>\r\n            <th scope=\"col\" style={{ width: 60 }}></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {itemNew ? (\r\n            <React.Fragment>\r\n              <tr>\r\n                <td>\r\n                  <input\r\n                    className={\r\n                      this.state.store_items_id\r\n                        ? \"form-control\"\r\n                        : \"form-control disabled\"\r\n                    }\r\n                    disabled={this.state.store_items_id ? false : true}\r\n                    type=\"number\"\r\n                    name=\"cantidad\"\r\n                    ref={(input) => {\r\n                      this.inputCant = input;\r\n                    }}\r\n                    value={this.state.cantidad}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    className={\r\n                      !this.state.store_items_id\r\n                        ? \"form-control\"\r\n                        : \"form-control disabled\"\r\n                    }\r\n                    disabled={!this.state.store_items_id ? false : true}\r\n                    type=\"text\"\r\n                    name=\"producto\"\r\n                    autoComplete=\"off\"\r\n                    ref={(input) => {\r\n                      this.inputItem = input;\r\n                    }}\r\n                    value={this.state.producto}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                  {this.state.store_items_id ? (\r\n                    <input\r\n                      className=\"form-control\"\r\n                      type=\"text\"\r\n                      name=\"descripcion\"\r\n                      placeholder=\"Detalles\"\r\n                      value={this.state.descripcion}\r\n                      onChange={this.catchInputs}\r\n                    />\r\n                  ) : null}\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    className={\r\n                      this.state.store_items_id\r\n                        ? \"form-control\"\r\n                        : \"form-control disabled\"\r\n                    }\r\n                    disabled={this.state.store_items_id ? false : true}\r\n                    type=\"number\"\r\n                    name=\"precio\"\r\n                    value={this.state.precio}\r\n                    onChange={this.catchInputs}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    className=\"form-control disabled\"\r\n                    type=\"number\"\r\n                    name=\"subtotal\"\r\n                    value={this.state.subtotal}\r\n                    readOnly={true}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    className=\"btn btn-outline-dark btn-sm\"\r\n                    onClick={this.addItem}\r\n                  >\r\n                    <i className=\"fas fa-save\"></i>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"5\">\r\n                    <div className=\"text-center\">\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : itemsDb && itemsDb.length ? (\r\n                <tr>\r\n                  <td colSpan=\"5\">\r\n                    <div className=\"list-group\">\r\n                      {itemsDb.map((db) => {\r\n                        return (\r\n                          <a\r\n                            className=\"list-group-item list-group-item-action\"\r\n                            href={\"#\" + db.codigo}\r\n                            key={db.id}\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              this.handelClickItemDb(\r\n                                db.id,\r\n                                db.producto,\r\n                                db.precio,\r\n                                db.cantidades\r\n                              );\r\n                            }}\r\n                          >\r\n                            <div\r\n                              className=\"text-truncate\"\r\n                              style={{ maxWidth: \"90%\" }}\r\n                            >\r\n                              <span className=\"text-primary mr-2 text-uppercase\">\r\n                                ({db.codigo})\r\n                              </span>\r\n                              <label className=\"text-dark text-capitalize ml-2 mr-2\">\r\n                                {db.producto}\r\n                              </label>\r\n                              {db.marca ? (\r\n                                <span className=\"text-muted text-capitalize\">\r\n                                  / {db.marca.marca}\r\n                                </span>\r\n                              ) : null}\r\n                              {db.proveedor ? (\r\n                                <span className=\"text-muted text-capitaliz\">\r\n                                  / {db.proveedor.nombre}\r\n                                </span>\r\n                              ) : null}\r\n                            </div>\r\n                          </a>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : null}\r\n            </React.Fragment>\r\n          ) : null}\r\n          {items.length ? (\r\n            items.map((item, index) => {\r\n              this.total += item.subtotal * 1;\r\n              return (\r\n                <tr key={index}>\r\n                  <td className=\"text-right\">{item.cantidad}</td>\r\n                  <td>\r\n                    <span\r\n                      className={\r\n                        !item.inStorage\r\n                          ? \"badge badge-warning\"\r\n                          : \"badge badge-primary\"\r\n                      }\r\n                    >\r\n                      {item.producto}\r\n                      {item.descripcion ? \" (\" + item.descripcion + \")\" : null}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"text-right\">$ {item.precio.toFixed(2)}</td>\r\n                  <td className=\"text-right\">$ {item.subtotal.toFixed(2)}</td>\r\n                  <td className=\"d-print-none\">\r\n                    <button\r\n                      className={\r\n                        this.props.status\r\n                          ? \"btn btn-outline-light btn-sm disabled\"\r\n                          : \"btn btn-outline-light btn-sm\"\r\n                      }\r\n                      disabled={this.props.status ? true : false}\r\n                      onClick={(e) => {\r\n                        if (!this.props.status) this.deleteItem(index);\r\n                      }}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })\r\n          ) : (\r\n            <tr>\r\n              <td className=\"text-center\" colSpan=\"5\">\r\n                No hay articulos cargados\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n        <tfoot>\r\n          <tr>\r\n            <td className=\"text-right\" colSpan=\"2\">\r\n              {!this.props.status && !this.props.addCancel ? (\r\n                <button\r\n                  className={\r\n                    this.props.status\r\n                      ? \"btn btn-outline-warning btn-sm disabled\"\r\n                      : itemNew\r\n                      ? \"btn btn-outline-dark btn-sm\"\r\n                      : \"btn btn-outline-primary btn-sm\"\r\n                  }\r\n                  disabled={this.props.status ? true : false}\r\n                  onClick={this.handleNewItem}\r\n                >\r\n                  <i className={itemNew ? \"fas fa-undo\" : \"fas fa-plus\"}></i>\r\n                </button>\r\n              ) : null}\r\n            </td>\r\n            <th scope=\"row\" className=\"text-right\">\r\n              Subtotal\r\n            </th>\r\n            <td className=\"text-right\">$ {this.total.toFixed(2)}</td>\r\n            <td></td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    );\r\n  }\r\n\r\n  handelClickItemDb = (id, producto, precio, cant) => {\r\n    if (id) {\r\n      this.setState({\r\n        id: 0,\r\n        store_items_id: id,\r\n        producto,\r\n        precio,\r\n        subtotal: this.state.cantidad * precio,\r\n        //Verificando que exitan los productos en almacen\r\n        inStorage: cant >= this.state.cantidad ? 1 : 0,\r\n        out: cant,\r\n        itemsDb: [],\r\n      });\r\n    }\r\n  };\r\n  deleteItem = (id) => {\r\n    let { items } = this.props;\r\n    items.splice(id, 1);\r\n    this.props.ChangeInput(\"items\", items);\r\n  };\r\n  catchInputs = (e) => {\r\n    let { name, value, type } = e.target,\r\n      subtotal = 0;\r\n    if (name === \"cantidad\") {\r\n      value = value * 1;\r\n      subtotal = this.state.precio * value;\r\n    } else if (name === \"precio\") {\r\n      value = value * 1;\r\n      subtotal = this.state.cantidad * value;\r\n    } else if (name === \"descripcion\") {\r\n      subtotal = this.state.subtotal;\r\n    }\r\n    if (type === \"number\") {\r\n      value = value * 1;\r\n    }\r\n    if (name === \"producto\" && value.length > 3 && !this.state.store_items_id) {\r\n      let { load } = this.state;\r\n\r\n      //Revisamos que ya este cargando\r\n      if (!load) {\r\n        this.setState({\r\n          load: true,\r\n        });\r\n      }\r\n      if (this.timeSave) clearTimeout(this.timeSave);\r\n      this.timeSave = setTimeout(() => {\r\n        //Variables en localStorage\r\n        const varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n          url = \"http://\" + varLocalStorage.host + \"/api/store\",\r\n          search = \"?search=\" + value.replace(\"+\", \"%2b\"),\r\n          itemsPage = \"&itemsPage=6\";\r\n        //Realiza la peticion del usuario seun el id\r\n        console.log(\"Descargando datos del item\");\r\n        fetch(url + search + itemsPage, {\r\n          method: \"GET\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            Authorization: \"Bearer \" + varLocalStorage.token,\r\n          },\r\n        })\r\n          .then((response) => {\r\n            if (!response.ok) {\r\n              throw new Error(response.statusText);\r\n            }\r\n            return response.json();\r\n          })\r\n          .then((data) => {\r\n            if (data.data && data.data.length) {\r\n              console.log(\"Almacenando datos del item del DB\");\r\n              this.setState({\r\n                itemsDb: data.data,\r\n              });\r\n            } else if (data.message) {\r\n              console.log(\r\n                \"No hay articulos en la buscada de items\",\r\n                data.message\r\n              );\r\n            }\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          })\r\n          .catch((e) => {\r\n            console.error(e);\r\n            window.Swal.fire(\r\n              \"Fallo de conexion\",\r\n              \"Verifique la conexion al servidor\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          });\r\n      }, 1500);\r\n    }\r\n\r\n    this.setState({\r\n      [name]: value,\r\n      subtotal,\r\n    });\r\n  };\r\n  addItem = (e) => {\r\n    e.preventDefault();\r\n    let items = this.props.items,\r\n      item = this.state;\r\n\r\n    item.inStorage = item.out >= item.cantidad ? 1 : 0;\r\n    item.out = item.out >= item.cantidad ? 0 : item.cantidad - item.out;\r\n\r\n    delete item.itemNew;\r\n    delete item.itemsDb;\r\n    delete item.items;\r\n    items.push(item);\r\n\r\n    this.setState({\r\n      id: 0,\r\n      store_items_id: 0,\r\n      cantidad: 1,\r\n      producto: \"\",\r\n      precio: 0,\r\n      total: 0,\r\n      inStorage: 0,\r\n      out: 0,\r\n      itemNew: false,\r\n    });\r\n    this.props.ChangeInput(\"items\", items);\r\n  };\r\n  handleNewItem = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      itemNew: !this.state.itemNew,\r\n      store_items_id: 0,\r\n      cantidad: 1,\r\n      producto: \"\",\r\n      precio: 0,\r\n      subtotal: 0,\r\n      inStorage: 0,\r\n      out: 0,\r\n      itemsDb: [],\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class labOrder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      supplies: [],\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getContacts();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label>Laboratorio</label>\r\n            <select\r\n              className={\r\n                this.props.status > 1 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 1 ? true : false}\r\n              name=\"lab_id\"\r\n              value={this.props.lab_id}\r\n              onChange={this.changeInput}\r\n            >\r\n              <option value=\"0\">Seleccione un proveedor</option>\r\n              {this.state.supplies.length\r\n                ? this.state.supplies.map((s) => {\r\n                    return (\r\n                      <option key={s.id} value={s.id}>\r\n                        {s.nombre}\r\n                      </option>\r\n                    );\r\n                  })\r\n                : \"\"}\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label>Folio</label>\r\n            <input\r\n              type=\"text\"\r\n              className={\r\n                this.props.status > 1 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 1 ? true : false}\r\n              name=\"npedidolab\"\r\n              value={this.props.npedidolab}\r\n              onChange={this.changeInput}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n  getContacts = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      url = \"http://\" + varLocalStorage.host + \"/api/contacts\",\r\n      type = \"&type=1&business=1\",\r\n      //search = word ? `&search=${word}` : \"\",\r\n      page = \"?page=1\";\r\n    console.log(\"Descargando proveedores de la API\");\r\n    //Realiza la peticion de los contactos\r\n    fetch(url + page + type, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Algo salio mal, intentelo mas tarde.\");\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenado proveedores\");\r\n          this.setState({\r\n            supplies: data.data,\r\n          });\r\n        }\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class statusOrder extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label htmlFor=\"lab\">Estado</label>\r\n            <select\r\n              className=\"form-control\"\r\n              name=\"status\"\r\n              value={this.props.status}\r\n              onChange={this.changeInput}\r\n            >\r\n              <option value=\"0\">En proceso</option>\r\n              <option value=\"1\">Laboratorio</option>\r\n              <option value=\"2\">Bicelación</option>\r\n              <option value=\"3\">Terminado</option>\r\n              <option value=\"4\">Garantia</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    value = value * 1;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class bicelacionOrder extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label htmlFor=\"lab\">Caja</label>\r\n            <input\r\n              type=\"text\"\r\n              className={\r\n                this.props.status > 2 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 2 ? true : false}\r\n              name=\"ncaja\"\r\n              value={this.props.ncaja ? this.props.ncaja : \"\"}\r\n              onChange={this.changeInput}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label>Observaciones</label>\r\n            <textarea\r\n              name=\"observaciones\"\r\n              className={\r\n                this.props.status > 2 ? \"form-control disabled\" : \"form-control\"\r\n              }\r\n              disabled={this.props.status > 2 ? true : false}\r\n              value={this.props.observaciones ? this.props.observaciones : \"\"}\r\n              onChange={this.changeInput}\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    if (name === \"caja\") value = value * 1;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class garantiaOrder extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"border border-warning rounded p-2\">\r\n            <label htmlFor=\"lab\">Garantia</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeInput = (e) => {\r\n    e.preventDefault();\r\n    let { name, value } = e.target;\r\n    value = value * 1;\r\n    this.props.ChangeInput(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport SearchContact from \"../Contacts/searchContactCard\";\r\nimport Items from \"./itemsOrder\";\r\nimport ListExam from \"../Exam/listsExams\";\r\nimport LabOrder from \"./labOrder\";\r\nimport Status from \"./statusOrder\";\r\nimport Bicelacion from \"./bicelacionOrder\";\r\nimport Garantia from \"./garantiaOrder\";\r\nimport Chat from \"../Layouts/messenger\";\r\n\r\nexport default class OrderAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Recogemos valores de registro previo\r\n    let contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\"));\r\n    console.log(\"Contacto en uso: \", contact.exam_id ? \"Si\" : \"No\");\r\n    this.state = {\r\n      id: 0,\r\n      session:\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(10),\r\n      observaciones: \"\",\r\n      lab_id: 0,\r\n      npedidolab: \"\",\r\n      ncaja: 0,\r\n      items: [],\r\n      contact_id: contact && contact.id ? contact.id : 0,\r\n      usuario: \"\",\r\n      edad: 0,\r\n      exam_id: contact && contact.exam_id ? contact.exam_id : 0,\r\n      exam: {},\r\n      status: 0,\r\n      date: Date.now(),\r\n      load: true,\r\n      nota: 0,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    const id = this.props.match.params.id,\r\n      { exam_id, exam } = this.state;\r\n\r\n    if (id) {\r\n      this.getOrder(id);\r\n    } else {\r\n      if (exam_id && !exam.id) {\r\n        this.getExamById(exam_id);\r\n      }\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n        contact_id,\r\n        id,\r\n        load,\r\n        items,\r\n        nota,\r\n        status,\r\n        edad,\r\n        exam_id,\r\n        exam,\r\n      } = this.state,\r\n      { data } = this.props;\r\n    let showTabActive = true;\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-3\">\r\n          <SearchContact\r\n            contact={contact_id}\r\n            edad={this.state.edad}\r\n            status={nota ? true : status}\r\n            getIdContact={this.getIdContact}\r\n            changePage={this.changePage}\r\n          />\r\n          {contact_id ? (\r\n            <div className=\"card card-warning card-outline d-print-none mt-4\">\r\n              <div className=\"card-body\">\r\n                <Status status={status} ChangeInput={this.handleChangeInput} />\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"card card-warning card-outline\">\r\n            <div className=\"card-body\">\r\n              {contact_id && !load ? (\r\n                <React.Fragment>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-2\">\r\n                      <div className=\"border border-warning rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-warning mx-2\">\r\n                          Pedido\r\n                        </span>\r\n                        <strong className=\"text-primary\">\r\n                          {this.state.id ? this.state.id : \"Nuevo\"}\r\n                        </strong>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                      <div className=\"border border-warning rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-warning mx-2\">\r\n                          Creador\r\n                        </span>\r\n                        <strong>\r\n                          {this.state.usuario\r\n                            ? this.state.usuario\r\n                            : this.props.data.name}\r\n                        </strong>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-2\">\r\n                      <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-success mx-2\">\r\n                          Venta\r\n                        </span>\r\n                        <strong>\r\n                          {this.state.nota ? (\r\n                            <Link\r\n                              to={\"/notas/registro/\" + this.state.nota}\r\n                              className=\"text-dark\"\r\n                              onClick={(e) => {\r\n                                this.changePage(\"/notas/registro\");\r\n                              }}\r\n                            >\r\n                              {this.state.nota}\r\n                            </Link>\r\n                          ) : (\r\n                            \"--\"\r\n                          )}\r\n                        </strong>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                      <div className=\"border border-warning rounded p-2 d-flex justify-content-between align-items-center\">\r\n                        <span className=\"badge badge-pill badge-warning mx-2\">\r\n                          Fecha\r\n                        </span>\r\n                        <strong>{moment(this.state.date).format(\"ll\")}</strong>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <ul className=\"nav nav-tabs mt-4\" id=\"myTab\" role=\"tablist\">\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          (!status || status === 3) && showTabActive\r\n                            ? \"nav-link active\"\r\n                            : \"nav-link\"\r\n                        }\r\n                        href=\"#pedido\"\r\n                        data-toggle=\"tab\"\r\n                      >\r\n                        Nota\r\n                      </a>\r\n                      {(showTabActive = !status || status === 3 ? false : true)}\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a className=\"nav-link\" data-toggle=\"tab\" href=\"#exam\">\r\n                        Examen\r\n                      </a>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          status === 1 && showTabActive\r\n                            ? \"nav-link active\"\r\n                            : !status\r\n                            ? \"nav-link disabled\"\r\n                            : \"nav-link\"\r\n                        }\r\n                        data-toggle=\"tab\"\r\n                        href=\"#lab\"\r\n                      >\r\n                        Laboratorio\r\n                      </a>\r\n                      {(showTabActive = status === 1 ? false : true)}\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          status === 2\r\n                            ? \"nav-link active\"\r\n                            : !status || status === 1\r\n                            ? \"nav-link disabled\"\r\n                            : \"nav-link\"\r\n                        }\r\n                        data-toggle=\"tab\"\r\n                        href=\"#bicelacion\"\r\n                      >\r\n                        Bicelación\r\n                      </a>\r\n                      {(showTabActive = status === 2 ? false : true)}\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                      <a\r\n                        className={\r\n                          status === 4 ? \"nav-link active\" : \"nav-link disabled\"\r\n                        }\r\n                        data-toggle=\"tab\"\r\n                        href=\"#garantia\"\r\n                      >\r\n                        Garantia\r\n                      </a>\r\n                      {(showTabActive = status === 4 ? false : true)}\r\n                    </li>\r\n                  </ul>\r\n                  <div className=\"tab-content\" id=\"myTabContent\">\r\n                    <div\r\n                      className={\r\n                        !status || status === 3\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"pedido\"\r\n                    >\r\n                      <Items\r\n                        items={this.state.items}\r\n                        status={status}\r\n                        session={this.state.session}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div className=\"tab-pane fade pt-4\" id=\"exam\">\r\n                      <ListExam\r\n                        paciente={contact_id}\r\n                        edad={edad}\r\n                        exam={\r\n                          exam_id && exam.id && exam_id === exam.id ? exam : {}\r\n                        }\r\n                        page={this.changePage}\r\n                        datos={data}\r\n                        select={true}\r\n                        status={this.state.status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className={\r\n                        status === 1\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"lab\"\r\n                    >\r\n                      <LabOrder\r\n                        lab_id={this.state.lab_id ? this.state.lab_id : 0}\r\n                        npedidolab={\r\n                          this.state.npedidolab ? this.state.npedidolab : \"\"\r\n                        }\r\n                        status={status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className={\r\n                        status === 2\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"bicelacion\"\r\n                    >\r\n                      <Bicelacion\r\n                        ncaja={this.state.ncaja}\r\n                        observaciones={this.state.observaciones}\r\n                        status={this.state.status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className={\r\n                        status === 4\r\n                          ? \"tab-pane fade pt-4 show active\"\r\n                          : \"tab-pane fade pt-4\"\r\n                      }\r\n                      id=\"garantia\"\r\n                    >\r\n                      <Garantia\r\n                        status={status}\r\n                        ChangeInput={this.handleChangeInput}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </React.Fragment>\r\n              ) : this.state.load ? (\r\n                <div className=\"text-center\">\r\n                  <div className=\"spinner-border text-primary\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"alert alert-light\">\r\n                  <h4 className=\"alert-heading\">Nuevo pedido</h4>\r\n                  <p>\r\n                    <i className=\"fas fa-user mr-1\"></i> Primero seleccione al\r\n                    paciente!\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"card-footer d-print-none text-right\">\r\n              <div className=\"btn-group\" role=\"group\">\r\n                <Link\r\n                  to=\"/pedidos\"\r\n                  className=\"btn btn-dark\"\r\n                  onClick={(e) => {\r\n                    this.changePage(\"/pedidos\");\r\n                    localStorage.setItem(\r\n                      \"OrusContactInUse\",\r\n                      JSON.stringify({})\r\n                    );\r\n                  }}\r\n                >\r\n                  <i\r\n                    className={\r\n                      id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                    }\r\n                  ></i>\r\n                  <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                </Link>\r\n                <button\r\n                  className=\"btn btn-dark\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    window.print();\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-print mr-2\"></i>\r\n                  Imprimir\r\n                </button>\r\n                <button\r\n                  className={\r\n                    contact_id && items.length\r\n                      ? \"btn btn-warning\"\r\n                      : \"btn btn-warning disabled\"\r\n                  }\r\n                  onClick={this.handleSave}\r\n                  disabled={contact_id && items.length ? false : true}\r\n                >\r\n                  <i className=\"fas fa-save mr-1\"></i>\r\n                  <strong>Guardar</strong>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {contact_id && id ? (\r\n          <div className=\"col-3 d-print-none\">\r\n            <Chat data={data} table=\"orders\" idRow={id} />\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getExamById = (id) => {\r\n    //host y token\r\n    const { host, token } = this.state;\r\n    //Realiza la peticion del examen por el id\r\n    console.log(\"Descargando examen\");\r\n    fetch(\"http://\" + host + \"/api/exams/\" + id, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.data) {\r\n          console.log(\"Almacenando examenes\");\r\n          this.setState({\r\n            exam: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Orus: \", data.message);\r\n          window.Swal.fire(\"Error\", \"Al descargar el examen\", \"error\");\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire(\r\n          \"Fallo de conexion\",\r\n          \"Verifique la conexion al servidor\",\r\n          \"error\"\r\n        );\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n  handleChangeInput = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  getIdContact = (contact_id, edad) => {\r\n    this.setState({\r\n      contact_id,\r\n      edad,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { id } = this.state;\r\n\r\n    //Verificamos campos validos\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar el pedido?\"\r\n        : \"¿Esta seguro de crear un nuevo pedido?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          const { host, token } = this.state,\r\n            url = id\r\n              ? \"http://\" + host + \"/api/orders/\" + id\r\n              : \"http://\" + host + \"/api/orders\",\r\n            method = id ? \"PUT\" : \"POST\";\r\n          let body = {},\r\n            items = [];\r\n\r\n          this.state.items.map((item) => {\r\n            items.push({\r\n              cant: item.cantidad,\r\n              price: item.precio,\r\n              subtotal: item.subtotal,\r\n              inStorage: item.inStorage,\r\n              session: item.session,\r\n              out: item.out,\r\n              descripcion: item.descripcion,\r\n              store_items_id: item.store_items_id,\r\n            });\r\n            return false;\r\n          });\r\n          body = {\r\n            session: this.state.session,\r\n            observaciones: this.state.observaciones,\r\n            npedidolab: this.state.npedidolab,\r\n            ncaja: this.state.ncaja,\r\n            contact_id: this.state.contact_id,\r\n            status: this.state.status,\r\n            items: JSON.stringify(items),\r\n          };\r\n          if (this.state.exam_id) body.exam_id = this.state.exam_id;\r\n          if (this.state.lab_id) body.lab_id = this.state.lab_id;\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Pedido almacenada\");\r\n          localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Pedido actualizado con exito\"\r\n              : \"Pedido almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.setState({\r\n              id: data.data.id,\r\n              nota: data.data.nota.id,\r\n            });\r\n            this.props.history.push(`/pedidos/registro/${data.data.id}`);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el pedido\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getOrder = (id) => {\r\n    if (id > 0) {\r\n      //Variables en state\r\n      let { host, token } = this.state;\r\n      //Realiza la peticion del pedido\r\n      console.log(\"Solicitando datos de pedido a la API\");\r\n      fetch(\"http://\" + host + \"/api/orders/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            console.log(\"Mostrando datos del pedido\");\r\n            this.setState({\r\n              id,\r\n              session: data.data.session,\r\n              observaciones: data.data.observaciones,\r\n              lab_id: data.data.laboratorio ? data.data.laboratorio.id : 0,\r\n              npedidolab: data.data.folio_lab,\r\n              ncaja: data.data.caja,\r\n              items: data.data.productos,\r\n              contact_id: data.data.paciente.id,\r\n              status: data.data.estado,\r\n              usuario: data.data.created,\r\n              exam_id: data.data.examen !== null ? data.data.examen.id : 0,\r\n              exam: data.data.examen !== null ? data.data.examen : {},\r\n              date: data.data.created_at,\r\n              nota: data.data.nota ? data.data.nota.id : 0,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\r\n              \"Error\",\r\n              \"Error al descargar los pedidos\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Filter extends Component {\r\n  render() {\r\n    const { search, type, date } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"btn-group\">\r\n          <a\r\n            href=\"#Filters\"\r\n            className=\"btn btn-tool text-dark\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#filters\"\r\n          >\r\n            <i className=\"fas fa-filter\"></i>\r\n          </a>\r\n        </div>\r\n        <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"filters\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Busquedas</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"close\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n\r\n              <form className=\"modal-body\">\r\n                <div className=\"input-group mb-3\">\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"search\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Por: paciente o # de venta\"\r\n                    value={search}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Estado</label>\r\n                  <div className=\"input-group-prepend ml-4\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-address-book\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    name=\"type\"\r\n                    value={type}\r\n                    onChange={this.changeFilters}\r\n                  >\r\n                    <option value=\"\">Todos</option>\r\n                    <option value=\"0\">Adeudos</option>\r\n                    <option value=\"1\">Pagados</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"input-group mb-3\">\r\n                  <label>Fecha</label>\r\n                  <div className=\"input-group-prepend\">\r\n                    <span className=\"input-group-text\">\r\n                      <i className=\"fas fa-search\"></i>\r\n                    </span>\r\n                  </div>\r\n                  <input\r\n                    type=\"date\"\r\n                    name=\"date\"\r\n                    className=\"form-control\"\r\n                    value={date}\r\n                    onChange={this.changeFilters}\r\n                    onKeyPress={this.onKeyPressSearch}\r\n                  />\r\n                </div>\r\n              </form>\r\n\r\n              <div className=\"modal-footer\">\r\n                <div className=\"btn-group btn-group-lg\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-window-close mr-2\"></i>\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={\r\n                      search || type\r\n                        ? \"btn btn-outline-dark\"\r\n                        : \"btn btn-outline-dark disabled\"\r\n                    }\r\n                    onClick={this.onClickClean}\r\n                  >\r\n                    <i className=\"fas fa-eraser mr-2\"></i>\r\n                    Limpiar\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark\"\r\n                    onClick={this.setFilters}\r\n                    data-dismiss=\"modal\"\r\n                  >\r\n                    <i className=\"fas fa-search mr-2\"></i>\r\n                    Buscar\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  onKeyPressSearch = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      this.setFilters();\r\n    }\r\n  };\r\n  onClickClean = () => {\r\n    this.props.changeFilters(\"search\", \"\");\r\n    this.props.changeFilters(\"type\", \"\");\r\n    this.props.changeFilters(\"date\", \"\");\r\n    this.setFilters();\r\n  };\r\n  setFilters = () => {\r\n    this.props.handleChangePage(1);\r\n    window.$(\"#filters\").modal(\"hide\");\r\n  };\r\n  changeFilters = (e) => {\r\n    const { name, value } = e.target;\r\n    this.props.changeFilters(name, value);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport Header from \"../Layouts/headerTable\";\r\nimport Filter from \"./index_filter\";\r\nimport Pagination from \"../Layouts/pagination\";\r\nimport Actions from \"../Layouts/actionsTable\";\r\n\r\nexport default class Contacts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let sdd = JSON.parse(localStorage.getItem(\"OrusSales\"));\r\n    this.state = {\r\n      pedidos: {\r\n        data: [],\r\n        meta: {},\r\n      },\r\n      load: true,\r\n      page: sdd ? sdd.page : 1,\r\n      orderby: sdd ? sdd.orderby : \"created_at\",\r\n      order: sdd ? sdd.order : \"desc\",\r\n      search: sdd ? sdd.search : \"\",\r\n      type: sdd ? sdd.type : \"\",\r\n      date: sdd ? sdd.date : \"\",\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getPedidos();\r\n    localStorage.setItem(\"OrusContactInUse\", JSON.stringify({}));\r\n    localStorage.setItem(\r\n      \"OrusSales\",\r\n      JSON.stringify({\r\n        page: this.state.page,\r\n        orderby: this.state.orderby,\r\n        order: this.state.order,\r\n        search: this.state.search,\r\n        type: this.state.type,\r\n        date: this.state.date,\r\n      })\r\n    );\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (state.load === false && this.state.load === true) {\r\n      console.log(\"Recargando pedidos\");\r\n      this.getPedidos();\r\n      localStorage.setItem(\r\n        \"OrusSales\",\r\n        JSON.stringify({\r\n          page: this.state.page,\r\n          orderby: this.state.orderby,\r\n          order: this.state.order,\r\n          search: this.state.search,\r\n          type: this.state.type,\r\n          date: this.state.date,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { pedidos, load, search, type, date } = this.state,\r\n      dataHeaders = [\r\n        { name: \"Folio\", type: \"id\", filter: true },\r\n        { name: \"Cliente\" },\r\n        { name: \"Sub-total\" },\r\n        { name: \"Descuento\" },\r\n        { name: \"Total\", type: \"total\", filter: true },\r\n        { name: \"Abonos\" },\r\n        { name: \"Por pagar\" },\r\n        { name: \"Actualizado\", type: \"updated_at\", filter: true },\r\n        { name: \"Registrado\", type: \"created_at\", filter: true },\r\n      ];\r\n\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-success\">\r\n            <i className=\"fas fa-cash-register mr-1\"></i>\r\n            Listado de notas\r\n          </h3>\r\n          <div className=\"card-tools\">\r\n            <Link\r\n              to=\"/notas/registro\"\r\n              className=\"btn btn-outline-dark\"\r\n              onClick={(e) => {\r\n                this.changePage(\"/notas/registro\");\r\n              }}\r\n            >\r\n              <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n            <Filter\r\n              search={search}\r\n              type={type}\r\n              date={date}\r\n              changeFilters={this.onchangeSearch}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n            <Pagination\r\n              meta={pedidos.meta}\r\n              handleChangePage={this.handleChangePage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body table-responsive p-0\">\r\n          <table className=\"table table-sm table-bordered table-hover\">\r\n            <Header\r\n              orderby={this.state.orderby}\r\n              order={this.state.order}\r\n              data={dataHeaders}\r\n              actions={true}\r\n              handleOrder={this.handleOrder}\r\n            />\r\n            <tbody>\r\n              {load ? (\r\n                <tr>\r\n                  <td colSpan=\"10\" className=\"text-center p-4\">\r\n                    <div\r\n                      className=\"spinner-border text-primary mr-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                    <span className=\"font-weight-light font-italic\">\r\n                      Espere cargando datos de la venta\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ) : Object.keys(pedidos.data).length ? (\r\n                pedidos.data.map((pedido) => {\r\n                  return (\r\n                    <tr key={pedido.id}>\r\n                      <td>\r\n                        <span className=\"badge badge-success text-capitalize\">\r\n                          {pedido.id}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"text-uppercase\">\r\n                        <Link to={\"/notas/registro/\" + pedido.id}>\r\n                          <span className=\"badge badge-danger text-capitalize p-1\">\r\n                            {pedido.cliente.nombre}\r\n                            <i className=\"fas fa-pencil-alt ml-1\"></i>\r\n                          </span>\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {pedido.subtotal.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {pedido.descuento.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {pedido.total.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        $ {pedido.pagado.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"text-right\">\r\n                        {pedido.total - pedido.pagado <= 0 ? (\r\n                          <label className=\"text-success\">\r\n                            <i className=\"fas fa-check\"></i>\r\n                          </label>\r\n                        ) : (\r\n                          \"$ \" + (pedido.total - pedido.pagado).toFixed(2)\r\n                        )}\r\n                      </td>\r\n                      <td>{moment(pedido.updated_at).fromNow()}</td>\r\n                      <td>{moment(pedido.created_at).format(\"ll\")}</td>\r\n                      <Actions\r\n                        id={pedido.id}\r\n                        item={pedido.cliente.nombre}\r\n                        delete={pedido.pagado ? null : this.handleDelete}\r\n                        edit={\"/notas/registro/\"}\r\n                      />\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <th colSpan=\"10\" className=\"text-center\">\r\n                    No hay datos para mostrar\r\n                  </th>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <Link\r\n            to=\"/notas/registro\"\r\n            className=\"btn btn-outline-success\"\r\n            onClick={(e) => {\r\n              this.changePage(\"/notas/registro\");\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus mr-2\"></i>\r\n            <strong>Nueva nota</strong>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleFilter = () => {\r\n    this.setState({\r\n      load: true,\r\n      page: 1,\r\n    });\r\n  };\r\n  onchangeSearch = (key, value) => {\r\n    this.setState({\r\n      [key]: value,\r\n    });\r\n  };\r\n  handleOrder = (item) => {\r\n    this.setState({\r\n      orderby: item,\r\n      order: this.state.order === \"desc\" ? \"asc\" : \"desc\",\r\n      load: true,\r\n    });\r\n  };\r\n  handleChangePage = (id) => {\r\n    this.setState({\r\n      page: id,\r\n      load: true,\r\n    });\r\n  };\r\n  changePage = (id) => {\r\n    this.props.page(id);\r\n  };\r\n  handleDelete = (id, item) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar la venta de \" + item.toUpperCase() + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let { host, token } = this.state;\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de venta por API\");\r\n          return fetch(\"http://\" + host + \"/api/sales/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Venta eliminada\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Venta eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getPedidos());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  getPedidos = () => {\r\n    //Variables en localStorage\r\n    let {\r\n        host,\r\n        token,\r\n        order,\r\n        orderby,\r\n        search,\r\n        page,\r\n        type,\r\n        date,\r\n        load,\r\n      } = this.state,\r\n      url = \"http://\" + host + \"/api/sales\",\r\n      ordenar = `&orderby=${orderby}&order=${order}`,\r\n      buscar = search ? `&search=${search}` : \"\",\r\n      pagina = page > 0 ? \"?page=\" + page : \"?page=1\",\r\n      tipo = type === \"\" ? \"\" : \"&type=\" + type,\r\n      fecha = date === \"\" ? \"\" : \"&date=\" + date;\r\n\r\n    //Mandamos señal de carga si no lo he hecho\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    //Realiza la peticion de ventas\r\n    console.log(\"Descargando ventas de API\");\r\n    fetch(url + pagina + ordenar + buscar + tipo + fecha, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n          console.log(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(\"Descargando ventas\");\r\n        this.setState({\r\n          pedidos: data,\r\n          load: false,\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class AddAbono extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      metodopago: 1,\r\n      total: 0,\r\n      banco: \"\",\r\n      auth: \"\",\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"modal\" tabIndex=\"-1\" role=\"dialog\" id=\"abonos\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">Abono</h5>\r\n              <button\r\n                type=\"button\"\r\n                className=\"close\"\r\n                data-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n\r\n            <form className=\"modal-body\">\r\n              <div className=\"row mb-2\">\r\n                <div className=\"col\">\r\n                  <label>Fecha</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control-plaintext\"\r\n                    readOnly={true}\r\n                    value={moment().format(\"L\")}\r\n                  />\r\n                </div>\r\n                <div className=\"col\">\r\n                  <label>Usuario</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control-plaintext\"\r\n                    readOnly={true}\r\n                    value={this.props.user}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row mb-2\">\r\n                <div className=\"col\">\r\n                  <label>Metodo de pago</label>\r\n                  <select\r\n                    name=\"metodopago\"\r\n                    className=\"custom-select\"\r\n                    value={this.state.metodopago}\r\n                    onChange={this.onChangeValue}\r\n                  >\r\n                    <option value=\"1\">Efectivo</option>\r\n                    <option value=\"2\">Tarjeta de debito</option>\r\n                    <option value=\"3\">Tarjeta de credito</option>\r\n                    <option value=\"4\">La marina</option>\r\n                    <option value=\"5\">Cheque</option>\r\n                    <option value=\"6\">Transferencia</option>\r\n                    <option value=\"0\">Otro</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"col\">\r\n                  <label>Cantidad</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max={this.props.pay}\r\n                    className=\"form-control text-right\"\r\n                    name=\"total\"\r\n                    value={this.state.total ? this.state.total : \"\"}\r\n                    onChange={this.onChangeValue}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {this.state.metodopago !== 1 ? (\r\n                <div className=\"row mb-2\">\r\n                  <div className=\"col\">\r\n                    <label>Banco</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"banco\"\r\n                      className=\"form-control\"\r\n                      value={\r\n                        this.state.metodopago === 4\r\n                          ? \"La marina\"\r\n                          : this.state.banco\r\n                      }\r\n                      disabled={this.state.metodopago === 4 ? true : false}\r\n                      onChange={this.onChangeValue}\r\n                    />\r\n                  </div>\r\n                  <div className=\"col\">\r\n                    <label>N. Autorización</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"auth\"\r\n                      className=\"form-control\"\r\n                      value={this.state.auth}\r\n                      onChange={this.onChangeValue}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n            </form>\r\n\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-dark\"\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-success\"\r\n                onClick={this.handlePay}\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Abonar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handlePay = (e) => {\r\n    e.preventDefault();\r\n\r\n    //Verificamos campos validos\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de realizar el abono?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Guardar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          let body = this.state,\r\n            ls = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n            url = \"http://\" + ls.host + \"/api/payments\";\r\n\r\n          //Agregamos parametros de identificación\r\n          body[\"sale_id\"] = this.props.saleId;\r\n          body[\"contact_id\"] = this.props.contactId;\r\n          body[\"order_id\"] = this.props.order;\r\n\r\n          //this.props.handleLoad(true);\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos del pago a API para almacenar\");\r\n          return fetch(url, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText + \"(\" + back.message + \")\");\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Abono almacenado\");\r\n          this.props.handleChange(this.state.total);\r\n          this.setState({\r\n            metodopago: 1,\r\n            total: 0,\r\n            banco: \"\",\r\n            auth: \"\",\r\n          });\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Abono almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el abono\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  onChangeValue = (e) => {\r\n    let { name, value, type } = e.target;\r\n    if (name === \"total\") {\r\n      value = value * 1;\r\n      if (value > this.props.pay) value = this.props.pay;\r\n      else if (value < 0) value = 0;\r\n    }\r\n    if (name === \"metodopago\" || type === \"number\") value = value * 1;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class printPay extends Component {\r\n  render() {\r\n    const { id, client } = this.props;\r\n\r\n    return (\r\n      <div className=\"d-none d-print-block\" style={{ width: 340 }} id={id}>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card m-0\">\r\n              <div className=\"card-body\">\r\n                <h1 className=\"text-center\">\r\n                  <center>\r\n                    <strong>Óptica Madero</strong>\r\n                  </center>\r\n                </h1>\r\n                <h3>\r\n                  <em>\r\n                    Julio Cesar Cardenas Martinez\r\n                    <br />\r\n                    Tel: 312 312 5353\r\n                    <br />\r\n                    Av. Tecnologico 38-A, Vistahermosa, Colima, Col.\r\n                  </em>\r\n                </h3>\r\n                <hr />\r\n                <h4 className=\"text-uppercase\">\r\n                  {client && client.nombre ? client.nombre.toUpperCase() : null}\r\n                  <br />\r\n                  {client.telefonos\r\n                    ? client.telefonos[0]\r\n                      ? client.telefonos[0]\r\n                      : client.telefonos[2]\r\n                    : \"--\"}\r\n                </h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <center>\r\n              <h2 className=\"text-center\">Abono</h2>\r\n            </center>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport AddAbono from \"./abonoAdd\";\r\nimport Print from \"./print_pay\";\r\n\r\nexport default class ListAbonos extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      abonos: [],\r\n      total: 0,\r\n      load: true,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentDidMount() {\r\n    this.getPayments();\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { abonos, total, load } = this.state;\r\n    const { id, date, contact, order, pay, user, sale, cliente } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">Fecha</th>\r\n              <th scope=\"col\">Metodo de pago</th>\r\n              <th scope=\"col\">Cantidad</th>\r\n              <th scope=\"col\">Recibio</th>\r\n              <th scope=\"col\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {abonos.length && !load ? (\r\n              <React.Fragment>\r\n                {abonos.map((abono) => {\r\n                  return (\r\n                    <tr key={abono.id}>\r\n                      <td>{moment(abono.created_at).format(\"L\")}</td>\r\n                      <td>\r\n                        {this.SetMethodPayment(abono.metodo)}\r\n                        {abono.metodo !== 1 ? (\r\n                          <span className=\"ml-4\">\r\n                            {abono.banco ? abono.banco : \"--\"} /{\" \"}\r\n                            {abono.Autorizacion ? abono.Autorizacion : \"--\"}\r\n                          </span>\r\n                        ) : null}\r\n                      </td>\r\n                      <td className=\"text-right\">$ {abono.total.toFixed(2)}</td>\r\n                      <td>{abono.created_user}</td>\r\n                      <td className=\"text-right\">\r\n                        {moment(new Date()).isSame(abono.created_at, \"day\") ? (\r\n                          <button\r\n                            className=\"btn btn-black btn-sm\"\r\n                            onClick={() => {\r\n                              this.delete(abono.id);\r\n                            }}\r\n                          >\r\n                            <i className=\"fas fa-trash\"></i>\r\n                          </button>\r\n                        ) : null}\r\n\r\n                        <button\r\n                          className=\"btn btn-outline-light btn-sm\"\r\n                          onClick={() => {\r\n                            this.print(\r\n                              abono.total,\r\n                              moment(abono.created_at).format(\"L\"),\r\n                              abono.id\r\n                            );\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-print\"></i>\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </React.Fragment>\r\n            ) : load ? (\r\n              <tr>\r\n                <td colSpan=\"5\" className=\"text-center p-4\">\r\n                  <div\r\n                    className=\"spinner-border text-primary mr-4\"\r\n                    role=\"status\"\r\n                  >\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                  </div>\r\n                  <span className=\"font-weight-light font-italic\">\r\n                    Espere cargando datos de la venta\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"5\" className=\"text-center\">\r\n                  No hay abonos registrados\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <th scope=\"row\" colSpan=\"3\" className=\"text-right\">\r\n                {this.props.pay ? (\r\n                  <a\r\n                    href=\"#abonos\"\r\n                    className={\r\n                      this.props.pay\r\n                        ? \"btn btn-outline-success btn-sm mr-2\"\r\n                        : \"btn btn-outline-success btn-sm mr-2 disabled\"\r\n                    }\r\n                    data-toggle=\"modal\"\r\n                    data-target=\"#abonos\"\r\n                    aria-disabled={this.props.pay ? false : true}\r\n                  >\r\n                    <i className=\"fas fa-money-bill-wave-alt\"></i>\r\n                  </a>\r\n                ) : null}\r\n                Total: $ {total.toFixed(2)}\r\n              </th>\r\n              <td colSpan=\"2\"></td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n        <AddAbono\r\n          pay={pay}\r\n          user={user}\r\n          saleId={sale}\r\n          contactId={contact}\r\n          order={order}\r\n          handleChange={this.handleChange}\r\n          handleLoad={this.handleLoad}\r\n        />\r\n        <Print\r\n          folio={id}\r\n          date={date}\r\n          contact={contact}\r\n          client={cliente}\r\n          id=\"print_pay\"\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  delete = (id) => {\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar el abono?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm && id) {\r\n          let ls = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n\r\n          //Inicio de proceso de eliminción por API\r\n          console.log(\"Solicitud de eliminación de venta por API\");\r\n          return fetch(\"http://\" + ls.host + \"/api/payments/\" + id, {\r\n            method: \"DELETE\",\r\n            signal: this.signal,\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + ls.token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Abono eliminado\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Abono eliminado con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getPayments());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  print = (total, date, id) => {\r\n    let content = document.getElementById(\"print_pay\"),\r\n      pri = document.getElementById(\"ifmcontentstoprint\").contentWindow;\r\n\r\n    pri.document.open();\r\n    pri.document.write(content.innerHTML);\r\n    pri.document.write(\"<fieldset><h3>\");\r\n    pri.document.write(\"Fecha: \" + date);\r\n    pri.document.write(\"<br/>Folio: \" + id);\r\n    pri.document.write(\"<br/>Monto: $ \" + total.toFixed(2));\r\n    pri.document.write(\"</h3></fieldset>\");\r\n    pri.document.close();\r\n    pri.focus();\r\n    pri.print();\r\n  };\r\n  handleLoad = (load) => {\r\n    this.setState({\r\n      load,\r\n    });\r\n  };\r\n  handleChange = (total) => {\r\n    this.setState({\r\n      total: this.state.total + total,\r\n    });\r\n    this.getPayments();\r\n  };\r\n  SetMethodPayment = (status) => {\r\n    switch (status) {\r\n      case 1:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">Efectivo</span>\r\n        );\r\n      case 2:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">\r\n            Tarjeta debito\r\n          </span>\r\n        );\r\n      case 3:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">\r\n            Tarjeta Credito\r\n          </span>\r\n        );\r\n      case 4:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">La marina</span>\r\n        );\r\n      case 5:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">Cheque</span>\r\n        );\r\n      case 6:\r\n        return (\r\n          <span className=\"badge badge-success text-uppercase\">\r\n            Transferencia\r\n          </span>\r\n        );\r\n      default:\r\n        return <span className=\"badge badge-success text-uppercase\">Otro</span>;\r\n    }\r\n  };\r\n  getPayments = () => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\")),\r\n      order = \"&order=desc\",\r\n      sale = \"?sale=\" + this.props.sale;\r\n\r\n    //Mandamos señal de procesamiento\r\n    if (!this.state.load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n    //Realiza la peticion del usuario seun el id\r\n    console.log(\"Descargando datos de los pagos\");\r\n    fetch(\"http://\" + varLocalStorage.host + \"/api/payments\" + sale + order, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.alert(\"Ups!\\n Hubo un error, intentelo mas tarde\");\r\n          console.log(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.meta && data.meta.total) {\r\n          console.log(\"Almacenando abonos\");\r\n          let total = 0;\r\n          for (var i = 0; i < data.data.length; i++) {\r\n            total += data.data[i].total;\r\n          }\r\n          this.props.handleChange(\"pagado\", total * 1);\r\n          this.setState({\r\n            abonos: data.data,\r\n            total,\r\n            load: false,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        }\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class printSale extends Component {\r\n  render() {\r\n    const {\r\n      items,\r\n      descuento,\r\n      total,\r\n      saldo,\r\n      abonado,\r\n      folio,\r\n      date,\r\n      id,\r\n    } = this.props;\r\n    let totalItems = 0,\r\n      client = this.props.cliente;\r\n\r\n    return (\r\n      <div className=\"d-none d-print-block\" style={{ width: 340 }} id={id}>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card m-0\">\r\n              <div className=\"card-body\">\r\n                <h4\r\n                  className=\"text-right\"\r\n                  style={{ fontSize: 28, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <i>\r\n                    Folio: <strong>{folio}</strong>\r\n                  </i>\r\n                </h4>\r\n                <h6\r\n                  className=\"text-right mb-2\"\r\n                  style={{ fontSize: 18, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <strong>{moment(date).format(\"LL\")}</strong>\r\n                </h6>\r\n                <h2\r\n                  className=\"text-center\"\r\n                  style={{ fontSize: 54, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <center>\r\n                    <strong>Óptica Madero</strong>\r\n                  </center>\r\n                </h2>\r\n                <h4\r\n                  className=\"text-center mb-4\"\r\n                  style={{ fontSize: 22, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  <em>\r\n                    Julio Cesar Cardenas Martinez\r\n                    <br />\r\n                    Tel: 312 312 5353\r\n                    <br />\r\n                    Av. Tecnologico 38-A, Vistahermosa, Colima, Col.\r\n                  </em>\r\n                </h4>\r\n                <h4\r\n                  className=\"text-uppercase text-center mb-1\"\r\n                  style={{ fontSize: 20, fontFamily: \"sans-serif\" }}\r\n                >\r\n                  {client && client.nombre\r\n                    ? client.nombre\r\n                    : \"Venta de mostrador\"}\r\n                  <br />\r\n                  <strong>\r\n                    <em style={{ fontSize: 24 }}>\r\n                      {client && client.telefonos\r\n                        ? client.telefonos.t_movil\r\n                          ? client.telefonos.t_movil\r\n                          : client.telefonos.t_casa\r\n                          ? client.telefonos.t_casa\r\n                          : client.telefonos.t_oficina\r\n                        : \"--\"}\r\n                    </em>\r\n                  </strong>\r\n                </h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col text-center\">\r\n            <h2 style={{ fontSize: 36, fontFamily: \"sans-serif\" }}>\r\n              <strong>Pedido</strong>\r\n            </h2>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                    Cant\r\n                  </th>\r\n                  <th style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                    Descripcion\r\n                  </th>\r\n                  <th style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                    Total\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {items.map((item, index) => {\r\n                  const total = parseFloat(item.cantidad * item.precio);\r\n                  totalItems += total;\r\n                  return (\r\n                    <tr key={index} className=\"text-capitalize\">\r\n                      <td style={{ fontSize: 22, fontFamily: \"sans-serif\" }}>\r\n                        {item.cantidad}\r\n                      </td>\r\n                      <td style={{ fontSize: 22, fontFamily: \"sans-serif\" }}>\r\n                        {item.producto}\r\n                      </td>\r\n                      <td\r\n                        className=\"text-right\"\r\n                        style={{ fontSize: 24, fontFamily: \"sans-serif\" }}\r\n                      >\r\n                        {total.toFixed(2)}\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td className=\"text-right\" colSpan=\"3\">\r\n                    {descuento ? (\r\n                      <React.Fragment>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Subtotal: <label>$ {totalItems.toFixed(2)}</label>\r\n                        </h4>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Descuento: <label>$ {descuento.toFixed(2)}</label>\r\n                        </h4>\r\n                      </React.Fragment>\r\n                    ) : null}\r\n                    <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                      Total: <label>$ {total.toFixed(2)}</label>\r\n                    </h4>\r\n                    {abonado ? (\r\n                      <React.Fragment>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Abonado: <label>$ {abonado.toFixed(2)}</label>\r\n                        </h4>\r\n                        <h4 style={{ fontSize: 26, fontFamily: \"sans-serif\" }}>\r\n                          Saldo: <label>$ {saldo.toFixed(2)}</label>\r\n                        </h4>\r\n                      </React.Fragment>\r\n                    ) : null}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-center\">\r\n          <em style={{ fontSize: 22, fontFamily: \"sans-serif\" }}>\r\n            Armazones usados, viejos y/o resecos son responsabilidad del cliente\r\n          </em>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getContact = (id) => {\r\n    //Variables en localStorage\r\n    let varLocalStorage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    //Realiza busqueda de contacto\r\n    fetch(\"http://\" + varLocalStorage.host + \"/api/contacts/\" + id, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + varLocalStorage.token,\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(\"Descargando contacto: data\", data);\r\n        this.setState({\r\n          dataContact: data.data,\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class edoCuenta extends Component {\r\n  render() {\r\n    const { pay, descuento, subtotal, total, pagado } = this.props;\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title mb-4\">\r\n            <i className=\"fas fa-shield-alt mr-2\"></i>\r\n            Estado de cuenta\r\n            {!pay ? (\r\n              <span className=\"badge badge-success ml-2\">Cuenta liquidada</span>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </h5>\r\n\r\n          <div className=\"card-text form-group row\">\r\n            <label className=\"col-6\">Descuento</label>\r\n            <div className=\"col\">\r\n              <input\r\n                className={\r\n                  pagado\r\n                    ? \"form-control text-right text-success disabled\"\r\n                    : \"form-control text-right text-success\"\r\n                }\r\n                type=\"number\"\r\n                name=\"descuento\"\r\n                min=\"0\"\r\n                max={subtotal - descuento}\r\n                readOnly={pay && !pagado ? false : true}\r\n                value={descuento ? parseInt(descuento) : \"\"}\r\n                onChange={this.catchInputs}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"card-text form-group row\">\r\n            <label className=\"col-6\">Total</label>\r\n            <div className=\"col\">\r\n              <input\r\n                className=\"form-control text-right text-success\"\r\n                type=\"number\"\r\n                name=\"total\"\r\n                value={total.toFixed(2)}\r\n                onChange={this.catchInputs}\r\n                readOnly={true}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"card-text row\">\r\n            <label className=\"col-6 p-2\">Abonado</label>\r\n            <h3 className=\"col text-success p-2 text-right\">\r\n              $ {pagado.toFixed(2)}\r\n            </h3>\r\n          </div>\r\n          <div className=\"card-text row\">\r\n            <label className=\"col-6 p-2\">Saldo</label>\r\n            <h3 className=\"col text-success p-2 text-right\">\r\n              $ {pay.toFixed(2)}\r\n            </h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  catchInputs = (e) => {\r\n    this.props.catchInputs(e);\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport SearchContact from \"../Contacts/searchContactCard\";\r\nimport Items from \"../Order/itemsOrder\";\r\nimport Abonos from \"./abonos\";\r\nimport Print from \"./print_sale\";\r\nimport EdoCuenta from \"./edoCuenta\";\r\nimport Chat from \"../Layouts/messenger\";\r\n\r\nexport default class SaleAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const contact = JSON.parse(localStorage.getItem(\"OrusContactInUse\")),\r\n      id = this.props.match.params.id,\r\n      contact_id = id ? 0 : 2;\r\n\r\n    this.state = {\r\n      id: id,\r\n      session:\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(36).substring(2, 16) +\r\n        Math.random().toString(10),\r\n      descuento: 0,\r\n      subtotal: 0,\r\n      total: 0,\r\n      items: [],\r\n      contact_id: contact && contact.id ? contact.id : contact_id,\r\n      cliente: {},\r\n      order_id: 0,\r\n      status: 0,\r\n      usuario: \"\",\r\n      date: Date.now(),\r\n      load: true,\r\n      pagado: 0,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.total = 0;\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    let { id } = this.state;\r\n    this.getSales(id);\r\n  }\r\n\r\n  render() {\r\n    let {\r\n        contact_id,\r\n        cliente,\r\n        subtotal,\r\n        descuento,\r\n        pagado,\r\n        items,\r\n        status,\r\n        id,\r\n        session,\r\n        load,\r\n        date,\r\n        order_id,\r\n      } = this.state,\r\n      pay = subtotal - (descuento + pagado),\r\n      { data } = this.props,\r\n      chat = order_id ? (\r\n        <Chat data={data} table=\"orders\" idRow={order_id} pagado={pagado} />\r\n      ) : (\r\n        <Chat data={data} table=\"sales\" idRow={id} pagado={pagado} />\r\n      );\r\n\r\n    this.total = subtotal - descuento;\r\n    pay = pay > 0 ? pay : 0;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"row d-print-none\">\r\n          <div className=\"col-3\">\r\n            <SearchContact\r\n              contact={contact_id}\r\n              status={status}\r\n              getIdContact={this.getIdContact}\r\n              changePage={this.changePage}\r\n            />\r\n\r\n            {contact_id && items.length ? (\r\n              <EdoCuenta\r\n                pay={pay}\r\n                descuento={descuento}\r\n                subtotal={subtotal}\r\n                total={this.total}\r\n                pagado={pagado}\r\n                catchInputs={this.catchInputs}\r\n              />\r\n            ) : null}\r\n          </div>\r\n          <div className=\"col\">\r\n            <div className=\"card card-success card-outline\">\r\n              <div className=\"card-body\">\r\n                {contact_id && !load ? (\r\n                  <React.Fragment>\r\n                    <div className=\"row mb-4\">\r\n                      <div className=\"col-2\">\r\n                        <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                          <span className=\"badge badge-pill badge-success mx-2\">\r\n                            Venta\r\n                          </span>\r\n                          <strong>{id ? id : \"Nuevo\"}</strong>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col\">\r\n                        <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                          <span className=\"badge badge-pill badge-success mx-2\">\r\n                            Creador\r\n                          </span>\r\n                          <strong>\r\n                            {this.state.usuario\r\n                              ? this.state.usuario\r\n                              : this.props.data.name}\r\n                          </strong>\r\n                        </div>\r\n                      </div>\r\n                      {order_id ? (\r\n                        <div className=\"col-2\">\r\n                          <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                            <span className=\"badge badge-pill badge-warning mx-2\">\r\n                              Pedido\r\n                            </span>\r\n                            <strong>\r\n                              {order_id ? (\r\n                                <Link\r\n                                  to={\"/pedidos/registro/\" + order_id}\r\n                                  onClick={(e) => {\r\n                                    this.changePage(\"/pedidos/registro\");\r\n                                  }}\r\n                                >\r\n                                  {order_id}\r\n                                </Link>\r\n                              ) : null}\r\n                            </strong>\r\n                          </div>\r\n                        </div>\r\n                      ) : null}\r\n                      <div className=\"col\">\r\n                        <div className=\"border border-success rounded p-2 d-flex justify-content-between align-items-center\">\r\n                          <span className=\"badge badge-pill badge-success mx-2\">\r\n                            Fecha\r\n                          </span>\r\n                          <strong>{moment(date).format(\"ll\")}</strong>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <Items\r\n                      items={items}\r\n                      status={status && this.total === pagado ? true : false}\r\n                      session={session}\r\n                      ChangeInput={this.handleChangeInput}\r\n                      addCancel={order_id ? true : false}\r\n                    />\r\n                  </React.Fragment>\r\n                ) : load ? (\r\n                  <div className=\"text-center p-4\">\r\n                    <div\r\n                      className=\"spinner-border text-primary mr-4\"\r\n                      role=\"status\"\r\n                    >\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                    <span className=\"font-weight-light font-italic\">\r\n                      Espere cargando datos de la venta\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"alert alert-light\">\r\n                    <h4 className=\"alert-heading\">Nueva nota</h4>\r\n                    <p>\r\n                      <i className=\"fas fa-user mr-1\"></i> Primero seleccione al\r\n                      cliente!\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"card-footer text-right\">\r\n                <div className=\"btn-group\" role=\"group\">\r\n                  <Link\r\n                    to=\"/notas\"\r\n                    className=\"btn btn-dark\"\r\n                    onClick={(e) => {\r\n                      this.changePage(\"/notas\");\r\n                    }}\r\n                  >\r\n                    <i\r\n                      className={\r\n                        id ? \"fas fa-arrow-left mr-2\" : \"fas fa-ban mr-2\"\r\n                      }\r\n                    ></i>\r\n                    <strong>{id ? \"Regresar\" : \"Cancelar\"}</strong>\r\n                  </Link>\r\n                  <button\r\n                    className={\r\n                      contact_id && items.length\r\n                        ? \"btn btn-dark\"\r\n                        : \"btn btn-dark disabled\"\r\n                    }\r\n                    onClick={(e) => {\r\n                      window.print();\r\n                    }}\r\n                    disabled={contact_id && items.length ? false : true}\r\n                  >\r\n                    <i className=\"fas fa-print mr-2\"></i>\r\n                    <strong>Imprimir</strong>\r\n                  </button>\r\n                  <button\r\n                    className={\r\n                      contact_id && items.length && pay\r\n                        ? \"btn btn-success\"\r\n                        : \"btn btn-success disabled\"\r\n                    }\r\n                    onClick={this.handleSave}\r\n                    disabled={contact_id && items.length && pay ? false : true}\r\n                  >\r\n                    <i className=\"fas fa-save mr-2\"></i>\r\n                    <strong>Guardar</strong>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {contact_id && id ? (\r\n              <div className=\"card card-success card-outline\">\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title mb-4\">\r\n                    <i className=\"fas fa-money-bill mr-2\"></i>\r\n                    Ultimos Abonos\r\n                  </h5>\r\n                  <Abonos\r\n                    abonos={pagado * 1}\r\n                    sale={id * 1}\r\n                    contact={contact_id}\r\n                    cliente={cliente}\r\n                    pay={pay * 1}\r\n                    order={order_id * 1}\r\n                    user={this.props.data.name}\r\n                    handleChange={this.handleChangeInput}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          {id && contact_id ? (\r\n            <div className=\"col-3 d-print-none\">{chat}</div>\r\n          ) : null}\r\n        </div>\r\n        <Print\r\n          id=\"print_sale\"\r\n          folio={order_id ? \"P-\" + order_id : \"V-\" + id}\r\n          date={date}\r\n          items={items}\r\n          descuento={descuento}\r\n          total={this.total}\r\n          saldo={pay}\r\n          abonado={pagado}\r\n          contact={contact_id}\r\n          cliente={cliente}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  handleChangeInput = (key, value) => {\r\n    let subtotal = 0;\r\n    if (key === \"items\") {\r\n      for (var i = 0; i < value.length; i++) {\r\n        subtotal += value[i].cantidad * value[i].precio;\r\n      }\r\n    } else {\r\n      subtotal = this.state.subtotal;\r\n    }\r\n    this.setState({\r\n      [key]: value,\r\n      subtotal,\r\n    });\r\n  };\r\n  catchInputs = (e) => {\r\n    let { name, value, type } = e.target;\r\n    if (type === \"number\") value = value * 1;\r\n    if (name === \"descuento\") {\r\n      if (value >= this.state.subtotal - this.state.descuento) {\r\n        value = this.state.subtotal - 1;\r\n      }\r\n    }\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getIdContact = (contact_id, edad) => {\r\n    this.setState({\r\n      contact_id,\r\n      edad,\r\n    });\r\n  };\r\n  changePage = (e) => {\r\n    this.props.page(e);\r\n  };\r\n  handleSave = (e) => {\r\n    e.preventDefault();\r\n    let { id } = this.state;\r\n\r\n    //Verificamos campos validos\r\n\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: id\r\n        ? \"¿Esta seguro de actualizar la venta?\"\r\n        : \"¿Esta seguro de crear una nueva venta?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: id ? \"Actualizar\" : \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        if (confirm) {\r\n          //Variables\r\n          let { host, token } = this.state,\r\n            url = id\r\n              ? \"http://\" + host + \"/api/sales/\" + id\r\n              : \"http://\" + host + \"/api/sales\",\r\n            method = id ? \"PUT\" : \"POST\",\r\n            body = {},\r\n            items = [];\r\n\r\n          this.state.items.map((item) => {\r\n            items.push({\r\n              cant: item.cantidad,\r\n              price: item.precio,\r\n              subtotal: item.subtotal,\r\n              inStorage: item.inStorage,\r\n              out: item.out,\r\n              session: item.session,\r\n              store_items_id: item.store_items_id,\r\n              descripcion: item.descripcion,\r\n            });\r\n            return false;\r\n          });\r\n          body = {\r\n            session: this.state.session,\r\n            descuento: this.state.descuento,\r\n            subtotal: this.state.subtotal,\r\n            total: this.state.subtotal - this.state.descuento,\r\n            contact_id: this.state.contact_id,\r\n            order_id: this.state.order_id ? this.state.order_id : \"\",\r\n            pagado: this.state.pagado,\r\n            items: JSON.stringify(items),\r\n          };\r\n\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos a API para almacenar\");\r\n          return fetch(url, {\r\n            method: method,\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"Venta almacenada\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: id\r\n              ? \"Venta actualizada con exito\"\r\n              : \"Venta almacenada con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => {\r\n            this.setState({\r\n              id: data.data.id,\r\n              //order_id: data.data.pedido,\r\n            });\r\n            this.props.history.push(`/notas/registro/${data.data.id}`);\r\n          });\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar la venta\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getSales = (id) => {\r\n    if (id > 0) {\r\n      //Variables en state\r\n      let { host, token } = this.state;\r\n      //Realiza la peticion del pedido\r\n      console.log(\"Solicitando datos de pedido a la API\");\r\n      fetch(\"http://\" + host + \"/api/sales/\" + id, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (!response.ok) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          if (!data.message) {\r\n            const { rol } = this.props.data;\r\n            console.log(\"Mostrando datos del pedido\");\r\n            this.setState({\r\n              id: data.data.id,\r\n              session: data.data.session\r\n                ? data.data.session\r\n                : this.state.session,\r\n              items: data.data.productos,\r\n              descuento: data.data.descuento,\r\n              subtotal: data.data.subtotal,\r\n              total: data.data.total,\r\n              contact_id: data.data.cliente.id,\r\n              cliente: data.data.cliente,\r\n              usuario: data.data.created,\r\n              date: data.data.created_at,\r\n              status: !rol ? 0 : 1,\r\n              order_id: data.data.pedido,\r\n              pagado: data.data.pagado,\r\n              load: false,\r\n            });\r\n          } else {\r\n            console.error(\"Orus: \", data.message);\r\n            window.Swal.fire(\"Error\", data.message, \"error\");\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Orus:\", error);\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n          this.setState({\r\n            load: false,\r\n          });\r\n        });\r\n    } else {\r\n      this.setState({\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class ReportPay extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      rol: props.data.rol,\r\n      token: props.data.token,\r\n      total: 0,\r\n      efectivo: 0,\r\n    };\r\n    this.char = null;\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getSaleDay();\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.date !== this.props.date || props.user !== this.props.user) {\r\n      console.log(\"Recarga datos de char\");\r\n      this.getSaleDay();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { total, efectivo, rol } = this.state;\r\n    const { data } = this.props;\r\n    return (\r\n      <div className=\"card card-success card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-success\">\r\n            {data.rol ? \"Mis ventas del dia\" : \"Ventas del dia\"}\r\n          </h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <canvas id=\"donutChart\"></canvas>\r\n          <p>\r\n            {!rol ? (\r\n              <React.Fragment>\r\n                Venta: <strong>$ {total.toFixed(2)}</strong>\r\n                <br />\r\n              </React.Fragment>\r\n            ) : null}\r\n            Efectivo: <strong>$ {efectivo.toFixed(2)}</strong>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    if (name === \"user\") value = value * 1;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  getSaleDay = () => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state,\r\n      { date, user } = this.props,\r\n      url = \"http://\" + host + \"/api/saleday\",\r\n      saleDay = \"?date=\" + date,\r\n      saleUser = user ? \"&user=\" + user : \"\";\r\n\r\n    if (token && host) {\r\n      //Realiza la peticion del pedido\r\n      console.log(\"Solicitando datos a la API\");\r\n      fetch(url + saleDay + saleUser, {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          if (!res.ok) {\r\n            window.Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Ups!\\n Hubo un error al descargar las ventas\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Ok\",\r\n            });\r\n            console.log(res);\r\n          }\r\n          return res.json();\r\n        })\r\n        .then(async (data) => {\r\n          var donutChartCanvas = window\r\n              .$(\"#donutChart\")\r\n              .get(0)\r\n              .getContext(\"2d\"),\r\n            donutOptions = {\r\n              maintainAspectRatio: true,\r\n              responsive: true,\r\n            },\r\n            labels = [],\r\n            values = [],\r\n            total = 0,\r\n            efectivo = 0,\r\n            donutData = {};\r\n          if (this.char) this.char.destroy();\r\n\r\n          if (!data.message) {\r\n            console.log(\"Mostrando datos de la venta del dia\");\r\n            if (data && data.length) {\r\n              await data.map((mp) => {\r\n                labels.push(this.SetMethodPayment(mp.metodopago));\r\n                values.push(mp.total.toFixed(2));\r\n                if (mp.metodopago === 1) {\r\n                  this.props.changeState(\"ventas\", mp.total);\r\n                  efectivo = mp.total;\r\n                }\r\n                total += mp.total;\r\n                return null;\r\n              });\r\n            } else {\r\n              labels = [\"No hay datos\"];\r\n              values = [100];\r\n            }\r\n\r\n            this.setState({\r\n              total,\r\n              efectivo,\r\n            });\r\n          } else {\r\n            console.error(\"Error al cargar la venta del dia\", data.message);\r\n            labels = [\"No hay datos\"];\r\n            values = [100];\r\n          }\r\n          donutData = {\r\n            labels: labels,\r\n            datasets: [\r\n              {\r\n                data: values,\r\n                backgroundColor: [\r\n                  \"#f56954\",\r\n                  \"#00a65a\",\r\n                  \"#f39c12\",\r\n                  \"#00c0ef\",\r\n                  \"#3c8dbc\",\r\n                  \"#d2d6de\",\r\n                  \"#000\",\r\n                ],\r\n              },\r\n            ],\r\n          };\r\n          this.char = new window.Chart(donutChartCanvas, {\r\n            type: \"pie\",\r\n            data: donutData,\r\n            options: donutOptions,\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.error(e);\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error de usuario, intentelo mas tarde\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"Ok\",\r\n          });\r\n        });\r\n    }\r\n  };\r\n  SetMethodPayment = (status) => {\r\n    switch (status) {\r\n      case 1:\r\n        return \"Efectivo\";\r\n      case 2:\r\n        return \"Tarjeta debito\";\r\n      case 3:\r\n        return \"Tarjeta de credito\";\r\n      case 4:\r\n        return \"La marina\";\r\n      case 5:\r\n        return \"Cheque\";\r\n      case 6:\r\n        return \"Transferencia\";\r\n      default:\r\n        return \"Otro\";\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nexport default class Cash extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      atms: [],\r\n      efectivo: 0,\r\n      tipo: 1,\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentDidMount() {\r\n    this.getAtms();\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidUpdate(props, state) {\r\n    if (props.date !== this.props.date || props.user !== this.props.user) {\r\n      this.getAtms();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { atms, efectivo, tipo } = this.state;\r\n    let total = 0;\r\n    return (\r\n      <div className=\"card card-dark card-outline\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"card-title text-dark\">Movimientos de caja</h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <table className=\"table table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>Hora</th>\r\n                <th>Usuario</th>\r\n                <th>Tipo</th>\r\n                <th>Monto</th>\r\n                <th>D</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {atms.length ? (\r\n                atms.map((atm) => {\r\n                  total += atm.efectivo;\r\n                  return (\r\n                    <tr\r\n                      key={atm.id}\r\n                      className={\r\n                        atm.efectivo > 0 ? \"text-success\" : \"text-danger\"\r\n                      }\r\n                    >\r\n                      <td>{moment(atm.created_at).format(\"LT\")}</td>\r\n                      <td>{atm.created_user}</td>\r\n                      <td>{atm.tipo ? \"Ingreso\" : \"Egreso\"}</td>\r\n                      <td className=\"text-right\">\r\n                        $\r\n                        {atm.efectivo > 0\r\n                          ? atm.efectivo.toFixed(2)\r\n                          : (atm.efectivo * -1).toFixed(2)}\r\n                      </td>\r\n                      <th className=\"text-right\">\r\n                        <a\r\n                          href=\"#delete\"\r\n                          className=\"text-dark\"\r\n                          onClick={(e) => {\r\n                            e.preventDefault();\r\n                            this.deleteAtm(\r\n                              atm.id,\r\n                              atm.tipo,\r\n                              atm.efectivo.toFixed(2)\r\n                            );\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-trash\"></i>\r\n                        </a>\r\n                      </th>\r\n                    </tr>\r\n                  );\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"5\" className=\"text-center\">\r\n                    No hay datos\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td colSpan=\"3\" className=\"text-right\">\r\n                  <label>Total</label>\r\n                </td>\r\n                <td className=\"text-right\">$ {total.toFixed(2)}</td>\r\n                <td></td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n        <div className=\"card-footer\">\r\n          <div className=\"form-group row\">\r\n            <label className=\"col-4 col-form-label\">Efectivo</label>\r\n            <div className=\"col\">\r\n              <select\r\n                className=\"form-control\"\r\n                name=\"tipo\"\r\n                value={tipo}\r\n                onChange={this.changeState}\r\n              >\r\n                <option value=\"1\">Ingresos</option>\r\n                <option value=\"0\">Egreso</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"col\">\r\n              <input\r\n                type=\"number\"\r\n                name=\"efectivo\"\r\n                className=\"form-control text-right\"\r\n                min=\"0\"\r\n                max=\"10000\"\r\n                value={efectivo}\r\n                onChange={this.changeState}\r\n              />\r\n            </div>\r\n            <div className=\"col\">\r\n              <button\r\n                className=\"btn btn-dark\"\r\n                onClick={this.sendAtm}\r\n                disabled={efectivo > 0 ? false : true}\r\n              >\r\n                Enviar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  deleteAtm = (id, tipo, efectivo) => {\r\n    efectivo = efectivo > 0 ? efectivo : efectivo * -1;\r\n    tipo = tipo ? \"la ENTRADA\" : \"el EGRESO\";\r\n\r\n    window.Swal.fire({\r\n      title: \"Eliminar\",\r\n      text: \"¿Esta seguro de eliminar \" + tipo + \" de \" + efectivo + \"?\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      confirmButtonText: \"Eliminar\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        let { host, token } = this.state;\r\n\r\n        if (confirm && efectivo) {\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos ATM a API\");\r\n          return fetch(\"http://\" + host + \"/api/atms/\" + id, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then(async (response) => {\r\n              let back = {};\r\n              if (response.status !== 204) back = await response.json();\r\n              if (!response.ok) {\r\n                throw new Error(back.message);\r\n              }\r\n              return back;\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        console.log(\"Entrada eliminada\");\r\n        window.Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Entrada eliminada con exito\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        }).then((res) => this.getAtms());\r\n      } else if (result && !result.dismiss) {\r\n        console.log(\"Orus res: \", result);\r\n        window.Swal.fire(\r\n          \"Error\",\r\n          \"Se perdio la conexion con el servidor\",\r\n          \"error\"\r\n        );\r\n      }\r\n    });\r\n  };\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    if (name === \"tipo\") value = value * 1;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  sendAtm = () => {\r\n    window.Swal.fire({\r\n      title: \"Almacenamiento\",\r\n      text: \"¿Esta seguro de agregar un movimiento a la caja?\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#007bff\",\r\n      confirmButtonText: \"Crear\",\r\n      cancelButtonText: \"Cancelar\",\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (confirm) => {\r\n        let { host, token, efectivo, tipo } = this.state,\r\n          body = {\r\n            efectivo: tipo ? efectivo : efectivo * -1,\r\n            type: tipo,\r\n          },\r\n          url = \"http://\" + host + \"/api/atms\";\r\n        if (confirm && efectivo) {\r\n          //Actualiza el pedido o creamos un pedido nuevo según el ID\r\n          console.log(\"Enviando datos ATM a API\");\r\n          return fetch(url, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: \"Bearer \" + token,\r\n            },\r\n          })\r\n            .then((response) => {\r\n              if (!response.ok) {\r\n                throw new Error(response.statusText);\r\n              }\r\n              return response.json();\r\n            })\r\n            .catch((e) => {\r\n              console.error(\"Orus fetch\", e);\r\n              window.Swal.fire(\r\n                \"Fallo de conexion\",\r\n                \"Verifique la conexion al servidor\",\r\n                \"error\"\r\n              );\r\n            });\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      if (result && !result.dismiss && result.value) {\r\n        let data = result.value;\r\n\r\n        if (data.data) {\r\n          console.log(\"ATM almacenado\");\r\n          window.Swal.fire({\r\n            icon: \"success\",\r\n            title: \"Movimiento almacenado con exito\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          }).then((res) => this.getAtms());\r\n        } else {\r\n          window.Swal.fire(\"Error\", \"al almacenar el movimiento\", \"error\");\r\n          console.error(\"Orus res: \", data.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  getAtms = () => {\r\n    //Variables en localStorage\r\n    let { host, token } = this.state,\r\n      { date, user } = this.props,\r\n      url = \"http://\" + host + \"/api/atms\",\r\n      atmDate = \"?date=\" + date,\r\n      atmUser = user ? \"&user=\" + user : \"\";\r\n\r\n    //Realiza la peticion de los productos faltantes\r\n    console.log(\"Descargando datos de efectivo\");\r\n    fetch(url + atmDate + atmUser, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok && res.status !== 401) {\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error, intentelo mas tarde\",\r\n            icon: \"error\",\r\n          });\r\n          console.log(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then(async (data) => {\r\n        console.log(\"Almacenando datos de efectivo\");\r\n        if (!data.message) {\r\n          let efectivo = 0;\r\n          await data.data.map((atm) => {\r\n            efectivo += atm.efectivo;\r\n            return null;\r\n          });\r\n          this.props.changeState(\"caja\", efectivo);\r\n          this.setState({\r\n            atms: data.data,\r\n            efectivo: 0,\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire({\r\n          title: \"Error!\",\r\n          text: \"Ups!\\n Hubo un error, intentelo mas tarde\",\r\n          icon: \"error\",\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class DateUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      date: moment().format(\"YYYY-MM-DD\"),\r\n      user: !props.data.rol ? 0 : props.data.idUser,\r\n      users: [],\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    this.getUsers();\r\n  }\r\n\r\n  render() {\r\n    const { date, user, users } = this.state;\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-body bg-light\">\r\n          <div className=\"row mb-4\">\r\n            <h5 className=\"card-title text-secondary\">Filtros</h5>\r\n          </div>\r\n          <div className=\"form-group row\">\r\n            <label className=\"col col-form-label\">Fecha</label>\r\n            <div className=\"col\">\r\n              <input\r\n                type=\"date\"\r\n                name=\"date\"\r\n                className=\"form-control\"\r\n                value={date}\r\n                onChange={this.changeState}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group row\">\r\n            <label className=\"col col-form-label\">Usuario</label>\r\n            <div className=\"col\">\r\n              <select\r\n                name=\"user\"\r\n                className=\"form-control\"\r\n                value={user}\r\n                onChange={this.changeState}\r\n              >\r\n                <option value=\"0\">Todos</option>\r\n                {users.map((user) => {\r\n                  return (\r\n                    <option key={user.id} value={user.id}>\r\n                      {user.name}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (e) => {\r\n    let { value, name } = e.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n    this.props.changeState(name, value);\r\n  };\r\n  getUsers = () => {\r\n    let { host, token } = this.state,\r\n      url = \"http://\" + host + \"/api/users\",\r\n      orderby = \"&orderby=username&order=asc\",\r\n      rol = \"&rol=10\",\r\n      page = \"?page=1\";\r\n\r\n    //Realiza la peticion de los usuarios\r\n    console.log(\"Descargando usuarios de API\");\r\n    fetch(url + page + orderby + rol, {\r\n      method: \"GET\",\r\n      signal: this.signal,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          window.Swal.fire({\r\n            title: \"Error!\",\r\n            text: \"Ups!\\n Hubo un error al descargar usuarios de sistema\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"Ok\",\r\n          });\r\n          console.error(res);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (!data.message) {\r\n          console.log(\"Almacenando usuarios\");\r\n          this.setState({\r\n            users: data.data,\r\n          });\r\n        } else {\r\n          console.error(\"Error en la descarga de usuarios\", data.message);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        window.Swal.fire({\r\n          title: \"Error!\",\r\n          text: \"Ups!\\n Hubo un error de usuario, intentelo mas tarde\",\r\n          icon: \"error\",\r\n          confirmButtonText: \"Ok\",\r\n        });\r\n      });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class BoxCut extends Component {\r\n  render() {\r\n    const { caja, ventas } = this.props;\r\n    const total = caja + ventas;\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-body bg-light text-right\">\r\n          <h5 className=\"card-title text-secondary\">Corte de caja</h5>\r\n          <p className=\"card-text\">\r\n            <label>caja:</label> ${caja.toFixed(2)}\r\n          </p>\r\n          <p className=\"card-text\">\r\n            <label>Efectivo:</label> ${ventas.toFixed(2)}\r\n          </p>\r\n        </div>\r\n        <div className=\"card-footer text-right\">\r\n          <label>Total:</label> ${total.toFixed(2)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n//import SalesOutStock from \"../Sales/salesOutStock\";\r\nimport ReportPays from \"../Sales/reportPays\";\r\nimport Caja from \"./cash\";\r\nimport DateUser from \"./dateUser\";\r\nimport BoxCut from \"./boxCut\";\r\n\r\nexport default class Dashboard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      host: props.data.host,\r\n      token: props.data.token,\r\n      user: !props.data.rol ? \"\" : props.data.idUser,\r\n      date: moment().format(\"YYYY-MM-DD\"),\r\n      caja: 0,\r\n      ventas: 0,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { user, date, caja, ventas } = this.state;\r\n    const { data } = this.props;\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <ReportPays\r\n            data={data}\r\n            user={user}\r\n            date={date}\r\n            changeState={this.changeState}\r\n          />\r\n        </div>\r\n        <div className=\"col\">\r\n          <Caja\r\n            data={data}\r\n            user={user}\r\n            date={date}\r\n            changeState={this.changeState}\r\n          />\r\n        </div>\r\n        {!data.rol ? (\r\n          <div className=\"col-3\">\r\n            <DateUser data={data} changeState={this.changeState} />\r\n            <BoxCut caja={caja} ventas={ventas} />\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changeState = (name, value) => {\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\n\r\nexport default class NotifyAll extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      notifications: [],\r\n      rol: 0,\r\n      load: true,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.verifyUser();\r\n  }\r\n\r\n  render() {\r\n    const { notifications, load } = this.state;\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h5 className=\"card-title\">\r\n            <i className=\"fas fa-bell mr-2\"></i>\r\n            <label>Mis notificaciones</label>\r\n          </h5>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {!load ? (\r\n            <React.Fragment>\r\n              {notifications.length ? (\r\n                <div className=\"list-group\">\r\n                  {notifications.map((notify) => {\r\n                    const type = notify.type.split(\"\\\\\");\r\n                    let url = \"\";\r\n                    if (type.length === 3 && type[2] === \"ExamNotification\") {\r\n                      url = \"/consultorio/registro/\" + notify.data.id;\r\n                    }\r\n                    return (\r\n                      <a\r\n                        href={url}\r\n                        className={\r\n                          notify.read_at\r\n                            ? \"list-group-item list-group-item-action flex-column align-items-start\"\r\n                            : \"list-group-item list-group-item-action flex-column align-items-start active\"\r\n                        }\r\n                        key={notify.id}\r\n                        onClick={(e) => this.handleClickViewNotify(e, url)}\r\n                      >\r\n                        <div className=\"d-flex w-100 justify-content-between\">\r\n                          <h5 className=\"mb-1\">{type[2]}</h5>\r\n                          <small>{moment(notify.created_at).fromNow()}</small>\r\n                        </div>\r\n                        <p className=\"mb-1 text-capitalize\">\r\n                          <strong>{notify.data.paciente}</strong>\r\n                        </p>\r\n                        <small className=\"text-capitalize\">\r\n                          {notify.data.user}\r\n                        </small>\r\n                      </a>\r\n                    );\r\n                  })}\r\n                </div>\r\n              ) : (\r\n                <p className=\"card-text\">No existen notificaciones aun</p>\r\n              )}\r\n            </React.Fragment>\r\n          ) : (\r\n            <div className=\"card-text text-center\">\r\n              <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleClickViewNotify = (e, url) => {\r\n    const { page } = this.props;\r\n    e.preventDefault();\r\n    page(\"/consultorio\");\r\n    if (url) this.props.history.push(url);\r\n  };\r\n  verifyUser = () => {\r\n    //Constantes de logueo\r\n    const { data } = this.props,\r\n      { host, token } = data;\r\n\r\n    if (token !== \"\" && host !== \"\") {\r\n      fetch(\"http://\" + host + \"/api/user\", {\r\n        method: \"GET\",\r\n        signal: this.signal,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      })\r\n        .then(async (response) => {\r\n          let back = {};\r\n          if (response.status !== 204) back = await response.json();\r\n          if (!response.ok) {\r\n            throw new Error(back.message);\r\n          }\r\n          return back;\r\n        })\r\n        .then((notify) => {\r\n          this.setState({\r\n            notifications: notify.data ? notify.data.notifications : [],\r\n            rol: notify.data.rol,\r\n            load: false,\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"Orus fetch\", e);\r\n          this.setState({\r\n            load: false,\r\n          });\r\n          window.Swal.fire(\r\n            \"Fallo de conexion\",\r\n            \"Verifique la conexion al servidor\",\r\n            \"error\"\r\n          );\r\n        });\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport Navtop from \"./components/Layouts/navtop\";\r\nimport Menu from \"./components/Layouts/menu\";\r\nimport Breadcrumb from \"./components/Layouts/breadcrumb\";\r\nimport Footer from \"./components/Layouts/footer\";\r\nimport Users from \"./components/Users/index\";\r\nimport UserAdd from \"./components/Users/add\";\r\nimport Store from \"./components/Store/index\";\r\nimport StoreAdd from \"./components/Store/add\";\r\nimport Categories from \"./components/Store/categories\";\r\nimport Brands from \"./components/Store/brands\";\r\nimport Inventory from \"./components/Store/inventory\";\r\nimport Contacts from \"./components/Contacts/index\";\r\nimport ContactsAdd from \"./components/Contacts/add\";\r\nimport AddByContact from \"./components/Contacts/addByContact\";\r\nimport Tools from \"./components/Layouts/tools\";\r\nimport Exam from \"./components/Exam/index\";\r\nimport ExamAdd from \"./components/Exam/add\";\r\nimport Order from \"./components/Order/index\";\r\nimport OrderAdd from \"./components/Order/add\";\r\nimport Sales from \"./components/Sales/index\";\r\nimport SalesAdd from \"./components/Sales/add\";\r\nimport Dashboard from \"./components/Dashboard/index\";\r\nimport NotifyAllShow from \"./components/Layouts/notifyAll\";\r\n\r\nexport default class Routers extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      page: this.handleTitleSection(window.location.pathname),\r\n      company: props.data.company,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n  componentDidMount() {\r\n    //Verificamos permisos\r\n    const dir = window.location.pathname,\r\n      rol = this.props.data.rol;\r\n\r\n    if (\r\n      rol === 1 &&\r\n      (dir.match(/^\\/usuarios/g) ||\r\n        dir.match(/^\\/almacen/g) ||\r\n        dir.match(/^\\/configuraciones/g))\r\n    ) {\r\n      window.location.href = \"/\";\r\n    }\r\n    if (\r\n      rol === 2 &&\r\n      (dir.match(/^\\/pedidos/g) ||\r\n        dir.match(/^\\/usuarios/g) ||\r\n        dir.match(/^\\/almacen/g) ||\r\n        dir.match(/^\\/notas/g) ||\r\n        dir.match(/^\\/configuraciones/g))\r\n    ) {\r\n      window.location.href = \"/\";\r\n    }\r\n  }\r\n  componentDidUpdate() {\r\n    console.log(\"Recargando router: \", window.location.pathname);\r\n  }\r\n\r\n  render() {\r\n    const { data, logOut } = this.props,\r\n      { page } = this.state;\r\n\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <Navtop logOut={logOut} data={data} page={this.handlePage} />\r\n        <Menu\r\n          companyName={this.state.company}\r\n          user={data}\r\n          page={this.handlePage}\r\n          logOut={logOut}\r\n          active={page}\r\n        />\r\n        <div className=\"content-wrapper\">\r\n          <Breadcrumb title={page} />\r\n          <div className=\"content\">\r\n            <div className=\"container-fluid\">\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-12\">\r\n                  <Switch>\r\n                    <Route\r\n                      path=\"/usuarios/registro/:id?\"\r\n                      render={(props) => (\r\n                        <UserAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/usuarios\"\r\n                      render={(props) => (\r\n                        <Users {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      path=\"/almacen/registro/:id?\"\r\n                      render={(props) => (\r\n                        <StoreAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen/categorias\"\r\n                      render={(props) => (\r\n                        <Categories\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen/marcas\"\r\n                      render={(props) => (\r\n                        <Brands {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen/inventario\"\r\n                      render={(props) => (\r\n                        <Inventory\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/almacen\"\r\n                      render={(props) => (\r\n                        <Store {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      path=\"/contactos/registro/:id?\"\r\n                      render={(props) => (\r\n                        <ContactsAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/contactos/add\"\r\n                      render={(props) => (\r\n                        <AddByContact\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/contactos\"\r\n                      render={(props) => (\r\n                        <Contacts\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/consultorio/registro/:id?\"\r\n                      render={(props) => (\r\n                        <ExamAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/consultorio\"\r\n                      render={(props) => (\r\n                        <Exam {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/configuraciones\"\r\n                      render={(props) => (\r\n                        <Tools {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/pedidos/registro/:id?\"\r\n                      render={(props) => (\r\n                        <OrderAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/pedidos\"\r\n                      render={(props) => (\r\n                        <Order {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/notas/registro/:id?\"\r\n                      render={(props) => (\r\n                        <SalesAdd\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                    <Route\r\n                      extric\r\n                      path=\"/notas\"\r\n                      render={(props) => (\r\n                        <Sales {...props} data={data} page={this.handlePage} />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/notificaciones\"\r\n                      render={(props) => (\r\n                        <NotifyAllShow\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n\r\n                    <Route\r\n                      extric\r\n                      path=\"/\"\r\n                      render={(props) => (\r\n                        <Dashboard\r\n                          {...props}\r\n                          data={data}\r\n                          page={this.handlePage}\r\n                        />\r\n                      )}\r\n                    />\r\n                  </Switch>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handlePage = (title) => {\r\n    let page = this.handleTitleSection(title);\r\n    this.setState({\r\n      page,\r\n    });\r\n  };\r\n  handleTitleSection = (page) => {\r\n    //Verificamos que la variable no este vacia\r\n    page = page ? page : window.location.pathname;\r\n    //Maneja el renderiazado del componentes cuando se cambíe el componentes\r\n    if (page === \"\" || typeof page === \"undefined\" || typeof page === \"object\")\r\n      page = \"/\";\r\n    let locations = page.split(\"/\");\r\n    if (locations[1] === \"\") {\r\n      return \"dashboard\";\r\n    } else {\r\n      return locations[1];\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Main extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      host: props.host,\r\n      hostShow: false,\r\n      load: false,\r\n    };\r\n    this.controller = new AbortController();\r\n    this.signal = this.controller.signal;\r\n  }\r\n  componentWillUnmount() {\r\n    this.controller.abort(); // Cancelando cualquier carga de fetch\r\n  }\r\n\r\n  render() {\r\n    let { load, username, password, hostShow, host } = this.state,\r\n      { company } = this.props;\r\n    return (\r\n      <div className=\"login-page\">\r\n        <div className=\"login-box\">\r\n          <div className=\"login-logo\">\r\n            <a href=\".\">\r\n              <b className=\"text-primary\">Orus</b> LTE\r\n            </a>\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <div className=\"card-body login-card-body\">\r\n              <p className=\"login-box-msg\">{company}</p>\r\n              <form onSubmit={this.handleLogin}>\r\n                <div className=\"input-group mb-3\">\r\n                  <input\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Usuario\"\r\n                    name=\"username\"\r\n                    required=\"required\"\r\n                    autoFocus={hostShow ? false : true}\r\n                    onChange={this.catchInputs}\r\n                    value={username}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <div className=\"input-group-text\">\r\n                      <span className=\"fas fa-user\"></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"input-group mb-3\">\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Contraseña\"\r\n                    name=\"password\"\r\n                    required=\"required\"\r\n                    minLength=\"8\"\r\n                    maxLength=\"16\"\r\n                    pattern=\"^(?=.*[A-Z])(?=.*[!@#$&\\.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$\"\r\n                    autoComplete=\"off\"\r\n                    onChange={this.catchInputs}\r\n                    value={password}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <div className=\"input-group-text\">\r\n                      <span className=\"fas fa-lock\"></span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12 mb-4\">\r\n                    <a\r\n                      href=\"#tools\"\r\n                      onClick={this.showTools}\r\n                      className=\"text-muted\"\r\n                    >\r\n                      <i className=\"fas fa-wifi\"></i> Servidor\r\n                    </a>\r\n                    {hostShow ? (\r\n                      <div className=\"input-group mb-3\">\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Servidor\"\r\n                          name=\"host\"\r\n                          autoComplete=\"off\"\r\n                          autoFocus={hostShow ? true : false}\r\n                          onChange={this.catchInputs}\r\n                          value={host}\r\n                          onKeyPress={this.pressEnter}\r\n                        />\r\n                        <div className=\"input-group-append\">\r\n                          <div className=\"input-group-text\">\r\n                            <span className=\"fas fa-server\"></span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12 text-center\">\r\n                    {load ? (\r\n                      <div\r\n                        className=\"spinner-border text-primary\"\r\n                        role=\"status\"\r\n                      >\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    ) : (\r\n                      <button\r\n                        type=\"submit\"\r\n                        className=\"btn btn-primary btn-block\"\r\n                      >\r\n                        Iniciar sesion\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  pressEnter = (e) => {\r\n    e.preventDefault();\r\n    if (e.key === \"Enter\") {\r\n      let { host } = this.state;\r\n      window.Swal.fire({\r\n        icon: \"success\",\r\n        title: \"La conexion al servidor fue actualizada con exito: \" + host,\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      }).then((res) => {\r\n        this.setState({\r\n          hostShow: false,\r\n        });\r\n        this.props.changeState(\"host\", host);\r\n      });\r\n    }\r\n  };\r\n  showTools = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      hostShow: !this.state.hostShow,\r\n    });\r\n  };\r\n  validInputs() {\r\n    //Valida los campos del formulario\r\n    let { username, password } = this.state;\r\n    const regexUser = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\r\n      regexPass = /^(?=.*[A-Z])(?=.*[!@#$&.*])(?=.*[0-9])(?=.*[a-z]).{8,16}$/;\r\n\r\n    username = username.replace(/\\s/g, \"\").toLowerCase();\r\n\r\n    if (regexUser.test(username) && regexPass.test(password)) {\r\n      return true;\r\n    } else {\r\n      alert(\"Los datos ingresados no son validos\");\r\n      return false;\r\n    }\r\n  }\r\n  handleLogin = (e) => {\r\n    e.preventDefault();\r\n    const { host, username, password, load } = this.state;\r\n    if (!load) {\r\n      this.setState({\r\n        load: true,\r\n      });\r\n    }\r\n\r\n    if (host) {\r\n      //Manejamos el inicio de sesion aqui, declaramos primero las variables\r\n      //sobre todo la de localstorage donde viene el host a conectar\r\n      //La variable body con los datos de inicio\r\n      let valid = this.validInputs(),\r\n        body = {\r\n          email: username,\r\n          password,\r\n        };\r\n\r\n      //Si los datos de usuario son correctos manda la informacion al servidor\r\n      if (valid) {\r\n        console.log(\"Enviado credenciales al servidor\");\r\n        fetch(\"http://\" + host + \"/api/users/login\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(body),\r\n          signal: this.signal,\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        })\r\n          .then(async (response) => {\r\n            let back = {};\r\n            if (response.status !== 204) back = await response.json();\r\n            if (!response.ok) {\r\n              console.error(response, back);\r\n              throw new Error(back.message);\r\n            }\r\n            return back;\r\n          })\r\n          .then((response) => {\r\n            if (response.data) {\r\n              console.log(\"Loggin: realizado con exito\");\r\n              this.props.loginFunction(response);\r\n            }\r\n          })\r\n          .catch((message) => {\r\n            console.error(\"Orus fetch: \", message);\r\n            window.Swal.fire(\r\n              \"Fallo de servidor\",\r\n              \"Los datos no son correctos\",\r\n              \"error\"\r\n            );\r\n            this.setState({\r\n              load: false,\r\n            });\r\n          });\r\n      } else {\r\n        this.setState({\r\n          load: false,\r\n        });\r\n      }\r\n    } else {\r\n      console.error(\"No existe un valor para host\");\r\n      this.setState({\r\n        hostShow: true,\r\n        load: false,\r\n      });\r\n    }\r\n  };\r\n  catchInputs = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport Routers from \"./Routers\";\r\nimport Login from \"./components/Layouts/login\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //Variables en localStorage\r\n    let storage = JSON.parse(localStorage.getItem(\"OrusSystem\"));\r\n    //Agregamos los datos a state\r\n    this.state = {\r\n      isLogged: storage ? storage.isLogged : false,\r\n      token: storage ? storage.token : \"\",\r\n      idUser: storage ? storage.idUser : 0,\r\n      username: storage ? storage.username : \"\",\r\n      name: storage ? storage.name : \"\",\r\n      rol: storage ? storage.rol : 0,\r\n      email: storage ? storage.email : \"\",\r\n      host: storage ? storage.host : window.location.hostname,\r\n      company: storage ? storage.company : \"Optica Madero\",\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    /*Almacenamos el state en el storage*/\r\n    console.log(\"Cargando data a storage\");\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(this.state));\r\n  }\r\n  componentDidUpdate() {\r\n    //Cada que el componnte es redenrizado almacenamos la variables del\r\n    //state en localstorage\r\n    console.log(\"Actualizando data a storage\");\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(this.state));\r\n  }\r\n\r\n  render() {\r\n    //Mostramos el componente de login si isLogged no tiene sesion\r\n    //De lo contrario nos dirigimos al compenente de routers\r\n    //donde nos muestra el componente segun el path\r\n    return (\r\n      <Router>\r\n        <main>\r\n          {this.state.isLogged ? (\r\n            <Routers data={this.state} logOut={this.logOut} />\r\n          ) : (\r\n            <Login\r\n              company={this.state.company}\r\n              host={this.state.host}\r\n              loginFunction={this.login}\r\n              changeState={this.changeState}\r\n            />\r\n          )}\r\n        </main>\r\n      </Router>\r\n    );\r\n  }\r\n\r\n  changeState = (name, value) => {\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n  login = (s) => {\r\n    //Funcion que maneja el cambio de sesion en el state\r\n    this.setState({\r\n      isLogged: s.data.id ? true : false,\r\n      idUser: s.data.id,\r\n      username: s.data.username,\r\n      name: s.data.name,\r\n      email: s.data.email,\r\n      rol: s.data.rol,\r\n      token: s.token,\r\n    });\r\n  };\r\n  logOut = () => {\r\n    let session = {\r\n      isLogged: false,\r\n      token: \"\",\r\n      idUser: 0,\r\n      username: \"\",\r\n      name: \"\",\r\n      rol: 0,\r\n      email: \"\",\r\n      host: this.state.host,\r\n      company: this.state.company,\r\n    };\r\n    localStorage.setItem(\"OrusSystem\", JSON.stringify(session));\r\n    window.location.href = \"/\";\r\n  };\r\n}\r\n\r\nrender(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}